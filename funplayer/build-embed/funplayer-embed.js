
        (function() {
          if (typeof document !== 'undefined') {
            const style = document.createElement('style');
            style.textContent = "@charset \"UTF-8\";.vjs-svg-icon{display:inline-block;background-repeat:no-repeat;background-position:center;fill:currentColor;height:1.8em;width:1.8em}.vjs-svg-icon:before{content:none!important}.vjs-svg-icon:hover,.vjs-control:focus .vjs-svg-icon{filter:drop-shadow(0 0 .25em #fff)}.vjs-modal-dialog .vjs-modal-dialog-content,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-button>.vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABTsAAsAAAAAIpAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV32Y21hcAAAAYQAAAEJAAAD5p42+VxnbHlmAAACkAAADtIAABckI4l972hlYWQAABFkAAAAKwAAADYsvIjpaGhlYQAAEZAAAAAdAAAAJA+RCL1obXR4AAARsAAAABcAAAC8Q2YAAGxvY2EAABHIAAAAYAAAAGB7CIGGbWF4cAAAEigAAAAfAAAAIAFAAI9uYW1lAAASSAAAASUAAAIK1cf1oHBvc3QAABNwAAABfAAAAnXdFqh1eJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGR7yDiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGPHcRdyA4RZgQRADaGCyYAAHic7dPXbcMwAEXRK1vuvffem749XAbKV3bjBA6fXsaIgMMLEWoQJaAEFKNnlELyQ4K27zib5PNF6vl8yld+TKr5kH0+cUw0xv00Hwvx2DResUyFKrV4XoMmLdp06NKjz4AhI8ZMmDJjzoIlK9Zs2LJjz4EjJ85cuHLjziPe/0UWL17mf2tqKLz/9jK9f8tXpGCoRdPKhtS0RqFkWvVQNtSKoVYNtWaoddPXEBqG2jQ9XWgZattQO4baNdSeofYNdWCoQ0MdGerYUCeGOjXUmaHODXVhqEtDXRnq2lA3hro11J2h7g31YKhHQz0Z6tlQL4Z6NdSbod4N9WGoT9MfHF6GmhnZLxyDcRMAAAB4nJ1YC1hU17U+a5/HMA4iA3NmVBDmoQwP5TFnHlFeA4gYiUFRQINoSCBAyK3G2yi+0aipYtFcHYo2xsb4NiY3+VrNxSaX5uvt495ozNdoYoxmem2/L8HGpLc+InB279pnhlGr5mvL4eyz99nrrL32eu1/DQcc/okdYgdHOA6MQKp4r9gx0EcMHMezOalVasW5BM7NcXoSb9fFgE6KtSSBxWz1FYDPG+vMBGcKb9cebu2VS5s2aaTkCvRSf6C7Y+Ppibm5E09v7IDs2/3uZQtbD0zIyppwoHXh/93ukmyYgdePNRp65p5v+3v/9otQl2O7wP34cT88p8Md2YxpYLQZoRcy6FlSBRnwnGAe6BPMSCZo+7NJVqS0cE4uHendzhSnbPH6TDqL1+Nme5LZXkCHnGyoH0kne30WH+gswhm3q+pt/mTas9NLS64GnjmSlTPw0wVQT/ewRaBgxtydy3cuUB9/6SW+vb5yRvr+t0eOfPKJZ/9t3+4tL7xj32Xd3thCxi+ge6ifdsAN+l5+wi5HQ/cCoeull1AszS7CUfEcJzK7sKWJAdJhCd0sPM4+EY7QDm5ov08hXRQXE5bf6PV5Q5+IjW7X7Nku92Ask4l2hCRRD6TPqISiCJeQna3SCFwrhrNzXHzo4yFevBwxpzxk8WCIIfkvVEKVy32SbT8n68gzgaslpaiO2zIGIyuSb7RNf9HSuN26y/7OC1tgEmpiyA6aD4qcgTOiLThwGG0eB694FI8NHLLN6OBlRVaMxNAFS4JdXUG6mW8PwpKuYLCLXKGbu8iwYNdgO06Sn3Th+/vyZAxs8Ro30DjHe9gy8Fywi24OMm7Qyzh3MTZVOMYhLBnoC+J79lpTUyQmorjhnMwlcQ5uPEYGpDjsOkkH49BjQLQBqs3jFtFdJNlksYmoQFDArLh8Xh+Qd6Ghcsb6FUuehDi+U/lqD71K/qiegeV1imcwjl7ExwiSrf4BZyCujV6cVcFo6VX+G9IcPyFjJnUufbU/jzrL1X99as36reXl8K32nFaOr+E8jWJEcJ55DpMVfSMe95/AJaOsGBH2GJCNpiRQbK4C8BjdmQA22QY2j03Em13i2YHqtNLU1NI04Yj2HJgA6fQc6VPNpA/D+Ryks554NnVy2mB72uRUfPLsqR4N0LOBQKArwJYO+5W2fgZX8oC1HR6HjNaQTVIG2FPwnTcXXGZZfNB7TE6pTKZUwaw91XWLAoFFGcnB5PHjsckgBjbWutrL+0h5Y1xw3DRGDumsnXb3MJwXrJIN5U7m0rgJ3yG5w4he5ckFG4pmNEkOm0/xOO4r4yL87wqtQM+hiJIVp+6iG2wPBKD35ElGkDx+UfC2v1mFG1o+M3AjNFty8biKMXwzyxnZLds8wYD2BxmCPHAldPOeLsy/0BugftYhVYFAhO8SqQ0j3oK7dHJZnI/jxmUS4onlxskSF8thmvNZjIrRZwEPxr0lBuLRuz3oy/FOHCsxwOPYh2M+e9u3J5pgPYz9gp6G7C9m0A11F9ddqKMfV+4sbq45/YspOysXvT+3pdFdYNg2fHbW8Dz301MqDVuGrz0Fuh0YMW8mddrpqzST7rV9BcvqPoNvadRndWp0p8HvbiqrFj5yFQ/vNFSXDpxpLEFWp+DcrF3FT1afWshFcmCfeAMjEvO65i0Y6XijQfSRPWx3TV/Df7Km3E1l+kLt56s/rwVzuRusNMhudznkwdLaS+QNdeal2jDPP4l9qHc98vTYZOSkxzD+njBWVWjFPKgipx6DkWvXQiW8OYcewVHE5yukinDMcfGgc0opDltYKDxIGBedkzc6jSfE7tlvESCDFUw0Hx0opS+U0lHCxNottbNWSxX9zZVvEhKWUSyBpaXwBc2a98M6UqPeXAs/GDon8Ax7hsthO8cM5HU7Ad0UvRR9lHmtyQKZ4MAe814X5h9MSUkQmhf96eVJ6p90OjIiqSIjvykvr2l5U55O/fPQKD+jIomYpNyGJQ25uQ2kIikRfAmuBHCPsWqkSDEqgZ5KDI2sifS/R43MbZg0idFHbCPNxXxZws1ACVE6hAhOdJwRkJLFBLPZpRGYJ50pko6XzMkgmSx40ljik6AQcKhFnLcQE6rF7PXFe1Ocoj0T3AXgSgJTDIhHRfHlYZKuSzc6uievOJGXY+i5GJkkTp7UM3y0LqATDbtFcbdBxO7o4T25JYlEjoH0uynUh8rapkxp62QN70svSF+hT4gGPlovlmcm/ComLi7mV4kTykV9NFWjE/QrwgQ4uIcAP0rQF4VZYRP2o3PhHHzfPMJj9Ir+uzKUlrH49ntT18AVvj1sc3YGjUT/Mt2Dxawa8ArcA7bCQIpvfwAYu22vEG/No/5RvPdA7g+AelLrPwzy+LtkLPhnpIxH14m4EYq8eeMHbPEPNm6G7Nv9B4jcFPZ8bJj0SEjP3MPgQdKTqqEoy2v6G32P/Y6dxOv04AxnoAeq+GILvUavtYCBXm+BaIhuodcfrN5B/V2EYMCPh+SxavjGyPwV0x4CJgUPGT0mQaODGBACIJZGsMXwAD0LGXx7l3CdAcKMIKI+f5CepWeD0BvyU/GcdBxPF8SwejC6LGZmAURFdsSWKR5HyHld2kbdIZO1Ixx+bnnzU7n5+blPNV9jnUDWhP2tC68tbN3PVIldsQPxSAcSpjOav7Q05uXn5zW2LLvDXn9B6syscPy9iDLEMmSrJz6nYuWMipukjM0AH8JkGS+XFyMRkzSCH7KD/hwm172SAyZYumHlefr5AddrtA0O0TnwaVZxcRY9Bfukn9Gf05N1r9DV9MoBsJ1f+ZrqUvtPHizJAntWybv7hmqLt6QLuK6ZS9Fqi1jO5rDoWPZXXII5Tgajg53cIXCjDCGIcYrRIY2n6+mXOa/W0bdhau3ryiEYe2FV/5oeaIYK/5w5frCyll6/cYO8DiNhw6t1MBWmznt91QX62UF1N7l0eHBZTRGpKaqpKVIPF9UcIzmReud9TSY75+K899GHbBu6wjoR7RKKZVYiYxSPf5/2wJT5e3NAhmUbVn5KLx1Ujg0+BGvpAIh0DezInTkzF37KVocxrKU3r1+XLtAe2lO3l66kfQfB/unKY+q8N375Ru8bc4pJXfEcESU95q+p8ZNZRTWH1d9FzvUdYXk5rLkcdkEisoKKVHQW/b3GEx6tPaYcoJfOr9wAbSBnv1IHpep0OExr4LPMkpJM+j7sly7UHkOzXjoAZljHCGiyegtNlwljM0v+c19ET9Pvst09a2Mtgcf5/ZSzYO5h1156+eyydfAsxGa9XAuF6vzjh6CssLq6ECysperXX0sX5h5ZdpZe3guxsGIPEtHk/aqXX1hVqP5HYVVVISkrrNqvXorIc+5Ou91Hnr/LcD2afi6eX7UBloOcs7cOpqgGaNfs1g7bNbs9z6wASaylN69d0/TFTIz6Ws8+oGV3mE2612wRTHKcVUbhjKadebloMc+dyXgMVtVK6BwMB/+mVW09igdRBWaRtNQX59d/VD//xdQ0TCiYNj1KT9sq6Wdu5WTbqk3qDXyDaLa1fv621LS01G3z61sD6lH8lAxDLicV921s6Bf92JOYvzNYCL1khbqBXEFUzC521N5NyzNaQIWhjyFyDoBIVrAjmv2UEaLlI+c6zw1jmVIPLLLZZUTj6GxGHW+mq1tgHXR2D85p4Q934+jLbtjVLcyCdS10NVzpHqxp4Q/hK7WopY/NRGx9HGsPGdFjOjcpjBnGYMVqY/4eqT5khWEHWUup2A/pTw7pdWgsWft7ETUERL96nRg0HNFPmCYba6pylECaExX89A9WLUOVB4oKLu/o1oqSYHCgLzBUlAz8hNFDRpeSU1XT+LRmDUgPaKbYdHDn9suF/tu13nHJij0N97LfS0QmqONuyONk7zvUI6Qa0pF9f2+oABL92AT6e0U//z9YqAiWtJLU1JK0gS+1aacwamiNqK067u9ZQ8f1d4qLodMzz3uL89Z68V/Hnr++hXWUuHgw8dfi972PeTyPefu3aNNucemQ74qFuIaJnVkOu4Q+yjuwmmC1FqZpl1i4uzoPxjkpPf3Xv545tl26Rr+dOvUd+omqJzch9dOeU7f10Y64nMcKK137DccIZq2WdXtdZjbEoLSzHwiMtrjYLDxpHQW8gjMX6XFYAE2zSWVD04EGYSs9MbO6sEo20BMEAB4mpvSypsKjZ4Stgzb+c3A9/MQT2+vrBy+qvyFxLUtLlSRF/Ri2wjfZ2dus2Q8lXx4608/jnqK5OOap6NY2PSjYYnECCjiEeLJll/pbmqfeIK+ps3+MxrlEhqmTPipVP7kqlF4VhpEb6r+Q7YOJg38kJ9SHBf3NBl6+9YchfbUjb5ahLSzUM3kPHmwFAsZ5rpai0S7E5xWzZ1j+fW7zsUWP2g5NXTw52ySCTrgG0+lbw60l2Y/CB185CoA8NK+tbRKxfjy6pm5hzQRRR+cMqv1Jbiw6STivtEvt3DRcy0QEh92JlUGo2PG4tSKHl00YD6xc8CK+YPYyy3io2lN8BcSjKRzrIV6ypOAobqxViJPaT9M9Hy5szY33mp7OX/Zu89L/7Ww5vqY2Y8b0pKgoiUhG5cPDPzq8qTV/WkzUOIvXVVA96kmjcBrr3HrYC/Wn+fYP6Z7T1rqy3zknbvqma/FvVk96fNXGkuaXrdHW5JGSxZT/2I/O73v+yNWafMdzc5NdxYurHs6h86e01sLKLz9EBrg+x36rxAaED7hRnAMx7Vzu+9wabh3zG8XLQjx0ablUJzmxdErxYT3kzQSd0SSafVqF5PXgpp0OyYJ1EyNHpGUZmvK575ySzd85JSqF7IBzSAbMM04+MbE58xF3/njXOGecSaermlw2y9PsSQdytLJVr8t+wg+rR8cZYoeNxVIzNdk3Bngi8U5LAlgTFoQnzJCa5EsCgYhCaGL+qPj7TdhG31p9tej3R04N//PXxNwJvyUqwaJqRPJY98TJ5TPndmflRAkAhBfe46sfKW5wizSge08Xb7Ca/GUVs55trngkKkrUS2WPzKttaaqq+idmahugkY+W6fN0I6i3gPt/x88U4wAAeJxjYGRgYADiGU9YXsXz23xl4GZnAIFH7fO+IdMc/WBxDgYmEAUASbMKwAB4nGNgZGBgZwABjj4Ghv//OfoZGBlQgT4ARicDZAAAAHicY2BgYGAfxJijD8Fmu4EqBwCSpgKpAAAAAAAADgBoAH4AzADgAQIBQgFsAZgB7gIuAooC0AL8A2IDjAOoA+AEMASwBNoFCAVaBcAGCAYuBnAGrAb2B04HigfSCCoIcAiGCJwIyAkkCVYJiAmsCfIKIApWCsQLknicY2BkYGDQZ2hmYGcAASYg5gJCBob/YD4DABqrAdAAeJxdkE1qg0AYhl8Tk9AIoVDaVSmzahcF87PMARLIMoFAl0ZHY1BHdBJIT9AT9AQ9RQ9Qeqy+yteNMzDzfM+88w0K4BY/cNAMB6N2bUaPPBLukybCLvleeAAPj8JD+hfhMV7hC3u4wxs7OO4NzQSZcI/8Ltwnfwi75E/hAR7wJTyk/xYeY49fYQ/PztM+jbTZ7LY6OWdBJdX/pqs6NYWa+zMxa13oKrA6Uoerqi/JwtpYxZXJ1coUVmeZUWVlTjq0/tHacjmdxuL90OR8O0UEDYMNdtiSEpz5XQGqzlm30kzUdAYFFOb8R7NOZk0q2lwAyz1i7oAr1xoXvrOgtYhZx8wY5KRV269JZ5yGpmzPTjQhvY9je6vEElPOuJP3mWKnP5M3V+YAAAB4nG2ReVPbMBDF/ULi2EkDBFqO3gdHLxUzDB9IkdexBllydRD49ihO3Ckz7B/a31utZnafkkGyiXnyclxhgB0MMUKKMTLkmGCKV5hhF3vYxxwHOMRrvMERjnGCU7zFO7zHB3zEJ3zGF3zFN5zhHBe4xHf8wE/8wm8w/MEVimTYKv44XR9MSCsUjVoeHE3vjQoNsSZ4mmxZmVWPjSz7jlou6/0qKOWEJdKMtCe793/hQfqxa6XWZHMXFl56RS4TvPXSaDeoy0zUUZB109KstDK8lHo5q6Qi1hcOnqkImubPS6aqRq7mlnaEWabub4iYblba3SRmgldS0+FWdhNtt04F14JUaqkl7tcpOpJtErvNt3Bd9HRT5JWxK25Ldjvp6br4hzfFiIdSmlzTg2fSUzNrLd1LE1ynxq4OVaVoKLjzJ60UPtj1RKzHzsbjly6inVnFBS2MucviPncU7Rr7lfTxRepDs1A2j3ZHRc7PuzFYSfE3ZOd4kjwBy227hA==) format(\"woff\");font-weight:400;font-style:normal}.vjs-icon-play,.video-js .vjs-play-control .vjs-icon-placeholder,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.video-js .vjs-big-play-button .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:\"\"}.vjs-icon-pause,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pause:before,.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-volume-mute,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mute:before,.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-volume-low,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-low:before,.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-volume-mid,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-mid:before,.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-volume-high,.video-js .vjs-mute-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-volume-high:before,.video-js .vjs-mute-control .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-fullscreen-enter,.video-js .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-enter:before,.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-fullscreen-exit,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-fullscreen-exit:before,.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:\"\"}.vjs-icon-subtitles,.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-subtitles:before,.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-captions,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-captions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-captions:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-captions-button .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:\"\"}.vjs-icon-chapters,.video-js .vjs-chapters-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-chapters:before,.video-js .vjs-chapters-button .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-downloading{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-downloading:before{content:\"\"}.vjs-icon-file-download{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download:before{content:\"\"}.vjs-icon-file-download-done{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download-done:before{content:\"\"}.vjs-icon-file-download-off{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-file-download-off:before{content:\"\"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:\"\"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:\"\"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:\"\"}.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder,.video-js .vjs-volume-level,.video-js .vjs-play-progress{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before,.video-js .vjs-volume-level:before,.video-js .vjs-play-progress:before{content:\"\"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:\"\"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:\"\"}.vjs-icon-cancel,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cancel:before,.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-repeat{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-repeat:before{content:\"\"}.vjs-icon-replay,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay:before,.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-replay-5,.video-js .vjs-skip-backward-5 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay-5:before,.video-js .vjs-skip-backward-5 .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-replay-10,.video-js .vjs-skip-backward-10 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay-10:before,.video-js .vjs-skip-backward-10 .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-replay-30,.video-js .vjs-skip-backward-30 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-replay-30:before,.video-js .vjs-skip-backward-30 .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-forward-5,.video-js .vjs-skip-forward-5 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-forward-5:before,.video-js .vjs-skip-forward-5 .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-forward-10,.video-js .vjs-skip-forward-10 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-forward-10:before,.video-js .vjs-skip-forward-10 .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-forward-30,.video-js .vjs-skip-forward-30 .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-forward-30:before,.video-js .vjs-skip-forward-30 .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-audio,.video-js .vjs-audio-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio:before,.video-js .vjs-audio-button .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:\"\"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:\"\"}.vjs-icon-shuffle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-shuffle:before{content:\"\"}.vjs-icon-cast{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cast:before{content:\"\"}.vjs-icon-picture-in-picture-enter,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-enter:before,.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-picture-in-picture-exit,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-picture-in-picture-exit:before,.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before{content:\"\"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:\"\"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:\"\"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:\"\"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:\"\"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:\"\"}.vjs-icon-audio-description,.video-js .vjs-descriptions-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-audio-description:before,.video-js .vjs-descriptions-button .vjs-icon-placeholder:before{content:\"\"}.video-js{display:inline-block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex=\"-1\"]{outline:none}.video-js *,.video-js *:before,.video-js *:after{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-fluid,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-1-1{width:100%;max-width:100%}.video-js.vjs-fluid:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-1-1:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window,body.vjs-pip-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen,body.vjs-pip-window .video-js{position:fixed;overflow:hidden;z-index:1000;inset:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs),body.vjs-pip-window .video-js{width:100%!important;height:100%!important;padding-top:0!important;display:block}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-pip-container .vjs-pip-text{position:absolute;bottom:10%;font-size:2em;background-color:#000000b3;padding:.5em;text-align:center;width:100%}.vjs-layout-tiny.vjs-pip-container .vjs-pip-text,.vjs-layout-x-small.vjs-pip-container .vjs-pip-text,.vjs-layout-small.vjs-pip-container .vjs-pip-text{bottom:0;font-size:1.4em}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:50%;left:50%;padding:0;margin-top:-.81666em;margin-left:-1.5em;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-button .vjs-svg-icon{width:1em;height:1em;position:absolute;top:50%;left:50%;line-height:1;transform:translate(-50%,-50%)}.video-js:hover .vjs-big-play-button,.video-js .vjs-big-play-button:focus{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button,.vjs-error .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause:not(.vjs-seeking,.vjs-scrubbing,.vjs-error) .vjs-big-play-button{display:block}.video-js button{background:none;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.video-js.vjs-spatial-navigation-enabled .vjs-button:focus{outline:.0625em solid white;box-shadow:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:#000c;background:linear-gradient(180deg,#000c,#fff0);overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{display:flex;justify-content:center;list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover,.js-focus-visible .vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover,.js-focus-visible .vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.vjs-menu li.vjs-selected .vjs-svg-icon,.vjs-menu li.vjs-selected:focus .vjs-svg-icon,.vjs-menu li.vjs-selected:hover .vjs-svg-icon,.js-focus-visible .vjs-menu li.vjs-selected:hover .vjs-svg-icon{fill:#000}.video-js .vjs-menu *:not(.vjs-selected):focus:not(:focus-visible),.js-focus-visible .vjs-menu *:not(.vjs-selected):focus:not(.focus-visible){background:none}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0em;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-pip-window .vjs-menu-button-popup .vjs-menu{left:unset;right:1em}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu,.vjs-menu-button-popup .vjs-menu.vjs-lock-showing{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline:hover,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline.vjs-slider-active{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline:hover .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline.vjs-slider-active .vjs-menu{display:block;opacity:1}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.video-js.vjs-spatial-navigation-enabled .vjs-control-bar{gap:1px}.video-js:not(.vjs-controls-disabled,.vjs-using-native-controls,.vjs-error) .vjs-control-bar.vjs-lock-showing{display:flex!important}.vjs-has-started .vjs-control-bar,.vjs-audio-only-mode .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar,.vjs-error .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.vjs-button>.vjs-svg-icon{display:inline-block}.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before,.video-js .vjs-control:focus{text-shadow:0em 0em 1em white}.video-js *:not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder,.video-js.vjs-scrubbing.vjs-touch-enabled .vjs-progress-control .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-play-progress,.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;line-height:.35em;z-index:1}.vjs-svg-icons-enabled .vjs-play-progress:before{content:none!important}.vjs-play-progress .vjs-svg-icon{position:absolute;top:-.35em;right:-.4em;width:.9em;height:.9em;pointer-events:none;line-height:.15em;z-index:1}.video-js .vjs-load-progress{background:#73859f80}.video-js .vjs-load-progress div{background:#73859fbf}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js.vjs-scrubbing.vjs-touch-enabled .vjs-progress-control .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.video-js .vjs-progress-control:hover .vjs-mouse-display,.video-js.vjs-scrubbing.vjs-touch-enabled .vjs-progress-control .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display,.video-js.vjs-touch-enabled:not(.vjs-scrubbing) .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0em 0em 1em white;box-shadow:0 0 1em #fff}.video-js.vjs-spatial-navigation-enabled .vjs-slider:focus{outline:.0625em solid white}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-svg-icons-enabled .vjs-volume-level:before{content:none}.vjs-volume-level .vjs-svg-icon{position:absolute;width:.9em;height:.9em;pointer-events:none;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{line-height:.35em;right:-.5em}.vjs-slider-horizontal .vjs-volume-level .vjs-svg-icon{right:-.3em;transform:translateY(-50%)}.vjs-slider-vertical .vjs-volume-level .vjs-svg-icon{top:-.55em;transform:translate(-50%)}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;cursor:pointer;margin:0;padding:0;position:absolute;inset:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster,.vjs-pip-container.vjs-has-started .vjs-poster{display:block}.vjs-poster img{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.video-js:not(.vjs-live) .vjs-live-control,.video-js.vjs-liveui .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-svg-icons-enabled .vjs-seek-to-live-control{line-height:0}.vjs-seek-to-live-control .vjs-svg-icon{width:1em;height:1em;pointer-events:none;fill:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-svg-icon{fill:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.vjs-live .vjs-time-divider,.video-js .vjs-current-time,.video-js .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-normalise-time-controls:not(.vjs-live) .vjs-time-control{display:flex}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;inset:0 0 3em;pointer-events:none}.vjs-error .vjs-text-track-display{display:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js.vjs-force-center-align-cues .vjs-text-track-cue{text-align:center!important;width:80%!important}@supports not (inset: 10px){.video-js .vjs-text-track-display>div{inset:0}}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control,.vjs-pip-window .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control,.vjs-pip-window .vjs-fullscreen-control{display:none}.vjs-playback-rate>.vjs-menu-button,.vjs-playback-rate .vjs-playback-rate-value{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:.85;text-align:left;border:.6em solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:5em;height:5em;border-radius:50%;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:flex;justify-content:center;align-items:center;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-error .vjs-loading-spinner{display:none}.vjs-loading-spinner:before,.vjs-loading-spinner:after{content:\"\";position:absolute;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:before,.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after{animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-svg-icon{width:1.5em;height:1.5em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:\"\";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-descriptions-menu-item .vjs-menu-item-text .vjs-icon-placeholder,.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-descriptions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before,.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:\" \";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover{width:auto;width:initial}.video-js.vjs-layout-x-small .vjs-progress-control,.video-js.vjs-layout-tiny .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-spatial-navigation-enabled .vjs-modal-dialog.vjs-text-track-settings{height:80%}.vjs-error .vjs-text-track-settings{display:none}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-font,.vjs-text-track-settings .vjs-track-settings-controls{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display: grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-text-track-settings select{font-size:inherit}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:10px;border:none}.vjs-text-track-settings fieldset span{display:inline-block;padding:0 .6em .8em}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;font-weight:700;font-size:1.2em}.vjs-text-track-settings .vjs-label{margin:0 .5em .5em 0}.vjs-track-settings-controls button:focus,.vjs-track-settings-controls button:active{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}.vjs-title-bar{background:#000000e6;background:linear-gradient(180deg,#000000e6,#000000b3 60%,#0000);font-size:1.2em;line-height:1.5;transition:opacity .1s;padding:.666em 1.333em 4em;pointer-events:none;position:absolute;top:0;width:100%}.vjs-error .vjs-title-bar{display:none}.vjs-title-bar-title,.vjs-title-bar-description{margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.vjs-title-bar-title{font-weight:700;margin-bottom:.333em}.vjs-playing.vjs-user-inactive .vjs-title-bar{opacity:0;transition:opacity 1s}.video-js .vjs-skip-forward-5,.video-js .vjs-skip-forward-10,.video-js .vjs-skip-forward-30,.video-js .vjs-skip-backward-5,.video-js .vjs-skip-backward-10,.video-js .vjs-skip-backward-30{cursor:pointer}.video-js .vjs-transient-button{position:absolute;height:3em;display:flex;align-items:center;justify-content:center;background-color:#32323280;cursor:pointer;opacity:1;transition:opacity 1s}.video-js:not(.vjs-has-started) .vjs-transient-button{display:none}.video-js.not-hover .vjs-transient-button:not(.force-display),.video-js.vjs-user-inactive .vjs-transient-button:not(.force-display){opacity:0}.video-js .vjs-transient-button span{padding:0 .5em}.video-js .vjs-transient-button.vjs-left{left:1em}.video-js .vjs-transient-button.vjs-right{right:1em}.video-js .vjs-transient-button.vjs-top{top:1em}.video-js .vjs-transient-button.vjs-near-top{top:4em}.video-js .vjs-transient-button.vjs-bottom{bottom:4em}.video-js .vjs-transient-button:hover{background-color:#323232e6}@media print{.video-js>*:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js *:focus:not(.focus-visible){outline:none}.video-js *:focus:not(:focus-visible){outline:none}*,*:before,*:after{box-sizing:border-box}html,body{margin:0;padding:0;font-family:var(--fp-font-family);color:var(--fp-text-color);background:var(--fp-background-color)}button,input,select,textarea{margin:0;padding:0;border:none;background:none;font-family:inherit;font-size:inherit;color:inherit}button{cursor:pointer}a{color:inherit;text-decoration:none}.fp-funplayer{--fp-primary-color: #FF4B4B;--fp-background-color: #FFFFFF;--fp-secondary-background-color: #F0F2F6;--fp-text-color: #262730;--fp-border-color: #E6EBF5;--fp-font-family: \"Source Sans Pro\", sans-serif;--fp-font-code: \"Source Code Pro\", monospace;--fp-base-radius: .5rem;--fp-spacing: .5rem;--fp-hover-color: color-mix(in srgb, var(--fp-primary-color) 10%, transparent);--fp-focus-color: color-mix(in srgb, var(--fp-primary-color) 25%, transparent);--fp-disabled-color: color-mix(in srgb, var(--fp-text-color) 30%, transparent);--fp-tertiary-background-color: color-mix(in srgb, var(--fp-background-color) 50%, var(--fp-secondary-background-color))}.fp-funplayer[data-theme=dark]{--fp-background-color: #0E1117;--fp-secondary-background-color: #262730;--fp-text-color: #FAFAFA;--fp-border-color: #464954;--fp-logo-filter: brightness(0) invert(1)}.fp-layout-horizontal,.fp-status-bar,.fp-logging-header,.fp-actuator-settings-header,.fp-channel-settings-header,.fp-buttplug-settings,.fp-haptic-settings-actuators-header{display:flex;align-items:center;justify-content:space-between;gap:var(--fp-spacing)}.fp-layout-row,.fp-playlist-item-info,.fp-playlist-item,.fp-status-bar-controls,.fp-logging-actions,.fp-logging-title,.fp-haptic-visualizer-config-row,.fp-actuator-settings-invert-toggle,.fp-actuator-settings-controls,.fp-channel-settings-actions,.fp-channel-settings-field,.fp-channel-settings-channel,.fp-buttplug-settings-actions,.fp-buttplug-settings-status,.fp-haptic-settings-url-input-group,.fp-haptic-settings-scale-input-group,.fp-haptic-settings-offset-input-group,.fp-haptic-settings-connection-controls,.fp-haptic-settings-master-controls{display:flex;align-items:center;gap:var(--fp-spacing)}.fp-layout-column,.fp-playlist-item-content,.fp-actuator-settings-scale-control,.fp-actuator-settings-offset-control,.fp-actuator-settings-expanded,.fp-haptic-settings-actuators-list,.fp-haptic-settings-url-control,.fp-haptic-settings-rate-control,.fp-haptic-settings-scale-control,.fp-haptic-settings-offset-control{display:flex;flex-direction:column;gap:calc(var(--fp-spacing) * .5)}.fp-flex,.fp-status-bar-status,.fp-haptic-visualizer-config-range,.fp-actuator-settings-scale-control,.fp-actuator-settings-offset-control,.fp-actuator-settings-channel-select,.fp-channel-settings-field-select,.fp-channel-settings-field,.fp-buttplug-settings-status,.fp-haptic-settings-url-input,.fp-haptic-settings-scale-range,.fp-haptic-settings-offset-range,.fp-haptic-settings-url-control,.fp-haptic-settings-rate-control,.fp-haptic-settings-scale-control,.fp-haptic-settings-offset-control{flex:1}.fp-no-shrink,.fp-status-bar-controls,.fp-haptic-visualizer-config-label,.fp-channel-settings-field-label,.fp-channel-settings-channel-name,.fp-buttplug-settings-actions{flex-shrink:0}.fp-section,.fp-haptic-visualizer-config,.fp-haptic-settings-expanded{padding:calc(var(--fp-spacing) * 2)}.fp-section-compact,.fp-status-bar,.fp-haptic-visualizer-config,.fp-actuator-settings-error,.fp-actuator-settings-header,.fp-channel-settings-header,.fp-buttplug-settings{padding:var(--fp-spacing) calc(var(--fp-spacing) * 2);min-height:40px}.fp-btn,.fp-status-bar-visualizer-btn,.fp-status-bar-debug-btn,.fp-status-bar-playlist-btn,.fp-logging-clear-btn,.fp-logging-download-btn,.fp-logging-copy-btn,.fp-logging-autoscroll-btn,.fp-haptic-visualizer-config-btn,.fp-actuator-settings-expand-toggle,.fp-channel-settings-cancel-btn,.fp-channel-settings-validate-btn,.fp-channel-settings-toggle,.fp-buttplug-settings-toggle,.fp-buttplug-settings-rescan-btn,.fp-buttplug-settings-connect-btn,.fp-buttplug-settings-disconnect-btn,.fp-haptic-settings-automap-btn,.fp-haptic-settings-url-reset-btn,.fp-btn-ghost,.fp-btn-primary{font-family:var(--fp-font-family);font-size:.8rem;background:var(--fp-background-color);color:var(--fp-text-color);border:1px solid var(--fp-border-color);border-radius:calc(var(--fp-base-radius) * .6);padding:calc(var(--fp-spacing) * .5) var(--fp-spacing);cursor:pointer;transition:all .15s ease;min-height:28px;white-space:nowrap}.fp-btn:hover,.fp-status-bar-visualizer-btn:hover,.fp-status-bar-debug-btn:hover,.fp-status-bar-playlist-btn:hover,.fp-logging-clear-btn:hover,.fp-logging-download-btn:hover,.fp-logging-copy-btn:hover,.fp-logging-autoscroll-btn:hover,.fp-haptic-visualizer-config-btn:hover,.fp-actuator-settings-expand-toggle:hover,.fp-channel-settings-cancel-btn:hover,.fp-channel-settings-validate-btn:hover,.fp-channel-settings-toggle:hover,.fp-buttplug-settings-toggle:hover,.fp-buttplug-settings-rescan-btn:hover,.fp-buttplug-settings-connect-btn:hover,.fp-buttplug-settings-disconnect-btn:hover,.fp-haptic-settings-automap-btn:hover,.fp-haptic-settings-url-reset-btn:hover,.fp-btn-ghost:hover,.fp-btn-primary:hover{background:var(--fp-hover-color);border-color:var(--fp-primary-color)}.fp-btn-primary,.fp-channel-settings-validate-btn,.fp-buttplug-settings-connect-btn,.fp-buttplug-settings-disconnect-btn{background:var(--fp-primary-color);color:#fff;border-color:var(--fp-primary-color)}.fp-btn-primary:hover,.fp-channel-settings-validate-btn:hover,.fp-buttplug-settings-connect-btn:hover,.fp-buttplug-settings-disconnect-btn:hover{opacity:.9}.fp-btn-ghost,.fp-status-bar-visualizer-btn,.fp-status-bar-debug-btn,.fp-status-bar-playlist-btn,.fp-logging-clear-btn,.fp-logging-download-btn,.fp-logging-copy-btn,.fp-logging-autoscroll-btn,.fp-haptic-visualizer-config-btn,.fp-actuator-settings-expand-toggle,.fp-channel-settings-cancel-btn,.fp-channel-settings-toggle,.fp-buttplug-settings-toggle,.fp-buttplug-settings-rescan-btn,.fp-haptic-settings-url-reset-btn{background:none;border:none}.fp-btn-ghost:hover,.fp-status-bar-visualizer-btn:hover,.fp-status-bar-debug-btn:hover,.fp-status-bar-playlist-btn:hover,.fp-logging-clear-btn:hover,.fp-logging-download-btn:hover,.fp-logging-copy-btn:hover,.fp-logging-autoscroll-btn:hover,.fp-haptic-visualizer-config-btn:hover,.fp-actuator-settings-expand-toggle:hover,.fp-channel-settings-cancel-btn:hover,.fp-channel-settings-toggle:hover,.fp-buttplug-settings-toggle:hover,.fp-buttplug-settings-rescan-btn:hover,.fp-haptic-settings-url-reset-btn:hover{background:none;border-color:none}.fp-input,.fp-haptic-settings-scale-number,.fp-haptic-settings-offset-number,.fp-haptic-settings-url-input,.fp-haptic-settings-scale-range,.fp-haptic-settings-offset-range,.fp-select,.fp-actuator-settings-channel-select,.fp-channel-settings-field-select,.fp-buttplug-settings-device-select,.fp-haptic-settings-rate-select{font-family:var(--fp-font-family);font-size:.8rem;background:var(--fp-background-color);color:var(--fp-text-color);border:1px solid var(--fp-border-color);border-radius:calc(var(--fp-base-radius) * .5);padding:calc(var(--fp-spacing) * .5);transition:border-color .15s ease;min-height:28px}.fp-input:hover,.fp-haptic-settings-scale-number:hover,.fp-haptic-settings-offset-number:hover,.fp-haptic-settings-url-input:hover,.fp-haptic-settings-scale-range:hover,.fp-haptic-settings-offset-range:hover,.fp-select:hover,.fp-actuator-settings-channel-select:hover,.fp-channel-settings-field-select:hover,.fp-buttplug-settings-device-select:hover,.fp-haptic-settings-rate-select:hover,.fp-input:focus,.fp-haptic-settings-scale-number:focus,.fp-haptic-settings-offset-number:focus,.fp-haptic-settings-url-input:focus,.fp-haptic-settings-scale-range:focus,.fp-haptic-settings-offset-range:focus,.fp-select:focus,.fp-actuator-settings-channel-select:focus,.fp-channel-settings-field-select:focus,.fp-buttplug-settings-device-select:focus,.fp-haptic-settings-rate-select:focus{outline:none;border-color:var(--fp-primary-color)}.fp-input:focus,.fp-haptic-settings-scale-number:focus,.fp-haptic-settings-offset-number:focus,.fp-haptic-settings-url-input:focus,.fp-haptic-settings-scale-range:focus,.fp-haptic-settings-offset-range:focus,.fp-select:focus,.fp-actuator-settings-channel-select:focus,.fp-channel-settings-field-select:focus,.fp-buttplug-settings-device-select:focus,.fp-haptic-settings-rate-select:focus{box-shadow:0 0 0 2px var(--fp-focus-color)}.fp-input[type=number],[type=number].fp-haptic-settings-scale-number,[type=number].fp-haptic-settings-offset-number,[type=number].fp-haptic-settings-url-input,[type=number].fp-haptic-settings-scale-range,[type=number].fp-haptic-settings-offset-range,[type=number].fp-select,[type=number].fp-actuator-settings-channel-select,[type=number].fp-channel-settings-field-select,[type=number].fp-buttplug-settings-device-select,[type=number].fp-haptic-settings-rate-select{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}.fp-input[type=number]::-webkit-outer-spin-button,[type=number].fp-haptic-settings-scale-number::-webkit-outer-spin-button,[type=number].fp-haptic-settings-offset-number::-webkit-outer-spin-button,[type=number].fp-haptic-settings-url-input::-webkit-outer-spin-button,[type=number].fp-haptic-settings-scale-range::-webkit-outer-spin-button,[type=number].fp-haptic-settings-offset-range::-webkit-outer-spin-button,[type=number].fp-select::-webkit-outer-spin-button,[type=number].fp-actuator-settings-channel-select::-webkit-outer-spin-button,[type=number].fp-channel-settings-field-select::-webkit-outer-spin-button,[type=number].fp-buttplug-settings-device-select::-webkit-outer-spin-button,[type=number].fp-haptic-settings-rate-select::-webkit-outer-spin-button,.fp-input[type=number]::-webkit-inner-spin-button,[type=number].fp-haptic-settings-scale-number::-webkit-inner-spin-button,[type=number].fp-haptic-settings-offset-number::-webkit-inner-spin-button,[type=number].fp-haptic-settings-url-input::-webkit-inner-spin-button,[type=number].fp-haptic-settings-scale-range::-webkit-inner-spin-button,[type=number].fp-haptic-settings-offset-range::-webkit-inner-spin-button,[type=number].fp-select::-webkit-inner-spin-button,[type=number].fp-actuator-settings-channel-select::-webkit-inner-spin-button,[type=number].fp-channel-settings-field-select::-webkit-inner-spin-button,[type=number].fp-buttplug-settings-device-select::-webkit-inner-spin-button,[type=number].fp-haptic-settings-rate-select::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}.fp-select,.fp-actuator-settings-channel-select,.fp-channel-settings-field-select,.fp-buttplug-settings-device-select,.fp-haptic-settings-rate-select{cursor:pointer}.fp-select option,.fp-actuator-settings-channel-select option,.fp-channel-settings-field-select option,.fp-buttplug-settings-device-select option,.fp-haptic-settings-rate-select option{background-color:var(--fp-background-color);color:var(--fp-text-color);padding:8px 12px}.fp-select option:hover,.fp-actuator-settings-channel-select option:hover,.fp-channel-settings-field-select option:hover,.fp-buttplug-settings-device-select option:hover,.fp-haptic-settings-rate-select option:hover,.fp-select option:focus,.fp-actuator-settings-channel-select option:focus,.fp-channel-settings-field-select option:focus,.fp-buttplug-settings-device-select option:focus,.fp-haptic-settings-rate-select option:focus{background-color:var(--fp-tertiary-background-color)}.fp-select option:checked,.fp-actuator-settings-channel-select option:checked,.fp-channel-settings-field-select option:checked,.fp-buttplug-settings-device-select option:checked,.fp-haptic-settings-rate-select option:checked{background-color:var(--fp-tertiary-background-color);font-weight:500}.fp-range,.fp-haptic-visualizer-config-range,.fp-actuator-settings-scale-range,.fp-actuator-settings-offset-range,.fp-haptic-settings-scale-range,.fp-haptic-settings-offset-range{width:100%;height:2px;background:var(--fp-border-color);outline:none;cursor:pointer;accent-color:var(--fp-primary-color)}.fp-label,.fp-playlist-title,.fp-status-bar-status,.fp-logging-label,.fp-haptic-visualizer-config-label,.fp-actuator-settings-invert-label,.fp-actuator-settings-scale-label,.fp-actuator-settings-offset-label,.fp-channel-settings-field-label,.fp-channel-settings-title,.fp-buttplug-settings-device-name,.fp-haptic-settings-url-label,.fp-haptic-settings-rate-label,.fp-haptic-settings-scale-label,.fp-haptic-settings-offset-label{font-size:.8rem;font-weight:500;color:var(--fp-text-color);margin-bottom:0}.fp-badge,.fp-logging-count,.fp-actuator-settings-badge,.fp-channel-settings-channel-name{font-family:var(--fp-font-code);font-size:.8rem;font-weight:600;background:var(--fp-secondary-background-color);padding:2px 6px;border-radius:calc(var(--fp-base-radius) * .3);white-space:nowrap}.fp-unit,.fp-buttplug-settings-no-haptic-hint,.fp-haptic-settings-url-status,.fp-haptic-settings-rate-info{font-size:.75rem;color:var(--fp-text-color);opacity:.7}.fp-icon,.fp-icon-button,.fp-big-icon,.fp-status-bar-status-icon,.fp-buttplug-settings-connection-icon,.fp-haptic-settings-section-header-icon{color:var(--fp-text-color);opacity:.8;transform:translateY(-1px)}.fp-big-icon,.fp-status-bar-status-icon,.fp-buttplug-settings-connection-icon,.fp-haptic-settings-section-header-icon{margin-right:6px;opacity:1;--icon-size:22px}.fp-icon-button{transition:color .15s ease}.fp-icon-button:hover{color:var(--fp-primary-color);opacity:1}.fp-expanded-panel,.fp-actuator-settings-expanded,.fp-channel-settings-expanded{border:1px solid var(--fp-border-color);border-top:none;border-radius:0 0 var(--fp-base-radius) var(--fp-base-radius);padding:var(--fp-spacing);background:var(--fp-tertiary-background-color)}.fp-expandable-panel-header,.fp-actuator-settings-header,.fp-channel-settings-header{border:1px solid var(--fp-border-color);border-radius:var(--fp-base-radius) var(--fp-base-radius) 0 0;padding:var(--fp-spacing);background:var(--fp-tertiary-background-color)}.fp-expandable-panel-header:last-child,.fp-actuator-settings-header:last-child,.fp-channel-settings-header:last-child{border-radius:var(--fp-base-radius)}.fp-funplayer{font-family:var(--fp-font-family);font-size:.875rem;color:var(--fp-text-color);margin:0;width:100%;height:auto;min-height:200px;display:flex;flex-direction:column}.fp-haptic-settings{width:100%;height:auto;min-height:40px}.fp-haptic-settings-expanded{background:var(--fp-secondary-background-color);border:1px solid var(--fp-border-color);border-top:none;border-radius:0}.fp-haptic-settings-connection-section,.fp-haptic-settings-master-section,.fp-haptic-settings-actuators-section{margin-bottom:calc(var(--fp-spacing) * 2)}.fp-haptic-settings-section-title{font-size:.8rem;font-weight:600;color:var(--fp-text-color);margin:0 0 calc(var(--fp-spacing) * .5) 0;display:flex;align-items:center;gap:calc(var(--fp-spacing) * .5)}.fp-haptic-settings-connection-controls,.fp-haptic-settings-master-controls{margin-bottom:calc(var(--fp-spacing) * 1.5)}.fp-haptic-settings-scale-number,.fp-haptic-settings-offset-number{width:80px;text-align:center}.fp-haptic-settings-url-reset-btn{width:32px;height:32px;padding:0;min-width:auto}.fp-haptic-settings-rate-select{min-width:120px}.fp-haptic-settings-url-status,.fp-haptic-settings-rate-info{font-size:.7rem;opacity:.6}.fp-haptic-settings-actuators-header{margin-bottom:calc(var(--fp-spacing) * .5)}.fp-haptic-settings-actuators-list{gap:calc(var(--fp-spacing) * .25)}.fp-haptic-settings-divider{height:2px;background:var(--fp-border-color);margin:calc(var(--fp-spacing) * 2) 0;opacity:.5}.fp-buttplug-settings{border:1px solid var(--fp-border-color);background:var(--fp-secondary-background-color);border-radius:var(--fp-base-radius) var(--fp-base-radius) 0 0}.fp-buttplug-settings-status,.fp-buttplug-settings-actions{gap:calc(var(--fp-spacing) * .5)}.fp-buttplug-settings-device-name{max-width:150px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fp-buttplug-settings-no-haptic-hint{opacity:.5}.fp-buttplug-settings-rescan-btn{width:32px;height:32px;padding:0;min-width:auto}.fp-buttplug-settings-device-select{min-width:120px}.fp-buttplug-settings-toggle{width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.7rem;border-radius:calc(var(--fp-base-radius) * .3);transition:all .15s ease}.fp-channel-settings{width:100%;height:auto;min-height:40px}.fp-channel-settings-header{cursor:pointer;transition:all .15s ease;overflow:hidden}.fp-channel-settings-header:hover{border-color:var(--fp-primary-color)}.fp-channel-settings-toggle{width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.7rem;border-radius:calc(var(--fp-base-radius) * .3);transition:all .15s ease;flex-shrink:0}.fp-channel-settings-empty{text-align:center;color:var(--fp-text-color);opacity:.6;padding:var(--fp-spacing)}.fp-channel-settings-channel{align-items:center;gap:var(--fp-spacing);margin-bottom:calc(var(--fp-spacing) * 1.5)}.fp-channel-settings-channel:last-child{margin-bottom:0}.fp-channel-settings-channel-name{min-width:80px;max-width:120px}.fp-channel-settings-field{align-items:center;gap:calc(var(--fp-spacing) * .25);min-width:0}.fp-channel-settings-field-label{font-size:.75rem;white-space:nowrap;min-width:45px}.fp-channel-settings-field-select{min-width:60px}.fp-channel-settings-actions{margin-top:var(--fp-spacing);gap:calc(var(--fp-spacing) * .5)}.fp-actuator-settings{width:100%;height:auto;min-height:40px}.fp-actuator-settings-header{transition:all .15s ease;overflow:hidden}.fp-actuator-settings-header:hover{border-color:var(--fp-primary-color)}.fp-actuator-settings-error{color:var(--fp-text-color);opacity:.6}.fp-actuator-settings-badge{display:flex;align-items:center;flex-shrink:0}.fp-actuator-settings-badge.fp-actuator-settings-badge-disabled{opacity:.5}.fp-actuator-settings-warning{margin-left:4px;opacity:.7}.fp-actuator-settings-enable-toggle{display:flex;align-items:center;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;flex-shrink:0}.fp-actuator-settings-enable-checkbox,.fp-actuator-settings-invert-checkbox{width:14px;height:14px;accent-color:var(--fp-primary-color);cursor:pointer}.fp-actuator-settings-expand-toggle{width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.7rem;border-radius:calc(var(--fp-base-radius) * .3);transition:all .15s ease;flex-shrink:0}.fp-actuator-settings-expanded{gap:calc(var(--fp-spacing) * .5)}.fp-actuator-settings-warning-message{padding:calc(var(--fp-spacing) * .5);background:#ffc1071a;border:1px solid rgba(255,193,7,.3);border-radius:calc(var(--fp-base-radius) * .5);font-size:.75rem;color:var(--fp-text-color);opacity:.8}.fp-actuator-settings-compatibility-info{font-size:.7rem;opacity:.7;margin-bottom:calc(var(--fp-spacing) * .5)}.fp-actuator-settings-controls{margin-bottom:calc(var(--fp-spacing) * .5)}.fp-actuator-settings-invert-toggle{align-items:center;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.fp-actuator-settings-invert-checkbox{margin-right:calc(var(--fp-spacing) * .5)}.fp-media-player{width:100%;height:auto;min-height:200px;border:1px solid var(--fp-border-color);border-top:none}.fp-media-player-video{width:100%;height:auto}.fp-media-player-video.vjs-default-skin .vjs-control-bar{background:linear-gradient(to top,#000c,#0006,#0000)}.fp-media-player-video.vjs-default-skin .vjs-play-progress,.fp-media-player-video.vjs-default-skin .vjs-volume-level{background:var(--fp-primary-color)}.fp-media-player-video.vjs-default-skin .vjs-big-play-button{background:var(--fp-primary-color);border-color:var(--fp-border-color)}.fp-media-player-video.vjs-default-skin .vjs-previous-button,.fp-media-player-video.vjs-default-skin .vjs-next-button{font-size:1.2em;width:2.5em}.fp-media-player-video.vjs-default-skin .vjs-previous-button:disabled,.fp-media-player-video.vjs-default-skin .vjs-next-button:disabled{opacity:.5}.fp-media-player-placeholder{width:100%;background-color:#000;display:flex;align-items:center;justify-content:center;border-radius:0;aspect-ratio:16/9}.fp-media-player-placeholder-logo{color:#fff;opacity:.7;transition:opacity .3s ease}.fp-media-player-placeholder-logo:hover{opacity:1}.fp-haptic-visualizer{width:100%;height:auto;min-height:180px;background:var(--fp-secondary-background-color);border:1px solid var(--fp-border-color);border-top:none;border-radius:0;overflow:hidden}.fp-haptic-visualizer-canvas-area{position:relative;padding:calc(var(--fp-spacing) * .5);height:180px}.fp-haptic-visualizer-canvas{width:100%;height:100%;display:block;background:#000;border:1px solid var(--fp-border-color);border-radius:calc(var(--fp-base-radius) * .5)}.fp-haptic-visualizer-config-btn{position:absolute;top:4px;right:4px;width:24px;height:24px;padding:0;font-size:12px;opacity:.6;background:#0000001a;border:none;border-radius:50%}.fp-haptic-visualizer-config{border-top:1px solid var(--fp-border-color);background-color:var(--fp-tertiary-background-color);padding:var(--fp-spacing);height:auto}.fp-haptic-visualizer-config-row{align-items:center;margin-bottom:calc(var(--fp-spacing) * .5)}.fp-haptic-visualizer-config-row:last-child{margin-bottom:0}.fp-haptic-visualizer-config-label{min-width:80px}.fp-logging{width:100%;height:auto;min-height:100px;background:var(--fp-secondary-background-color);border:1px solid var(--fp-border-color);border-top:none;border-radius:0;overflow:hidden}.fp-logging-header{padding:8px 12px;background:var(--fp-secondary-background-color);border-bottom:1px solid var(--fp-border-color);min-height:40px}.fp-logging-title{align-items:center;gap:8px;font-size:14px;font-weight:500;color:var(--fp-text-color)}.fp-logging-icon{margin-right:8px}.fp-logging-actions{gap:4px;align-items:center}.fp-logging-clear-btn,.fp-logging-download-btn,.fp-logging-copy-btn,.fp-logging-autoscroll-btn{padding:4px 6px;font-size:12px;min-height:24px;border-radius:2px}.fp-logging-autoscroll-btn-active{background:var(--fp-hover-color);opacity:1}.fp-logging-textarea{width:100%;height:250px;font-family:Courier New,Monaco,Menlo,monospace;font-size:11px;line-height:1.4;padding:12px;border:none;border-radius:0;outline:none;background:#1a1a1a;color:#0f0;resize:vertical;min-height:150px;max-height:500px;margin:0}.fp-logging-textarea::-webkit-scrollbar{width:8px}.fp-logging-textarea::-webkit-scrollbar-track{background:#ffffff1a}.fp-logging-textarea::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:0}.fp-logging-textarea::-webkit-scrollbar-thumb:hover{background:#ffffff80}[data-theme=light] .fp-logging-textarea{background:#f8f8f8;color:#333;border-top:1px solid var(--fp-border-color)}.fp-status-bar{border:1px solid var(--fp-border-color);border-top:none;background:var(--fp-secondary-background-color);border-radius:0 0 var(--fp-base-radius) var(--fp-base-radius);position:relative}.fp-status-bar-status{font-size:.8rem}.fp-status-bar-logo-area{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;pointer-events:none}.fp-status-bar-logo{color:var(--fp-text-color);opacity:.7;transition:opacity .15s ease}.fp-status-bar-logo:hover{opacity:1}.fp-status-bar-controls{gap:calc(var(--fp-spacing) * .5)}.fp-status-bar-playlist-btn,.fp-status-bar-debug-btn,.fp-status-bar-visualizer-btn{width:32px;height:32px;padding:0;font-size:1rem;border-radius:calc(var(--fp-base-radius) * .5)}.fp-playlist{border:1px solid var(--fp-border-color);border-radius:var(--fp-base-radius);margin-top:var(--fp-spacing);width:100%}.fp-playlist-header{padding:var(--fp-spacing);border-bottom:1px solid var(--fp-border-color);background:var(--fp-secondary-background-color)}.fp-playlist-item{align-items:center;gap:calc(var(--fp-spacing) * .75);padding:calc(var(--fp-spacing) * .75) var(--fp-spacing);border-bottom:1px solid var(--fp-border-color);cursor:pointer;transition:background .15s ease}.fp-playlist-item:last-child{border-bottom:none}.fp-playlist-item:hover{background:var(--fp-hover-color)}.fp-playlist-item.fp-playlist-item-active{background:var(--fp-primary-color);color:#fff}.fp-playlist-item.fp-playlist-item-active:hover{background:var(--fp-primary-color);opacity:.9}.fp-playlist-item.fp-playlist-item-active:last-child{border-radius:0 0 var(--fp-base-radius) var(--fp-base-radius)}.fp-playlist-item.fp-playlist-item-active .fp-playlist-item-info{opacity:.9}.fp-playlist-item-thumbnail{width:48px;height:32px;flex-shrink:0;border-radius:calc(var(--fp-base-radius) * .3);overflow:hidden;background:var(--fp-secondary-background-color);display:flex;align-items:center;justify-content:center;border:1px solid var(--fp-border-color)}.fp-playlist-item-image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;display:block}.fp-playlist-item-content{flex:1;min-width:0;gap:calc(var(--fp-spacing) * .25)}.fp-playlist-item-title{font-weight:500;font-size:.8rem;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.fp-playlist-item-info{font-size:.7rem;opacity:.7;gap:calc(var(--fp-spacing) * .5)}@media (max-width: 768px){.fp-funplayer{flex-direction:column}.fp-playlist{border:1px solid var(--fp-border-color);width:100%;order:-1}.fp-playlist-items{max-height:150px;overflow-y:auto}.fp-haptic-settings-connection-controls,.fp-haptic-settings-master-controls{flex-direction:column;gap:calc(var(--fp-spacing) * .5)}.fp-buttplug-settings-device-name{max-width:100px}.fp-btn,.fp-btn-primary,.fp-btn-ghost,.fp-haptic-settings-url-reset-btn,.fp-haptic-settings-automap-btn,.fp-buttplug-settings-connect-btn,.fp-buttplug-settings-disconnect-btn,.fp-buttplug-settings-rescan-btn,.fp-buttplug-settings-toggle,.fp-channel-settings-toggle,.fp-channel-settings-validate-btn,.fp-channel-settings-cancel-btn,.fp-actuator-settings-expand-toggle,.fp-haptic-visualizer-config-btn,.fp-logging-clear-btn,.fp-logging-download-btn,.fp-logging-copy-btn,.fp-logging-autoscroll-btn,.fp-status-bar-playlist-btn,.fp-status-bar-debug-btn,.fp-status-bar-visualizer-btn{font-size:.7rem;min-height:22px}.fp-haptic-settings-scale-number,.fp-haptic-settings-offset-number{width:60px}.fp-section,.fp-haptic-settings-expanded,.fp-haptic-visualizer-config{padding:var(--fp-spacing)}.fp-haptic-visualizer{height:120px}.fp-logging-textarea{height:200px;font-size:10px}.fp-logging-actions{flex-wrap:wrap;gap:2px}}.fp-disabled{opacity:.5;cursor:not-allowed}.fp-disabled:hover{background:none!important;border-color:var(--fp-border-color)!important}.fp-loading{position:relative;pointer-events:none}.fp-loading:after{content:\"\";position:absolute;inset:0;background:#ffffffb3;display:flex;align-items:center;justify-content:center}[data-theme=dark] .fp-loading:after{background:#000000b3}.fp-btn:focus:not(:focus-visible),.fp-btn-primary:focus:not(:focus-visible),.fp-btn-ghost:focus:not(:focus-visible),.fp-haptic-settings-url-reset-btn:focus:not(:focus-visible),.fp-haptic-settings-automap-btn:focus:not(:focus-visible),.fp-buttplug-settings-connect-btn:focus:not(:focus-visible),.fp-buttplug-settings-disconnect-btn:focus:not(:focus-visible),.fp-buttplug-settings-rescan-btn:focus:not(:focus-visible),.fp-buttplug-settings-toggle:focus:not(:focus-visible),.fp-channel-settings-toggle:focus:not(:focus-visible),.fp-channel-settings-validate-btn:focus:not(:focus-visible),.fp-channel-settings-cancel-btn:focus:not(:focus-visible),.fp-actuator-settings-expand-toggle:focus:not(:focus-visible),.fp-haptic-visualizer-config-btn:focus:not(:focus-visible),.fp-logging-clear-btn:focus:not(:focus-visible),.fp-logging-download-btn:focus:not(:focus-visible),.fp-logging-copy-btn:focus:not(:focus-visible),.fp-logging-autoscroll-btn:focus:not(:focus-visible),.fp-status-bar-playlist-btn:focus:not(:focus-visible),.fp-status-bar-debug-btn:focus:not(:focus-visible),.fp-status-bar-visualizer-btn:focus:not(:focus-visible),.fp-input:focus:not(:focus-visible),.fp-haptic-settings-url-input:focus:not(:focus-visible),.fp-haptic-settings-scale-range:focus:not(:focus-visible),.fp-haptic-settings-offset-range:focus:not(:focus-visible),.fp-haptic-settings-scale-number:focus:not(:focus-visible),.fp-haptic-settings-offset-number:focus:not(:focus-visible),.fp-haptic-settings-rate-select:focus:not(:focus-visible),.fp-buttplug-settings-device-select:focus:not(:focus-visible),.fp-channel-settings-field-select:focus:not(:focus-visible),.fp-actuator-settings-channel-select:focus:not(:focus-visible),.fp-select:focus:not(:focus-visible){outline:none;box-shadow:none}.fp-btn:focus-visible,.fp-btn-primary:focus-visible,.fp-btn-ghost:focus-visible,.fp-haptic-settings-url-reset-btn:focus-visible,.fp-haptic-settings-automap-btn:focus-visible,.fp-buttplug-settings-connect-btn:focus-visible,.fp-buttplug-settings-disconnect-btn:focus-visible,.fp-buttplug-settings-rescan-btn:focus-visible,.fp-buttplug-settings-toggle:focus-visible,.fp-channel-settings-toggle:focus-visible,.fp-channel-settings-validate-btn:focus-visible,.fp-channel-settings-cancel-btn:focus-visible,.fp-actuator-settings-expand-toggle:focus-visible,.fp-haptic-visualizer-config-btn:focus-visible,.fp-logging-clear-btn:focus-visible,.fp-logging-download-btn:focus-visible,.fp-logging-copy-btn:focus-visible,.fp-logging-autoscroll-btn:focus-visible,.fp-status-bar-playlist-btn:focus-visible,.fp-status-bar-debug-btn:focus-visible,.fp-status-bar-visualizer-btn:focus-visible,.fp-input:focus-visible,.fp-haptic-settings-url-input:focus-visible,.fp-haptic-settings-scale-range:focus-visible,.fp-haptic-settings-offset-range:focus-visible,.fp-haptic-settings-scale-number:focus-visible,.fp-haptic-settings-offset-number:focus-visible,.fp-haptic-settings-rate-select:focus-visible,.fp-buttplug-settings-device-select:focus-visible,.fp-channel-settings-field-select:focus-visible,.fp-actuator-settings-channel-select:focus-visible,.fp-select:focus-visible{outline:1px solid var(--fp-primary-color);outline-offset:1px}.video-js .vjs-big-vr-play-button{width:100px;height:100px;background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='360' height='360' viewBox='0 0 360 360'%3E%3Cpath fill='%23FFF' d='M334.883 275.78l-6.374-36.198-6.375-36.2-28.16 23.62-28.164 23.62 25.837 9.41C266.247 296.544 224 320.5 176.25 320.5c-77.47 0-140.5-63.03-140.5-140.5 0-77.472 63.03-140.5 140.5-140.5 53.428 0 99.98 29.978 123.733 73.993l13.304-6.923C287.025 57.76 235.45 24.5 176.25 24.5c-85.743 0-155.5 69.757-155.5 155.5 0 85.742 69.757 155.5 155.5 155.5 54.253 0 102.09-27.94 129.922-70.177l28.71 10.457z'/%3E%3Cpath fill='%23FFF' d='M314.492 175.167c-12.98 0-23.54-10.56-23.54-23.54s10.56-23.54 23.54-23.54c12.98 0 23.54 10.56 23.54 23.54s-10.56 23.54-23.54 23.54zm0-38.08c-8.018 0-14.54 6.522-14.54 14.54s6.522 14.54 14.54 14.54c8.017 0 14.54-6.522 14.54-14.54s-6.523-14.54-14.54-14.54z'/%3E%3Cg fill='%23FFF'%3E%3Cpath d='M88.76 173.102h9.395c4.74-.042 8.495-1.27 11.268-3.682 2.77-2.412 4.157-5.903 4.157-10.474 0-4.4-1.153-7.817-3.46-10.25-2.307-2.434-5.83-3.65-10.568-3.65-4.147 0-7.554 1.195-10.22 3.585-2.666 2.392-4 5.514-4 9.364H69.908c0-4.74 1.26-9.055 3.776-12.95 2.518-3.892 6.03-6.928 10.537-9.108 4.508-2.18 9.554-3.27 15.14-3.27 9.225 0 16.472 2.318 21.74 6.952 5.27 4.634 7.903 11.077 7.903 19.33 0 4.147-1.323 8.05-3.967 11.71-2.646 3.66-6.062 6.422-10.252 8.284 5.078 1.736 8.94 4.465 11.584 8.19s3.968 8.166 3.968 13.33c0 8.294-2.847 14.895-8.538 19.804s-13.17 7.363-22.438 7.363c-8.887 0-16.166-2.37-21.836-7.11-5.67-4.74-8.506-11.045-8.506-18.916h15.425c0 4.062 1.365 7.363 4.094 9.902 2.73 2.54 6.4 3.81 11.014 3.81 4.782 0 8.55-1.27 11.3-3.81s4.126-6.22 4.126-11.045c0-4.865-1.44-8.61-4.316-11.235-2.878-2.623-7.152-3.936-12.822-3.936H88.76V173.1zM187.598 133.493v12.76h-1.904c-8.633.126-15.53 2.497-20.693 7.108-5.162 4.614-8.23 11.152-9.203 19.615 4.95-5.205 11.277-7.808 18.98-7.808 8.166 0 14.608 2.878 19.328 8.633 4.718 5.755 7.077 13.182 7.077 22.28 0 9.395-2.76 17.002-8.284 22.82-5.52 5.818-12.77 8.73-21.74 8.73-9.226 0-16.705-3.407-22.44-10.222-5.733-6.812-8.6-15.742-8.6-26.787v-5.267c0-16.208 3.945-28.903 11.84-38.086 7.89-9.182 19.242-13.774 34.054-13.774h1.586zM171.03 177.61c-3.386 0-6.485.95-9.3 2.855-2.814 1.904-4.877 4.443-6.188 7.617v4.697c0 6.854 1.438 12.304 4.316 16.345 2.877 4.04 6.602 6.062 11.172 6.062s8.188-1.715 10.854-5.143 4-7.934 4-13.52-1.355-10.135-4.063-13.648c-2.708-3.51-6.304-5.267-10.79-5.267zM271.136 187.447c0 13.29-2.486 23.307-7.46 30.057s-12.535 10.125-22.69 10.125c-9.988 0-17.51-3.292-22.566-9.872-5.058-6.58-7.65-16.323-7.776-29.23V172.53c0-13.287 2.485-23.252 7.458-29.896 4.973-6.643 12.558-9.966 22.757-9.966 10.112 0 17.655 3.237 22.63 9.712 4.97 6.475 7.52 16.166 7.647 29.072v15.995zm-15.425-17.265c0-8.674-1.185-15.033-3.554-19.075-2.37-4.04-6.137-6.062-11.3-6.062-5.035 0-8.738 1.915-11.107 5.745-2.37 3.83-3.62 9.807-3.746 17.932v20.948c0 8.633 1.206 15.064 3.618 19.297s6.2 6.348 11.362 6.348c4.95 0 8.61-1.957 10.98-5.87 2.37-3.915 3.62-10.04 3.746-18.378v-20.885z'/%3E%3C/g%3E%3C/svg%3E\");background-size:contain;background-color:#00000080}.video-js .vjs-big-vr-play-button .vjs-icon-placeholder{display:none}:hover.video-js .vjs-big-vr-play-button{transition:border-color .4s,outline .4s,background-color .4s}.video-js .vjs-big-vr-play-button:before{content:\"\"}.video-js canvas{cursor:move}.video-js .vjs-button-vr .vjs-icon-placeholder{height:30px;width:30px;display:inline-block;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo=) no-repeat left center}\n";
            document.head.appendChild(style);
            console.log('📦 Embed CSS injected: 80989 characters');
          }
        })();

        var __defProp=Object.defineProperty,__defNormalProp=(i,a,s)=>a in i?__defProp(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,__name=(i,a)=>__defProp(i,"name",{value:a,configurable:!0}),__publicField=(i,a,s)=>__defNormalProp(i,"symbol"!=typeof a?a+"":a,s);!function(i){"use strict";var a,s,o,u,_,x,w,C,L,B,U,j,V,z,$,Y,Z,ee,ie,ae,le,ce,de,pe,fe,_e,ye,be,Te,Se,xe,we,Pe,Re,ze,He,$e,We,qe,Xe,Qe,Ye,et,tt,nt,it,rt,at,st,ot,lt,ct,ut,dt,ht,pt,mt,ft,gt,_t,yt,vt,bt,Tt,St,xt,wt,At,Ct,Et,Mt,kt,Pt,It,Lt,Dt,Rt,Ot,Nt,Bt,Ft,Ut,jt,Vt,zt,Ht,$t,Gt,Wt,qt;function _mergeNamespaces(i,a){for(var s=0;s<a.length;s++){const o=a[s];if("string"!=typeof o&&!Array.isArray(o))for(const a in o)if("default"!==a&&!(a in i)){const s=Object.getOwnPropertyDescriptor(o,a);s&&Object.defineProperty(i,a,s.get?s:{enumerable:!0,get:/* @__PURE__ */__name(()=>o[a],"get")})}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}__name(_mergeNamespaces,"_mergeNamespaces"),void 0===globalThis.process&&(globalThis.process={env:{NODE_ENV:"production"},nextTick:/* @__PURE__ */__name(i=>setTimeout(i,0),"nextTick"),version:"v16.0.0"}),void 0===globalThis.Buffer&&(globalThis.Buffer={from:/* @__PURE__ */__name(i=>new Uint8Array(i),"from"),isBuffer:/* @__PURE__ */__name(()=>!1,"isBuffer")});var Xt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var a=i.default;if("function"==typeof a){var s=/* @__PURE__ */__name(function a2(){return this instanceof a2?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)},"a");s.prototype=a.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(a){var o=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:/* @__PURE__ */__name(function(){return i[a]},"get")})}),s}__name(getDefaultExportFromCjs,"getDefaultExportFromCjs"),__name(getAugmentedNamespace,"getAugmentedNamespace");var Qt,Kt,Yt={exports:{}},Jt={};function requireReact_production_min(){if(Qt)return Jt;Qt=1;var i=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),x=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),L=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),U=Symbol.iterator;function A(i){return null===i||"object"!=typeof i?null:"function"==typeof(i=U&&i[U]||i["@@iterator"])?i:null}__name(A,"A");var j={isMounted:/* @__PURE__ */__name(function(){return!1},"isMounted"),enqueueForceUpdate:/* @__PURE__ */__name(function(){},"enqueueForceUpdate"),enqueueReplaceState:/* @__PURE__ */__name(function(){},"enqueueReplaceState"),enqueueSetState:/* @__PURE__ */__name(function(){},"enqueueSetState")},V=Object.assign,z={};function E(i,a,s){this.props=i,this.context=a,this.refs=z,this.updater=s||j}function F(){}function G(i,a,s){this.props=i,this.context=a,this.refs=z,this.updater=s||j}__name(E,"E"),E.prototype.isReactComponent={},E.prototype.setState=function(i,a){if("object"!=typeof i&&"function"!=typeof i&&null!=i)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,a,"setState")},E.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")},__name(F,"F"),F.prototype=E.prototype,__name(G,"G");var $=G.prototype=new F;$.constructor=G,V($,E.prototype),$.isPureReactComponent=!0;var Y=Array.isArray,Z=Object.prototype.hasOwnProperty,ee={current:null},ie={key:!0,ref:!0,__self:!0,__source:!0};function M(a,s,o){var u,_={},x=null,w=null;if(null!=s)for(u in void 0!==s.ref&&(w=s.ref),void 0!==s.key&&(x=""+s.key),s)Z.call(s,u)&&!ie.hasOwnProperty(u)&&(_[u]=s[u]);var C=arguments.length-2;if(1===C)_.children=o;else if(1<C){for(var L=Array(C),B=0;B<C;B++)L[B]=arguments[B+2];_.children=L}if(a&&a.defaultProps)for(u in C=a.defaultProps)void 0===_[u]&&(_[u]=C[u]);return{$$typeof:i,type:a,key:x,ref:w,props:_,_owner:ee.current}}function N(a,s){return{$$typeof:i,type:a.type,key:s,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return"object"==typeof a&&null!==a&&a.$$typeof===i}function escape2(i){var a={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(i){return a[i]})}__name(M,"M"),__name(N,"N"),__name(O,"O"),__name(escape2,"escape");var ae=/\/+/g;function Q(i,a){return"object"==typeof i&&null!==i&&null!=i.key?escape2(""+i.key):a.toString(36)}function R(s,o,u,_,x){var w=typeof s;"undefined"!==w&&"boolean"!==w||(s=null);var C=!1;if(null===s)C=!0;else switch(w){case"string":case"number":C=!0;break;case"object":switch(s.$$typeof){case i:case a:C=!0}}if(C)return x=x(C=s),s=""===_?"."+Q(C,0):_,Y(x)?(u="",null!=s&&(u=s.replace(ae,"$&/")+"/"),R(x,o,u,"",function(i){return i})):null!=x&&(O(x)&&(x=N(x,u+(!x.key||C&&C.key===x.key?"":(""+x.key).replace(ae,"$&/")+"/")+s)),o.push(x)),1;if(C=0,_=""===_?".":_+":",Y(s))for(var L=0;L<s.length;L++){var B=_+Q(w=s[L],L);C+=R(w,o,u,B,x)}else if("function"==typeof(B=A(s)))for(s=B.call(s),L=0;!(w=s.next()).done;)C+=R(w=w.value,o,u,B=_+Q(w,L++),x);else if("object"===w)throw o=String(s),Error("Objects are not valid as a React child (found: "+("[object Object]"===o?"object with keys {"+Object.keys(s).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return C}function S(i,a,s){if(null==i)return i;var o=[],u=0;return R(i,o,"","",function(i){return a.call(s,i,u++)}),o}function T(i){if(-1===i._status){var a=i._result;(a=a()).then(function(a){0!==i._status&&-1!==i._status||(i._status=1,i._result=a)},function(a){0!==i._status&&-1!==i._status||(i._status=2,i._result=a)}),-1===i._status&&(i._status=0,i._result=a)}if(1===i._status)return i._result.default;throw i._result}__name(Q,"Q"),__name(R,"R"),__name(S,"S"),__name(T,"T");var le={current:null},ce={transition:null},de={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:ce,ReactCurrentOwner:ee};function X(){throw Error("act(...) is not supported in production builds of React.")}return __name(X,"X"),Jt.Children={map:S,forEach:/* @__PURE__ */__name(function(i,a,s){S(i,function(){a.apply(this,arguments)},s)},"forEach"),count:/* @__PURE__ */__name(function(i){var a=0;return S(i,function(){a++}),a},"count"),toArray:/* @__PURE__ */__name(function(i){return S(i,function(i){return i})||[]},"toArray"),only:/* @__PURE__ */__name(function(i){if(!O(i))throw Error("React.Children.only expected to receive a single React element child.");return i},"only")},Jt.Component=E,Jt.Fragment=s,Jt.Profiler=u,Jt.PureComponent=G,Jt.StrictMode=o,Jt.Suspense=C,Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Jt.act=X,Jt.cloneElement=function(a,s,o){if(null==a)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var u=V({},a.props),_=a.key,x=a.ref,w=a._owner;if(null!=s){if(void 0!==s.ref&&(x=s.ref,w=ee.current),void 0!==s.key&&(_=""+s.key),a.type&&a.type.defaultProps)var C=a.type.defaultProps;for(L in s)Z.call(s,L)&&!ie.hasOwnProperty(L)&&(u[L]=void 0===s[L]&&void 0!==C?C[L]:s[L])}var L=arguments.length-2;if(1===L)u.children=o;else if(1<L){C=Array(L);for(var B=0;B<L;B++)C[B]=arguments[B+2];u.children=C}return{$$typeof:i,type:a.type,key:_,ref:x,props:u,_owner:w}},Jt.createContext=function(i){return(i={$$typeof:x,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:_,_context:i},i.Consumer=i},Jt.createElement=M,Jt.createFactory=function(i){var a=M.bind(null,i);return a.type=i,a},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(i){return{$$typeof:w,render:i}},Jt.isValidElement=O,Jt.lazy=function(i){return{$$typeof:B,_payload:{_status:-1,_result:i},_init:T}},Jt.memo=function(i,a){return{$$typeof:L,type:i,compare:void 0===a?null:a}},Jt.startTransition=function(i){var a=ce.transition;ce.transition={};try{i()}finally{ce.transition=a}},Jt.unstable_act=X,Jt.useCallback=function(i,a){return le.current.useCallback(i,a)},Jt.useContext=function(i){return le.current.useContext(i)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(i){return le.current.useDeferredValue(i)},Jt.useEffect=function(i,a){return le.current.useEffect(i,a)},Jt.useId=function(){return le.current.useId()},Jt.useImperativeHandle=function(i,a,s){return le.current.useImperativeHandle(i,a,s)},Jt.useInsertionEffect=function(i,a){return le.current.useInsertionEffect(i,a)},Jt.useLayoutEffect=function(i,a){return le.current.useLayoutEffect(i,a)},Jt.useMemo=function(i,a){return le.current.useMemo(i,a)},Jt.useReducer=function(i,a,s){return le.current.useReducer(i,a,s)},Jt.useRef=function(i){return le.current.useRef(i)},Jt.useState=function(i){return le.current.useState(i)},Jt.useSyncExternalStore=function(i,a,s){return le.current.useSyncExternalStore(i,a,s)},Jt.useTransition=function(){return le.current.useTransition()},Jt.version="18.3.1",Jt}function requireReact(){return Kt||(Kt=1,Yt.exports=requireReact_production_min()),Yt.exports}__name(requireReact_production_min,"requireReact_production_min"),__name(requireReact,"requireReact");var Zt=requireReact();const en=/* @__PURE__ */getDefaultExportFromCjs(Zt);var tn,nn,rn,an,sn,ln={},cn={exports:{}},un={},dn={exports:{}},hn={};function requireScheduler_production_min(){return tn||(tn=1,function(i){function f(i,a){var s=i.length;i.push(a);e:for(;0<s;){var o=s-1>>>1,u=i[o];if(!(0<g(u,a)))break e;i[o]=a,i[s]=u,s=o}}function h(i){return 0===i.length?null:i[0]}function k(i){if(0===i.length)return null;var a=i[0],s=i.pop();if(s!==a){i[0]=s;e:for(var o=0,u=i.length,_=u>>>1;o<_;){var x=2*(o+1)-1,w=i[x],C=x+1,L=i[C];if(0>g(w,s))C<u&&0>g(L,w)?(i[o]=L,i[C]=s,o=C):(i[o]=w,i[x]=s,o=x);else{if(!(C<u&&0>g(L,s)))break e;i[o]=L,i[C]=s,o=C}}}return a}function g(i,a){var s=i.sortIndex-a.sortIndex;return 0!==s?s:i.id-a.id}if(__name(f,"f"),__name(h,"h"),__name(k,"k"),__name(g,"g"),"object"==typeof performance&&"function"==typeof performance.now){var a=performance;i.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();i.unstable_now=function(){return s.now()-o}}var u=[],_=[],x=1,w=null,C=3,L=!1,B=!1,U=!1,j="function"==typeof setTimeout?setTimeout:null,V="function"==typeof clearTimeout?clearTimeout:null,z="undefined"!=typeof setImmediate?setImmediate:null;function G(i){for(var a=h(_);null!==a;){if(null===a.callback)k(_);else{if(!(a.startTime<=i))break;k(_),a.sortIndex=a.expirationTime,f(u,a)}a=h(_)}}function H(i){if(U=!1,G(i),!B)if(null!==h(u))B=!0,I(J);else{var a=h(_);null!==a&&K(H,a.startTime-i)}}function J(a,s){B=!1,U&&(U=!1,V(ee),ee=-1),L=!0;var o=C;try{for(G(s),w=h(u);null!==w&&(!(w.expirationTime>s)||a&&!M());){var x=w.callback;if("function"==typeof x){w.callback=null,C=w.priorityLevel;var j=x(w.expirationTime<=s);s=i.unstable_now(),"function"==typeof j?w.callback=j:w===h(u)&&k(u),G(s)}else k(u);w=h(u)}if(null!==w)var z=!0;else{var $=h(_);null!==$&&K(H,$.startTime-s),z=!1}return z}finally{w=null,C=o,L=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling),__name(G,"G"),__name(H,"H"),__name(J,"J");var $,Y=!1,Z=null,ee=-1,ie=5,ae=-1;function M(){return!(i.unstable_now()-ae<ie)}function R(){if(null!==Z){var a=i.unstable_now();ae=a;var s=!0;try{s=Z(!0,a)}finally{s?$():(Y=!1,Z=null)}}else Y=!1}if(__name(M,"M"),__name(R,"R"),"function"==typeof z)$=/* @__PURE__ */__name(function(){z(R)},"S");else if("undefined"!=typeof MessageChannel){var le=new MessageChannel,ce=le.port2;le.port1.onmessage=R,$=/* @__PURE__ */__name(function(){ce.postMessage(null)},"S")}else $=/* @__PURE__ */__name(function(){j(R,0)},"S");function I(i){Z=i,Y||(Y=!0,$())}function K(a,s){ee=j(function(){a(i.unstable_now())},s)}__name(I,"I"),__name(K,"K"),i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(i){i.callback=null},i.unstable_continueExecution=function(){B||L||(B=!0,I(J))},i.unstable_forceFrameRate=function(i){0>i||125<i?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<i?Math.floor(1e3/i):5},i.unstable_getCurrentPriorityLevel=function(){return C},i.unstable_getFirstCallbackNode=function(){return h(u)},i.unstable_next=function(i){switch(C){case 1:case 2:case 3:var a=3;break;default:a=C}var s=C;C=a;try{return i()}finally{C=s}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(i,a){switch(i){case 1:case 2:case 3:case 4:case 5:break;default:i=3}var s=C;C=i;try{return a()}finally{C=s}},i.unstable_scheduleCallback=function(a,s,o){var w=i.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?w+o:w:o=w,a){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return a={id:x++,callback:s,priorityLevel:a,startTime:o,expirationTime:C=o+C,sortIndex:-1},o>w?(a.sortIndex=o,f(_,a),null===h(u)&&a===h(_)&&(U?(V(ee),ee=-1):U=!0,K(H,o-w))):(a.sortIndex=C,f(u,a),B||L||(B=!0,I(J))),a},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(i){var a=C;return function(){var s=C;C=a;try{return i.apply(this,arguments)}finally{C=s}}}}(hn)),hn}function requireScheduler(){return nn||(nn=1,dn.exports=requireScheduler_production_min()),dn.exports}function requireReactDom_production_min(){if(rn)return un;rn=1;var i=requireReact(),a=requireScheduler();function p(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}__name(p,"p");var s=/* @__PURE__ */new Set,o={};function fa(i,a){ha(i,a),ha(i+"Capture",a)}function ha(i,a){for(o[i]=a,i=0;i<a.length;i++)s.add(a[i])}__name(fa,"fa"),__name(ha,"ha");var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),_=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},C={};function oa(i){return!!_.call(C,i)||!_.call(w,i)&&(x.test(i)?C[i]=!0:(w[i]=!0,!1))}function pa(i,a,s,o){if(null!==s&&0===s.type)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return!o&&(null!==s?!s.acceptsBooleans:"data-"!==(i=i.toLowerCase().slice(0,5))&&"aria-"!==i);default:return!1}}function qa(i,a,s,o){if(null==a||pa(i,a,s,o))return!0;if(o)return!1;if(null!==s)switch(s.type){case 3:return!a;case 4:return!1===a;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function v(i,a,s,o,u,_,x){this.acceptsBooleans=2===a||3===a||4===a,this.attributeName=o,this.attributeNamespace=u,this.mustUseProperty=s,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=x}__name(oa,"oa"),__name(pa,"pa"),__name(qa,"qa"),__name(v,"v");var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){L[i]=new v(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];L[a]=new v(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){L[i]=new v(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){L[i]=new v(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){L[i]=new v(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){L[i]=new v(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){L[i]=new v(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){L[i]=new v(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){L[i]=new v(i,5,!1,i.toLowerCase(),null,!1,!1)});var B=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}function ta(i,a,s,o){var u=L.hasOwnProperty(a)?L[a]:null;(null!==u?0!==u.type:o||!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&(qa(a,s,u,o)&&(s=null),o||null===u?oa(a)&&(null===s?i.removeAttribute(a):i.setAttribute(a,""+s)):u.mustUseProperty?i[u.propertyName]=null===s?3!==u.type&&"":s:(a=u.attributeName,o=u.attributeNamespace,null===s?i.removeAttribute(a):(s=3===(u=u.type)||4===u&&!0===s?"":""+s,o?i.setAttributeNS(o,a,s):i.setAttribute(a,s))))}__name(sa,"sa"),"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(B,sa);L[a]=new v(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(B,sa);L[a]=new v(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(B,sa);L[a]=new v(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){L[i]=new v(i,1,!1,i.toLowerCase(),null,!1,!1)}),L.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){L[i]=new v(i,1,!1,i.toLowerCase(),null,!0,!0)}),__name(ta,"ta");var U=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),V=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),ee=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),fe=Symbol.iterator;function Ka(i){return null===i||"object"!=typeof i?null:"function"==typeof(i=fe&&i[fe]||i["@@iterator"])?i:null}__name(Ka,"Ka");var _e,ye=Object.assign;function Ma(i){if(void 0===_e)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);_e=a&&a[1]||""}return"\n"+_e+i}__name(Ma,"Ma");var be=!1;function Oa(i,a){if(!i||be)return"";be=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=/* @__PURE__ */__name(function(){throw Error()},"b"),Object.defineProperty(a.prototype,"props",{set:/* @__PURE__ */__name(function(){throw Error()},"set")}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(L){var o=L}Reflect.construct(i,[],a)}else{try{a.call()}catch(L){o=L}i.call(a.prototype)}else{try{throw Error()}catch(L){o=L}i()}}catch(L){if(L&&o&&"string"==typeof L.stack){for(var u=L.stack.split("\n"),_=o.stack.split("\n"),x=u.length-1,w=_.length-1;1<=x&&0<=w&&u[x]!==_[w];)w--;for(;1<=x&&0<=w;x--,w--)if(u[x]!==_[w]){if(1!==x||1!==w)do{if(x--,0>--w||u[x]!==_[w]){var C="\n"+u[x].replace(" at new "," at ");return i.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",i.displayName)),C}}while(1<=x&&0<=w);break}}}finally{be=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1);case 11:return i=Oa(i.type.render,!1);case 1:return i=Oa(i.type,!0);default:return""}}function Qa(i){if(null==i)return null;if("function"==typeof i)return i.displayName||i.name||null;if("string"==typeof i)return i;switch(i){case z:return"Fragment";case V:return"Portal";case Y:return"Profiler";case $:return"StrictMode";case ae:return"Suspense";case le:return"SuspenseList"}if("object"==typeof i)switch(i.$$typeof){case ee:return(i.displayName||"Context")+".Consumer";case Z:return(i._context.displayName||"Context")+".Provider";case ie:var a=i.render;return(i=i.displayName)||(i=""!==(i=a.displayName||a.name||"")?"ForwardRef("+i+")":"ForwardRef"),i;case ce:return null!==(a=i.displayName||null)?a:Qa(i.type)||"Memo";case de:a=i._payload,i=i._init;try{return Qa(i(a))}catch(s){}}return null}function Ra(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=(i=a.render).displayName||i.name||"",a.displayName||(""!==i?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(a);case 8:return a===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof a)return a.displayName||a.name||null;if("string"==typeof a)return a}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":case"object":return i;default:return""}}function Ta(i){var a=i.type;return(i=i.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===a||"radio"===a)}function Ua(i){var a=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),o=""+i[a];if(!i.hasOwnProperty(a)&&void 0!==s&&"function"==typeof s.get&&"function"==typeof s.set){var u=s.get,_=s.set;return Object.defineProperty(i,a,{configurable:!0,get:/* @__PURE__ */__name(function(){return u.call(this)},"get"),set:/* @__PURE__ */__name(function(i){o=""+i,_.call(this,i)},"set")}),Object.defineProperty(i,a,{enumerable:s.enumerable}),{getValue:/* @__PURE__ */__name(function(){return o},"getValue"),setValue:/* @__PURE__ */__name(function(i){o=""+i},"setValue"),stopTracking:/* @__PURE__ */__name(function(){i._valueTracker=null,delete i[a]},"stopTracking")}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var s=a.getValue(),o="";return i&&(o=Ta(i)?i.checked?"true":"false":i.value),(i=o)!==s&&(a.setValue(i),!0)}function Xa(i){if(void 0===(i=i||("undefined"!=typeof document?document:void 0)))return null;try{return i.activeElement||i.body}catch(ir){return i.body}}function Ya(i,a){var s=a.checked;return ye({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:i._wrapperState.initialChecked})}function Za(i,a){var s=null==a.defaultValue?"":a.defaultValue,o=null!=a.checked?a.checked:a.defaultChecked;s=Sa(null!=a.value?a.value:s),i._wrapperState={initialChecked:o,initialValue:s,controlled:"checkbox"===a.type||"radio"===a.type?null!=a.checked:null!=a.value}}function ab(i,a){null!=(a=a.checked)&&ta(i,"checked",a,!1)}function bb(i,a){ab(i,a);var s=Sa(a.value),o=a.type;if(null!=s)"number"===o?(0===s&&""===i.value||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if("submit"===o||"reset"===o)return void i.removeAttribute("value");a.hasOwnProperty("value")?cb(i,a.type,s):a.hasOwnProperty("defaultValue")&&cb(i,a.type,Sa(a.defaultValue)),null==a.checked&&null!=a.defaultChecked&&(i.defaultChecked=!!a.defaultChecked)}function db(i,a,s){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var o=a.type;if(!("submit"!==o&&"reset"!==o||void 0!==a.value&&null!==a.value))return;a=""+i._wrapperState.initialValue,s||a===i.value||(i.value=a),i.defaultValue=a}""!==(s=i.name)&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,""!==s&&(i.name=s)}function cb(i,a,s){"number"===a&&Xa(i.ownerDocument)===i||(null==s?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}__name(Oa,"Oa"),__name(Pa,"Pa"),__name(Qa,"Qa"),__name(Ra,"Ra"),__name(Sa,"Sa"),__name(Ta,"Ta"),__name(Ua,"Ua"),__name(Va,"Va"),__name(Wa,"Wa"),__name(Xa,"Xa"),__name(Ya,"Ya"),__name(Za,"Za"),__name(ab,"ab"),__name(bb,"bb"),__name(db,"db"),__name(cb,"cb");var Te=Array.isArray;function fb(i,a,s,o){if(i=i.options,a){a={};for(var u=0;u<s.length;u++)a["$"+s[u]]=!0;for(s=0;s<i.length;s++)u=a.hasOwnProperty("$"+i[s].value),i[s].selected!==u&&(i[s].selected=u),u&&o&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),a=null,u=0;u<i.length;u++){if(i[u].value===s)return i[u].selected=!0,void(o&&(i[u].defaultSelected=!0));null!==a||i[u].disabled||(a=i[u])}null!==a&&(a.selected=!0)}}function gb(i,a){if(null!=a.dangerouslySetInnerHTML)throw Error(p(91));return ye({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,a){var s=a.value;if(null==s){if(s=a.children,a=a.defaultValue,null!=s){if(null!=a)throw Error(p(92));if(Te(s)){if(1<s.length)throw Error(p(93));s=s[0]}a=s}null==a&&(a=""),s=a}i._wrapperState={initialValue:Sa(s)}}function ib(i,a){var s=Sa(a.value),o=Sa(a.defaultValue);null!=s&&((s=""+s)!==i.value&&(i.value=s),null==a.defaultValue&&i.defaultValue!==s&&(i.defaultValue=s)),null!=o&&(i.defaultValue=""+o)}function jb(i){var a=i.textContent;a===i._wrapperState.initialValue&&""!==a&&null!==a&&(i.value=a)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,a){return null==i||"http://www.w3.org/1999/xhtml"===i?kb(a):"http://www.w3.org/2000/svg"===i&&"foreignObject"===a?"http://www.w3.org/1999/xhtml":i}__name(fb,"fb"),__name(gb,"gb"),__name(hb,"hb"),__name(ib,"ib"),__name(jb,"jb"),__name(kb,"kb"),__name(lb,"lb");var Se,xe,we=(xe=function(i,a){if("http://www.w3.org/2000/svg"!==i.namespaceURI||"innerHTML"in i)i.innerHTML=a;else{for((Se=Se||document.createElement("div")).innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Se.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(i,a,s,o){MSApp.execUnsafeLocalFunction(function(){return xe(i,a)})}:xe);function ob(i,a){if(a){var s=i.firstChild;if(s&&s===i.lastChild&&3===s.nodeType)return void(s.nodeValue=a)}i.textContent=a}__name(ob,"ob");var Pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Re=["Webkit","ms","Moz","O"];function rb(i,a,s){return null==a||"boolean"==typeof a||""===a?"":s||"number"!=typeof a||0===a||Pe.hasOwnProperty(i)&&Pe[i]?(""+a).trim():a+"px"}function sb(i,a){for(var s in i=i.style,a)if(a.hasOwnProperty(s)){var o=0===s.indexOf("--"),u=rb(s,a[s],o);"float"===s&&(s="cssFloat"),o?i.setProperty(s,u):i[s]=u}}Object.keys(Pe).forEach(function(i){Re.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Pe[a]=Pe[i]})}),__name(rb,"rb"),__name(sb,"sb");var ze=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,a){if(a){if(ze[i]&&(null!=a.children||null!=a.dangerouslySetInnerHTML))throw Error(p(137,i));if(null!=a.dangerouslySetInnerHTML){if(null!=a.children)throw Error(p(60));if("object"!=typeof a.dangerouslySetInnerHTML||!("__html"in a.dangerouslySetInnerHTML))throw Error(p(61))}if(null!=a.style&&"object"!=typeof a.style)throw Error(p(62))}}function vb(i,a){if(-1===i.indexOf("-"))return"string"==typeof a.is;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}__name(ub,"ub"),__name(vb,"vb");var He=null;function xb(i){return(i=i.target||i.srcElement||window).correspondingUseElement&&(i=i.correspondingUseElement),3===i.nodeType?i.parentNode:i}__name(xb,"xb");var $e=null,We=null,qe=null;function Bb(i){if(i=Cb(i)){if("function"!=typeof $e)throw Error(p(280));var a=i.stateNode;a&&(a=Db(a),$e(i.stateNode,i.type,a))}}function Eb(i){We?qe?qe.push(i):qe=[i]:We=i}function Fb(){if(We){var i=We,a=qe;if(qe=We=null,Bb(i),a)for(i=0;i<a.length;i++)Bb(a[i])}}function Gb(i,a){return i(a)}function Hb(){}__name(Bb,"Bb"),__name(Eb,"Eb"),__name(Fb,"Fb"),__name(Gb,"Gb"),__name(Hb,"Hb");var Xe=!1;function Jb(i,a,s){if(Xe)return i(a,s);Xe=!0;try{return Gb(i,a,s)}finally{Xe=!1,(null!==We||null!==qe)&&(Hb(),Fb())}}function Kb(i,a){var s=i.stateNode;if(null===s)return null;var o=Db(s);if(null===o)return null;s=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(o=!("button"===(i=i.type)||"input"===i||"select"===i||"textarea"===i)),i=!o;break e;default:i=!1}if(i)return null;if(s&&"function"!=typeof s)throw Error(p(231,a,typeof s));return s}__name(Jb,"Jb"),__name(Kb,"Kb");var Qe=!1;if(u)try{var Ye={};Object.defineProperty(Ye,"passive",{get:/* @__PURE__ */__name(function(){Qe=!0},"get")}),window.addEventListener("test",Ye,Ye),window.removeEventListener("test",Ye,Ye)}catch(xe){Qe=!1}function Nb(i,a,s,o,u,_,x,w,C){var L=Array.prototype.slice.call(arguments,3);try{a.apply(s,L)}catch(B){this.onError(B)}}__name(Nb,"Nb");var et=!1,tt=null,nt=!1,it=null,rt={onError:/* @__PURE__ */__name(function(i){et=!0,tt=i},"onError")};function Tb(i,a,s,o,u,_,x,w,C){et=!1,tt=null,Nb.apply(rt,arguments)}function Ub(i,a,s,o,u,_,x,w,C){if(Tb.apply(this,arguments),et){if(!et)throw Error(p(198));var L=tt;et=!1,tt=null,nt||(nt=!0,it=L)}}function Vb(i){var a=i,s=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do{!!(4098&(a=i).flags)&&(s=a.return),i=a.return}while(i)}return 3===a.tag?s:null}function Wb(i){if(13===i.tag){var a=i.memoizedState;if(null===a&&(null!==(i=i.alternate)&&(a=i.memoizedState)),null!==a)return a.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p(188))}function Yb(i){var a=i.alternate;if(!a){if(null===(a=Vb(i)))throw Error(p(188));return a!==i?null:i}for(var s=i,o=a;;){var u=s.return;if(null===u)break;var _=u.alternate;if(null===_){if(null!==(o=u.return)){s=o;continue}break}if(u.child===_.child){for(_=u.child;_;){if(_===s)return Xb(u),i;if(_===o)return Xb(u),a;_=_.sibling}throw Error(p(188))}if(s.return!==o.return)s=u,o=_;else{for(var x=!1,w=u.child;w;){if(w===s){x=!0,s=u,o=_;break}if(w===o){x=!0,o=u,s=_;break}w=w.sibling}if(!x){for(w=_.child;w;){if(w===s){x=!0,s=_,o=u;break}if(w===o){x=!0,o=_,s=u;break}w=w.sibling}if(!x)throw Error(p(189))}}if(s.alternate!==o)throw Error(p(190))}if(3!==s.tag)throw Error(p(188));return s.stateNode.current===s?i:a}function Zb(i){return null!==(i=Yb(i))?$b(i):null}function $b(i){if(5===i.tag||6===i.tag)return i;for(i=i.child;null!==i;){var a=$b(i);if(null!==a)return a;i=i.sibling}return null}__name(Tb,"Tb"),__name(Ub,"Ub"),__name(Vb,"Vb"),__name(Wb,"Wb"),__name(Xb,"Xb"),__name(Yb,"Yb"),__name(Zb,"Zb"),__name($b,"$b");var at=a.unstable_scheduleCallback,st=a.unstable_cancelCallback,ot=a.unstable_shouldYield,lt=a.unstable_requestPaint,ct=a.unstable_now,ut=a.unstable_getCurrentPriorityLevel,dt=a.unstable_ImmediatePriority,ht=a.unstable_UserBlockingPriority,pt=a.unstable_NormalPriority,mt=a.unstable_LowPriority,ft=a.unstable_IdlePriority,gt=null,_t=null;function mc(i){if(_t&&"function"==typeof _t.onCommitFiberRoot)try{_t.onCommitFiberRoot(gt,i,void 0,!(128&~i.current.flags))}catch(ir){}}__name(mc,"mc");var yt=Math.clz32?Math.clz32:nc,vt=Math.log,bt=Math.LN2;function nc(i){return 0===(i>>>=0)?32:31-(vt(i)/bt|0)|0}__name(nc,"nc");var Tt=64,St=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&i;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&i;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,a){var s=i.pendingLanes;if(0===s)return 0;var o=0,u=i.suspendedLanes,_=i.pingedLanes,x=268435455&s;if(0!==x){var w=x&~u;0!==w?o=tc(w):0!==(_&=x)&&(o=tc(_))}else 0!==(x=s&~u)?o=tc(x):0!==_&&(o=tc(_));if(0===o)return 0;if(0!==a&&a!==o&&0===(a&u)&&((u=o&-o)>=(_=a&-a)||16===u&&4194240&_))return a;if(4&o&&(o|=16&s),0!==(a=i.entangledLanes))for(i=i.entanglements,a&=o;0<a;)u=1<<(s=31-yt(a)),o|=i[s],a&=~u;return o}function vc(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;default:return-1}}function wc(i,a){for(var s=i.suspendedLanes,o=i.pingedLanes,u=i.expirationTimes,_=i.pendingLanes;0<_;){var x=31-yt(_),w=1<<x,C=u[x];-1===C?0!==(w&s)&&0===(w&o)||(u[x]=vc(w,a)):C<=a&&(i.expiredLanes|=w),_&=~w}}function xc(i){return 0!==(i=-1073741825&i.pendingLanes)?i:1073741824&i?1073741824:0}function yc(){var i=Tt;return!(4194240&(Tt<<=1))&&(Tt=64),i}function zc(i){for(var a=[],s=0;31>s;s++)a.push(i);return a}function Ac(i,a,s){i.pendingLanes|=a,536870912!==a&&(i.suspendedLanes=0,i.pingedLanes=0),(i=i.eventTimes)[a=31-yt(a)]=s}function Bc(i,a){var s=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var o=i.eventTimes;for(i=i.expirationTimes;0<s;){var u=31-yt(s),_=1<<u;a[u]=0,o[u]=-1,i[u]=-1,s&=~_}}function Cc(i,a){var s=i.entangledLanes|=a;for(i=i.entanglements;s;){var o=31-yt(s),u=1<<o;u&a|i[o]&a&&(i[o]|=a),s&=~u}}__name(tc,"tc"),__name(uc,"uc"),__name(vc,"vc"),__name(wc,"wc"),__name(xc,"xc"),__name(yc,"yc"),__name(zc,"zc"),__name(Ac,"Ac"),__name(Bc,"Bc"),__name(Cc,"Cc");var xt=0;function Dc(i){return 1<(i&=-i)?4<i?268435455&i?16:536870912:4:1}__name(Dc,"Dc");var wt,At,Ct,Et,Mt,kt=!1,Pt=[],It=null,Lt=null,Dt=null,Rt=/* @__PURE__ */new Map,Ot=/* @__PURE__ */new Map,Nt=[],Bt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,a){switch(i){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Rt.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(a.pointerId)}}function Tc(i,a,s,o,u,_){return null===i||i.nativeEvent!==_?(i={blockedOn:a,domEventName:s,eventSystemFlags:o,nativeEvent:_,targetContainers:[u]},null!==a&&(null!==(a=Cb(a))&&At(a)),i):(i.eventSystemFlags|=o,a=i.targetContainers,null!==u&&-1===a.indexOf(u)&&a.push(u),i)}function Uc(i,a,s,o,u){switch(a){case"focusin":return It=Tc(It,i,a,s,o,u),!0;case"dragenter":return Lt=Tc(Lt,i,a,s,o,u),!0;case"mouseover":return Dt=Tc(Dt,i,a,s,o,u),!0;case"pointerover":var _=u.pointerId;return Rt.set(_,Tc(Rt.get(_)||null,i,a,s,o,u)),!0;case"gotpointercapture":return _=u.pointerId,Ot.set(_,Tc(Ot.get(_)||null,i,a,s,o,u)),!0}return!1}function Vc(i){var a=Wc(i.target);if(null!==a){var s=Vb(a);if(null!==s)if(13===(a=s.tag)){if(null!==(a=Wb(s)))return i.blockedOn=a,void Mt(i.priority,function(){Ct(s)})}else if(3===a&&s.stateNode.current.memoizedState.isDehydrated)return void(i.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}i.blockedOn=null}function Xc(i){if(null!==i.blockedOn)return!1;for(var a=i.targetContainers;0<a.length;){var s=Yc(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(null!==s)return null!==(a=Cb(s))&&At(a),i.blockedOn=s,!1;var o=new(s=i.nativeEvent).constructor(s.type,s);He=o,s.target.dispatchEvent(o),He=null,a.shift()}return!0}function Zc(i,a,s){Xc(i)&&s.delete(a)}function $c(){kt=!1,null!==It&&Xc(It)&&(It=null),null!==Lt&&Xc(Lt)&&(Lt=null),null!==Dt&&Xc(Dt)&&(Dt=null),Rt.forEach(Zc),Ot.forEach(Zc)}function ad(i,s){i.blockedOn===s&&(i.blockedOn=null,kt||(kt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,$c)))}function bd(i){function b(a){return ad(a,i)}if(__name(b,"b"),0<Pt.length){ad(Pt[0],i);for(var a=1;a<Pt.length;a++){var s=Pt[a];s.blockedOn===i&&(s.blockedOn=null)}}for(null!==It&&ad(It,i),null!==Lt&&ad(Lt,i),null!==Dt&&ad(Dt,i),Rt.forEach(b),Ot.forEach(b),a=0;a<Nt.length;a++)(s=Nt[a]).blockedOn===i&&(s.blockedOn=null);for(;0<Nt.length&&null===(a=Nt[0]).blockedOn;)Vc(a),null===a.blockedOn&&Nt.shift()}__name(Sc,"Sc"),__name(Tc,"Tc"),__name(Uc,"Uc"),__name(Vc,"Vc"),__name(Xc,"Xc"),__name(Zc,"Zc"),__name($c,"$c"),__name(ad,"ad"),__name(bd,"bd");var Ft=U.ReactCurrentBatchConfig,Ut=!0;function ed(i,a,s,o){var u=xt,_=Ft.transition;Ft.transition=null;try{xt=1,fd(i,a,s,o)}finally{xt=u,Ft.transition=_}}function gd(i,a,s,o){var u=xt,_=Ft.transition;Ft.transition=null;try{xt=4,fd(i,a,s,o)}finally{xt=u,Ft.transition=_}}function fd(i,a,s,o){if(Ut){var u=Yc(i,a,s,o);if(null===u)hd(i,a,o,jt,s),Sc(i,o);else if(Uc(u,i,a,s,o))o.stopPropagation();else if(Sc(i,o),4&a&&-1<Bt.indexOf(i)){for(;null!==u;){var _=Cb(u);if(null!==_&&wt(_),null===(_=Yc(i,a,s,o))&&hd(i,a,o,jt,s),_===u)break;u=_}null!==u&&o.stopPropagation()}else hd(i,a,o,null,s)}}__name(ed,"ed"),__name(gd,"gd"),__name(fd,"fd");var jt=null;function Yc(i,a,s,o){if(jt=null,null!==(i=Wc(i=xb(o))))if(null===(a=Vb(i)))i=null;else if(13===(s=a.tag)){if(null!==(i=Wb(a)))return i;i=null}else if(3===s){if(a.stateNode.current.memoizedState.isDehydrated)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return jt=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ut()){case dt:return 1;case ht:return 4;case pt:case mt:return 16;case ft:return 536870912;default:return 16}default:return 16}}__name(Yc,"Yc"),__name(jd,"jd");var Vt=null,zt=null,Ht=null;function nd(){if(Ht)return Ht;var i,a,s=zt,o=s.length,u="value"in Vt?Vt.value:Vt.textContent,_=u.length;for(i=0;i<o&&s[i]===u[i];i++);var x=o-i;for(a=1;a<=x&&s[o-a]===u[_-a];a++);return Ht=u.slice(i,1<a?1-a:void 0)}function od(i){var a=i.keyCode;return"charCode"in i?0===(i=i.charCode)&&13===a&&(i=13):i=a,10===i&&(i=13),32<=i||13===i?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function b(a,s,o,u,_){for(var x in this._reactName=a,this._targetInst=o,this.type=s,this.nativeEvent=u,this.target=_,this.currentTarget=null,i)i.hasOwnProperty(x)&&(a=i[x],this[x]=a?a(u):u[x]);return this.isDefaultPrevented=(null!=u.defaultPrevented?u.defaultPrevented:!1===u.returnValue)?pd:qd,this.isPropagationStopped=qd,this}return __name(b,"b"),ye(b.prototype,{preventDefault:/* @__PURE__ */__name(function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():"unknown"!=typeof i.returnValue&&(i.returnValue=!1),this.isDefaultPrevented=pd)},"preventDefault"),stopPropagation:/* @__PURE__ */__name(function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():"unknown"!=typeof i.cancelBubble&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},"stopPropagation"),persist:/* @__PURE__ */__name(function(){},"persist"),isPersistent:pd}),b}__name(nd,"nd"),__name(od,"od"),__name(pd,"pd"),__name(qd,"qd"),__name(rd,"rd");var $t,Gt,Wt,qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:/* @__PURE__ */__name(function(i){return i.timeStamp||Date.now()},"timeStamp"),defaultPrevented:0,isTrusted:0},Xt=rd(qt),Qt=ye({},qt,{view:0,detail:0}),Kt=rd(Qt),Yt=ye({},Qt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:/* @__PURE__ */__name(function(i){return void 0===i.relatedTarget?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},"relatedTarget"),movementX:/* @__PURE__ */__name(function(i){return"movementX"in i?i.movementX:(i!==Wt&&(Wt&&"mousemove"===i.type?($t=i.screenX-Wt.screenX,Gt=i.screenY-Wt.screenY):Gt=$t=0,Wt=i),$t)},"movementX"),movementY:/* @__PURE__ */__name(function(i){return"movementY"in i?i.movementY:Gt},"movementY")}),Jt=rd(Yt),Zt=rd(ye({},Yt,{dataTransfer:0})),en=rd(ye({},Qt,{relatedTarget:0})),tn=rd(ye({},qt,{animationName:0,elapsedTime:0,pseudoElement:0})),nn=ye({},qt,{clipboardData:/* @__PURE__ */__name(function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData},"clipboardData")}),an=rd(nn),sn=rd(ye({},qt,{data:0})),ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):!!(i=dn[i])&&!!a[i]}function zd(){return Pd}__name(Pd,"Pd"),__name(zd,"zd");var hn=ye({},Qt,{key:/* @__PURE__ */__name(function(i){if(i.key){var a=ln[i.key]||i.key;if("Unidentified"!==a)return a}return"keypress"===i.type?13===(i=od(i))?"Enter":String.fromCharCode(i):"keydown"===i.type||"keyup"===i.type?cn[i.keyCode]||"Unidentified":""},"key"),code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:/* @__PURE__ */__name(function(i){return"keypress"===i.type?od(i):0},"charCode"),keyCode:/* @__PURE__ */__name(function(i){return"keydown"===i.type||"keyup"===i.type?i.keyCode:0},"keyCode"),which:/* @__PURE__ */__name(function(i){return"keypress"===i.type?od(i):"keydown"===i.type||"keyup"===i.type?i.keyCode:0},"which")}),pn=rd(hn),mn=rd(ye({},Yt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),fn=rd(ye({},Qt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd})),gn=rd(ye({},qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=ye({},Yt,{deltaX:/* @__PURE__ */__name(function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},"deltaX"),deltaY:/* @__PURE__ */__name(function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},"deltaY"),deltaZ:0,deltaMode:0}),yn=rd(_n),vn=[9,13,27,32],bn=u&&"CompositionEvent"in window,Tn=null;u&&"documentMode"in document&&(Tn=document.documentMode);var Sn=u&&"TextEvent"in window&&!Tn,xn=u&&(!bn||Tn&&8<Tn&&11>=Tn),wn=String.fromCharCode(32),An=!1;function ge(i,a){switch(i){case"keyup":return-1!==vn.indexOf(a.keyCode);case"keydown":return 229!==a.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return"object"==typeof(i=i.detail)&&"data"in i?i.data:null}__name(ge,"ge"),__name(he,"he");var Cn=!1;function je(i,a){switch(i){case"compositionend":return he(a);case"keypress":return 32!==a.which?null:(An=!0,wn);case"textInput":return(i=a.data)===wn&&An?null:i;default:return null}}function ke(i,a){if(Cn)return"compositionend"===i||!bn&&ge(i,a)?(i=nd(),Ht=zt=Vt=null,Cn=!1,i):null;switch(i){case"paste":default:return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return xn&&"ko"!==a.locale?null:a.data}}__name(je,"je"),__name(ke,"ke");var En={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return"input"===a?!!En[i.type]:"textarea"===a}function ne(i,a,s,o){Eb(o),0<(a=oe(a,"onChange")).length&&(s=new Xt("onChange","change",null,s,o),i.push({event:s,listeners:a}))}__name(me,"me"),__name(ne,"ne");var Mn=null,kn=null;function re(i){se(i,0)}function te(i){if(Wa(ue(i)))return i}function ve(i,a){if("change"===i)return a}__name(re,"re"),__name(te,"te"),__name(ve,"ve");var Pn=!1;if(u){var In;if(u){var Ln="oninput"in document;if(!Ln){var Dn=document.createElement("div");Dn.setAttribute("oninput","return;"),Ln="function"==typeof Dn.oninput}In=Ln}else In=!1;Pn=In&&(!document.documentMode||9<document.documentMode)}function Ae(){Mn&&(Mn.detachEvent("onpropertychange",Be),kn=Mn=null)}function Be(i){if("value"===i.propertyName&&te(kn)){var a=[];ne(a,kn,i,xb(i)),Jb(re,a)}}function Ce(i,a,s){"focusin"===i?(Ae(),kn=s,(Mn=a).attachEvent("onpropertychange",Be)):"focusout"===i&&Ae()}function De(i){if("selectionchange"===i||"keyup"===i||"keydown"===i)return te(kn)}function Ee(i,a){if("click"===i)return te(a)}function Fe(i,a){if("input"===i||"change"===i)return te(a)}function Ge(i,a){return i===a&&(0!==i||1/i==1/a)||i!=i&&a!=a}__name(Ae,"Ae"),__name(Be,"Be"),__name(Ce,"Ce"),__name(De,"De"),__name(Ee,"Ee"),__name(Fe,"Fe"),__name(Ge,"Ge");var Rn="function"==typeof Object.is?Object.is:Ge;function Ie(i,a){if(Rn(i,a))return!0;if("object"!=typeof i||null===i||"object"!=typeof a||null===a)return!1;var s=Object.keys(i),o=Object.keys(a);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var u=s[o];if(!_.call(a,u)||!Rn(i[u],a[u]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,a){var s,o=Je(i);for(i=0;o;){if(3===o.nodeType){if(s=i+o.textContent.length,i<=a&&s>=a)return{node:o,offset:a-i};i=s}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Je(o)}}function Le(i,a){return!(!i||!a)&&(i===a||(!i||3!==i.nodeType)&&(a&&3===a.nodeType?Le(i,a.parentNode):"contains"in i?i.contains(a):!!i.compareDocumentPosition&&!!(16&i.compareDocumentPosition(a))))}function Me(){for(var i=window,a=Xa();a instanceof i.HTMLIFrameElement;){try{var s="string"==typeof a.contentWindow.location.href}catch(o){s=!1}if(!s)break;a=Xa((i=a.contentWindow).document)}return a}function Ne(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&("input"===a&&("text"===i.type||"search"===i.type||"tel"===i.type||"url"===i.type||"password"===i.type)||"textarea"===a||"true"===i.contentEditable)}function Oe(i){var a=Me(),s=i.focusedElem,o=i.selectionRange;if(a!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(null!==o&&Ne(s))if(a=o.start,void 0===(i=o.end)&&(i=a),"selectionStart"in s)s.selectionStart=a,s.selectionEnd=Math.min(i,s.value.length);else if((i=(a=s.ownerDocument||document)&&a.defaultView||window).getSelection){i=i.getSelection();var u=s.textContent.length,_=Math.min(o.start,u);o=void 0===o.end?_:Math.min(o.end,u),!i.extend&&_>o&&(u=o,o=_,_=u),u=Ke(s,_);var x=Ke(s,o);u&&x&&(1!==i.rangeCount||i.anchorNode!==u.node||i.anchorOffset!==u.offset||i.focusNode!==x.node||i.focusOffset!==x.offset)&&((a=a.createRange()).setStart(u.node,u.offset),i.removeAllRanges(),_>o?(i.addRange(a),i.extend(x.node,x.offset)):(a.setEnd(x.node,x.offset),i.addRange(a)))}for(a=[],i=s;i=i.parentNode;)1===i.nodeType&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<a.length;s++)(i=a[s]).element.scrollLeft=i.left,i.element.scrollTop=i.top}}__name(Ie,"Ie"),__name(Je,"Je"),__name(Ke,"Ke"),__name(Le,"Le"),__name(Me,"Me"),__name(Ne,"Ne"),__name(Oe,"Oe");var On=u&&"documentMode"in document&&11>=document.documentMode,Nn=null,Bn=null,Fn=null,Un=!1;function Ue(i,a,s){var o=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;Un||null==Nn||Nn!==Xa(o)||("selectionStart"in(o=Nn)&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},Fn&&Ie(Fn,o)||(Fn=o,0<(o=oe(Bn,"onSelect")).length&&(a=new Xt("onSelect","select",null,a,s),i.push({event:a,listeners:o}),a.target=Nn)))}function Ve(i,a){var s={};return s[i.toLowerCase()]=a.toLowerCase(),s["Webkit"+i]="webkit"+a,s["Moz"+i]="moz"+a,s}__name(Ue,"Ue"),__name(Ve,"Ve");var jn={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Vn={},zn={};function Ze(i){if(Vn[i])return Vn[i];if(!jn[i])return i;var a,s=jn[i];for(a in s)if(s.hasOwnProperty(a)&&a in zn)return Vn[i]=s[a];return i}u&&(zn=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition),__name(Ze,"Ze");var Hn=Ze("animationend"),$n=Ze("animationiteration"),Gn=Ze("animationstart"),Wn=Ze("transitionend"),qn=/* @__PURE__ */new Map,Xn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,a){qn.set(i,a),fa(a,[i])}__name(ff,"ff");for(var Qn=0;Qn<Xn.length;Qn++){var Kn=Xn[Qn];ff(Kn.toLowerCase(),"on"+(Kn[0].toUpperCase()+Kn.slice(1)))}ff(Hn,"onAnimationEnd"),ff($n,"onAnimationIteration"),ff(Gn,"onAnimationStart"),ff("dblclick","onDoubleClick"),ff("focusin","onFocus"),ff("focusout","onBlur"),ff(Wn,"onTransitionEnd"),ha("onMouseEnter",["mouseout","mouseover"]),ha("onMouseLeave",["mouseout","mouseover"]),ha("onPointerEnter",["pointerout","pointerover"]),ha("onPointerLeave",["pointerout","pointerover"]),fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fa("onBeforeInput",["compositionend","keypress","textInput","paste"]),fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yn));function nf(i,a,s){var o=i.type||"unknown-event";i.currentTarget=s,Ub(o,a,void 0,i),i.currentTarget=null}function se(i,a){a=!!(4&a);for(var s=0;s<i.length;s++){var o=i[s],u=o.event;o=o.listeners;e:{var _=void 0;if(a)for(var x=o.length-1;0<=x;x--){var w=o[x],C=w.instance,L=w.currentTarget;if(w=w.listener,C!==_&&u.isPropagationStopped())break e;nf(u,w,L),_=C}else for(x=0;x<o.length;x++){if(C=(w=o[x]).instance,L=w.currentTarget,w=w.listener,C!==_&&u.isPropagationStopped())break e;nf(u,w,L),_=C}}}if(nt)throw i=it,nt=!1,it=null,i}function D(i,a){var s=a[sr];void 0===s&&(s=a[sr]=/* @__PURE__ */new Set);var o=i+"__bubble";s.has(o)||(pf(a,i,2,!1),s.add(o))}function qf(i,a,s){var o=0;a&&(o|=4),pf(s,i,o,a)}__name(nf,"nf"),__name(se,"se"),__name(D,"D"),__name(qf,"qf");var Zn="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[Zn]){i[Zn]=!0,s.forEach(function(a){"selectionchange"!==a&&(Jn.has(a)||qf(a,!1,i),qf(a,!0,i))});var a=9===i.nodeType?i:i.ownerDocument;null===a||a[Zn]||(a[Zn]=!0,qf("selectionchange",!1,a))}}function pf(i,a,s,o){switch(jd(a)){case 1:var u=ed;break;case 4:u=gd;break;default:u=fd}s=u.bind(null,a,s,i),u=void 0,!Qe||"touchstart"!==a&&"touchmove"!==a&&"wheel"!==a||(u=!0),o?void 0!==u?i.addEventListener(a,s,{capture:!0,passive:u}):i.addEventListener(a,s,!0):void 0!==u?i.addEventListener(a,s,{passive:u}):i.addEventListener(a,s,!1)}function hd(i,a,s,o,u){var _=o;if(!(1&a||2&a||null===o))e:for(;;){if(null===o)return;var x=o.tag;if(3===x||4===x){var w=o.stateNode.containerInfo;if(w===u||8===w.nodeType&&w.parentNode===u)break;if(4===x)for(x=o.return;null!==x;){var C=x.tag;if((3===C||4===C)&&((C=x.stateNode.containerInfo)===u||8===C.nodeType&&C.parentNode===u))return;x=x.return}for(;null!==w;){if(null===(x=Wc(w)))return;if(5===(C=x.tag)||6===C){o=_=x;continue e}w=w.parentNode}}o=o.return}Jb(function(){var o=_,u=xb(s),x=[];e:{var w=qn.get(i);if(void 0!==w){var C=Xt,L=i;switch(i){case"keypress":if(0===od(s))break e;case"keydown":case"keyup":C=pn;break;case"focusin":L="focus",C=en;break;case"focusout":L="blur",C=en;break;case"beforeblur":case"afterblur":C=en;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Jt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Zt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=fn;break;case Hn:case $n:case Gn:C=tn;break;case Wn:C=gn;break;case"scroll":C=Kt;break;case"wheel":C=yn;break;case"copy":case"cut":case"paste":C=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=mn}var B=!!(4&a),U=!B&&"scroll"===i,j=B?null!==w?w+"Capture":null:w;B=[];for(var V,z=o;null!==z;){var $=(V=z).stateNode;if(5===V.tag&&null!==$&&(V=$,null!==j&&(null!=($=Kb(z,j))&&B.push(tf(z,$,V)))),U)break;z=z.return}0<B.length&&(w=new C(w,L,null,s,u),x.push({event:w,listeners:B}))}}if(!(7&a)){if(C="mouseout"===i||"pointerout"===i,(!(w="mouseover"===i||"pointerover"===i)||s===He||!(L=s.relatedTarget||s.fromElement)||!Wc(L)&&!L[ar])&&(C||w)&&(w=u.window===u?u:(w=u.ownerDocument)?w.defaultView||w.parentWindow:window,C?(C=o,null!==(L=(L=s.relatedTarget||s.toElement)?Wc(L):null)&&(L!==(U=Vb(L))||5!==L.tag&&6!==L.tag)&&(L=null)):(C=null,L=o),C!==L)){if(B=Jt,$="onMouseLeave",j="onMouseEnter",z="mouse","pointerout"!==i&&"pointerover"!==i||(B=mn,$="onPointerLeave",j="onPointerEnter",z="pointer"),U=null==C?w:ue(C),V=null==L?w:ue(L),(w=new B($,z+"leave",C,s,u)).target=U,w.relatedTarget=V,$=null,Wc(u)===o&&((B=new B(j,z+"enter",L,s,u)).target=V,B.relatedTarget=U,$=B),U=$,C&&L)e:{for(j=L,z=0,V=B=C;V;V=vf(V))z++;for(V=0,$=j;$;$=vf($))V++;for(;0<z-V;)B=vf(B),z--;for(;0<V-z;)j=vf(j),V--;for(;z--;){if(B===j||null!==j&&B===j.alternate)break e;B=vf(B),j=vf(j)}B=null}else B=null;null!==C&&wf(x,w,C,B,!1),null!==L&&null!==U&&wf(x,U,L,B,!0)}if("select"===(C=(w=o?ue(o):window).nodeName&&w.nodeName.toLowerCase())||"input"===C&&"file"===w.type)var Y=ve;else if(me(w))if(Pn)Y=Fe;else{Y=De;var Z=Ce}else(C=w.nodeName)&&"input"===C.toLowerCase()&&("checkbox"===w.type||"radio"===w.type)&&(Y=Ee);switch(Y&&(Y=Y(i,o))?ne(x,Y,s,u):(Z&&Z(i,w,o),"focusout"===i&&(Z=w._wrapperState)&&Z.controlled&&"number"===w.type&&cb(w,"number",w.value)),Z=o?ue(o):window,i){case"focusin":(me(Z)||"true"===Z.contentEditable)&&(Nn=Z,Bn=o,Fn=null);break;case"focusout":Fn=Bn=Nn=null;break;case"mousedown":Un=!0;break;case"contextmenu":case"mouseup":case"dragend":Un=!1,Ue(x,s,u);break;case"selectionchange":if(On)break;case"keydown":case"keyup":Ue(x,s,u)}var ee;if(bn)e:{switch(i){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else Cn?ge(i,s)&&(ie="onCompositionEnd"):"keydown"===i&&229===s.keyCode&&(ie="onCompositionStart");ie&&(xn&&"ko"!==s.locale&&(Cn||"onCompositionStart"!==ie?"onCompositionEnd"===ie&&Cn&&(ee=nd()):(zt="value"in(Vt=u)?Vt.value:Vt.textContent,Cn=!0)),0<(Z=oe(o,ie)).length&&(ie=new sn(ie,i,null,s,u),x.push({event:ie,listeners:Z}),ee?ie.data=ee:null!==(ee=he(s))&&(ie.data=ee))),(ee=Sn?je(i,s):ke(i,s))&&(0<(o=oe(o,"onBeforeInput")).length&&(u=new sn("onBeforeInput","beforeinput",null,s,u),x.push({event:u,listeners:o}),u.data=ee))}se(x,a)})}function tf(i,a,s){return{instance:i,listener:a,currentTarget:s}}function oe(i,a){for(var s=a+"Capture",o=[];null!==i;){var u=i,_=u.stateNode;5===u.tag&&null!==_&&(u=_,null!=(_=Kb(i,s))&&o.unshift(tf(i,_,u)),null!=(_=Kb(i,a))&&o.push(tf(i,_,u))),i=i.return}return o}function vf(i){if(null===i)return null;do{i=i.return}while(i&&5!==i.tag);return i||null}function wf(i,a,s,o,u){for(var _=a._reactName,x=[];null!==s&&s!==o;){var w=s,C=w.alternate,L=w.stateNode;if(null!==C&&C===o)break;5===w.tag&&null!==L&&(w=L,u?null!=(C=Kb(s,_))&&x.unshift(tf(s,C,w)):u||null!=(C=Kb(s,_))&&x.push(tf(s,C,w))),s=s.return}0!==x.length&&i.push({event:a,listeners:x})}__name(sf,"sf"),__name(pf,"pf"),__name(hd,"hd"),__name(tf,"tf"),__name(oe,"oe"),__name(vf,"vf"),__name(wf,"wf");var _i=/\r\n?/g,Ei=/\u0000|\uFFFD/g;function zf(i){return("string"==typeof i?i:""+i).replace(_i,"\n").replace(Ei,"")}function Af(i,a,s){if(a=zf(a),zf(i)!==a&&s)throw Error(p(425))}function Bf(){}__name(zf,"zf"),__name(Af,"Af"),__name(Bf,"Bf");var Mi=null,Pi=null;function Ef(i,a){return"textarea"===i||"noscript"===i||"string"==typeof a.children||"number"==typeof a.children||"object"==typeof a.dangerouslySetInnerHTML&&null!==a.dangerouslySetInnerHTML&&null!=a.dangerouslySetInnerHTML.__html}__name(Ef,"Ef");var Ri="function"==typeof setTimeout?setTimeout:void 0,Oi="function"==typeof clearTimeout?clearTimeout:void 0,Wi="function"==typeof Promise?Promise:void 0,er="function"==typeof queueMicrotask?queueMicrotask:void 0!==Wi?function(i){return Wi.resolve(null).then(i).catch(If)}:Ri;function If(i){setTimeout(function(){throw i})}function Kf(i,a){var s=a,o=0;do{var u=s.nextSibling;if(i.removeChild(s),u&&8===u.nodeType)if("/$"===(s=u.data)){if(0===o)return i.removeChild(u),void bd(a);o--}else"$"!==s&&"$?"!==s&&"$!"!==s||o++;s=u}while(s);bd(a)}function Lf(i){for(;null!=i;i=i.nextSibling){var a=i.nodeType;if(1===a||3===a)break;if(8===a){if("$"===(a=i.data)||"$!"===a||"$?"===a)break;if("/$"===a)return null}}return i}function Mf(i){i=i.previousSibling;for(var a=0;i;){if(8===i.nodeType){var s=i.data;if("$"===s||"$!"===s||"$?"===s){if(0===a)return i;a--}else"/$"===s&&a++}i=i.previousSibling}return null}__name(If,"If"),__name(Kf,"Kf"),__name(Lf,"Lf"),__name(Mf,"Mf");var tr=Math.random().toString(36).slice(2),nr="__reactFiber$"+tr,rr="__reactProps$"+tr,ar="__reactContainer$"+tr,sr="__reactEvents$"+tr,or="__reactListeners$"+tr,lr="__reactHandles$"+tr;function Wc(i){var a=i[nr];if(a)return a;for(var s=i.parentNode;s;){if(a=s[ar]||s[nr]){if(s=a.alternate,null!==a.child||null!==s&&null!==s.child)for(i=Mf(i);null!==i;){if(s=i[nr])return s;i=Mf(i)}return a}s=(i=s).parentNode}return null}function Cb(i){return!(i=i[nr]||i[ar])||5!==i.tag&&6!==i.tag&&13!==i.tag&&3!==i.tag?null:i}function ue(i){if(5===i.tag||6===i.tag)return i.stateNode;throw Error(p(33))}function Db(i){return i[rr]||null}__name(Wc,"Wc"),__name(Cb,"Cb"),__name(ue,"ue"),__name(Db,"Db");var cr=[],ur=-1;function Uf(i){return{current:i}}function E(i){0>ur||(i.current=cr[ur],cr[ur]=null,ur--)}function G(i,a){ur++,cr[ur]=i.current,i.current=a}__name(Uf,"Uf"),__name(E,"E"),__name(G,"G");var dr={},hr=Uf(dr),pr=Uf(!1),mr=dr;function Yf(i,a){var s=i.type.contextTypes;if(!s)return dr;var o=i.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===a)return o.__reactInternalMemoizedMaskedChildContext;var u,_={};for(u in s)_[u]=a[u];return o&&((i=i.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=_),_}function Zf(i){return null!=(i=i.childContextTypes)}function $f(){E(pr),E(hr)}function ag(i,a,s){if(hr.current!==dr)throw Error(p(168));G(hr,a),G(pr,s)}function bg(i,a,s){var o=i.stateNode;if(a=a.childContextTypes,"function"!=typeof o.getChildContext)return s;for(var u in o=o.getChildContext())if(!(u in a))throw Error(p(108,Ra(i)||"Unknown",u));return ye({},s,o)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||dr,mr=hr.current,G(hr,i),G(pr,pr.current),!0}function dg(i,a,s){var o=i.stateNode;if(!o)throw Error(p(169));s?(i=bg(i,a,mr),o.__reactInternalMemoizedMergedChildContext=i,E(pr),E(hr),G(hr,i)):E(pr),G(pr,s)}__name(Yf,"Yf"),__name(Zf,"Zf"),__name($f,"$f"),__name(ag,"ag"),__name(bg,"bg"),__name(cg,"cg"),__name(dg,"dg");var fr=null,gr=!1,_r=!1;function hg(i){null===fr?fr=[i]:fr.push(i)}function ig(i){gr=!0,hg(i)}function jg(){if(!_r&&null!==fr){_r=!0;var i=0,a=xt;try{var s=fr;for(xt=1;i<s.length;i++){var o=s[i];do{o=o(!0)}while(null!==o)}fr=null,gr=!1}catch(u){throw null!==fr&&(fr=fr.slice(i+1)),at(dt,jg),u}finally{xt=a,_r=!1}}return null}__name(hg,"hg"),__name(ig,"ig"),__name(jg,"jg");var yr=[],vr=0,br=null,Tr=0,Sr=[],xr=0,wr=null,Ar=1,Cr="";function tg(i,a){yr[vr++]=Tr,yr[vr++]=br,br=i,Tr=a}function ug(i,a,s){Sr[xr++]=Ar,Sr[xr++]=Cr,Sr[xr++]=wr,wr=i;var o=Ar;i=Cr;var u=32-yt(o)-1;o&=~(1<<u),s+=1;var _=32-yt(a)+u;if(30<_){var x=u-u%5;_=(o&(1<<x)-1).toString(32),o>>=x,u-=x,Ar=1<<32-yt(a)+u|s<<u|o,Cr=_+i}else Ar=1<<_|s<<u|o,Cr=i}function vg(i){null!==i.return&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===br;)br=yr[--vr],yr[vr]=null,Tr=yr[--vr],yr[vr]=null;for(;i===wr;)wr=Sr[--xr],Sr[xr]=null,Cr=Sr[--xr],Sr[xr]=null,Ar=Sr[--xr],Sr[xr]=null}__name(tg,"tg"),__name(ug,"ug"),__name(vg,"vg"),__name(wg,"wg");var Er=null,Mr=null,kr=!1,Pr=null;function Ag(i,a){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=a,s.return=i,null===(a=i.deletions)?(i.deletions=[s],i.flags|=16):a.push(s)}function Cg(i,a){switch(i.tag){case 5:var s=i.type;return null!==(a=1!==a.nodeType||s.toLowerCase()!==a.nodeName.toLowerCase()?null:a)&&(i.stateNode=a,Er=i,Mr=Lf(a.firstChild),!0);case 6:return null!==(a=""===i.pendingProps||3!==a.nodeType?null:a)&&(i.stateNode=a,Er=i,Mr=null,!0);case 13:return null!==(a=8!==a.nodeType?null:a)&&(s=null!==wr?{id:Ar,overflow:Cr}:null,i.memoizedState={dehydrated:a,treeContext:s,retryLane:1073741824},(s=Bg(18,null,null,0)).stateNode=a,s.return=i,i.child=s,Er=i,Mr=null,!0);default:return!1}}function Dg(i){return!(!(1&i.mode)||128&i.flags)}function Eg(i){if(kr){var a=Mr;if(a){var s=a;if(!Cg(i,a)){if(Dg(i))throw Error(p(418));a=Lf(s.nextSibling);var o=Er;a&&Cg(i,a)?Ag(o,s):(i.flags=-4097&i.flags|2,kr=!1,Er=i)}}else{if(Dg(i))throw Error(p(418));i.flags=-4097&i.flags|2,kr=!1,Er=i}}}function Fg(i){for(i=i.return;null!==i&&5!==i.tag&&3!==i.tag&&13!==i.tag;)i=i.return;Er=i}function Gg(i){if(i!==Er)return!1;if(!kr)return Fg(i),kr=!0,!1;var a;if((a=3!==i.tag)&&!(a=5!==i.tag)&&(a="head"!==(a=i.type)&&"body"!==a&&!Ef(i.type,i.memoizedProps)),a&&(a=Mr)){if(Dg(i))throw Hg(),Error(p(418));for(;a;)Ag(i,a),a=Lf(a.nextSibling)}if(Fg(i),13===i.tag){if(!(i=null!==(i=i.memoizedState)?i.dehydrated:null))throw Error(p(317));e:{for(i=i.nextSibling,a=0;i;){if(8===i.nodeType){var s=i.data;if("/$"===s){if(0===a){Mr=Lf(i.nextSibling);break e}a--}else"$"!==s&&"$!"!==s&&"$?"!==s||a++}i=i.nextSibling}Mr=null}}else Mr=Er?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=Mr;i;)i=Lf(i.nextSibling)}function Ig(){Mr=Er=null,kr=!1}function Jg(i){null===Pr?Pr=[i]:Pr.push(i)}__name(Ag,"Ag"),__name(Cg,"Cg"),__name(Dg,"Dg"),__name(Eg,"Eg"),__name(Fg,"Fg"),__name(Gg,"Gg"),__name(Hg,"Hg"),__name(Ig,"Ig"),__name(Jg,"Jg");var Ir=U.ReactCurrentBatchConfig;function Lg(i,a,s){if(null!==(i=s.ref)&&"function"!=typeof i&&"object"!=typeof i){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(p(309));var o=s.stateNode}if(!o)throw Error(p(147,i));var u=o,_=""+i;return null!==a&&null!==a.ref&&"function"==typeof a.ref&&a.ref._stringRef===_?a.ref:((a=/* @__PURE__ */__name(function(i){var a=u.refs;null===i?delete a[_]:a[_]=i},"b"))._stringRef=_,a)}if("string"!=typeof i)throw Error(p(284));if(!s._owner)throw Error(p(290,i))}return i}function Mg(i,a){throw i=Object.prototype.toString.call(a),Error(p(31,"[object Object]"===i?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Ng(i){return(0,i._init)(i._payload)}function Og(i){function b(a,s){if(i){var o=a.deletions;null===o?(a.deletions=[s],a.flags|=16):o.push(s)}}function c(a,s){if(!i)return null;for(;null!==s;)b(a,s),s=s.sibling;return null}function d(i,a){for(i=/* @__PURE__ */new Map;null!==a;)null!==a.key?i.set(a.key,a):i.set(a.index,a),a=a.sibling;return i}function e(i,a){return(i=Pg(i,a)).index=0,i.sibling=null,i}function f(a,s,o){return a.index=o,i?null!==(o=a.alternate)?(o=o.index)<s?(a.flags|=2,s):o:(a.flags|=2,s):(a.flags|=1048576,s)}function g(a){return i&&null===a.alternate&&(a.flags|=2),a}function h(i,a,s,o){return null===a||6!==a.tag?((a=Qg(s,i.mode,o)).return=i,a):((a=e(a,s)).return=i,a)}function k(i,a,s,o){var u=s.type;return u===z?m(i,a,s.props.children,o,s.key):null!==a&&(a.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===de&&Ng(u)===a.type)?((o=e(a,s.props)).ref=Lg(i,a,s),o.return=i,o):((o=Rg(s.type,s.key,s.props,null,i.mode,o)).ref=Lg(i,a,s),o.return=i,o)}function l(i,a,s,o){return null===a||4!==a.tag||a.stateNode.containerInfo!==s.containerInfo||a.stateNode.implementation!==s.implementation?((a=Sg(s,i.mode,o)).return=i,a):((a=e(a,s.children||[])).return=i,a)}function m(i,a,s,o,u){return null===a||7!==a.tag?((a=Tg(s,i.mode,o,u)).return=i,a):((a=e(a,s)).return=i,a)}function q(i,a,s){if("string"==typeof a&&""!==a||"number"==typeof a)return(a=Qg(""+a,i.mode,s)).return=i,a;if("object"==typeof a&&null!==a){switch(a.$$typeof){case j:return(s=Rg(a.type,a.key,a.props,null,i.mode,s)).ref=Lg(i,null,a),s.return=i,s;case V:return(a=Sg(a,i.mode,s)).return=i,a;case de:return q(i,(0,a._init)(a._payload),s)}if(Te(a)||Ka(a))return(a=Tg(a,i.mode,s,null)).return=i,a;Mg(i,a)}return null}function r(i,a,s,o){var u=null!==a?a.key:null;if("string"==typeof s&&""!==s||"number"==typeof s)return null!==u?null:h(i,a,""+s,o);if("object"==typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===u?k(i,a,s,o):null;case V:return s.key===u?l(i,a,s,o):null;case de:return r(i,a,(u=s._init)(s._payload),o)}if(Te(s)||Ka(s))return null!==u?null:m(i,a,s,o,null);Mg(i,s)}return null}function y(i,a,s,o,u){if("string"==typeof o&&""!==o||"number"==typeof o)return h(a,i=i.get(s)||null,""+o,u);if("object"==typeof o&&null!==o){switch(o.$$typeof){case j:return k(a,i=i.get(null===o.key?s:o.key)||null,o,u);case V:return l(a,i=i.get(null===o.key?s:o.key)||null,o,u);case de:return y(i,a,s,(0,o._init)(o._payload),u)}if(Te(o)||Ka(o))return m(a,i=i.get(s)||null,o,u,null);Mg(a,o)}return null}function n(a,s,o,u){for(var _=null,x=null,w=s,C=s=0,L=null;null!==w&&C<o.length;C++){w.index>C?(L=w,w=null):L=w.sibling;var B=r(a,w,o[C],u);if(null===B){null===w&&(w=L);break}i&&w&&null===B.alternate&&b(a,w),s=f(B,s,C),null===x?_=B:x.sibling=B,x=B,w=L}if(C===o.length)return c(a,w),kr&&tg(a,C),_;if(null===w){for(;C<o.length;C++)null!==(w=q(a,o[C],u))&&(s=f(w,s,C),null===x?_=w:x.sibling=w,x=w);return kr&&tg(a,C),_}for(w=d(a,w);C<o.length;C++)null!==(L=y(w,a,C,o[C],u))&&(i&&null!==L.alternate&&w.delete(null===L.key?C:L.key),s=f(L,s,C),null===x?_=L:x.sibling=L,x=L);return i&&w.forEach(function(i){return b(a,i)}),kr&&tg(a,C),_}function t(a,s,o,u){var _=Ka(o);if("function"!=typeof _)throw Error(p(150));if(null==(o=_.call(o)))throw Error(p(151));for(var x=_=null,w=s,C=s=0,L=null,B=o.next();null!==w&&!B.done;C++,B=o.next()){w.index>C?(L=w,w=null):L=w.sibling;var U=r(a,w,B.value,u);if(null===U){null===w&&(w=L);break}i&&w&&null===U.alternate&&b(a,w),s=f(U,s,C),null===x?_=U:x.sibling=U,x=U,w=L}if(B.done)return c(a,w),kr&&tg(a,C),_;if(null===w){for(;!B.done;C++,B=o.next())null!==(B=q(a,B.value,u))&&(s=f(B,s,C),null===x?_=B:x.sibling=B,x=B);return kr&&tg(a,C),_}for(w=d(a,w);!B.done;C++,B=o.next())null!==(B=y(w,a,C,B.value,u))&&(i&&null!==B.alternate&&w.delete(null===B.key?C:B.key),s=f(B,s,C),null===x?_=B:x.sibling=B,x=B);return i&&w.forEach(function(i){return b(a,i)}),kr&&tg(a,C),_}function J(i,a,s,o){if("object"==typeof s&&null!==s&&s.type===z&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case j:e:{for(var u=s.key,_=a;null!==_;){if(_.key===u){if((u=s.type)===z){if(7===_.tag){c(i,_.sibling),(a=e(_,s.props.children)).return=i,i=a;break e}}else if(_.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===de&&Ng(u)===_.type){c(i,_.sibling),(a=e(_,s.props)).ref=Lg(i,_,s),a.return=i,i=a;break e}c(i,_);break}b(i,_),_=_.sibling}s.type===z?((a=Tg(s.props.children,i.mode,o,s.key)).return=i,i=a):((o=Rg(s.type,s.key,s.props,null,i.mode,o)).ref=Lg(i,a,s),o.return=i,i=o)}return g(i);case V:e:{for(_=s.key;null!==a;){if(a.key===_){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){c(i,a.sibling),(a=e(a,s.children||[])).return=i,i=a;break e}c(i,a);break}b(i,a),a=a.sibling}(a=Sg(s,i.mode,o)).return=i,i=a}return g(i);case de:return J(i,a,(_=s._init)(s._payload),o)}if(Te(s))return n(i,a,s,o);if(Ka(s))return t(i,a,s,o);Mg(i,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==a&&6===a.tag?(c(i,a.sibling),(a=e(a,s)).return=i,i=a):(c(i,a),(a=Qg(s,i.mode,o)).return=i,i=a),g(i)):c(i,a)}return __name(b,"b"),__name(c,"c"),__name(d,"d"),__name(e,"e"),__name(f,"f"),__name(g,"g"),__name(h,"h"),__name(k,"k"),__name(l,"l"),__name(m,"m"),__name(q,"q"),__name(r,"r"),__name(y,"y"),__name(n,"n"),__name(t,"t"),__name(J,"J"),J}__name(Lg,"Lg"),__name(Mg,"Mg"),__name(Ng,"Ng"),__name(Og,"Og");var Lr=Og(!0),Dr=Og(!1),Rr=Uf(null),Or=null,Nr=null,Br=null;function $g(){Br=Nr=Or=null}function ah(i){var a=Rr.current;E(Rr),i._currentValue=a}function bh(i,a,s){for(;null!==i;){var o=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,null!==o&&(o.childLanes|=a)):null!==o&&(o.childLanes&a)!==a&&(o.childLanes|=a),i===s)break;i=i.return}}function ch(i,a){Or=i,Br=Nr=null,null!==(i=i.dependencies)&&null!==i.firstContext&&(0!==(i.lanes&a)&&(ma=!0),i.firstContext=null)}function eh(i){var a=i._currentValue;if(Br!==i)if(i={context:i,memoizedValue:a,next:null},null===Nr){if(null===Or)throw Error(p(308));Nr=i,Or.dependencies={lanes:0,firstContext:i}}else Nr=Nr.next=i;return a}__name($g,"$g"),__name(ah,"ah"),__name(bh,"bh"),__name(ch,"ch"),__name(eh,"eh");var Fr=null;function gh(i){null===Fr?Fr=[i]:Fr.push(i)}function hh(i,a,s,o){var u=a.interleaved;return null===u?(s.next=s,gh(a)):(s.next=u.next,u.next=s),a.interleaved=s,ih(i,o)}function ih(i,a){i.lanes|=a;var s=i.alternate;for(null!==s&&(s.lanes|=a),s=i,i=i.return;null!==i;)i.childLanes|=a,null!==(s=i.alternate)&&(s.childLanes|=a),s=i,i=i.return;return 3===s.tag?s.stateNode:null}__name(gh,"gh"),__name(hh,"hh"),__name(ih,"ih");var Ur=!1;function kh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mh(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function nh(i,a,s){var o=i.updateQueue;if(null===o)return null;if(o=o.shared,2&ja){var u=o.pending;return null===u?a.next=a:(a.next=u.next,u.next=a),o.pending=a,ih(i,s)}return null===(u=o.interleaved)?(a.next=a,gh(o)):(a.next=u.next,u.next=a),o.interleaved=a,ih(i,s)}function oh(i,a,s){if(null!==(a=a.updateQueue)&&(a=a.shared,4194240&s)){var o=a.lanes;s|=o&=i.pendingLanes,a.lanes=s,Cc(i,s)}}function ph(i,a){var s=i.updateQueue,o=i.alternate;if(null!==o&&s===(o=o.updateQueue)){var u=null,_=null;if(null!==(s=s.firstBaseUpdate)){do{var x={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===_?u=_=x:_=_.next=x,s=s.next}while(null!==s);null===_?u=_=a:_=_.next=a}else u=_=a;return s={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:_,shared:o.shared,effects:o.effects},void(i.updateQueue=s)}null===(i=s.lastBaseUpdate)?s.firstBaseUpdate=a:i.next=a,s.lastBaseUpdate=a}function qh(i,a,s,o){var u=i.updateQueue;Ur=!1;var _=u.firstBaseUpdate,x=u.lastBaseUpdate,w=u.shared.pending;if(null!==w){u.shared.pending=null;var C=w,L=C.next;C.next=null,null===x?_=L:x.next=L,x=C;var B=i.alternate;null!==B&&((w=(B=B.updateQueue).lastBaseUpdate)!==x&&(null===w?B.firstBaseUpdate=L:w.next=L,B.lastBaseUpdate=C))}if(null!==_){var U=u.baseState;for(x=0,B=L=C=null,w=_;;){var j=w.lane,V=w.eventTime;if((o&j)===j){null!==B&&(B=B.next={eventTime:V,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var z=i,$=w;switch(j=a,V=s,$.tag){case 1:if("function"==typeof(z=$.payload)){U=z.call(V,U,j);break e}U=z;break e;case 3:z.flags=-65537&z.flags|128;case 0:if(null==(j="function"==typeof(z=$.payload)?z.call(V,U,j):z))break e;U=ye({},U,j);break e;case 2:Ur=!0}}null!==w.callback&&0!==w.lane&&(i.flags|=64,null===(j=u.effects)?u.effects=[w]:j.push(w))}else V={eventTime:V,lane:j,tag:w.tag,payload:w.payload,callback:w.callback,next:null},null===B?(L=B=V,C=U):B=B.next=V,x|=j;if(null===(w=w.next)){if(null===(w=u.shared.pending))break;w=(j=w).next,j.next=null,u.lastBaseUpdate=j,u.shared.pending=null}}if(null===B&&(C=U),u.baseState=C,u.firstBaseUpdate=L,u.lastBaseUpdate=B,null!==(a=u.shared.interleaved)){u=a;do{x|=u.lane,u=u.next}while(u!==a)}else null===_&&(u.shared.lanes=0);is|=x,i.lanes=x,i.memoizedState=U}}function sh(i,a,s){if(i=a.effects,a.effects=null,null!==i)for(a=0;a<i.length;a++){var o=i[a],u=o.callback;if(null!==u){if(o.callback=null,o=s,"function"!=typeof u)throw Error(p(191,u));u.call(o)}}}__name(kh,"kh"),__name(lh,"lh"),__name(mh,"mh"),__name(nh,"nh"),__name(oh,"oh"),__name(ph,"ph"),__name(qh,"qh"),__name(sh,"sh");var jr={},Vr=Uf(jr),zr=Uf(jr),Hr=Uf(jr);function xh(i){if(i===jr)throw Error(p(174));return i}function yh(i,a){switch(G(Hr,a),G(zr,i),G(Vr,jr),i=a.nodeType){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:lb(null,"");break;default:a=lb(a=(i=8===i?a.parentNode:a).namespaceURI||null,i=i.tagName)}E(Vr),G(Vr,a)}function zh(){E(Vr),E(zr),E(Hr)}function Ah(i){xh(Hr.current);var a=xh(Vr.current),s=lb(a,i.type);a!==s&&(G(zr,i),G(Vr,s))}function Bh(i){zr.current===i&&(E(Vr),E(zr))}__name(xh,"xh"),__name(yh,"yh"),__name(zh,"zh"),__name(Ah,"Ah"),__name(Bh,"Bh");var $r=Uf(0);function Ch(i){for(var a=i;null!==a;){if(13===a.tag){var s=a.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return a}else if(19===a.tag&&void 0!==a.memoizedProps.revealOrder){if(128&a.flags)return a}else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===i)break;for(;null===a.sibling;){if(null===a.return||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}__name(Ch,"Ch");var Gr=[];function Eh(){for(var i=0;i<Gr.length;i++)Gr[i]._workInProgressVersionPrimary=null;Gr.length=0}__name(Eh,"Eh");var Wr=U.ReactCurrentDispatcher,qr=U.ReactCurrentBatchConfig,Xr=0,Qr=null,Kr=null,Yr=null,Jr=!1,Zr=!1,ea=0,na=0;function P(){throw Error(p(321))}function Mh(i,a){if(null===a)return!1;for(var s=0;s<a.length&&s<i.length;s++)if(!Rn(i[s],a[s]))return!1;return!0}function Nh(i,a,s,o,u,_){if(Xr=_,Qr=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Wr.current=null===i||null===i.memoizedState?ra:aa,i=s(o,u),Zr){_=0;do{if(Zr=!1,ea=0,25<=_)throw Error(p(301));_+=1,Yr=Kr=null,a.updateQueue=null,Wr.current=la,i=s(o,u)}while(Zr)}if(Wr.current=ia,a=null!==Kr&&null!==Kr.next,Xr=0,Yr=Kr=Qr=null,Jr=!1,a)throw Error(p(300));return i}function Sh(){var i=0!==ea;return ea=0,i}function Th(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Yr?Qr.memoizedState=Yr=i:Yr=Yr.next=i,Yr}function Uh(){if(null===Kr){var i=Qr.alternate;i=null!==i?i.memoizedState:null}else i=Kr.next;var a=null===Yr?Qr.memoizedState:Yr.next;if(null!==a)Yr=a,Kr=i;else{if(null===i)throw Error(p(310));i={memoizedState:(Kr=i).memoizedState,baseState:Kr.baseState,baseQueue:Kr.baseQueue,queue:Kr.queue,next:null},null===Yr?Qr.memoizedState=Yr=i:Yr=Yr.next=i}return Yr}function Vh(i,a){return"function"==typeof a?a(i):a}function Wh(i){var a=Uh(),s=a.queue;if(null===s)throw Error(p(311));s.lastRenderedReducer=i;var o=Kr,u=o.baseQueue,_=s.pending;if(null!==_){if(null!==u){var x=u.next;u.next=_.next,_.next=x}o.baseQueue=u=_,s.pending=null}if(null!==u){_=u.next,o=o.baseState;var w=x=null,C=null,L=_;do{var B=L.lane;if((Xr&B)===B)null!==C&&(C=C.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),o=L.hasEagerState?L.eagerState:i(o,L.action);else{var U={lane:B,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};null===C?(w=C=U,x=o):C=C.next=U,Qr.lanes|=B,is|=B}L=L.next}while(null!==L&&L!==_);null===C?x=o:C.next=w,Rn(o,a.memoizedState)||(ma=!0),a.memoizedState=o,a.baseState=x,a.baseQueue=C,s.lastRenderedState=o}if(null!==(i=s.interleaved)){u=i;do{_=u.lane,Qr.lanes|=_,is|=_,u=u.next}while(u!==i)}else null===u&&(s.lanes=0);return[a.memoizedState,s.dispatch]}function Xh(i){var a=Uh(),s=a.queue;if(null===s)throw Error(p(311));s.lastRenderedReducer=i;var o=s.dispatch,u=s.pending,_=a.memoizedState;if(null!==u){s.pending=null;var x=u=u.next;do{_=i(_,x.action),x=x.next}while(x!==u);Rn(_,a.memoizedState)||(ma=!0),a.memoizedState=_,null===a.baseQueue&&(a.baseState=_),s.lastRenderedState=_}return[_,o]}function Yh(){}function Zh(i,a){var s=Qr,o=Uh(),u=a(),_=!Rn(o.memoizedState,u);if(_&&(o.memoizedState=u,ma=!0),o=o.queue,$h(ai.bind(null,s,o,i),[i]),o.getSnapshot!==a||_||null!==Yr&&1&Yr.memoizedState.tag){if(s.flags|=2048,bi(9,ci.bind(null,s,o,u,a),void 0,null),null===za)throw Error(p(349));30&Xr||di(s,a,u)}return u}function di(i,a,s){i.flags|=16384,i={getSnapshot:a,value:s},null===(a=Qr.updateQueue)?(a={lastEffect:null,stores:null},Qr.updateQueue=a,a.stores=[i]):null===(s=a.stores)?a.stores=[i]:s.push(i)}function ci(i,a,s,o){a.value=s,a.getSnapshot=o,ei(a)&&fi(i)}function ai(i,a,s){return s(function(){ei(a)&&fi(i)})}function ei(i){var a=i.getSnapshot;i=i.value;try{var s=a();return!Rn(i,s)}catch(o){return!0}}function fi(i){var a=ih(i,1);null!==a&&gi(a,i,1,-1)}function hi(i){var a=Th();return"function"==typeof i&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:i},a.queue=i,i=i.dispatch=ii.bind(null,Qr,i),[a.memoizedState,i]}function bi(i,a,s,o){return i={tag:i,create:a,destroy:s,deps:o,next:null},null===(a=Qr.updateQueue)?(a={lastEffect:null,stores:null},Qr.updateQueue=a,a.lastEffect=i.next=i):null===(s=a.lastEffect)?a.lastEffect=i.next=i:(o=s.next,s.next=i,i.next=o,a.lastEffect=i),i}function ji(){return Uh().memoizedState}function ki(i,a,s,o){var u=Th();Qr.flags|=i,u.memoizedState=bi(1|a,s,void 0,void 0===o?null:o)}function li(i,a,s,o){var u=Uh();o=void 0===o?null:o;var _=void 0;if(null!==Kr){var x=Kr.memoizedState;if(_=x.destroy,null!==o&&Mh(o,x.deps))return void(u.memoizedState=bi(a,s,_,o))}Qr.flags|=i,u.memoizedState=bi(1|a,s,_,o)}function mi(i,a){return ki(8390656,8,i,a)}function $h(i,a){return li(2048,8,i,a)}function ni(i,a){return li(4,2,i,a)}function oi(i,a){return li(4,4,i,a)}function pi(i,a){return"function"==typeof a?(i=i(),a(i),function(){a(null)}):null!=a?(i=i(),a.current=i,function(){a.current=null}):void 0}function qi(i,a,s){return s=null!=s?s.concat([i]):null,li(4,4,pi.bind(null,a,i),s)}function ri(){}function si(i,a){var s=Uh();a=void 0===a?null:a;var o=s.memoizedState;return null!==o&&null!==a&&Mh(a,o[1])?o[0]:(s.memoizedState=[i,a],i)}function ti(i,a){var s=Uh();a=void 0===a?null:a;var o=s.memoizedState;return null!==o&&null!==a&&Mh(a,o[1])?o[0]:(i=i(),s.memoizedState=[i,a],i)}function ui(i,a,s){return 21&Xr?(Rn(s,a)||(s=yc(),Qr.lanes|=s,is|=s,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,ma=!0),i.memoizedState=s)}function vi(i,a){var s=xt;xt=0!==s&&4>s?s:4,i(!0);var o=qr.transition;qr.transition={};try{i(!1),a()}finally{xt=s,qr.transition=o}}function wi(){return Uh().memoizedState}function xi(i,a,s){var o=yi(i);if(s={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null},zi(i))Ai(a,s);else if(null!==(s=hh(i,a,s,o))){gi(s,i,o,R()),Bi(s,a,o)}}function ii(i,a,s){var o=yi(i),u={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(i))Ai(a,u);else{var _=i.alternate;if(0===i.lanes&&(null===_||0===_.lanes)&&null!==(_=a.lastRenderedReducer))try{var x=a.lastRenderedState,w=_(x,s);if(u.hasEagerState=!0,u.eagerState=w,Rn(w,x)){var C=a.interleaved;return null===C?(u.next=u,gh(a)):(u.next=C.next,C.next=u),void(a.interleaved=u)}}catch(L){}null!==(s=hh(i,a,u,o))&&(gi(s,i,o,u=R()),Bi(s,a,o))}}function zi(i){var a=i.alternate;return i===Qr||null!==a&&a===Qr}function Ai(i,a){Zr=Jr=!0;var s=i.pending;null===s?a.next=a:(a.next=s.next,s.next=a),i.pending=a}function Bi(i,a,s){if(4194240&s){var o=a.lanes;s|=o&=i.pendingLanes,a.lanes=s,Cc(i,s)}}__name(P,"P"),__name(Mh,"Mh"),__name(Nh,"Nh"),__name(Sh,"Sh"),__name(Th,"Th"),__name(Uh,"Uh"),__name(Vh,"Vh"),__name(Wh,"Wh"),__name(Xh,"Xh"),__name(Yh,"Yh"),__name(Zh,"Zh"),__name(di,"di"),__name(ci,"ci"),__name(ai,"ai"),__name(ei,"ei"),__name(fi,"fi"),__name(hi,"hi"),__name(bi,"bi"),__name(ji,"ji"),__name(ki,"ki"),__name(li,"li"),__name(mi,"mi"),__name($h,"$h"),__name(ni,"ni"),__name(oi,"oi"),__name(pi,"pi"),__name(qi,"qi"),__name(ri,"ri"),__name(si,"si"),__name(ti,"ti"),__name(ui,"ui"),__name(vi,"vi"),__name(wi,"wi"),__name(xi,"xi"),__name(ii,"ii"),__name(zi,"zi"),__name(Ai,"Ai"),__name(Bi,"Bi");var ia={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},ra={readContext:eh,useCallback:/* @__PURE__ */__name(function(i,a){return Th().memoizedState=[i,void 0===a?null:a],i},"useCallback"),useContext:eh,useEffect:mi,useImperativeHandle:/* @__PURE__ */__name(function(i,a,s){return s=null!=s?s.concat([i]):null,ki(4194308,4,pi.bind(null,a,i),s)},"useImperativeHandle"),useLayoutEffect:/* @__PURE__ */__name(function(i,a){return ki(4194308,4,i,a)},"useLayoutEffect"),useInsertionEffect:/* @__PURE__ */__name(function(i,a){return ki(4,2,i,a)},"useInsertionEffect"),useMemo:/* @__PURE__ */__name(function(i,a){var s=Th();return a=void 0===a?null:a,i=i(),s.memoizedState=[i,a],i},"useMemo"),useReducer:/* @__PURE__ */__name(function(i,a,s){var o=Th();return a=void 0!==s?s(a):a,o.memoizedState=o.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},o.queue=i,i=i.dispatch=xi.bind(null,Qr,i),[o.memoizedState,i]},"useReducer"),useRef:/* @__PURE__ */__name(function(i){return i={current:i},Th().memoizedState=i},"useRef"),useState:hi,useDebugValue:ri,useDeferredValue:/* @__PURE__ */__name(function(i){return Th().memoizedState=i},"useDeferredValue"),useTransition:/* @__PURE__ */__name(function(){var i=hi(!1),a=i[0];return i=vi.bind(null,i[1]),Th().memoizedState=i,[a,i]},"useTransition"),useMutableSource:/* @__PURE__ */__name(function(){},"useMutableSource"),useSyncExternalStore:/* @__PURE__ */__name(function(i,a,s){var o=Qr,u=Th();if(kr){if(void 0===s)throw Error(p(407));s=s()}else{if(s=a(),null===za)throw Error(p(349));30&Xr||di(o,a,s)}u.memoizedState=s;var _={value:s,getSnapshot:a};return u.queue=_,mi(ai.bind(null,o,_,i),[i]),o.flags|=2048,bi(9,ci.bind(null,o,_,s,a),void 0,null),s},"useSyncExternalStore"),useId:/* @__PURE__ */__name(function(){var i=Th(),a=za.identifierPrefix;if(kr){var s=Cr;a=":"+a+"R"+(s=(Ar&~(1<<32-yt(Ar)-1)).toString(32)+s),0<(s=ea++)&&(a+="H"+s.toString(32)),a+=":"}else a=":"+a+"r"+(s=na++).toString(32)+":";return i.memoizedState=a},"useId"),unstable_isNewReconciler:!1},aa={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:/* @__PURE__ */__name(function(){return Wh(Vh)},"useState"),useDebugValue:ri,useDeferredValue:/* @__PURE__ */__name(function(i){return ui(Uh(),Kr.memoizedState,i)},"useDeferredValue"),useTransition:/* @__PURE__ */__name(function(){return[Wh(Vh)[0],Uh().memoizedState]},"useTransition"),useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},la={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:/* @__PURE__ */__name(function(){return Xh(Vh)},"useState"),useDebugValue:ri,useDeferredValue:/* @__PURE__ */__name(function(i){var a=Uh();return null===Kr?a.memoizedState=i:ui(a,Kr.memoizedState,i)},"useDeferredValue"),useTransition:/* @__PURE__ */__name(function(){return[Xh(Vh)[0],Uh().memoizedState]},"useTransition"),useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(i,a){if(i&&i.defaultProps){for(var s in a=ye({},a),i=i.defaultProps)void 0===a[s]&&(a[s]=i[s]);return a}return a}function Di(i,a,s,o){s=null==(s=s(o,a=i.memoizedState))?a:ye({},a,s),i.memoizedState=s,0===i.lanes&&(i.updateQueue.baseState=s)}__name(Ci,"Ci"),__name(Di,"Di");var ca={isMounted:/* @__PURE__ */__name(function(i){return!!(i=i._reactInternals)&&Vb(i)===i},"isMounted"),enqueueSetState:/* @__PURE__ */__name(function(i,a,s){i=i._reactInternals;var o=R(),u=yi(i),_=mh(o,u);_.payload=a,null!=s&&(_.callback=s),null!==(a=nh(i,_,u))&&(gi(a,i,u,o),oh(a,i,u))},"enqueueSetState"),enqueueReplaceState:/* @__PURE__ */__name(function(i,a,s){i=i._reactInternals;var o=R(),u=yi(i),_=mh(o,u);_.tag=1,_.payload=a,null!=s&&(_.callback=s),null!==(a=nh(i,_,u))&&(gi(a,i,u,o),oh(a,i,u))},"enqueueReplaceState"),enqueueForceUpdate:/* @__PURE__ */__name(function(i,a){i=i._reactInternals;var s=R(),o=yi(i),u=mh(s,o);u.tag=2,null!=a&&(u.callback=a),null!==(a=nh(i,u,o))&&(gi(a,i,o,s),oh(a,i,o))},"enqueueForceUpdate")};function Fi(i,a,s,o,u,_,x){return"function"==typeof(i=i.stateNode).shouldComponentUpdate?i.shouldComponentUpdate(o,_,x):!a.prototype||!a.prototype.isPureReactComponent||(!Ie(s,o)||!Ie(u,_))}function Gi(i,a,s){var o=!1,u=dr,_=a.contextType;return"object"==typeof _&&null!==_?_=eh(_):(u=Zf(a)?mr:hr.current,_=(o=null!=(o=a.contextTypes))?Yf(i,u):dr),a=new a(s,_),i.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=ca,i.stateNode=a,a._reactInternals=i,o&&((i=i.stateNode).__reactInternalMemoizedUnmaskedChildContext=u,i.__reactInternalMemoizedMaskedChildContext=_),a}function Hi(i,a,s,o){i=a.state,"function"==typeof a.componentWillReceiveProps&&a.componentWillReceiveProps(s,o),"function"==typeof a.UNSAFE_componentWillReceiveProps&&a.UNSAFE_componentWillReceiveProps(s,o),a.state!==i&&ca.enqueueReplaceState(a,a.state,null)}function Ii(i,a,s,o){var u=i.stateNode;u.props=s,u.state=i.memoizedState,u.refs={},kh(i);var _=a.contextType;"object"==typeof _&&null!==_?u.context=eh(_):(_=Zf(a)?mr:hr.current,u.context=Yf(i,_)),u.state=i.memoizedState,"function"==typeof(_=a.getDerivedStateFromProps)&&(Di(i,a,_,s),u.state=i.memoizedState),"function"==typeof a.getDerivedStateFromProps||"function"==typeof u.getSnapshotBeforeUpdate||"function"!=typeof u.UNSAFE_componentWillMount&&"function"!=typeof u.componentWillMount||(a=u.state,"function"==typeof u.componentWillMount&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&u.UNSAFE_componentWillMount(),a!==u.state&&ca.enqueueReplaceState(u,u.state,null),qh(i,s,u,o),u.state=i.memoizedState),"function"==typeof u.componentDidMount&&(i.flags|=4194308)}function Ji(i,a){try{var s="",o=a;do{s+=Pa(o),o=o.return}while(o);var u=s}catch(_){u="\nError generating stack: "+_.message+"\n"+_.stack}return{value:i,source:a,stack:u,digest:null}}function Ki(i,a,s){return{value:i,source:null,stack:null!=s?s:null,digest:null!=a?a:null}}function Li(i,a){try{console.error(a.value)}catch(s){setTimeout(function(){throw s})}}__name(Fi,"Fi"),__name(Gi,"Gi"),__name(Hi,"Hi"),__name(Ii,"Ii"),__name(Ji,"Ji"),__name(Ki,"Ki"),__name(Li,"Li");var ua="function"==typeof WeakMap?WeakMap:Map;function Ni(i,a,s){(s=mh(-1,s)).tag=3,s.payload={element:null};var o=a.value;return s.callback=function(){ds||(ds=!0,hs=o),Li(0,a)},s}function Qi(i,a,s){(s=mh(-1,s)).tag=3;var o=i.type.getDerivedStateFromError;if("function"==typeof o){var u=a.value;s.payload=function(){return o(u)},s.callback=function(){Li(0,a)}}var _=i.stateNode;return null!==_&&"function"==typeof _.componentDidCatch&&(s.callback=function(){Li(0,a),"function"!=typeof o&&(null===ps?ps=/* @__PURE__ */new Set([this]):ps.add(this));var i=a.stack;this.componentDidCatch(a.value,{componentStack:null!==i?i:""})}),s}function Si(i,a,s){var o=i.pingCache;if(null===o){o=i.pingCache=new ua;var u=/* @__PURE__ */new Set;o.set(a,u)}else void 0===(u=o.get(a))&&(u=/* @__PURE__ */new Set,o.set(a,u));u.has(s)||(u.add(s),i=Ti.bind(null,i,a,s),a.then(i,i))}function Ui(i){do{var a;if((a=13===i.tag)&&(a=null===(a=i.memoizedState)||null!==a.dehydrated),a)return i;i=i.return}while(null!==i);return null}function Vi(i,a,s,o,u){return 1&i.mode?(i.flags|=65536,i.lanes=u,i):(i===a?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((a=mh(-1,1)).tag=2,nh(s,a,1))),s.lanes|=1),i)}__name(Ni,"Ni"),__name(Qi,"Qi"),__name(Si,"Si"),__name(Ui,"Ui"),__name(Vi,"Vi");var da=U.ReactCurrentOwner,ma=!1;function Xi(i,a,s,o){a.child=null===i?Dr(a,null,s,o):Lr(a,i.child,s,o)}function Yi(i,a,s,o,u){s=s.render;var _=a.ref;return ch(a,u),o=Nh(i,a,s,o,_,u),s=Sh(),null===i||ma?(kr&&s&&vg(a),a.flags|=1,Xi(i,a,o,u),a.child):(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~u,Zi(i,a,u))}function $i(i,a,s,o,u){if(null===i){var _=s.type;return"function"!=typeof _||aj(_)||void 0!==_.defaultProps||null!==s.compare||void 0!==s.defaultProps?((i=Rg(s.type,null,o,a,a.mode,u)).ref=a.ref,i.return=a,a.child=i):(a.tag=15,a.type=_,bj(i,a,_,o,u))}if(_=i.child,0===(i.lanes&u)){var x=_.memoizedProps;if((s=null!==(s=s.compare)?s:Ie)(x,o)&&i.ref===a.ref)return Zi(i,a,u)}return a.flags|=1,(i=Pg(_,o)).ref=a.ref,i.return=a,a.child=i}function bj(i,a,s,o,u){if(null!==i){var _=i.memoizedProps;if(Ie(_,o)&&i.ref===a.ref){if(ma=!1,a.pendingProps=o=_,0===(i.lanes&u))return a.lanes=i.lanes,Zi(i,a,u);131072&i.flags&&(ma=!0)}}return cj(i,a,s,o,u)}function dj(i,a,s){var o=a.pendingProps,u=o.children,_=null!==i?i.memoizedState:null;if("hidden"===o.mode)if(1&a.mode){if(!(1073741824&s))return i=null!==_?_.baseLanes|s:s,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,G(Ja,Ga),Ga|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=null!==_?_.baseLanes:s,G(Ja,Ga),Ga|=o}else a.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(Ja,Ga),Ga|=s;else null!==_?(o=_.baseLanes|s,a.memoizedState=null):o=s,G(Ja,Ga),Ga|=o;return Xi(i,a,u,s),a.child}function gj(i,a){var s=a.ref;(null===i&&null!==s||null!==i&&i.ref!==s)&&(a.flags|=512,a.flags|=2097152)}function cj(i,a,s,o,u){var _=Zf(s)?mr:hr.current;return _=Yf(a,_),ch(a,u),s=Nh(i,a,s,o,_,u),o=Sh(),null===i||ma?(kr&&o&&vg(a),a.flags|=1,Xi(i,a,s,u),a.child):(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~u,Zi(i,a,u))}function hj(i,a,s,o,u){if(Zf(s)){var _=!0;cg(a)}else _=!1;if(ch(a,u),null===a.stateNode)ij(i,a),Gi(a,s,o),Ii(a,s,o,u),o=!0;else if(null===i){var x=a.stateNode,w=a.memoizedProps;x.props=w;var C=x.context,L=s.contextType;"object"==typeof L&&null!==L?L=eh(L):L=Yf(a,L=Zf(s)?mr:hr.current);var B=s.getDerivedStateFromProps,U="function"==typeof B||"function"==typeof x.getSnapshotBeforeUpdate;U||"function"!=typeof x.UNSAFE_componentWillReceiveProps&&"function"!=typeof x.componentWillReceiveProps||(w!==o||C!==L)&&Hi(a,x,o,L),Ur=!1;var j=a.memoizedState;x.state=j,qh(a,o,x,u),C=a.memoizedState,w!==o||j!==C||pr.current||Ur?("function"==typeof B&&(Di(a,s,B,o),C=a.memoizedState),(w=Ur||Fi(a,s,w,o,j,C,L))?(U||"function"!=typeof x.UNSAFE_componentWillMount&&"function"!=typeof x.componentWillMount||("function"==typeof x.componentWillMount&&x.componentWillMount(),"function"==typeof x.UNSAFE_componentWillMount&&x.UNSAFE_componentWillMount()),"function"==typeof x.componentDidMount&&(a.flags|=4194308)):("function"==typeof x.componentDidMount&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=C),x.props=o,x.state=C,x.context=L,o=w):("function"==typeof x.componentDidMount&&(a.flags|=4194308),o=!1)}else{x=a.stateNode,lh(i,a),w=a.memoizedProps,L=a.type===a.elementType?w:Ci(a.type,w),x.props=L,U=a.pendingProps,j=x.context,"object"==typeof(C=s.contextType)&&null!==C?C=eh(C):C=Yf(a,C=Zf(s)?mr:hr.current);var V=s.getDerivedStateFromProps;(B="function"==typeof V||"function"==typeof x.getSnapshotBeforeUpdate)||"function"!=typeof x.UNSAFE_componentWillReceiveProps&&"function"!=typeof x.componentWillReceiveProps||(w!==U||j!==C)&&Hi(a,x,o,C),Ur=!1,j=a.memoizedState,x.state=j,qh(a,o,x,u);var z=a.memoizedState;w!==U||j!==z||pr.current||Ur?("function"==typeof V&&(Di(a,s,V,o),z=a.memoizedState),(L=Ur||Fi(a,s,L,o,j,z,C)||!1)?(B||"function"!=typeof x.UNSAFE_componentWillUpdate&&"function"!=typeof x.componentWillUpdate||("function"==typeof x.componentWillUpdate&&x.componentWillUpdate(o,z,C),"function"==typeof x.UNSAFE_componentWillUpdate&&x.UNSAFE_componentWillUpdate(o,z,C)),"function"==typeof x.componentDidUpdate&&(a.flags|=4),"function"==typeof x.getSnapshotBeforeUpdate&&(a.flags|=1024)):("function"!=typeof x.componentDidUpdate||w===i.memoizedProps&&j===i.memoizedState||(a.flags|=4),"function"!=typeof x.getSnapshotBeforeUpdate||w===i.memoizedProps&&j===i.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=z),x.props=o,x.state=z,x.context=C,o=L):("function"!=typeof x.componentDidUpdate||w===i.memoizedProps&&j===i.memoizedState||(a.flags|=4),"function"!=typeof x.getSnapshotBeforeUpdate||w===i.memoizedProps&&j===i.memoizedState||(a.flags|=1024),o=!1)}return jj(i,a,s,o,_,u)}function jj(i,a,s,o,u,_){gj(i,a);var x=!!(128&a.flags);if(!o&&!x)return u&&dg(a,s,!1),Zi(i,a,_);o=a.stateNode,da.current=a;var w=x&&"function"!=typeof s.getDerivedStateFromError?null:o.render();return a.flags|=1,null!==i&&x?(a.child=Lr(a,i.child,null,_),a.child=Lr(a,null,w,_)):Xi(i,a,w,_),a.memoizedState=o.state,u&&dg(a,s,!0),a.child}function kj(i){var a=i.stateNode;a.pendingContext?ag(0,a.pendingContext,a.pendingContext!==a.context):a.context&&ag(0,a.context,!1),yh(i,a.containerInfo)}function lj(i,a,s,o,u){return Ig(),Jg(u),a.flags|=256,Xi(i,a,s,o),a.child}__name(Xi,"Xi"),__name(Yi,"Yi"),__name($i,"$i"),__name(bj,"bj"),__name(dj,"dj"),__name(gj,"gj"),__name(cj,"cj"),__name(hj,"hj"),__name(jj,"jj"),__name(kj,"kj"),__name(lj,"lj");var ga,_a,ya,va,ba={dehydrated:null,treeContext:null,retryLane:0};function nj(i){return{baseLanes:i,cachePool:null,transitions:null}}function oj(i,a,s){var o,u=a.pendingProps,_=$r.current,x=!1,w=!!(128&a.flags);if((o=w)||(o=(null===i||null!==i.memoizedState)&&!!(2&_)),o?(x=!0,a.flags&=-129):null!==i&&null===i.memoizedState||(_|=1),G($r,1&_),null===i)return Eg(a),null!==(i=a.memoizedState)&&null!==(i=i.dehydrated)?(1&a.mode?"$!"===i.data?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(w=u.children,i=u.fallback,x?(u=a.mode,x=a.child,w={mode:"hidden",children:w},1&u||null===x?x=pj(w,u,0,null):(x.childLanes=0,x.pendingProps=w),i=Tg(i,u,s,null),x.return=a,i.return=a,x.sibling=i,a.child=x,a.child.memoizedState=nj(s),a.memoizedState=ba,i):qj(a,w));if(null!==(_=i.memoizedState)&&null!==(o=_.dehydrated))return rj(i,a,w,u,o,_,s);if(x){x=u.fallback,w=a.mode,o=(_=i.child).sibling;var C={mode:"hidden",children:u.children};return 1&w||a.child===_?(u=Pg(_,C)).subtreeFlags=14680064&_.subtreeFlags:((u=a.child).childLanes=0,u.pendingProps=C,a.deletions=null),null!==o?x=Pg(o,x):(x=Tg(x,w,s,null)).flags|=2,x.return=a,u.return=a,u.sibling=x,a.child=u,u=x,x=a.child,w=null===(w=i.child.memoizedState)?nj(s):{baseLanes:w.baseLanes|s,cachePool:null,transitions:w.transitions},x.memoizedState=w,x.childLanes=i.childLanes&~s,a.memoizedState=ba,u}return i=(x=i.child).sibling,u=Pg(x,{mode:"visible",children:u.children}),!(1&a.mode)&&(u.lanes=s),u.return=a,u.sibling=null,null!==i&&(null===(s=a.deletions)?(a.deletions=[i],a.flags|=16):s.push(i)),a.child=u,a.memoizedState=null,u}function qj(i,a){return(a=pj({mode:"visible",children:a},i.mode,0,null)).return=i,i.child=a}function sj(i,a,s,o){return null!==o&&Jg(o),Lr(a,i.child,null,s),(i=qj(a,a.pendingProps.children)).flags|=2,a.memoizedState=null,i}function rj(i,a,s,o,u,_,x){if(s)return 256&a.flags?(a.flags&=-257,sj(i,a,x,o=Ki(Error(p(422))))):null!==a.memoizedState?(a.child=i.child,a.flags|=128,null):(_=o.fallback,u=a.mode,o=pj({mode:"visible",children:o.children},u,0,null),(_=Tg(_,u,x,null)).flags|=2,o.return=a,_.return=a,o.sibling=_,a.child=o,1&a.mode&&Lr(a,i.child,null,x),a.child.memoizedState=nj(x),a.memoizedState=ba,_);if(!(1&a.mode))return sj(i,a,x,null);if("$!"===u.data){if(o=u.nextSibling&&u.nextSibling.dataset)var w=o.dgst;return o=w,sj(i,a,x,o=Ki(_=Error(p(419)),o,void 0))}if(w=0!==(x&i.childLanes),ma||w){if(null!==(o=za)){switch(x&-x){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(u=0!==(u&(o.suspendedLanes|x))?0:u)&&u!==_.retryLane&&(_.retryLane=u,ih(i,u),gi(o,i,u,-1))}return tj(),sj(i,a,x,o=Ki(Error(p(421))))}return"$?"===u.data?(a.flags|=128,a.child=i.child,a=uj.bind(null,i),u._reactRetry=a,null):(i=_.treeContext,Mr=Lf(u.nextSibling),Er=a,kr=!0,Pr=null,null!==i&&(Sr[xr++]=Ar,Sr[xr++]=Cr,Sr[xr++]=wr,Ar=i.id,Cr=i.overflow,wr=a),(a=qj(a,o.children)).flags|=4096,a)}function vj(i,a,s){i.lanes|=a;var o=i.alternate;null!==o&&(o.lanes|=a),bh(i.return,a,s)}function wj(i,a,s,o,u){var _=i.memoizedState;null===_?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:u}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=s,_.tailMode=u)}function xj(i,a,s){var o=a.pendingProps,u=o.revealOrder,_=o.tail;if(Xi(i,a,o.children,s),2&(o=$r.current))o=1&o|2,a.flags|=128;else{if(null!==i&&128&i.flags)e:for(i=a.child;null!==i;){if(13===i.tag)null!==i.memoizedState&&vj(i,s,a);else if(19===i.tag)vj(i,s,a);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;null===i.sibling;){if(null===i.return||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}o&=1}if(G($r,o),1&a.mode)switch(u){case"forwards":for(s=a.child,u=null;null!==s;)null!==(i=s.alternate)&&null===Ch(i)&&(u=s),s=s.sibling;null===(s=u)?(u=a.child,a.child=null):(u=s.sibling,s.sibling=null),wj(a,!1,u,s,_);break;case"backwards":for(s=null,u=a.child,a.child=null;null!==u;){if(null!==(i=u.alternate)&&null===Ch(i)){a.child=u;break}i=u.sibling,u.sibling=s,s=u,u=i}wj(a,!0,s,null,_);break;case"together":wj(a,!1,null,null,void 0);break;default:a.memoizedState=null}else a.memoizedState=null;return a.child}function ij(i,a){!(1&a.mode)&&null!==i&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Zi(i,a,s){if(null!==i&&(a.dependencies=i.dependencies),is|=a.lanes,0===(s&a.childLanes))return null;if(null!==i&&a.child!==i.child)throw Error(p(153));if(null!==a.child){for(s=Pg(i=a.child,i.pendingProps),a.child=s,s.return=a;null!==i.sibling;)i=i.sibling,(s=s.sibling=Pg(i,i.pendingProps)).return=a;s.sibling=null}return a.child}function yj(i,a,s){switch(a.tag){case 3:kj(a),Ig();break;case 5:Ah(a);break;case 1:Zf(a.type)&&cg(a);break;case 4:yh(a,a.stateNode.containerInfo);break;case 10:var o=a.type._context,u=a.memoizedProps.value;G(Rr,o._currentValue),o._currentValue=u;break;case 13:if(null!==(o=a.memoizedState))return null!==o.dehydrated?(G($r,1&$r.current),a.flags|=128,null):0!==(s&a.child.childLanes)?oj(i,a,s):(G($r,1&$r.current),null!==(i=Zi(i,a,s))?i.sibling:null);G($r,1&$r.current);break;case 19:if(o=0!==(s&a.childLanes),128&i.flags){if(o)return xj(i,a,s);a.flags|=128}if(null!==(u=a.memoizedState)&&(u.rendering=null,u.tail=null,u.lastEffect=null),G($r,$r.current),o)break;return null;case 22:case 23:return a.lanes=0,dj(i,a,s)}return Zi(i,a,s)}function Dj(i,a){if(!kr)switch(i.tailMode){case"hidden":a=i.tail;for(var s=null;null!==a;)null!==a.alternate&&(s=a),a=a.sibling;null===s?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var o=null;null!==s;)null!==s.alternate&&(o=s),s=s.sibling;null===o?a||null===i.tail?i.tail=null:i.tail.sibling=null:o.sibling=null}}function S(i){var a=null!==i.alternate&&i.alternate.child===i.child,s=0,o=0;if(a)for(var u=i.child;null!==u;)s|=u.lanes|u.childLanes,o|=14680064&u.subtreeFlags,o|=14680064&u.flags,u.return=i,u=u.sibling;else for(u=i.child;null!==u;)s|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=i,u=u.sibling;return i.subtreeFlags|=o,i.childLanes=s,a}function Ej(i,a,s){var u=a.pendingProps;switch(wg(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(a),null;case 1:case 17:return Zf(a.type)&&$f(),S(a),null;case 3:return u=a.stateNode,zh(),E(pr),E(hr),Eh(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),null!==i&&null!==i.child||(Gg(a)?a.flags|=4:null===i||i.memoizedState.isDehydrated&&!(256&a.flags)||(a.flags|=1024,null!==Pr&&(Fj(Pr),Pr=null))),_a(i,a),S(a),null;case 5:Bh(a);var _=xh(Hr.current);if(s=a.type,null!==i&&null!=a.stateNode)ya(i,a,s,u,_),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!u){if(null===a.stateNode)throw Error(p(166));return S(a),null}if(i=xh(Vr.current),Gg(a)){u=a.stateNode,s=a.type;var x=a.memoizedProps;switch(u[nr]=a,u[rr]=x,i=!!(1&a.mode),s){case"dialog":D("cancel",u),D("close",u);break;case"iframe":case"object":case"embed":D("load",u);break;case"video":case"audio":for(_=0;_<Yn.length;_++)D(Yn[_],u);break;case"source":D("error",u);break;case"img":case"image":case"link":D("error",u),D("load",u);break;case"details":D("toggle",u);break;case"input":Za(u,x),D("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!x.multiple},D("invalid",u);break;case"textarea":hb(u,x),D("invalid",u)}for(var w in ub(s,x),_=null,x)if(x.hasOwnProperty(w)){var C=x[w];"children"===w?"string"==typeof C?u.textContent!==C&&(!0!==x.suppressHydrationWarning&&Af(u.textContent,C,i),_=["children",C]):"number"==typeof C&&u.textContent!==""+C&&(!0!==x.suppressHydrationWarning&&Af(u.textContent,C,i),_=["children",""+C]):o.hasOwnProperty(w)&&null!=C&&"onScroll"===w&&D("scroll",u)}switch(s){case"input":Va(u),db(u,x,!0);break;case"textarea":Va(u),jb(u);break;case"select":case"option":break;default:"function"==typeof x.onClick&&(u.onclick=Bf)}u=_,a.updateQueue=u,null!==u&&(a.flags|=4)}else{w=9===_.nodeType?_:_.ownerDocument,"http://www.w3.org/1999/xhtml"===i&&(i=kb(s)),"http://www.w3.org/1999/xhtml"===i?"script"===s?((i=w.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):"string"==typeof u.is?i=w.createElement(s,{is:u.is}):(i=w.createElement(s),"select"===s&&(w=i,u.multiple?w.multiple=!0:u.size&&(w.size=u.size))):i=w.createElementNS(i,s),i[nr]=a,i[rr]=u,ga(i,a,!1,!1),a.stateNode=i;e:{switch(w=vb(s,u),s){case"dialog":D("cancel",i),D("close",i),_=u;break;case"iframe":case"object":case"embed":D("load",i),_=u;break;case"video":case"audio":for(_=0;_<Yn.length;_++)D(Yn[_],i);_=u;break;case"source":D("error",i),_=u;break;case"img":case"image":case"link":D("error",i),D("load",i),_=u;break;case"details":D("toggle",i),_=u;break;case"input":Za(i,u),_=Ya(i,u),D("invalid",i);break;case"option":default:_=u;break;case"select":i._wrapperState={wasMultiple:!!u.multiple},_=ye({},u,{value:void 0}),D("invalid",i);break;case"textarea":hb(i,u),_=gb(i,u),D("invalid",i)}for(x in ub(s,_),C=_)if(C.hasOwnProperty(x)){var L=C[x];"style"===x?sb(i,L):"dangerouslySetInnerHTML"===x?null!=(L=L?L.__html:void 0)&&we(i,L):"children"===x?"string"==typeof L?("textarea"!==s||""!==L)&&ob(i,L):"number"==typeof L&&ob(i,""+L):"suppressContentEditableWarning"!==x&&"suppressHydrationWarning"!==x&&"autoFocus"!==x&&(o.hasOwnProperty(x)?null!=L&&"onScroll"===x&&D("scroll",i):null!=L&&ta(i,x,L,w))}switch(s){case"input":Va(i),db(i,u,!1);break;case"textarea":Va(i),jb(i);break;case"option":null!=u.value&&i.setAttribute("value",""+Sa(u.value));break;case"select":i.multiple=!!u.multiple,null!=(x=u.value)?fb(i,!!u.multiple,x,!1):null!=u.defaultValue&&fb(i,!!u.multiple,u.defaultValue,!0);break;default:"function"==typeof _.onClick&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(a.flags|=4)}null!==a.ref&&(a.flags|=512,a.flags|=2097152)}return S(a),null;case 6:if(i&&null!=a.stateNode)va(i,a,i.memoizedProps,u);else{if("string"!=typeof u&&null===a.stateNode)throw Error(p(166));if(s=xh(Hr.current),xh(Vr.current),Gg(a)){if(u=a.stateNode,s=a.memoizedProps,u[nr]=a,(x=u.nodeValue!==s)&&null!==(i=Er))switch(i.tag){case 3:Af(u.nodeValue,s,!!(1&i.mode));break;case 5:!0!==i.memoizedProps.suppressHydrationWarning&&Af(u.nodeValue,s,!!(1&i.mode))}x&&(a.flags|=4)}else(u=(9===s.nodeType?s:s.ownerDocument).createTextNode(u))[nr]=a,a.stateNode=u}return S(a),null;case 13:if(E($r),u=a.memoizedState,null===i||null!==i.memoizedState&&null!==i.memoizedState.dehydrated){if(kr&&null!==Mr&&1&a.mode&&!(128&a.flags))Hg(),Ig(),a.flags|=98560,x=!1;else if(x=Gg(a),null!==u&&null!==u.dehydrated){if(null===i){if(!x)throw Error(p(318));if(!(x=null!==(x=a.memoizedState)?x.dehydrated:null))throw Error(p(317));x[nr]=a}else Ig(),!(128&a.flags)&&(a.memoizedState=null),a.flags|=4;S(a),x=!1}else null!==Pr&&(Fj(Pr),Pr=null),x=!0;if(!x)return 65536&a.flags?a:null}return 128&a.flags?(a.lanes=s,a):((u=null!==u)!==(null!==i&&null!==i.memoizedState)&&u&&(a.child.flags|=8192,1&a.mode&&(null===i||1&$r.current?0===es&&(es=3):tj())),null!==a.updateQueue&&(a.flags|=4),S(a),null);case 4:return zh(),_a(i,a),null===i&&sf(a.stateNode.containerInfo),S(a),null;case 10:return ah(a.type._context),S(a),null;case 19:if(E($r),null===(x=a.memoizedState))return S(a),null;if(u=!!(128&a.flags),null===(w=x.rendering))if(u)Dj(x,!1);else{if(0!==es||null!==i&&128&i.flags)for(i=a.child;null!==i;){if(null!==(w=Ch(i))){for(a.flags|=128,Dj(x,!1),null!==(u=w.updateQueue)&&(a.updateQueue=u,a.flags|=4),a.subtreeFlags=0,u=s,s=a.child;null!==s;)i=u,(x=s).flags&=14680066,null===(w=x.alternate)?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=w.childLanes,x.lanes=w.lanes,x.child=w.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=w.memoizedProps,x.memoizedState=w.memoizedState,x.updateQueue=w.updateQueue,x.type=w.type,i=w.dependencies,x.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G($r,1&$r.current|2),a.child}i=i.sibling}null!==x.tail&&ct()>cs&&(a.flags|=128,u=!0,Dj(x,!1),a.lanes=4194304)}else{if(!u)if(null!==(i=Ch(w))){if(a.flags|=128,u=!0,null!==(s=i.updateQueue)&&(a.updateQueue=s,a.flags|=4),Dj(x,!0),null===x.tail&&"hidden"===x.tailMode&&!w.alternate&&!kr)return S(a),null}else 2*ct()-x.renderingStartTime>cs&&1073741824!==s&&(a.flags|=128,u=!0,Dj(x,!1),a.lanes=4194304);x.isBackwards?(w.sibling=a.child,a.child=w):(null!==(s=x.last)?s.sibling=w:a.child=w,x.last=w)}return null!==x.tail?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=ct(),a.sibling=null,s=$r.current,G($r,u?1&s|2:1&s),a):(S(a),null);case 22:case 23:return Hj(),u=null!==a.memoizedState,null!==i&&null!==i.memoizedState!==u&&(a.flags|=8192),u&&1&a.mode?!!(1073741824&Ga)&&(S(a),6&a.subtreeFlags&&(a.flags|=8192)):S(a),null;case 24:case 25:return null}throw Error(p(156,a.tag))}function Ij(i,a){switch(wg(a),a.tag){case 1:return Zf(a.type)&&$f(),65536&(i=a.flags)?(a.flags=-65537&i|128,a):null;case 3:return zh(),E(pr),E(hr),Eh(),65536&(i=a.flags)&&!(128&i)?(a.flags=-65537&i|128,a):null;case 5:return Bh(a),null;case 13:if(E($r),null!==(i=a.memoizedState)&&null!==i.dehydrated){if(null===a.alternate)throw Error(p(340));Ig()}return 65536&(i=a.flags)?(a.flags=-65537&i|128,a):null;case 19:return E($r),null;case 4:return zh(),null;case 10:return ah(a.type._context),null;case 22:case 23:return Hj(),null;default:return null}}__name(nj,"nj"),__name(oj,"oj"),__name(qj,"qj"),__name(sj,"sj"),__name(rj,"rj"),__name(vj,"vj"),__name(wj,"wj"),__name(xj,"xj"),__name(ij,"ij"),__name(Zi,"Zi"),__name(yj,"yj"),ga=/* @__PURE__ */__name(function(i,a){for(var s=a.child;null!==s;){if(5===s.tag||6===s.tag)i.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},"zj"),_a=/* @__PURE__ */__name(function(){},"Aj"),ya=/* @__PURE__ */__name(function(i,a,s,u){var _=i.memoizedProps;if(_!==u){i=a.stateNode,xh(Vr.current);var x,w=null;switch(s){case"input":_=Ya(i,_),u=Ya(i,u),w=[];break;case"select":_=ye({},_,{value:void 0}),u=ye({},u,{value:void 0}),w=[];break;case"textarea":_=gb(i,_),u=gb(i,u),w=[];break;default:"function"!=typeof _.onClick&&"function"==typeof u.onClick&&(i.onclick=Bf)}for(B in ub(s,u),s=null,_)if(!u.hasOwnProperty(B)&&_.hasOwnProperty(B)&&null!=_[B])if("style"===B){var C=_[B];for(x in C)C.hasOwnProperty(x)&&(s||(s={}),s[x]="")}else"dangerouslySetInnerHTML"!==B&&"children"!==B&&"suppressContentEditableWarning"!==B&&"suppressHydrationWarning"!==B&&"autoFocus"!==B&&(o.hasOwnProperty(B)?w||(w=[]):(w=w||[]).push(B,null));for(B in u){var L=u[B];if(C=null!=_?_[B]:void 0,u.hasOwnProperty(B)&&L!==C&&(null!=L||null!=C))if("style"===B)if(C){for(x in C)!C.hasOwnProperty(x)||L&&L.hasOwnProperty(x)||(s||(s={}),s[x]="");for(x in L)L.hasOwnProperty(x)&&C[x]!==L[x]&&(s||(s={}),s[x]=L[x])}else s||(w||(w=[]),w.push(B,s)),s=L;else"dangerouslySetInnerHTML"===B?(L=L?L.__html:void 0,C=C?C.__html:void 0,null!=L&&C!==L&&(w=w||[]).push(B,L)):"children"===B?"string"!=typeof L&&"number"!=typeof L||(w=w||[]).push(B,""+L):"suppressContentEditableWarning"!==B&&"suppressHydrationWarning"!==B&&(o.hasOwnProperty(B)?(null!=L&&"onScroll"===B&&D("scroll",i),w||C===L||(w=[])):(w=w||[]).push(B,L))}s&&(w=w||[]).push("style",s);var B=w;(a.updateQueue=B)&&(a.flags|=4)}},"Bj"),va=/* @__PURE__ */__name(function(i,a,s,o){s!==o&&(a.flags|=4)},"Cj"),__name(Dj,"Dj"),__name(S,"S"),__name(Ej,"Ej"),__name(Ij,"Ij");var xa=!1,wa=!1,Aa="function"==typeof WeakSet?WeakSet:Set,Ca=null;function Lj(i,a){var s=i.ref;if(null!==s)if("function"==typeof s)try{s(null)}catch(o){W(i,a,o)}else s.current=null}function Mj(i,a,s){try{s()}catch(o){W(i,a,o)}}__name(Lj,"Lj"),__name(Mj,"Mj");var Ea=!1;function Oj(i,a){if(Mi=Ut,Ne(i=Me())){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{var o=(s=(s=i.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(o&&0!==o.rangeCount){s=o.anchorNode;var u=o.anchorOffset,_=o.focusNode;o=o.focusOffset;try{s.nodeType,_.nodeType}catch(ae){s=null;break e}var x=0,w=-1,C=-1,L=0,B=0,U=i,j=null;t:for(;;){for(var V;U!==s||0!==u&&3!==U.nodeType||(w=x+u),U!==_||0!==o&&3!==U.nodeType||(C=x+o),3===U.nodeType&&(x+=U.nodeValue.length),null!==(V=U.firstChild);)j=U,U=V;for(;;){if(U===i)break t;if(j===s&&++L===u&&(w=x),j===_&&++B===o&&(C=x),null!==(V=U.nextSibling))break;j=(U=j).parentNode}U=V}s=-1===w||-1===C?null:{start:w,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(Pi={focusedElem:i,selectionRange:s},Ut=!1,Ca=a;null!==Ca;)if(i=(a=Ca).child,1028&a.subtreeFlags&&null!==i)i.return=a,Ca=i;else for(;null!==Ca;){a=Ca;try{var z=a.alternate;if(1024&a.flags)switch(a.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==z){var $=z.memoizedProps,Y=z.memoizedState,Z=a.stateNode,ee=Z.getSnapshotBeforeUpdate(a.elementType===a.type?$:Ci(a.type,$),Y);Z.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ie=a.stateNode.containerInfo;1===ie.nodeType?ie.textContent="":9===ie.nodeType&&ie.documentElement&&ie.removeChild(ie.documentElement);break;default:throw Error(p(163))}}catch(ae){W(a,a.return,ae)}if(null!==(i=a.sibling)){i.return=a.return,Ca=i;break}Ca=a.return}return z=Ea,Ea=!1,z}function Pj(i,a,s){var o=a.updateQueue;if(null!==(o=null!==o?o.lastEffect:null)){var u=o=o.next;do{if((u.tag&i)===i){var _=u.destroy;u.destroy=void 0,void 0!==_&&Mj(a,s,_)}u=u.next}while(u!==o)}}function Qj(i,a){if(null!==(a=null!==(a=a.updateQueue)?a.lastEffect:null)){var s=a=a.next;do{if((s.tag&i)===i){var o=s.create;s.destroy=o()}s=s.next}while(s!==a)}}function Rj(i){var a=i.ref;if(null!==a){var s=i.stateNode;i.tag,i=s,"function"==typeof a?a(i):a.current=i}}function Sj(i){var a=i.alternate;null!==a&&(i.alternate=null,Sj(a)),i.child=null,i.deletions=null,i.sibling=null,5===i.tag&&(null!==(a=i.stateNode)&&(delete a[nr],delete a[rr],delete a[sr],delete a[or],delete a[lr])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Tj(i){return 5===i.tag||3===i.tag||4===i.tag}function Uj(i){e:for(;;){for(;null===i.sibling;){if(null===i.return||Tj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.flags)continue e;if(null===i.child||4===i.tag)continue e;i.child.return=i,i=i.child}if(!(2&i.flags))return i.stateNode}}function Vj(i,a,s){var o=i.tag;if(5===o||6===o)i=i.stateNode,a?8===s.nodeType?s.parentNode.insertBefore(i,a):s.insertBefore(i,a):(8===s.nodeType?(a=s.parentNode).insertBefore(i,s):(a=s).appendChild(i),null!=(s=s._reactRootContainer)||null!==a.onclick||(a.onclick=Bf));else if(4!==o&&null!==(i=i.child))for(Vj(i,a,s),i=i.sibling;null!==i;)Vj(i,a,s),i=i.sibling}function Wj(i,a,s){var o=i.tag;if(5===o||6===o)i=i.stateNode,a?s.insertBefore(i,a):s.appendChild(i);else if(4!==o&&null!==(i=i.child))for(Wj(i,a,s),i=i.sibling;null!==i;)Wj(i,a,s),i=i.sibling}__name(Oj,"Oj"),__name(Pj,"Pj"),__name(Qj,"Qj"),__name(Rj,"Rj"),__name(Sj,"Sj"),__name(Tj,"Tj"),__name(Uj,"Uj"),__name(Vj,"Vj"),__name(Wj,"Wj");var ka=null,Ia=!1;function Yj(i,a,s){for(s=s.child;null!==s;)Zj(i,a,s),s=s.sibling}function Zj(i,a,s){if(_t&&"function"==typeof _t.onCommitFiberUnmount)try{_t.onCommitFiberUnmount(gt,s)}catch(w){}switch(s.tag){case 5:wa||Lj(s,a);case 6:var o=ka,u=Ia;ka=null,Yj(i,a,s),Ia=u,null!==(ka=o)&&(Ia?(i=ka,s=s.stateNode,8===i.nodeType?i.parentNode.removeChild(s):i.removeChild(s)):ka.removeChild(s.stateNode));break;case 18:null!==ka&&(Ia?(i=ka,s=s.stateNode,8===i.nodeType?Kf(i.parentNode,s):1===i.nodeType&&Kf(i,s),bd(i)):Kf(ka,s.stateNode));break;case 4:o=ka,u=Ia,ka=s.stateNode.containerInfo,Ia=!0,Yj(i,a,s),ka=o,Ia=u;break;case 0:case 11:case 14:case 15:if(!wa&&(null!==(o=s.updateQueue)&&null!==(o=o.lastEffect))){u=o=o.next;do{var _=u,x=_.destroy;_=_.tag,void 0!==x&&(2&_||4&_)&&Mj(s,a,x),u=u.next}while(u!==o)}Yj(i,a,s);break;case 1:if(!wa&&(Lj(s,a),"function"==typeof(o=s.stateNode).componentWillUnmount))try{o.props=s.memoizedProps,o.state=s.memoizedState,o.componentWillUnmount()}catch(w){W(s,a,w)}Yj(i,a,s);break;case 21:Yj(i,a,s);break;case 22:1&s.mode?(wa=(o=wa)||null!==s.memoizedState,Yj(i,a,s),wa=o):Yj(i,a,s);break;default:Yj(i,a,s)}}function ak(i){var a=i.updateQueue;if(null!==a){i.updateQueue=null;var s=i.stateNode;null===s&&(s=i.stateNode=new Aa),a.forEach(function(a){var o=bk.bind(null,i,a);s.has(a)||(s.add(a),a.then(o,o))})}}function ck(i,a){var s=a.deletions;if(null!==s)for(var o=0;o<s.length;o++){var u=s[o];try{var _=i,x=a,w=x;e:for(;null!==w;){switch(w.tag){case 5:ka=w.stateNode,Ia=!1;break e;case 3:case 4:ka=w.stateNode.containerInfo,Ia=!0;break e}w=w.return}if(null===ka)throw Error(p(160));Zj(_,x,u),ka=null,Ia=!1;var C=u.alternate;null!==C&&(C.return=null),u.return=null}catch(L){W(u,a,L)}}if(12854&a.subtreeFlags)for(a=a.child;null!==a;)dk(a,i),a=a.sibling}function dk(i,a){var s=i.alternate,o=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ck(a,i),ek(i),4&o){try{Pj(3,i,i.return),Qj(3,i)}catch($){W(i,i.return,$)}try{Pj(5,i,i.return)}catch($){W(i,i.return,$)}}break;case 1:ck(a,i),ek(i),512&o&&null!==s&&Lj(s,s.return);break;case 5:if(ck(a,i),ek(i),512&o&&null!==s&&Lj(s,s.return),32&i.flags){var u=i.stateNode;try{ob(u,"")}catch($){W(i,i.return,$)}}if(4&o&&null!=(u=i.stateNode)){var _=i.memoizedProps,x=null!==s?s.memoizedProps:_,w=i.type,C=i.updateQueue;if(i.updateQueue=null,null!==C)try{"input"===w&&"radio"===_.type&&null!=_.name&&ab(u,_),vb(w,x);var L=vb(w,_);for(x=0;x<C.length;x+=2){var B=C[x],U=C[x+1];"style"===B?sb(u,U):"dangerouslySetInnerHTML"===B?we(u,U):"children"===B?ob(u,U):ta(u,B,U,L)}switch(w){case"input":bb(u,_);break;case"textarea":ib(u,_);break;case"select":var j=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!_.multiple;var V=_.value;null!=V?fb(u,!!_.multiple,V,!1):j!==!!_.multiple&&(null!=_.defaultValue?fb(u,!!_.multiple,_.defaultValue,!0):fb(u,!!_.multiple,_.multiple?[]:"",!1))}u[rr]=_}catch($){W(i,i.return,$)}}break;case 6:if(ck(a,i),ek(i),4&o){if(null===i.stateNode)throw Error(p(162));u=i.stateNode,_=i.memoizedProps;try{u.nodeValue=_}catch($){W(i,i.return,$)}}break;case 3:if(ck(a,i),ek(i),4&o&&null!==s&&s.memoizedState.isDehydrated)try{bd(a.containerInfo)}catch($){W(i,i.return,$)}break;case 4:default:ck(a,i),ek(i);break;case 13:ck(a,i),ek(i),8192&(u=i.child).flags&&(_=null!==u.memoizedState,u.stateNode.isHidden=_,!_||null!==u.alternate&&null!==u.alternate.memoizedState||(ls=ct())),4&o&&ak(i);break;case 22:if(B=null!==s&&null!==s.memoizedState,1&i.mode?(wa=(L=wa)||B,ck(a,i),wa=L):ck(a,i),ek(i),8192&o){if(L=null!==i.memoizedState,(i.stateNode.isHidden=L)&&!B&&1&i.mode)for(Ca=i,B=i.child;null!==B;){for(U=Ca=B;null!==Ca;){switch(V=(j=Ca).child,j.tag){case 0:case 11:case 14:case 15:Pj(4,j,j.return);break;case 1:Lj(j,j.return);var z=j.stateNode;if("function"==typeof z.componentWillUnmount){o=j,s=j.return;try{a=o,z.props=a.memoizedProps,z.state=a.memoizedState,z.componentWillUnmount()}catch($){W(o,s,$)}}break;case 5:Lj(j,j.return);break;case 22:if(null!==j.memoizedState){gk(U);continue}}null!==V?(V.return=j,Ca=V):gk(U)}B=B.sibling}e:for(B=null,U=i;;){if(5===U.tag){if(null===B){B=U;try{u=U.stateNode,L?"function"==typeof(_=u.style).setProperty?_.setProperty("display","none","important"):_.display="none":(w=U.stateNode,x=null!=(C=U.memoizedProps.style)&&C.hasOwnProperty("display")?C.display:null,w.style.display=rb("display",x))}catch($){W(i,i.return,$)}}}else if(6===U.tag){if(null===B)try{U.stateNode.nodeValue=L?"":U.memoizedProps}catch($){W(i,i.return,$)}}else if((22!==U.tag&&23!==U.tag||null===U.memoizedState||U===i)&&null!==U.child){U.child.return=U,U=U.child;continue}if(U===i)break e;for(;null===U.sibling;){if(null===U.return||U.return===i)break e;B===U&&(B=null),U=U.return}B===U&&(B=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:ck(a,i),ek(i),4&o&&ak(i);case 21:}}function ek(i){var a=i.flags;if(2&a){try{e:{for(var s=i.return;null!==s;){if(Tj(s)){var o=s;break e}s=s.return}throw Error(p(160))}switch(o.tag){case 5:var u=o.stateNode;32&o.flags&&(ob(u,""),o.flags&=-33),Wj(i,Uj(i),u);break;case 3:case 4:var _=o.stateNode.containerInfo;Vj(i,Uj(i),_);break;default:throw Error(p(161))}}catch(x){W(i,i.return,x)}i.flags&=-3}4096&a&&(i.flags&=-4097)}function hk(i,a,s){Ca=i,ik(i)}function ik(i,a,s){for(var o=!!(1&i.mode);null!==Ca;){var u=Ca,_=u.child;if(22===u.tag&&o){var x=null!==u.memoizedState||xa;if(!x){var w=u.alternate,C=null!==w&&null!==w.memoizedState||wa;w=xa;var L=wa;if(xa=x,(wa=C)&&!L)for(Ca=u;null!==Ca;)C=(x=Ca).child,22===x.tag&&null!==x.memoizedState?jk(u):null!==C?(C.return=x,Ca=C):jk(u);for(;null!==_;)Ca=_,ik(_),_=_.sibling;Ca=u,xa=w,wa=L}kk(i)}else 8772&u.subtreeFlags&&null!==_?(_.return=u,Ca=_):kk(i)}}function kk(i){for(;null!==Ca;){var a=Ca;if(8772&a.flags){var s=a.alternate;try{if(8772&a.flags)switch(a.tag){case 0:case 11:case 15:wa||Qj(5,a);break;case 1:var o=a.stateNode;if(4&a.flags&&!wa)if(null===s)o.componentDidMount();else{var u=a.elementType===a.type?s.memoizedProps:Ci(a.type,s.memoizedProps);o.componentDidUpdate(u,s.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;null!==_&&sh(a,_,o);break;case 3:var x=a.updateQueue;if(null!==x){if(s=null,null!==a.child)switch(a.child.tag){case 5:case 1:s=a.child.stateNode}sh(a,x,s)}break;case 5:var w=a.stateNode;if(null===s&&4&a.flags){s=w;var C=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&s.focus();break;case"img":C.src&&(s.src=C.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===a.memoizedState){var L=a.alternate;if(null!==L){var B=L.memoizedState;if(null!==B){var U=B.dehydrated;null!==U&&bd(U)}}}break;default:throw Error(p(163))}wa||512&a.flags&&Rj(a)}catch(j){W(a,a.return,j)}}if(a===i){Ca=null;break}if(null!==(s=a.sibling)){s.return=a.return,Ca=s;break}Ca=a.return}}function gk(i){for(;null!==Ca;){var a=Ca;if(a===i){Ca=null;break}var s=a.sibling;if(null!==s){s.return=a.return,Ca=s;break}Ca=a.return}}function jk(i){for(;null!==Ca;){var a=Ca;try{switch(a.tag){case 0:case 11:case 15:var s=a.return;try{Qj(4,a)}catch(C){W(a,s,C)}break;case 1:var o=a.stateNode;if("function"==typeof o.componentDidMount){var u=a.return;try{o.componentDidMount()}catch(C){W(a,u,C)}}var _=a.return;try{Rj(a)}catch(C){W(a,_,C)}break;case 5:var x=a.return;try{Rj(a)}catch(C){W(a,x,C)}}}catch(C){W(a,a.return,C)}if(a===i){Ca=null;break}var w=a.sibling;if(null!==w){w.return=a.return,Ca=w;break}Ca=a.return}}__name(Yj,"Yj"),__name(Zj,"Zj"),__name(ak,"ak"),__name(ck,"ck"),__name(dk,"dk"),__name(ek,"ek"),__name(hk,"hk"),__name(ik,"ik"),__name(kk,"kk"),__name(gk,"gk"),__name(jk,"jk");var La,Da=Math.ceil,Na=U.ReactCurrentDispatcher,Ba=U.ReactCurrentOwner,Fa=U.ReactCurrentBatchConfig,ja=0,za=null,Ha=null,$a=0,Ga=0,Ja=Uf(0),es=0,ns=null,is=0,rs=0,as=0,ss=null,os=null,ls=0,cs=1/0,us=null,ds=!1,hs=null,ps=null,ms=!1,fs=null,gs=0,_s=0,ys=null,vs=-1,bs=0;function R(){return 6&ja?ct():-1!==vs?vs:vs=ct()}function yi(i){return 1&i.mode?2&ja&&0!==$a?$a&-$a:null!==Ir.transition?(0===bs&&(bs=yc()),bs):0!==(i=xt)?i:i=void 0===(i=window.event)?16:jd(i.type):1}function gi(i,a,s,o){if(50<_s)throw _s=0,ys=null,Error(p(185));Ac(i,s,o),2&ja&&i===za||(i===za&&(!(2&ja)&&(rs|=s),4===es&&Ck(i,$a)),Dk(i,o),1===s&&0===ja&&!(1&a.mode)&&(cs=ct()+500,gr&&jg()))}function Dk(i,a){var s=i.callbackNode;wc(i,a);var o=uc(i,i===za?$a:0);if(0===o)null!==s&&st(s),i.callbackNode=null,i.callbackPriority=0;else if(a=o&-o,i.callbackPriority!==a){if(null!=s&&st(s),1===a)0===i.tag?ig(Ek.bind(null,i)):hg(Ek.bind(null,i)),er(function(){!(6&ja)&&jg()}),s=null;else{switch(Dc(o)){case 1:s=dt;break;case 4:s=ht;break;case 16:default:s=pt;break;case 536870912:s=ft}s=Fk(s,Gk.bind(null,i))}i.callbackPriority=a,i.callbackNode=s}}function Gk(i,a){if(vs=-1,bs=0,6&ja)throw Error(p(327));var s=i.callbackNode;if(Hk()&&i.callbackNode!==s)return null;var o=uc(i,i===za?$a:0);if(0===o)return null;if(30&o||0!==(o&i.expiredLanes)||a)a=Ik(i,o);else{a=o;var u=ja;ja|=2;var _=Jk();for(za===i&&$a===a||(us=null,cs=ct()+500,Kk(i,a));;)try{Lk();break}catch(w){Mk(i,w)}$g(),Na.current=_,ja=u,null!==Ha?a=0:(za=null,$a=0,a=es)}if(0!==a){if(2===a&&(0!==(u=xc(i))&&(o=u,a=Nk(i,u))),1===a)throw s=ns,Kk(i,0),Ck(i,o),Dk(i,ct()),s;if(6===a)Ck(i,o);else{if(u=i.current.alternate,!(30&o||Ok(u)||(a=Ik(i,o),2===a&&(_=xc(i),0!==_&&(o=_,a=Nk(i,_))),1!==a)))throw s=ns,Kk(i,0),Ck(i,o),Dk(i,ct()),s;switch(i.finishedWork=u,i.finishedLanes=o,a){case 0:case 1:throw Error(p(345));case 2:case 5:Pk(i,os,us);break;case 3:if(Ck(i,o),(130023424&o)===o&&10<(a=ls+500-ct())){if(0!==uc(i,0))break;if(((u=i.suspendedLanes)&o)!==o){R(),i.pingedLanes|=i.suspendedLanes&u;break}i.timeoutHandle=Ri(Pk.bind(null,i,os,us),a);break}Pk(i,os,us);break;case 4:if(Ck(i,o),(4194240&o)===o)break;for(a=i.eventTimes,u=-1;0<o;){var x=31-yt(o);_=1<<x,(x=a[x])>u&&(u=x),o&=~_}if(o=u,10<(o=(120>(o=ct()-o)?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Da(o/1960))-o)){i.timeoutHandle=Ri(Pk.bind(null,i,os,us),o);break}Pk(i,os,us);break;default:throw Error(p(329))}}}return Dk(i,ct()),i.callbackNode===s?Gk.bind(null,i):null}function Nk(i,a){var s=ss;return i.current.memoizedState.isDehydrated&&(Kk(i,a).flags|=256),2!==(i=Ik(i,a))&&(a=os,os=s,null!==a&&Fj(a)),i}function Fj(i){null===os?os=i:os.push.apply(os,i)}function Ok(i){for(var a=i;;){if(16384&a.flags){var s=a.updateQueue;if(null!==s&&null!==(s=s.stores))for(var o=0;o<s.length;o++){var u=s[o],_=u.getSnapshot;u=u.value;try{if(!Rn(_(),u))return!1}catch(x){return!1}}}if(s=a.child,16384&a.subtreeFlags&&null!==s)s.return=a,a=s;else{if(a===i)break;for(;null===a.sibling;){if(null===a.return||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ck(i,a){for(a&=~as,a&=~rs,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var s=31-yt(a),o=1<<s;i[s]=-1,a&=~o}}function Ek(i){if(6&ja)throw Error(p(327));Hk();var a=uc(i,0);if(!(1&a))return Dk(i,ct()),null;var s=Ik(i,a);if(0!==i.tag&&2===s){var o=xc(i);0!==o&&(a=o,s=Nk(i,o))}if(1===s)throw s=ns,Kk(i,0),Ck(i,a),Dk(i,ct()),s;if(6===s)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Pk(i,os,us),Dk(i,ct()),null}function Qk(i,a){var s=ja;ja|=1;try{return i(a)}finally{0===(ja=s)&&(cs=ct()+500,gr&&jg())}}function Rk(i){null!==fs&&0===fs.tag&&!(6&ja)&&Hk();var a=ja;ja|=1;var s=Fa.transition,o=xt;try{if(Fa.transition=null,xt=1,i)return i()}finally{xt=o,Fa.transition=s,!(6&(ja=a))&&jg()}}function Hj(){Ga=Ja.current,E(Ja)}function Kk(i,a){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(-1!==s&&(i.timeoutHandle=-1,Oi(s)),null!==Ha)for(s=Ha.return;null!==s;){var o=s;switch(wg(o),o.tag){case 1:null!=(o=o.type.childContextTypes)&&$f();break;case 3:zh(),E(pr),E(hr),Eh();break;case 5:Bh(o);break;case 4:zh();break;case 13:case 19:E($r);break;case 10:ah(o.type._context);break;case 22:case 23:Hj()}s=s.return}if(za=i,Ha=i=Pg(i.current,null),$a=Ga=a,es=0,ns=null,as=rs=is=0,os=ss=null,null!==Fr){for(a=0;a<Fr.length;a++)if(null!==(o=(s=Fr[a]).interleaved)){s.interleaved=null;var u=o.next,_=s.pending;if(null!==_){var x=_.next;_.next=u,o.next=x}s.pending=o}Fr=null}return i}function Mk(i,a){for(;;){var s=Ha;try{if($g(),Wr.current=ia,Jr){for(var o=Qr.memoizedState;null!==o;){var u=o.queue;null!==u&&(u.pending=null),o=o.next}Jr=!1}if(Xr=0,Yr=Kr=Qr=null,Zr=!1,ea=0,Ba.current=null,null===s||null===s.return){es=1,ns=a,Ha=null;break}e:{var _=i,x=s.return,w=s,C=a;if(a=$a,w.flags|=32768,null!==C&&"object"==typeof C&&"function"==typeof C.then){var L=C,B=w,U=B.tag;if(!(1&B.mode||0!==U&&11!==U&&15!==U)){var j=B.alternate;j?(B.updateQueue=j.updateQueue,B.memoizedState=j.memoizedState,B.lanes=j.lanes):(B.updateQueue=null,B.memoizedState=null)}var V=Ui(x);if(null!==V){V.flags&=-257,Vi(V,x,w,0,a),1&V.mode&&Si(_,L,a),C=L;var z=(a=V).updateQueue;if(null===z){var $=/* @__PURE__ */new Set;$.add(C),a.updateQueue=$}else z.add(C);break e}if(!(1&a)){Si(_,L,a),tj();break e}C=Error(p(426))}else if(kr&&1&w.mode){var Y=Ui(x);if(null!==Y){!(65536&Y.flags)&&(Y.flags|=256),Vi(Y,x,w,0,a),Jg(Ji(C,w));break e}}_=C=Ji(C,w),4!==es&&(es=2),null===ss?ss=[_]:ss.push(_),_=x;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a,ph(_,Ni(0,C,a));break e;case 1:w=C;var Z=_.type,ee=_.stateNode;if(!(128&_.flags||"function"!=typeof Z.getDerivedStateFromError&&(null===ee||"function"!=typeof ee.componentDidCatch||null!==ps&&ps.has(ee)))){_.flags|=65536,a&=-a,_.lanes|=a,ph(_,Qi(_,w,a));break e}}_=_.return}while(null!==_)}Sk(s)}catch(ie){a=ie,Ha===s&&null!==s&&(Ha=s=s.return);continue}break}}function Jk(){var i=Na.current;return Na.current=ia,null===i?ia:i}function tj(){0!==es&&3!==es&&2!==es||(es=4),null===za||!(268435455&is)&&!(268435455&rs)||Ck(za,$a)}function Ik(i,a){var s=ja;ja|=2;var o=Jk();for(za===i&&$a===a||(us=null,Kk(i,a));;)try{Tk();break}catch(u){Mk(i,u)}if($g(),ja=s,Na.current=o,null!==Ha)throw Error(p(261));return za=null,$a=0,es}function Tk(){for(;null!==Ha;)Uk(Ha)}function Lk(){for(;null!==Ha&&!ot();)Uk(Ha)}function Uk(i){var a=La(i.alternate,i,Ga);i.memoizedProps=i.pendingProps,null===a?Sk(i):Ha=a,Ba.current=null}function Sk(i){var a=i;do{var s=a.alternate;if(i=a.return,32768&a.flags){if(null!==(s=Ij(s,a)))return s.flags&=32767,void(Ha=s);if(null===i)return es=6,void(Ha=null);i.flags|=32768,i.subtreeFlags=0,i.deletions=null}else if(null!==(s=Ej(s,a,Ga)))return void(Ha=s);if(null!==(a=a.sibling))return void(Ha=a);Ha=a=i}while(null!==a);0===es&&(es=5)}function Pk(i,a,s){var o=xt,u=Fa.transition;try{Fa.transition=null,xt=1,Wk(i,a,s,o)}finally{Fa.transition=u,xt=o}return null}function Wk(i,a,s,o){do{Hk()}while(null!==fs);if(6&ja)throw Error(p(327));s=i.finishedWork;var u=i.finishedLanes;if(null===s)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var _=s.lanes|s.childLanes;if(Bc(i,_),i===za&&(Ha=za=null,$a=0),!(2064&s.subtreeFlags)&&!(2064&s.flags)||ms||(ms=!0,Fk(pt,function(){return Hk(),null})),_=!!(15990&s.flags),15990&s.subtreeFlags||_){_=Fa.transition,Fa.transition=null;var x=xt;xt=1;var w=ja;ja|=4,Ba.current=null,Oj(i,s),dk(s,i),Oe(Pi),Ut=!!Mi,Pi=Mi=null,i.current=s,hk(s),lt(),ja=w,xt=x,Fa.transition=_}else i.current=s;if(ms&&(ms=!1,fs=i,gs=u),0===(_=i.pendingLanes)&&(ps=null),mc(s.stateNode),Dk(i,ct()),null!==a)for(o=i.onRecoverableError,s=0;s<a.length;s++)o((u=a[s]).value,{componentStack:u.stack,digest:u.digest});if(ds)throw ds=!1,i=hs,hs=null,i;return 1&gs&&0!==i.tag&&Hk(),1&(_=i.pendingLanes)?i===ys?_s++:(_s=0,ys=i):_s=0,jg(),null}function Hk(){if(null!==fs){var i=Dc(gs),a=Fa.transition,s=xt;try{if(Fa.transition=null,xt=16>i?16:i,null===fs)var o=!1;else{if(i=fs,fs=null,gs=0,6&ja)throw Error(p(331));var u=ja;for(ja|=4,Ca=i.current;null!==Ca;){var _=Ca,x=_.child;if(16&Ca.flags){var w=_.deletions;if(null!==w){for(var C=0;C<w.length;C++){var L=w[C];for(Ca=L;null!==Ca;){var B=Ca;switch(B.tag){case 0:case 11:case 15:Pj(8,B,_)}var U=B.child;if(null!==U)U.return=B,Ca=U;else for(;null!==Ca;){var j=(B=Ca).sibling,V=B.return;if(Sj(B),B===L){Ca=null;break}if(null!==j){j.return=V,Ca=j;break}Ca=V}}}var z=_.alternate;if(null!==z){var $=z.child;if(null!==$){z.child=null;do{var Y=$.sibling;$.sibling=null,$=Y}while(null!==$)}}Ca=_}}if(2064&_.subtreeFlags&&null!==x)x.return=_,Ca=x;else e:for(;null!==Ca;){if(2048&(_=Ca).flags)switch(_.tag){case 0:case 11:case 15:Pj(9,_,_.return)}var Z=_.sibling;if(null!==Z){Z.return=_.return,Ca=Z;break e}Ca=_.return}}var ee=i.current;for(Ca=ee;null!==Ca;){var ie=(x=Ca).child;if(2064&x.subtreeFlags&&null!==ie)ie.return=x,Ca=ie;else e:for(x=ee;null!==Ca;){if(2048&(w=Ca).flags)try{switch(w.tag){case 0:case 11:case 15:Qj(9,w)}}catch(le){W(w,w.return,le)}if(w===x){Ca=null;break e}var ae=w.sibling;if(null!==ae){ae.return=w.return,Ca=ae;break e}Ca=w.return}}if(ja=u,jg(),_t&&"function"==typeof _t.onPostCommitFiberRoot)try{_t.onPostCommitFiberRoot(gt,i)}catch(le){}o=!0}return o}finally{xt=s,Fa.transition=a}}return!1}function Xk(i,a,s){i=nh(i,a=Ni(0,a=Ji(s,a),1),1),a=R(),null!==i&&(Ac(i,1,a),Dk(i,a))}function W(i,a,s){if(3===i.tag)Xk(i,i,s);else for(;null!==a;){if(3===a.tag){Xk(a,i,s);break}if(1===a.tag){var o=a.stateNode;if("function"==typeof a.type.getDerivedStateFromError||"function"==typeof o.componentDidCatch&&(null===ps||!ps.has(o))){a=nh(a,i=Qi(a,i=Ji(s,i),1),1),i=R(),null!==a&&(Ac(a,1,i),Dk(a,i));break}}a=a.return}}function Ti(i,a,s){var o=i.pingCache;null!==o&&o.delete(a),a=R(),i.pingedLanes|=i.suspendedLanes&s,za===i&&($a&s)===s&&(4===es||3===es&&(130023424&$a)===$a&&500>ct()-ls?Kk(i,0):as|=s),Dk(i,a)}function Yk(i,a){0===a&&(1&i.mode?(a=St,!(130023424&(St<<=1))&&(St=4194304)):a=1);var s=R();null!==(i=ih(i,a))&&(Ac(i,a,s),Dk(i,s))}function uj(i){var a=i.memoizedState,s=0;null!==a&&(s=a.retryLane),Yk(i,s)}function bk(i,a){var s=0;switch(i.tag){case 13:var o=i.stateNode,u=i.memoizedState;null!==u&&(s=u.retryLane);break;case 19:o=i.stateNode;break;default:throw Error(p(314))}null!==o&&o.delete(a),Yk(i,s)}function Fk(i,a){return at(i,a)}function $k(i,a,s,o){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,a,s,o){return new $k(i,a,s,o)}function aj(i){return!(!(i=i.prototype)||!i.isReactComponent)}function Zk(i){if("function"==typeof i)return aj(i)?1:0;if(null!=i){if((i=i.$$typeof)===ie)return 11;if(i===ce)return 14}return 2}function Pg(i,a){var s=i.alternate;return null===s?((s=Bg(i.tag,a,i.key,i.mode)).elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=a,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&i.flags,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,a=i.dependencies,s.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function Rg(i,a,s,o,u,_){var x=2;if(o=i,"function"==typeof i)aj(i)&&(x=1);else if("string"==typeof i)x=5;else e:switch(i){case z:return Tg(s.children,u,_,a);case $:x=8,u|=8;break;case Y:return(i=Bg(12,s,a,2|u)).elementType=Y,i.lanes=_,i;case ae:return(i=Bg(13,s,a,u)).elementType=ae,i.lanes=_,i;case le:return(i=Bg(19,s,a,u)).elementType=le,i.lanes=_,i;case pe:return pj(s,u,_,a);default:if("object"==typeof i&&null!==i)switch(i.$$typeof){case Z:x=10;break e;case ee:x=9;break e;case ie:x=11;break e;case ce:x=14;break e;case de:x=16,o=null;break e}throw Error(p(130,null==i?i:typeof i,""))}return(a=Bg(x,s,a,u)).elementType=i,a.type=o,a.lanes=_,a}function Tg(i,a,s,o){return(i=Bg(7,i,o,a)).lanes=s,i}function pj(i,a,s,o){return(i=Bg(22,i,o,a)).elementType=pe,i.lanes=s,i.stateNode={isHidden:!1},i}function Qg(i,a,s){return(i=Bg(6,i,null,a)).lanes=s,i}function Sg(i,a,s){return(a=Bg(4,null!==i.children?i.children:[],i.key,a)).lanes=s,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function al(i,a,s,o,u){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=o,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function bl(i,a,s,o,u,_,x,w,C){return i=new al(i,a,s,w,C),1===a?(a=1,!0===_&&(a|=8)):a=0,_=Bg(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:o,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(_),i}function cl(i,a,s){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:V,key:null==o?null:""+o,children:i,containerInfo:a,implementation:s}}function dl(i){if(!i)return dr;e:{if(Vb(i=i._reactInternals)!==i||1!==i.tag)throw Error(p(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Zf(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(null!==a);throw Error(p(171))}if(1===i.tag){var s=i.type;if(Zf(s))return bg(i,s,a)}return a}function el(i,a,s,o,u,_,x,w,C){return(i=bl(s,o,!0,i,0,_,0,w,C)).context=dl(null),s=i.current,(_=mh(o=R(),u=yi(s))).callback=null!=a?a:null,nh(s,_,u),i.current.lanes=u,Ac(i,u,o),Dk(i,o),i}function fl(i,a,s,o){var u=a.current,_=R(),x=yi(u);return s=dl(s),null===a.context?a.context=s:a.pendingContext=s,(a=mh(_,x)).payload={element:i},null!==(o=void 0===o?null:o)&&(a.callback=o),null!==(i=nh(u,a,x))&&(gi(i,u,x,_),oh(i,u,x)),x}function gl(i){return(i=i.current).child?(i.child.tag,i.child.stateNode):null}function hl(i,a){if(null!==(i=i.memoizedState)&&null!==i.dehydrated){var s=i.retryLane;i.retryLane=0!==s&&s<a?s:a}}function il(i,a){hl(i,a),(i=i.alternate)&&hl(i,a)}function jl(){return null}__name(R,"R"),__name(yi,"yi"),__name(gi,"gi"),__name(Dk,"Dk"),__name(Gk,"Gk"),__name(Nk,"Nk"),__name(Fj,"Fj"),__name(Ok,"Ok"),__name(Ck,"Ck"),__name(Ek,"Ek"),__name(Qk,"Qk"),__name(Rk,"Rk"),__name(Hj,"Hj"),__name(Kk,"Kk"),__name(Mk,"Mk"),__name(Jk,"Jk"),__name(tj,"tj"),__name(Ik,"Ik"),__name(Tk,"Tk"),__name(Lk,"Lk"),__name(Uk,"Uk"),__name(Sk,"Sk"),__name(Pk,"Pk"),__name(Wk,"Wk"),__name(Hk,"Hk"),__name(Xk,"Xk"),__name(W,"W"),__name(Ti,"Ti"),__name(Yk,"Yk"),__name(uj,"uj"),__name(bk,"bk"),La=/* @__PURE__ */__name(function(i,a,s){if(null!==i)if(i.memoizedProps!==a.pendingProps||pr.current)ma=!0;else{if(0===(i.lanes&s)&&!(128&a.flags))return ma=!1,yj(i,a,s);ma=!!(131072&i.flags)}else ma=!1,kr&&1048576&a.flags&&ug(a,Tr,a.index);switch(a.lanes=0,a.tag){case 2:var o=a.type;ij(i,a),i=a.pendingProps;var u=Yf(a,hr.current);ch(a,s),u=Nh(null,a,o,i,u,s);var _=Sh();return a.flags|=1,"object"==typeof u&&null!==u&&"function"==typeof u.render&&void 0===u.$$typeof?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Zf(o)?(_=!0,cg(a)):_=!1,a.memoizedState=null!==u.state&&void 0!==u.state?u.state:null,kh(a),u.updater=ca,a.stateNode=u,u._reactInternals=a,Ii(a,o,i,s),a=jj(null,a,o,!0,_,s)):(a.tag=0,kr&&_&&vg(a),Xi(null,a,u,s),a=a.child),a;case 16:o=a.elementType;e:{switch(ij(i,a),i=a.pendingProps,o=(u=o._init)(o._payload),a.type=o,u=a.tag=Zk(o),i=Ci(o,i),u){case 0:a=cj(null,a,o,i,s);break e;case 1:a=hj(null,a,o,i,s);break e;case 11:a=Yi(null,a,o,i,s);break e;case 14:a=$i(null,a,o,Ci(o.type,i),s);break e}throw Error(p(306,o,""))}return a;case 0:return o=a.type,u=a.pendingProps,cj(i,a,o,u=a.elementType===o?u:Ci(o,u),s);case 1:return o=a.type,u=a.pendingProps,hj(i,a,o,u=a.elementType===o?u:Ci(o,u),s);case 3:e:{if(kj(a),null===i)throw Error(p(387));o=a.pendingProps,u=(_=a.memoizedState).element,lh(i,a),qh(a,o,null,s);var x=a.memoizedState;if(o=x.element,_.isDehydrated){if(_={element:o,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},a.updateQueue.baseState=_,a.memoizedState=_,256&a.flags){a=lj(i,a,o,s,u=Ji(Error(p(423)),a));break e}if(o!==u){a=lj(i,a,o,s,u=Ji(Error(p(424)),a));break e}for(Mr=Lf(a.stateNode.containerInfo.firstChild),Er=a,kr=!0,Pr=null,s=Dr(a,null,o,s),a.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(Ig(),o===u){a=Zi(i,a,s);break e}Xi(i,a,o,s)}a=a.child}return a;case 5:return Ah(a),null===i&&Eg(a),o=a.type,u=a.pendingProps,_=null!==i?i.memoizedProps:null,x=u.children,Ef(o,u)?x=null:null!==_&&Ef(o,_)&&(a.flags|=32),gj(i,a),Xi(i,a,x,s),a.child;case 6:return null===i&&Eg(a),null;case 13:return oj(i,a,s);case 4:return yh(a,a.stateNode.containerInfo),o=a.pendingProps,null===i?a.child=Lr(a,null,o,s):Xi(i,a,o,s),a.child;case 11:return o=a.type,u=a.pendingProps,Yi(i,a,o,u=a.elementType===o?u:Ci(o,u),s);case 7:return Xi(i,a,a.pendingProps,s),a.child;case 8:case 12:return Xi(i,a,a.pendingProps.children,s),a.child;case 10:e:{if(o=a.type._context,u=a.pendingProps,_=a.memoizedProps,x=u.value,G(Rr,o._currentValue),o._currentValue=x,null!==_)if(Rn(_.value,x)){if(_.children===u.children&&!pr.current){a=Zi(i,a,s);break e}}else for(null!==(_=a.child)&&(_.return=a);null!==_;){var w=_.dependencies;if(null!==w){x=_.child;for(var C=w.firstContext;null!==C;){if(C.context===o){if(1===_.tag){(C=mh(-1,s&-s)).tag=2;var L=_.updateQueue;if(null!==L){var B=(L=L.shared).pending;null===B?C.next=C:(C.next=B.next,B.next=C),L.pending=C}}_.lanes|=s,null!==(C=_.alternate)&&(C.lanes|=s),bh(_.return,s,a),w.lanes|=s;break}C=C.next}}else if(10===_.tag)x=_.type===a.type?null:_.child;else if(18===_.tag){if(null===(x=_.return))throw Error(p(341));x.lanes|=s,null!==(w=x.alternate)&&(w.lanes|=s),bh(x,s,a),x=_.sibling}else x=_.child;if(null!==x)x.return=_;else for(x=_;null!==x;){if(x===a){x=null;break}if(null!==(_=x.sibling)){_.return=x.return,x=_;break}x=x.return}_=x}Xi(i,a,u.children,s),a=a.child}return a;case 9:return u=a.type,o=a.pendingProps.children,ch(a,s),o=o(u=eh(u)),a.flags|=1,Xi(i,a,o,s),a.child;case 14:return u=Ci(o=a.type,a.pendingProps),$i(i,a,o,u=Ci(o.type,u),s);case 15:return bj(i,a,a.type,a.pendingProps,s);case 17:return o=a.type,u=a.pendingProps,u=a.elementType===o?u:Ci(o,u),ij(i,a),a.tag=1,Zf(o)?(i=!0,cg(a)):i=!1,ch(a,s),Gi(a,o,u),Ii(a,o,u,s),jj(null,a,o,!0,i,s);case 19:return xj(i,a,s);case 22:return dj(i,a,s)}throw Error(p(156,a.tag))},"Vk"),__name(Fk,"Fk"),__name($k,"$k"),__name(Bg,"Bg"),__name(aj,"aj"),__name(Zk,"Zk"),__name(Pg,"Pg"),__name(Rg,"Rg"),__name(Tg,"Tg"),__name(pj,"pj"),__name(Qg,"Qg"),__name(Sg,"Sg"),__name(al,"al"),__name(bl,"bl"),__name(cl,"cl"),__name(dl,"dl"),__name(el,"el"),__name(fl,"fl"),__name(gl,"gl"),__name(hl,"hl"),__name(il,"il"),__name(jl,"jl");var Ts="function"==typeof reportError?reportError:function(i){console.error(i)};function ll(i){this._internalRoot=i}function ml(i){this._internalRoot=i}function nl(i){return!(!i||1!==i.nodeType&&9!==i.nodeType&&11!==i.nodeType)}function ol(i){return!(!i||1!==i.nodeType&&9!==i.nodeType&&11!==i.nodeType&&(8!==i.nodeType||" react-mount-point-unstable "!==i.nodeValue))}function pl(){}function ql(i,a,s,o,u){if(u){if("function"==typeof o){var _=o;o=/* @__PURE__ */__name(function(){var i=gl(x);_.call(i)},"d")}var x=el(a,o,i,0,null,!1,0,"",pl);return i._reactRootContainer=x,i[ar]=x.current,sf(8===i.nodeType?i.parentNode:i),Rk(),x}for(;u=i.lastChild;)i.removeChild(u);if("function"==typeof o){var w=o;o=/* @__PURE__ */__name(function(){var i=gl(C);w.call(i)},"d")}var C=bl(i,0,!1,null,0,!1,0,"",pl);return i._reactRootContainer=C,i[ar]=C.current,sf(8===i.nodeType?i.parentNode:i),Rk(function(){fl(a,C,s,o)}),C}function rl(i,a,s,o,u){var _=s._reactRootContainer;if(_){var x=_;if("function"==typeof u){var w=u;u=/* @__PURE__ */__name(function(){var i=gl(x);w.call(i)},"e")}fl(a,x,i,u)}else x=ql(s,a,i,u,o);return gl(x)}__name(ll,"ll"),ml.prototype.render=ll.prototype.render=function(i){var a=this._internalRoot;if(null===a)throw Error(p(409));fl(i,a,null,null)},ml.prototype.unmount=ll.prototype.unmount=function(){var i=this._internalRoot;if(null!==i){this._internalRoot=null;var a=i.containerInfo;Rk(function(){fl(null,i,null,null)}),a[ar]=null}},__name(ml,"ml"),ml.prototype.unstable_scheduleHydration=function(i){if(i){var a=Et();i={blockedOn:null,target:i,priority:a};for(var s=0;s<Nt.length&&0!==a&&a<Nt[s].priority;s++);Nt.splice(s,0,i),0===s&&Vc(i)}},__name(nl,"nl"),__name(ol,"ol"),__name(pl,"pl"),__name(ql,"ql"),__name(rl,"rl"),wt=/* @__PURE__ */__name(function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var s=tc(a.pendingLanes);0!==s&&(Cc(a,1|s),Dk(a,ct()),!(6&ja)&&(cs=ct()+500,jg()))}break;case 13:Rk(function(){var a=ih(i,1);if(null!==a){var s=R();gi(a,i,1,s)}}),il(i,1)}},"Ec"),At=/* @__PURE__ */__name(function(i){if(13===i.tag){var a=ih(i,134217728);if(null!==a)gi(a,i,134217728,R());il(i,134217728)}},"Fc"),Ct=/* @__PURE__ */__name(function(i){if(13===i.tag){var a=yi(i),s=ih(i,a);if(null!==s)gi(s,i,a,R());il(i,a)}},"Gc"),Et=/* @__PURE__ */__name(function(){return xt},"Hc"),Mt=/* @__PURE__ */__name(function(i,a){var s=xt;try{return xt=i,a()}finally{xt=s}},"Ic"),$e=/* @__PURE__ */__name(function(i,a,s){switch(a){case"input":if(bb(i,s),a=s.name,"radio"===s.type&&null!=a){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<s.length;a++){var o=s[a];if(o!==i&&o.form===i.form){var u=Db(o);if(!u)throw Error(p(90));Wa(o),bb(o,u)}}}break;case"textarea":ib(i,s);break;case"select":null!=(a=s.value)&&fb(i,!!s.multiple,a,!1)}},"yb"),Gb=Qk,Hb=Rk;var Ss={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},xs={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ws={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:/* @__PURE__ */__name(function(i){return null===(i=Zb(i))?null:i.stateNode},"findHostInstanceByFiber"),findFiberByHostInstance:xs.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var As=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!As.isDisabled&&As.supportsFiber)try{gt=As.inject(ws),_t=As}catch(xe){}}return un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ss,un.createPortal=function(i,a){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(a))throw Error(p(200));return cl(i,a,null,s)},un.createRoot=function(i,a){if(!nl(i))throw Error(p(299));var s=!1,o="",u=Ts;return null!=a&&(!0===a.unstable_strictMode&&(s=!0),void 0!==a.identifierPrefix&&(o=a.identifierPrefix),void 0!==a.onRecoverableError&&(u=a.onRecoverableError)),a=bl(i,1,!1,null,0,s,0,o,u),i[ar]=a.current,sf(8===i.nodeType?i.parentNode:i),new ll(a)},un.findDOMNode=function(i){if(null==i)return null;if(1===i.nodeType)return i;var a=i._reactInternals;if(void 0===a){if("function"==typeof i.render)throw Error(p(188));throw i=Object.keys(i).join(","),Error(p(268,i))}return i=null===(i=Zb(a))?null:i.stateNode},un.flushSync=function(i){return Rk(i)},un.hydrate=function(i,a,s){if(!ol(a))throw Error(p(200));return rl(null,i,a,!0,s)},un.hydrateRoot=function(i,a,s){if(!nl(i))throw Error(p(405));var o=null!=s&&s.hydratedSources||null,u=!1,_="",x=Ts;if(null!=s&&(!0===s.unstable_strictMode&&(u=!0),void 0!==s.identifierPrefix&&(_=s.identifierPrefix),void 0!==s.onRecoverableError&&(x=s.onRecoverableError)),a=el(a,null,i,1,null!=s?s:null,u,0,_,x),i[ar]=a.current,sf(i),o)for(i=0;i<o.length;i++)u=(u=(s=o[i])._getVersion)(s._source),null==a.mutableSourceEagerHydrationData?a.mutableSourceEagerHydrationData=[s,u]:a.mutableSourceEagerHydrationData.push(s,u);return new ml(a)},un.render=function(i,a,s){if(!ol(a))throw Error(p(200));return rl(null,i,a,!1,s)},un.unmountComponentAtNode=function(i){if(!ol(i))throw Error(p(40));return!!i._reactRootContainer&&(Rk(function(){rl(null,null,i,!1,function(){i._reactRootContainer=null,i[ar]=null})}),!0)},un.unstable_batchedUpdates=Qk,un.unstable_renderSubtreeIntoContainer=function(i,a,s,o){if(!ol(s))throw Error(p(200));if(null==i||void 0===i._reactInternals)throw Error(p(38));return rl(i,a,s,!1,o)},un.version="18.3.1-next-f1338f8080-20240426",un}function requireReactDom(){if(an)return cn.exports;function checkDCE(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}return an=1,__name(checkDCE,"checkDCE"),checkDCE(),cn.exports=requireReactDom_production_min(),cn.exports}function requireClient$1(){if(sn)return ln;sn=1;var i=requireReactDom();return ln.createRoot=i.createRoot,ln.hydrateRoot=i.hydrateRoot,ln}__name(requireScheduler_production_min,"requireScheduler_production_min"),__name(requireScheduler,"requireScheduler"),__name(requireReactDom_production_min,"requireReactDom_production_min"),__name(requireReactDom,"requireReactDom"),__name(requireClient$1,"requireClient$1");const pn=/* @__PURE__ */getDefaultExportFromCjs(requireClient$1());var mn,fn,gn={exports:{}},_n={};function requireReactJsxRuntime_production_min(){if(mn)return _n;mn=1;var i=requireReact(),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function q(i,s,x){var w,C={},L=null,B=null;for(w in void 0!==x&&(L=""+x),void 0!==s.key&&(L=""+s.key),void 0!==s.ref&&(B=s.ref),s)o.call(s,w)&&!_.hasOwnProperty(w)&&(C[w]=s[w]);if(i&&i.defaultProps)for(w in s=i.defaultProps)void 0===C[w]&&(C[w]=s[w]);return{$$typeof:a,type:i,key:L,ref:B,props:C,_owner:u.current}}return __name(q,"q"),_n.Fragment=s,_n.jsx=q,_n.jsxs=q,_n}function requireJsxRuntime(){return fn||(fn=1,gn.exports=requireReactJsxRuntime_production_min()),gn.exports}__name(requireReactJsxRuntime_production_min,"requireReactJsxRuntime_production_min"),__name(requireJsxRuntime,"requireJsxRuntime");var yn,vn,bn=requireJsxRuntime();function requireWindow(){return vn?yn:(vn=1,i="undefined"!=typeof window?window:void 0!==Xt?Xt:"undefined"!=typeof self?self:{},yn=i);var i}__name(requireWindow,"requireWindow");const Tn=/* @__PURE__ */getDefaultExportFromCjs(requireWindow()),Sn=/* @__PURE__ */getAugmentedNamespace(/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var xn,wn;function requireDocument(){if(wn)return xn;wn=1;var i,a=void 0!==Xt?Xt:"undefined"!=typeof window?window:{},s=Sn;return"undefined"!=typeof document?i=document:(i=a["__GLOBAL_DOCUMENT_CACHE@4"])||(i=a["__GLOBAL_DOCUMENT_CACHE@4"]=s),xn=i}__name(requireDocument,"requireDocument");const An=/* @__PURE__ */getDefaultExportFromCjs(requireDocument());var Cn,En,Mn,kn,Pn,In,Ln,Dn,Rn,On,Nn={exports:{}},Bn={exports:{}};function require_extends(){return Cn||(Cn=1,function(i){function _extends2(){return i.exports=_extends2=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var o in s)({}).hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},i.exports.__esModule=!0,i.exports.default=i.exports,_extends2.apply(null,arguments)}__name(_extends2,"_extends"),i.exports=_extends2,i.exports.__esModule=!0,i.exports.default=i.exports}(Bn)),Bn.exports}function requireIsFunction(){if(Mn)return En;Mn=1,En=isFunction;var i=Object.prototype.toString;function isFunction(a){if(!a)return!1;var s=i.call(a);return"[object Function]"===s||"function"==typeof a&&"[object RegExp]"!==s||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}return __name(isFunction,"isFunction"),En}function requireInterceptors(){if(Pn)return kn;function _createForOfIteratorHelperLoose(i,a){var s="undefined"!=typeof Symbol&&i[Symbol.iterator]||i["@@iterator"];if(s)return(s=s.call(i)).next.bind(s);if(Array.isArray(i)||(s=_unsupportedIterableToArray(i))||a){s&&(i=s);var o=0;return function(){return o>=i.length?{done:!0}:{done:!1,value:i[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(i,a){if(i){if("string"==typeof i)return _arrayLikeToArray(i,a);var s=Object.prototype.toString.call(i).slice(8,-1);return"Object"===s&&i.constructor&&(s=i.constructor.name),"Map"===s||"Set"===s?Array.from(i):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?_arrayLikeToArray(i,a):void 0}}function _arrayLikeToArray(i,a){(null==a||a>i.length)&&(a=i.length);for(var s=0,o=new Array(a);s<a;s++)o[s]=i[s];return o}return Pn=1,__name(_createForOfIteratorHelperLoose,"_createForOfIteratorHelperLoose"),__name(_unsupportedIterableToArray,"_unsupportedIterableToArray"),__name(_arrayLikeToArray,"_arrayLikeToArray"),kn=/* @__PURE__ */function(){function InterceptorsStorage2(){this.typeToInterceptorsMap_=/* @__PURE__ */new Map,this.enabled_=!1}__name(InterceptorsStorage2,"InterceptorsStorage");var i=InterceptorsStorage2.prototype;return i.getIsEnabled=/* @__PURE__ */__name(function getIsEnabled(){return this.enabled_},"getIsEnabled"),i.enable=/* @__PURE__ */__name(function enable(){this.enabled_=!0},"enable"),i.disable=/* @__PURE__ */__name(function disable(){this.enabled_=!1},"disable"),i.reset=/* @__PURE__ */__name(function reset2(){this.typeToInterceptorsMap_=/* @__PURE__ */new Map,this.enabled_=!1},"reset"),i.addInterceptor=/* @__PURE__ */__name(function addInterceptor(i,a){this.typeToInterceptorsMap_.has(i)||this.typeToInterceptorsMap_.set(i,/* @__PURE__ */new Set);var s=this.typeToInterceptorsMap_.get(i);return!s.has(a)&&(s.add(a),!0)},"addInterceptor"),i.removeInterceptor=/* @__PURE__ */__name(function removeInterceptor(i,a){var s=this.typeToInterceptorsMap_.get(i);return!(!s||!s.has(a))&&(s.delete(a),!0)},"removeInterceptor"),i.clearInterceptorsByType=/* @__PURE__ */__name(function clearInterceptorsByType(i){return!!this.typeToInterceptorsMap_.get(i)&&(this.typeToInterceptorsMap_.delete(i),this.typeToInterceptorsMap_.set(i,/* @__PURE__ */new Set),!0)},"clearInterceptorsByType"),i.clear=/* @__PURE__ */__name(function clear(){return!!this.typeToInterceptorsMap_.size&&(this.typeToInterceptorsMap_=/* @__PURE__ */new Map,!0)},"clear"),i.getForType=/* @__PURE__ */__name(function getForType(i){return this.typeToInterceptorsMap_.get(i)||/* @__PURE__ */new Set},"getForType"),i.execute=/* @__PURE__ */__name(function execute(i,a){for(var s,o=_createForOfIteratorHelperLoose(this.getForType(i));!(s=o()).done;){var u=s.value;try{a=u(a)}catch(_){}}return a},"execute"),InterceptorsStorage2}()}function requireRetry(){if(Ln)return In;Ln=1;var i=/* @__PURE__ */function(){function RetryManager2(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}__name(RetryManager2,"RetryManager");var i=RetryManager2.prototype;return i.getIsEnabled=/* @__PURE__ */__name(function getIsEnabled(){return this.enabled_},"getIsEnabled"),i.enable=/* @__PURE__ */__name(function enable(){this.enabled_=!0},"enable"),i.disable=/* @__PURE__ */__name(function disable(){this.enabled_=!1},"disable"),i.reset=/* @__PURE__ */__name(function reset2(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},"reset"),i.getMaxAttempts=/* @__PURE__ */__name(function getMaxAttempts(){return this.maxAttempts_},"getMaxAttempts"),i.setMaxAttempts=/* @__PURE__ */__name(function setMaxAttempts(i){this.maxAttempts_=i},"setMaxAttempts"),i.getDelayFactor=/* @__PURE__ */__name(function getDelayFactor(){return this.delayFactor_},"getDelayFactor"),i.setDelayFactor=/* @__PURE__ */__name(function setDelayFactor(i){this.delayFactor_=i},"setDelayFactor"),i.getFuzzFactor=/* @__PURE__ */__name(function getFuzzFactor(){return this.fuzzFactor_},"getFuzzFactor"),i.setFuzzFactor=/* @__PURE__ */__name(function setFuzzFactor(i){this.fuzzFactor_=i},"setFuzzFactor"),i.getInitialDelay=/* @__PURE__ */__name(function getInitialDelay(){return this.initialDelay_},"getInitialDelay"),i.setInitialDelay=/* @__PURE__ */__name(function setInitialDelay(i){this.initialDelay_=i},"setInitialDelay"),i.createRetry=/* @__PURE__ */__name(function createRetry(i){var s=void 0===i?{}:i,o=s.maxAttempts,u=s.delayFactor,_=s.fuzzFactor,x=s.initialDelay;return new a({maxAttempts:o||this.maxAttempts_,delayFactor:u||this.delayFactor_,fuzzFactor:_||this.fuzzFactor_,initialDelay:x||this.initialDelay_})},"createRetry"),RetryManager2}(),a=/* @__PURE__ */function(){function Retry2(i){this.maxAttempts_=i.maxAttempts,this.delayFactor_=i.delayFactor,this.fuzzFactor_=i.fuzzFactor,this.currentDelay_=i.initialDelay,this.currentAttempt_=1}__name(Retry2,"Retry");var i=Retry2.prototype;return i.moveToNextAttempt=/* @__PURE__ */__name(function moveToNextAttempt(){this.currentAttempt_++;var i=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+i},"moveToNextAttempt"),i.shouldRetry=/* @__PURE__ */__name(function shouldRetry(){return this.currentAttempt_<this.maxAttempts_},"shouldRetry"),i.getCurrentDelay=/* @__PURE__ */__name(function getCurrentDelay(){return this.currentDelay_},"getCurrentDelay"),i.getCurrentMinPossibleDelay=/* @__PURE__ */__name(function getCurrentMinPossibleDelay(){return(1-this.fuzzFactor_)*this.currentDelay_},"getCurrentMinPossibleDelay"),i.getCurrentMaxPossibleDelay=/* @__PURE__ */__name(function getCurrentMaxPossibleDelay(){return(1+this.fuzzFactor_)*this.currentDelay_},"getCurrentMaxPossibleDelay"),i.getCurrentFuzzedDelay=/* @__PURE__ */__name(function getCurrentFuzzedDelay(){var i=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return i+Math.random()*(a-i)},"getCurrentFuzzedDelay"),Retry2}();return In=i}function requireHttpHandler$1(){if(Rn)return Dn;Rn=1;var i=requireWindow(),a=/* @__PURE__ */__name(function httpResponseHandler2(a,s){return void 0===s&&(s=!1),function(o,u,_){if(o)a(o);else if(u.statusCode>=400&&u.statusCode<=599){var x=_;if(s)if(i.TextDecoder){var w=getCharset(u.headers&&u.headers["content-type"]);try{x=new TextDecoder(w).decode(_)}catch(C){}}else x=String.fromCharCode.apply(null,new Uint8Array(_));a({cause:x})}else a(null,_)}},"httpResponseHandler");function getCharset(i){return void 0===i&&(i=""),i.toLowerCase().split(";").reduce(function(i,a){var s=a.split("="),o=s[0],u=s[1];return"charset"===o.trim()?u.trim():i},"utf-8")}return __name(getCharset,"getCharset"),Dn=a}function requireLib$2(){if(On)return Nn.exports;On=1;var i=requireWindow(),a=require_extends(),s=requireIsFunction(),o=requireInterceptors(),u=requireRetry();createXHR.httpHandler=requireHttpHandler$1(),createXHR.requestInterceptorsStorage=new o,createXHR.responseInterceptorsStorage=new o,createXHR.retryManager=new u;var _=/* @__PURE__ */__name(function parseHeaders2(i){var a={};return i?(i.trim().split("\n").forEach(function(i){var s=i.indexOf(":"),o=i.slice(0,s).trim().toLowerCase(),u=i.slice(s+1).trim();void 0===a[o]?a[o]=u:Array.isArray(a[o])?a[o].push(u):a[o]=[a[o],u]}),a):a},"parseHeaders");function forEachArray(i,a){for(var s=0;s<i.length;s++)a(i[s])}function isEmpty(i){for(var a in i)if(i.hasOwnProperty(a))return!1;return!0}function initParams(i,o,u){var _=i;return s(o)?(u=o,"string"==typeof i&&(_={uri:i})):_=a({},o,{uri:i}),_.callback=u,_}function createXHR(i,a,s){return _createXHR(a=initParams(i,a,s))}function _createXHR(i){if(void 0===i.callback)throw new Error("callback argument missing");if(i.requestType&&createXHR.requestInterceptorsStorage.getIsEnabled()){var a={uri:i.uri||i.url,headers:i.headers||{},body:i.body,metadata:i.metadata||{},retry:i.retry,timeout:i.timeout},s=createXHR.requestInterceptorsStorage.execute(i.requestType,a);i.uri=s.uri,i.headers=s.headers,i.body=s.body,i.metadata=s.metadata,i.retry=s.retry,i.timeout=s.timeout}var o=!1,u=/* @__PURE__ */__name(function cbOnce(a,s,u){o||(o=!0,i.callback(a,s,u))},"cbOnce");function readystatechange(){4!==C.readyState||createXHR.responseInterceptorsStorage.getIsEnabled()||setTimeout(loadFunc,0)}function getBody(){var i=void 0;if(i=C.response?C.response:C.responseText||getXml(C),$)try{i=JSON.parse(i)}catch(a){}return i}function errorFunc(a){if(clearTimeout(L),clearTimeout(i.retryTimeout),a instanceof Error||(a=new Error(""+(a||"Unknown XMLHttpRequest Error"))),a.statusCode=0,w||!createXHR.retryManager.getIsEnabled()||!i.retry||!i.retry.shouldRetry()){if(i.requestType&&createXHR.responseInterceptorsStorage.getIsEnabled()){var s={headers:Y.headers||{},body:Y.body,responseUrl:C.responseURL,responseType:C.responseType},o=createXHR.responseInterceptorsStorage.execute(i.requestType,s);Y.body=o.body,Y.headers=o.headers}return u(a,Y)}i.retryTimeout=setTimeout(function(){i.retry.moveToNextAttempt(),i.xhr=C,_createXHR(i)},i.retry.getCurrentFuzzedDelay())}function loadFunc(){if(!w){var a;clearTimeout(L),clearTimeout(i.retryTimeout),a=i.useXDR&&void 0===C.status?200:1223===C.status?204:C.status;var s=Y,o=null;if(0!==a?(s={body:getBody(),statusCode:a,method:U,headers:{},url:B,rawRequest:C},C.getAllResponseHeaders&&(s.headers=_(C.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),i.requestType&&createXHR.responseInterceptorsStorage.getIsEnabled()){var x={headers:s.headers||{},body:s.body,responseUrl:C.responseURL,responseType:C.responseType},j=createXHR.responseInterceptorsStorage.execute(i.requestType,x);s.body=j.body,s.headers=j.headers}return u(o,s,s.body)}}__name(readystatechange,"readystatechange"),__name(getBody,"getBody"),__name(errorFunc,"errorFunc"),__name(loadFunc,"loadFunc");var x,w,C=i.xhr||null;C||(C=i.cors||i.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var L,B=C.url=i.uri||i.url,U=C.method=i.method||"GET",j=i.body||i.data,V=C.headers=i.headers||{},z=!!i.sync,$=!1,Y={body:void 0,headers:{},statusCode:0,method:U,url:B,rawRequest:C};if("json"in i&&!1!==i.json&&($=!0,V.accept||V.Accept||(V.Accept="application/json"),"GET"!==U&&"HEAD"!==U&&(V["content-type"]||V["Content-Type"]||(V["Content-Type"]="application/json"),j=JSON.stringify(!0===i.json?j:i.json))),C.onreadystatechange=readystatechange,C.onload=loadFunc,C.onerror=errorFunc,C.onprogress=function(){},C.onabort=function(){w=!0,clearTimeout(i.retryTimeout)},C.ontimeout=errorFunc,C.open(U,B,!z,i.username,i.password),z||(C.withCredentials=!!i.withCredentials),!z&&i.timeout>0&&(L=setTimeout(function(){if(!w){w=!0,C.abort("timeout");var i=new Error("XMLHttpRequest timeout");i.code="ETIMEDOUT",errorFunc(i)}},i.timeout)),C.setRequestHeader)for(x in V)V.hasOwnProperty(x)&&C.setRequestHeader(x,V[x]);else if(i.headers&&!isEmpty(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(C.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(C),C.send(j||null),C}function getXml(i){try{if("document"===i.responseType)return i.responseXML;var a=i.responseXML&&"parsererror"===i.responseXML.documentElement.nodeName;if(""===i.responseType&&!a)return i.responseXML}catch(s){}return null}function noop2(){}return Nn.exports=createXHR,Nn.exports.default=createXHR,createXHR.XMLHttpRequest=i.XMLHttpRequest||noop2,createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:i.XDomainRequest,forEachArray(["get","put","post","patch","head","delete"],function(i){createXHR["delete"===i?"del":i]=function(a,s,o){return(s=initParams(a,s,o)).method=i.toUpperCase(),_createXHR(s)}}),__name(forEachArray,"forEachArray"),__name(isEmpty,"isEmpty"),__name(initParams,"initParams"),__name(createXHR,"createXHR"),__name(_createXHR,"_createXHR"),__name(getXml,"getXml"),__name(noop2,"noop"),Nn.exports}__name(require_extends,"require_extends"),__name(requireIsFunction,"requireIsFunction"),__name(requireInterceptors,"requireInterceptors"),__name(requireRetry,"requireRetry"),__name(requireHttpHandler$1,"requireHttpHandler$1"),__name(requireLib$2,"requireLib$2");const Fn=/* @__PURE__ */getDefaultExportFromCjs(requireLib$2());var Un,jn,Vn,zn,Hn,$n,Gn,Wn={exports:{}};function requireVtt(){if(jn)return Un;jn=1;var i=requireDocument(),a=Object.create||/* @__PURE__ */function(){function F(){}return __name(F,"F"),function(i){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return F.prototype=i,new F}}();function ParsingError(i,a){this.name="ParsingError",this.code=i.code,this.message=a||i.message}function parseTimeStamp(i){function computeSeconds(i,a,s,o){return 3600*(0|i)+60*(0|a)+(0|s)+(0|o)/1e3}__name(computeSeconds,"computeSeconds");var a=i.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return a?a[3]?computeSeconds(a[1],a[2],a[3].replace(":",""),a[4]):a[1]>59?computeSeconds(a[1],a[2],0,a[4]):computeSeconds(0,a[1],a[2],a[4]):null}function Settings(){this.values=a(null)}function parseOptions(i,a,s,o){var u=o?i.split(o):[i];for(var _ in u)if("string"==typeof u[_]){var x=u[_].split(s);if(2===x.length)a(x[0].trim(),x[1].trim())}}function parseCue(i,a,s){var o=i;function consumeTimeStamp(){var a=parseTimeStamp(i);if(null===a)throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+o);return i=i.replace(/^[^\sa-zA-Z-]+/,""),a}function consumeCueSettings(i,a){var o=new Settings;parseOptions(i,function(i,a){switch(i){case"region":for(var u=s.length-1;u>=0;u--)if(s[u].id===a){o.set(i,s[u].region);break}break;case"vertical":o.alt(i,a,["rl","lr"]);break;case"line":var _=a.split(","),x=_[0];o.integer(i,x),o.percent(i,x)&&o.set("snapToLines",!1),o.alt(i,x,["auto"]),2===_.length&&o.alt("lineAlign",_[1],["start","center","end"]);break;case"position":_=a.split(","),o.percent(i,_[0]),2===_.length&&o.alt("positionAlign",_[1],["start","center","end"]);break;case"size":o.percent(i,a);break;case"align":o.alt(i,a,["start","center","end","left","right"])}},/:/,/\s/),a.region=o.get("region",null),a.vertical=o.get("vertical","");try{a.line=o.get("line","auto")}catch(u){}a.lineAlign=o.get("lineAlign","start"),a.snapToLines=o.get("snapToLines",!0),a.size=o.get("size",100);try{a.align=o.get("align","center")}catch(u){a.align=o.get("align","middle")}try{a.position=o.get("position","auto")}catch(u){a.position=o.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},a.align)}a.positionAlign=o.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},a.align)}function skipWhitespace(){i=i.replace(/^\s+/,"")}if(__name(consumeTimeStamp,"consumeTimeStamp"),__name(consumeCueSettings,"consumeCueSettings"),__name(skipWhitespace,"skipWhitespace"),skipWhitespace(),a.startTime=consumeTimeStamp(),skipWhitespace(),"--\x3e"!==i.substr(0,3))throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);i=i.substr(3),skipWhitespace(),a.endTime=consumeTimeStamp(),skipWhitespace(),consumeCueSettings(i,a)}__name(ParsingError,"ParsingError"),ParsingError.prototype=a(Error.prototype),ParsingError.prototype.constructor=ParsingError,ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},__name(parseTimeStamp,"parseTimeStamp"),__name(Settings,"Settings"),Settings.prototype={set:/* @__PURE__ */__name(function(i,a){this.get(i)||""===a||(this.values[i]=a)},"set"),get:/* @__PURE__ */__name(function(i,a,s){return s?this.has(i)?this.values[i]:a[s]:this.has(i)?this.values[i]:a},"get"),has:/* @__PURE__ */__name(function(i){return i in this.values},"has"),alt:/* @__PURE__ */__name(function(i,a,s){for(var o=0;o<s.length;++o)if(a===s[o]){this.set(i,a);break}},"alt"),integer:/* @__PURE__ */__name(function(i,a){/^-?\d+$/.test(a)&&this.set(i,parseInt(a,10))},"integer"),percent:/* @__PURE__ */__name(function(i,a){return!!(a.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(a=parseFloat(a))>=0&&a<=100)&&(this.set(i,a),!0)},"percent")},__name(parseOptions,"parseOptions"),__name(parseCue,"parseCue");var s=i.createElement&&i.createElement("textarea"),o={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},_={v:"title",lang:"lang"},x={rt:"ruby"};function parseContent(i,a){function nextToken(){if(!a)return null;function consume(i){return a=a.substr(i.length),i}__name(consume,"consume");var i=a.match(/^([^<]*)(<[^>]*>?)?/);return consume(i[1]?i[1]:i[2])}function unescape2(i){return s.innerHTML=i,i=s.textContent,s.textContent="",i}function shouldAdd(i,a){return!x[a.localName]||x[a.localName]===i.localName}function createElement(a,s){var u=o[a];if(!u)return null;var x=i.document.createElement(u),w=_[a];return w&&s&&(x[w]=s.trim()),x}__name(nextToken,"nextToken"),__name(unescape2,"unescape"),__name(shouldAdd,"shouldAdd"),__name(createElement,"createElement");for(var w,C=i.document.createElement("div"),L=C,B=[];null!==(w=nextToken());)if("<"!==w[0])L.appendChild(i.document.createTextNode(unescape2(w)));else{if("/"===w[1]){B.length&&B[B.length-1]===w.substr(2).replace(">","")&&(B.pop(),L=L.parentNode);continue}var U,j=parseTimeStamp(w.substr(1,w.length-2));if(j){U=i.document.createProcessingInstruction("timestamp",j),L.appendChild(U);continue}var V=w.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!V)continue;if(!(U=createElement(V[1],V[3])))continue;if(!shouldAdd(L,U))continue;if(V[2]){var z=V[2].split(".");z.forEach(function(i){var a=/^bg_/.test(i),s=a?i.slice(3):i;if(u.hasOwnProperty(s)){var o=a?"background-color":"color",_=u[s];U.style[o]=_}}),U.className=z.join(" ")}B.push(V[1]),L.appendChild(U),L=U}return C}__name(parseContent,"parseContent");var w=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(i){for(var a=0;a<w.length;a++){var s=w[a];if(i>=s[0]&&i<=s[1])return!0}return!1}function determineBidi(i){var a=[],s="";if(!i||!i.childNodes)return"ltr";function pushNodes(i,a){for(var s=a.childNodes.length-1;s>=0;s--)i.push(a.childNodes[s])}function nextTextNode(i){if(!i||!i.length)return null;var a=i.pop(),s=a.textContent||a.innerText;if(s){var o=s.match(/^.*(\n|\r)/);return o?(i.length=0,o[0]):s}return"ruby"===a.tagName?nextTextNode(i):a.childNodes?(pushNodes(i,a),nextTextNode(i)):void 0}for(__name(pushNodes,"pushNodes"),__name(nextTextNode,"nextTextNode"),pushNodes(a,i);s=nextTextNode(a);)for(var o=0;o<s.length;o++)if(isStrongRTLChar(s.charCodeAt(o)))return"rtl";return"ltr"}function computeLinePos(i){if("number"==typeof i.line&&(i.snapToLines||i.line>=0&&i.line<=100))return i.line;if(!i.track||!i.track.textTrackList||!i.track.textTrackList.mediaElement)return-1;for(var a=i.track,s=a.textTrackList,o=0,u=0;u<s.length&&s[u]!==a;u++)"showing"===s[u].mode&&o++;return-1*++o}function StyleBox(){}function CueStyleBox(i,a,s){StyleBox.call(this),this.cue=a,this.cueDiv=parseContent(i,a.text);var o={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===a.vertical?"horizontal-tb":"lr"===a.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(o,this.cueDiv),this.div=i.document.createElement("div"),o={direction:determineBidi(this.cueDiv),writingMode:""===a.vertical?"horizontal-tb":"lr"===a.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===a.align?"center":a.align,font:s.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(o),this.div.appendChild(this.cueDiv);var u=0;switch(a.positionAlign){case"start":case"line-left":u=a.position;break;case"center":u=a.position-a.size/2;break;case"end":case"line-right":u=a.position-a.size}""===a.vertical?this.applyStyles({left:this.formatStyle(u,"%"),width:this.formatStyle(a.size,"%")}):this.applyStyles({top:this.formatStyle(u,"%"),height:this.formatStyle(a.size,"%")}),this.move=function(i){this.applyStyles({top:this.formatStyle(i.top,"px"),bottom:this.formatStyle(i.bottom,"px"),left:this.formatStyle(i.left,"px"),right:this.formatStyle(i.right,"px"),height:this.formatStyle(i.height,"px"),width:this.formatStyle(i.width,"px")})}}function BoxPosition(i){var a,s,o,u;if(i.div){s=i.div.offsetHeight,o=i.div.offsetWidth,u=i.div.offsetTop;var _=(_=i.div.childNodes)&&(_=_[0])&&_.getClientRects&&_.getClientRects();i=i.div.getBoundingClientRect(),a=_?Math.max(_[0]&&_[0].height||0,i.height/_.length):0}this.left=i.left,this.right=i.right,this.top=i.top||u,this.height=i.height||s,this.bottom=i.bottom||u+(i.height||s),this.width=i.width||o,this.lineHeight=void 0!==a?a:i.lineHeight}function moveBoxToLinePosition(i,a,s,o){function findBestPosition(i,a){for(var u,_=new BoxPosition(i),x=1,w=0;w<a.length;w++){for(;i.overlapsOppositeAxis(s,a[w])||i.within(s)&&i.overlapsAny(o);)i.move(a[w]);if(i.within(s))return i;var C=i.intersectPercentage(s);x>C&&(u=new BoxPosition(i),x=C),i=new BoxPosition(_)}return u||_}__name(findBestPosition,"findBestPosition");var u=new BoxPosition(a),_=a.cue,x=computeLinePos(_),w=[];if(_.snapToLines){var C;switch(_.vertical){case"":w=["+y","-y"],C="height";break;case"rl":w=["+x","-x"],C="width";break;case"lr":w=["-x","+x"],C="width"}var L=u.lineHeight,B=L*Math.round(x),U=s[C]+L,j=w[0];Math.abs(B)>U&&(B=B<0?-1:1,B*=Math.ceil(U/L)*L),x<0&&(B+=""===_.vertical?s.height:s.width,w=w.reverse()),u.move(j,B)}else{var V=u.lineHeight/s.height*100;switch(_.lineAlign){case"center":x-=V/2;break;case"end":x-=V}switch(_.vertical){case"":a.applyStyles({top:a.formatStyle(x,"%")});break;case"rl":a.applyStyles({left:a.formatStyle(x,"%")});break;case"lr":a.applyStyles({right:a.formatStyle(x,"%")})}w=["+y","-x","+x","-y"],u=new BoxPosition(a)}var z=findBestPosition(u,w);a.move(z.toCSSCompatValues(s))}function WebVTT2(){}__name(isStrongRTLChar,"isStrongRTLChar"),__name(determineBidi,"determineBidi"),__name(computeLinePos,"computeLinePos"),__name(StyleBox,"StyleBox"),StyleBox.prototype.applyStyles=function(i,a){for(var s in a=a||this.div,i)i.hasOwnProperty(s)&&(a.style[s]=i[s])},StyleBox.prototype.formatStyle=function(i,a){return 0===i?0:i+a},__name(CueStyleBox,"CueStyleBox"),CueStyleBox.prototype=a(StyleBox.prototype),CueStyleBox.prototype.constructor=CueStyleBox,__name(BoxPosition,"BoxPosition"),BoxPosition.prototype.move=function(i,a){switch(a=void 0!==a?a:this.lineHeight,i){case"+x":this.left+=a,this.right+=a;break;case"-x":this.left-=a,this.right-=a;break;case"+y":this.top+=a,this.bottom+=a;break;case"-y":this.top-=a,this.bottom-=a}},BoxPosition.prototype.overlaps=function(i){return this.left<i.right&&this.right>i.left&&this.top<i.bottom&&this.bottom>i.top},BoxPosition.prototype.overlapsAny=function(i){for(var a=0;a<i.length;a++)if(this.overlaps(i[a]))return!0;return!1},BoxPosition.prototype.within=function(i){return this.top>=i.top&&this.bottom<=i.bottom&&this.left>=i.left&&this.right<=i.right},BoxPosition.prototype.overlapsOppositeAxis=function(i,a){switch(a){case"+x":return this.left<i.left;case"-x":return this.right>i.right;case"+y":return this.top<i.top;case"-y":return this.bottom>i.bottom}},BoxPosition.prototype.intersectPercentage=function(i){return Math.max(0,Math.min(this.right,i.right)-Math.max(this.left,i.left))*Math.max(0,Math.min(this.bottom,i.bottom)-Math.max(this.top,i.top))/(this.height*this.width)},BoxPosition.prototype.toCSSCompatValues=function(i){return{top:this.top-i.top,bottom:i.bottom-this.bottom,left:this.left-i.left,right:i.right-this.right,height:this.height,width:this.width}},BoxPosition.getSimpleBoxPosition=function(i){var a=i.div?i.div.offsetHeight:i.tagName?i.offsetHeight:0,s=i.div?i.div.offsetWidth:i.tagName?i.offsetWidth:0,o=i.div?i.div.offsetTop:i.tagName?i.offsetTop:0;return{left:(i=i.div?i.div.getBoundingClientRect():i.tagName?i.getBoundingClientRect():i).left,right:i.right,top:i.top||o,height:i.height||a,bottom:i.bottom||o+(i.height||a),width:i.width||s}},__name(moveBoxToLinePosition,"moveBoxToLinePosition"),__name(WebVTT2,"WebVTT"),WebVTT2.StringDecoder=function(){return{decode:/* @__PURE__ */__name(function(i){if(!i)return"";if("string"!=typeof i)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(i))},"decode")}},WebVTT2.convertCueToDOMTree=function(i,a){return i&&a?parseContent(i,a):null};return WebVTT2.processCues=function(i,a,s){if(!i||!a||!s)return null;for(;s.firstChild;)s.removeChild(s.firstChild);var o=i.document.createElement("div");function shouldCompute(i){for(var a=0;a<i.length;a++)if(i[a].hasBeenReset||!i[a].displayState)return!0;return!1}if(o.style.position="absolute",o.style.left="0",o.style.right="0",o.style.top="0",o.style.bottom="0",o.style.margin="1.5%",s.appendChild(o),__name(shouldCompute,"shouldCompute"),shouldCompute(a)){var u=[],_=BoxPosition.getSimpleBoxPosition(o),x={font:Math.round(.05*_.height*100)/100+"px sans-serif"};!function(){for(var s,w,C=0;C<a.length;C++)w=a[C],s=new CueStyleBox(i,w,x),o.appendChild(s.div),moveBoxToLinePosition(0,s,_,u),w.displayState=s.div,u.push(BoxPosition.getSimpleBoxPosition(s))}()}else for(var w=0;w<a.length;w++)o.appendChild(a[w].displayState)},WebVTT2.Parser=function(i,a,s){s||(s=a,a={}),a||(a={}),this.window=i,this.vttjs=a,this.state="INITIAL",this.buffer="",this.decoder=s||new TextDecoder("utf8"),this.regionList=[]},WebVTT2.Parser.prototype={reportOrThrowError:/* @__PURE__ */__name(function(i){if(!(i instanceof ParsingError))throw i;this.onparsingerror&&this.onparsingerror(i)},"reportOrThrowError"),parse:/* @__PURE__ */__name(function(i){var a=this;function collectNextLine(){for(var i=a.buffer,s=0;s<i.length&&"\r"!==i[s]&&"\n"!==i[s];)++s;var o=i.substr(0,s);return"\r"===i[s]&&++s,"\n"===i[s]&&++s,a.buffer=i.substr(s),o}function parseRegion(i){var s=new Settings;if(parseOptions(i,function(i,a){switch(i){case"id":s.set(i,a);break;case"width":s.percent(i,a);break;case"lines":s.integer(i,a);break;case"regionanchor":case"viewportanchor":var o=a.split(",");if(2!==o.length)break;var u=new Settings;if(u.percent("x",o[0]),u.percent("y",o[1]),!u.has("x")||!u.has("y"))break;s.set(i+"X",u.get("x")),s.set(i+"Y",u.get("y"));break;case"scroll":s.alt(i,a,["up"])}},/=/,/\s/),s.has("id")){var o=new(a.vttjs.VTTRegion||a.window.VTTRegion);o.width=s.get("width",100),o.lines=s.get("lines",3),o.regionAnchorX=s.get("regionanchorX",0),o.regionAnchorY=s.get("regionanchorY",100),o.viewportAnchorX=s.get("viewportanchorX",0),o.viewportAnchorY=s.get("viewportanchorY",100),o.scroll=s.get("scroll",""),a.onregion&&a.onregion(o),a.regionList.push({id:s.get("id"),region:o})}}function parseTimestampMap(i){var s=new Settings;parseOptions(i,function(i,a){switch(i){case"MPEGT":s.integer(i+"S",a);break;case"LOCA":s.set(i+"L",parseTimeStamp(a))}},/[^\d]:/,/,/),a.ontimestampmap&&a.ontimestampmap({MPEGTS:s.get("MPEGTS"),LOCAL:s.get("LOCAL")})}function parseHeader(i){i.match(/X-TIMESTAMP-MAP/)?parseOptions(i,function(i,a){if("X-TIMESTAMP-MAP"===i)parseTimestampMap(a)},/=/):parseOptions(i,function(i,a){if("Region"===i)parseRegion(a)},/:/)}i&&(a.buffer+=a.decoder.decode(i,{stream:!0})),__name(collectNextLine,"collectNextLine"),__name(parseRegion,"parseRegion"),__name(parseTimestampMap,"parseTimestampMap"),__name(parseHeader,"parseHeader");try{var s;if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;var o=(s=collectNextLine()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new ParsingError(ParsingError.Errors.BadSignature);a.state="HEADER"}for(var u=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(u?u=!1:s=collectNextLine(),a.state){case"HEADER":/:/.test(s)?parseHeader(s):s||(a.state="ID");continue;case"NOTE":s||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){a.state="NOTE";break}if(!s)continue;a.cue=new(a.vttjs.VTTCue||a.window.VTTCue)(0,0,"");try{a.cue.align="center"}catch(x){a.cue.align="middle"}if(a.state="CUE",-1===s.indexOf("--\x3e")){a.cue.id=s;continue}case"CUE":try{parseCue(s,a.cue,a.regionList)}catch(x){a.reportOrThrowError(x),a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var _=-1!==s.indexOf("--\x3e");if(!s||_&&(u=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=s.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":s||(a.state="ID");continue}}}catch(x){a.reportOrThrowError(x),"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},"parse"),flush:/* @__PURE__ */__name(function(){var i=this;try{if(i.buffer+=i.decoder.decode(),(i.cue||"HEADER"===i.state)&&(i.buffer+="\n\n",i.parse()),"INITIAL"===i.state)throw new ParsingError(ParsingError.Errors.BadSignature)}catch(a){i.reportOrThrowError(a)}return i.onflush&&i.onflush(),this},"flush")},Un=WebVTT2}function requireVttcue(){if(zn)return Vn;zn=1;var i={"":1,lr:1,rl:1},a={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function findDirectionSetting(a){return"string"==typeof a&&(!!i[a.toLowerCase()]&&a.toLowerCase())}function findAlignSetting(i){return"string"==typeof i&&(!!a[i.toLowerCase()]&&i.toLowerCase())}function VTTCue(i,a,s){this.hasBeenReset=!1;var o="",u=!1,_=i,x=a,w=s,C=null,L="",B=!0,U="auto",j="start",V="auto",z="auto",$=100,Y="center";Object.defineProperties(this,{id:{enumerable:!0,get:/* @__PURE__ */__name(function(){return o},"get"),set:/* @__PURE__ */__name(function(i){o=""+i},"set")},pauseOnExit:{enumerable:!0,get:/* @__PURE__ */__name(function(){return u},"get"),set:/* @__PURE__ */__name(function(i){u=!!i},"set")},startTime:{enumerable:!0,get:/* @__PURE__ */__name(function(){return _},"get"),set:/* @__PURE__ */__name(function(i){if("number"!=typeof i)throw new TypeError("Start time must be set to a number.");_=i,this.hasBeenReset=!0},"set")},endTime:{enumerable:!0,get:/* @__PURE__ */__name(function(){return x},"get"),set:/* @__PURE__ */__name(function(i){if("number"!=typeof i)throw new TypeError("End time must be set to a number.");x=i,this.hasBeenReset=!0},"set")},text:{enumerable:!0,get:/* @__PURE__ */__name(function(){return w},"get"),set:/* @__PURE__ */__name(function(i){w=""+i,this.hasBeenReset=!0},"set")},region:{enumerable:!0,get:/* @__PURE__ */__name(function(){return C},"get"),set:/* @__PURE__ */__name(function(i){C=i,this.hasBeenReset=!0},"set")},vertical:{enumerable:!0,get:/* @__PURE__ */__name(function(){return L},"get"),set:/* @__PURE__ */__name(function(i){var a=findDirectionSetting(i);if(!1===a)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");L=a,this.hasBeenReset=!0},"set")},snapToLines:{enumerable:!0,get:/* @__PURE__ */__name(function(){return B},"get"),set:/* @__PURE__ */__name(function(i){B=!!i,this.hasBeenReset=!0},"set")},line:{enumerable:!0,get:/* @__PURE__ */__name(function(){return U},"get"),set:/* @__PURE__ */__name(function(i){if("number"!=typeof i&&"auto"!==i)throw new SyntaxError("Line: an invalid number or illegal string was specified.");U=i,this.hasBeenReset=!0},"set")},lineAlign:{enumerable:!0,get:/* @__PURE__ */__name(function(){return j},"get"),set:/* @__PURE__ */__name(function(i){var a=findAlignSetting(i);a?(j=a,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")},"set")},position:{enumerable:!0,get:/* @__PURE__ */__name(function(){return V},"get"),set:/* @__PURE__ */__name(function(i){if(i<0||i>100)throw new Error("Position must be between 0 and 100.");V=i,this.hasBeenReset=!0},"set")},positionAlign:{enumerable:!0,get:/* @__PURE__ */__name(function(){return z},"get"),set:/* @__PURE__ */__name(function(i){var a=findAlignSetting(i);a?(z=a,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")},"set")},size:{enumerable:!0,get:/* @__PURE__ */__name(function(){return $},"get"),set:/* @__PURE__ */__name(function(i){if(i<0||i>100)throw new Error("Size must be between 0 and 100.");$=i,this.hasBeenReset=!0},"set")},align:{enumerable:!0,get:/* @__PURE__ */__name(function(){return Y},"get"),set:/* @__PURE__ */__name(function(i){var a=findAlignSetting(i);if(!a)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");Y=a,this.hasBeenReset=!0},"set")}}),this.displayState=void 0}return __name(findDirectionSetting,"findDirectionSetting"),__name(findAlignSetting,"findAlignSetting"),__name(VTTCue,"VTTCue"),VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Vn=VTTCue}function requireVttregion(){if($n)return Hn;$n=1;var i={"":!0,up:!0};function findScrollSetting(a){return"string"==typeof a&&(!!i[a.toLowerCase()]&&a.toLowerCase())}function isValidPercentValue(i){return"number"==typeof i&&i>=0&&i<=100}function VTTRegion(){var i=100,a=3,s=0,o=100,u=0,_=100,x="";Object.defineProperties(this,{width:{enumerable:!0,get:/* @__PURE__ */__name(function(){return i},"get"),set:/* @__PURE__ */__name(function(a){if(!isValidPercentValue(a))throw new Error("Width must be between 0 and 100.");i=a},"set")},lines:{enumerable:!0,get:/* @__PURE__ */__name(function(){return a},"get"),set:/* @__PURE__ */__name(function(i){if("number"!=typeof i)throw new TypeError("Lines must be set to a number.");a=i},"set")},regionAnchorY:{enumerable:!0,get:/* @__PURE__ */__name(function(){return o},"get"),set:/* @__PURE__ */__name(function(i){if(!isValidPercentValue(i))throw new Error("RegionAnchorX must be between 0 and 100.");o=i},"set")},regionAnchorX:{enumerable:!0,get:/* @__PURE__ */__name(function(){return s},"get"),set:/* @__PURE__ */__name(function(i){if(!isValidPercentValue(i))throw new Error("RegionAnchorY must be between 0 and 100.");s=i},"set")},viewportAnchorY:{enumerable:!0,get:/* @__PURE__ */__name(function(){return _},"get"),set:/* @__PURE__ */__name(function(i){if(!isValidPercentValue(i))throw new Error("ViewportAnchorY must be between 0 and 100.");_=i},"set")},viewportAnchorX:{enumerable:!0,get:/* @__PURE__ */__name(function(){return u},"get"),set:/* @__PURE__ */__name(function(i){if(!isValidPercentValue(i))throw new Error("ViewportAnchorX must be between 0 and 100.");u=i},"set")},scroll:{enumerable:!0,get:/* @__PURE__ */__name(function(){return x},"get"),set:/* @__PURE__ */__name(function(i){var a=findScrollSetting(i);!1===a?console.warn("Scroll: an invalid or illegal string was specified."):x=a},"set")}})}return __name(findScrollSetting,"findScrollSetting"),__name(isValidPercentValue,"isValidPercentValue"),__name(VTTRegion,"VTTRegion"),Hn=VTTRegion}function requireBrowserIndex(){if(Gn)return Wn.exports;Gn=1;var i=requireWindow(),a=Wn.exports={WebVTT:requireVtt(),VTTCue:requireVttcue(),VTTRegion:requireVttregion()};i.vttjs=a,i.WebVTT=a.WebVTT;var s=a.VTTCue,o=a.VTTRegion,u=i.VTTCue,_=i.VTTRegion;return a.shim=function(){i.VTTCue=s,i.VTTRegion=o},a.restore=function(){i.VTTCue=u,i.VTTRegion=_},i.VTTCue||a.shim(),Wn.exports}__name(requireVtt,"requireVtt"),__name(requireVttcue,"requireVttcue"),__name(requireVttregion,"requireVttregion"),__name(requireBrowserIndex,"requireBrowserIndex");const qn=/* @__PURE__ */getDefaultExportFromCjs(requireBrowserIndex());function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var o in s)({}).hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},_extends.apply(null,arguments)}__name(_extends,"_extends");var Xn="https://example.com",Qn=/* @__PURE__ */__name(function resolveUrl2(i,a){if(/^[a-z]+:/i.test(a))return a;/^data:/.test(i)&&(i=Tn.location&&Tn.location.href||"");var s=/^\/\//.test(i),o=!Tn.location&&!/\/\//i.test(i);i=new Tn.URL(i,Tn.location||Xn);var u=new URL(a,i);return o?u.href.slice(19):s?u.href.slice(u.protocol.length):u.href},"resolveUrl"),Kn=/* @__PURE__ */function(){function Stream2(){this.listeners={}}__name(Stream2,"Stream");var i=Stream2.prototype;return i.on=/* @__PURE__ */__name(function on2(i,a){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(a)},"on"),i.off=/* @__PURE__ */__name(function off2(i,a){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(a);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},"off"),i.trigger=/* @__PURE__ */__name(function trigger2(i){var a=this.listeners[i];if(a)if(2===arguments.length)for(var s=a.length,o=0;o<s;++o)a[o].call(this,arguments[1]);else for(var u=Array.prototype.slice.call(arguments,1),_=a.length,x=0;x<_;++x)a[x].apply(this,u)},"trigger"),i.dispose=/* @__PURE__ */__name(function dispose(){this.listeners={}},"dispose"),i.pipe=/* @__PURE__ */__name(function pipe(i){this.on("data",function(a){i.push(a)})},"pipe"),Stream2}(),Yn=/* @__PURE__ */__name(function atob2(i){return Tn.atob?Tn.atob(i):Buffer.from(i,"base64").toString("binary")},"atob");function decodeB64ToUint8Array$1(i){for(var a=Yn(i),s=new Uint8Array(a.length),o=0;o<a.length;o++)s[o]=a.charCodeAt(o);return s}__name(decodeB64ToUint8Array$1,"decodeB64ToUint8Array$1");let Jn=(__name(a=class extends Kn{constructor(){super(),this.buffer=""}push(i){let a;for(this.buffer+=i,a=this.buffer.indexOf("\n");a>-1;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)}},"LineStream"),a);const Zn=String.fromCharCode(9),_i=/* @__PURE__ */__name(function(i){const a=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),s={};return a[1]&&(s.length=parseInt(a[1],10)),a[2]&&(s.offset=parseInt(a[2],10)),s},"parseByterange$1"),Ei=/* @__PURE__ */__name(function(){return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')},"attributeSeparator$1"),Mi=/* @__PURE__ */__name(function(i){const a={};if(!i)return a;const s=i.split(Ei());let o,u=s.length;for(;u--;)""!==s[u]&&(o=/([^=]*)=(.*)/.exec(s[u]).slice(1),o[0]=o[0].replace(/^\s+|\s+$/g,""),o[1]=o[1].replace(/^\s+|\s+$/g,""),o[1]=o[1].replace(/^['"](.*)['"]$/g,"$1"),a[o[0]]=o[1]);return a},"parseAttributes$3"),Pi=/* @__PURE__ */__name(i=>{const a=i.split("x"),s={};return a[0]&&(s.width=parseInt(a[0],10)),a[1]&&(s.height=parseInt(a[1],10)),s},"parseResolution");let Ri=(s=class extends Kn{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(i){let a,s;if(0===(i=i.trim()).length)return;if("#"!==i[0])return void this.trigger("data",{type:"uri",uri:i});this.tagMappers.reduce((a,s)=>{const o=s(i);return o===i?a:a.concat([o])},[i]).forEach(i=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,i))return;if(0===i.indexOf("#EXT"))if(i=i.replace("\r",""),a=/^#EXTM3U/.exec(i),a)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(a=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(i),a)return s={type:"tag",tagType:"inf"},a[1]&&(s.duration=parseFloat(a[1])),a[2]&&(s.title=a[2]),void this.trigger("data",s);if(a=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(i),a)return s={type:"tag",tagType:"targetduration"},a[1]&&(s.duration=parseInt(a[1],10)),void this.trigger("data",s);if(a=/^#EXT-X-VERSION:([0-9.]*)?/.exec(i),a)return s={type:"tag",tagType:"version"},a[1]&&(s.version=parseInt(a[1],10)),void this.trigger("data",s);if(a=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(i),a)return s={type:"tag",tagType:"media-sequence"},a[1]&&(s.number=parseInt(a[1],10)),void this.trigger("data",s);if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(i),a)return s={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(s.number=parseInt(a[1],10)),void this.trigger("data",s);if(a=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(i),a)return s={type:"tag",tagType:"playlist-type"},a[1]&&(s.playlistType=a[1]),void this.trigger("data",s);if(a=/^#EXT-X-BYTERANGE:(.*)?$/.exec(i),a)return s=_extends(_i(a[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",s);if(a=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(i),a)return s={type:"tag",tagType:"allow-cache"},a[1]&&(s.allowed=!/NO/.test(a[1])),void this.trigger("data",s);if(a=/^#EXT-X-MAP:(.*)$/.exec(i),a){if(s={type:"tag",tagType:"map"},a[1]){const i=Mi(a[1]);i.URI&&(s.uri=i.URI),i.BYTERANGE&&(s.byterange=_i(i.BYTERANGE))}this.trigger("data",s)}else{if(a=/^#EXT-X-STREAM-INF:(.*)$/.exec(i),a)return s={type:"tag",tagType:"stream-inf"},a[1]&&(s.attributes=Mi(a[1]),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=Pi(s.attributes.RESOLUTION)),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),s.attributes["PROGRAM-ID"]&&(s.attributes["PROGRAM-ID"]=parseInt(s.attributes["PROGRAM-ID"],10))),void this.trigger("data",s);if(a=/^#EXT-X-MEDIA:(.*)$/.exec(i),a)return s={type:"tag",tagType:"media"},a[1]&&(s.attributes=Mi(a[1])),void this.trigger("data",s);if(a=/^#EXT-X-ENDLIST/.exec(i),a)this.trigger("data",{type:"tag",tagType:"endlist"});else if(a=/^#EXT-X-DISCONTINUITY/.exec(i),a)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(a=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(i),a)return s={type:"tag",tagType:"program-date-time"},a[1]&&(s.dateTimeString=a[1],s.dateTimeObject=new Date(a[1])),void this.trigger("data",s);if(a=/^#EXT-X-KEY:(.*)$/.exec(i),a)return s={type:"tag",tagType:"key"},a[1]&&(s.attributes=Mi(a[1]),s.attributes.IV&&("0x"===s.attributes.IV.substring(0,2).toLowerCase()&&(s.attributes.IV=s.attributes.IV.substring(2)),s.attributes.IV=s.attributes.IV.match(/.{8}/g),s.attributes.IV[0]=parseInt(s.attributes.IV[0],16),s.attributes.IV[1]=parseInt(s.attributes.IV[1],16),s.attributes.IV[2]=parseInt(s.attributes.IV[2],16),s.attributes.IV[3]=parseInt(s.attributes.IV[3],16),s.attributes.IV=new Uint32Array(s.attributes.IV))),void this.trigger("data",s);if(a=/^#EXT-X-START:(.*)$/.exec(i),a)return s={type:"tag",tagType:"start"},a[1]&&(s.attributes=Mi(a[1]),s.attributes["TIME-OFFSET"]=parseFloat(s.attributes["TIME-OFFSET"]),s.attributes.PRECISE=/YES/.test(s.attributes.PRECISE)),void this.trigger("data",s);if(a=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(i),a)return s={type:"tag",tagType:"cue-out-cont"},a[1]?s.data=a[1]:s.data="",void this.trigger("data",s);if(a=/^#EXT-X-CUE-OUT:(.*)?$/.exec(i),a)return s={type:"tag",tagType:"cue-out"},a[1]?s.data=a[1]:s.data="",void this.trigger("data",s);if(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(i),a)return s={type:"tag",tagType:"cue-in"},a[1]?s.data=a[1]:s.data="",void this.trigger("data",s);if(a=/^#EXT-X-SKIP:(.*)$/.exec(i),a&&a[1])return s={type:"tag",tagType:"skip"},s.attributes=Mi(a[1]),s.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(s.attributes["SKIPPED-SEGMENTS"]=parseInt(s.attributes["SKIPPED-SEGMENTS"],10)),s.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(s.attributes["RECENTLY-REMOVED-DATERANGES"]=s.attributes["RECENTLY-REMOVED-DATERANGES"].split(Zn)),void this.trigger("data",s);if(a=/^#EXT-X-PART:(.*)$/.exec(i),a&&a[1])return s={type:"tag",tagType:"part"},s.attributes=Mi(a[1]),["DURATION"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=parseFloat(s.attributes[i]))}),["INDEPENDENT","GAP"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=/YES/.test(s.attributes[i]))}),s.attributes.hasOwnProperty("BYTERANGE")&&(s.attributes.byterange=_i(s.attributes.BYTERANGE)),void this.trigger("data",s);if(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(i),a&&a[1])return s={type:"tag",tagType:"server-control"},s.attributes=Mi(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=parseFloat(s.attributes[i]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=/YES/.test(s.attributes[i]))}),void this.trigger("data",s);if(a=/^#EXT-X-PART-INF:(.*)$/.exec(i),a&&a[1])return s={type:"tag",tagType:"part-inf"},s.attributes=Mi(a[1]),["PART-TARGET"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=parseFloat(s.attributes[i]))}),void this.trigger("data",s);if(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(i),a&&a[1])return s={type:"tag",tagType:"preload-hint"},s.attributes=Mi(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(i){if(s.attributes.hasOwnProperty(i)){s.attributes[i]=parseInt(s.attributes[i],10);const a="BYTERANGE-LENGTH"===i?"length":"offset";s.attributes.byterange=s.attributes.byterange||{},s.attributes.byterange[a]=s.attributes[i],delete s.attributes[i]}}),void this.trigger("data",s);if(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(i),a&&a[1])return s={type:"tag",tagType:"rendition-report"},s.attributes=Mi(a[1]),["LAST-MSN","LAST-PART"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=parseInt(s.attributes[i],10))}),void this.trigger("data",s);if(a=/^#EXT-X-DATERANGE:(.*)$/.exec(i),a&&a[1]){s={type:"tag",tagType:"daterange"},s.attributes=Mi(a[1]),["ID","CLASS"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=String(s.attributes[i]))}),["START-DATE","END-DATE"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=new Date(s.attributes[i]))}),["DURATION","PLANNED-DURATION"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=parseFloat(s.attributes[i]))}),["END-ON-NEXT"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=/YES/i.test(s.attributes[i]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=s.attributes[i].toString(16))});const i=/^X-([A-Z]+-)+[A-Z]+$/;for(const a in s.attributes){if(!i.test(a))continue;const o=/[0-9A-Fa-f]{6}/g.test(s.attributes[a]),u=/^\d+(\.\d+)?$/.test(s.attributes[a]);s.attributes[a]=o?s.attributes[a].toString(16):u?parseFloat(s.attributes[a]):String(s.attributes[a])}return void this.trigger("data",s)}if(a=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(i),a)this.trigger("data",{type:"tag",tagType:"independent-segments"});else if(a=/^#EXT-X-I-FRAMES-ONLY/.exec(i),a)this.trigger("data",{type:"tag",tagType:"i-frames-only"});else{if(a=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(i),a)return s={type:"tag",tagType:"content-steering"},s.attributes=Mi(a[1]),void this.trigger("data",s);if(a=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(i),a)return s={type:"tag",tagType:"i-frame-playlist"},s.attributes=Mi(a[1]),s.attributes.URI&&(s.uri=s.attributes.URI),s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes.RESOLUTION&&(s.attributes.RESOLUTION=Pi(s.attributes.RESOLUTION)),s.attributes["AVERAGE-BANDWIDTH"]&&(s.attributes["AVERAGE-BANDWIDTH"]=parseInt(s.attributes["AVERAGE-BANDWIDTH"],10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),void this.trigger("data",s);if(a=/^#EXT-X-DEFINE:(.*)$/.exec(i),a)return s={type:"tag",tagType:"define"},s.attributes=Mi(a[1]),void this.trigger("data",s);this.trigger("data",{type:"tag",data:i.slice(4)})}}}}else this.trigger("data",{type:"comment",text:i.slice(1)})})}addParser({expression:i,customType:a,dataParser:s,segment:o}){"function"!=typeof s&&(s=/* @__PURE__ */__name(i=>i,"dataParser")),this.customParsers.push(u=>{if(i.exec(u))return this.trigger("data",{type:"custom",data:s(u),customType:a,segment:o}),!0})}addTagMapper({expression:i,map:a}){const s=/* @__PURE__ */__name(s=>i.test(s)?a(s):s,"mapFn");this.tagMappers.push(s)}},__name(s,"ParseStream"),s);const Oi=/* @__PURE__ */__name(i=>i.toLowerCase().replace(/-(\w)/g,i=>i[1].toUpperCase()),"camelCase$1"),Wi=/* @__PURE__ */__name(function(i){const a={};return Object.keys(i).forEach(function(s){a[Oi(s)]=i[s]}),a},"camelCaseKeys$1"),er=/* @__PURE__ */__name(function(i){const{serverControl:a,targetDuration:s,partTargetDuration:o}=i;if(!a)return;const u="#EXT-X-SERVER-CONTROL",_="holdBack",x="partHoldBack",w=s&&3*s,C=o&&2*o;s&&!a.hasOwnProperty(_)&&(a[_]=w,this.trigger("info",{message:`${u} defaulting HOLD-BACK to targetDuration * 3 (${w}).`})),w&&a[_]<w&&(this.trigger("warn",{message:`${u} clamping HOLD-BACK (${a[_]}) to targetDuration * 3 (${w})`}),a[_]=w),o&&!a.hasOwnProperty(x)&&(a[x]=3*o,this.trigger("info",{message:`${u} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${a[x]}).`})),o&&a[x]<C&&(this.trigger("warn",{message:`${u} clamping PART-HOLD-BACK (${a[x]}) to partTargetDuration * 2 (${C}).`}),a[x]=C)},"setHoldBack$1");let tr=(__name(o=class extends Kn{constructor(i={}){super(),this.lineStream=new Jn,this.parseStream=new Ri,this.lineStream.pipe(this.parseStream),this.mainDefinitions=i.mainDefinitions||{},this.params=new URL(i.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const a=this,s=[];let o,u,_={},x=!1;const w=/* @__PURE__ */__name(function(){},"noop"),C={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let L=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let B=0,U=0;const j={};this.on("end",()=>{_.uri||!_.parts&&!_.preloadHints||(!_.map&&o&&(_.map=o),!_.key&&u&&(_.key=u),_.timeline||"number"!=typeof L||(_.timeline=L),this.manifest.preloadSegment=_)}),this.parseStream.on("data",function(i){let V,z;if(a.manifest.definitions)for(const s in a.manifest.definitions)if(i.uri&&(i.uri=i.uri.replace(`{$${s}}`,a.manifest.definitions[s])),i.attributes)for(const o in i.attributes)"string"==typeof i.attributes[o]&&(i.attributes[o]=i.attributes[o].replace(`{$${s}}`,a.manifest.definitions[s]));({tag(){({version(){i.version&&(this.manifest.version=i.version)},"allow-cache"(){this.manifest.allowCache=i.allowed,"allowed"in i||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const a={};"length"in i&&(_.byterange=a,a.length=i.length,"offset"in i||(i.offset=B)),"offset"in i&&(_.byterange=a,a.offset=i.offset),B=a.offset+a.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),i.title&&(_.title=i.title),i.duration>0&&(_.duration=i.duration),0===i.duration&&(_.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key(){if(i.attributes)if("NONE"!==i.attributes.METHOD)if(i.attributes.URI){if("com.apple.streamingkeydelivery"===i.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:i.attributes});if("com.microsoft.playready"===i.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:i.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===i.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(i.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===i.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==i.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):i.attributes.KEYID&&"0x"===i.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:i.attributes.KEYFORMAT,keyId:i.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array$1(i.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}i.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:i.attributes.METHOD||"AES-128",uri:i.attributes.URI},void 0!==i.attributes.IV&&(u.iv=i.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else u=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(i.number)?this.manifest.mediaSequence=i.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+i.number})},"discontinuity-sequence"(){isFinite(i.number)?(this.manifest.discontinuitySequence=i.number,L=i.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+i.number})},"playlist-type"(){/VOD|EVENT/.test(i.playlistType)?this.manifest.playlistType=i.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+i.playlist})},map(){o={},i.uri&&(o.uri=i.uri),i.byterange&&(o.byterange=i.byterange),u&&(o.key=u)},"stream-inf"(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||C,i.attributes?(_.attributes||(_.attributes={}),_extends(_.attributes,i.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||C,!(i.attributes&&i.attributes.TYPE&&i.attributes["GROUP-ID"]&&i.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const a=this.manifest.mediaGroups[i.attributes.TYPE];a[i.attributes["GROUP-ID"]]=a[i.attributes["GROUP-ID"]]||{},V=a[i.attributes["GROUP-ID"]],z={default:/yes/i.test(i.attributes.DEFAULT)},z.default?z.autoselect=!0:z.autoselect=/yes/i.test(i.attributes.AUTOSELECT),i.attributes.LANGUAGE&&(z.language=i.attributes.LANGUAGE),i.attributes.URI&&(z.uri=i.attributes.URI),i.attributes["INSTREAM-ID"]&&(z.instreamId=i.attributes["INSTREAM-ID"]),i.attributes.CHARACTERISTICS&&(z.characteristics=i.attributes.CHARACTERISTICS),i.attributes.FORCED&&(z.forced=/yes/i.test(i.attributes.FORCED)),V[i.attributes.NAME]=z},discontinuity(){L+=1,_.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=i.dateTimeString,this.manifest.dateTimeObject=i.dateTimeObject),_.dateTimeString=i.dateTimeString,_.dateTimeObject=i.dateTimeObject;const{lastProgramDateTime:a}=this;this.lastProgramDateTime=new Date(i.dateTimeString).getTime(),null===a&&this.manifest.segments.reduceRight((i,a)=>(a.programDateTime=i-1e3*a.duration,a.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(i.duration)||i.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+i.duration}):(this.manifest.targetDuration=i.duration,er.call(this,this.manifest))},start(){i.attributes&&!isNaN(i.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:i.attributes["TIME-OFFSET"],precise:i.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){_.cueOut=i.data},"cue-out-cont"(){_.cueOutCont=i.data},"cue-in"(){_.cueIn=i.data},skip(){this.manifest.skip=Wi(i.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",i.attributes,["SKIPPED-SEGMENTS"])},part(){x=!0;const a=this.manifest.segments.length,s=Wi(i.attributes);_.parts=_.parts||[],_.parts.push(s),s.byterange&&(s.byterange.hasOwnProperty("offset")||(s.byterange.offset=U),U=s.byterange.offset+s.byterange.length);const o=_.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${o} for segment #${a}`,i.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((i,a)=>{i.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${a} lacks required attribute(s): LAST-PART`})})},"server-control"(){const a=this.manifest.serverControl=Wi(i.attributes);a.hasOwnProperty("canBlockReload")||(a.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),er.call(this,this.manifest),a.canSkipDateranges&&!a.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const a=this.manifest.segments.length,s=Wi(i.attributes),o=s.type&&"PART"===s.type;_.preloadHints=_.preloadHints||[],_.preloadHints.push(s),s.byterange&&(s.byterange.hasOwnProperty("offset")||(s.byterange.offset=o?U:0,o&&(U=s.byterange.offset+s.byterange.length)));const u=_.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${u} for segment #${a}`,i.attributes,["TYPE","URI"]),s.type)for(let i=0;i<_.preloadHints.length-1;i++){const o=_.preloadHints[i];o.type&&(o.type===s.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${u} for segment #${a} has the same TYPE ${s.type} as preload hint #${i}`}))}},"rendition-report"(){const a=Wi(i.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(a);const s=this.manifest.renditionReports.length-1,o=["LAST-MSN","URI"];x&&o.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${s}`,i.attributes,o)},"part-inf"(){this.manifest.partInf=Wi(i.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",i.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),er.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Wi(i.attributes));const a=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${a}`,i.attributes,["ID","START-DATE"]);const s=this.manifest.dateRanges[a];s.endDate&&s.startDate&&new Date(s.endDate)<new Date(s.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),s.duration&&s.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),s.plannedDuration&&s.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const o=!!s.endOnNext;if(o&&!s.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),o&&(s.duration||s.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),s.duration&&s.endDate){const i=s.startDate.getTime()+1e3*s.duration;this.manifest.dateRanges[a].endDate=new Date(i)}if(j[s.id]){for(const a in j[s.id])if(s[a]&&JSON.stringify(j[s.id][a])!==JSON.stringify(s[a])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const i=this.manifest.dateRanges.findIndex(i=>i.id===s.id);this.manifest.dateRanges[i]=_extends(this.manifest.dateRanges[i],s),j[s.id]=_extends(j[s.id],s),this.manifest.dateRanges.pop()}else j[s.id]=s},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Wi(i.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",i.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const a=/* @__PURE__ */__name((i,a)=>{i in this.manifest.definitions?this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${i}`}):this.manifest.definitions[i]=a},"addDef");if("QUERYPARAM"in i.attributes){if("NAME"in i.attributes||"IMPORT"in i.attributes)return void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});const s=this.params.get(i.attributes.QUERYPARAM);return s?void a(i.attributes.QUERYPARAM,decodeURIComponent(s)):void this.trigger("error",{message:`EXT-X-DEFINE: No query param ${i.attributes.QUERYPARAM}`})}return"NAME"in i.attributes?"IMPORT"in i.attributes?void this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"}):"VALUE"in i.attributes&&"string"==typeof i.attributes.VALUE?void a(i.attributes.NAME,i.attributes.VALUE):void this.trigger("error",{message:`EXT-X-DEFINE: No value for ${i.attributes.NAME}`}):"IMPORT"in i.attributes?this.mainDefinitions[i.attributes.IMPORT]?void a(i.attributes.IMPORT,this.mainDefinitions[i.attributes.IMPORT]):void this.trigger("error",{message:`EXT-X-DEFINE: No value ${i.attributes.IMPORT} to import, or IMPORT used on main playlist`}):void this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:i.attributes,uri:i.uri,timeline:L}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",i.attributes,["BANDWIDTH","URI"])}}[i.tagType]||w).call(a)},uri(){_.uri=i.uri,s.push(_),this.manifest.targetDuration&&!("duration"in _)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),_.duration=this.manifest.targetDuration),u&&(_.key=u),_.timeline=L,o&&(_.map=o),U=0,null!==this.lastProgramDateTime&&(_.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*_.duration),_={}},comment(){},custom(){i.segment?(_.custom=_.custom||{},_.custom[i.customType]=i.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[i.customType]=i.data)}})[i.type].call(a)})}requiredCompatibilityversion(i,a){(i<a||!i)&&this.trigger("warn",{message:`manifest must be at least version ${a}`})}warnOnMissingAttributes_(i,a,s){const o=[];s.forEach(function(i){a.hasOwnProperty(i)||o.push(i)}),o.length&&this.trigger("warn",{message:`${i} lacks required attribute(s): ${o.join(", ")}`})}push(i){this.lineStream.push(i)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(i){this.parseStream.addParser(i)}addTagMapper(i){this.parseStream.addTagMapper(i)}},"Parser"),o);var nr,ir,rr={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},ar=["video","audio","text"],sr=["Video","Audio","Text"],or=/* @__PURE__ */__name(function translateLegacyCodec2(i){return i?i.replace(/avc1\.(\d+)\.(\d+)/i,function(i,a,s){return"avc1."+("00"+Number(a).toString(16)).slice(-2)+"00"+("00"+Number(s).toString(16)).slice(-2)}):i},"translateLegacyCodec"),lr=/* @__PURE__ */__name(function parseCodecs2(i){void 0===i&&(i="");var a=i.split(","),s=[];return a.forEach(function(i){var a;i=i.trim(),ar.forEach(function(o){var u=rr[o].exec(i.toLowerCase());if(u&&!(u.length<=1)){a=o;var _=i.substring(0,u[1].length),x=i.replace(_,"");s.push({type:_,details:x,mediaType:o})}}),a||s.push({type:i,details:"",mediaType:"unknown"})}),s},"parseCodecs"),cr=/* @__PURE__ */__name(function codecsFromDefault2(i,a){if(!i.mediaGroups.AUDIO||!a)return null;var s=i.mediaGroups.AUDIO[a];if(!s)return null;for(var o in s){var u=s[o];if(u.default&&u.playlists)return lr(u.playlists[0].attributes.CODECS)}return null},"codecsFromDefault"),ur=/* @__PURE__ */__name(function isAudioCodec2(i){return void 0===i&&(i=""),rr.audio.test(i.trim().toLowerCase())},"isAudioCodec"),dr=/* @__PURE__ */__name(function isTextCodec2(i){return void 0===i&&(i=""),rr.text.test(i.trim().toLowerCase())},"isTextCodec"),hr=/* @__PURE__ */__name(function getMimeForCodec2(i){if(i&&"string"==typeof i){var a=i.toLowerCase().split(",").map(function(i){return or(i.trim())}),s="video";1===a.length&&ur(a[0])?s="audio":1===a.length&&dr(a[0])&&(s="application");var o="mp4";return a.every(function(i){return rr.mp4.test(i)})?o="mp4":a.every(function(i){return rr.webm.test(i)})?o="webm":a.every(function(i){return rr.ogg.test(i)})&&(o="ogg"),s+"/"+o+';codecs="'+i+'"'}},"getMimeForCodec"),pr=/* @__PURE__ */__name(function browserSupportsCodec2(i,a){return void 0===i&&(i=""),void 0===a&&(a=!1),Tn.MediaSource&&Tn.MediaSource.isTypeSupported&&Tn.MediaSource.isTypeSupported(hr(i))||a&&Tn.ManagedMediaSource&&Tn.ManagedMediaSource.isTypeSupported&&Tn.ManagedMediaSource.isTypeSupported(hr(i))||!1},"browserSupportsCodec"),mr=/* @__PURE__ */__name(function muxerSupportsCodec2(i){return void 0===i&&(i=""),i.toLowerCase().split(",").every(function(i){i=i.trim();for(var a=0;a<sr.length;a++){if(rr["muxer"+sr[a]].test(i))return!0}return!1})},"muxerSupportsCodec"),fr="mp4a.40.2",gr=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,_r=/^application\/dash\+xml/i,yr=/* @__PURE__ */__name(function simpleTypeFromSourceType2(i){return gr.test(i)?"hls":_r.test(i)?"dash":"application/vnd.videojs.vhs+json"===i?"vhs-json":null},"simpleTypeFromSourceType"),vr=/* @__PURE__ */__name(function countBits2(i){return i.toString(2).length},"countBits"),br=/* @__PURE__ */__name(function countBytes2(i){return Math.ceil(vr(i)/8)},"countBytes"),Tr=/* @__PURE__ */__name(function isArrayBufferView2(i){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer},"isArrayBufferView"),Sr=/* @__PURE__ */__name(function isTypedArray2(i){return Tr(i)},"isTypedArray"),xr=/* @__PURE__ */__name(function toUint82(i){return i instanceof Uint8Array?i:(Array.isArray(i)||Sr(i)||i instanceof ArrayBuffer||(i="number"!=typeof i||"number"==typeof i&&i!=i?0:[i]),new Uint8Array(i&&i.buffer||i,i&&i.byteOffset||0,i&&i.byteLength||0))},"toUint8"),wr=Tn.BigInt||Number,Ar=[wr("0x1"),wr("0x100"),wr("0x10000"),wr("0x1000000"),wr("0x100000000"),wr("0x10000000000"),wr("0x1000000000000"),wr("0x100000000000000"),wr("0x10000000000000000")];nr=new Uint16Array([65484]),255===(ir=new Uint8Array(nr.buffer,nr.byteOffset,nr.byteLength))[0]||ir[0];var Cr,Er,Mr=/* @__PURE__ */__name(function bytesToNumber2(i,a){var s=void 0===a?{}:a,o=s.signed,u=void 0!==o&&o,_=s.le,x=void 0!==_&&_;i=xr(i);var w=x?"reduce":"reduceRight",C=(i[w]?i[w]:Array.prototype[w]).call(i,function(a,s,o){var u=x?o:Math.abs(o+1-i.length);return a+wr(s)*Ar[u]},wr(0));if(u){var L=Ar[i.length]/wr(2)-wr(1);(C=wr(C))>L&&(C-=L,C-=L,C-=wr(2))}return Number(C)},"bytesToNumber"),kr=/* @__PURE__ */__name(function numberToBytes2(i,a){var s={}.le,o=void 0!==s&&s;("bigint"!=typeof i&&"number"!=typeof i||"number"==typeof i&&i!=i)&&(i=0),i=wr(i);for(var u=br(i),_=new Uint8Array(new ArrayBuffer(u)),x=0;x<u;x++){var w=o?x:Math.abs(x+1-_.length);_[w]=Number(i/Ar[x]&wr(255)),i<0&&(_[w]=Math.abs(~_[w]),_[w]-=0===x?1:2)}return _},"numberToBytes"),Pr=/* @__PURE__ */__name(function stringToBytes2(i,a){if("string"!=typeof i&&i&&"function"==typeof i.toString&&(i=i.toString()),"string"!=typeof i)return new Uint8Array;a||(i=unescape(encodeURIComponent(i)));for(var s=new Uint8Array(i.length),o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return s},"stringToBytes"),Ir=/* @__PURE__ */__name(function concatTypedArrays2(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(a=a.filter(function(i){return i&&(i.byteLength||i.length)&&"string"!=typeof i}),a.length<=1)return xr(a[0]);var o=a.reduce(function(i,a,s){return i+(a.byteLength||a.length)},0),u=new Uint8Array(o),_=0;return a.forEach(function(i){i=xr(i),u.set(i,_),_+=i.byteLength}),u},"concatTypedArrays"),Lr=/* @__PURE__ */__name(function bytesMatch2(i,a,s){var o=void 0===s?{}:s,u=o.offset,_=void 0===u?0:u,x=o.mask,w=void 0===x?[]:x;i=xr(i);var C=(a=xr(a)).every?a.every:Array.prototype.every;return a.length&&i.length-_>=a.length&&C.call(a,function(a,s){return a===(w[s]?w[s]&i[_+s]:i[_+s])})},"bytesMatch"),Dr=/* @__PURE__ */__name(function forEachMediaGroup2(i,a,s){a.forEach(function(a){for(var o in i.mediaGroups[a])for(var u in i.mediaGroups[a][o]){var _=i.mediaGroups[a][o][u];s(_,a,o,u)}})},"forEachMediaGroup"),Rr={},Or={},Nr={};function requireConventions(){if(Cr)return Nr;function find(i,a,s){if(void 0===s&&(s=Array.prototype),i&&"function"==typeof s.find)return s.find.call(i,a);for(var o=0;o<i.length;o++)if(Object.prototype.hasOwnProperty.call(i,o)){var u=i[o];if(a.call(void 0,u,o,i))return u}}function freeze(i,a){return void 0===a&&(a=Object),a&&"function"==typeof a.freeze?a.freeze(i):i}function assign2(i,a){if(null===i||"object"!=typeof i)throw new TypeError("target is not an object");for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s]);return i}Cr=1,__name(find,"find"),__name(freeze,"freeze"),__name(assign2,"assign");var i=freeze({HTML:"text/html",isHTML:/* @__PURE__ */__name(function(a){return a===i.HTML},"isHTML"),XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),a=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:/* @__PURE__ */__name(function(i){return i===a.HTML},"isHTML"),SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Nr.assign=assign2,Nr.find=find,Nr.freeze=freeze,Nr.MIME_TYPE=i,Nr.NAMESPACE=a,Nr}function requireDom(){if(Er)return Or;Er=1;var i=requireConventions(),a=i.find,s=i.NAMESPACE;function notEmptyString(i){return""!==i}function splitOnASCIIWhitespace(i){return i?i.split(/[\t\n\f\r ]+/).filter(notEmptyString):[]}function orderedSetReducer(i,a){return i.hasOwnProperty(a)||(i[a]=!0),i}function toOrderedSet(i){if(!i)return[];var a=splitOnASCIIWhitespace(i);return Object.keys(a.reduce(orderedSetReducer,{}))}function arrayIncludes(i){return function(a){return i&&-1!==i.indexOf(a)}}function copy(i,a){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])}function _extends2(i,a){var s=i.prototype;if(!(s instanceof a)){let t=function(){};__name(t,"t"),t.prototype=a.prototype,t=new t,copy(s,t),i.prototype=s=t}s.constructor!=i&&("function"!=typeof i&&console.error("unknown Class:"+i),s.constructor=i)}__name(notEmptyString,"notEmptyString"),__name(splitOnASCIIWhitespace,"splitOnASCIIWhitespace"),__name(orderedSetReducer,"orderedSetReducer"),__name(toOrderedSet,"toOrderedSet"),__name(arrayIncludes,"arrayIncludes"),__name(copy,"copy"),__name(_extends2,"_extends");var o={},u=o.ELEMENT_NODE=1,_=o.ATTRIBUTE_NODE=2,x=o.TEXT_NODE=3,w=o.CDATA_SECTION_NODE=4,C=o.ENTITY_REFERENCE_NODE=5,L=o.ENTITY_NODE=6,B=o.PROCESSING_INSTRUCTION_NODE=7,U=o.COMMENT_NODE=8,j=o.DOCUMENT_NODE=9,V=o.DOCUMENT_TYPE_NODE=10,z=o.DOCUMENT_FRAGMENT_NODE=11,$=o.NOTATION_NODE=12,Y={},Z={};Y.INDEX_SIZE_ERR=(Z[1]="Index size error",1),Y.DOMSTRING_SIZE_ERR=(Z[2]="DOMString size error",2);var ee=Y.HIERARCHY_REQUEST_ERR=(Z[3]="Hierarchy request error",3);Y.WRONG_DOCUMENT_ERR=(Z[4]="Wrong document",4),Y.INVALID_CHARACTER_ERR=(Z[5]="Invalid character",5),Y.NO_DATA_ALLOWED_ERR=(Z[6]="No data allowed",6),Y.NO_MODIFICATION_ALLOWED_ERR=(Z[7]="No modification allowed",7);var ie=Y.NOT_FOUND_ERR=(Z[8]="Not found",8);Y.NOT_SUPPORTED_ERR=(Z[9]="Not supported",9);var ae=Y.INUSE_ATTRIBUTE_ERR=(Z[10]="Attribute in use",10);function DOMException(i,a){if(a instanceof Error)var s=a;else s=this,Error.call(this,Z[i]),this.message=Z[i],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return s.code=i,a&&(this.message=this.message+": "+a),s}function NodeList(){}function LiveNodeList(i,a){this._node=i,this._refresh=a,_updateLiveList(this)}function _updateLiveList(i){var a=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==a){var s=i._refresh(i._node);if(__set__(i,"length",s.length),!i.$$length||s.length<i.$$length)for(var o=s.length;o in i;o++)Object.prototype.hasOwnProperty.call(i,o)&&delete i[o];copy(s,i),i._inc=a}}function NamedNodeMap(){}function _findNodeIndex(i,a){for(var s=i.length;s--;)if(i[s]===a)return s}function _addNamedNode(i,a,s,o){if(o?a[_findNodeIndex(a,o)]=s:a[a.length++]=s,i){s.ownerElement=i;var u=i.ownerDocument;u&&(o&&_onRemoveAttribute(u,i,o),_onAddAttribute(u,i,s))}}function _removeNamedNode(i,a,s){var o=_findNodeIndex(a,s);if(!(o>=0))throw new DOMException(ie,new Error(i.tagName+"@"+s));for(var u=a.length-1;o<u;)a[o]=a[++o];if(a.length=u,i){var _=i.ownerDocument;_&&(_onRemoveAttribute(_,i,s),s.ownerElement=null)}}function DOMImplementation(){}function Node(){}function _xmlEncoder(i){return("<"==i?"&lt;":">"==i&&"&gt;")||"&"==i&&"&amp;"||'"'==i&&"&quot;"||"&#"+i.charCodeAt()+";"}function _visitNode(i,a){if(a(i))return!0;if(i=i.firstChild)do{if(_visitNode(i,a))return!0}while(i=i.nextSibling)}function Document(){this.ownerDocument=this}function _onAddAttribute(i,a,o){i&&i._inc++,o.namespaceURI===s.XMLNS&&(a._nsMap[o.prefix?o.localName:""]=o.value)}function _onRemoveAttribute(i,a,o,u){i&&i._inc++,o.namespaceURI===s.XMLNS&&delete a._nsMap[o.prefix?o.localName:""]}function _onUpdateChild(i,a,s){if(i&&i._inc){i._inc++;var o=a.childNodes;if(s)o[o.length++]=s;else{for(var u=a.firstChild,_=0;u;)o[_++]=u,u=u.nextSibling;o.length=_,delete o[o.length]}}}function _removeChild(i,a){var s=a.previousSibling,o=a.nextSibling;return s?s.nextSibling=o:i.firstChild=o,o?o.previousSibling=s:i.lastChild=s,a.parentNode=null,a.previousSibling=null,a.nextSibling=null,_onUpdateChild(i.ownerDocument,i),a}function hasValidParentNodeType(i){return i&&(i.nodeType===Node.DOCUMENT_NODE||i.nodeType===Node.DOCUMENT_FRAGMENT_NODE||i.nodeType===Node.ELEMENT_NODE)}function hasInsertableNodeType(i){return i&&(isElementNode(i)||isTextNode2(i)||isDocTypeNode(i)||i.nodeType===Node.DOCUMENT_FRAGMENT_NODE||i.nodeType===Node.COMMENT_NODE||i.nodeType===Node.PROCESSING_INSTRUCTION_NODE)}function isDocTypeNode(i){return i&&i.nodeType===Node.DOCUMENT_TYPE_NODE}function isElementNode(i){return i&&i.nodeType===Node.ELEMENT_NODE}function isTextNode2(i){return i&&i.nodeType===Node.TEXT_NODE}function isElementInsertionPossible(i,s){var o=i.childNodes||[];if(a(o,isElementNode)||isDocTypeNode(s))return!1;var u=a(o,isDocTypeNode);return!(s&&u&&o.indexOf(u)>o.indexOf(s))}function isElementReplacementPossible(i,s){var o=i.childNodes||[];function hasElementChildThatIsNotChild(i){return isElementNode(i)&&i!==s}if(__name(hasElementChildThatIsNotChild,"hasElementChildThatIsNotChild"),a(o,hasElementChildThatIsNotChild))return!1;var u=a(o,isDocTypeNode);return!(s&&u&&o.indexOf(u)>o.indexOf(s))}function assertPreInsertionValidity1to5(i,a,s){if(!hasValidParentNodeType(i))throw new DOMException(ee,"Unexpected parent node type "+i.nodeType);if(s&&s.parentNode!==i)throw new DOMException(ie,"child not in parent");if(!hasInsertableNodeType(a)||isDocTypeNode(a)&&i.nodeType!==Node.DOCUMENT_NODE)throw new DOMException(ee,"Unexpected node type "+a.nodeType+" for parent node type "+i.nodeType)}function assertPreInsertionValidityInDocument(i,s,o){var u=i.childNodes||[],_=s.childNodes||[];if(s.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var x=_.filter(isElementNode);if(x.length>1||a(_,isTextNode2))throw new DOMException(ee,"More than one element or text in fragment");if(1===x.length&&!isElementInsertionPossible(i,o))throw new DOMException(ee,"Element in fragment can not be inserted before doctype")}if(isElementNode(s)&&!isElementInsertionPossible(i,o))throw new DOMException(ee,"Only one element can be added and only after doctype");if(isDocTypeNode(s)){if(a(u,isDocTypeNode))throw new DOMException(ee,"Only one doctype is allowed");var w=a(u,isElementNode);if(o&&u.indexOf(w)<u.indexOf(o))throw new DOMException(ee,"Doctype can only be inserted before an element");if(!o&&w)throw new DOMException(ee,"Doctype can not be appended since element is present")}}function assertPreReplacementValidityInDocument(i,s,o){var u=i.childNodes||[],_=s.childNodes||[];if(s.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var x=_.filter(isElementNode);if(x.length>1||a(_,isTextNode2))throw new DOMException(ee,"More than one element or text in fragment");if(1===x.length&&!isElementReplacementPossible(i,o))throw new DOMException(ee,"Element in fragment can not be inserted before doctype")}if(isElementNode(s)&&!isElementReplacementPossible(i,o))throw new DOMException(ee,"Only one element can be added and only after doctype");if(isDocTypeNode(s)){let hasDoctypeChildThatIsNotChild=function(i){return isDocTypeNode(i)&&i!==o};if(__name(hasDoctypeChildThatIsNotChild,"hasDoctypeChildThatIsNotChild"),a(u,hasDoctypeChildThatIsNotChild))throw new DOMException(ee,"Only one doctype is allowed");var w=a(u,isElementNode);if(o&&u.indexOf(w)<u.indexOf(o))throw new DOMException(ee,"Doctype can only be inserted before an element")}}function _insertBefore(i,a,s,o){assertPreInsertionValidity1to5(i,a,s),i.nodeType===Node.DOCUMENT_NODE&&(o||assertPreInsertionValidityInDocument)(i,a,s);var u=a.parentNode;if(u&&u.removeChild(a),a.nodeType===z){var _=a.firstChild;if(null==_)return a;var x=a.lastChild}else _=x=a;var w=s?s.previousSibling:i.lastChild;_.previousSibling=w,x.nextSibling=s,w?w.nextSibling=_:i.firstChild=_,null==s?i.lastChild=x:s.previousSibling=x;do{_.parentNode=i}while(_!==x&&(_=_.nextSibling));return _onUpdateChild(i.ownerDocument||i,i),a.nodeType==z&&(a.firstChild=a.lastChild=null),a}function _appendSingleChild(i,a){return a.parentNode&&a.parentNode.removeChild(a),a.parentNode=i,a.previousSibling=i.lastChild,a.nextSibling=null,a.previousSibling?a.previousSibling.nextSibling=a:i.firstChild=a,i.lastChild=a,_onUpdateChild(i.ownerDocument,i,a),a}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(i,a){var s=[],o=9==this.nodeType&&this.documentElement||this,u=o.prefix,_=o.namespaceURI;if(_&&null==u&&null==(u=o.lookupPrefix(_)))var x=[{namespace:_,prefix:null}];return serializeToString(this,s,i,a,x),s.join("")}function needNamespaceDefine(i,a,o){var u=i.prefix||"",_=i.namespaceURI;if(!_)return!1;if("xml"===u&&_===s.XML||_===s.XMLNS)return!1;for(var x=o.length;x--;){var w=o[x];if(w.prefix===u)return w.namespace!==_}return!0}function addSerializedAttribute(i,a,s){i.push(" ",a,'="',s.replace(/[<>&"\t\n\r]/g,_xmlEncoder),'"')}function serializeToString(i,a,o,L,$){if($||($=[]),L){if(!(i=L(i)))return;if("string"==typeof i)return void a.push(i)}switch(i.nodeType){case u:var Y=i.attributes,Z=Y.length,ee=i.firstChild,ie=i.tagName,ae=ie;if(!(o=s.isHTML(i.namespaceURI)||o)&&!i.prefix&&i.namespaceURI){for(var le,ce=0;ce<Y.length;ce++)if("xmlns"===Y.item(ce).name){le=Y.item(ce).value;break}if(!le)for(var de=$.length-1;de>=0;de--){if(""===(pe=$[de]).prefix&&pe.namespace===i.namespaceURI){le=pe.namespace;break}}if(le!==i.namespaceURI)for(de=$.length-1;de>=0;de--){var pe;if((pe=$[de]).namespace===i.namespaceURI){pe.prefix&&(ae=pe.prefix+":"+ie);break}}}a.push("<",ae);for(var fe=0;fe<Z;fe++){"xmlns"==(_e=Y.item(fe)).prefix?$.push({prefix:_e.localName,namespace:_e.value}):"xmlns"==_e.nodeName&&$.push({prefix:"",namespace:_e.value})}for(fe=0;fe<Z;fe++){var _e,ye,be;if(needNamespaceDefine(_e=Y.item(fe),0,$))addSerializedAttribute(a,(ye=_e.prefix||"")?"xmlns:"+ye:"xmlns",be=_e.namespaceURI),$.push({prefix:ye,namespace:be});serializeToString(_e,a,o,L,$)}if(ie===ae&&needNamespaceDefine(i,0,$))addSerializedAttribute(a,(ye=i.prefix||"")?"xmlns:"+ye:"xmlns",be=i.namespaceURI),$.push({prefix:ye,namespace:be});if(ee||o&&!/^(?:meta|link|img|br|hr|input)$/i.test(ie)){if(a.push(">"),o&&/^script$/i.test(ie))for(;ee;)ee.data?a.push(ee.data):serializeToString(ee,a,o,L,$.slice()),ee=ee.nextSibling;else for(;ee;)serializeToString(ee,a,o,L,$.slice()),ee=ee.nextSibling;a.push("</",ae,">")}else a.push("/>");return;case j:case z:for(ee=i.firstChild;ee;)serializeToString(ee,a,o,L,$.slice()),ee=ee.nextSibling;return;case _:return addSerializedAttribute(a,i.name,i.value);case x:return a.push(i.data.replace(/[<&>]/g,_xmlEncoder));case w:return a.push("<![CDATA[",i.data,"]]>");case U:return a.push("\x3c!--",i.data,"--\x3e");case V:var Te=i.publicId,Se=i.systemId;if(a.push("<!DOCTYPE ",i.name),Te)a.push(" PUBLIC ",Te),Se&&"."!=Se&&a.push(" ",Se),a.push(">");else if(Se&&"."!=Se)a.push(" SYSTEM ",Se,">");else{var xe=i.internalSubset;xe&&a.push(" [",xe,"]"),a.push(">")}return;case B:return a.push("<?",i.target," ",i.data,"?>");case C:return a.push("&",i.nodeName,";");default:a.push("??",i.nodeName)}}function importNode(i,a,s){var o;switch(a.nodeType){case u:(o=a.cloneNode(!1)).ownerDocument=i;case z:break;case _:s=!0}if(o||(o=a.cloneNode(!1)),o.ownerDocument=i,o.parentNode=null,s)for(var x=a.firstChild;x;)o.appendChild(importNode(i,x,s)),x=x.nextSibling;return o}function cloneNode(i,a,s){var o=new a.constructor;for(var x in a)if(Object.prototype.hasOwnProperty.call(a,x)){var w=a[x];"object"!=typeof w&&w!=o[x]&&(o[x]=w)}switch(a.childNodes&&(o.childNodes=new NodeList),o.ownerDocument=i,o.nodeType){case u:var C=a.attributes,L=o.attributes=new NamedNodeMap,B=C.length;L._ownerElement=o;for(var U=0;U<B;U++)o.setAttributeNode(cloneNode(i,C.item(U),!0));break;case _:s=!0}if(s)for(var j=a.firstChild;j;)o.appendChild(cloneNode(i,j,s)),j=j.nextSibling;return o}function __set__(i,a,s){i[a]=s}Y.INVALID_STATE_ERR=(Z[11]="Invalid state",11),Y.SYNTAX_ERR=(Z[12]="Syntax error",12),Y.INVALID_MODIFICATION_ERR=(Z[13]="Invalid modification",13),Y.NAMESPACE_ERR=(Z[14]="Invalid namespace",14),Y.INVALID_ACCESS_ERR=(Z[15]="Invalid access",15),__name(DOMException,"DOMException"),DOMException.prototype=Error.prototype,copy(Y,DOMException),__name(NodeList,"NodeList"),NodeList.prototype={length:0,item:/* @__PURE__ */__name(function(i){return i>=0&&i<this.length?this[i]:null},"item"),toString:/* @__PURE__ */__name(function(i,a){for(var s=[],o=0;o<this.length;o++)serializeToString(this[o],s,i,a);return s.join("")},"toString"),filter:/* @__PURE__ */__name(function(i){return Array.prototype.filter.call(this,i)},"filter"),indexOf:/* @__PURE__ */__name(function(i){return Array.prototype.indexOf.call(this,i)},"indexOf")},__name(LiveNodeList,"LiveNodeList"),__name(_updateLiveList,"_updateLiveList"),LiveNodeList.prototype.item=function(i){return _updateLiveList(this),this[i]||null},_extends2(LiveNodeList,NodeList),__name(NamedNodeMap,"NamedNodeMap"),__name(_findNodeIndex,"_findNodeIndex"),__name(_addNamedNode,"_addNamedNode"),__name(_removeNamedNode,"_removeNamedNode"),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:/* @__PURE__ */__name(function(i){for(var a=this.length;a--;){var s=this[a];if(s.nodeName==i)return s}},"getNamedItem"),setNamedItem:/* @__PURE__ */__name(function(i){var a=i.ownerElement;if(a&&a!=this._ownerElement)throw new DOMException(ae);var s=this.getNamedItem(i.nodeName);return _addNamedNode(this._ownerElement,this,i,s),s},"setNamedItem"),setNamedItemNS:/* @__PURE__ */__name(function(i){var a,s=i.ownerElement;if(s&&s!=this._ownerElement)throw new DOMException(ae);return a=this.getNamedItemNS(i.namespaceURI,i.localName),_addNamedNode(this._ownerElement,this,i,a),a},"setNamedItemNS"),removeNamedItem:/* @__PURE__ */__name(function(i){var a=this.getNamedItem(i);return _removeNamedNode(this._ownerElement,this,a),a},"removeNamedItem"),removeNamedItemNS:/* @__PURE__ */__name(function(i,a){var s=this.getNamedItemNS(i,a);return _removeNamedNode(this._ownerElement,this,s),s},"removeNamedItemNS"),getNamedItemNS:/* @__PURE__ */__name(function(i,a){for(var s=this.length;s--;){var o=this[s];if(o.localName==a&&o.namespaceURI==i)return o}return null},"getNamedItemNS")},__name(DOMImplementation,"DOMImplementation"),DOMImplementation.prototype={hasFeature:/* @__PURE__ */__name(function(i,a){return!0},"hasFeature"),createDocument:/* @__PURE__ */__name(function(i,a,s){var o=new Document;if(o.implementation=this,o.childNodes=new NodeList,o.doctype=s||null,s&&o.appendChild(s),a){var u=o.createElementNS(i,a);o.appendChild(u)}return o},"createDocument"),createDocumentType:/* @__PURE__ */__name(function(i,a,s){var o=new DocumentType;return o.name=i,o.nodeName=i,o.publicId=a||"",o.systemId=s||"",o},"createDocumentType")},__name(Node,"Node"),Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:/* @__PURE__ */__name(function(i,a){return _insertBefore(this,i,a)},"insertBefore"),replaceChild:/* @__PURE__ */__name(function(i,a){_insertBefore(this,i,a,assertPreReplacementValidityInDocument),a&&this.removeChild(a)},"replaceChild"),removeChild:/* @__PURE__ */__name(function(i){return _removeChild(this,i)},"removeChild"),appendChild:/* @__PURE__ */__name(function(i){return this.insertBefore(i,null)},"appendChild"),hasChildNodes:/* @__PURE__ */__name(function(){return null!=this.firstChild},"hasChildNodes"),cloneNode:/* @__PURE__ */__name(function(i){return cloneNode(this.ownerDocument||this,this,i)},"cloneNode"),normalize:/* @__PURE__ */__name(function(){for(var i=this.firstChild;i;){var a=i.nextSibling;a&&a.nodeType==x&&i.nodeType==x?(this.removeChild(a),i.appendData(a.data)):(i.normalize(),i=a)}},"normalize"),isSupported:/* @__PURE__ */__name(function(i,a){return this.ownerDocument.implementation.hasFeature(i,a)},"isSupported"),hasAttributes:/* @__PURE__ */__name(function(){return this.attributes.length>0},"hasAttributes"),lookupPrefix:/* @__PURE__ */__name(function(i){for(var a=this;a;){var s=a._nsMap;if(s)for(var o in s)if(Object.prototype.hasOwnProperty.call(s,o)&&s[o]===i)return o;a=a.nodeType==_?a.ownerDocument:a.parentNode}return null},"lookupPrefix"),lookupNamespaceURI:/* @__PURE__ */__name(function(i){for(var a=this;a;){var s=a._nsMap;if(s&&Object.prototype.hasOwnProperty.call(s,i))return s[i];a=a.nodeType==_?a.ownerDocument:a.parentNode}return null},"lookupNamespaceURI"),isDefaultNamespace:/* @__PURE__ */__name(function(i){return null==this.lookupPrefix(i)},"isDefaultNamespace")},__name(_xmlEncoder,"_xmlEncoder"),copy(o,Node),copy(o,Node.prototype),__name(_visitNode,"_visitNode"),__name(Document,"Document"),__name(_onAddAttribute,"_onAddAttribute"),__name(_onRemoveAttribute,"_onRemoveAttribute"),__name(_onUpdateChild,"_onUpdateChild"),__name(_removeChild,"_removeChild"),__name(hasValidParentNodeType,"hasValidParentNodeType"),__name(hasInsertableNodeType,"hasInsertableNodeType"),__name(isDocTypeNode,"isDocTypeNode"),__name(isElementNode,"isElementNode"),__name(isTextNode2,"isTextNode"),__name(isElementInsertionPossible,"isElementInsertionPossible"),__name(isElementReplacementPossible,"isElementReplacementPossible"),__name(assertPreInsertionValidity1to5,"assertPreInsertionValidity1to5"),__name(assertPreInsertionValidityInDocument,"assertPreInsertionValidityInDocument"),__name(assertPreReplacementValidityInDocument,"assertPreReplacementValidityInDocument"),__name(_insertBefore,"_insertBefore"),__name(_appendSingleChild,"_appendSingleChild"),Document.prototype={nodeName:"#document",nodeType:j,doctype:null,documentElement:null,_inc:1,insertBefore:/* @__PURE__ */__name(function(i,a){if(i.nodeType==z){for(var s=i.firstChild;s;){var o=s.nextSibling;this.insertBefore(s,a),s=o}return i}return _insertBefore(this,i,a),i.ownerDocument=this,null===this.documentElement&&i.nodeType===u&&(this.documentElement=i),i},"insertBefore"),removeChild:/* @__PURE__ */__name(function(i){return this.documentElement==i&&(this.documentElement=null),_removeChild(this,i)},"removeChild"),replaceChild:/* @__PURE__ */__name(function(i,a){_insertBefore(this,i,a,assertPreReplacementValidityInDocument),i.ownerDocument=this,a&&this.removeChild(a),isElementNode(i)&&(this.documentElement=i)},"replaceChild"),importNode:/* @__PURE__ */__name(function(i,a){return importNode(this,i,a)},"importNode"),getElementById:/* @__PURE__ */__name(function(i){var a=null;return _visitNode(this.documentElement,function(s){if(s.nodeType==u&&s.getAttribute("id")==i)return a=s,!0}),a},"getElementById"),getElementsByClassName:/* @__PURE__ */__name(function(i){var a=toOrderedSet(i);return new LiveNodeList(this,function(s){var o=[];return a.length>0&&_visitNode(s.documentElement,function(_){if(_!==s&&_.nodeType===u){var x=_.getAttribute("class");if(x){var w=i===x;if(!w){var C=toOrderedSet(x);w=a.every(arrayIncludes(C))}w&&o.push(_)}}}),o})},"getElementsByClassName"),createElement:/* @__PURE__ */__name(function(i){var a=new Element;return a.ownerDocument=this,a.nodeName=i,a.tagName=i,a.localName=i,a.childNodes=new NodeList,(a.attributes=new NamedNodeMap)._ownerElement=a,a},"createElement"),createDocumentFragment:/* @__PURE__ */__name(function(){var i=new DocumentFragment;return i.ownerDocument=this,i.childNodes=new NodeList,i},"createDocumentFragment"),createTextNode:/* @__PURE__ */__name(function(i){var a=new Text;return a.ownerDocument=this,a.appendData(i),a},"createTextNode"),createComment:/* @__PURE__ */__name(function(i){var a=new Comment;return a.ownerDocument=this,a.appendData(i),a},"createComment"),createCDATASection:/* @__PURE__ */__name(function(i){var a=new CDATASection;return a.ownerDocument=this,a.appendData(i),a},"createCDATASection"),createProcessingInstruction:/* @__PURE__ */__name(function(i,a){var s=new ProcessingInstruction;return s.ownerDocument=this,s.tagName=s.nodeName=s.target=i,s.nodeValue=s.data=a,s},"createProcessingInstruction"),createAttribute:/* @__PURE__ */__name(function(i){var a=new Attr;return a.ownerDocument=this,a.name=i,a.nodeName=i,a.localName=i,a.specified=!0,a},"createAttribute"),createEntityReference:/* @__PURE__ */__name(function(i){var a=new EntityReference;return a.ownerDocument=this,a.nodeName=i,a},"createEntityReference"),createElementNS:/* @__PURE__ */__name(function(i,a){var s=new Element,o=a.split(":"),u=s.attributes=new NamedNodeMap;return s.childNodes=new NodeList,s.ownerDocument=this,s.nodeName=a,s.tagName=a,s.namespaceURI=i,2==o.length?(s.prefix=o[0],s.localName=o[1]):s.localName=a,u._ownerElement=s,s},"createElementNS"),createAttributeNS:/* @__PURE__ */__name(function(i,a){var s=new Attr,o=a.split(":");return s.ownerDocument=this,s.nodeName=a,s.name=a,s.namespaceURI=i,s.specified=!0,2==o.length?(s.prefix=o[0],s.localName=o[1]):s.localName=a,s},"createAttributeNS")},_extends2(Document,Node),__name(Element,"Element"),Element.prototype={nodeType:u,hasAttribute:/* @__PURE__ */__name(function(i){return null!=this.getAttributeNode(i)},"hasAttribute"),getAttribute:/* @__PURE__ */__name(function(i){var a=this.getAttributeNode(i);return a&&a.value||""},"getAttribute"),getAttributeNode:/* @__PURE__ */__name(function(i){return this.attributes.getNamedItem(i)},"getAttributeNode"),setAttribute:/* @__PURE__ */__name(function(i,a){var s=this.ownerDocument.createAttribute(i);s.value=s.nodeValue=""+a,this.setAttributeNode(s)},"setAttribute"),removeAttribute:/* @__PURE__ */__name(function(i){var a=this.getAttributeNode(i);a&&this.removeAttributeNode(a)},"removeAttribute"),appendChild:/* @__PURE__ */__name(function(i){return i.nodeType===z?this.insertBefore(i,null):_appendSingleChild(this,i)},"appendChild"),setAttributeNode:/* @__PURE__ */__name(function(i){return this.attributes.setNamedItem(i)},"setAttributeNode"),setAttributeNodeNS:/* @__PURE__ */__name(function(i){return this.attributes.setNamedItemNS(i)},"setAttributeNodeNS"),removeAttributeNode:/* @__PURE__ */__name(function(i){return this.attributes.removeNamedItem(i.nodeName)},"removeAttributeNode"),removeAttributeNS:/* @__PURE__ */__name(function(i,a){var s=this.getAttributeNodeNS(i,a);s&&this.removeAttributeNode(s)},"removeAttributeNS"),hasAttributeNS:/* @__PURE__ */__name(function(i,a){return null!=this.getAttributeNodeNS(i,a)},"hasAttributeNS"),getAttributeNS:/* @__PURE__ */__name(function(i,a){var s=this.getAttributeNodeNS(i,a);return s&&s.value||""},"getAttributeNS"),setAttributeNS:/* @__PURE__ */__name(function(i,a,s){var o=this.ownerDocument.createAttributeNS(i,a);o.value=o.nodeValue=""+s,this.setAttributeNode(o)},"setAttributeNS"),getAttributeNodeNS:/* @__PURE__ */__name(function(i,a){return this.attributes.getNamedItemNS(i,a)},"getAttributeNodeNS"),getElementsByTagName:/* @__PURE__ */__name(function(i){return new LiveNodeList(this,function(a){var s=[];return _visitNode(a,function(o){o===a||o.nodeType!=u||"*"!==i&&o.tagName!=i||s.push(o)}),s})},"getElementsByTagName"),getElementsByTagNameNS:/* @__PURE__ */__name(function(i,a){return new LiveNodeList(this,function(s){var o=[];return _visitNode(s,function(_){_===s||_.nodeType!==u||"*"!==i&&_.namespaceURI!==i||"*"!==a&&_.localName!=a||o.push(_)}),o})},"getElementsByTagNameNS")},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends2(Element,Node),__name(Attr,"Attr"),Attr.prototype.nodeType=_,_extends2(Attr,Node),__name(CharacterData,"CharacterData"),CharacterData.prototype={data:"",substringData:/* @__PURE__ */__name(function(i,a){return this.data.substring(i,i+a)},"substringData"),appendData:/* @__PURE__ */__name(function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},"appendData"),insertData:/* @__PURE__ */__name(function(i,a){this.replaceData(i,0,a)},"insertData"),appendChild:/* @__PURE__ */__name(function(i){throw new Error(Z[ee])},"appendChild"),deleteData:/* @__PURE__ */__name(function(i,a){this.replaceData(i,a,"")},"deleteData"),replaceData:/* @__PURE__ */__name(function(i,a,s){s=this.data.substring(0,i)+s+this.data.substring(i+a),this.nodeValue=this.data=s,this.length=s.length},"replaceData")},_extends2(CharacterData,Node),__name(Text,"Text"),Text.prototype={nodeName:"#text",nodeType:x,splitText:/* @__PURE__ */__name(function(i){var a=this.data,s=a.substring(i);a=a.substring(0,i),this.data=this.nodeValue=a,this.length=a.length;var o=this.ownerDocument.createTextNode(s);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o},"splitText")},_extends2(Text,CharacterData),__name(Comment,"Comment"),Comment.prototype={nodeName:"#comment",nodeType:U},_extends2(Comment,CharacterData),__name(CDATASection,"CDATASection"),CDATASection.prototype={nodeName:"#cdata-section",nodeType:w},_extends2(CDATASection,CharacterData),__name(DocumentType,"DocumentType"),DocumentType.prototype.nodeType=V,_extends2(DocumentType,Node),__name(Notation,"Notation"),Notation.prototype.nodeType=$,_extends2(Notation,Node),__name(Entity,"Entity"),Entity.prototype.nodeType=L,_extends2(Entity,Node),__name(EntityReference,"EntityReference"),EntityReference.prototype.nodeType=C,_extends2(EntityReference,Node),__name(DocumentFragment,"DocumentFragment"),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=z,_extends2(DocumentFragment,Node),__name(ProcessingInstruction,"ProcessingInstruction"),ProcessingInstruction.prototype.nodeType=B,_extends2(ProcessingInstruction,Node),__name(XMLSerializer,"XMLSerializer"),XMLSerializer.prototype.serializeToString=function(i,a,s){return nodeSerializeToString.call(i,a,s)},Node.prototype.toString=nodeSerializeToString,__name(nodeSerializeToString,"nodeSerializeToString"),__name(needNamespaceDefine,"needNamespaceDefine"),__name(addSerializedAttribute,"addSerializedAttribute"),__name(serializeToString,"serializeToString"),__name(importNode,"importNode"),__name(cloneNode,"cloneNode"),__name(__set__,"__set__");try{if(Object.defineProperty){let getTextContent=function(i){switch(i.nodeType){case u:case z:var a=[];for(i=i.firstChild;i;)7!==i.nodeType&&8!==i.nodeType&&a.push(getTextContent(i)),i=i.nextSibling;return a.join("");default:return i.nodeValue}};__name(getTextContent,"getTextContent"),Object.defineProperty(LiveNodeList.prototype,"length",{get:/* @__PURE__ */__name(function(){return _updateLiveList(this),this.$$length},"get")}),Object.defineProperty(Node.prototype,"textContent",{get:/* @__PURE__ */__name(function(){return getTextContent(this)},"get"),set:/* @__PURE__ */__name(function(i){switch(this.nodeType){case u:case z:for(;this.firstChild;)this.removeChild(this.firstChild);(i||String(i))&&this.appendChild(this.ownerDocument.createTextNode(i));break;default:this.data=i,this.value=i,this.nodeValue=i}},"set")}),__set__=/* @__PURE__ */__name(function(i,a,s){i["$$"+a]=s},"__set__")}}catch(le){}return Or.DocumentType=DocumentType,Or.DOMException=DOMException,Or.DOMImplementation=DOMImplementation,Or.Element=Element,Or.Node=Node,Or.NodeList=NodeList,Or.XMLSerializer=XMLSerializer,Or}__name(requireConventions,"requireConventions"),__name(requireDom,"requireDom");var Br,Fr={},Ur={};function requireEntities(){return Br||(Br=1,i=Ur,a=requireConventions().freeze,i.XML_ENTITIES=a({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=a({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),i.entityMap=i.HTML_ENTITIES),Ur;var i,a}__name(requireEntities,"requireEntities");var jr,Vr,zr,Hr={};function requireSax(){if(jr)return Hr;jr=1;var i=requireConventions().NAMESPACE,a=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=new RegExp("[\\-\\.0-9"+a.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+a.source+s.source+"*(?::"+a.source+s.source+"*)?$");function ParseError(i,a){this.message=i,this.locator=a,Error.captureStackTrace&&Error.captureStackTrace(this,ParseError)}function XMLReader(){}function parse2(a,s,o,u,_){function fixedFromCharCode(i){if(i>65535){var a=55296+((i-=65536)>>10),s=56320+(1023&i);return String.fromCharCode(a,s)}return String.fromCharCode(i)}function entityReplacer(i){var a=i.slice(1,-1);return Object.hasOwnProperty.call(o,a)?o[a]:"#"===a.charAt(0)?fixedFromCharCode(parseInt(a.substr(1).replace("x","0x"))):(_.error("entity not found:"+i),i)}function appendText(i){if(i>j){var s=a.substring(j,i).replace(/&#?\w+;/g,entityReplacer);L&&position(j),u.characters(s,0,i-j),j=i}}function position(i,s){for(;i>=w&&(s=C.exec(a));)x=s.index,w=x+s[0].length,L.lineNumber++;L.columnNumber=i-x+1}__name(fixedFromCharCode,"fixedFromCharCode"),__name(entityReplacer,"entityReplacer"),__name(appendText,"appendText"),__name(position,"position");for(var x=0,w=0,C=/.*(?:\r\n?|\n)|.*$/g,L=u.locator,B=[{currentNSMap:s}],U={},j=0;;){try{var V=a.indexOf("<",j);if(V<0){if(!a.substr(j).match(/^\s*$/)){var z=u.doc,$=z.createTextNode(a.substr(j));z.appendChild($),u.currentElement=$}return}switch(V>j&&appendText(V),a.charAt(V+1)){case"/":var Y=a.indexOf(">",V+3),Z=a.substring(V+2,Y).replace(/[ \t\n\r]+$/g,""),ee=B.pop();Y<0?(Z=a.substring(V+2).replace(/[\s<].*/,""),_.error("end tag name: "+Z+" is not complete:"+ee.tagName),Y=V+1+Z.length):Z.match(/\s</)&&(Z=Z.replace(/[\s<].*/,""),_.error("end tag name: "+Z+" maybe not complete"),Y=V+1+Z.length);var ie=ee.localNSMap,ae=ee.tagName==Z;if(ae||ee.tagName&&ee.tagName.toLowerCase()==Z.toLowerCase()){if(u.endElement(ee.uri,ee.localName,Z),ie)for(var le in ie)Object.prototype.hasOwnProperty.call(ie,le)&&u.endPrefixMapping(le);ae||_.fatalError("end tag name: "+Z+" is not match the current start tagName:"+ee.tagName)}else B.push(ee);Y++;break;case"?":L&&position(V),Y=parseInstruction(a,V,u);break;case"!":L&&position(V),Y=parseDCC(a,V,u,_);break;default:L&&position(V);var ce=new ElementAttributes,de=B[B.length-1].currentNSMap,pe=(Y=parseElementStartPart(a,V,ce,de,entityReplacer,_),ce.length);if(!ce.closed&&fixSelfClosed(a,Y,ce.tagName,U)&&(ce.closed=!0,o.nbsp||_.warning("unclosed xml attribute")),L&&pe){for(var fe=copyLocator(L,{}),_e=0;_e<pe;_e++){var ye=ce[_e];position(ye.offset),ye.locator=copyLocator(L,{})}u.locator=fe,appendElement(ce,u,de)&&B.push(ce),u.locator=L}else appendElement(ce,u,de)&&B.push(ce);i.isHTML(ce.uri)&&!ce.closed?Y=parseHtmlSpecialContent(a,Y,ce.tagName,entityReplacer,u):Y++}}catch(be){if(be instanceof ParseError)throw be;_.error("element parse error: "+be),Y=-1}Y>j?j=Y:appendText(Math.max(V,j)+1)}}function copyLocator(i,a){return a.lineNumber=i.lineNumber,a.columnNumber=i.columnNumber,a}function parseElementStartPart(a,s,o,u,_,x){function addAttribute(i,a,s){o.attributeNames.hasOwnProperty(i)&&x.fatalError("Attribute "+i+" redefined"),o.addValue(i,a.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,_),s)}var w;__name(addAttribute,"addAttribute");for(var C=++s,L=0;;){var B=a.charAt(C);switch(B){case"=":if(1===L)w=a.slice(s,C),L=3;else{if(2!==L)throw new Error("attribute equal must after attrName");L=3}break;case"'":case'"':if(3===L||1===L){if(1===L&&(x.warning('attribute value must after "="'),w=a.slice(s,C)),s=C+1,!((C=a.indexOf(B,s))>0))throw new Error("attribute value no end '"+B+"' match");addAttribute(w,U=a.slice(s,C),s-1),L=5}else{if(4!=L)throw new Error('attribute value must after "="');addAttribute(w,U=a.slice(s,C),s),x.warning('attribute "'+w+'" missed start quot('+B+")!!"),s=C+1,L=5}break;case"/":switch(L){case 0:o.setTagName(a.slice(s,C));case 5:case 6:case 7:L=7,o.closed=!0;case 4:case 1:break;case 2:o.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return x.error("unexpected end of input"),0==L&&o.setTagName(a.slice(s,C)),C;case">":switch(L){case 0:o.setTagName(a.slice(s,C));case 5:case 6:case 7:break;case 4:case 1:"/"===(U=a.slice(s,C)).slice(-1)&&(o.closed=!0,U=U.slice(0,-1));case 2:2===L&&(U=w),4==L?(x.warning('attribute "'+U+'" missed quot(")!'),addAttribute(w,U,s)):(i.isHTML(u[""])&&U.match(/^(?:disabled|checked|selected)$/i)||x.warning('attribute "'+U+'" missed value!! "'+U+'" instead!!'),addAttribute(U,U,s));break;case 3:throw new Error("attribute value missed!!")}return C;case"":B=" ";default:if(B<=" ")switch(L){case 0:o.setTagName(a.slice(s,C)),L=6;break;case 1:w=a.slice(s,C),L=2;break;case 4:var U=a.slice(s,C);x.warning('attribute "'+U+'" missed quot(")!!'),addAttribute(w,U,s);case 5:L=6}else switch(L){case 2:o.tagName,i.isHTML(u[""])&&w.match(/^(?:disabled|checked|selected)$/i)||x.warning('attribute "'+w+'" missed value!! "'+w+'" instead2!!'),addAttribute(w,w,s),s=C,L=1;break;case 5:x.warning('attribute space is required"'+w+'"!!');case 6:L=1,s=C;break;case 3:L=4,s=C;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}C++}}function appendElement(a,s,o){for(var u=a.tagName,_=null,x=a.length;x--;){var w=a[x],C=w.qName,L=w.value;if((V=C.indexOf(":"))>0)var B=w.prefix=C.slice(0,V),U=C.slice(V+1),j="xmlns"===B&&U;else U=C,B=null,j="xmlns"===C&&"";w.localName=U,!1!==j&&(null==_&&(_={},_copy(o,o={})),o[j]=_[j]=L,w.uri=i.XMLNS,s.startPrefixMapping(j,L))}for(x=a.length;x--;){(B=(w=a[x]).prefix)&&("xml"===B&&(w.uri=i.XML),"xmlns"!==B&&(w.uri=o[B||""]))}var V;(V=u.indexOf(":"))>0?(B=a.prefix=u.slice(0,V),U=a.localName=u.slice(V+1)):(B=null,U=a.localName=u);var z=a.uri=o[B||""];if(s.startElement(z,U,u,a),!a.closed)return a.currentNSMap=o,a.localNSMap=_,!0;if(s.endElement(z,U,u),_)for(B in _)Object.prototype.hasOwnProperty.call(_,B)&&s.endPrefixMapping(B)}function parseHtmlSpecialContent(i,a,s,o,u){if(/^(?:script|textarea)$/i.test(s)){var _=i.indexOf("</"+s+">",a),x=i.substring(a+1,_);if(/[&<]/.test(x))return/^script$/i.test(s)?(u.characters(x,0,x.length),_):(x=x.replace(/&#?\w+;/g,o),u.characters(x,0,x.length),_)}return a+1}function fixSelfClosed(i,a,s,o){var u=o[s];return null==u&&((u=i.lastIndexOf("</"+s+">"))<a&&(u=i.lastIndexOf("</"+s)),o[s]=u),u<a}function _copy(i,a){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])}function parseDCC(i,a,s,o){if("-"===i.charAt(a+2))return"-"===i.charAt(a+3)?(u=i.indexOf("--\x3e",a+4))>a?(s.comment(i,a+4,u-a-4),u+3):(o.error("Unclosed comment"),-1):-1;if("CDATA["==i.substr(a+3,6)){var u=i.indexOf("]]>",a+9);return s.startCDATA(),s.characters(i,a+9,u-a-9),s.endCDATA(),u+3}var _=split(i,a),x=_.length;if(x>1&&/!doctype/i.test(_[0][0])){var w=_[1][0],C=!1,L=!1;x>3&&(/^public$/i.test(_[2][0])?(C=_[3][0],L=x>4&&_[4][0]):/^system$/i.test(_[2][0])&&(L=_[3][0]));var B=_[x-1];return s.startDTD(w,C,L),s.endDTD(),B.index+B[0].length}return-1}function parseInstruction(i,a,s){var o=i.indexOf("?>",a);if(o){var u=i.substring(a,o).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return u?(u[0].length,s.processingInstruction(u[1],u[2]),o+2):-1}return-1}function ElementAttributes(){this.attributeNames={}}function split(i,a){var s,o=[],u=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(u.lastIndex=a,u.exec(i);s=u.exec(i);)if(o.push(s),s[1])return o}return __name(ParseError,"ParseError"),ParseError.prototype=new Error,ParseError.prototype.name=ParseError.name,__name(XMLReader,"XMLReader"),XMLReader.prototype={parse:/* @__PURE__ */__name(function(i,a,s){var o=this.domBuilder;o.startDocument(),_copy(a,a={}),parse2(i,a,s,o,this.errorHandler),o.endDocument()},"parse")},__name(parse2,"parse"),__name(copyLocator,"copyLocator"),__name(parseElementStartPart,"parseElementStartPart"),__name(appendElement,"appendElement"),__name(parseHtmlSpecialContent,"parseHtmlSpecialContent"),__name(fixSelfClosed,"fixSelfClosed"),__name(_copy,"_copy"),__name(parseDCC,"parseDCC"),__name(parseInstruction,"parseInstruction"),__name(ElementAttributes,"ElementAttributes"),ElementAttributes.prototype={setTagName:/* @__PURE__ */__name(function(i){if(!o.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},"setTagName"),addValue:/* @__PURE__ */__name(function(i,a,s){if(!o.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:a,offset:s}},"addValue"),length:0,getLocalName:/* @__PURE__ */__name(function(i){return this[i].localName},"getLocalName"),getLocator:/* @__PURE__ */__name(function(i){return this[i].locator},"getLocator"),getQName:/* @__PURE__ */__name(function(i){return this[i].qName},"getQName"),getURI:/* @__PURE__ */__name(function(i){return this[i].uri},"getURI"),getValue:/* @__PURE__ */__name(function(i){return this[i].value},"getValue")},__name(split,"split"),Hr.XMLReader=XMLReader,Hr.ParseError=ParseError,Hr}function requireDomParser(){if(Vr)return Fr;Vr=1;var i=requireConventions(),a=requireDom(),s=requireEntities(),o=requireSax(),u=a.DOMImplementation,_=i.NAMESPACE,x=o.ParseError,w=o.XMLReader;function normalizeLineEndings(i){return i.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function DOMParser2(i){this.options=i||{locator:{}}}function buildErrorHandler(i,a,s){if(!i){if(a instanceof DOMHandler)return a;i=a}var o={},u=i instanceof Function;function build(a){var _=i[a];!_&&u&&(_=2==i.length?function(s){i(a,s)}:i),o[a]=_&&function(i){_("[xmldom "+a+"]\t"+i+_locator(s))}||function(){}}return s=s||{},__name(build,"build"),build("warning"),build("error"),build("fatalError"),o}function DOMHandler(){this.cdata=!1}function position(i,a){a.lineNumber=i.lineNumber,a.columnNumber=i.columnNumber}function _locator(i){if(i)return"\n@"+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function _toString(i,a,s){return"string"==typeof i?i.substr(a,s):i.length>=a+s||a?new java.lang.String(i,a,s)+"":i}function appendElement(i,a){i.currentElement?i.currentElement.appendChild(a):i.doc.appendChild(a)}return __name(normalizeLineEndings,"normalizeLineEndings"),__name(DOMParser2,"DOMParser"),DOMParser2.prototype.parseFromString=function(i,a){var o=this.options,u=new w,x=o.domBuilder||new DOMHandler,C=o.errorHandler,L=o.locator,B=o.xmlns||{},U=/\/x?html?$/.test(a),j=U?s.HTML_ENTITIES:s.XML_ENTITIES;L&&x.setDocumentLocator(L),u.errorHandler=buildErrorHandler(C,x,L),u.domBuilder=o.domBuilder||x,U&&(B[""]=_.HTML),B.xml=B.xml||_.XML;var V=o.normalizeLineEndings||normalizeLineEndings;return i&&"string"==typeof i?u.parse(V(i),B,j):u.errorHandler.error("invalid doc source"),x.doc},__name(buildErrorHandler,"buildErrorHandler"),__name(DOMHandler,"DOMHandler"),__name(position,"position"),DOMHandler.prototype={startDocument:/* @__PURE__ */__name(function(){this.doc=(new u).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},"startDocument"),startElement:/* @__PURE__ */__name(function(i,a,s,o){var u=this.doc,_=u.createElementNS(i,s||a),x=o.length;appendElement(this,_),this.currentElement=_,this.locator&&position(this.locator,_);for(var w=0;w<x;w++){i=o.getURI(w);var C=o.getValue(w),L=(s=o.getQName(w),u.createAttributeNS(i,s));this.locator&&position(o.getLocator(w),L),L.value=L.nodeValue=C,_.setAttributeNode(L)}},"startElement"),endElement:/* @__PURE__ */__name(function(i,a,s){var o=this.currentElement;o.tagName,this.currentElement=o.parentNode},"endElement"),startPrefixMapping:/* @__PURE__ */__name(function(i,a){},"startPrefixMapping"),endPrefixMapping:/* @__PURE__ */__name(function(i){},"endPrefixMapping"),processingInstruction:/* @__PURE__ */__name(function(i,a){var s=this.doc.createProcessingInstruction(i,a);this.locator&&position(this.locator,s),appendElement(this,s)},"processingInstruction"),ignorableWhitespace:/* @__PURE__ */__name(function(i,a,s){},"ignorableWhitespace"),characters:/* @__PURE__ */__name(function(i,a,s){if(i=_toString.apply(this,arguments)){if(this.cdata)var o=this.doc.createCDATASection(i);else o=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(o):/^\s*$/.test(i)&&this.doc.appendChild(o),this.locator&&position(this.locator,o)}},"characters"),skippedEntity:/* @__PURE__ */__name(function(i){},"skippedEntity"),endDocument:/* @__PURE__ */__name(function(){this.doc.normalize()},"endDocument"),setDocumentLocator:/* @__PURE__ */__name(function(i){(this.locator=i)&&(i.lineNumber=0)},"setDocumentLocator"),comment:/* @__PURE__ */__name(function(i,a,s){i=_toString.apply(this,arguments);var o=this.doc.createComment(i);this.locator&&position(this.locator,o),appendElement(this,o)},"comment"),startCDATA:/* @__PURE__ */__name(function(){this.cdata=!0},"startCDATA"),endCDATA:/* @__PURE__ */__name(function(){this.cdata=!1},"endCDATA"),startDTD:/* @__PURE__ */__name(function(i,a,s){var o=this.doc.implementation;if(o&&o.createDocumentType){var u=o.createDocumentType(i,a,s);this.locator&&position(this.locator,u),appendElement(this,u),this.doc.doctype=u}},"startDTD"),warning:/* @__PURE__ */__name(function(i){console.warn("[xmldom warning]\t"+i,_locator(this.locator))},"warning"),error:/* @__PURE__ */__name(function(i){console.error("[xmldom error]\t"+i,_locator(this.locator))},"error"),fatalError:/* @__PURE__ */__name(function(i){throw new x(i,this.locator)},"fatalError")},__name(_locator,"_locator"),__name(_toString,"_toString"),"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){DOMHandler.prototype[i]=function(){return null}}),__name(appendElement,"appendElement"),Fr.__DOMHandler=DOMHandler,Fr.normalizeLineEndings=normalizeLineEndings,Fr.DOMParser=DOMParser2,Fr}function requireLib$1(){if(zr)return Rr;zr=1;var i=requireDom();return Rr.DOMImplementation=i.DOMImplementation,Rr.XMLSerializer=i.XMLSerializer,Rr.DOMParser=requireDomParser().DOMParser,Rr}__name(requireSax,"requireSax"),__name(requireDomParser,"requireDomParser"),__name(requireLib$1,"requireLib$1");var $r=requireLib$1();const Gr=/* @__PURE__ */__name(i=>!!i&&"object"==typeof i,"isObject$3"),Wr=/* @__PURE__ */__name((...i)=>i.reduce((i,a)=>("object"!=typeof a||Object.keys(a).forEach(s=>{Array.isArray(i[s])&&Array.isArray(a[s])?i[s]=i[s].concat(a[s]):Gr(i[s])&&Gr(a[s])?i[s]=Wr(i[s],a[s]):i[s]=a[s]}),i),{}),"merge$3"),qr=/* @__PURE__ */__name(i=>Object.keys(i).map(a=>i[a]),"values$2"),Xr=/* @__PURE__ */__name((i,a)=>{const s=[];for(let o=i;o<a;o++)s.push(o);return s},"range$1"),Qr=/* @__PURE__ */__name(i=>i.reduce((i,a)=>i.concat(a),[]),"flatten$1"),Kr=/* @__PURE__ */__name(i=>{if(!i.length)return[];const a=[];for(let s=0;s<i.length;s++)a.push(i[s]);return a},"from$1"),Yr=/* @__PURE__ */__name((i,a)=>i.reduce((i,s,o)=>(s[a]&&i.push(o),i),[]),"findIndexes$1"),Jr=/* @__PURE__ */__name((i,a)=>qr(i.reduce((i,s)=>(s.forEach(s=>{i[a(s)]=s}),i),{})),"union$1");var Zr="INVALID_NUMBER_OF_PERIOD",ea="DASH_EMPTY_MANIFEST",na="DASH_INVALID_XML",ia="NO_BASE_URL",ra="SEGMENT_TIME_UNSPECIFIED",aa="UNSUPPORTED_UTC_TIMING_SCHEME";const la=/* @__PURE__ */__name(({baseUrl:i="",source:a="",range:s="",indexRange:o=""})=>{const u={uri:a,resolvedUri:Qn(i||"",a)};if(s||o){const i=(s||o).split("-");let a,_=Tn.BigInt?Tn.BigInt(i[0]):parseInt(i[0],10),x=Tn.BigInt?Tn.BigInt(i[1]):parseInt(i[1],10);_<Number.MAX_SAFE_INTEGER&&"bigint"==typeof _&&(_=Number(_)),x<Number.MAX_SAFE_INTEGER&&"bigint"==typeof x&&(x=Number(x)),a="bigint"==typeof x||"bigint"==typeof _?Tn.BigInt(x)-Tn.BigInt(_)+Tn.BigInt(1):x-_+1,"bigint"==typeof a&&a<Number.MAX_SAFE_INTEGER&&(a=Number(a)),u.byterange={length:a,offset:_}}return u},"urlTypeToSegment$1"),ca=/* @__PURE__ */__name(i=>{let a;return a="bigint"==typeof i.offset||"bigint"==typeof i.length?Tn.BigInt(i.offset)+Tn.BigInt(i.length)-Tn.BigInt(1):i.offset+i.length-1,`${i.offset}-${a}`},"byteRangeToString$1"),ua=/* @__PURE__ */__name(i=>(i&&"number"!=typeof i&&(i=parseInt(i,10)),isNaN(i)?null:i),"parseEndNumber$1"),da={static(i){const{duration:a,timescale:s=1,sourceDuration:o,periodDuration:u}=i,_=ua(i.endNumber),x=a/s;return"number"==typeof _?{start:0,end:_}:"number"==typeof u?{start:0,end:u/x}:{start:0,end:o/x}},dynamic(i){const{NOW:a,clientOffset:s,availabilityStartTime:o,timescale:u=1,duration:_,periodStart:x=0,minimumUpdatePeriod:w=0,timeShiftBufferDepth:C=1/0}=i,L=ua(i.endNumber),B=(a+s)/1e3,U=o+x,j=B+w-U,V=Math.ceil(j*u/_),z=Math.floor((B-U-C)*u/_),$=Math.floor((B-U)*u/_);return{start:Math.max(0,z),end:"number"==typeof L?L:Math.min(V,$)}}},ma=/* @__PURE__ */__name(i=>a=>{const{duration:s,timescale:o=1,periodStart:u,startNumber:_=1}=i;return{number:_+a,duration:s/o,timeline:u,time:a*s}},"toSegments$1"),ga=/* @__PURE__ */__name(i=>{const{type:a,duration:s,timescale:o=1,periodDuration:u,sourceDuration:_}=i,{start:x,end:w}=da[a](i),C=Xr(x,w).map(ma(i));if("static"===a){const i=C.length-1,a="number"==typeof u?u:_;C[i].duration=a-s/o*i}return C},"parseByDuration$1"),_a=/* @__PURE__ */__name(i=>{const{baseUrl:a,initialization:s={},sourceDuration:o,indexRange:u="",periodStart:_,presentationTime:x,number:w=0,duration:C}=i;if(!a)throw new Error(ia);const L=la({baseUrl:a,source:s.sourceURL,range:s.range}),B=la({baseUrl:a,source:a,indexRange:u});if(B.map=L,C){const a=ga(i);a.length&&(B.duration=a[0].duration,B.timeline=a[0].timeline)}else o&&(B.duration=o,B.timeline=_);return B.presentationTime=x||_,B.number=w,[B]},"segmentsFromBase$1"),ya=/* @__PURE__ */__name((i,a,s)=>{const o=i.sidx.map?i.sidx.map:null,u=i.sidx.duration,_=i.timeline||0,x=i.sidx.byterange,w=x.offset+x.length,C=a.timescale,L=a.references.filter(i=>1!==i.referenceType),B=[],U=i.endList?"static":"dynamic",j=i.sidx.timeline;let V,z=j,$=i.mediaSequence||0;V="bigint"==typeof a.firstOffset?Tn.BigInt(w)+a.firstOffset:w+a.firstOffset;for(let Y=0;Y<L.length;Y++){const i=a.references[Y],x=i.referencedSize,w=i.subsegmentDuration;let L;L="bigint"==typeof V?V+Tn.BigInt(x)-Tn.BigInt(1):V+x-1;const Z=_a({baseUrl:s,timescale:C,timeline:_,periodStart:j,presentationTime:z,number:$,duration:w,sourceDuration:u,indexRange:`${V}-${L}`,type:U})[0];o&&(Z.map=o),B.push(Z),V+="bigint"==typeof V?Tn.BigInt(x):x,z+=w/C,$++}return i.segments=B,i},"addSidxSegmentsToPlaylist$1$1"),va=["AUDIO","SUBTITLES"],ba=1/60,xa=/* @__PURE__ */__name(i=>Jr(i,({timeline:i})=>i).sort((i,a)=>i.timeline>a.timeline?1:-1),"getUniqueTimelineStarts$1"),wa=/* @__PURE__ */__name((i,a)=>{for(let s=0;s<i.length;s++)if(i[s].attributes.NAME===a)return i[s];return null},"findPlaylistWithName$1"),Aa=/* @__PURE__ */__name(i=>{let a=[];return Dr(i,va,(i,s,o,u)=>{a=a.concat(i.playlists||[])}),a},"getMediaGroupPlaylists$1"),Ca=/* @__PURE__ */__name(({playlist:i,mediaSequence:a})=>{i.mediaSequence=a,i.segments.forEach((a,s)=>{a.number=i.mediaSequence+s})},"updateMediaSequenceForPlaylist$1"),Ea=/* @__PURE__ */__name(({oldPlaylists:i,newPlaylists:a,timelineStarts:s})=>{a.forEach(a=>{a.discontinuitySequence=s.findIndex(function({timeline:i}){return i===a.timeline});const o=wa(i,a.attributes.NAME);if(!o)return;if(a.sidx)return;const u=a.segments[0],_=o.segments.findIndex(function(i){return Math.abs(i.presentationTime-u.presentationTime)<ba});if(-1===_)return Ca({playlist:a,mediaSequence:o.mediaSequence+o.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),void((!o.segments.length&&a.timeline>o.timeline||o.segments.length&&a.timeline>o.segments[o.segments.length-1].timeline)&&a.discontinuitySequence--);o.segments[_].discontinuity&&!u.discontinuity&&(u.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),Ca({playlist:a,mediaSequence:o.segments[_].number})})},"updateSequenceNumbers$1"),ka=/* @__PURE__ */__name(({oldManifest:i,newManifest:a})=>{const s=i.playlists.concat(Aa(i)),o=a.playlists.concat(Aa(a));return a.timelineStarts=xa([i.timelineStarts,a.timelineStarts]),Ea({oldPlaylists:s,newPlaylists:o,timelineStarts:a.timelineStarts}),a},"positionManifestOnTimeline$1"),Ia=/* @__PURE__ */__name(i=>i&&i.uri+"-"+ca(i.byterange),"generateSidxKey$1"),La=/* @__PURE__ */__name(i=>{const a=i.reduce(function(i,a){return i[a.attributes.baseUrl]||(i[a.attributes.baseUrl]=[]),i[a.attributes.baseUrl].push(a),i},{});let s=[];return Object.values(a).forEach(i=>{const a=qr(i.reduce((i,a)=>{const s=a.attributes.id+(a.attributes.lang||"");return i[s]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),i[s].segments.push(...a.segments)),a.attributes.contentProtection&&(i[s].attributes.contentProtection=a.attributes.contentProtection)):(i[s]=a,i[s].attributes.timelineStarts=[]),i[s].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),i},{}));s=s.concat(a)}),s.map(i=>(i.discontinuityStarts=Yr(i.segments||[],"discontinuity"),i))},"mergeDiscontiguousPlaylists$1"),Da=/* @__PURE__ */__name((i,a)=>{const s=Ia(i.sidx),o=s&&a[s]&&a[s].sidx;return o&&ya(i,o,i.sidx.resolvedUri),i},"addSidxSegmentsToPlaylist$2"),Na=/* @__PURE__ */__name((i,a={})=>{if(!Object.keys(a).length)return i;for(const s in i)i[s]=Da(i[s],a);return i},"addSidxSegmentsToPlaylists$1"),Ba=/* @__PURE__ */__name(({attributes:i,segments:a,sidx:s,mediaSequence:o,discontinuitySequence:u,discontinuityStarts:_},x)=>{const w={attributes:{NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs,"PROGRAM-ID":1},uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuitySequence:u,discontinuityStarts:_,timelineStarts:i.timelineStarts,mediaSequence:o,segments:a};return i.contentProtection&&(w.contentProtection=i.contentProtection),i.serviceLocation&&(w.attributes.serviceLocation=i.serviceLocation),s&&(w.sidx=s),x&&(w.attributes.AUDIO="audio",w.attributes.SUBTITLES="subs"),w},"formatAudioPlaylist$1"),Fa=/* @__PURE__ */__name(({attributes:i,segments:a,mediaSequence:s,discontinuityStarts:o,discontinuitySequence:u})=>{void 0===a&&(a=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);const _={NAME:i.id,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1};i.codecs&&(_.CODECS=i.codecs);const x={attributes:_,uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:o,discontinuitySequence:u,mediaSequence:s,segments:a};return i.serviceLocation&&(x.attributes.serviceLocation=i.serviceLocation),x},"formatVttPlaylist$1"),ja=/* @__PURE__ */__name((i,a={},s=!1)=>{let o;const u=i.reduce((i,u)=>{const _=u.attributes.role&&u.attributes.role.value||"",x=u.attributes.lang||"";let w=u.attributes.label||"main";if(x&&!u.attributes.label){const i=_?` (${_})`:"";w=`${u.attributes.lang}${i}`}i[w]||(i[w]={language:x,autoselect:!0,default:"main"===_,playlists:[],uri:""});const C=Da(Ba(u,s),a);return i[w].playlists.push(C),void 0===o&&"main"===_&&(o=u,o.default=!0),i},{});if(!o){u[Object.keys(u)[0]].default=!0}return u},"organizeAudioPlaylists$1"),za=/* @__PURE__ */__name((i,a={})=>i.reduce((i,s)=>{const o=s.attributes.label||s.attributes.lang||"text",u=s.attributes.lang||"und";return i[o]||(i[o]={language:u,default:!1,autoselect:!1,playlists:[],uri:""}),i[o].playlists.push(Da(Fa(s),a)),i},{}),"organizeVttPlaylists$1"),Ha=/* @__PURE__ */__name(i=>i.reduce((i,a)=>a?(a.forEach(a=>{const{channel:s,language:o}=a;i[o]={autoselect:!1,default:!1,instreamId:s,language:o},a.hasOwnProperty("aspectRatio")&&(i[o].aspectRatio=a.aspectRatio),a.hasOwnProperty("easyReader")&&(i[o].easyReader=a.easyReader),a.hasOwnProperty("3D")&&(i[o]["3D"]=a["3D"])}),i):i,{}),"organizeCaptionServices$1"),$a=/* @__PURE__ */__name(({attributes:i,segments:a,sidx:s,discontinuityStarts:o})=>{const u={attributes:{NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth,"PROGRAM-ID":1},uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,discontinuityStarts:o,timelineStarts:i.timelineStarts,segments:a};return i.frameRate&&(u.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(u.contentProtection=i.contentProtection),i.serviceLocation&&(u.attributes.serviceLocation=i.serviceLocation),s&&(u.sidx=s),u},"formatVideoPlaylist$1"),Ga=/* @__PURE__ */__name(({attributes:i})=>"video/mp4"===i.mimeType||"video/webm"===i.mimeType||"video"===i.contentType,"videoOnly$1"),Ja=/* @__PURE__ */__name(({attributes:i})=>"audio/mp4"===i.mimeType||"audio/webm"===i.mimeType||"audio"===i.contentType,"audioOnly$1"),es=/* @__PURE__ */__name(({attributes:i})=>"text/vtt"===i.mimeType||"text"===i.contentType,"vttOnly$1"),ns=/* @__PURE__ */__name((i,a)=>{i.forEach(i=>{i.mediaSequence=0,i.discontinuitySequence=a.findIndex(function({timeline:a}){return a===i.timeline}),i.segments&&i.segments.forEach((i,a)=>{i.number=a})})},"addMediaSequenceValues$1"),is=/* @__PURE__ */__name(i=>i?Object.keys(i).reduce((a,s)=>{const o=i[s];return a.concat(o.playlists)},[]):[],"flattenMediaGroupPlaylists$1"),rs=/* @__PURE__ */__name(({dashPlaylists:i,locations:a,contentSteering:s,sidxMapping:o={},previousManifest:u,eventStream:_})=>{if(!i.length)return{};const{sourceDuration:x,type:w,suggestedPresentationDelay:C,minimumUpdatePeriod:L}=i[0].attributes,B=La(i.filter(Ga)).map($a),U=La(i.filter(Ja)),j=La(i.filter(es)),V=i.map(i=>i.attributes.captionServices).filter(Boolean),z={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:x,playlists:Na(B,o)};L>=0&&(z.minimumUpdatePeriod=1e3*L),a&&(z.locations=a),s&&(z.contentSteering=s),"dynamic"===w&&(z.suggestedPresentationDelay=C),_&&_.length>0&&(z.eventStream=_);const $=0===z.playlists.length,Y=U.length?ja(U,o,$):null,Z=j.length?za(j,o):null,ee=B.concat(is(Y),is(Z)),ie=ee.map(({timelineStarts:i})=>i);return z.timelineStarts=xa(ie),ns(ee,z.timelineStarts),Y&&(z.mediaGroups.AUDIO.audio=Y),Z&&(z.mediaGroups.SUBTITLES.subs=Z),V.length&&(z.mediaGroups["CLOSED-CAPTIONS"].cc=Ha(V)),u?ka({oldManifest:u,newManifest:z}):z},"toM3u8$1"),as=/* @__PURE__ */__name((i,a,s)=>{const{NOW:o,clientOffset:u,availabilityStartTime:_,timescale:x=1,periodStart:w=0,minimumUpdatePeriod:C=0}=i,L=(o+u)/1e3+C-(_+w);return Math.ceil((L*x-a)/s)},"getLiveRValue$1"),ss=/* @__PURE__ */__name((i,a)=>{const{type:s,minimumUpdatePeriod:o=0,media:u="",sourceDuration:_,timescale:x=1,startNumber:w=1,periodStart:C}=i,L=[];let B=-1;for(let U=0;U<a.length;U++){const j=a[U],V=j.d,z=j.r||0,$=j.t||0;let Y;if(B<0&&(B=$),$&&$>B&&(B=$),z<0){const w=U+1;Y=w===a.length?"dynamic"===s&&o>0&&u.indexOf("$Number$")>0?as(i,B,V):(_*x-B)/V:(a[w].t-B)/V}else Y=z+1;const Z=w+L.length+Y;let ee=w+L.length;for(;ee<Z;)L.push({number:ee,duration:V/x,time:B,timeline:C}),B+=V,ee++}return L},"parseByTimeline$1"),os=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ls=/* @__PURE__ */__name(i=>(a,s,o,u)=>{if("$$"===a)return"$";if(void 0===i[s])return a;const _=""+i[s];return"RepresentationID"===s?_:(u=o?parseInt(u,10):1,_.length>=u?_:`${new Array(u-_.length+1).join("0")}${_}`)},"identifierReplacement$1"),cs=/* @__PURE__ */__name((i,a)=>i.replace(os,ls(a)),"constructTemplateUrl$1"),us=/* @__PURE__ */__name((i,a)=>i.duration||a?i.duration?ga(i):ss(i,a):[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}],"parseTemplateInfo$1"),ds=/* @__PURE__ */__name((i,a)=>{const s={RepresentationID:i.id,Bandwidth:i.bandwidth||0},{initialization:o={sourceURL:"",range:""}}=i,u=la({baseUrl:i.baseUrl,source:cs(o.sourceURL,s),range:o.range});return us(i,a).map(a=>{s.Number=a.number,s.Time=a.time;const o=cs(i.media||"",s),_=i.timescale||1,x=i.presentationTimeOffset||0,w=i.periodStart+(a.time-x)/_;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:Qn(i.baseUrl||"",o),map:u,number:a.number,presentationTime:w}})},"segmentsFromTemplate$1"),hs=/* @__PURE__ */__name((i,a)=>{const{baseUrl:s,initialization:o={}}=i,u=la({baseUrl:s,source:o.sourceURL,range:o.range}),_=la({baseUrl:s,source:a.media,range:a.mediaRange});return _.map=u,_},"SegmentURLToSegmentObject$1"),ps=/* @__PURE__ */__name((i,a)=>{const{duration:s,segmentUrls:o=[],periodStart:u}=i;if(!s&&!a||s&&a)throw new Error(ra);const _=o.map(a=>hs(i,a));let x;s&&(x=ga(i)),a&&(x=ss(i,a));return x.map((a,s)=>{if(_[s]){const o=_[s],x=i.timescale||1,w=i.presentationTimeOffset||0;return o.timeline=a.timeline,o.duration=a.duration,o.number=a.number,o.presentationTime=u+(a.time-w)/x,o}}).filter(i=>i)},"segmentsFromList$1"),ms=/* @__PURE__ */__name(({attributes:i,segmentInfo:a})=>{let s,o;a.template?(o=ds,s=Wr(i,a.template)):a.base?(o=_a,s=Wr(i,a.base)):a.list&&(o=ps,s=Wr(i,a.list));const u={attributes:i};if(!o)return u;const _=o(s,a.segmentTimeline);if(s.duration){const{duration:i,timescale:a=1}=s;s.duration=i/a}else _.length?s.duration=_.reduce((i,a)=>Math.max(i,Math.ceil(a.duration)),0):s.duration=0;return u.attributes=s,u.segments=_,a.base&&s.indexRange&&(u.sidx=_[0],u.segments=[]),u},"generateSegments$1"),fs=/* @__PURE__ */__name(i=>i.map(ms),"toPlaylists$1"),gs=/* @__PURE__ */__name((i,a)=>Kr(i.childNodes).filter(({tagName:i})=>i===a),"findChildren$1"),_s=/* @__PURE__ */__name(i=>i.textContent.trim(),"getContent$1"),ys=/* @__PURE__ */__name(i=>parseFloat(i.split("/").reduce((i,a)=>i/a)),"parseDivisionValue$1"),vs=/* @__PURE__ */__name(i=>{const a=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!a)return 0;const[s,o,u,_,x,w]=a.slice(1);return 31536e3*parseFloat(s||0)+2592e3*parseFloat(o||0)+86400*parseFloat(u||0)+3600*parseFloat(_||0)+60*parseFloat(x||0)+parseFloat(w||0)},"parseDuration$1"),bs=/* @__PURE__ */__name(i=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)),"parseDate$1"),Ts={mediaPresentationDuration:i=>vs(i),availabilityStartTime:i=>bs(i)/1e3,minimumUpdatePeriod:i=>vs(i),suggestedPresentationDelay:i=>vs(i),type:i=>i,timeShiftBufferDepth:i=>vs(i),start:i=>vs(i),width:i=>parseInt(i,10),height:i=>parseInt(i,10),bandwidth:i=>parseInt(i,10),frameRate:i=>ys(i),startNumber:i=>parseInt(i,10),timescale:i=>parseInt(i,10),presentationTimeOffset:i=>parseInt(i,10),duration(i){const a=parseInt(i,10);return isNaN(a)?vs(i):a},d:i=>parseInt(i,10),t:i=>parseInt(i,10),r:i=>parseInt(i,10),presentationTime:i=>parseInt(i,10),DEFAULT:i=>i},Ss=/* @__PURE__ */__name(i=>i&&i.attributes?Kr(i.attributes).reduce((i,a)=>{const s=Ts[a.name]||Ts.DEFAULT;return i[a.name]=s(a.value),i},{}):{},"parseAttributes$2"),xs={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},ws=/* @__PURE__ */__name((i,a)=>a.length?Qr(i.map(function(i){return a.map(function(a){const s=_s(a),o=Qn(i.baseUrl,s),u=Wr(Ss(a),{baseUrl:o});return o!==s&&!u.serviceLocation&&i.serviceLocation&&(u.serviceLocation=i.serviceLocation),u})})):i,"buildBaseUrls$1"),As=/* @__PURE__ */__name(i=>{const a=gs(i,"SegmentTemplate")[0],s=gs(i,"SegmentList")[0],o=s&&gs(s,"SegmentURL").map(i=>Wr({tag:"SegmentURL"},Ss(i))),u=gs(i,"SegmentBase")[0],_=s||a,x=_&&gs(_,"SegmentTimeline")[0],w=s||u||a,C=w&&gs(w,"Initialization")[0],L=a&&Ss(a);L&&C?L.initialization=C&&Ss(C):L&&L.initialization&&(L.initialization={sourceURL:L.initialization});const B={template:L,segmentTimeline:x&&gs(x,"S").map(i=>Ss(i)),list:s&&Wr(Ss(s),{segmentUrls:o,initialization:Ss(C)}),base:u&&Wr(Ss(u),{initialization:Ss(C)})};return Object.keys(B).forEach(i=>{B[i]||delete B[i]}),B},"getSegmentInformation$1"),Cs=/* @__PURE__ */__name((i,a,s)=>o=>{const u=gs(o,"BaseURL"),_=ws(a,u),x=Wr(i,Ss(o)),w=As(o);return _.map(i=>({segmentInfo:Wr(s,w),attributes:Wr(x,i)}))},"inheritBaseUrls$1"),Es=/* @__PURE__ */__name(i=>i.reduce((i,a)=>{const s=Ss(a);s.schemeIdUri&&(s.schemeIdUri=s.schemeIdUri.toLowerCase());const o=xs[s.schemeIdUri];if(o){i[o]={attributes:s};const u=gs(a,"cenc:pssh")[0];if(u){const a=_s(u);i[o].pssh=a&&decodeB64ToUint8Array$1(a)}}return i},{}),"generateKeySystemInformation$1"),Ms=/* @__PURE__ */__name(i=>{if("urn:scte:dash:cc:cea-608:2015"===i.schemeIdUri){return("string"!=typeof i.value?[]:i.value.split(";")).map(i=>{let a,s;return s=i,/^CC\d=/.test(i)?[a,s]=i.split("="):/^CC\d$/.test(i)&&(a=i),{channel:a,language:s}})}if("urn:scte:dash:cc:cea-708:2015"===i.schemeIdUri){return("string"!=typeof i.value?[]:i.value.split(";")).map(i=>{const a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){const[s,o=""]=i.split("=");a.channel=s,a.language=i,o.split(",").forEach(i=>{const[s,o]=i.split(":");"lang"===s?a.language=o:"er"===s?a.easyReader=Number(o):"war"===s?a.aspectRatio=Number(o):"3D"===s&&(a["3D"]=Number(o))})}else a.language=i;return a.channel&&(a.channel="SERVICE"+a.channel),a})}},"parseCaptionServiceMetadata$1"),ks=/* @__PURE__ */__name(i=>Qr(gs(i.node,"EventStream").map(a=>{const s=Ss(a),o=s.schemeIdUri;return gs(a,"Event").map(a=>{const u=Ss(a),_=u.presentationTime||0,x=s.timescale||1,w=u.duration||0,C=_/x+i.attributes.start;return{schemeIdUri:o,value:s.value,id:u.id,start:C,end:C+w/x,messageData:_s(a)||u.messageData,contentEncoding:s.contentEncoding,presentationTimeOffset:s.presentationTimeOffset||0}})})),"toEventStream"),Ps=/* @__PURE__ */__name((i,a,s)=>o=>{const u=Ss(o),_=ws(a,gs(o,"BaseURL")),x=gs(o,"Role")[0],w={role:Ss(x)};let C=Wr(i,u,w);const L=gs(o,"Accessibility")[0],B=Ms(Ss(L));B&&(C=Wr(C,{captionServices:B}));const U=gs(o,"Label")[0];if(U&&U.childNodes.length){const i=U.childNodes[0].nodeValue.trim();C=Wr(C,{label:i})}const j=Es(gs(o,"ContentProtection"));Object.keys(j).length&&(C=Wr(C,{contentProtection:j}));const V=As(o),z=gs(o,"Representation"),$=Wr(s,V);return Qr(z.map(Cs(C,_,$)))},"toRepresentations$1"),Is=/* @__PURE__ */__name((i,a)=>(s,o)=>{const u=ws(a,gs(s.node,"BaseURL")),_=Wr(i,{periodStart:s.attributes.start});"number"==typeof s.attributes.duration&&(_.periodDuration=s.attributes.duration);const x=gs(s.node,"AdaptationSet"),w=As(s.node);return Qr(x.map(Ps(_,u,w)))},"toAdaptationSets$1"),Ls=/* @__PURE__ */__name((i,a)=>{if(i.length>1&&a({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!i.length)return null;const s=Wr({serverURL:_s(i[0])},Ss(i[0]));return s.queryBeforeStart="true"===s.queryBeforeStart,s},"generateContentSteeringInformation"),Ds=/* @__PURE__ */__name(({attributes:i,priorPeriodAttributes:a,mpdType:s})=>"number"==typeof i.start?i.start:a&&"number"==typeof a.start&&"number"==typeof a.duration?a.start+a.duration:a||"static"!==s?null:0,"getPeriodStart$1"),Rs=/* @__PURE__ */__name((i,a={})=>{const{manifestUri:s="",NOW:o=Date.now(),clientOffset:u=0,eventHandler:_=/* @__PURE__ */__name(function(){},"eventHandler")}=a,x=gs(i,"Period");if(!x.length)throw new Error(Zr);const w=gs(i,"Location"),C=Ss(i),L=ws([{baseUrl:s}],gs(i,"BaseURL")),B=gs(i,"ContentSteering");C.type=C.type||"static",C.sourceDuration=C.mediaPresentationDuration||0,C.NOW=o,C.clientOffset=u,w.length&&(C.locations=w.map(_s));const U=[];return x.forEach((i,a)=>{const s=Ss(i),o=U[a-1];s.start=Ds({attributes:s,priorPeriodAttributes:o?o.attributes:null,mpdType:C.type}),U.push({node:i,attributes:s})}),{locations:C.locations,contentSteeringInfo:Ls(B,_),representationInfo:Qr(U.map(Is(C,L))),eventStream:Qr(U.map(ks))}},"inheritAttributes$1"),Os=/* @__PURE__ */__name(i=>{if(""===i)throw new Error(ea);const a=new $r.DOMParser;let s,o;try{s=a.parseFromString(i,"application/xml"),o=s&&"MPD"===s.documentElement.tagName?s.documentElement:null}catch(u){}if(!o||o&&o.getElementsByTagName("parsererror").length>0)throw new Error(na);return o},"stringToMpdXml$1"),Ns=/* @__PURE__ */__name(i=>{const a=gs(i,"UTCTiming")[0];if(!a)return null;const s=Ss(a);switch(s.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":s.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":s.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":s.method="DIRECT",s.value=Date.parse(s.value);break;default:throw new Error(aa)}return s},"parseUTCTimingScheme$1"),Bs=/* @__PURE__ */__name((i,a={})=>{const s=Rs(Os(i),a),o=fs(s.representationInfo);return rs({dashPlaylists:o,locations:s.locations,contentSteering:s.contentSteeringInfo,sidxMapping:a.sidxMapping,previousManifest:a.previousManifest,eventStream:s.eventStream})},"parse$1"),Fs=/* @__PURE__ */__name(i=>Ns(Os(i)),"parseUTCTiming$1");var Us,js,Vs,zs;function requireNumbers$1(){if(js)return Us;js=1;var i=Math.pow(2,32);return Us={getUint64:/* @__PURE__ */__name(function(a){var s,o=new DataView(a.buffer,a.byteOffset,a.byteLength);return o.getBigUint64?(s=o.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(s):s:o.getUint32(0)*i+o.getUint32(4)},"getUint64"),MAX_UINT32:i}}function requireParseSidx$1(){if(zs)return Vs;zs=1;var i=requireNumbers$1().getUint64;return Vs=/* @__PURE__ */__name(function(a){var s=new DataView(a.buffer,a.byteOffset,a.byteLength),o={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:s.getUint32(4),timescale:s.getUint32(8)},u=12;0===o.version?(o.earliestPresentationTime=s.getUint32(u),o.firstOffset=s.getUint32(u+4),u+=8):(o.earliestPresentationTime=i(a.subarray(u)),o.firstOffset=i(a.subarray(u+8)),u+=16),u+=2;var _=s.getUint16(u);for(u+=2;_>0;u+=12,_--)o.references.push({referenceType:(128&a[u])>>>7,referencedSize:2147483647&s.getUint32(u),subsegmentDuration:s.getUint32(u+4),startsWithSap:!!(128&a[u+8]),sapType:(112&a[u+8])>>>4,sapDeltaTime:268435455&s.getUint32(u+8)});return o},"parseSidx")}__name(requireNumbers$1,"requireNumbers$1"),__name(requireParseSidx$1,"requireParseSidx$1");const Hs=/* @__PURE__ */getDefaultExportFromCjs(requireParseSidx$1());var $s=xr([73,68,51]),Gs=/* @__PURE__ */__name(function getId3Size2(i,a){void 0===a&&(a=0);var s=(i=xr(i))[a+5],o=i[a+6]<<21|i[a+7]<<14|i[a+8]<<7|i[a+9];return(16&s)>>4?o+20:o+10},"getId3Size"),Ws=/* @__PURE__ */__name(function getId3Offset2(i,a){return void 0===a&&(a=0),(i=xr(i)).length-a<10||!Lr(i,$s,{offset:a})?a:getId3Offset2(i,a+=Gs(i,a))},"getId3Offset"),qs=/* @__PURE__ */__name(function normalizePath2(i){return"string"==typeof i?Pr(i):i},"normalizePath"),Xs=/* @__PURE__ */__name(function normalizePaths2(i){return Array.isArray(i)?i.map(function(i){return qs(i)}):[qs(i)]},"normalizePaths"),Qs=/* @__PURE__ */__name(function findBox2(i,a,s){void 0===s&&(s=!1),a=Xs(a),i=xr(i);var o=[];if(!a.length)return o;for(var u=0;u<i.length;){var _=(i[u]<<24|i[u+1]<<16|i[u+2]<<8|i[u+3])>>>0,x=i.subarray(u+4,u+8);if(0===_)break;var w=u+_;if(w>i.length){if(s)break;w=i.length}var C=i.subarray(u+8,w);Lr(x,a[0])&&(1===a.length?o.push(C):o.push.apply(o,findBox2(C,a.slice(1),s))),u=w}return o},"findBox"),Ks={EBML:xr([26,69,223,163]),DocType:xr([66,130]),Segment:xr([24,83,128,103]),SegmentInfo:xr([21,73,169,102]),Tracks:xr([22,84,174,107]),Track:xr([174]),TrackNumber:xr([215]),DefaultDuration:xr([35,227,131]),TrackEntry:xr([174]),TrackType:xr([131]),FlagDefault:xr([136]),CodecID:xr([134]),CodecPrivate:xr([99,162]),VideoTrack:xr([224]),AudioTrack:xr([225]),Cluster:xr([31,67,182,117]),Timestamp:xr([231]),TimestampScale:xr([42,215,177]),BlockGroup:xr([160]),BlockDuration:xr([155]),Block:xr([161]),SimpleBlock:xr([163])},Ys=[128,64,32,16,8,4,2,1],Js=/* @__PURE__ */__name(function getLength2(i){for(var a=1,s=0;s<Ys.length&&!(i&Ys[s]);s++)a++;return a},"getLength"),Zs=/* @__PURE__ */__name(function getvint2(i,a,s,o){void 0===s&&(s=!0),void 0===o&&(o=!1);var u=Js(i[a]),_=i.subarray(a,a+u);return s&&((_=Array.prototype.slice.call(i,a,a+u))[0]^=Ys[u-1]),{length:u,value:Mr(_,{signed:o}),bytes:_}},"getvint"),eo=/* @__PURE__ */__name(function normalizePath2(i){return"string"==typeof i?i.match(/.{1,2}/g).map(function(i){return normalizePath2(i)}):"number"==typeof i?kr(i):i},"normalizePath"),to=/* @__PURE__ */__name(function normalizePaths2(i){return Array.isArray(i)?i.map(function(i){return eo(i)}):[eo(i)]},"normalizePaths"),no=/* @__PURE__ */__name(function getInfinityDataSize2(i,a,s){if(s>=a.length)return a.length;var o=Zs(a,s,!1);if(Lr(i.bytes,o.bytes))return s;var u=Zs(a,s+o.length);return getInfinityDataSize2(i,a,s+u.length+u.value+o.length)},"getInfinityDataSize"),io=/* @__PURE__ */__name(function findEbml2(i,a){a=to(a),i=xr(i);var s=[];if(!a.length)return s;for(var o=0;o<i.length;){var u=Zs(i,o,!1),_=Zs(i,o+u.length),x=o+u.length+_.length;127===_.value&&(_.value=no(u,i,x),_.value!==i.length&&(_.value-=x));var w=x+_.value>i.length?i.length:x+_.value,C=i.subarray(x,w);Lr(a[0],u.bytes)&&(1===a.length?s.push(C):s=s.concat(findEbml2(C,a.slice(1)))),o+=u.length+_.length+C.length}return s},"findEbml"),ro=xr([0,0,0,1]),ao=xr([0,0,1]),so=xr([0,0,3]),oo=/* @__PURE__ */__name(function discardEmulationPreventionBytes2(i){for(var a=[],s=1;s<i.length-2;)Lr(i.subarray(s,s+3),so)&&(a.push(s+2),s++),s++;if(0===a.length)return i;var o=i.length-a.length,u=new Uint8Array(o),_=0;for(s=0;s<o;_++,s++)_===a[0]&&(_++,a.shift()),u[s]=i[_];return u},"discardEmulationPreventionBytes"),lo=/* @__PURE__ */__name(function findNal2(i,a,s,o){i=xr(i),s=[].concat(s);for(var u,_=0,x=0;_<i.length&&(x<o||u);){var w=void 0;if(Lr(i.subarray(_),ro)?w=4:Lr(i.subarray(_),ao)&&(w=3),w){if(x++,u)return oo(i.subarray(u,_));var C=void 0;"h264"===a?C=31&i[_+w]:"h265"===a&&(C=i[_+w]>>1&63),-1!==s.indexOf(C)&&(u=_+w),_+=w+("h264"===a?1:2)}else _++}return i.subarray(0,0)},"findNal"),co=/* @__PURE__ */__name(function findH264Nal2(i,a,s){return lo(i,"h264",a,s)},"findH264Nal"),uo=/* @__PURE__ */__name(function findH265Nal2(i,a,s){return lo(i,"h265",a,s)},"findH265Nal"),ho={webm:xr([119,101,98,109]),matroska:xr([109,97,116,114,111,115,107,97]),flac:xr([102,76,97,67]),ogg:xr([79,103,103,83]),ac3:xr([11,119]),riff:xr([82,73,70,70]),avi:xr([65,86,73]),wav:xr([87,65,86,69]),"3gp":xr([102,116,121,112,51,103]),mp4:xr([102,116,121,112]),fmp4:xr([115,116,121,112]),mov:xr([102,116,121,112,113,116]),moov:xr([109,111,111,118]),moof:xr([109,111,111,102])},po={aac:/* @__PURE__ */__name(function aac(i){var a=Ws(i);return Lr(i,[255,16],{offset:a,mask:[255,22]})},"aac"),mp3:/* @__PURE__ */__name(function mp3(i){var a=Ws(i);return Lr(i,[255,2],{offset:a,mask:[255,6]})},"mp3"),webm:/* @__PURE__ */__name(function webm(i){var a=io(i,[Ks.EBML,Ks.DocType])[0];return Lr(a,ho.webm)},"webm"),mkv:/* @__PURE__ */__name(function mkv(i){var a=io(i,[Ks.EBML,Ks.DocType])[0];return Lr(a,ho.matroska)},"mkv"),mp4:/* @__PURE__ */__name(function mp4(i){return!po["3gp"](i)&&!po.mov(i)&&(!(!Lr(i,ho.mp4,{offset:4})&&!Lr(i,ho.fmp4,{offset:4}))||(!(!Lr(i,ho.moof,{offset:4})&&!Lr(i,ho.moov,{offset:4}))||void 0))},"mp4"),mov:/* @__PURE__ */__name(function mov(i){return Lr(i,ho.mov,{offset:4})},"mov"),"3gp":/* @__PURE__ */__name(function gp(i){return Lr(i,ho["3gp"],{offset:4})},"gp"),ac3:/* @__PURE__ */__name(function ac3(i){var a=Ws(i);return Lr(i,ho.ac3,{offset:a})},"ac3"),ts:/* @__PURE__ */__name(function ts(i){if(i.length<189&&i.length>=1)return 71===i[0];for(var a=0;a+188<i.length&&a<188;){if(71===i[a]&&71===i[a+188])return!0;a+=1}return!1},"ts"),flac:/* @__PURE__ */__name(function flac(i){var a=Ws(i);return Lr(i,ho.flac,{offset:a})},"flac"),ogg:/* @__PURE__ */__name(function ogg(i){return Lr(i,ho.ogg)},"ogg"),avi:/* @__PURE__ */__name(function avi(i){return Lr(i,ho.riff)&&Lr(i,ho.avi,{offset:8})},"avi"),wav:/* @__PURE__ */__name(function wav(i){return Lr(i,ho.riff)&&Lr(i,ho.wav,{offset:8})},"wav"),h264:/* @__PURE__ */__name(function h264(i){return co(i,7,3).length},"h264"),h265:/* @__PURE__ */__name(function h265(i){return uo(i,[32,33],3).length},"h265")},mo=Object.keys(po).filter(function(i){return"ts"!==i&&"h264"!==i&&"h265"!==i}).concat(["ts","h264","h265"]);mo.forEach(function(i){var a=po[i];po[i]=function(i){return a(xr(i))}});var fo,go,_o=po,yo=/* @__PURE__ */__name(function detectContainerForBytes2(i){i=xr(i);for(var a=0;a<mo.length;a++){var s=mo[a];if(_o[s](i))return s}return""},"detectContainerForBytes"),vo=/* @__PURE__ */__name(function isLikelyFmp4MediaSegment2(i){return Qs(i,["moof"]).length>0},"isLikelyFmp4MediaSegment");function requireClock$1(){if(go)return fo;go=1;var i,a,s,o,u,_,x,w=9e4;return i=/* @__PURE__ */__name(function(i){return i*w},"secondsToVideoTs"),a=/* @__PURE__ */__name(function(i,a){return i*a},"secondsToAudioTs"),s=/* @__PURE__ */__name(function(i){return i/w},"videoTsToSeconds"),o=/* @__PURE__ */__name(function(i,a){return i/a},"audioTsToSeconds"),u=/* @__PURE__ */__name(function(a,s){return i(o(a,s))},"audioTsToVideoTs"),_=/* @__PURE__ */__name(function(i,o){return a(s(i),o)},"videoTsToAudioTs"),x=/* @__PURE__ */__name(function(i,a,o){return s(o?i:i-a)},"metadataTsToSeconds"),fo={ONE_SECOND_IN_TS:w,secondsToVideoTs:i,secondsToAudioTs:a,videoTsToSeconds:s,audioTsToSeconds:o,audioTsToVideoTs:u,videoTsToAudioTs:_,metadataTsToSeconds:x}}__name(requireClock$1,"requireClock$1");var bo=requireClock$1(),To="8.23.3";const So={},xo=/* @__PURE__ */__name(function(i,a){return So[i]=So[i]||[],a&&(So[i]=So[i].concat(a)),So[i]},"hooks$1"),wo=/* @__PURE__ */__name(function(i,a){xo(i,a)},"hook$1"),Ao=/* @__PURE__ */__name(function(i,a){const s=xo(i).indexOf(a);return!(s<=-1)&&(So[i]=So[i].slice(),So[i].splice(s,1),!0)},"removeHook$1"),Co=/* @__PURE__ */__name(function(i,a){xo(i,[].concat(a).map(a=>{const s=/* @__PURE__ */__name((...o)=>(Ao(i,s),a(...o)),"wrapper");return s}))},"hookOnce$1"),Eo={prefixed:!0},Mo=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],ko=Mo[0];let Po;for(let dN=0;dN<Mo.length;dN++)if(Mo[dN][1]in An){Po=Mo[dN];break}if(Po){for(let i=0;i<Po.length;i++)Eo[ko[i]]=Po[i];Eo.prefixed=Po[0]!==ko[0]}let Io=[];const Lo=/* @__PURE__ */__name((i,a,s)=>(o,u,_)=>{const x=a.levels[u],w=new RegExp(`^(${x})$`);let C=i;if("log"!==o&&_.unshift(o.toUpperCase()+":"),s&&(C=`%c${i}`,_.unshift(s)),_.unshift(C+":"),Io){Io.push([].concat(_));const i=Io.length-1e3;Io.splice(0,i>0?i:0)}if(!Tn.console)return;let L=Tn.console[o];L||"debug"!==o||(L=Tn.console.info||Tn.console.log),L&&x&&w.test(o)&&L[Array.isArray(_)?"apply":"call"](Tn.console,_)},"LogByTypeFactory$1");function createLogger$1$1(i,a=":",s=""){let o,u="info";function log2(...i){o("log",u,i)}return __name(log2,"log"),o=Lo(i,log2,s),log2.createLogger=(o,u,_)=>{const x=void 0!==u?u:a;return createLogger$1$1(`${i} ${x} ${o}`,x,void 0!==_?_:s)},log2.createNewLogger=(i,a,s)=>createLogger$1$1(i,a,s),log2.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:u},log2.level=i=>{if("string"==typeof i){if(!log2.levels.hasOwnProperty(i))throw new Error(`"${i}" in not a valid log level`);u=i}return u},log2.history=()=>Io?[].concat(Io):[],log2.history.filter=i=>(Io||[]).filter(a=>new RegExp(`.*${i}.*`).test(a[0])),log2.history.clear=()=>{Io&&(Io.length=0)},log2.history.disable=()=>{null!==Io&&(Io.length=0,Io=null)},log2.history.enable=()=>{null===Io&&(Io=[])},log2.error=(...i)=>o("error",u,i),log2.warn=(...i)=>o("warn",u,i),log2.debug=(...i)=>o("debug",u,i),log2}__name(createLogger$1$1,"createLogger$1$1");const Do=createLogger$1$1("VIDEOJS"),Ro=Do.createLogger,Oo=Object.prototype.toString,No=/* @__PURE__ */__name(function(i){return isObject$2(i)?Object.keys(i):[]},"keys$1");function each$1(i,a){No(i).forEach(s=>a(i[s],s))}function reduce$1(i,a,s=0){return No(i).reduce((s,o)=>a(s,i[o],o),s)}function isObject$2(i){return!!i&&"object"==typeof i}function isPlain$1(i){return isObject$2(i)&&"[object Object]"===Oo.call(i)&&i.constructor===Object}function merge$1(...i){const a={};return i.forEach(i=>{i&&each$1(i,(i,s)=>{isPlain$1(i)?(isPlain$1(a[s])||(a[s]={}),a[s]=merge$1(a[s],i)):a[s]=i})}),a}function values$1(i={}){const a=[];for(const s in i)if(i.hasOwnProperty(s)){const o=i[s];a.push(o)}return a}function defineLazyProperty$1(i,a,s,o=!0){const u=/* @__PURE__ */__name(s=>Object.defineProperty(i,a,{value:s,enumerable:!0,writable:!0}),"set"),_={configurable:!0,enumerable:!0,get(){const i=s();return u(i),i}};return o&&(_.set=u),Object.defineProperty(i,a,_)}__name(each$1,"each$1"),__name(reduce$1,"reduce$1"),__name(isObject$2,"isObject$2"),__name(isPlain$1,"isPlain$1"),__name(merge$1,"merge$1"),__name(values$1,"values$1"),__name(defineLazyProperty$1,"defineLazyProperty$1");var Bo=/* @__PURE__ */Object.freeze({__proto__:null,each:each$1,reduce:reduce$1,isObject:isObject$2,isPlain:isPlain$1,merge:merge$1,values:values$1,defineLazyProperty:defineLazyProperty$1});let Fo,Uo=!1,jo=null,Vo=!1,zo=!1,Ho=!1,$o=!1,Go=!1,Wo=null,qo=null;const Xo=Boolean(Tn.cast&&Tn.cast.framework&&Tn.cast.framework.CastReceiverContext);let Qo=null,Ko=!1,Yo=!1,Jo=!1,Zo=!1,tl=!1,sl=!1,ul=!1;const _l=Boolean(isReal$1()&&("ontouchstart"in Tn||Tn.navigator.maxTouchPoints||Tn.DocumentTouch&&Tn.document instanceof Tn.DocumentTouch)),yl=Tn.navigator&&Tn.navigator.userAgentData;if(yl&&yl.platform&&yl.brands&&(Vo="Android"===yl.platform,Ho=Boolean(yl.brands.find(i=>"Microsoft Edge"===i.brand)),$o=Boolean(yl.brands.find(i=>"Chromium"===i.brand)),Go=!Ho&&$o,Wo=qo=(yl.brands.find(i=>"Chromium"===i.brand)||{}).version||null,Yo="Windows"===yl.platform),!$o){const i=Tn.navigator&&Tn.navigator.userAgent||"";Uo=/iPod/i.test(i),jo=function(){const a=i.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),Vo=/Android/i.test(i),Fo=function(){const a=i.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;const s=a[1]&&parseFloat(a[1]),o=a[2]&&parseFloat(a[2]);return s&&o?parseFloat(a[1]+"."+a[2]):s||null}(),zo=/Firefox/i.test(i),Ho=/Edg/i.test(i),$o=/Chrome/i.test(i)||/CriOS/i.test(i),Go=!Ho&&$o,Wo=qo=function(){const a=i.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),Qo=function(){const a=/MSIE\s(\d+)\.\d/.exec(i);let s=a&&parseFloat(a[1]);return!s&&/Trident\/7.0/i.test(i)&&/rv:11.0/.test(i)&&(s=11),s}(),tl=/Tizen/i.test(i),sl=/Web0S/i.test(i),ul=tl||sl,Ko=/Safari/i.test(i)&&!Go&&!Vo&&!Ho&&!ul,Yo=/Windows/i.test(i),Jo=/iPad/i.test(i)||Ko&&_l&&!/iPhone/i.test(i),Zo=/iPhone/i.test(i)&&!Jo}const vl=Zo||Jo||Uo,Tl=(Ko||vl)&&!Go;var Sl=/* @__PURE__ */Object.freeze({__proto__:null,get IS_IPOD(){return Uo},get IOS_VERSION(){return jo},get IS_ANDROID(){return Vo},get ANDROID_VERSION(){return Fo},get IS_FIREFOX(){return zo},get IS_EDGE(){return Ho},get IS_CHROMIUM(){return $o},get IS_CHROME(){return Go},get CHROMIUM_VERSION(){return Wo},get CHROME_VERSION(){return qo},IS_CHROMECAST_RECEIVER:Xo,get IE_VERSION(){return Qo},get IS_SAFARI(){return Ko},get IS_WINDOWS(){return Yo},get IS_IPAD(){return Jo},get IS_IPHONE(){return Zo},get IS_TIZEN(){return tl},get IS_WEBOS(){return sl},get IS_SMART_TV(){return ul},TOUCH_ENABLED:_l,IS_IOS:vl,IS_ANY_SAFARI:Tl});function isNonBlankString$1(i){return"string"==typeof i&&Boolean(i.trim())}function throwIfWhitespace$1(i){if(i.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function isReal$1(){return An===Tn.document}function isEl$1(i){return isObject$2(i)&&1===i.nodeType}function isInFrame$1(){try{return Tn.parent!==Tn.self}catch(i){return!0}}function createQuerier$1(i){return function(a,s){if(!isNonBlankString$1(a))return An[i](null);isNonBlankString$1(s)&&(s=An.querySelector(s));const o=isEl$1(s)?s:An;return o[i]&&o[i](a)}}function createEl$1(i="div",a={},s={},o){const u=An.createElement(i);return Object.getOwnPropertyNames(a).forEach(function(i){const s=a[i];"textContent"===i?textContent$1(u,s):u[i]===s&&"tabIndex"!==i||(u[i]=s)}),Object.getOwnPropertyNames(s).forEach(function(i){u.setAttribute(i,s[i])}),o&&appendContent$1(u,o),u}function textContent$1(i,a){return void 0===i.textContent?i.innerText=a:i.textContent=a,i}function prependTo$1(i,a){a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i)}function hasClass$1(i,a){return throwIfWhitespace$1(a),i.classList.contains(a)}function addClass$1(i,...a){return i.classList.add(...a.reduce((i,a)=>i.concat(a.split(/\s+/)),[])),i}function removeClass$1(i,...a){return i?(i.classList.remove(...a.reduce((i,a)=>i.concat(a.split(/\s+/)),[])),i):(Do.warn("removeClass was called with an element that doesn't exist"),null)}function toggleClass$1(i,a,s){return"function"==typeof s&&(s=s(i,a)),"boolean"!=typeof s&&(s=void 0),a.split(/\s+/).forEach(a=>i.classList.toggle(a,s)),i}function setAttributes$1(i,a){Object.getOwnPropertyNames(a).forEach(function(s){const o=a[s];null==o||!1===o?i.removeAttribute(s):i.setAttribute(s,!0===o?"":o)})}function getAttributes$1(i){const a={},s=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(i&&i.attributes&&i.attributes.length>0){const o=i.attributes;for(let i=o.length-1;i>=0;i--){const u=o[i].name;let _=o[i].value;s.includes(u)&&(_=null!==_),a[u]=_}}return a}function getAttribute$1(i,a){return i.getAttribute(a)}function setAttribute$1(i,a,s){i.setAttribute(a,s)}function removeAttribute$1(i,a){i.removeAttribute(a)}function blockTextSelection$1(){An.body.focus(),An.onselectstart=function(){return!1}}function unblockTextSelection$1(){An.onselectstart=function(){return!0}}function getBoundingClientRect$1(i){if(i&&i.getBoundingClientRect&&i.parentNode){const a=i.getBoundingClientRect(),s={};return["bottom","height","left","right","top","width"].forEach(i=>{void 0!==a[i]&&(s[i]=a[i])}),s.height||(s.height=parseFloat(computedStyle$1(i,"height"))),s.width||(s.width=parseFloat(computedStyle$1(i,"width"))),s}}function findPosition$1(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};const a=i.offsetWidth,s=i.offsetHeight;let o=0,u=0;for(;i.offsetParent&&i!==An[Eo.fullscreenElement];)o+=i.offsetLeft,u+=i.offsetTop,i=i.offsetParent;return{left:o,top:u,width:a,height:s}}function getPointerPosition$1(i,a){const s={x:0,y:0};if(vl){let a=i;for(;a&&"html"!==a.nodeName.toLowerCase();){const i=computedStyle$1(a,"transform");if(/^matrix/.test(i)){const a=i.slice(7,-1).split(/,\s/).map(Number);s.x+=a[4],s.y+=a[5]}else if(/^matrix3d/.test(i)){const a=i.slice(9,-1).split(/,\s/).map(Number);s.x+=a[12],s.y+=a[13]}if(a.assignedSlot&&a.assignedSlot.parentElement&&Tn.WebKitCSSMatrix){const i=Tn.getComputedStyle(a.assignedSlot.parentElement).transform,o=new Tn.WebKitCSSMatrix(i);s.x+=o.m41,s.y+=o.m42}a=a.parentNode||a.host}}const o={},u=findPosition$1(a.target),_=findPosition$1(i),x=_.width,w=_.height;let C=a.offsetY-(_.top-u.top),L=a.offsetX-(_.left-u.left);return a.changedTouches&&(L=a.changedTouches[0].pageX-_.left,C=a.changedTouches[0].pageY+_.top,vl&&(L-=s.x,C-=s.y)),o.y=1-Math.max(0,Math.min(1,C/w)),o.x=Math.max(0,Math.min(1,L/x)),o}function isTextNode$1(i){return isObject$2(i)&&3===i.nodeType}function emptyEl$1(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function normalizeContent$1(i){return"function"==typeof i&&(i=i()),(Array.isArray(i)?i:[i]).map(i=>("function"==typeof i&&(i=i()),isEl$1(i)||isTextNode$1(i)?i:"string"==typeof i&&/\S/.test(i)?An.createTextNode(i):void 0)).filter(i=>i)}function appendContent$1(i,a){return normalizeContent$1(a).forEach(a=>i.appendChild(a)),i}function insertContent$1(i,a){return appendContent$1(emptyEl$1(i),a)}function isSingleLeftClick$1(i){return void 0===i.button&&void 0===i.buttons||(0===i.button&&void 0===i.buttons||("mouseup"===i.type&&0===i.button&&0===i.buttons||("mousedown"===i.type&&0===i.button&&0===i.buttons||0===i.button&&1===i.buttons)))}__name(isNonBlankString$1,"isNonBlankString$1"),__name(throwIfWhitespace$1,"throwIfWhitespace$1"),__name(isReal$1,"isReal$1"),__name(isEl$1,"isEl$1"),__name(isInFrame$1,"isInFrame$1"),__name(createQuerier$1,"createQuerier$1"),__name(createEl$1,"createEl$1"),__name(textContent$1,"textContent$1"),__name(prependTo$1,"prependTo$1"),__name(hasClass$1,"hasClass$1"),__name(addClass$1,"addClass$1"),__name(removeClass$1,"removeClass$1"),__name(toggleClass$1,"toggleClass$1"),__name(setAttributes$1,"setAttributes$1"),__name(getAttributes$1,"getAttributes$1"),__name(getAttribute$1,"getAttribute$1"),__name(setAttribute$1,"setAttribute$1"),__name(removeAttribute$1,"removeAttribute$1"),__name(blockTextSelection$1,"blockTextSelection$1"),__name(unblockTextSelection$1,"unblockTextSelection$1"),__name(getBoundingClientRect$1,"getBoundingClientRect$1"),__name(findPosition$1,"findPosition$1"),__name(getPointerPosition$1,"getPointerPosition$1"),__name(isTextNode$1,"isTextNode$1"),__name(emptyEl$1,"emptyEl$1"),__name(normalizeContent$1,"normalizeContent$1"),__name(appendContent$1,"appendContent$1"),__name(insertContent$1,"insertContent$1"),__name(isSingleLeftClick$1,"isSingleLeftClick$1");const xl=createQuerier$1("querySelector"),wl=createQuerier$1("querySelectorAll");function computedStyle$1(i,a){if(!i||!a)return"";if("function"==typeof Tn.getComputedStyle){let o;try{o=Tn.getComputedStyle(i)}catch(s){return""}return o?o.getPropertyValue(a)||o[a]:""}return""}function copyStyleSheetsToWindow(i){[...An.styleSheets].forEach(a=>{try{const s=[...a.cssRules].map(i=>i.cssText).join(""),o=An.createElement("style");o.textContent=s,i.document.head.appendChild(o)}catch(s){const o=An.createElement("link");o.rel="stylesheet",o.type=a.type,o.media=a.media.mediaText,o.href=a.href,i.document.head.appendChild(o)}})}__name(computedStyle$1,"computedStyle$1"),__name(copyStyleSheetsToWindow,"copyStyleSheetsToWindow");var Al=/* @__PURE__ */Object.freeze({__proto__:null,isReal:isReal$1,isEl:isEl$1,isInFrame:isInFrame$1,createEl:createEl$1,textContent:textContent$1,prependTo:prependTo$1,hasClass:hasClass$1,addClass:addClass$1,removeClass:removeClass$1,toggleClass:toggleClass$1,setAttributes:setAttributes$1,getAttributes:getAttributes$1,getAttribute:getAttribute$1,setAttribute:setAttribute$1,removeAttribute:removeAttribute$1,blockTextSelection:blockTextSelection$1,unblockTextSelection:unblockTextSelection$1,getBoundingClientRect:getBoundingClientRect$1,findPosition:findPosition$1,getPointerPosition:getPointerPosition$1,isTextNode:isTextNode$1,emptyEl:emptyEl$1,normalizeContent:normalizeContent$1,appendContent:appendContent$1,insertContent:insertContent$1,isSingleLeftClick:isSingleLeftClick$1,$:xl,$$:wl,computedStyle:computedStyle$1,copyStyleSheetsToWindow:copyStyleSheetsToWindow});let Cl,El=!1;const Ml=/* @__PURE__ */__name(function(){if(!1===Cl.options.autoSetup)return;const i=Array.prototype.slice.call(An.getElementsByTagName("video")),a=Array.prototype.slice.call(An.getElementsByTagName("audio")),s=Array.prototype.slice.call(An.getElementsByTagName("video-js")),o=i.concat(a,s);if(o&&o.length>0)for(let u=0,_=o.length;u<_;u++){const i=o[u];if(!i||!i.getAttribute){autoSetupTimeout$1(1);break}if(void 0===i.player){null!==i.getAttribute("data-setup")&&Cl(i)}}else El||autoSetupTimeout$1(1)},"autoSetup$1");function autoSetupTimeout$1(i,a){isReal$1()&&(a&&(Cl=a),Tn.setTimeout(Ml,i))}function setWindowLoaded$1(){El=!0,Tn.removeEventListener("load",setWindowLoaded$1)}__name(autoSetupTimeout$1,"autoSetupTimeout$1"),__name(setWindowLoaded$1,"setWindowLoaded$1"),isReal$1()&&("complete"===An.readyState?setWindowLoaded$1():Tn.addEventListener("load",setWindowLoaded$1));const kl=/* @__PURE__ */__name(function(i){const a=An.createElement("style");return a.className=i,a},"createStyleElement$1"),Pl=/* @__PURE__ */__name(function(i,a){i.styleSheet?i.styleSheet.cssText=a:i.textContent=a},"setTextContent$1");var Il=/* @__PURE__ */new WeakMap;let Ll,Dl=3;function newGUID$1(){return Dl++}function _cleanUpEvents$1(i,a){if(!Il.has(i))return;const s=Il.get(i);0===s.handlers[a].length&&(delete s.handlers[a],i.removeEventListener?i.removeEventListener(a,s.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+a,s.dispatcher)),Object.getOwnPropertyNames(s.handlers).length<=0&&(delete s.handlers,delete s.dispatcher,delete s.disabled),0===Object.getOwnPropertyNames(s).length&&Il.delete(i)}function _handleMultipleEvents$1(i,a,s,o){s.forEach(function(s){i(a,s,o)})}function fixEvent$1(i){if(i.fixed_)return i;function returnTrue(){return!0}function returnFalse(){return!1}if(__name(returnTrue,"returnTrue"),__name(returnFalse,"returnFalse"),!i||!i.isPropagationStopped||!i.isImmediatePropagationStopped){const a=i||Tn.event;i={};const s=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const o in a)s.includes(o)||"returnValue"===o&&a.preventDefault||(i[o]=a[o]);if(i.target||(i.target=i.srcElement||An),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){a.preventDefault&&a.preventDefault(),i.returnValue=!1,a.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),i.cancelBubble=!0,a.cancelBubble=!0,i.isPropagationStopped=returnTrue},i.isPropagationStopped=returnFalse,i.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),i.isImmediatePropagationStopped=returnTrue,i.stopPropagation()},i.isImmediatePropagationStopped=returnFalse,null!==i.clientX&&void 0!==i.clientX){const a=An.documentElement,s=An.body;i.pageX=i.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),i.pageY=i.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}i.which=i.charCode||i.keyCode,null!==i.button&&void 0!==i.button&&(i.button=1&i.button?0:4&i.button?1:2&i.button?2:0)}return i.fixed_=!0,i}__name(newGUID$1,"newGUID$1"),__name(_cleanUpEvents$1,"_cleanUpEvents$1"),__name(_handleMultipleEvents$1,"_handleMultipleEvents$1"),__name(fixEvent$1,"fixEvent$1");const Rl=/* @__PURE__ */__name(function(){if("boolean"!=typeof Ll){Ll=!1;try{const i=Object.defineProperty({},"passive",{get(){Ll=!0}});Tn.addEventListener("test",null,i),Tn.removeEventListener("test",null,i)}catch(i){}}return Ll},"supportsPassive$1"),Ol=["touchstart","touchmove"];function on$1(i,a,s){if(Array.isArray(a))return _handleMultipleEvents$1(on$1,i,a,s);Il.has(i)||Il.set(i,{});const o=Il.get(i);if(o.handlers||(o.handlers={}),o.handlers[a]||(o.handlers[a]=[]),s.guid||(s.guid=newGUID$1()),o.handlers[a].push(s),o.dispatcher||(o.disabled=!1,o.dispatcher=function(a,s){if(o.disabled)return;a=fixEvent$1(a);const u=o.handlers[a.type];if(u){const o=u.slice(0);for(let u=0,x=o.length;u<x&&!a.isImmediatePropagationStopped();u++)try{o[u].call(i,a,s)}catch(_){Do.error(_)}}}),1===o.handlers[a].length)if(i.addEventListener){let s=!1;Rl()&&Ol.indexOf(a)>-1&&(s={passive:!0}),i.addEventListener(a,o.dispatcher,s)}else i.attachEvent&&i.attachEvent("on"+a,o.dispatcher)}function off$1(i,a,s){if(!Il.has(i))return;const o=Il.get(i);if(!o.handlers)return;if(Array.isArray(a))return _handleMultipleEvents$1(off$1,i,a,s);const u=/* @__PURE__ */__name(function(i,a){o.handlers[a]=[],_cleanUpEvents$1(i,a)},"removeType");if(void 0===a){for(const a in o.handlers)Object.prototype.hasOwnProperty.call(o.handlers||{},a)&&u(i,a);return}const _=o.handlers[a];if(_)if(s){if(s.guid)for(let i=0;i<_.length;i++)_[i].guid===s.guid&&_.splice(i--,1);_cleanUpEvents$1(i,a)}else u(i,a)}function trigger$1(i,a,s){const o=Il.has(i)?Il.get(i):{},u=i.parentNode||i.ownerDocument;if("string"==typeof a?a={type:a,target:i}:a.target||(a.target=i),a=fixEvent$1(a),o.dispatcher&&o.dispatcher.call(i,a,s),u&&!a.isPropagationStopped()&&!0===a.bubbles)trigger$1.call(null,u,a,s);else if(!u&&!a.defaultPrevented&&a.target&&a.target[a.type]){Il.has(a.target)||Il.set(a.target,{});const i=Il.get(a.target);a.target[a.type]&&(i.disabled=!0,"function"==typeof a.target[a.type]&&a.target[a.type](),i.disabled=!1)}return!a.defaultPrevented}function one$1(i,a,s){if(Array.isArray(a))return _handleMultipleEvents$1(one$1,i,a,s);const o=/* @__PURE__ */__name(function(){off$1(i,a,o),s.apply(this,arguments)},"func");o.guid=s.guid=s.guid||newGUID$1(),on$1(i,a,o)}function any$1(i,a,s){const o=/* @__PURE__ */__name(function(){off$1(i,a,o),s.apply(this,arguments)},"func");o.guid=s.guid=s.guid||newGUID$1(),on$1(i,a,o)}__name(on$1,"on$1"),__name(off$1,"off$1"),__name(trigger$1,"trigger$1"),__name(one$1,"one$1"),__name(any$1,"any$1");var Nl=/* @__PURE__ */Object.freeze({__proto__:null,fixEvent:fixEvent$1,on:on$1,off:off$1,trigger:trigger$1,one:one$1,any:any$1});const Bl=30,Fl=/* @__PURE__ */__name(function(i,a,s){a.guid||(a.guid=newGUID$1());const o=a.bind(i);return o.guid=s?s+"_"+a.guid:a.guid,o},"bind_"),Ul=/* @__PURE__ */__name(function(i,a){let s=Tn.performance.now();/* @__PURE__ */
return __name(function(...o){const u=Tn.performance.now();u-s>=a&&(i(...o),s=u)},"throttled")},"throttle$1"),Vl=/* @__PURE__ */__name(function(i,a,s,o=Tn){let u;const _=/* @__PURE__ */__name(()=>{o.clearTimeout(u),u=null},"cancel"),x=/* @__PURE__ */__name(function(){const _=this,x=arguments;let w=/* @__PURE__ */__name(function(){u=null,w=null,s||i.apply(_,x)},"later");!u&&s&&i.apply(_,x),o.clearTimeout(u),u=o.setTimeout(w,a)},"debounced");return x.cancel=_,x},"debounce$1");var zl=/* @__PURE__ */Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Bl,bind_:Fl,throttle:Ul,debounce:Vl});let Hl,$l=(__name(u=class{on(i,a){const s=this.addEventListener;this.addEventListener=()=>{},on$1(this,i,a),this.addEventListener=s}off(i,a){off$1(this,i,a)}one(i,a){const s=this.addEventListener;this.addEventListener=()=>{},one$1(this,i,a),this.addEventListener=s}any(i,a){const s=this.addEventListener;this.addEventListener=()=>{},any$1(this,i,a),this.addEventListener=s}trigger(i){const a=i.type||i;"string"==typeof i&&(i={type:a}),i=fixEvent$1(i),this.allowedEvents_[a]&&this["on"+a]&&this["on"+a](i),trigger$1(this,i)}queueTrigger(i){Hl||(Hl=/* @__PURE__ */new Map);const a=i.type||i;let s=Hl.get(this);s||(s=/* @__PURE__ */new Map,Hl.set(this,s));const o=s.get(a);s.delete(a),Tn.clearTimeout(o);const u=Tn.setTimeout(()=>{s.delete(a),0===s.size&&(s=null,Hl.delete(this)),this.trigger(i)},0);s.set(a,u)}},"EventTarget$2"),u);$l.prototype.allowedEvents_={},$l.prototype.addEventListener=$l.prototype.on,$l.prototype.removeEventListener=$l.prototype.off,$l.prototype.dispatchEvent=$l.prototype.trigger;const Gl=/* @__PURE__ */__name(i=>"function"==typeof i.name?i.name():"string"==typeof i.name?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i,"objName$1"),Wl=/* @__PURE__ */__name(i=>i instanceof $l||!!i.eventBusEl_&&["on","one","off","trigger"].every(a=>"function"==typeof i[a]),"isEvented$1"),Xl=/* @__PURE__ */__name((i,a)=>{Wl(i)?a():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(a))},"addEventedCallback$1"),Ql=/* @__PURE__ */__name(i=>"string"==typeof i&&/\S/.test(i)||Array.isArray(i)&&!!i.length,"isValidEventType$1"),Kl=/* @__PURE__ */__name((i,a,s)=>{if(!i||!i.nodeName&&!Wl(i))throw new Error(`Invalid target for ${Gl(a)}#${s}; must be a DOM node or evented object.`)},"validateTarget$1"),Yl=/* @__PURE__ */__name((i,a,s)=>{if(!Ql(i))throw new Error(`Invalid event type for ${Gl(a)}#${s}; must be a non-empty string or array.`)},"validateEventType$1"),Jl=/* @__PURE__ */__name((i,a,s)=>{if("function"!=typeof i)throw new Error(`Invalid listener for ${Gl(a)}#${s}; must be a function.`)},"validateListener$1"),Zl=/* @__PURE__ */__name((i,a,s)=>{const o=a.length<3||a[0]===i||a[0]===i.eventBusEl_;let u,_,x;return o?(u=i.eventBusEl_,a.length>=3&&a.shift(),[_,x]=a):(u=a[0],_=a[1],x=a[2]),Kl(u,i,s),Yl(_,i,s),Jl(x,i,s),x=Fl(i,x),{isTargetingSelf:o,target:u,type:_,listener:x}},"normalizeListenArgs$1"),ec=/* @__PURE__ */__name((i,a,s,o)=>{Kl(i,i,a),i.nodeName?Nl[a](i,s,o):i[a](s,o)},"listen$1"),ic={on(...i){const{isTargetingSelf:a,target:s,type:o,listener:u}=Zl(this,i,"on");if(ec(s,"on",o,u),!a){const i=/* @__PURE__ */__name(()=>this.off(s,o,u),"removeListenerOnDispose");i.guid=u.guid;const a=/* @__PURE__ */__name(()=>this.off("dispose",i),"removeRemoverOnTargetDispose");a.guid=u.guid,ec(this,"on","dispose",i),ec(s,"on","dispose",a)}},one(...i){const{isTargetingSelf:a,target:s,type:o,listener:u}=Zl(this,i,"one");if(a)ec(s,"one",o,u);else{const i=/* @__PURE__ */__name((...a)=>{this.off(s,o,i),u.apply(null,a)},"wrapper");i.guid=u.guid,ec(s,"one",o,i)}},any(...i){const{isTargetingSelf:a,target:s,type:o,listener:u}=Zl(this,i,"any");if(a)ec(s,"any",o,u);else{const i=/* @__PURE__ */__name((...a)=>{this.off(s,o,i),u.apply(null,a)},"wrapper");i.guid=u.guid,ec(s,"any",o,i)}},off(i,a,s){if(!i||Ql(i))off$1(this.eventBusEl_,i,a);else{const o=i,u=a;Kl(o,this,"off"),Yl(u,this,"off"),Jl(s,this,"off"),s=Fl(this,s),this.off("dispose",s),o.nodeName?(off$1(o,u,s),off$1(o,"dispose",s)):Wl(o)&&(o.off(u,s),o.off("dispose",s))}},trigger(i,a){Kl(this.eventBusEl_,this,"trigger");const s=i&&"string"!=typeof i?i.type:i;if(!Ql(s))throw new Error(`Invalid event type for ${Gl(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return trigger$1(this.eventBusEl_,i,a)}};function evented$1(i,a={}){const{eventBusKey:s}=a;if(s){if(!i[s].nodeName)throw new Error(`The eventBusKey "${s}" does not refer to an element.`);i.eventBusEl_=i[s]}else i.eventBusEl_=createEl$1("span",{className:"vjs-event-bus"});return Object.assign(i,ic),i.eventedCallbacks&&i.eventedCallbacks.forEach(i=>{i()}),i.on("dispose",()=>{i.off(),[i,i.el_,i.eventBusEl_].forEach(function(i){i&&Il.has(i)&&Il.delete(i)}),Tn.setTimeout(()=>{i.eventBusEl_=null},0)}),i}__name(evented$1,"evented$1");const rc={state:{},setState(i){let a;return"function"==typeof i&&(i=i()),each$1(i,(i,s)=>{this.state[s]!==i&&(a=a||{},a[s]={from:this.state[s],to:i}),this.state[s]=i}),a&&Wl(this)&&this.trigger({changes:a,type:"statechanged"}),a}};function stateful$1(i,a){return Object.assign(i,rc),i.state=Object.assign({},i.state,a),"function"==typeof i.handleStateChanged&&Wl(i)&&i.on("statechanged",i.handleStateChanged),i}__name(stateful$1,"stateful$1");const ac=/* @__PURE__ */__name(function(i){return"string"!=typeof i?i:i.replace(/./,i=>i.toLowerCase())},"toLowerCase$1"),sc=/* @__PURE__ */__name(function(i){return"string"!=typeof i?i:i.replace(/./,i=>i.toUpperCase())},"toTitleCase$1$1"),oc=/* @__PURE__ */__name(function(i,a){return sc(i)===sc(a)},"titleCaseEquals$1");var lc=/* @__PURE__ */Object.freeze({__proto__:null,toLowerCase:ac,toTitleCase:sc,titleCaseEquals:oc});let cc=(_=class{constructor(i,a,s){if(!i&&this.play?this.player_=i=this:this.player_=i,this.isDisposed_=!1,this.parentComponent_=null,this.options_=merge$1({},this.options_),a=this.options_=merge$1(this.options_,a),this.id_=a.id||a.el&&a.el.id,!this.id_){const a=i&&i.id&&i.id()||"no_player";this.id_=`${a}_component_${newGUID$1()}`}this.name_=a.name||null,a.el?this.el_=a.el:!1!==a.createEl&&(this.el_=this.createEl()),a.className&&this.el_&&a.className.split(" ").forEach(i=>this.addClass(i)),["on","off","one","any","trigger"].forEach(i=>{this[i]=void 0}),!1!==a.evented&&(evented$1(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),stateful$1(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=/* @__PURE__ */new Set,this.setIntervalIds_=/* @__PURE__ */new Set,this.rafIds_=/* @__PURE__ */new Set,this.namedRafs_=/* @__PURE__ */new Map,this.clearingTimersOnDispose_=!1,!1!==a.initChildren&&this.initChildren(),this.ready(s),!1!==a.reportTouchActivity&&this.enableTouchActivity()}dispose(i={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let i=this.children_.length-1;i>=0;i--)this.children_[i].dispose&&this.children_[i].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(i.restoreEl?this.el_.parentNode.replaceChild(i.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(i){return i?(this.options_=merge$1(this.options_,i),this.options_):this.options_}el(){return this.el_}createEl(i,a,s){return createEl$1(i,a,s)}localize(i,a,s=i){const o=this.player_.language&&this.player_.language(),u=this.player_.languages&&this.player_.languages(),_=u&&u[o],x=o&&o.split("-")[0],w=u&&u[x];let C=s;return _&&_[i]?C=_[i]:w&&w[i]&&(C=w[i]),a&&(C=C.replace(/\{(\d+)\}/g,function(i,s){const o=a[s-1];let u=o;return void 0===o&&(u=i),u})),C}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(i){return this.childIndex_[i]}getChild(i){if(i)return this.childNameIndex_[i]}getDescendant(...i){i=i.reduce((i,a)=>i.concat(a),[]);let a=this;for(let s=0;s<i.length;s++)if(a=a.getChild(i[s]),!a||!a.getChild)return;return a}setIcon(i,a=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const s="http://www.w3.org/2000/svg",o=createEl$1("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),u=An.createElementNS(s,"svg");u.setAttributeNS(null,"viewBox","0 0 512 512");const _=An.createElementNS(s,"use");return u.appendChild(_),_.setAttributeNS(null,"href",`#vjs-icon-${i}`),o.appendChild(u),this.iconIsSet_?a.replaceChild(o,a.querySelector(".vjs-icon-placeholder")):a.appendChild(o),this.iconIsSet_=!0,o}addChild(i,a={},s=this.children_.length){let o,u;if("string"==typeof i){u=sc(i);const s=a.componentClass||u;a.name=u;const x=_.getComponent(s);if(!x)throw new Error(`Component ${s} does not exist`);if("function"!=typeof x)return null;o=new x(this.player_||this,a)}else o=i;if(o.parentComponent_&&o.parentComponent_.removeChild(o),this.children_.splice(s,0,o),o.parentComponent_=this,"function"==typeof o.id&&(this.childIndex_[o.id()]=o),u=u||o.name&&sc(o.name()),u&&(this.childNameIndex_[u]=o,this.childNameIndex_[ac(u)]=o),"function"==typeof o.el&&o.el()){let i=null;this.children_[s+1]&&(this.children_[s+1].el_?i=this.children_[s+1].el_:isEl$1(this.children_[s+1])&&(i=this.children_[s+1])),this.contentEl().insertBefore(o.el(),i)}return o}removeChild(i){if("string"==typeof i&&(i=this.getChild(i)),!i||!this.children_)return;let a=!1;for(let o=this.children_.length-1;o>=0;o--)if(this.children_[o]===i){a=!0,this.children_.splice(o,1);break}if(!a)return;i.parentComponent_=null,this.childIndex_[i.id()]=null,this.childNameIndex_[sc(i.name())]=null,this.childNameIndex_[ac(i.name())]=null;const s=i.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(i.el())}initChildren(){const i=this.options_.children;if(i){const a=this.options_,s=/* @__PURE__ */__name(i=>{const s=i.name;let o=i.opts;if(void 0!==a[s]&&(o=a[s]),!1===o)return;!0===o&&(o={}),o.playerOptions=this.options_.playerOptions;const u=this.addChild(s,o);u&&(this[s]=u)},"handleAdd");let o;const u=_.getComponent("Tech");o=Array.isArray(i)?i:Object.keys(i),o.concat(Object.keys(this.options_).filter(function(i){return!o.some(function(a){return"string"==typeof a?i===a:i===a.name})})).map(a=>{let s,o;return"string"==typeof a?(s=a,o=i[s]||this.options_[s]||{}):(s=a.name,o=a),{name:s,opts:o}}).filter(i=>{const a=_.getComponent(i.opts.componentClass||sc(i.name));return a&&!u.isTech(a)}).forEach(s)}}buildCSSClass(){return""}ready(i,a=!1){if(i)return this.isReady_?void(a?i.call(this):this.setTimeout(i,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(i))}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const i=this.readyQueue_;this.readyQueue_=[],i&&i.length>0&&i.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)}$(i,a){return xl(i,a||this.contentEl())}$$(i,a){return wl(i,a||this.contentEl())}hasClass(i){return hasClass$1(this.el_,i)}addClass(...i){addClass$1(this.el_,...i)}removeClass(...i){removeClass$1(this.el_,...i)}toggleClass(i,a){toggleClass$1(this.el_,i,a)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(i){return getAttribute$1(this.el_,i)}setAttribute(i,a){setAttribute$1(this.el_,i,a)}removeAttribute(i){removeAttribute$1(this.el_,i)}width(i,a){return this.dimension("width",i,a)}height(i,a){return this.dimension("height",i,a)}dimensions(i,a){this.width(i,!0),this.height(a)}dimension(i,a,s){if(void 0!==a)return null!==a&&a==a||(a=0),-1!==(""+a).indexOf("%")||-1!==(""+a).indexOf("px")?this.el_.style[i]=a:this.el_.style[i]="auto"===a?"":a+"px",void(s||this.trigger("componentresize"));if(!this.el_)return 0;const o=this.el_.style[i],u=o.indexOf("px");return-1!==u?parseInt(o.slice(0,u),10):parseInt(this.el_["offset"+sc(i)],10)}currentDimension(i){let a=0;if("width"!==i&&"height"!==i)throw new Error("currentDimension only accepts width or height value");if(a=computedStyle$1(this.el_,i),a=parseFloat(a),0===a||isNaN(a)){const s=`offset${sc(i)}`;a=this.el_[s]}return a}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const i=this.el_.getBoundingClientRect();return{boundingClientRect:{x:i.x,y:i.y,width:i.width,height:i.height,top:i.top,right:i.right,bottom:i.bottom,left:i.left},center:{x:i.left+i.width/2,y:i.top+i.height/2,width:0,height:0,top:i.top+i.height/2,right:i.left+i.width/2,bottom:i.top+i.height/2,left:i.left+i.width/2}}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(i){this.player_&&("Tab"===i.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled||i.stopPropagation(),this.player_.handleKeyDown(i))}handleKeyPress(i){this.handleKeyDown(i)}emitTapEvents(){let i=0,a=null;let s;this.on("touchstart",function(o){1===o.touches.length&&(a={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},i=Tn.performance.now(),s=!0)}),this.on("touchmove",function(i){if(i.touches.length>1)s=!1;else if(a){const o=i.touches[0].pageX-a.pageX,u=i.touches[0].pageY-a.pageY;Math.sqrt(o*o+u*u)>10&&(s=!1)}});const o=/* @__PURE__ */__name(function(){s=!1},"noTap");this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(o){if(a=null,!0===s){Tn.performance.now()-i<200&&(o.preventDefault(),this.trigger("tap"))}})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const i=Fl(this.player(),this.player().reportUserActivity);let a;this.on("touchstart",function(){i(),this.clearInterval(a),a=this.setInterval(i,250)});const s=/* @__PURE__ */__name(function(s){i(),this.clearInterval(a)},"touchEnd");this.on("touchmove",i),this.on("touchend",s),this.on("touchcancel",s)}setTimeout(i,a){var s;return i=Fl(this,i),this.clearTimersOnDispose_(),s=Tn.setTimeout(()=>{this.setTimeoutIds_.has(s)&&this.setTimeoutIds_.delete(s),i()},a),this.setTimeoutIds_.add(s),s}clearTimeout(i){return this.setTimeoutIds_.has(i)&&(this.setTimeoutIds_.delete(i),Tn.clearTimeout(i)),i}setInterval(i,a){i=Fl(this,i),this.clearTimersOnDispose_();const s=Tn.setInterval(i,a);return this.setIntervalIds_.add(s),s}clearInterval(i){return this.setIntervalIds_.has(i)&&(this.setIntervalIds_.delete(i),Tn.clearInterval(i)),i}requestAnimationFrame(i){var a;return this.clearTimersOnDispose_(),i=Fl(this,i),a=Tn.requestAnimationFrame(()=>{this.rafIds_.has(a)&&this.rafIds_.delete(a),i()}),this.rafIds_.add(a),a}requestNamedAnimationFrame(i,a){this.namedRafs_.has(i)&&this.cancelNamedAnimationFrame(i),this.clearTimersOnDispose_(),a=Fl(this,a);const s=this.requestAnimationFrame(()=>{a(),this.namedRafs_.has(i)&&this.namedRafs_.delete(i)});return this.namedRafs_.set(i,s),i}cancelNamedAnimationFrame(i){this.namedRafs_.has(i)&&(this.cancelAnimationFrame(this.namedRafs_.get(i)),this.namedRafs_.delete(i))}cancelAnimationFrame(i){return this.rafIds_.has(i)&&(this.rafIds_.delete(i),Tn.cancelAnimationFrame(i)),i}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([i,a])=>{this[i].forEach((i,s)=>this[a](s))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return Boolean(this.el_.disabled)}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(i){return(i||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(i){function isVisibleStyleProperty(i){const a=Tn.getComputedStyle(i,null),s=a.getPropertyValue("visibility");return"none"!==a.getPropertyValue("display")&&!["hidden","collapse"].includes(s)}function isBeingRendered(i){return!!isVisibleStyleProperty(i.parentElement)&&!(!isVisibleStyleProperty(i)||"0"===i.style.opacity||"0px"===Tn.getComputedStyle(i).height||"0px"===Tn.getComputedStyle(i).width)}function isVisible(i){if(i.offsetWidth+i.offsetHeight+i.getBoundingClientRect().height+i.getBoundingClientRect().width===0)return!1;const a={x:i.getBoundingClientRect().left+i.offsetWidth/2,y:i.getBoundingClientRect().top+i.offsetHeight/2};if(a.x<0)return!1;if(a.x>(An.documentElement.clientWidth||Tn.innerWidth))return!1;if(a.y<0)return!1;if(a.y>(An.documentElement.clientHeight||Tn.innerHeight))return!1;let s=An.elementFromPoint(a.x,a.y);for(;s;){if(s===i)return!0;if(!s.parentNode)return!1;s=s.parentNode}}return __name(isVisibleStyleProperty,"isVisibleStyleProperty"),__name(isBeingRendered,"isBeingRendered"),__name(isVisible,"isVisible"),i||(i=this.el()),!(!isVisible(i)||!isBeingRendered(i)||i.parentElement&&!(i.tabIndex>=0))}static registerComponent(i,a){if("string"!=typeof i||!i)throw new Error(`Illegal component name, "${i}"; must be a non-empty string.`);const s=_.getComponent("Tech"),o=s&&s.isTech(a),u=_===a||_.prototype.isPrototypeOf(a.prototype);if(o||!u){let a;throw a=o?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error(`Illegal component, "${i}"; ${a}.`)}i=sc(i),_.components_||(_.components_={});const x=_.getComponent("Player");if("Player"===i&&x&&x.players){const i=x.players,a=Object.keys(i);if(i&&a.length>0)for(let s=0;s<a.length;s++)if(null!==i[a[s]])throw new Error("Can not register Player component after player has been created.")}return _.components_[i]=a,_.components_[ac(i)]=a,a}static getComponent(i){if(i&&_.components_)return _.components_[i]}},__name(_,"Component$1"),_);function rangeCheck$1(i,a,s){if("number"!=typeof a||a<0||a>s)throw new Error(`Failed to execute '${i}' on 'TimeRanges': The index provided (${a}) is non-numeric or out of bounds (0-${s}).`)}function getRange$1(i,a,s,o){return rangeCheck$1(i,o,s.length-1),s[o][a]}function createTimeRangesObj$1(i){let a;return a=void 0===i||0===i.length?{length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:{length:i.length,start:getRange$1.bind(null,"start",0,i),end:getRange$1.bind(null,"end",1,i)},Tn.Symbol&&Tn.Symbol.iterator&&(a[Tn.Symbol.iterator]=()=>(i||[]).values()),a}function createTimeRanges$1(i,a){return Array.isArray(i)?createTimeRangesObj$1(i):void 0===i||void 0===a?createTimeRangesObj$1():createTimeRangesObj$1([[i,a]])}cc.registerComponent("Component",cc),__name(rangeCheck$1,"rangeCheck$1"),__name(getRange$1,"getRange$1"),__name(createTimeRangesObj$1,"createTimeRangesObj$1"),__name(createTimeRanges$1,"createTimeRanges$1");const dc=/* @__PURE__ */__name(function(i,a){i=i<0?0:i;let s=Math.floor(i%60),o=Math.floor(i/60%60),u=Math.floor(i/3600);const _=Math.floor(a/60%60),x=Math.floor(a/3600);return(isNaN(i)||i===1/0)&&(u=o=s="-"),u=u>0||x>0?u+":":"",o=((u||_>=10)&&o<10?"0"+o:o)+":",s=s<10?"0"+s:s,u+o+s},"defaultImplementation$1");let hc=dc;function setFormatTime$1(i){hc=i}function resetFormatTime$1(){hc=dc}function formatTime$1(i,a=i){return hc(i,a)}__name(setFormatTime$1,"setFormatTime$1"),__name(resetFormatTime$1,"resetFormatTime$1"),__name(formatTime$1,"formatTime$1");var pc=/* @__PURE__ */Object.freeze({__proto__:null,createTimeRanges:createTimeRanges$1,createTimeRange:createTimeRanges$1,setFormatTime:setFormatTime$1,resetFormatTime:resetFormatTime$1,formatTime:formatTime$1});function bufferedPercent$1(i,a){let s,o,u=0;if(!a)return 0;i&&i.length||(i=createTimeRanges$1(0,0));for(let _=0;_<i.length;_++)s=i.start(_),o=i.end(_),o>a&&(o=a),u+=o-s;return u/a}function MediaError$1(i){if(i instanceof MediaError$1)return i;"number"==typeof i?this.code=i:"string"==typeof i?this.message=i:isObject$2(i)&&("number"==typeof i.code&&(this.code=i.code),Object.assign(this,i)),this.message||(this.message=MediaError$1.defaultMessages[this.code]||"")}function isPromise$2(i){return null!=i&&"function"==typeof i.then}function silencePromise$1(i){isPromise$2(i)&&i.then(null,i=>{})}__name(bufferedPercent$1,"bufferedPercent$1"),__name(MediaError$1,"MediaError$1"),MediaError$1.prototype.code=0,MediaError$1.prototype.message="",MediaError$1.prototype.status=null,MediaError$1.prototype.metadata=null,MediaError$1.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],MediaError$1.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},MediaError$1.MEDIA_ERR_CUSTOM=0,MediaError$1.prototype.MEDIA_ERR_CUSTOM=0,MediaError$1.MEDIA_ERR_ABORTED=1,MediaError$1.prototype.MEDIA_ERR_ABORTED=1,MediaError$1.MEDIA_ERR_NETWORK=2,MediaError$1.prototype.MEDIA_ERR_NETWORK=2,MediaError$1.MEDIA_ERR_DECODE=3,MediaError$1.prototype.MEDIA_ERR_DECODE=3,MediaError$1.MEDIA_ERR_SRC_NOT_SUPPORTED=4,MediaError$1.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,MediaError$1.MEDIA_ERR_ENCRYPTED=5,MediaError$1.prototype.MEDIA_ERR_ENCRYPTED=5,__name(isPromise$2,"isPromise$2"),__name(silencePromise$1,"silencePromise$1");const fc=/* @__PURE__ */__name(function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((a,s,o)=>(i[s]&&(a[s]=i[s]),a),{cues:i.cues&&Array.prototype.map.call(i.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})})},"trackToJson");var gc={textTracksToJson:/* @__PURE__ */__name(function(i){const a=i.$$("track"),s=Array.prototype.map.call(a,i=>i.track);return Array.prototype.map.call(a,function(i){const a=fc(i.track);return i.src&&(a.src=i.src),a}).concat(Array.prototype.filter.call(i.textTracks(),function(i){return-1===s.indexOf(i)}).map(fc))},"textTracksToJson$1"),jsonToTextTracks:/* @__PURE__ */__name(function(i,a){return i.forEach(function(i){const s=a.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(i=>s.addCue(i))}),a.textTracks()},"jsonToTextTracks$1"),trackToJson:fc};const _c="vjs-modal-dialog";let bc=(__name(x=class extends cc{constructor(i,a){super(i,a),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=createEl$1("div",{className:`${_c}-content`},{role:"document"}),this.descEl_=createEl$1("p",{className:`${_c}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),textContent$1(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${_c} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i}open(){if(this.opened_)return void(this.options_.fillAlways&&this.fill());const i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(i){return"boolean"==typeof i&&this[i?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(i){if("boolean"==typeof i){const a=this.closeable_=!!i;let s=this.getChild("closeButton");if(a&&!s){const i=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(s,"close",this.close_)}!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(i){const a=this.contentEl(),s=a.parentNode,o=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),insertContent$1(a,i),this.trigger("modalfill"),o?s.insertBefore(a,o):s.appendChild(a);const u=this.getChild("closeButton");u&&s.appendChild(u.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),emptyEl$1(this.contentEl()),this.trigger("modalempty")}content(i){return void 0!==i&&(this.content_=i),this.content_}conditionalFocus_(){const i=An.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(i)||a===i)&&(this.previouslyActiveEl_=i,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(i){if(this.trigger({type:"modalKeydown",originalEvent:i,target:this,bubbles:!0}),i.stopPropagation(),"Escape"===i.key&&this.closeable())return i.preventDefault(),void this.close();if("Tab"!==i.key)return;const a=this.focusableEls_(),s=this.el_.querySelector(":focus");let o;for(let u=0;u<a.length;u++)if(s===a[u]){o=u;break}An.activeElement===this.el_&&(o=0),i.shiftKey&&0===o?(a[a.length-1].focus(),i.preventDefault()):i.shiftKey||o!==a.length-1||(a[0].focus(),i.preventDefault())}focusableEls_(){const i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,i=>(i instanceof Tn.HTMLAnchorElement||i instanceof Tn.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof Tn.HTMLInputElement||i instanceof Tn.HTMLSelectElement||i instanceof Tn.HTMLTextAreaElement||i instanceof Tn.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof Tn.HTMLIFrameElement||i instanceof Tn.HTMLObjectElement||i instanceof Tn.HTMLEmbedElement||i.hasAttribute("tabindex")&&-1!==i.getAttribute("tabindex")||i.hasAttribute("contenteditable"))}},"ModalDialog"),x);bc.prototype.options_={pauseOnOpen:!0,temporary:!0},cc.registerComponent("ModalDialog",bc);let Ec=(w=class extends $l{constructor(i=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let a=0;a<i.length;a++)this.addTrack(i[a])}addTrack(i){const a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get(){return this.tracks_[a]}}),-1===this.tracks_.indexOf(i)&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=()=>{this.trigger({track:i,type:"labelchange",target:this})},Wl(i)&&i.addEventListener("labelchange",i.labelchange_)}removeTrack(i){let a;for(let s=0,o=this.length;s<o;s++)if(this[s]===i){a=this[s],a.off&&a.off(),this.tracks_.splice(s,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})}getTrackById(i){let a=null;for(let s=0,o=this.length;s<o;s++){const o=this[s];if(o.id===i){a=o;break}}return a}},__name(w,"TrackList"),w);Ec.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const dN in Ec.prototype.allowedEvents_)Ec.prototype["on"+dN]=null;const Mc=/* @__PURE__ */__name(function(i,a){for(let s=0;s<i.length;s++)Object.keys(i[s]).length&&a.id!==i[s].id&&(i[s].enabled=!1)},"disableOthers$1$1");let kc=(__name(C=class extends Ec{constructor(i=[]){for(let a=i.length-1;a>=0;a--)if(i[a].enabled){Mc(i,i[a]);break}super(i),this.changing_=!1}addTrack(i){i.enabled&&Mc(this,i),super.addTrack(i),i.addEventListener&&(i.enabledChange_=()=>{this.changing_||(this.changing_=!0,Mc(this,i),this.changing_=!1,this.trigger("change"))},i.addEventListener("enabledchange",i.enabledChange_))}removeTrack(i){super.removeTrack(i),i.removeEventListener&&i.enabledChange_&&(i.removeEventListener("enabledchange",i.enabledChange_),i.enabledChange_=null)}},"AudioTrackList"),C);const Pc=/* @__PURE__ */__name(function(i,a){for(let s=0;s<i.length;s++)Object.keys(i[s]).length&&a.id!==i[s].id&&(i[s].selected=!1)},"disableOthers$2");let Ic=(__name(L=class extends Ec{constructor(i=[]){for(let a=i.length-1;a>=0;a--)if(i[a].selected){Pc(i,i[a]);break}super(i),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let i=0;i<this.length;i++)if(this[i].selected)return i;return-1},set(){}})}addTrack(i){i.selected&&Pc(this,i),super.addTrack(i),i.addEventListener&&(i.selectedChange_=()=>{this.changing_||(this.changing_=!0,Pc(this,i),this.changing_=!1,this.trigger("change"))},i.addEventListener("selectedchange",i.selectedChange_))}removeTrack(i){super.removeTrack(i),i.removeEventListener&&i.selectedChange_&&(i.removeEventListener("selectedchange",i.selectedChange_),i.selectedChange_=null)}},"VideoTrackList"),L),Lc=(__name(B=class extends Ec{addTrack(i){super.addTrack(i),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),i.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(i.kind)&&i.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(i){super.removeTrack(i),i.removeEventListener&&(this.queueChange_&&i.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&i.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(i=>i.toJSON())}},"TextTrackList"),B),Rc=(__name(U=class{constructor(i=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let a=0,s=i.length;a<s;a++)this.addTrackElement_(i[a])}addTrackElement_(i){const a=this.trackElements_.length;""+a in this||Object.defineProperty(this,a,{get(){return this.trackElements_[a]}}),-1===this.trackElements_.indexOf(i)&&this.trackElements_.push(i)}getTrackElementByTrack_(i){let a;for(let s=0,o=this.trackElements_.length;s<o;s++)if(i===this.trackElements_[s].track){a=this.trackElements_[s];break}return a}removeTrackElement_(i){for(let a=0,s=this.trackElements_.length;a<s;a++)if(i===this.trackElements_[a]){this.trackElements_[a].track&&"function"==typeof this.trackElements_[a].track.off&&this.trackElements_[a].track.off(),"function"==typeof this.trackElements_[a].off&&this.trackElements_[a].off(),this.trackElements_.splice(a,1);break}}},"HtmlTrackElementList"),U),Oc=(j=class{constructor(i){j.prototype.setCues_.call(this,i),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(i){const a=this.length||0;let s=0;const o=i.length;this.cues_=i,this.length_=i.length;const u=/* @__PURE__ */__name(function(i){""+i in this||Object.defineProperty(this,""+i,{get(){return this.cues_[i]}})},"defineProp");if(a<o)for(s=a;s<o;s++)u.call(this,s)}getCueById(i){let a=null;for(let s=0,o=this.length;s<o;s++){const o=this[s];if(o.id===i){a=o;break}}return a}},__name(j,"TextTrackCueList"),j);const Nc={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Fc={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},jc={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Hc={disabled:"disabled",hidden:"hidden",showing:"showing"};let Gc=(__name(V=class extends $l{constructor(i={}){super();const a={id:i.id||"vjs_track_"+newGUID$1(),kind:i.kind||"",language:i.language||""};let s=i.label||"";for(const o in a)Object.defineProperty(this,o,{get:()=>a[o],set(){}});Object.defineProperty(this,"label",{get:()=>s,set(i){i!==s&&(s=i,this.trigger("labelchange"))}})}},"Track"),V);const qc=/* @__PURE__ */__name(function(i){return new URL(i,An.baseURI)},"parseUrl$1"),Qc=/* @__PURE__ */__name(function(i){return new URL(i,An.baseURI).href},"getAbsoluteURL$1"),Kc=/* @__PURE__ */__name(function(i){if("string"==typeof i){const a=i.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return a?a[1].toLowerCase():""}return""},"getFileExtension$1"),Jc=/* @__PURE__ */__name(function(i,a=Tn.location){return qc(i).origin!==a.origin},"isCrossOrigin$1");var eu=/* @__PURE__ */Object.freeze({__proto__:null,parseUrl:qc,getAbsoluteURL:Qc,getFileExtension:Kc,isCrossOrigin:Jc});const tu=/* @__PURE__ */__name(function(i,a){const s=new Tn.WebVTT.Parser(Tn,Tn.vttjs,Tn.WebVTT.StringDecoder()),o=[];s.oncue=function(i){a.addCue(i)},s.onparsingerror=function(i){o.push(i)},s.onflush=function(){a.trigger({type:"loadeddata",target:a})},s.parse(i),o.length>0&&(Tn.console&&Tn.console.groupCollapsed&&Tn.console.groupCollapsed(`Text Track parsing errors for ${a.src}`),o.forEach(i=>Do.error(i)),Tn.console&&Tn.console.groupEnd&&Tn.console.groupEnd()),s.flush()},"parseCues$1"),nu=/* @__PURE__ */__name(function(i,a){const s={uri:i},o=Jc(i);o&&(s.cors=o);const u="use-credentials"===a.tech_.crossOrigin();u&&(s.withCredentials=u),Fn(s,Fl(this,function(i,s,o){if(i)return Do.error(i,s);a.loaded_=!0,"function"!=typeof Tn.WebVTT?a.tech_&&a.tech_.any(["vttjsloaded","vttjserror"],i=>{if("vttjserror"!==i.type)return tu(o,a);Do.error(`vttjs failed to load, stopping trying to process ${a.src}`)}):tu(o,a)}))},"loadTrack$1");let iu=(__name(z=class extends Gc{constructor(i={}){if(!i.tech)throw new Error("A tech was not provided.");const a=merge$1(i,{kind:jc[i.kind]||"subtitles",language:i.language||i.srclang||""});let s=Hc[a.mode]||"disabled";const o=a.default;"metadata"!==a.kind&&"chapters"!==a.kind||(s="hidden"),super(a),this.tech_=a.tech,this.cues_=[],this.activeCues_=[],this.preload_=!1!==this.tech_.preloadTextTracks;const u=new Oc(this.cues_),_=new Oc(this.activeCues_);let x=!1;this.timeupdateHandler=Fl(this,function(i={}){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,x&&(this.trigger("cuechange"),x=!1),"timeupdate"!==i.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==i.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))});const w=/* @__PURE__ */__name(()=>{this.stopTracking()},"disposeHandler");this.tech_.one("dispose",w),"disabled"!==s&&this.startTracking(),Object.defineProperties(this,{default:{get:()=>o,set(){}},mode:{get:()=>s,set(i){Hc[i]&&s!==i&&(s=i,this.preload_||"disabled"===s||0!==this.cues.length||nu(this.src,this),this.stopTracking(),"disabled"!==s&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?u:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(0===this.cues.length)return _;const i=this.tech_.currentTime(),a=[];for(let s=0,o=this.cues.length;s<o;s++){const o=this.cues[s];o.startTime<=i&&o.endTime>=i&&a.push(o)}if(x=!1,a.length!==this.activeCues_.length)x=!0;else for(let s=0;s<a.length;s++)-1===this.activeCues_.indexOf(a[s])&&(x=!0);return this.activeCues_=a,_.setCues_(this.activeCues_),_},set(){}}}),a.src?(this.src=a.src,this.preload_||(this.loaded_=!0),(this.preload_||"subtitles"!==a.kind&&"captions"!==a.kind)&&nu(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(i){let a=i;if(!("getCueAsHTML"in a)){a=new Tn.vttjs.VTTCue(i.startTime,i.endTime,i.text);for(const s in i)s in a||(a[s]=i[s]);a.id=i.id,a.originalCue_=i}const s=this.tech_.textTracks();for(let o=0;o<s.length;o++)s[o]!==this&&s[o].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)}toJSON(){return gc.trackToJson(this)}removeCue(i){let a=this.cues_.length;for(;a--;){const s=this.cues_[a];if(s===i||s.originalCue_&&s.originalCue_===i){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}}},"TextTrack"),z);iu.prototype.allowedEvents_={cuechange:"cuechange"};let ru=(__name($=class extends Gc{constructor(i={}){const a=merge$1(i,{kind:Fc[i.kind]||""});super(a);let s=!1;Object.defineProperty(this,"enabled",{get:()=>s,set(i){"boolean"==typeof i&&i!==s&&(s=i,this.trigger("enabledchange"))}}),a.enabled&&(this.enabled=a.enabled),this.loaded_=!0}},"AudioTrack"),$),au=(__name(Y=class extends Gc{constructor(i={}){const a=merge$1(i,{kind:Nc[i.kind]||""});super(a);let s=!1;Object.defineProperty(this,"selected",{get:()=>s,set(i){"boolean"==typeof i&&i!==s&&(s=i,this.trigger("selectedchange"))}}),a.selected&&(this.selected=a.selected)}},"VideoTrack"),Y),su=(__name(Z=class extends $l{constructor(i={}){let a;super();const s=new iu(i);this.kind=s.kind,this.src=s.src,this.srclang=s.language,this.label=s.label,this.default=s.default,Object.defineProperties(this,{readyState:{get:()=>a},track:{get:()=>s}}),a=Z.NONE,s.addEventListener("loadeddata",()=>{a=Z.LOADED,this.trigger({type:"load",target:this})})}},"HTMLTrackElement"),Z);su.prototype.allowedEvents_={load:"load"},su.NONE=0,su.LOADING=1,su.LOADED=2,su.ERROR=3;const ou={audio:{ListClass:kc,TrackClass:ru,capitalName:"Audio"},video:{ListClass:Ic,TrackClass:au,capitalName:"Video"},text:{ListClass:Lc,TrackClass:iu,capitalName:"Text"}};Object.keys(ou).forEach(function(i){ou[i].getterName=`${i}Tracks`,ou[i].privateName=`${i}Tracks_`});const lu={remoteText:{ListClass:Lc,TrackClass:iu,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Rc,TrackClass:su,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},cu=Object.assign({},ou,lu);function createTrackHelper$1(i,a,s,o,u={}){const _=i.textTracks();u.kind=a,s&&(u.label=s),o&&(u.language=o),u.tech=i;const x=new cu.text.TrackClass(u);return _.addTrack(x),x}lu.names=Object.keys(lu),ou.names=Object.keys(ou),cu.names=[].concat(lu.names).concat(ou.names),__name(createTrackHelper$1,"createTrackHelper$1");let uu=(__name(ee=class extends cc{constructor(i={},a=function(){}){i.reportTouchActivity=!1,super(null,i,a),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=/* @__PURE__ */new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),cu.names.forEach(a=>{const s=cu[a];i&&i[s.getterName]&&(this[s.privateName]=i[s.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(a=>{!1===i[`native${a}Tracks`]&&(this[`featuresNative${a}Tracks`]=!1)}),!1===i.nativeCaptions||!1===i.nativeTextTracks?this.featuresNativeTextTracks=!1:!0!==i.nativeCaptions&&!0!==i.nativeTextTracks||(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=!1!==i.preloadTextTracks,this.autoRemoteTextTracks_=new cu.text.ListClass,this.initTrackListeners(),i.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(i){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(i),1)),this.trigger({src:i,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Fl(this,function(){const i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,1===i&&this.stopTrackingProgress()}),500)}onDurationChange(i){this.duration_=this.duration()}buffered(){return createTimeRanges$1(0,0)}bufferedPercent(){return bufferedPercent$1(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(ou.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(i){(i=[].concat(i)).forEach(i=>{const a=this[`${i}Tracks`]()||[];let s=a.length;for(;s--;){const o=a[s];"text"===i&&this.removeRemoteTextTrack(o),a.removeTrack(o)}})}cleanupAutoTextTracks(){const i=this.autoRemoteTextTracks_||[];let a=i.length;for(;a--;){const s=i[a];this.removeRemoteTextTrack(s)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(i){return void 0!==i&&(this.error_=new MediaError$1(i),this.trigger("error")),this.error_}played(){return this.hasStarted_?createTimeRanges$1(0,0):createTimeRanges$1()}play(){}setScrubbing(i){}scrubbing(){}setCurrentTime(i){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){ou.names.forEach(i=>{const a=ou[i],s=/* @__PURE__ */__name(()=>{this.trigger(`${i}trackchange`)},"trackListChanges"),o=this[a.getterName]();o.addEventListener("removetrack",s),o.addEventListener("addtrack",s),this.on("dispose",()=>{o.removeEventListener("removetrack",s),o.removeEventListener("addtrack",s)})})}addWebVttScript_(){if(!Tn.WebVTT)if(An.body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain$1(qn)&&Object.keys(qn).length>0)return void this.trigger("vttjsloaded");const i=An.createElement("script");i.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",i.onload=()=>{this.trigger("vttjsloaded")},i.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{i.onload=null,i.onerror=null}),Tn.WebVTT=!0,this.el().parentNode.appendChild(i)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const i=this.textTracks(),a=this.remoteTextTracks(),s=/* @__PURE__ */__name(a=>i.addTrack(a.track),"handleAddTrack"),o=/* @__PURE__ */__name(a=>i.removeTrack(a.track),"handleRemoveTrack");a.on("addtrack",s),a.on("removetrack",o),this.addWebVttScript_();const u=/* @__PURE__ */__name(()=>this.trigger("texttrackchange"),"updateDisplay"),_=/* @__PURE__ */__name(()=>{u();for(let a=0;a<i.length;a++){const s=i[a];s.removeEventListener("cuechange",u),"showing"===s.mode&&s.addEventListener("cuechange",u)}},"textTracksChanges");_(),i.addEventListener("change",_),i.addEventListener("addtrack",_),i.addEventListener("removetrack",_),this.on("dispose",function(){a.off("addtrack",s),a.off("removetrack",o),i.removeEventListener("change",_),i.removeEventListener("addtrack",_),i.removeEventListener("removetrack",_);for(let a=0;a<i.length;a++){i[a].removeEventListener("cuechange",u)}})}addTextTrack(i,a,s){if(!i)throw new Error("TextTrack kind is required but was not provided");return createTrackHelper$1(this,i,a,s)}createRemoteTextTrack(i){const a=merge$1(i,{tech:this});return new lu.remoteTextEl.TrackClass(a)}addRemoteTextTrack(i={},a){const s=this.createRemoteTextTrack(i);return"boolean"!=typeof a&&(a=!1),this.remoteTextTrackEls().addTrackElement_(s),this.remoteTextTracks().addTrack(s.track),!1===a&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(s.track)),s}removeRemoteTextTrack(i){const a=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(i){const a=newGUID$1();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",()=>{this.queuedHanders_.has(a)&&(this.queuedHanders_.delete(a),i())})):this.requestNamedAnimationFrame(a,i),a}cancelVideoFrameCallback(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(i){}overrideNativeVideoTracks(i){}canPlayType(i){return""}static canPlayType(i){return""}static canPlaySource(i,a){return ee.canPlayType(i.type)}static isTech(i){return i.prototype instanceof ee||i instanceof ee||i===ee}static registerTech(i,a){if(ee.techs_||(ee.techs_={}),!ee.isTech(a))throw new Error(`Tech ${i} must be a Tech`);if(!ee.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!ee.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=sc(i),ee.techs_[i]=a,ee.techs_[ac(i)]=a,"Tech"!==i&&ee.defaultTechOrder_.push(i),a}static getTech(i){if(i)return ee.techs_&&ee.techs_[i]?ee.techs_[i]:(i=sc(i),Tn&&Tn.videojs&&Tn.videojs[i]?(Do.warn(`The ${i} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),Tn.videojs[i]):void 0)}},"Tech"),ee);cu.names.forEach(function(i){const a=cu[i];uu.prototype[a.getterName]=function(){return this[a.privateName]=this[a.privateName]||new a.ListClass,this[a.privateName]}}),uu.prototype.featuresVolumeControl=!0,uu.prototype.featuresMuteControl=!0,uu.prototype.featuresFullscreenResize=!1,uu.prototype.featuresPlaybackRate=!1,uu.prototype.featuresProgressEvents=!1,uu.prototype.featuresSourceset=!1,uu.prototype.featuresTimeupdateEvents=!1,uu.prototype.featuresNativeTextTracks=!1,uu.prototype.featuresVideoFrameCallback=!1,uu.withSourceHandlers=function(i){i.registerSourceHandler=function(a,s){let o=i.sourceHandlers;o||(o=i.sourceHandlers=[]),void 0===s&&(s=o.length),o.splice(s,0,a)},i.canPlayType=function(a){const s=i.sourceHandlers||[];let o;for(let i=0;i<s.length;i++)if(o=s[i].canPlayType(a),o)return o;return""},i.selectSourceHandler=function(a,s){const o=i.sourceHandlers||[];let u;for(let i=0;i<o.length;i++)if(u=o[i].canHandleSource(a,s),u)return o[i];return null},i.canPlaySource=function(a,s){const o=i.selectSourceHandler(a,s);return o?o.canHandleSource(a,s):""};["seekable","seeking","duration"].forEach(function(i){const a=this[i];"function"==typeof a&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):a.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(a){let s=i.selectSourceHandler(a,this.options_);s||(i.nativeSourceHandler?s=i.nativeSourceHandler:Do.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),s!==i.nativeSourceHandler&&(this.currentSource_=a),this.sourceHandler_=s.handleSource(a,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},cc.registerComponent("Tech",uu),uu.registerTech("Tech",uu),uu.defaultTechOrder_=[];const du={},hu={},pu={};function use$1(i,a){du[i]=du[i]||[],du[i].push(a)}function setSource$1(i,a,s){i.setTimeout(()=>setSourceHelper$1(a,du[a.type],s,i),1)}function setTech$1(i,a){i.forEach(i=>i.setTech&&i.setTech(a))}function get$1(i,a,s){return i.reduceRight(middlewareIterator$1(s),a[s]())}function set$1(i,a,s,o){return a[s](i.reduce(middlewareIterator$1(s),o))}function mediate$1(i,a,s,o=null){const u="call"+sc(s),_=i.reduce(middlewareIterator$1(u),o),x=_===pu,w=x?null:a[s](_);return executeRight$1(i,s,w,x),w}__name(use$1,"use$1"),__name(setSource$1,"setSource$1"),__name(setTech$1,"setTech$1"),__name(get$1,"get$1"),__name(set$1,"set$1"),__name(mediate$1,"mediate$1");const mu={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},fu={setCurrentTime:1,setMuted:1,setVolume:1},gu={play:1,pause:1};function middlewareIterator$1(i){return(a,s)=>a===pu?pu:s[i]?s[i](a):a}function executeRight$1(i,a,s,o){for(let u=i.length-1;u>=0;u--){const _=i[u];_[a]&&_[a](o,s)}}function clearCacheForPlayer$1(i){hu.hasOwnProperty(i.id())&&delete hu[i.id()]}function getOrCreateFactory$1(i,a){const s=hu[i.id()];let o=null;if(null==s)return o=a(i),hu[i.id()]=[[a,o]],o;for(let u=0;u<s.length;u++){const[i,_]=s[u];i===a&&(o=_)}return null===o&&(o=a(i),s.push([a,o])),o}function setSourceHelper$1(i={},a=[],s,o,u=[],_=!1){const[x,...w]=a;if("string"==typeof x)setSourceHelper$1(i,du[x],s,o,u,_);else if(x){const a=getOrCreateFactory$1(o,x);if(!a.setSource)return u.push(a),setSourceHelper$1(i,w,s,o,u,_);a.setSource(Object.assign({},i),function(x,C){if(x)return setSourceHelper$1(i,w,s,o,u,_);u.push(a),setSourceHelper$1(C,i.type===C.type?w:du[C.type],s,o,u,_)})}else w.length?setSourceHelper$1(i,w,s,o,u,_):_?s(i,u):setSourceHelper$1(i,du["*"],s,o,u,!0)}__name(middlewareIterator$1,"middlewareIterator$1"),__name(executeRight$1,"executeRight$1"),__name(clearCacheForPlayer$1,"clearCacheForPlayer$1"),__name(getOrCreateFactory$1,"getOrCreateFactory$1"),__name(setSourceHelper$1,"setSourceHelper$1");const _u={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},yu=/* @__PURE__ */__name(function(i=""){const a=Kc(i);return _u[a.toLowerCase()]||""},"getMimetype$1"),vu=/* @__PURE__ */__name((i,a)=>{if(!a)return"";if(i.cache_.source.src===a&&i.cache_.source.type)return i.cache_.source.type;const s=i.cache_.sources.filter(i=>i.src===a);if(s.length)return s[0].type;const o=i.$$("source");for(let u=0;u<o.length;u++){const i=o[u];if(i.type&&i.src&&i.src===a)return i.type}return yu(a)},"findMimetype$1"),bu=/* @__PURE__ */__name(function(i){if(Array.isArray(i)){let a=[];i.forEach(function(i){i=bu(i),Array.isArray(i)?a=a.concat(i):isObject$2(i)&&a.push(i)}),i=a}else i="string"==typeof i&&i.trim()?[fixSource$1({src:i})]:isObject$2(i)&&"string"==typeof i.src&&i.src&&i.src.trim()?[fixSource$1(i)]:[];return i},"filterSource$1");function fixSource$1(i){if(!i.type){const a=yu(i.src);a&&(i.type=a)}return i}__name(fixSource$1,"fixSource$1");const Tu=tl?10009:sl?461:8,Su={codes:{play:415,pause:19,ff:417,rw:412,back:Tu},names:{415:"play",19:"pause",417:"ff",412:"rw",[Tu]:"back"},isEventKey(i,a){return a=a.toLowerCase(),!(!this.names[i.keyCode]||this.names[i.keyCode]!==a)},getEventName(i){if(this.names[i.keyCode])return this.names[i.keyCode];if(this.codes[i.code]){const a=this.codes[i.code];return this.names[a]}return null}},xu=class _SpatialNavigation extends $l{constructor(i){super(),this.player_=i,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(i){const a=i.originalEvent?i.originalEvent:i;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(a.key)){if(this.isPaused_)return;a.preventDefault();const i=a.key.substring(5).toLowerCase();this.move(i)}else if(Su.isEventKey(a,"play")||Su.isEventKey(a,"pause")||Su.isEventKey(a,"ff")||Su.isEventKey(a,"rw")){a.preventDefault();const i=Su.getEventName(a);this.performMediaAction_(i)}else Su.isEventKey(a,"Back")&&i.target&&"function"==typeof i.target.closeable&&i.target.closeable()&&(a.preventDefault(),i.target.close())}performMediaAction_(i){if(this.player_)switch(i){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+5);break;case"rw":this.userSeek_(this.player_.currentTime()-5)}}userSeek_(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(i){const a=i.relatedTarget;let s=null;const o=this.getCurrentComponent(i.target);a&&(s=Boolean(a.closest(".video-js")),a.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(i.currentTarget.contains(i.relatedTarget)||s)&&a||(o&&"CloseButton"===o.name()?this.refocusComponent():(this.pause(),o&&o.el()&&(this.lastFocusedComponent_=o)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const i=this.player_,a=[];function searchForChildrenCandidates(i){for(const s of i)s.hasOwnProperty("el_")&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())&&a.push(s),s.hasOwnProperty("children_")&&s.children_.length>0&&searchForChildrenCandidates(s.children_)}return __name(searchForChildrenCandidates,"searchForChildrenCandidates"),i.children_.forEach(i=>{if(i.hasOwnProperty("el_")){if(i.getIsFocusable&&i.getIsAvailableToBeFocused&&i.getIsFocusable()&&i.getIsAvailableToBeFocused(i.el()))return void a.push(i);i.hasOwnProperty("children_")&&i.children_.length>0?searchForChildrenCandidates(i.children_):i.hasOwnProperty("items")&&i.items.length>0?searchForChildrenCandidates(i.items):this.findSuitableDOMChild(i)&&a.push(i)}if("ErrorDisplay"===i.name_&&i.opened_){const s=i.el_.querySelector(".vjs-errors-ok-button-container");if(s){s.querySelectorAll("button").forEach((i,s)=>{a.push({name:/* @__PURE__ */__name(()=>"ModalButton"+(s+1),"name"),el:/* @__PURE__ */__name(()=>i,"el"),getPositions:/* @__PURE__ */__name(()=>{const a=i.getBoundingClientRect();return{boundingClientRect:{x:a.x,y:a.y,width:a.width,height:a.height,top:a.top,right:a.right,bottom:a.bottom,left:a.left},center:{x:a.left+a.width/2,y:a.top+a.height/2,width:0,height:0,top:a.top+a.height/2,right:a.left+a.width/2,bottom:a.top+a.height/2,left:a.left+a.width/2}}},"getPositions"),getIsAvailableToBeFocused:/* @__PURE__ */__name(()=>!0,"getIsAvailableToBeFocused"),getIsFocusable:/* @__PURE__ */__name(i=>!0,"getIsFocusable"),focus:/* @__PURE__ */__name(()=>i.focus(),"focus")})})}}}),this.focusableComponents=a,this.focusableComponents}findSuitableDOMChild(i){function searchForSuitableChild(a){if(i.getIsFocusable(a)&&i.getIsAvailableToBeFocused(a))return a;for(let i=0;i<a.children.length;i++){const s=searchForSuitableChild(a.children[i]);if(s)return s}return null}return __name(searchForSuitableChild,"searchForSuitableChild"),i.el()?searchForSuitableChild(i.el()):null}getCurrentComponent(i){this.updateFocusableComponents();const a=i||document.activeElement;if(this.focusableComponents.length)for(const s of this.focusableComponents)if(s.el()===a)return s}add(i){const a=[...this.focusableComponents];i.hasOwnProperty("el_")&&i.getIsFocusable()&&i.getIsAvailableToBeFocused(i.el())&&a.push(i),this.focusableComponents=a,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(i){for(let a=0;a<this.focusableComponents.length;a++)if(this.focusableComponents[a].name()===i.name())return this.focusableComponents.splice(a,1),void this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(i){const a=this.getCurrentComponent();if(!a)return;const s=a.getPositions(),o=this.focusableComponents.filter(o=>o!==a&&this.isInDirection_(s.boundingClientRect,o.getPositions().boundingClientRect,i)),u=this.findBestCandidate_(s.center,o,i);u?this.focus(u):this.trigger({type:"endOfFocusableComponents",direction:i,focusedComponent:a})}findBestCandidate_(i,a,s){let o=1/0,u=null;for(const _ of a){const a=_.getPositions().center,x=this.calculateDistance_(i,a,s);x<o&&(o=x,u=_)}return u}isInDirection_(i,a,s){switch(s){case"right":return a.left>=i.right;case"left":return a.right<=i.left;case"down":return a.top>=i.bottom;case"up":return a.bottom<=i.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let i=0;i<this.focusableComponents.length;i++)if(this.focusableComponents[i].name()===this.lastFocusedComponent_.name())return void this.focus(this.focusableComponents[i])}else this.focus(this.updateFocusableComponents()[0])}focus(i){"object"==typeof i&&(i.getIsAvailableToBeFocused(i.el())?i.focus():this.findSuitableDOMChild(i)&&this.findSuitableDOMChild(i).focus())}calculateDistance_(i,a,s){const o=Math.abs(i.x-a.x),u=Math.abs(i.y-a.y);let _;switch(s){case"right":case"left":_=o+100*u;break;case"up":_=2*u+.5*o;break;case"down":_=5*u+o;break;default:_=o+u}return _}searchForTrackSelect_(){const i=this;for(const a of i.updateFocusableComponents())if("TextTrackSelect"===a.constructor.name){i.focus(a);break}}};__name(xu,"SpatialNavigation");let wu=xu,Au=(__name(ie=class extends cc{constructor(i,a,s){if(super(i,merge$1({createEl:!1},a),s),a.playerOptions.sources&&0!==a.playerOptions.sources.length)i.src(a.playerOptions.sources);else for(let o=0,u=a.playerOptions.techOrder;o<u.length;o++){const a=sc(u[o]);let s=uu.getTech(a);if(a||(s=cc.getComponent(a)),s&&s.isSupported()){i.loadTech_(a);break}}}},"MediaLoader"),ie);cc.registerComponent("MediaLoader",Au);let Cu=(ae=class extends cc{constructor(i,a){super(i,a),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(i="div",a={},s={}){a=Object.assign({className:this.buildCSSClass(),tabIndex:0},a),"button"===i&&Do.error(`Creating a ClickableComponent with an HTML element of ${i} is not supported; use a Button instead.`),s=Object.assign({role:"button"},s),this.tabIndex_=a.tabIndex;const o=createEl$1(i,a,s);return this.player_.options_.experimentalSvgIcons||o.appendChild(createEl$1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(i){return this.controlTextEl_=createEl$1("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_}controlText(i,a=this.el()){if(void 0===i)return this.controlText_||"Need Text";const s=this.localize(i);this.controlText_=i,textContent$1(this.controlTextEl_,s),this.nonIconControl||this.player_.options_.noUITitleAttributes||a.setAttribute("title",s)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(i){" "===i.key||"Enter"===i.key?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):super.handleKeyDown(i)}},__name(ae,"ClickableComponent"),ae);cc.registerComponent("ClickableComponent",Cu);let Eu=(__name(le=class extends Cu{constructor(i,a){super(i,a),this.update(),this.update_=i=>this.update(i),i.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return createEl$1("div",{className:"vjs-poster"})}crossOrigin(i){if(void 0===i)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===i||"anonymous"===i||"use-credentials"===i?this.$("img")&&(this.$("img").crossOrigin=i):this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${i}"`)}update(i){const a=this.player().poster();this.setSrc(a),a?this.show():this.hide()}setSrc(i){i?(this.$("img")||this.el_.appendChild(createEl$1("picture",{className:"vjs-poster",tabIndex:-1},{},createEl$1("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=i):this.el_.textContent=""}handleClick(i){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?silencePromise$1(this.player_.play()):this.player_.pause())}},"PosterImage"),le);Eu.prototype.crossorigin=Eu.prototype.crossOrigin,cc.registerComponent("PosterImage",Eu);const Mu="#222",ku="#ccc",Pu={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor$1(i,a){let s;if(4===i.length)s=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else{if(7!==i.length)throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");s=i.slice(1)}return"rgba("+parseInt(s.slice(0,2),16)+","+parseInt(s.slice(2,4),16)+","+parseInt(s.slice(4,6),16)+","+a+")"}function tryUpdateStyle$1(i,a,s){try{i.style[a]=s}catch(o){return}}function getCSSPositionValue(i){return i?`${i}px`:""}__name(constructColor$1,"constructColor$1"),__name(tryUpdateStyle$1,"tryUpdateStyle$1"),__name(getCSSPositionValue,"getCSSPositionValue");let Iu=(__name(ce=class extends cc{constructor(i,a,s){super(i,a,s);const o=/* @__PURE__ */__name(i=>this.updateDisplay(i),"updateDisplayTextHandler"),u=/* @__PURE__ */__name(i=>{this.updateDisplayOverlay(),this.updateDisplay(i)},"updateDisplayHandler");i.on("loadstart",i=>this.toggleDisplay(i)),i.on("useractive",o),i.on("userinactive",o),i.on("texttrackchange",o),i.on("loadedmetadata",i=>{this.updateDisplayOverlay(),this.preselectTrack(i)}),i.ready(Fl(this,function(){if(i.tech_&&i.tech_.featuresNativeTextTracks)return void this.hide();i.on("fullscreenchange",u),i.on("playerresize",u);const a=Tn.screen.orientation||Tn,s=Tn.screen.orientation?"change":"orientationchange";a.addEventListener(s,u),i.on("dispose",()=>a.removeEventListener(s,u));const o=this.options_.playerOptions.tracks||[];for(let i=0;i<o.length;i++)this.player_.addRemoteTextTrack(o[i],!0);this.preselectTrack()}))}preselectTrack(){const i={captions:1,subtitles:1},a=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage;let o,u,_;for(let x=0;x<a.length;x++){const w=a[x];s&&s.enabled&&s.language&&s.language===w.language&&w.kind in i?w.kind===s.kind?_=w:_||(_=w):s&&!s.enabled?(_=null,o=null,u=null):w.default&&("descriptions"!==w.kind||o?w.kind in i&&!u&&(u=w):o=w)}_?_.mode="showing":u?u.mode="showing":o&&(o.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){"function"==typeof Tn.WebVTT&&Tn.WebVTT.processCues(Tn,[],this.el_)}updateDisplay(){const i=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){const a=[];for(let s=0;s<i.length;++s){const o=i[s];"showing"===o.mode&&a.push(o)}return void this.updateForTrack(a)}let s=null,o=null,u=i.length;for(;u--;){const a=i[u];"showing"===a.mode&&("descriptions"===a.kind?s=a:o=a)}if(o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):s&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(s)),!Tn.CSS.supports("inset","10px")){const i=this.el_,a=i.querySelectorAll(".vjs-text-track-cue"),s=this.player_.controlBar.el_.getBoundingClientRect().height,o=this.player_.el_.getBoundingClientRect().height;i.style="",tryUpdateStyle$1(i,"position","relative"),tryUpdateStyle$1(i,"height",o-s+"px"),tryUpdateStyle$1(i,"top","unset"),tryUpdateStyle$1(i,"bottom",ul?o+"px":"0px"),a.length>0&&a.forEach(i=>{if(i.style.inset){const a=i.style.inset.split(" ");3===a.length&&Object.assign(i.style,{top:a[0],right:a[1],bottom:a[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!Tn.CSS.supports("inset-inline: 10px"))return;const i=this.player_.currentWidth(),a=this.player_.currentHeight(),s=i/a,o=this.player_.videoWidth()/this.player_.videoHeight();let u=0,_=0;Math.abs(s-o)>.1&&(s>o?u=Math.round((i-a*o)/2):_=Math.round((a-i/o)/2)),tryUpdateStyle$1(this.el_,"insetInline",getCSSPositionValue(u)),tryUpdateStyle$1(this.el_,"insetBlock",getCSSPositionValue(_))}updateDisplayState(i){const a=this.player_.textTrackSettings.getValues(),s=i.activeCues;let o=s.length;for(;o--;){const i=s[o];if(!i)continue;const u=i.displayState;if(a.color&&(u.firstChild.style.color=a.color),a.textOpacity&&tryUpdateStyle$1(u.firstChild,"color",constructColor$1(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(u.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&tryUpdateStyle$1(u.firstChild,"backgroundColor",constructColor$1(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?tryUpdateStyle$1(u,"backgroundColor",constructColor$1(a.windowColor,a.windowOpacity)):u.style.backgroundColor=a.windowColor),a.edgeStyle&&("dropshadow"===a.edgeStyle?u.firstChild.style.textShadow=`2px 2px 3px ${Mu}, 2px 2px 4px ${Mu}, 2px 2px 5px ${Mu}`:"raised"===a.edgeStyle?u.firstChild.style.textShadow=`1px 1px ${Mu}, 2px 2px ${Mu}, 3px 3px ${Mu}`:"depressed"===a.edgeStyle?u.firstChild.style.textShadow=`1px 1px ${ku}, 0 1px ${ku}, -1px -1px ${Mu}, 0 -1px ${Mu}`:"uniform"===a.edgeStyle&&(u.firstChild.style.textShadow=`0 0 4px ${Mu}, 0 0 4px ${Mu}, 0 0 4px ${Mu}, 0 0 4px ${Mu}`)),a.fontPercent&&1!==a.fontPercent){const i=Tn.parseFloat(u.style.fontSize);u.style.fontSize=i*a.fontPercent+"px",u.style.height="auto",u.style.top="auto"}a.fontFamily&&"default"!==a.fontFamily&&("small-caps"===a.fontFamily?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=Pu[a.fontFamily])}}updateForTrack(i){if(Array.isArray(i)||(i=[i]),"function"!=typeof Tn.WebVTT||i.every(i=>!i.activeCues))return;const a=[];for(let s=0;s<i.length;++s){const o=i[s];for(let i=0;i<o.activeCues.length;++i)a.push(o.activeCues[i])}Tn.WebVTT.processCues(Tn,a,this.el_);for(let s=0;s<i.length;++s){const a=i[s];for(let i=0;i<a.activeCues.length;++i){const o=a.activeCues[i].displayState;addClass$1(o,"vjs-text-track-cue","vjs-text-track-cue-"+(a.language?a.language:s)),a.language&&setAttribute$1(o,"lang",a.language)}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},"TextTrackDisplay"),ce);cc.registerComponent("TextTrackDisplay",Iu);let Lu=(__name(de=class extends cc{createEl(){const i=this.player_.isAudio(),a=this.localize(i?"Audio Player":"Video Player"),s=createEl$1("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),o=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}},"LoadingSpinner"),de);cc.registerComponent("LoadingSpinner",Lu);let Du=(__name(pe=class extends Cu{createEl(i,a={},s={}){const o=createEl$1("button",a=Object.assign({className:this.buildCSSClass()},a),s=Object.assign({type:"button"},s));return this.player_.options_.experimentalSvgIcons||o.appendChild(createEl$1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o}addChild(i,a={}){const s=this.constructor.name;return Do.warn(`Adding an actionable (user controllable) child to a Button (${s}) is not supported; use a ClickableComponent instead.`),cc.prototype.addChild.call(this,i,a)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(i){" "!==i.key&&"Enter"!==i.key?super.handleKeyDown(i):i.stopPropagation()}},"Button"),pe);cc.registerComponent("Button",Du);let Ru=(__name(fe=class extends Du{constructor(i,a){super(i,a),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(i){const a=this.player_.play();if("tap"===i.type||this.mouseused_&&"clientX"in i&&"clientY"in i)return silencePromise$1(a),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());const s=this.player_.getChild("controlBar"),o=s&&s.getChild("playToggle");if(!o)return void this.player_.tech(!0).focus();const u=/* @__PURE__ */__name(()=>o.focus(),"playFocus");isPromise$2(a)?a.then(u,()=>{}):this.setTimeout(u,1)}handleKeyDown(i){this.mouseused_=!1,super.handleKeyDown(i)}handleMouseDown(i){this.mouseused_=!0}},"BigPlayButton"),fe);Ru.prototype.controlText_="Play Video",cc.registerComponent("BigPlayButton",Ru);let Ou=(__name(_e=class extends Du{constructor(i,a){super(i,a),this.setIcon("cancel"),this.controlText(a&&a.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(i){this.trigger({type:"close",bubbles:!1})}handleKeyDown(i){"Escape"===i.key?(i.preventDefault(),i.stopPropagation(),this.trigger("click")):super.handleKeyDown(i)}},"CloseButton"),_e);cc.registerComponent("CloseButton",Ou);let Nu=(__name(ye=class extends Du{constructor(i,a={}){super(i,a),a.replay=void 0===a.replay||a.replay,this.setIcon("play"),this.on(i,"play",i=>this.handlePlay(i)),this.on(i,"pause",i=>this.handlePause(i)),a.replay&&this.on(i,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(i){this.player_.paused()?silencePromise$1(this.player_.play()):this.player_.pause()}handleSeeked(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)}handlePlay(i){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(i){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",i=>this.handleSeeked(i))}},"PlayToggle"),ye);Nu.prototype.controlText_="Play",cc.registerComponent("PlayToggle",Nu);let Bu=(__name(be=class extends cc{constructor(i,a){super(i,a),this.on(i,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const i=this.buildCSSClass(),a=super.createEl("div",{className:`${i} vjs-time-control vjs-control`}),s=createEl$1("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return a.appendChild(s),this.contentEl_=createEl$1("span",{className:`${i}-display`},{role:"presentation"}),a.appendChild(this.contentEl_),a}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(i){(this.player_.options_.enableSmoothSeeking||"seeking"!==i.type)&&this.updateContent(i)}updateTextNode_(i=0){i=formatTime$1(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let i=this.textNode_;i&&this.contentEl_.firstChild!==i&&(i=null,Do.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=An.createTextNode(this.formattedTime_),this.textNode_&&(i?this.contentEl_.replaceChild(this.textNode_,i):this.contentEl_.appendChild(this.textNode_))}))}updateContent(i){}},"TimeDisplay"),be);Bu.prototype.labelText_="Time",Bu.prototype.controlText_="Time",cc.registerComponent("TimeDisplay",Bu);let Fu=(__name(Te=class extends Bu{buildCSSClass(){return"vjs-current-time"}updateContent(i){let a;a=this.player_.ended()?this.player_.duration():i&&i.target&&"function"==typeof i.target.pendingSeekTime?i.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)}},"CurrentTimeDisplay"),Te);Fu.prototype.labelText_="Current Time",Fu.prototype.controlText_="Current Time",cc.registerComponent("CurrentTimeDisplay",Fu);let Uu=(__name(Se=class extends Bu{constructor(i,a){super(i,a);const s=/* @__PURE__ */__name(i=>this.updateContent(i),"updateContent");this.on(i,"durationchange",s),this.on(i,"loadstart",s),this.on(i,"loadedmetadata",s)}buildCSSClass(){return"vjs-duration"}updateContent(i){const a=this.player_.duration();this.updateTextNode_(a)}},"DurationDisplay"),Se);Uu.prototype.labelText_="Duration",Uu.prototype.controlText_="Duration",cc.registerComponent("DurationDisplay",Uu);let ju=(__name(xe=class extends cc{createEl(){const i=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=super.createEl("div"),s=super.createEl("span",{textContent:"/"});return a.appendChild(s),i.appendChild(a),i}},"TimeDivider"),xe);cc.registerComponent("TimeDivider",ju);let Vu=(__name(we=class extends Bu{constructor(i,a){super(i,a),this.on(i,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const i=super.createEl();return!1!==this.options_.displayNegative&&i.insertBefore(createEl$1("span",{},{"aria-hidden":!0},"-"),this.contentEl_),i}updateContent(i){if("number"!=typeof this.player_.duration())return;let a;a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a)}},"RemainingTimeDisplay"),we);Vu.prototype.labelText_="Remaining Time",Vu.prototype.controlText_="Remaining Time",cc.registerComponent("RemainingTimeDisplay",Vu);let zu=(__name(Pe=class extends cc{constructor(i,a){super(i,a),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){const i=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=createEl$1("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(createEl$1("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(An.createTextNode(this.localize("LIVE"))),i.appendChild(this.contentEl_),i}dispose(){this.contentEl_=null,super.dispose()}updateShowing(i){this.player().duration()===1/0?this.show():this.hide()}},"LiveDisplay"),Pe);cc.registerComponent("LiveDisplay",zu);let Hu=(__name(Re=class extends Du{constructor(i,a){super(i,a),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const i=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",i),this.textEl_=createEl$1("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),i.appendChild(this.textEl_),i}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}},"SeekToLive"),Re);function clamp$1(i,a,s){return i=Number(i),Math.min(s,Math.max(a,isNaN(i)?a:i))}Hu.prototype.controlText_="Seek to live, currently playing live",cc.registerComponent("SeekToLive",Hu),__name(clamp$1,"clamp$1");var $u=/* @__PURE__ */Object.freeze({__proto__:null,clamp:clamp$1});let Gu=(__name(ze=class extends cc{constructor(i,a){super(i,a),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(i,a={},s={}){return a.className=a.className+" vjs-slider",a=Object.assign({tabIndex:0},a),s=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},s),super.createEl(i,a,s)}handleMouseDown(i){const a=this.bar.el_.ownerDocument;"mousedown"===i.type&&i.preventDefault(),"touchstart"!==i.type||Go||i.preventDefault(),blockTextSelection$1(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)}handleMouseMove(i){}handleMouseUp(i){const a=this.bar.el_.ownerDocument;unblockTextSelection$1(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(a,"mousemove",this.handleMouseMove_),this.off(a,"mouseup",this.handleMouseUp_),this.off(a,"touchmove",this.handleMouseMove_),this.off(a,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const i=this.getProgress();return i===this.progress_||(this.progress_=i,this.requestNamedAnimationFrame("Slider#update",()=>{const a=this.vertical()?"height":"width";this.bar.el().style[a]=(100*i).toFixed(2)+"%"})),i}getProgress(){return Number(clamp$1(this.getPercent(),0,1).toFixed(4))}calculateDistance(i){const a=getPointerPosition$1(this.el_,i);return this.vertical()?a.y:a.x}handleKeyDown(i){const a=this.options_.playerOptions.spatialNavigation,s=a&&a.enabled,o=a&&a.horizontalSeek;s?o&&"ArrowLeft"===i.key||!o&&"ArrowDown"===i.key?(i.preventDefault(),i.stopPropagation(),this.stepBack()):o&&"ArrowRight"===i.key||!o&&"ArrowUp"===i.key?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(i)):"ArrowLeft"===i.key||"ArrowDown"===i.key?(i.preventDefault(),i.stopPropagation(),this.stepBack()):"ArrowUp"===i.key||"ArrowRight"===i.key?(i.preventDefault(),i.stopPropagation(),this.stepForward()):super.handleKeyDown(i)}handleClick(i){i.stopPropagation(),i.preventDefault()}vertical(i){if(void 0===i)return this.vertical_||!1;this.vertical_=!!i,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}},"Slider"),ze);cc.registerComponent("Slider",Gu);const Wu=/* @__PURE__ */__name((i,a)=>clamp$1(i/a*100,0,100).toFixed(2)+"%","percentify$1");let qu=(__name(He=class extends cc{constructor(i,a){super(i,a),this.partEls_=[],this.on(i,"progress",i=>this.update(i))}createEl(){const i=super.createEl("div",{className:"vjs-load-progress"}),a=createEl$1("span",{className:"vjs-control-text"}),s=createEl$1("span",{textContent:this.localize("Loaded")}),o=An.createTextNode(": ");return this.percentageEl_=createEl$1("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),i.appendChild(a),a.appendChild(s),a.appendChild(o),a.appendChild(this.percentageEl_),i}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(i){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const i=this.player_.liveTracker,a=this.player_.buffered(),s=i&&i.isLive()?i.seekableEnd():this.player_.duration(),o=this.player_.bufferedEnd(),u=this.partEls_,_=Wu(o,s);this.percent_!==_&&(this.el_.style.width=_,textContent$1(this.percentageEl_,_),this.percent_=_);for(let x=0;x<a.length;x++){const i=a.start(x),s=a.end(x);let _=u[x];_||(_=this.el_.appendChild(createEl$1()),u[x]=_),_.dataset.start===i&&_.dataset.end===s||(_.dataset.start=i,_.dataset.end=s,_.style.left=Wu(i,o),_.style.width=Wu(s-i,o))}for(let x=u.length;x>a.length;x--)this.el_.removeChild(u[x-1]);u.length=a.length})}},"LoadProgressBar"),He);cc.registerComponent("LoadProgressBar",qu);let Xu=(__name($e=class extends cc{constructor(i,a){super(i,a),this.update=Ul(Fl(this,this.update),Bl)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(i,a,s){const o=findPosition$1(this.el_),u=getBoundingClientRect$1(this.player_.el()),_=i.width*a;if(!u||!o)return;let x=i.left-u.left+_,w=i.width-_+(u.right-i.right);w||(w=i.width-_,x=_);let C=o.width/2;x<C?C+=C-x:w<C&&(C=w),C<0?C=0:C>o.width&&(C=o.width),C=Math.round(C),this.el_.style.right=`-${C}px`,this.write(s)}write(i){textContent$1(this.el_,i)}updateTime(i,a,s,o){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let u;const _=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const i=this.player_.liveTracker.liveWindow(),s=i-a*i;u=(s<1?"":"-")+formatTime$1(s,i)}else u=formatTime$1(s,_);this.update(i,a,u),o&&o()})}},"TimeTooltip"),$e);cc.registerComponent("TimeTooltip",Xu);let Qu=(__name(We=class extends cc{constructor(i,a){super(i,a),this.setIcon("circle"),this.update=Ul(Fl(this,this.update),Bl)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(i,a,s){const o=this.getChild("timeTooltip");if(!o)return;const u=s&&s.target&&"function"==typeof s.target.pendingSeekTime?s.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();o.updateTime(i,a,u)}},"PlayProgressBar"),We);Qu.prototype.options_={children:[]},vl||Vo||Qu.prototype.options_.children.push("timeTooltip"),cc.registerComponent("PlayProgressBar",Qu);let Ku=(__name(qe=class extends cc{constructor(i,a){super(i,a),this.update=Ul(Fl(this,this.update),Bl)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(i,a){const s=a*this.player_.duration();this.getChild("timeTooltip").updateTime(i,a,s,()=>{this.el_.style.left=i.width*a+"px"})}},"MouseTimeDisplay"),qe);Ku.prototype.options_={children:["timeTooltip"]},cc.registerComponent("MouseTimeDisplay",Ku);let Yu=(__name(Xe=class extends Gu{constructor(i,a){(a=merge$1(Xe.prototype.options_,a)).children=[...a.children];const s=i.options_.disableSeekWhileScrubbingOnMobile&&(vl||Vo)||i.options_.disableSeekWhileScrubbingOnSTV;(!vl&&!Vo||s)&&a.children.splice(1,0,"mouseTimeDisplay"),super(i,a),this.shouldDisableSeekWhileScrubbing_=s,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=Fl(this,this.update),this.update=Ul(this.update_,Bl),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=i=>this.enableInterval_(i),this.disableIntervalHandler_=i=>this.disableInterval_(i),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in An&&"visibilityState"in An&&this.on(An,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(i){"hidden"===An.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Bl))}disableInterval_(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&"ended"!==i.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(i){if("hidden"===An.visibilityState)return;const a=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const s=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),o=this.player_.liveTracker;let u=this.player_.duration();o&&o.isLive()&&(u=this.player_.liveTracker.liveCurrentTime()),this.percent_!==a&&(this.el_.setAttribute("aria-valuenow",(100*a).toFixed(2)),this.percent_=a),this.currentTime_===s&&this.duration_===u||(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[formatTime$1(s,u),formatTime$1(u,u)],"{1} of {2}")),this.currentTime_=s,this.duration_=u),this.bar&&this.bar.update(getBoundingClientRect$1(this.el()),this.getProgress(),i)}),a}userSeek_(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(i){if(void 0!==i)if(null!==i){const a=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(i,a))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(null!==this.pendingSeekTime())return this.pendingSeekTime()/this.player_.duration();const i=this.getCurrentTime_();let a;const s=this.player_.liveTracker;return s&&s.isLive()?(a=(i-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(a=1)):a=i/this.player_.duration(),a}handleMouseDown(i){isSingleLeftClick$1(i)&&(i.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(i))}handleMouseMove(i,a=!1){if(!isSingleLeftClick$1(i)||isNaN(this.player_.duration()))return;let s;a||this.player_.scrubbing()||this.player_.scrubbing(!0);const o=this.calculateDistance(i),u=this.player_.liveTracker;if(u&&u.isLive()){if(o>=.99)return void u.seekToLiveEdge();const i=u.seekableStart(),a=u.liveCurrentTime();if(s=i+o*u.liveWindow(),s>=a&&(s=a),s<=i&&(s=i+.1),s===1/0)return}else s=o*this.player_.duration(),s===this.player_.duration()&&(s-=.1);this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(s):this.userSeek_(s),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const i=this.getChild("mouseTimeDisplay");i&&i.show()}disable(){super.disable();const i=this.getChild("mouseTimeDisplay");i&&i.hide()}handleMouseUp(i){super.handleMouseUp(i),i&&i.stopPropagation(),this.player_.scrubbing(!1),null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?silencePromise$1(this.player_.play()):this.update_()}handlePendingSeek_(i){this.player_.paused()||this.player_.pause();const a=null!==this.pendingSeekTime()?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(a+i),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(i){null!==this.pendingSeekTime()&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(i){const a=this.player_.liveTracker;if(" "===i.key||"Enter"===i.key)i.preventDefault(),i.stopPropagation(),this.handleAction(i);else if("Home"===i.key)i.preventDefault(),i.stopPropagation(),this.userSeek_(0);else if("End"===i.key)i.preventDefault(),i.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(i.key)){i.preventDefault(),i.stopPropagation();const s=.1*parseInt(i.key,10);a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else"PageDown"===i.key?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):"PageUp"===i.key?(i.preventDefault(),i.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(i)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in An&&"visibilityState"in An&&this.off(An,"visibilitychange",this.toggleVisibility_),super.dispose()}},"SeekBar"),Xe);Yu.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12},cc.registerComponent("SeekBar",Yu);let Ju=(__name(Qe=class extends cc{constructor(i,a){super(i,a),this.handleMouseMove=Ul(Fl(this,this.handleMouseMove),Bl),this.throttledHandleMouseSeek=Ul(Fl(this,this.handleMouseSeek),Bl),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(i){const a=this.getChild("seekBar");if(!a)return;const s=a.getChild("playProgressBar"),o=a.getChild("mouseTimeDisplay");if(!s&&!o)return;const u=a.el(),_=findPosition$1(u);let x=getPointerPosition$1(u,i).x;x=clamp$1(x,0,1),o&&o.update(_,x),s&&s.update(_,a.getProgress())}handleMouseSeek(i){const a=this.getChild("seekBar");a&&a.handleMouseMove(i)}enabled(){return this.enabled_}disable(){if(this.children().forEach(i=>i.disable&&i.disable()),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&silencePromise$1(this.player_.play())}}enable(){this.children().forEach(i=>i.enable&&i.enable()),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)}handleMouseDown(i){const a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(i),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)}handleMouseUp(i){const a=this.getChild("seekBar");a&&a.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()}},"ProgressControl"),Qe);Ju.prototype.options_={children:["seekBar"]},cc.registerComponent("ProgressControl",Ju);let Zu=(__name(Ye=class extends Du{constructor(i,a){super(i,a),this.setIcon("picture-in-picture-enter"),this.on(i,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(i,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(i,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){"audio"===this.player_.currentType().substring(0,5)||this.player_.audioPosterMode()||this.player_.audioOnlyMode()?(this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()):this.show()}handlePictureInPictureEnabledChange(){An.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in Tn?this.enable():this.disable()}handlePictureInPictureChange(i){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){"function"==typeof An.exitPictureInPicture&&super.show()}},"PictureInPictureToggle"),Ye);Zu.prototype.controlText_="Picture-in-Picture",cc.registerComponent("PictureInPictureToggle",Zu);let td=(__name(et=class extends Du{constructor(i,a){super(i,a),this.setIcon("fullscreen-enter"),this.on(i,"fullscreenchange",i=>this.handleFullscreenChange(i)),!1===An[i.fsApi_.fullscreenEnabled]&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(i){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}},"FullscreenToggle"),et);td.prototype.controlText_="Fullscreen",cc.registerComponent("FullscreenToggle",td);const sd=/* @__PURE__ */__name(function(i,a){a.tech_&&!a.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(a,"loadstart",function(){a.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})},"checkVolumeSupport$1");let ld=(__name(tt=class extends cc{createEl(){const i=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",i),i.appendChild(super.createEl("span",{className:"vjs-control-text"})),i}},"VolumeLevel"),tt);cc.registerComponent("VolumeLevel",ld);let cd=(__name(nt=class extends cc{constructor(i,a){super(i,a),this.update=Ul(Fl(this,this.update),Bl)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(i,a,s,o){if(!s){const s=getBoundingClientRect$1(this.el_),o=getBoundingClientRect$1(this.player_.el()),u=i.width*a;if(!o||!s)return;const _=i.left-o.left+u,x=i.width-u+(o.right-i.right);let w=s.width/2;_<w?w+=w-_:x<w&&(w=x),w<0?w=0:w>s.width&&(w=s.width),this.el_.style.right=`-${w}px`}this.write(`${o}%`)}write(i){textContent$1(this.el_,i)}updateVolume(i,a,s,o,u){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(i,a,s,o.toFixed(0)),u&&u()})}},"VolumeLevelTooltip"),nt);cc.registerComponent("VolumeLevelTooltip",cd);let ud=(__name(it=class extends cc{constructor(i,a){super(i,a),this.update=Ul(Fl(this,this.update),Bl)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(i,a,s){const o=100*a;this.getChild("volumeLevelTooltip").updateVolume(i,a,s,o,()=>{s?this.el_.style.bottom=i.height*a+"px":this.el_.style.left=i.width*a+"px"})}},"MouseVolumeLevelDisplay"),it);ud.prototype.options_={children:["volumeLevelTooltip"]},cc.registerComponent("MouseVolumeLevelDisplay",ud);let dd=(__name(rt=class extends Gu{constructor(i,a){super(i,a),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(i,"volumechange",i=>this.updateARIAAttributes(i)),i.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(i){isSingleLeftClick$1(i)&&super.handleMouseDown(i)}handleMouseMove(i){const a=this.getChild("mouseVolumeLevelDisplay");if(a){const s=this.el(),o=getBoundingClientRect$1(s),u=this.vertical();let _=getPointerPosition$1(s,i);_=u?_.y:_.x,_=clamp$1(_,0,1),a.update(o,_,u)}isSingleLeftClick$1(i)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(i){const a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")}volumeAsPercentage_(){return Math.round(100*this.player_.volume())}updateLastVolume_(){const i=this.player_.volume();this.one("sliderinactive",()=>{0===this.player_.volume()&&this.player_.lastVolume_(i)})}},"VolumeBar"),rt);dd.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},vl||Vo||dd.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),dd.prototype.playerEvent="volumechange",cc.registerComponent("VolumeBar",dd);let md=(__name(at=class extends cc{constructor(i,a={}){a.vertical=a.vertical||!1,(void 0===a.volumeBar||isPlain$1(a.volumeBar))&&(a.volumeBar=a.volumeBar||{},a.volumeBar.vertical=a.vertical),super(i,a),sd(this,i),this.throttledHandleMouseMove=Ul(Fl(this,this.handleMouseMove),Bl),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let i="vjs-volume-horizontal";return this.options_.vertical&&(i="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${i}`})}handleMouseDown(i){const a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)}handleMouseUp(i){const a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)}handleMouseMove(i){this.volumeBar.handleMouseMove(i)}},"VolumeControl"),at);md.prototype.options_={children:["volumeBar"]},cc.registerComponent("VolumeControl",md);const _d=/* @__PURE__ */__name(function(i,a){a.tech_&&!a.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(a,"loadstart",function(){a.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})},"checkMuteSupport$1");let yd=(__name(st=class extends Du{constructor(i,a){super(i,a),_d(this,i),this.on(i,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(i){const a=this.player_.volume(),s=this.player_.lastVolume_();if(0===a){const i=s<.1?.1:s;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(i){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const i=this.player_.volume();let a=3;this.setIcon("volume-high"),vl&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===i||this.player_.muted()?(this.setIcon("volume-mute"),a=0):i<.33?(this.setIcon("volume-low"),a=1):i<.67&&(this.setIcon("volume-medium"),a=2),removeClass$1(this.el_,[0,1,2,3].reduce((i,a)=>i+`${a?" ":""}vjs-vol-${a}`,"")),addClass$1(this.el_,`vjs-vol-${a}`)}updateControlText_(){const i=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)}},"MuteToggle"),st);yd.prototype.controlText_="Mute",cc.registerComponent("MuteToggle",yd);let vd=(__name(ot=class extends cc{constructor(i,a={}){void 0!==a.inline?a.inline=a.inline:a.inline=!0,(void 0===a.volumeControl||isPlain$1(a.volumeControl))&&(a.volumeControl=a.volumeControl||{},a.volumeControl.vertical=!a.inline),super(i,a),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(i,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let i="vjs-volume-panel-horizontal";return this.options_.inline||(i="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${i}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(i){"Escape"===i.key&&this.muteToggle.focus()}handleMouseOver(i){this.addClass("vjs-hover"),on$1(An,"keyup",this.handleKeyPressHandler_)}handleMouseOut(i){this.removeClass("vjs-hover"),off$1(An,"keyup",this.handleKeyPressHandler_)}handleKeyPress(i){"Escape"===i.key&&this.handleMouseOut()}},"VolumePanel"),ot);vd.prototype.options_={children:["muteToggle","volumeControl"]},cc.registerComponent("VolumePanel",vd);const Td=class _SkipForward extends Du{constructor(i,a){super(i,a),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(i.language())])),this.show()):this.hide()}getSkipForwardTime(){const i=this.options_.playerOptions;return i.controlBar&&i.controlBar.skipButtons&&i.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(i){if(isNaN(this.player_.duration()))return;const a=this.player_.currentTime(),s=this.player_.liveTracker,o=s&&s.isLive()?s.seekableEnd():this.player_.duration();let u;u=a+this.skipTime<=o?a+this.skipTime:o,this.player_.currentTime(u)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}};__name(Td,"SkipForward");let Sd=Td;Sd.prototype.controlText_="Skip Forward",cc.registerComponent("SkipForward",Sd);const xd=class _SkipBackward extends Du{constructor(i,a){super(i,a),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(i.language())])),this.show()):this.hide()}getSkipBackwardTime(){const i=this.options_.playerOptions;return i.controlBar&&i.controlBar.skipButtons&&i.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(i){const a=this.player_.currentTime(),s=this.player_.liveTracker,o=s&&s.isLive()&&s.seekableStart();let u;u=o&&a-this.skipTime<=o?o:a>=this.skipTime?a-this.skipTime:0,this.player_.currentTime(u)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}};__name(xd,"SkipBackward");let wd=xd;wd.prototype.controlText_="Skip Backward",cc.registerComponent("SkipBackward",wd);let Ad=(__name(lt=class extends cc{constructor(i,a){super(i,a),a&&(this.menuButton_=a.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(i){i instanceof cc&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(i){i instanceof cc&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))}removeChild(i){"string"==typeof i&&(i=this.getChild(i)),this.removeEventListenerForItem(i),super.removeChild(i)}addItem(i){const a=this.addChild(i);a&&this.addEventListenerForItem(a)}createEl(){const i=this.options_.contentElType||"ul";this.contentEl_=createEl$1(i,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const a=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),on$1(a,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),a}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(i){const a=i.relatedTarget||An.activeElement;if(!this.children().some(i=>i.el()===a)){const i=this.menuButton_;i&&i.buttonPressed_&&a!==i.el().firstChild&&i.unpressButton()}}handleTapClick(i){if(this.menuButton_){this.menuButton_.unpressButton();const a=this.children();if(!Array.isArray(a))return;const s=a.filter(a=>a.el()===i.target)[0];if(!s)return;"CaptionSettingsMenuItem"!==s.name()&&this.menuButton_.focus()}}handleKeyDown(i){"ArrowLeft"===i.key||"ArrowDown"===i.key?(i.preventDefault(),i.stopPropagation(),this.stepForward()):"ArrowRight"!==i.key&&"ArrowUp"!==i.key||(i.preventDefault(),i.stopPropagation(),this.stepBack())}stepForward(){let i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_+1),this.focus(i)}stepBack(){let i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_-1),this.focus(i)}focus(i=0){const a=this.children().slice();a.length&&a[0].hasClass("vjs-menu-title")&&a.shift(),a.length>0&&(i<0?i=0:i>=a.length&&(i=a.length-1),this.focusedChild_=i,a[i].el_.focus())}},"Menu"),lt);cc.registerComponent("Menu",Ad);let Cd=(__name(ct=class extends cc{constructor(i,a={}){super(i,a),this.menuButton_=new Du(i,a),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const s=Du.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+s,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const o=/* @__PURE__ */__name(i=>this.handleClick(i),"handleClick");this.handleMenuKeyUp_=i=>this.handleMenuKeyUp(i),this.on(this.menuButton_,"tap",o),this.on(this.menuButton_,"click",o),this.on(this.menuButton_,"keydown",i=>this.handleKeyDown(i)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),on$1(An,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",i=>this.handleMouseLeave(i)),this.on("keydown",i=>this.handleSubmenuKeyDown(i))}update(){const i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const i=new Ad(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const a=createEl$1("li",{className:"vjs-menu-title",textContent:sc(this.options_.title),tabIndex:-1}),s=new cc(this.player_,{el:a});i.addItem(s)}if(this.items=this.createItems(),this.items)for(let a=0;a<this.items.length;a++)i.addItem(this.items[a]);return i}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(i){super.setIcon(i,this.menuButton_.el_)}buildWrapperCSSClass(){let i="vjs-menu-button";!0===this.options_.inline?i+="-inline":i+="-popup";return`vjs-menu-button ${i} ${Du.prototype.buildCSSClass()} ${super.buildCSSClass()}`}buildCSSClass(){let i="vjs-menu-button";return!0===this.options_.inline?i+="-inline":i+="-popup",`vjs-menu-button ${i} ${super.buildCSSClass()}`}controlText(i,a=this.menuButton_.el()){return this.menuButton_.controlText(i,a)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(i){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(i){this.removeClass("vjs-hover"),off$1(An,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(i){"Escape"===i.key||"Tab"===i.key?(this.buttonPressed_&&this.unpressButton(),"Tab"===!i.key&&(i.preventDefault(),this.menuButton_.focus())):"Up"!==i.key&&("Down"!==i.key||this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)||this.buttonPressed_||(i.preventDefault(),this.pressButton())}handleMenuKeyUp(i){"Escape"!==i.key&&"Tab"!==i.key||this.removeClass("vjs-hover")}handleSubmenuKeyPress(i){this.handleSubmenuKeyDown(i)}handleSubmenuKeyDown(i){"Escape"!==i.key&&"Tab"!==i.key||(this.buttonPressed_&&this.unpressButton(),"Tab"===!i.key&&(i.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),vl&&isInFrame$1())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}},"MenuButton"),ct);cc.registerComponent("MenuButton",Cd);let Ed=(__name(ut=class extends Cd{constructor(i,a){const s=a.tracks;if(super(i,a),this.items.length<=1&&this.hide(),!s)return;const o=Fl(this,this.update);s.addEventListener("removetrack",o),s.addEventListener("addtrack",o),s.addEventListener("labelchange",o),this.player_.on("ready",o),this.player_.on("dispose",function(){s.removeEventListener("removetrack",o),s.removeEventListener("addtrack",o),s.removeEventListener("labelchange",o)})}},"TrackButton"),ut);cc.registerComponent("TrackButton",Ed);let Md=(__name(dt=class extends Cu{constructor(i,a){super(i,a),this.selectable=a.selectable,this.isSelected_=a.selected||!1,this.multiSelectable=a.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(i,a,s){this.nonIconControl=!0;const o=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},a),s),u=createEl$1("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?o.appendChild(u):o.replaceChild(u,o.querySelector(".vjs-icon-placeholder")),o}handleKeyDown(i){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(i.key)||super.handleKeyDown(i)}handleClick(i){this.selected(!0)}selected(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}},"MenuItem"),dt);cc.registerComponent("MenuItem",Md);let kd=(__name(ht=class extends Md{constructor(i,a){const s=a.track,o=i.textTracks();a.label=s.label||s.language||"Unknown",a.selected="showing"===s.mode,super(i,a),this.track=s,this.kinds=(a.kinds||[a.kind||this.track.kind]).filter(Boolean);const u=/* @__PURE__ */__name((...i)=>{this.handleTracksChange.apply(this,i)},"changeHandler"),_=/* @__PURE__ */__name((...i)=>{this.handleSelectedLanguageChange.apply(this,i)},"selectedLanguageChangeHandler");if(i.on(["loadstart","texttrackchange"],u),o.addEventListener("change",u),o.addEventListener("selectedlanguagechange",_),this.on("dispose",function(){i.off(["loadstart","texttrackchange"],u),o.removeEventListener("change",u),o.removeEventListener("selectedlanguagechange",_)}),void 0===o.onchange){let i;this.on(["tap","click"],function(){if("object"!=typeof Tn.Event)try{i=new Tn.Event("change")}catch(a){}i||(i=An.createEvent("Event"),i.initEvent("change",!0,!0)),o.dispatchEvent(i)})}this.handleTracksChange()}handleClick(i){const a=this.track,s=this.player_.textTracks();if(super.handleClick(i),s)for(let o=0;o<s.length;o++){const i=s[o];-1!==this.kinds.indexOf(i.kind)&&(i===a?"showing"!==i.mode&&(i.mode="showing"):"disabled"!==i.mode&&(i.mode="disabled"))}}handleTracksChange(i){const a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)}handleSelectedLanguageChange(i){if("showing"===this.track.mode){const i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}},"TextTrackMenuItem"),ht);cc.registerComponent("TextTrackMenuItem",kd);let Id=(__name(pt=class extends kd{constructor(i,a){a.track={player:i,kind:a.kind,kinds:a.kinds,default:!1,mode:"disabled"},a.kinds||(a.kinds=[a.kind]),a.label?a.track.label=a.label:a.track.label=a.kinds.join(" and ")+" off",a.selectable=!0,a.multiSelectable=!1,super(i,a)}handleTracksChange(i){const a=this.player().textTracks();let s=!0;for(let o=0,u=a.length;o<u;o++){const i=a[o];if(this.options_.kinds.indexOf(i.kind)>-1&&"showing"===i.mode){s=!1;break}}s!==this.isSelected_&&this.selected(s)}handleSelectedLanguageChange(i){const a=this.player().textTracks();let s=!0;for(let o=0,u=a.length;o<u;o++){const i=a[o];if(["captions","descriptions","subtitles"].indexOf(i.kind)>-1&&"showing"===i.mode){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}},"OffTextTrackMenuItem"),pt);cc.registerComponent("OffTextTrackMenuItem",Id);let Ld=(__name(mt=class extends Ed{constructor(i,a={}){a.tracks=i.textTracks(),super(i,a)}createItems(i=[],a=kd){let s;this.label_&&(s=`${this.label_} off`),i.push(new Id(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;const o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let u=0;u<o.length;u++){const s=o[u];if(this.kinds_.indexOf(s.kind)>-1){const o=new a(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${s.kind}-menu-item`),i.push(o)}}return i}},"TextTrackButton"),mt);cc.registerComponent("TextTrackButton",Ld);let Dd=(__name(ft=class extends Md{constructor(i,a){const s=a.track,o=a.cue,u=i.currentTime();a.selectable=!0,a.multiSelectable=!1,a.label=o.text,a.selected=o.startTime<=u&&u<o.endTime,super(i,a),this.track=s,this.cue=o}handleClick(i){super.handleClick(),this.player_.currentTime(this.cue.startTime)}},"ChaptersTrackMenuItem"),ft);cc.registerComponent("ChaptersTrackMenuItem",Dd);let Rd=(__name(gt=class extends Ld{constructor(i,a,s){super(i,a,s),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(i=>{i.selected(this.track_.activeCues[0]===i.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(i){if(i&&i.track&&"chapters"!==i.track.kind)return;const a=this.findChaptersTrack();a!==this.track_?(this.setTrack(a),super.update()):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&super.update()}setTrack(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";const i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);i&&i.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const i=this.player_.textTracks()||[];for(let a=i.length-1;a>=0;a--){const s=i[a];if(s.kind===this.kind_)return s}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(sc(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const i=[];if(!this.track_)return i;const a=this.track_.cues;if(!a)return i;for(let s=0,o=a.length;s<o;s++){const o=a[s],u=new Dd(this.player_,{track:this.track_,cue:o});i.push(u)}return i}},"ChaptersButton"),gt);Rd.prototype.kind_="chapters",Rd.prototype.controlText_="Chapters",cc.registerComponent("ChaptersButton",Rd);let Od=(__name(_t=class extends Ld{constructor(i,a,s){super(i,a,s),this.setIcon("audio-description");const o=i.textTracks(),u=Fl(this,this.handleTracksChange);o.addEventListener("change",u),this.on("dispose",function(){o.removeEventListener("change",u)})}handleTracksChange(i){const a=this.player().textTracks();let s=!1;for(let o=0,u=a.length;o<u;o++){const i=a[o];if(i.kind!==this.kind_&&"showing"===i.mode){s=!0;break}}s?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}},"DescriptionsButton"),_t);Od.prototype.kind_="descriptions",Od.prototype.controlText_="Descriptions",cc.registerComponent("DescriptionsButton",Od);let Nd=(__name(yt=class extends Ld{constructor(i,a,s){super(i,a,s),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}},"SubtitlesButton"),yt);Nd.prototype.kind_="subtitles",Nd.prototype.controlText_="Subtitles",cc.registerComponent("SubtitlesButton",Nd);let Bd=(__name(vt=class extends kd{constructor(i,a){a.track={player:i,kind:a.kind,label:a.kind+" settings",selectable:!1,default:!1,mode:"disabled"},a.selectable=!1,a.name="CaptionSettingsMenuItem",super(i,a),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+a.kind+" settings dialog")}handleClick(i){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}},"CaptionSettingsMenuItem"),vt);cc.registerComponent("CaptionSettingsMenuItem",Bd);let Fd=(__name(bt=class extends Ld{constructor(i,a,s){super(i,a,s),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const i=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(i.push(new Bd(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(i)}},"CaptionsButton"),bt);Fd.prototype.kind_="captions",Fd.prototype.controlText_="Captions",cc.registerComponent("CaptionsButton",Fd);let Ud=(__name(Tt=class extends kd{createEl(i,a,s){const o=super.createEl(i,a,s),u=o.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",o):u.appendChild(createEl$1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(createEl$1("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),o}},"SubsCapsMenuItem"),Tt);cc.registerComponent("SubsCapsMenuItem",Ud);let Vd=(__name(St=class extends Ld{constructor(i,a={}){super(i,a),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(sc(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let i=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(i.push(new Bd(this.player_,{kind:this.label_})),this.hideThreshold_+=1),i=super.createItems(i,Ud),i}},"SubsCapsButton"),St);Vd.prototype.kinds_=["captions","subtitles"],Vd.prototype.controlText_="Subtitles",cc.registerComponent("SubsCapsButton",Vd);let Hd=(__name(xt=class extends Md{constructor(i,a){const s=a.track,o=i.audioTracks();a.label=s.label||s.language||"Unknown",a.selected=s.enabled,super(i,a),this.track=s,this.addClass(`vjs-${s.kind}-menu-item`);const u=/* @__PURE__ */__name((...i)=>{this.handleTracksChange.apply(this,i)},"changeHandler");o.addEventListener("change",u),this.on("dispose",()=>{o.removeEventListener("change",u)})}createEl(i,a,s){const o=super.createEl(i,a,s),u=o.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(u.appendChild(createEl$1("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(createEl$1("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o}handleClick(i){if(super.handleClick(i),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const i=this.player_.audioTracks();for(let a=0;a<i.length;a++){const s=i[a];s!==this.track&&(s.enabled=s===this.track)}}}handleTracksChange(i){this.selected(this.track.enabled)}},"AudioTrackMenuItem"),xt);cc.registerComponent("AudioTrackMenuItem",Hd);let $d=(__name(wt=class extends Ed{constructor(i,a={}){a.tracks=i.audioTracks(),super(i,a),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(i=[]){this.hideThreshold_=1;const a=this.player_.audioTracks();for(let s=0;s<a.length;s++){const o=a[s];i.push(new Hd(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return i}},"AudioTrackButton"),wt);$d.prototype.controlText_="Audio Track",cc.registerComponent("AudioTrackButton",$d);let Gd=(__name(At=class extends Md{constructor(i,a){const s=a.rate,o=parseFloat(s,10);a.label=s,a.selected=o===i.playbackRate(),a.selectable=!0,a.multiSelectable=!1,super(i,a),this.label=s,this.rate=o,this.on(i,"ratechange",i=>this.update(i))}handleClick(i){super.handleClick(),this.player().playbackRate(this.rate)}update(i){this.selected(this.player().playbackRate()===this.rate)}},"PlaybackRateMenuItem"),At);Gd.prototype.contentElType="button",cc.registerComponent("PlaybackRateMenuItem",Gd);let Wd=(__name(Ct=class extends Cd{constructor(i,a){super(i,a),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(i,"loadstart",i=>this.updateVisibility(i)),this.on(i,"ratechange",i=>this.updateLabel(i)),this.on(i,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const i=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=createEl$1("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),i.appendChild(this.labelEl_),i}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const i=this.playbackRates(),a=[];for(let s=i.length-1;s>=0;s--)a.push(new Gd(this.player(),{rate:i[s]+"x"}));return a}handlePlaybackRateschange(i){this.update()}playbackRates(){const i=this.player();return i.playbackRates&&i.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}},"PlaybackRateMenuButton"),Ct);Wd.prototype.controlText_="Playback Rate",cc.registerComponent("PlaybackRateMenuButton",Wd);let Xd=(__name(Et=class extends cc{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(i="div",a={},s={}){return a.className||(a.className=this.buildCSSClass()),super.createEl(i,a,s)}},"Spacer"),Et);cc.registerComponent("Spacer",Xd);let Qd=(__name(Mt=class extends Xd{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}},"CustomControlSpacer"),Mt);cc.registerComponent("CustomControlSpacer",Qd);let Kd=(__name(kt=class extends cc{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}},"ControlBar"),kt);Kd.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},cc.registerComponent("ControlBar",Kd);let Yd=(__name(Pt=class extends bc{constructor(i,a){super(i,a),this.on(i,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const i=this.player().error();return i?this.localize(i.message):""}},"ErrorDisplay"),Pt);Yd.prototype.options_=Object.assign({},bc.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),cc.registerComponent("ErrorDisplay",Yd);const Jd=class _TextTrackSelect extends cc{constructor(i,a={}){super(i,a),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim();return createEl$1("select",{id:this.options_.id},{},this.options_.SelectOptions.map(i=>{const a=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${newGUID$1()}`)+"-"+i[1].replace(/\W+/g,""),s=createEl$1("option",{id:a,value:this.localize(i[0]),textContent:this.localize(i[1])});return s.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${a}`),s}))}};__name(Jd,"TextTrackSelect");let Zd=Jd;cc.registerComponent("TextTrackSelect",Zd);const th=class _TextTrackFieldset extends cc{constructor(i,a={}){super(i,a);const s=createEl$1("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(s);const o=this.options_.selects;for(const u of o){const a=this.options_.selectConfigs[u],s=a.className,o=a.id.replace("%s",this.options_.id_);let _=null;const x=`vjs_select_${newGUID$1()}`;if("colors"===this.options_.type){_=createEl$1("span",{className:s});const i=createEl$1("label",{id:o,className:"vjs-label",textContent:this.localize(a.label)});i.setAttribute("for",x),_.appendChild(i)}const w=new Zd(i,{SelectOptions:a.options,legendId:this.options_.legendId,id:x,labelId:o});this.addChild(w),"colors"===this.options_.type&&(_.appendChild(w.el()),this.el().appendChild(_))}}createEl(){return createEl$1("fieldset",{className:this.options_.className})}};__name(th,"TextTrackFieldset");let rh=th;cc.registerComponent("TextTrackFieldset",rh);const uh=class _TextTrackSettingsColors extends cc{constructor(i,a={}){super(i,a);const s=this.options_.textTrackComponentid,o=new rh(i,{id_:s,legendId:`captions-text-legend-${s}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o);const u=new rh(i,{id_:s,legendId:`captions-background-${s}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(u);const _=new rh(i,{id_:s,legendId:`captions-window-${s}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(_)}createEl(){return createEl$1("div",{className:"vjs-track-settings-colors"})}};__name(uh,"TextTrackSettingsColors");let dh=uh;cc.registerComponent("TextTrackSettingsColors",dh);const fh=class _TextTrackSettingsFont extends cc{constructor(i,a={}){super(i,a);const s=this.options_.textTrackComponentid,o=new rh(i,{id_:s,legendId:`captions-font-size-${s}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o);const u=new rh(i,{id_:s,legendId:`captions-edge-style-${s}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(u);const _=new rh(i,{id_:s,legendId:`captions-font-family-${s}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(_)}createEl(){return createEl$1("div",{className:"vjs-track-settings-font"})}};__name(fh,"TextTrackSettingsFont");let _h=fh;cc.registerComponent("TextTrackSettingsFont",_h);const vh=class _TrackSettingsControls extends cc{constructor(i,a={}){super(i,a);const s=new Du(i,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Reset"),this.addChild(s);const o=this.localize("Done"),u=new Du(i,{controlText:o,className:"vjs-done-button"});u.el().classList.remove("vjs-control","vjs-button"),u.el().textContent=o,this.addChild(u)}createEl(){return createEl$1("div",{className:"vjs-track-settings-controls"})}};__name(vh,"TrackSettingsControls");let wh=vh;cc.registerComponent("TrackSettingsControls",wh);const Ph="vjs-text-track-settings",Ih=["#000","Black"],Lh=["#00F","Blue"],Dh=["#0FF","Cyan"],Rh=["#0F0","Green"],Oh=["#F0F","Magenta"],Fh=["#F00","Red"],jh=["#FFF","White"],Hh=["#FF0","Yellow"],Gh=["1","Opaque"],Qh=["0.5","Semi-Transparent"],Kh=["0","Transparent"],Jh={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ih,jh,Fh,Rh,Lh,Hh,Oh,Dh],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Gh,Qh,Kh],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[jh,Ih,Fh,Rh,Lh,Hh,Oh,Dh],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:/* @__PURE__ */__name(i=>"1.00"===i?null:Number(i),"parser")},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Gh,Qh],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[Kh,Qh,Gh],className:"vjs-window-opacity vjs-opacity"}};function parseOptionValue$1(i,a){if(a&&(i=a(i)),i&&"none"!==i)return i}function getSelectedOptionValue$1(i,a){return parseOptionValue$1(i.options[i.options.selectedIndex].value,a)}function setSelectedOption$1(i,a,s){if(a)for(let o=0;o<i.options.length;o++)if(parseOptionValue$1(i.options[o].value,s)===a){i.selectedIndex=o;break}}Jh.windowColor.options=Jh.backgroundColor.options,__name(parseOptionValue$1,"parseOptionValue$1"),__name(getSelectedOptionValue$1,"getSelectedOptionValue$1"),__name(setSelectedOption$1,"setSelectedOption$1");let ep=(__name(It=class extends bc{constructor(i,a){a.temporary=!1,super(i,a),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(i),this.endDialog=createEl$1("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),void 0===a.persistTextTrackSettings&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(i){const a=new dh(i,{textTrackComponentid:this.id_,selectConfigs:Jh,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(a);const s=new _h(i,{textTrackComponentid:this.id_,selectConfigs:Jh,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(s);const o=new wh(i);this.addChild(o)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),each$1(Jh,i=>{this.on(this.$(i.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return reduce$1(Jh,(i,a,s)=>{const o=getSelectedOptionValue$1(this.$(a.selector),a.parser);return void 0!==o&&(i[s]=o),i},{})}setValues(i){each$1(Jh,(a,s)=>{setSelectedOption$1(this.$(a.selector),i[s],a.parser)})}setDefaults(){each$1(Jh,i=>{const a=i.hasOwnProperty("default")?i.default:0;this.$(i.selector).selectedIndex=a})}restoreSettings(){let i;try{i=JSON.parse(Tn.localStorage.getItem(Ph))}catch(a){Do.warn(a)}i&&this.setValues(i)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const i=this.getValues();try{Object.keys(i).length?Tn.localStorage.setItem(Ph,JSON.stringify(i)):Tn.localStorage.removeItem(Ph)}catch(a){Do.warn(a)}}updateDisplay(){const i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}},"TextTrackSettings"),It);cc.registerComponent("TextTrackSettings",ep);let tp=(__name(Lt=class extends cc{constructor(i,a){let s=a.ResizeObserver||Tn.ResizeObserver;null===a.ResizeObserver&&(s=!1);super(i,merge$1({createEl:!s,reportTouchActivity:!1},a)),this.ResizeObserver=a.ResizeObserver||Tn.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=Vl(()=>{this.resizeHandler()},100,!1,this),s?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(i.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const i=this.debouncedHandler_;let a=this.unloadListener_=function(){off$1(this,"resize",i),off$1(this,"unload",a),a=null};on$1(this.el_.contentWindow,"unload",a),on$1(this.el_.contentWindow,"resize",i)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}},"ResizeManager"),Lt);cc.registerComponent("ResizeManager",tp);const np={trackingThreshold:20,liveTolerance:15};let ip=(__name(Dt=class extends cc{constructor(i,a){super(i,merge$1(np,a,{createEl:!1})),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=i=>this.handlePlay(i),this.handleFirstTimeupdate_=i=>this.handleFirstTimeupdate(i),this.handleSeeked_=i=>this.handleSeeked(i),this.seekToLiveEdge_=i=>this.seekToLiveEdge(i),this.reset_(),this.on(this.player_,"durationchange",i=>this.handleDurationchange(i)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const i=this.player_.seekable();if(!i||!i.length)return;const a=Number(Tn.performance.now().toFixed(4)),s=-1===this.lastTime_?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+s;const o=this.liveCurrentTime(),u=this.player_.currentTime();let _=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-u)>this.options_.liveTolerance;this.timeupdateSeen_&&o!==1/0||(_=!1),_!==this.behindLiveEdge_&&(this.behindLiveEdge_=_,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Bl),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const i=this.player_.seekable(),a=[];let s=i?i.length:0;for(;s--;)a.push(i.end(s));return a.length?a.sort()[a.length-1]:1/0}seekableStart(){const i=this.player_.seekable(),a=[];let s=i?i.length:0;for(;s--;)a.push(i.start(s));return a.length?a.sort()[0]:0}liveWindow(){const i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const i=this.seekableEnd();return-1!==this.lastSeekEnd_&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return"number"==typeof this.trackingInterval_}seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}},"LiveTracker"),Dt);cc.registerComponent("LiveTracker",ip);const rp=class _TitleBar extends cc{constructor(i,a){super(i,a),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:createEl$1("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${newGUID$1()}`}),description:createEl$1("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${newGUID$1()}`})},createEl$1("div",{className:"vjs-title-bar"},{},values$1(this.els))}updateDom_(){const i=this.player_.tech_,a=i&&i.el_,s={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(i=>{const o=this.state[i],u=this.els[i],_=s[i];emptyEl$1(u),o&&textContent$1(u,o),a&&(a.removeAttribute(_),o&&a.setAttribute(_,u.id))}),this.state.title||this.state.description?this.show():this.hide()}update(i){this.setState(i)}dispose(){const i=this.player_.tech_,a=i&&i.el_;a&&(a.removeAttribute("aria-labelledby"),a.removeAttribute("aria-describedby")),super.dispose(),this.els=null}};__name(rp,"TitleBar");let ap=rp;cc.registerComponent("TitleBar",ap);const sp={initialDisplay:4e3,position:[],takeFocus:!1},op=class _TransientButton extends Du{constructor(i,a){super(i,a=merge$1(sp,a)),this.controlText(a.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],i=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(i=>`vjs-${i}`).join(" ")}`}createEl(){const i=createEl$1("button",{},{type:"button",class:this.buildCSSClass()},createEl$1("span"));return this.controlTextEl_=i.querySelector("span"),i}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}};__name(op,"TransientButton");let lp=op;cc.registerComponent("TransientButton",lp);const cp=/* @__PURE__ */__name(i=>{const a=i.el();if(a.hasAttribute("src"))return i.triggerSourceset(a.src),!0;const s=i.$$("source"),o=[];let u="";if(!s.length)return!1;for(let _=0;_<s.length;_++){const i=s[_].src;i&&-1===o.indexOf(i)&&o.push(i)}return!!o.length&&(1===o.length&&(u=o[0]),i.triggerSourceset(u),!0)},"sourcesetLoad$1"),up=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(i){const a=An.createElement(this.nodeName.toLowerCase());a.innerHTML=i;const s=An.createDocumentFragment();for(;a.childNodes.length;)s.appendChild(a.childNodes[0]);return this.innerText="",Tn.Element.prototype.appendChild.call(this,s),this.innerHTML}}),dp=/* @__PURE__ */__name((i,a)=>{let s={};for(let o=0;o<i.length&&(s=Object.getOwnPropertyDescriptor(i[o],a),!(s&&s.set&&s.get));o++);return s.enumerable=!0,s.configurable=!0,s},"getDescriptor$1"),hp=/* @__PURE__ */__name(i=>dp([i.el(),Tn.HTMLMediaElement.prototype,Tn.Element.prototype,up],"innerHTML"),"getInnerHTMLDescriptor$1"),pp=/* @__PURE__ */__name(function(i){const a=i.el();if(a.resetSourceWatch_)return;const s={},o=hp(i),u=/* @__PURE__ */__name(s=>(...o)=>{const u=s.apply(a,o);return cp(i),u},"appendWrapper");["append","appendChild","insertAdjacentHTML"].forEach(i=>{a[i]&&(s[i]=a[i],a[i]=u(s[i]))}),Object.defineProperty(a,"innerHTML",merge$1(o,{set:u(o.set)})),a.resetSourceWatch_=()=>{a.resetSourceWatch_=null,Object.keys(s).forEach(i=>{a[i]=s[i]}),Object.defineProperty(a,"innerHTML",o)},i.one("sourceset",a.resetSourceWatch_)},"firstSourceWatch$1"),mp=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?Qc(Tn.Element.prototype.getAttribute.call(this,"src")):""},set(i){return Tn.Element.prototype.setAttribute.call(this,"src",i),i}}),fp=/* @__PURE__ */__name(i=>dp([i.el(),Tn.HTMLMediaElement.prototype,mp],"src"),"getSrcDescriptor$1"),_p=/* @__PURE__ */__name(function(i){if(!i.featuresSourceset)return;const a=i.el();if(a.resetSourceset_)return;const s=fp(i),o=a.setAttribute,u=a.load;Object.defineProperty(a,"src",merge$1(s,{set:/* @__PURE__ */__name(o=>{const u=s.set.call(a,o);return i.triggerSourceset(a.src),u},"set")})),a.setAttribute=(s,u)=>{const _=o.call(a,s,u);return/src/i.test(s)&&i.triggerSourceset(a.src),_},a.load=()=>{const s=u.call(a);return cp(i)||(i.triggerSourceset(""),pp(i)),s},a.currentSrc?i.triggerSourceset(a.currentSrc):cp(i)||pp(i),a.resetSourceset_=()=>{a.resetSourceset_=null,a.load=u,a.setAttribute=o,Object.defineProperty(a,"src",s),a.resetSourceWatch_&&a.resetSourceWatch_()}},"setupSourceset$1");let yp=(__name(Rt=class extends uu{constructor(i,a){super(i,a);const s=i.source;let o=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&"VIDEO"===this.el_.tagName,s&&(this.el_.currentSrc!==s.src||i.tag&&3===i.tag.initNetworkState_)?this.setSource(s):this.handleLateInit_(this.el_),i.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const i=this.el_.childNodes;let a=i.length;const s=[];for(;a--;){const u=i[a];"track"===u.nodeName.toLowerCase()&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(u),this.remoteTextTracks().addTrack(u.track),this.textTracks().addTrack(u.track),o||this.el_.hasAttribute("crossorigin")||!Jc(u.src)||(o=!0)):s.push(u))}for(let o=0;o<s.length;o++)this.el_.removeChild(s[o])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&o&&Do.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),this.restoreMetadataTracksInIOSNativePlayer_(),(_l||Zo)&&!0===i.nativeControlsForTouch&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Rt.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){_p(this)}restoreMetadataTracksInIOSNativePlayer_(){const i=this.textTracks();let a;const s=/* @__PURE__ */__name(()=>{a=[];for(let s=0;s<i.length;s++){const o=i[s];"metadata"===o.kind&&a.push({track:o,storedMode:o.mode})}},"takeMetadataTrackSnapshot");s(),i.addEventListener("change",s),this.on("dispose",()=>i.removeEventListener("change",s));const o=/* @__PURE__ */__name(()=>{for(let i=0;i<a.length;i++){const s=a[i];"disabled"===s.track.mode&&s.track.mode!==s.storedMode&&(s.track.mode=s.storedMode)}i.removeEventListener("change",o)},"restoreTrackMode");this.on("webkitbeginfullscreen",()=>{i.removeEventListener("change",s),i.removeEventListener("change",o),i.addEventListener("change",o)}),this.on("webkitendfullscreen",()=>{i.removeEventListener("change",s),i.addEventListener("change",s),i.removeEventListener("change",o)})}overrideNative_(i,a){if(a!==this[`featuresNative${i}Tracks`])return;const s=i.toLowerCase();this[`${s}TracksListeners_`]&&Object.keys(this[`${s}TracksListeners_`]).forEach(i=>{this.el()[`${s}Tracks`].removeEventListener(i,this[`${s}TracksListeners_`][i])}),this[`featuresNative${i}Tracks`]=!a,this[`${s}TracksListeners_`]=null,this.proxyNativeTracksForType_(s)}overrideNativeAudioTracks(i){this.overrideNative_("Audio",i)}overrideNativeVideoTracks(i){this.overrideNative_("Video",i)}proxyNativeTracksForType_(i){const a=ou[i],s=this.el()[a.getterName],o=this[a.getterName]();if(!this[`featuresNative${a.capitalName}Tracks`]||!s||!s.addEventListener)return;const u={change:/* @__PURE__ */__name(a=>{const s={type:"change",target:o,currentTarget:o,srcElement:o};o.trigger(s),"text"===i&&this[lu.remoteText.getterName]().trigger(s)},"change"),addtrack(i){o.addTrack(i.track)},removetrack(i){o.removeTrack(i.track)}},_=/* @__PURE__ */__name(function(){const i=[];for(let a=0;a<o.length;a++){let u=!1;for(let i=0;i<s.length;i++)if(s[i]===o[a]){u=!0;break}u||i.push(o[a])}for(;i.length;)o.removeTrack(i.shift())},"removeOldTracks");this[a.getterName+"Listeners_"]=u,Object.keys(u).forEach(i=>{const a=u[i];s.addEventListener(i,a),this.on("dispose",o=>s.removeEventListener(i,a))}),this.on("loadstart",_),this.on("dispose",i=>this.off("loadstart",_))}proxyNativeTracks_(){ou.names.forEach(i=>{this.proxyNativeTracksForType_(i)})}createEl(){let i=this.options_.tag;if(!i||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(i){const a=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(a,i),Rt.disposeMediaElement(i),i=a}else{i=An.createElement("video");const a=merge$1({},this.options_.tag&&getAttributes$1(this.options_.tag));_l&&!0===this.options_.nativeControlsForTouch||delete a.controls,setAttributes$1(i,Object.assign(a,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}void 0!==this.options_.preload&&setAttribute$1(i,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);const a=["loop","muted","playsinline","autoplay"];for(let s=0;s<a.length;s++){const o=a[s],u=this.options_[o];void 0!==u&&(u?setAttribute$1(i,o,o):removeAttribute$1(i,o),i[o]=u)}return i}handleLateInit_(i){if(0===i.networkState||3===i.networkState)return;if(0===i.readyState){let i=!1;const a=/* @__PURE__ */__name(function(){i=!0},"setLoadstartFired");this.on("loadstart",a);const s=/* @__PURE__ */__name(function(){i||this.trigger("loadstart")},"triggerLoadstart");return this.on("loadedmetadata",s),void this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",s),i||this.trigger("loadstart")})}const a=["loadstart"];a.push("loadedmetadata"),i.readyState>=2&&a.push("loadeddata"),i.readyState>=3&&a.push("canplay"),i.readyState>=4&&a.push("canplaythrough"),this.ready(function(){a.forEach(function(i){this.trigger(i)},this)})}setScrubbing(i){this.isScrubbing_=i}scrubbing(){return this.isScrubbing_}setCurrentTime(i){try{this.isScrubbing_&&this.el_.fastSeek&&Tl?this.el_.fastSeek(i):this.el_.currentTime=i}catch(a){Do(a,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Vo&&Go&&0===this.el_.currentTime){const i=/* @__PURE__ */__name(()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",i))},"checkProgress");return this.on("timeupdate",i),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const i=/* @__PURE__ */__name(function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},"endFn"),a=/* @__PURE__ */__name(function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",i),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))},"beginFn");this.on("webkitbeginfullscreen",a),this.on("dispose",()=>{this.off("webkitbeginfullscreen",a),this.off("webkitendfullscreen",i)})}supportsFullScreen(){return"function"==typeof this.el_.webkitEnterFullScreen}enterFullScreen(){const i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)silencePromise$1(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}}exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(i){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(i):super.requestVideoFrameCallback(i)}cancelVideoFrameCallback(i){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(i):super.cancelVideoFrameCallback(i)}src(i){if(void 0===i)return this.el_.src;this.setSrc(i)}addSourceElement(i,a){if(!i)return Do.error("Invalid source URL."),!1;const s={src:i};a&&(s.type=a);const o=createEl$1("source",{},s);return this.el_.appendChild(o),!0}removeSourceElement(i){if(!i)return Do.error("Source URL is required to remove the source element."),!1;const a=this.el_.querySelectorAll("source");for(const s of a)if(s.src===i)return this.el_.removeChild(s),!0;return Do.warn(`No matching source element found with src: ${i}`),!1}reset(){Rt.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(i){this.el_.controls=!!i}addTextTrack(i,a,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(i,a,s):super.addTextTrack(i,a,s)}createRemoteTextTrack(i){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(i);const a=An.createElement("track");return i.kind&&(a.kind=i.kind),i.label&&(a.label=i.label),(i.language||i.srclang)&&(a.srclang=i.language||i.srclang),i.default&&(a.default=i.default),i.id&&(a.id=i.id),i.src&&(a.src=i.src),a}addRemoteTextTrack(i,a){const s=super.addRemoteTextTrack(i,a);return this.featuresNativeTextTracks&&this.el().appendChild(s),s}removeRemoteTextTrack(i){if(super.removeRemoteTextTrack(i),this.featuresNativeTextTracks){const a=this.$$("track");let s=a.length;for(;s--;)i!==a[s]&&i!==a[s].track||this.el().removeChild(a[s])}}getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();const i={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),Tn.performance&&(i.creationTime=Tn.performance.now()),i}},"Html5"),Rt);defineLazyProperty$1(yp,"TEST_VID",function(){if(!isReal$1())return;const i=An.createElement("video"),a=An.createElement("track");return a.kind="captions",a.srclang="en",a.label="English",i.appendChild(a),i}),yp.isSupported=function(){try{yp.TEST_VID.volume=.5}catch(i){return!1}return!(!yp.TEST_VID||!yp.TEST_VID.canPlayType)},yp.canPlayType=function(i){return yp.TEST_VID.canPlayType(i)},yp.canPlaySource=function(i,a){return yp.canPlayType(i.type)},yp.canControlVolume=function(){try{const i=yp.TEST_VID.volume;yp.TEST_VID.volume=i/2+.1;const a=i!==yp.TEST_VID.volume;return a&&vl?(Tn.setTimeout(()=>{yp&&yp.prototype&&(yp.prototype.featuresVolumeControl=i!==yp.TEST_VID.volume)}),!1):a}catch(i){return!1}},yp.canMuteVolume=function(){try{const i=yp.TEST_VID.muted;return yp.TEST_VID.muted=!i,yp.TEST_VID.muted?setAttribute$1(yp.TEST_VID,"muted","muted"):removeAttribute$1(yp.TEST_VID,"muted"),i!==yp.TEST_VID.muted}catch(i){return!1}},yp.canControlPlaybackRate=function(){if(Vo&&Go&&qo<58)return!1;try{const i=yp.TEST_VID.playbackRate;return yp.TEST_VID.playbackRate=i/2+.1,i!==yp.TEST_VID.playbackRate}catch(i){return!1}},yp.canOverrideAttributes=function(){try{const i=/* @__PURE__ */__name(()=>{},"noop");Object.defineProperty(An.createElement("video"),"src",{get:i,set:i}),Object.defineProperty(An.createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(An.createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(An.createElement("audio"),"innerHTML",{get:i,set:i})}catch(i){return!1}return!0},yp.supportsNativeTextTracks=function(){return Tl||vl&&Go},yp.supportsNativeVideoTracks=function(){return!(!yp.TEST_VID||!yp.TEST_VID.videoTracks)},yp.supportsNativeAudioTracks=function(){return!(!yp.TEST_VID||!yp.TEST_VID.audioTracks)},yp.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([i,a]){defineLazyProperty$1(yp.prototype,i,()=>yp[a](),!0)}),yp.prototype.featuresVolumeControl=yp.canControlVolume(),yp.prototype.movingMediaElementInDOM=!vl,yp.prototype.featuresFullscreenResize=!0,yp.prototype.featuresProgressEvents=!0,yp.prototype.featuresTimeupdateEvents=!0,yp.prototype.featuresVideoFrameCallback=!(!yp.TEST_VID||!yp.TEST_VID.requestVideoFrameCallback),yp.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch(a){}}()}},yp.resetMediaElement=function(i){if(!i)return;const a=i.querySelectorAll("source");let s=a.length;for(;s--;)i.removeChild(a[s]);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch(a){}}()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(i){yp.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(i){yp.prototype["set"+sc(i)]=function(a){this.el_[i]=a,a?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(i){yp.prototype[i]=function(){return this.el_[i]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(i){yp.prototype["set"+sc(i)]=function(a){this.el_[i]=a}}),["pause","load","play"].forEach(function(i){yp.prototype[i]=function(){return this.el_[i]()}}),uu.withSourceHandlers(yp),yp.nativeSourceHandler={},yp.nativeSourceHandler.canPlayType=function(i){try{return yp.TEST_VID.canPlayType(i)}catch(a){return""}},yp.nativeSourceHandler.canHandleSource=function(i,a){if(i.type)return yp.nativeSourceHandler.canPlayType(i.type);if(i.src){const a=Kc(i.src);return yp.nativeSourceHandler.canPlayType(`video/${a}`)}return""},yp.nativeSourceHandler.handleSource=function(i,a,s){a.setSrc(i.src)},yp.nativeSourceHandler.dispose=function(){},yp.registerSourceHandler(yp.nativeSourceHandler),uu.registerTech("Html5",yp);const vp=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],bp={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Tp=["tiny","xsmall","small","medium","large","xlarge","huge"],Sp={};Tp.forEach(i=>{const a="x"===i.charAt(0)?`x-${i.substring(1)}`:i;Sp[i]=`vjs-layout-${a}`});const xp={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};let wp=(Ot=class extends cc{constructor(i,a,s){if(i.id=i.id||a.id||`vjs_video_${newGUID$1()}`,(a=Object.assign(Ot.getTagSettings(i),a)).initChildren=!1,a.createEl=!1,a.evented=!1,a.reportTouchActivity=!1,!a.language){const s=i.closest("[lang]");s&&(a.language=s.getAttribute("lang"))}if(super(null,a,s),this.boundDocumentFullscreenChange_=i=>this.documentFullscreenChange_(i),this.boundFullWindowOnEscKey_=i=>this.fullWindowOnEscKey(i),this.boundUpdateStyleEl_=i=>this.updateStyleEl_(i),this.boundApplyInitTime_=i=>this.applyInitTime_(i),this.boundUpdateCurrentBreakpoint_=i=>this.updateCurrentBreakpoint_(i),this.boundHandleTechClick_=i=>this.handleTechClick_(i),this.boundHandleTechDoubleClick_=i=>this.handleTechDoubleClick_(i),this.boundHandleTechTouchStart_=i=>this.handleTechTouchStart_(i),this.boundHandleTechTouchMove_=i=>this.handleTechTouchMove_(i),this.boundHandleTechTouchEnd_=i=>this.handleTechTouchEnd_(i),this.boundHandleTechTap_=i=>this.handleTechTap_(i),this.boundUpdatePlayerHeightOnAudioOnlyMode_=i=>this.updatePlayerHeightOnAudioOnlyMode_(i),this.isFullscreen_=!1,this.log=Ro(this.id_),this.fsApi_=Eo,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=i,this.tagAttributes=i&&getAttributes$1(i),this.language(this.options_.language),a.languages){const i={};Object.getOwnPropertyNames(a.languages).forEach(function(s){i[s.toLowerCase()]=a.languages[s]}),this.languages_=i}else this.languages_=Ot.prototype.options_.languages;this.resetCache_(),this.poster_=a.poster||"",this.controls_=!!a.controls,i.controls=!1,i.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],i.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),a.plugins&&Object.keys(a.plugins).forEach(i=>{if("function"!=typeof this[i])throw new Error(`plugin "${i}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),evented$1(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(on$1(An,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const o=merge$1(this.options_);if(a.plugins&&Object.keys(a.plugins).forEach(i=>{this[i](a.plugins[i])}),a.debug&&this.debug(!0),this.options_.playerOptions=o,this.middleware_=[],this.playbackRates(a.playbackRates),a.experimentalSvgIcons){const i=(new Tn.DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">\n      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml");if(i.querySelector("parsererror"))Do.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const a=i.documentElement;a.style.display="none",this.el_.appendChild(a),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio("audio"===i.nodeName.toLowerCase()),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),a.spatialNavigation&&a.spatialNavigation.enabled&&(this.spatialNavigation=new wu(this),this.addClass("vjs-spatial-navigation-enabled")),_l&&this.addClass("vjs-touch-enabled"),vl||this.addClass("vjs-workinghover"),Ot.players[this.id_]=this;const u=To.split(".")[0];this.addClass(`vjs-v${u}`),this.userActive(!0),this.reportUserActivity(),this.one("play",i=>this.listenForUserActivity_(i)),this.on("keydown",i=>this.handleKeyDown(i)),this.on("languagechange",i=>this.handleLanguagechange(i)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),off$1(An,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),off$1(An,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Ot.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),clearCacheForPlayer$1(this),cu.names.forEach(i=>{const a=this[cu[i].getterName]();a&&a.off&&a.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let i,a=this.tag,s=this.playerElIngest_=a.parentNode&&a.parentNode.hasAttribute&&a.parentNode.hasAttribute("data-vjs-player");const o="video-js"===this.tag.tagName.toLowerCase();s?i=this.el_=a.parentNode:o||(i=this.el_=super.createEl("div"));const u=getAttributes$1(a);if(o){for(i=this.el_=a,a=this.tag=An.createElement("video");i.children.length;)a.appendChild(i.firstChild);hasClass$1(i,"video-js")||addClass$1(i,"video-js"),i.appendChild(a),s=this.playerElIngest_=i,Object.keys(i).forEach(s=>{try{a[s]=i[s]}catch(o){}})}a.setAttribute("tabindex","-1"),u.tabindex="-1",Go&&Yo&&(a.setAttribute("role","application"),u.role="application"),a.removeAttribute("width"),a.removeAttribute("height"),"width"in u&&delete u.width,"height"in u&&delete u.height,Object.getOwnPropertyNames(u).forEach(function(s){o&&"class"===s||i.setAttribute(s,u[s]),o&&a.setAttribute(s,u[s])}),a.playerId=a.id,a.id+="_html5_api",a.className="vjs-tech",a.player=i.player=this,this.addClass("vjs-paused");const _=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(i=>Sl[i]).map(i=>"vjs-device-"+i.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(..._),!0!==Tn.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=kl("vjs-styles-dimensions");const i=xl(".vjs-styles-defaults"),a=xl("head");a.insertBefore(this.styleEl_,i?i.nextSibling:a.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const x=a.getElementsByTagName("a");for(let w=0;w<x.length;w++){const i=x.item(w);addClass$1(i,"vjs-hidden"),i.setAttribute("hidden","hidden")}return a.initNetworkState_=a.networkState,a.parentNode&&!s&&a.parentNode.insertBefore(i,a),prependTo$1(a,i),this.children_.unshift(a),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=i,i}crossOrigin(i){if(void 0===i)return this.techGet_("crossOrigin");null===i||"anonymous"===i||"use-credentials"===i?(this.techCall_("setCrossOrigin",i),this.posterImage&&this.posterImage.crossOrigin(i)):Do.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${i}"`)}width(i){return this.dimension("width",i)}height(i){return this.dimension("height",i)}dimension(i,a){const s=i+"_";if(void 0===a)return this[s]||0;if(""===a||"auto"===a)return this[s]=void 0,void this.updateStyleEl_();const o=parseFloat(a);isNaN(o)?Do.error(`Improper value "${a}" supplied for for ${i}`):(this[s]=o,this.updateStyleEl_())}fluid(i){if(void 0===i)return!!this.fluid_;this.fluid_=!!i,Wl(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),Xl(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(i){if(void 0===i)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(i){if(void 0===i)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(!0===Tn.VIDEOJS_NO_DYNAMIC_STYLE){const i="number"==typeof this.width_?this.width_:this.options_.width,a="number"==typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();return void(s&&(i>=0&&(s.width=i),a>=0&&(s.height=a)))}let i,a,s,o;s=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";const u=s.split(":"),_=u[1]/u[0];i=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/_:this.videoWidth()||300,a=void 0!==this.height_?this.height_:i*_,o=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(o),Pl(this.styleEl_,`\n      .${o} {\n        width: ${i}px;\n        height: ${a}px;\n      }\n\n      .${o}.vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ${100*_}%;\n      }\n    `)}loadTech_(i,a){this.tech_&&this.unloadTech_();const s=sc(i),o=i.charAt(0).toLowerCase()+i.slice(1);"Html5"!==s&&this.tag&&(uu.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=s,this.isReady_=!1;let u=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(u=!1);const _={source:a,autoplay:u,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${o}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};cu.names.forEach(i=>{const a=cu[i];_[a.getterName]=this[a.privateName]}),Object.assign(_,this.options_[s]),Object.assign(_,this.options_[o]),Object.assign(_,this.options_[i.toLowerCase()]),this.tag&&(_.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(_.startTime=this.cache_.currentTime);const x=uu.getTech(i);if(!x)throw new Error(`No Tech named '${s}' exists! '${s}' should be registered using videojs.registerTech()'`);this.tech_=new x(_),this.tech_.ready(Fl(this,this.handleTechReady_),!0),gc.jsonToTextTracks(this.textTracksJson_||[],this.tech_),vp.forEach(i=>{this.on(this.tech_,i,a=>this[`handleTech${sc(i)}_`](a))}),Object.keys(bp).forEach(i=>{this.on(this.tech_,i,a=>{0===this.tech_.playbackRate()&&this.tech_.seeking()?this.queuedCallbacks_.push({callback:this[`handleTech${bp[i]}_`].bind(this),event:a}):this[`handleTech${bp[i]}_`](a)})}),this.on(this.tech_,"loadstart",i=>this.handleTechLoadStart_(i)),this.on(this.tech_,"sourceset",i=>this.handleTechSourceset_(i)),this.on(this.tech_,"waiting",i=>this.handleTechWaiting_(i)),this.on(this.tech_,"ended",i=>this.handleTechEnded_(i)),this.on(this.tech_,"seeking",i=>this.handleTechSeeking_(i)),this.on(this.tech_,"play",i=>this.handleTechPlay_(i)),this.on(this.tech_,"pause",i=>this.handleTechPause_(i)),this.on(this.tech_,"durationchange",i=>this.handleTechDurationChange_(i)),this.on(this.tech_,"fullscreenchange",(i,a)=>this.handleTechFullscreenChange_(i,a)),this.on(this.tech_,"fullscreenerror",(i,a)=>this.handleTechFullscreenError_(i,a)),this.on(this.tech_,"enterpictureinpicture",i=>this.handleTechEnterPictureInPicture_(i)),this.on(this.tech_,"leavepictureinpicture",i=>this.handleTechLeavePictureInPicture_(i)),this.on(this.tech_,"error",i=>this.handleTechError_(i)),this.on(this.tech_,"posterchange",i=>this.handleTechPosterChange_(i)),this.on(this.tech_,"textdata",i=>this.handleTechTextData_(i)),this.on(this.tech_,"ratechange",i=>this.handleTechRateChange_(i)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===s&&this.tag||prependTo$1(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){cu.names.forEach(i=>{const a=cu[i];this[a.privateName]=this[a.getterName]()}),this.textTracksJson_=gc.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(i){return void 0===i&&Do.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_}version(){return{"video.js":To}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(i){if(!this.tech_||"string"!=typeof i)return;const a=/* @__PURE__ */__name(()=>{const i=this.muted();this.muted(!0);const a=/* @__PURE__ */__name(()=>{this.muted(i)},"restoreMuted");this.playTerminatedQueue_.push(a);const s=this.play();if(isPromise$2(s))return s.catch(i=>{throw a(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${i||""}`)})},"resolveMuted");let s;return"any"!==i||this.muted()?s="muted"!==i||this.muted()?this.play():a():(s=this.play(),isPromise$2(s)&&(s=s.catch(a))),isPromise$2(s)?s.then(()=>{this.trigger({type:"autoplay-success",autoplay:i})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:i})}):void 0}updateSourceCaches_(i=""){let a=i,s="";"string"!=typeof a&&(a=i.src,s=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=vu(this,a)),this.cache_.source=merge$1({},i,{src:a,type:s});const o=this.cache_.sources.filter(i=>i.src&&i.src===a),u=[],_=this.$$("source"),x=[];for(let w=0;w<_.length;w++){const i=getAttributes$1(_[w]);u.push(i),i.src&&i.src===a&&x.push(i.src)}x.length&&!o.length?this.cache_.sources=u:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a}handleTechSourceset_(i){if(!this.changingSrc_){let a=/* @__PURE__ */__name(i=>this.updateSourceCaches_(i),"updateSourceCaches");const s=this.currentSource().src,o=i.src;s&&!/^blob:/.test(s)&&/^blob:/.test(o)&&(!this.lastSource_||this.lastSource_.tech!==o&&this.lastSource_.player!==s)&&(a=/* @__PURE__ */__name(()=>{},"updateSourceCaches")),a(o),i.src||this.tech_.any(["sourceset","loadstart"],i=>{if("sourceset"===i.type)return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})}hasStarted(i){if(void 0===i)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(i=>i.callback(i.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const i=this.currentTime(),a=/* @__PURE__ */__name(()=>{i!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",a))},"timeUpdateListener");this.on("timeupdate",a)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(i){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,i):this.paused()?silencePromise$1(this.play()):this.pause()))}handleTechDoubleClick_(i){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),a=>a.contains(i.target))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,i):this.isInPictureInPicture()&&!An.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(i){i.cancelable&&i.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(i){const a=i.target.player;if(a&&a!==this)return;const s=this.el();let o=An[this.fsApi_.fullscreenElement]===s;!o&&s.matches&&(o=s.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}handleTechFullscreenChange_(i,a){a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))}handleTechFullscreenError_(i,a){this.trigger("fullscreenerror",a)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(i){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(i){this.isInPictureInPicture(!1)}handleTechError_(){const i=this.tech_.error();i&&this.error(i)}handleTechTextData_(){let i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(i,a){this.ready(function(){if(i in fu)return set$1(this.middleware_,this.tech_,i,a);if(i in gu)return mediate$1(this.middleware_,this.tech_,i,a);try{this.tech_&&this.tech_[i](a)}catch(s){throw Do(s),s}},!0)}techGet_(i){if(this.tech_&&this.tech_.isReady_){if(i in mu)return get$1(this.middleware_,this.tech_,i);if(i in gu)return mediate$1(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(a){if(void 0===this.tech_[i])throw Do(`Video.js: ${i} method not defined for ${this.techName_} playback technology.`,a),a;if("TypeError"===a.name)throw Do(`Video.js: ${i} unavailable on ${this.techName_} playback technology element.`,a),this.tech_.isReady_=!1,a;throw Do(a),a}}}play(){return new Promise(i=>{this.play_(i)})}play_(i=silencePromise$1){this.playCallbacks_.push(i);const a=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),s=Boolean(Tl||vl);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a)return this.waitToPlay_=i=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!a&&s&&this.load());const o=this.techGet_("play");s&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===o?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)}runPlayTerminatedQueue_(){const i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(i){i()})}runPlayCallbacks_(i){const a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(a){a(i)})}pause(){this.techCall_("pause")}paused(){return!1!==this.techGet_("paused")}played(){return this.techGet_("played")||createTimeRanges$1(0,0)}scrubbing(i){if(void 0===i)return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(i){return void 0===i?(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime):(i<0&&(i=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",i),this.cache_.initTime=0,void(isFinite(i)&&(this.cache_.currentTime=Number(i)))):(this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_)))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(i){if(void 0===i)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(i=parseFloat(i))<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let i=this.techGet_("buffered");return i&&i.length||(i=createTimeRanges$1(0,0)),i}seekable(){let i=this.techGet_("seekable");return i&&i.length||(i=createTimeRanges$1(0,0)),i}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return bufferedPercent$1(this.buffered(),this.duration())}bufferedEnd(){const i=this.buffered(),a=this.duration();let s=i.end(i.length-1);return s>a&&(s=a),s}volume(i){let a;return void 0!==i?(a=Math.max(0,Math.min(1,i)),this.cache_.volume=a,this.techCall_("setVolume",a),void(a>0&&this.lastVolume_(a))):(a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a)}muted(i){if(void 0===i)return this.techGet_("muted")||!1;this.techCall_("setMuted",i)}defaultMuted(i){return void 0!==i&&this.techCall_("setDefaultMuted",i),this.techGet_("defaultMuted")||!1}lastVolume_(i){if(void 0===i||0===i)return this.cache_.lastVolume;this.cache_.lastVolume=i}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(i){if(void 0!==i){const a=this.isFullscreen_;return this.isFullscreen_=Boolean(i),this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_}requestFullscreen(i){this.isInPictureInPicture()&&this.exitPictureInPicture();const a=this;return new Promise((s,o)=>{function offHandler(){a.off("fullscreenerror",errorHandler),a.off("fullscreenchange",changeHandler)}function changeHandler(){offHandler(),s()}function errorHandler(i,a){offHandler(),o(a)}__name(offHandler,"offHandler"),__name(changeHandler,"changeHandler"),__name(errorHandler,"errorHandler"),a.one("fullscreenchange",changeHandler),a.one("fullscreenerror",errorHandler);const u=a.requestFullscreenHelper_(i);u&&(u.then(offHandler,offHandler),u.then(s,o))})}requestFullscreenHelper_(i){let a;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==i&&(a=i)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](a);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const i=this;return new Promise((a,s)=>{function offHandler(){i.off("fullscreenerror",errorHandler),i.off("fullscreenchange",changeHandler)}function changeHandler(){offHandler(),a()}function errorHandler(i,a){offHandler(),s(a)}__name(offHandler,"offHandler"),__name(changeHandler,"changeHandler"),__name(errorHandler,"errorHandler"),i.one("fullscreenchange",changeHandler),i.one("fullscreenerror",errorHandler);const o=i.exitFullscreenHelper_();o&&(o.then(offHandler,offHandler),o.then(a,s))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const i=An[this.fsApi_.exitFullscreen]();return i&&silencePromise$1(i.then(()=>this.isFullscreen(!1))),i}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=An.documentElement.style.overflow,on$1(An,"keydown",this.boundFullWindowOnEscKey_),An.documentElement.style.overflow="hidden",addClass$1(An.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(i){"Escape"===i.key&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,off$1(An,"keydown",this.boundFullWindowOnEscKey_),An.documentElement.style.overflow=this.docOrigOverflow,removeClass$1(An.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(i){if(void 0===i)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(i){return void 0!==i?(this.isInPictureInPicture_=!!i,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&Tn.documentPictureInPicture){const i=An.createElement(this.el().tagName);return i.classList=this.el().classList,i.classList.add("vjs-pip-container"),this.posterImage&&i.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&i.appendChild(this.titleBar.el().cloneNode(!0)),i.appendChild(createEl$1("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),Tn.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(a=>(copyStyleSheetsToWindow(a),this.el_.parentNode.insertBefore(i,this.el_),a.document.body.appendChild(this.el_),a.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:a}),a.addEventListener("pagehide",a=>{const s=a.target.querySelector(".video-js");i.parentNode.replaceChild(s,i),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),a))}return"pictureInPictureEnabled"in An&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){return Tn.documentPictureInPicture&&Tn.documentPictureInPicture.window?(Tn.documentPictureInPicture.window.close(),Promise.resolve()):"pictureInPictureEnabled"in An?An.exitPictureInPicture():void 0}handleKeyDown(i){const{userActions:a}=this.options_;if(!a||!a.hotkeys)return;/* @__PURE__ */__name(i=>{const a=i.tagName.toLowerCase();if(i.isContentEditable)return!0;if("input"===a)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type);return-1!==["textarea"].indexOf(a)},"excludeElement")(this.el_.ownerDocument.activeElement)||("function"==typeof a.hotkeys?a.hotkeys.call(this,i):this.handleHotkeys(i))}handleHotkeys(i){const a=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:s=/* @__PURE__ */__name(a=>"f"===i.key.toLowerCase(),"fullscreenKey"),muteKey:o=/* @__PURE__ */__name(a=>"m"===i.key.toLowerCase(),"muteKey"),playPauseKey:u=/* @__PURE__ */__name(a=>"k"===i.key.toLowerCase()||" "===i.key.toLowerCase(),"playPauseKey")}=a;if(s.call(this,i)){i.preventDefault(),i.stopPropagation();const a=cc.getComponent("FullscreenToggle");!1!==An[this.fsApi_.fullscreenEnabled]&&a.prototype.handleClick.call(this,i)}else if(o.call(this,i)){i.preventDefault(),i.stopPropagation();cc.getComponent("MuteToggle").prototype.handleClick.call(this,i)}else if(u.call(this,i)){i.preventDefault(),i.stopPropagation();cc.getComponent("PlayToggle").prototype.handleClick.call(this,i)}}canPlayType(i){let a;for(let s=0,o=this.options_.techOrder;s<o.length;s++){const u=o[s];let _=uu.getTech(u);if(_||(_=cc.getComponent(u)),_){if(_.isSupported()&&(a=_.canPlayType(i),a))return a}else Do.error(`The "${u}" tech is undefined. Skipped browser support check for that tech.`)}return""}selectSource(i){const a=this.options_.techOrder.map(i=>[i,uu.getTech(i)]).filter(([i,a])=>a?a.isSupported():(Do.error(`The "${i}" tech is undefined. Skipped browser support check for that tech.`),!1)),s=/* @__PURE__ */__name(function(i,a,s){let o;return i.some(i=>a.some(a=>{if(o=s(i,a),o)return!0})),o},"findFirstPassingTechSourcePair");let o;const u=/* @__PURE__ */__name(i=>(a,s)=>i(s,a),"flip"),_=/* @__PURE__ */__name(([i,a],s)=>{if(a.canPlaySource(s,this.options_[i.toLowerCase()]))return{source:s,tech:i}},"finder");return o=this.options_.sourceOrder?s(i,a,u(_)):s(a,i,_),o||!1}handleSrc_(i,a){if(void 0===i)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const s=bu(i);if(s.length){if(this.changingSrc_=!0,a||(this.cache_.sources=s),this.updateSourceCaches_(s[0]),setSource$1(this,s[0],(i,o)=>{this.middleware_=o,a||(this.cache_.sources=s),this.updateSourceCaches_(i);if(this.src_(i))return s.length>1?this.handleSrc_(s.slice(1)):(this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void this.triggerReady());setTech$1(o,this.tech_)}),s.length>1){const i=/* @__PURE__ */__name(()=>{this.error(null),this.handleSrc_(s.slice(1),!0)},"retry"),a=/* @__PURE__ */__name(()=>{this.off("error",i)},"stopListeningForErrors");this.one("error",i),this.one("playing",a),this.resetRetryOnError_=()=>{this.off("error",i),this.off("playing",a)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)}src(i){return this.handleSrc_(i,!1)}src_(i){const a=this.selectSource([i]);return!a||(oc(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1))}addSourceElement(i,a){return!!this.tech_&&this.tech_.addSourceElement(i,a)}removeSourceElement(i){return!!this.tech_&&this.tech_.removeSourceElement(i)}load(){this.tech_&&this.tech_.vhs?this.src(this.currentSource()):this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{silencePromise$1(this.play().then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Wl(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:i,durationDisplay:a,progressControl:s,remainingTimeDisplay:o}=this.controlBar||{},{seekBar:u}=s||{};i&&i.updateContent(),a&&a.updateContent(),o&&o.updateContent(),u&&(u.update(),u.loadProgressBar&&u.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const i=this.currentSource(),a=[];return 0!==Object.keys(i).length&&a.push(i),this.cache_.sources||a}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(i){return void 0!==i?(this.techCall_("setPreload",i),void(this.options_.preload=i)):this.techGet_("preload")}autoplay(i){if(void 0===i)return this.options_.autoplay||!1;let a;"string"==typeof i&&/(any|play|muted)/.test(i)||!0===i&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_("string"==typeof i?i:"play"),a=!1):this.options_.autoplay=!!i,a=void 0===a?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)}playsinline(i){return void 0!==i&&(this.techCall_("setPlaysinline",i),this.options_.playsinline=i),this.techGet_("playsinline")}loop(i){return void 0!==i?(this.techCall_("setLoop",i),void(this.options_.loop=i)):this.techGet_("loop")}poster(i){if(void 0===i)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(i){if(void 0===i)return!!this.controls_;i=!!i,this.controls_!==i&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(i){if(void 0===i)return!!this.usingNativeControls_;i=!!i,this.usingNativeControls_!==i&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(i){if(void 0===i)return this.error_||null;if(xo("beforeerror").forEach(a=>{const s=a(this,i);isObject$2(s)&&!Array.isArray(s)||"string"==typeof s||"number"==typeof s||null===s?i=s:this.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&i&&4===i.code){const a=/* @__PURE__ */__name(function(){this.error(i)},"triggerSuppressedError");return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),void this.one("loadstart",function(){this.off(["click","touchstart"],a)})}if(null===i)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new MediaError$1(i),this.addClass("vjs-error"),Do.error(`(CODE:${this.error_.code} ${MediaError$1.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),xo("error").forEach(i=>i(this,this.error_))}reportUserActivity(i){this.userActivity_=!0}userActive(i){if(void 0===i)return this.userActive_;if((i=!!i)!==this.userActive_){if(this.userActive_=i,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let i,a,s;const o=Fl(this,this.reportUserActivity),u=/* @__PURE__ */__name(function(i){i.screenX===a&&i.screenY===s||(a=i.screenX,s=i.screenY,o())},"handleMouseMove"),_=/* @__PURE__ */__name(function(){o(),this.clearInterval(i),i=this.setInterval(o,250)},"handleMouseDown"),x=/* @__PURE__ */__name(function(a){o(),this.clearInterval(i)},"handleMouseUpAndMouseLeave");this.on("mousedown",_),this.on("mousemove",u),this.on("mouseup",x),this.on("mouseleave",x);const w=this.getChild("controlBar");let C;!w||vl||Vo||(w.on("mouseenter",function(i){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),w.on("mouseleave",function(i){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);const L=/* @__PURE__ */__name(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(C);const i=this.options_.inactivityTimeout;i<=0||(C=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},i))},"activityCheck");this.setInterval(L,250)}playbackRate(i){if(void 0===i)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",i)}defaultPlaybackRate(i){return void 0!==i?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(i){if(void 0===i)return!!this.isAudio_;this.isAudio_=!!i}updatePlayerHeightOnAudioOnlyMode_(){const i=this.getChild("ControlBar");i&&this.audioOnlyCache_.controlBarHeight!==i.currentHeight()&&(this.audioOnlyCache_.controlBarHeight=i.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const i=this.children(),a=this.getChild("ControlBar"),s=a&&a.currentHeight();i.forEach(i=>{i!==a&&i.el_&&!i.hasClass("vjs-hidden")&&(i.hide(),this.audioOnlyCache_.hiddenChildren.push(i))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=s,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(s),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(i=>i.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(i){if("boolean"!=typeof i||i===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=i,i){const i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),Promise.all(i).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(i){if("boolean"!=typeof i||i===this.audioPosterMode_)return this.audioPosterMode_;if(this.audioPosterMode_=i,i){if(this.audioOnlyMode()){return this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()})}return Promise.resolve().then(()=>{this.enablePosterModeUI_()})}return Promise.resolve().then(()=>{this.disablePosterModeUI_()})}addTextTrack(i,a,s){if(this.tech_)return this.tech_.addTextTrack(i,a,s)}addRemoteTextTrack(i,a){if(this.tech_)return this.tech_.addRemoteTextTrack(i,a)}removeRemoteTextTrack(i={}){let{track:a}=i;if(a||(a=i),this.tech_)return this.tech_.removeRemoteTextTrack(a)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(i){if(void 0===i)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),Wl(this)&&this.trigger("languagechange"))}languages(){return merge$1(Ot.prototype.options_.languages,this.languages_)}toJSON(){const i=merge$1(this.options_),a=i.tracks;i.tracks=[];for(let s=0;s<a.length;s++){let o=a[s];o=merge$1(o),o.player=void 0,i.tracks[s]=o}return i}createModal(i,a){(a=a||{}).content=i||"";const s=new bc(this,a);return this.addChild(s),s.on("dispose",()=>{this.removeChild(s)}),s.open(),s}updateCurrentBreakpoint_(){if(!this.responsive())return;const i=this.currentBreakpoint(),a=this.currentWidth();for(let s=0;s<Tp.length;s++){const o=Tp[s];if(a<=this.breakpoints_[o]){if(i===o)return;i&&this.removeClass(Sp[i]),this.addClass(Sp[o]),this.breakpoint_=o;break}}}removeCurrentBreakpoint_(){const i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)}breakpoints(i){return void 0===i||(this.breakpoint_="",this.breakpoints_=Object.assign({},xp,i),this.updateCurrentBreakpoint_()),Object.assign(this.breakpoints_)}responsive(i){if(void 0===i)return this.responsive_;return(i=Boolean(i))!==this.responsive_?(this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i):void 0}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return Sp[this.breakpoint_]||""}loadMedia(i,a){if(!i||"object"!=typeof i)return;const s=this.crossOrigin();this.reset(),this.cache_.media=merge$1(i);const{artist:o,artwork:u,description:_,poster:x,src:w,textTracks:C,title:L}=this.cache_.media;!u&&x&&(this.cache_.media.artwork=[{src:x,type:yu(x)}]),s&&this.crossOrigin(s),w&&this.src(w),x&&this.poster(x),Array.isArray(C)&&C.forEach(i=>this.addRemoteTextTrack(i,!1)),this.titleBar&&this.titleBar.update({title:L,description:_||o||""}),this.ready(a)}getMedia(){if(!this.cache_.media){const i=this.poster(),a={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),i=>({kind:i.kind,label:i.label,language:i.language,src:i.src}))};return i&&(a.poster=i,a.artwork=[{src:a.poster,type:yu(a.poster)}]),a}return merge$1(this.cache_.media)}static getTagSettings(i){const a={sources:[],tracks:[]},s=getAttributes$1(i),o=s["data-setup"];if(hasClass$1(i,"vjs-fill")&&(s.fill=!0),hasClass$1(i,"vjs-fluid")&&(s.fluid=!0),null!==o)try{Object.assign(s,JSON.parse(o||"{}"))}catch(u){Do.error("data-setup",u)}if(Object.assign(a,s),i.hasChildNodes()){const s=i.childNodes;for(let i=0,o=s.length;i<o;i++){const o=s[i],u=o.nodeName.toLowerCase();"source"===u?a.sources.push(getAttributes$1(o)):"track"===u&&a.tracks.push(getAttributes$1(o))}}return a}debug(i){if(void 0===i)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(i){if(void 0===i)return this.cache_.playbackRates;Array.isArray(i)&&i.every(i=>"number"==typeof i)&&(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))}},__name(Ot,"Player"),Ot);wp.prototype.videoTracks=()=>{},wp.prototype.audioTracks=()=>{},wp.prototype.textTracks=()=>{},wp.prototype.remoteTextTracks=()=>{},wp.prototype.remoteTextTrackEls=()=>{},cu.names.forEach(function(i){const a=cu[i];wp.prototype[a.getterName]=function(){return this.tech_?this.tech_[a.getterName]():(this[a.privateName]=this[a.privateName]||new a.ListClass,this[a.privateName])}}),wp.prototype.crossorigin=wp.prototype.crossOrigin,wp.players={};const Ap=Tn.navigator;wp.prototype.options_={techOrder:uu.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Ap&&(Ap.languages&&Ap.languages[0]||Ap.userLanguage||Ap.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1},vp.forEach(function(i){wp.prototype[`handleTech${sc(i)}_`]=function(){return this.trigger(i)}}),cc.registerComponent("Player",wp);const Cp="plugin",Ep="activePlugins_",Mp={},kp=/* @__PURE__ */__name(i=>Mp.hasOwnProperty(i),"pluginExists$1"),Pp=/* @__PURE__ */__name(i=>kp(i)?Mp[i]:void 0,"getPlugin$1"),Ip=/* @__PURE__ */__name((i,a)=>{i[Ep]=i[Ep]||{},i[Ep][a]=!0},"markPluginAsActive$1"),Lp=/* @__PURE__ */__name((i,a,s)=>{const o=(s?"before":"")+"pluginsetup";i.trigger(o,a),i.trigger(o+":"+a.name,a)},"triggerSetupEvent$1"),Dp=/* @__PURE__ */__name(function(i,a){const s=/* @__PURE__ */__name(function(){Lp(this,{name:i,plugin:a,instance:null},!0);const s=a.apply(this,arguments);return Ip(this,i),Lp(this,{name:i,plugin:a,instance:s}),s},"basicPluginWrapper");return Object.keys(a).forEach(function(i){s[i]=a[i]}),s},"createBasicPlugin$1"),Rp=/* @__PURE__ */__name((i,a)=>(a.prototype.name=i,function(...s){Lp(this,{name:i,plugin:a,instance:null},!0);const o=new a(...[this,...s]);return this[i]=()=>o,Lp(this,o.getEventHash()),o}),"createPluginFactory$1");let Op=(Nt=class{constructor(i){if(this.constructor===Nt)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=i,this.log||(this.log=this.player.log.createLogger(this.name)),evented$1(this),delete this.trigger,stateful$1(this,this.constructor.defaultState),Ip(i,this.name),this.dispose=this.dispose.bind(this),i.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(i={}){return i.name=this.name,i.plugin=this.constructor,i.instance=this,i}trigger(i,a={}){return trigger$1(this.eventBusEl_,i,this.getEventHash(a))}handleStateChanged(i){}dispose(){const{name:i,player:a}=this;this.trigger("dispose"),this.off(),a.off("dispose",this.dispose),a[Ep][i]=!1,this.player=this.state=null,a[i]=Rp(i,Mp[i])}static isBasic(i){const a="string"==typeof i?Pp(i):i;return"function"==typeof a&&!Nt.prototype.isPrototypeOf(a.prototype)}static registerPlugin(i,a){if("string"!=typeof i)throw new Error(`Illegal plugin name, "${i}", must be a string, was ${typeof i}.`);if(kp(i))Do.warn(`A plugin named "${i}" already exists. You may want to avoid re-registering plugins!`);else if(wp.prototype.hasOwnProperty(i))throw new Error(`Illegal plugin name, "${i}", cannot share a name with an existing player method!`);if("function"!=typeof a)throw new Error(`Illegal plugin for "${i}", must be a function, was ${typeof a}.`);return Mp[i]=a,i!==Cp&&(Nt.isBasic(a)?wp.prototype[i]=Dp(i,a):wp.prototype[i]=Rp(i,a)),a}static deregisterPlugin(i){if(i===Cp)throw new Error("Cannot de-register base plugin.");kp(i)&&(delete Mp[i],delete wp.prototype[i])}static getPlugins(i=Object.keys(Mp)){let a;return i.forEach(i=>{const s=Pp(i);s&&(a=a||{},a[i]=s)}),a}static getPluginVersion(i){const a=Pp(i);return a&&a.VERSION||""}},__name(Nt,"Plugin"),Nt);function deprecate(i,a){let s=!1;return function(...o){return s||Do.warn(i),s=!0,a.apply(this,o)}}function deprecateForMajor(i,a,s,o){return deprecate(`${a} is deprecated and will be removed in ${i}.0; please use ${s} instead.`,o)}Op.getPlugin=Pp,Op.BASE_PLUGIN_NAME=Cp,Op.registerPlugin(Cp,Op),wp.prototype.usingPlugin=function(i){return!!this[Ep]&&!0===this[Ep][i]},wp.prototype.hasPlugin=function(i){return!!kp(i)},__name(deprecate,"deprecate"),__name(deprecateForMajor,"deprecateForMajor");const Np=/* @__PURE__ */__name(i=>0===i.indexOf("#")?i.slice(1):i,"normalizeId$1");function videojs$2(i,a,s){let o=videojs$2.getPlayer(i);if(o)return a&&Do.warn(`Player "${i}" is already initialised. Options will not be applied.`),s&&o.ready(s),o;const u="string"==typeof i?xl("#"+Np(i)):i;if(!isEl$1(u))throw new TypeError("The element or ID supplied is not valid. (videojs)");const _="getRootNode"in u&&u.getRootNode()instanceof Tn.ShadowRoot?u.getRootNode():u.ownerDocument.body;u.ownerDocument.defaultView&&_.contains(u)||Do.warn("The element supplied is not included in the DOM"),!0===(a=a||{}).restoreEl&&(a.restoreEl=(u.parentNode&&u.parentNode.hasAttribute&&u.parentNode.hasAttribute("data-vjs-player")?u.parentNode:u).cloneNode(!0)),xo("beforesetup").forEach(i=>{const s=i(u,merge$1(a));isObject$2(s)&&!Array.isArray(s)?a=merge$1(a,s):Do.error("please return an object in beforesetup hooks")});const x=cc.getComponent("Player");return o=new x(u,a,s),xo("setup").forEach(i=>i(o)),o}if(__name(videojs$2,"videojs$2"),videojs$2.hooks_=So,videojs$2.hooks=xo,videojs$2.hook=wo,videojs$2.hookOnce=Co,videojs$2.removeHook=Ao,!0!==Tn.VIDEOJS_NO_DYNAMIC_STYLE&&isReal$1()){let i=xl(".vjs-styles-defaults");if(!i){i=kl("vjs-styles-defaults");const a=xl("head");a&&a.insertBefore(i,a.firstChild),Pl(i,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}autoSetupTimeout$1(1,videojs$2),videojs$2.VERSION=To,videojs$2.options=wp.prototype.options_,videojs$2.getPlayers=()=>wp.players,videojs$2.getPlayer=i=>{const a=wp.players;let s;if("string"==typeof i){const o=Np(i),u=a[o];if(u)return u;s=xl("#"+o)}else s=i;if(isEl$1(s)){const{player:i,playerId:o}=s;if(i||a[o])return i||a[o]}},videojs$2.getAllPlayers=()=>Object.keys(wp.players).map(i=>wp.players[i]).filter(Boolean),videojs$2.players=wp.players,videojs$2.getComponent=cc.getComponent,videojs$2.registerComponent=(i,a)=>(uu.isTech(a)&&Do.warn(`The ${i} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),cc.registerComponent.call(cc,i,a)),videojs$2.getTech=uu.getTech,videojs$2.registerTech=uu.registerTech,videojs$2.use=use$1,Object.defineProperty(videojs$2,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(videojs$2.middleware,"TERMINATOR",{value:pu,writeable:!1,enumerable:!0}),videojs$2.browser=Sl,videojs$2.obj=Bo,videojs$2.mergeOptions=deprecateForMajor(9,"videojs.mergeOptions","videojs.obj.merge",merge$1),videojs$2.defineLazyProperty=deprecateForMajor(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",defineLazyProperty$1),videojs$2.bind=deprecateForMajor(9,"videojs.bind","native Function.prototype.bind",Fl),videojs$2.registerPlugin=Op.registerPlugin,videojs$2.deregisterPlugin=Op.deregisterPlugin,videojs$2.plugin=(i,a)=>(Do.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Op.registerPlugin(i,a)),videojs$2.getPlugins=Op.getPlugins,videojs$2.getPlugin=Op.getPlugin,videojs$2.getPluginVersion=Op.getPluginVersion,videojs$2.addLanguage=function(i,a){return i=(""+i).toLowerCase(),videojs$2.options.languages=merge$1(videojs$2.options.languages,{[i]:a}),videojs$2.options.languages[i]},videojs$2.log=Do,videojs$2.createLogger=Ro,videojs$2.time=pc,videojs$2.createTimeRange=deprecateForMajor(9,"videojs.createTimeRange","videojs.time.createTimeRanges",createTimeRanges$1),videojs$2.createTimeRanges=deprecateForMajor(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",createTimeRanges$1),videojs$2.formatTime=deprecateForMajor(9,"videojs.formatTime","videojs.time.formatTime",formatTime$1),videojs$2.setFormatTime=deprecateForMajor(9,"videojs.setFormatTime","videojs.time.setFormatTime",setFormatTime$1),videojs$2.resetFormatTime=deprecateForMajor(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",resetFormatTime$1),videojs$2.parseUrl=deprecateForMajor(9,"videojs.parseUrl","videojs.url.parseUrl",qc),videojs$2.isCrossOrigin=deprecateForMajor(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Jc),videojs$2.EventTarget=$l,videojs$2.any=any$1,videojs$2.on=on$1,videojs$2.one=one$1,videojs$2.off=off$1,videojs$2.trigger=trigger$1,videojs$2.xhr=Fn,videojs$2.TrackList=Ec,videojs$2.TextTrack=iu,videojs$2.TextTrackList=Lc,videojs$2.AudioTrack=ru,videojs$2.AudioTrackList=kc,videojs$2.VideoTrack=au,videojs$2.VideoTrackList=Ic,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(i=>{videojs$2[i]=function(){return Do.warn(`videojs.${i}() is deprecated; use videojs.dom.${i}() instead`),Al[i].apply(null,arguments)}}),videojs$2.computedStyle=deprecateForMajor(9,"videojs.computedStyle","videojs.dom.computedStyle",computedStyle$1),videojs$2.dom=Al,videojs$2.fn=zl,videojs$2.num=$u,videojs$2.str=lc,videojs$2.url=eu,videojs$2.Error={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const Bp=class _QualityLevel{constructor(i){let a=this;return a.id=i.id,a.label=a.id,a.width=i.width,a.height=i.height,a.bitrate=i.bandwidth,a.frameRate=i.frameRate,a.enabled_=i.enabled,Object.defineProperty(a,"enabled",{get:()=>a.enabled_(),set(i){a.enabled_(i)}}),a}};__name(Bp,"QualityLevel");let Fp=Bp;const Up=class _QualityLevelList extends videojs$2.EventTarget{constructor(){super();let i=this;return i.levels_=[],i.selectedIndex_=-1,Object.defineProperty(i,"selectedIndex",{get:()=>i.selectedIndex_}),Object.defineProperty(i,"length",{get:()=>i.levels_.length}),i[Symbol.iterator]=()=>i.levels_.values(),i}addQualityLevel(i){let a=this.getQualityLevelById(i.id);if(a)return a;const s=this.levels_.length;return a=new Fp(i),""+s in this||Object.defineProperty(this,s,{get(){return this.levels_[s]}}),this.levels_.push(a),this.trigger({qualityLevel:a,type:"addqualitylevel"}),a}removeQualityLevel(i){let a=null;for(let s=0,o=this.length;s<o;s++)if(this[s]===i){a=this.levels_.splice(s,1)[0],this.selectedIndex_===s?this.selectedIndex_=-1:this.selectedIndex_>s&&this.selectedIndex_--;break}return a&&this.trigger({qualityLevel:i,type:"removequalitylevel"}),a}getQualityLevelById(i){for(let a=0,s=this.length;a<s;a++){const s=this[a];if(s.id===i)return s}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}};__name(Up,"QualityLevelList");let jp=Up;jp.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const dN in jp.prototype.allowedEvents_)jp.prototype["on"+dN]=null;var Vp="4.1.0";const zp=/* @__PURE__ */__name(function(i,a){const s=i.qualityLevels,o=new jp,u=/* @__PURE__ */__name(function(){o.dispose(),i.qualityLevels=s,i.off("dispose",u)},"disposeHandler");return i.on("dispose",u),i.qualityLevels=()=>o,i.qualityLevels.VERSION=Vp,o},"initPlugin$1"),Hp=/* @__PURE__ */__name(function(i){return zp(this,videojs$2.obj.merge({},i))},"qualityLevels");videojs$2.registerPlugin("qualityLevels",Hp),Hp.VERSION=Vp;const $p=Qn,Gp=/* @__PURE__ */__name((i,a)=>a&&a.responseURL&&i!==a.responseURL?a.responseURL:i,"resolveManifestRedirect$1"),Wp=/* @__PURE__ */__name(i=>videojs$2.log.debug?videojs$2.log.debug.bind(videojs$2,"VHS:",`${i} >`):function(){},"logger$1");function merge$2(...i){const a=videojs$2.obj||videojs$2;return(a.merge||a.mergeOptions).apply(a,i)}function createTimeRanges$2(...i){const a=videojs$2.time||videojs$2;return(a.createTimeRanges||a.createTimeRanges).apply(a,i)}function bufferedRangesToString(i){if(0===i.length)return"Buffered Ranges are empty";let a="Buffered Ranges: \n";for(let s=0;s<i.length;s++){const o=i.start(s),u=i.end(s);a+=`${o} --\x3e ${u}. Duration (${u-o})\n`}return a}__name(merge$2,"merge$2"),__name(createTimeRanges$2,"createTimeRanges$2"),__name(bufferedRangesToString,"bufferedRangesToString");const qp=1/30,Xp=.1,Qp=/* @__PURE__ */__name(function(i,a){const s=[];let o;if(i&&i.length)for(o=0;o<i.length;o++)a(i.start(o),i.end(o))&&s.push([i.start(o),i.end(o)]);return createTimeRanges$2(s)},"filterRanges$1"),Kp=/* @__PURE__ */__name(function(i,a){return Qp(i,function(i,s){return i-Xp<=a&&s+Xp>=a})},"findRange$1"),Yp=/* @__PURE__ */__name(function(i,a){return Qp(i,function(i){return i-qp>=a})},"findNextRange$1"),Jp=/* @__PURE__ */__name(function(i){if(i.length<2)return createTimeRanges$2();const a=[];for(let s=1;s<i.length;s++){const o=i.end(s-1),u=i.start(s);a.push([o,u])}return createTimeRanges$2(a)},"findGaps$1"),Zp=/* @__PURE__ */__name(function(i,a){let s=null,o=null,u=0;const _=[],x=[];if(!(i&&i.length&&a&&a.length))return createTimeRanges$2();let w=i.length;for(;w--;)_.push({time:i.start(w),type:"start"}),_.push({time:i.end(w),type:"end"});for(w=a.length;w--;)_.push({time:a.start(w),type:"start"}),_.push({time:a.end(w),type:"end"});for(_.sort(function(i,a){return i.time-a.time}),w=0;w<_.length;w++)"start"===_[w].type?(u++,2===u&&(s=_[w].time)):"end"===_[w].type&&(u--,1===u&&(o=_[w].time)),null!==s&&null!==o&&(x.push([s,o]),s=null,o=null);return createTimeRanges$2(x)},"bufferIntersection$1"),em=/* @__PURE__ */__name(i=>{const a=[];if(!i||!i.length)return"";for(let s=0;s<i.length;s++)a.push(i.start(s)+" => "+i.end(s));return a.join(", ")},"printableRange$1"),tm=/* @__PURE__ */__name(function(i,a,s=1){return((i.length?i.end(i.length-1):0)-a)/s},"timeUntilRebuffer$1"),nm=/* @__PURE__ */__name(i=>{const a=[];for(let s=0;s<i.length;s++)a.push({start:i.start(s),end:i.end(s)});return a},"timeRangesToArray$1"),im=/* @__PURE__ */__name(function(i,a){if(i===a)return!1;if(!i&&a||!a&&i)return!0;if(i.length!==a.length)return!0;for(let s=0;s<i.length;s++)if(i.start(s)!==a.start(s)||i.end(s)!==a.end(s))return!0;return!1},"isRangeDifferent$1"),rm=/* @__PURE__ */__name(function(i){if(i&&i.length&&i.end)return i.end(i.length-1)},"lastBufferedEnd$1"),am=/* @__PURE__ */__name(function(i,a){let s=0;if(!i||!i.length)return s;for(let o=0;o<i.length;o++){const u=i.start(o),_=i.end(o);a>_||(s+=a>u&&a<=_?_-a:_-u)}return s},"timeAheadOf$1"),sm=/* @__PURE__ */__name((i,a)=>{if(!a.preload)return a.duration;let s=0;return(a.parts||[]).forEach(function(i){s+=i.duration}),(a.preloadHints||[]).forEach(function(a){"PART"===a.type&&(s+=i.partTargetDuration)}),s},"segmentDurationWithParts$1"),om=/* @__PURE__ */__name(i=>(i.segments||[]).reduce((i,a,s)=>(a.parts?a.parts.forEach(function(o,u){i.push({duration:o.duration,segmentIndex:s,partIndex:u,part:o,segment:a})}):i.push({duration:a.duration,segmentIndex:s,partIndex:null,segment:a,part:null}),i),[]),"getPartsAndSegments$1"),lm=/* @__PURE__ */__name(i=>{const a=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return a&&a.parts||[]},"getLastParts$1"),cm=/* @__PURE__ */__name(({preloadSegment:i})=>{if(!i)return;const{parts:a,preloadHints:s}=i;let o=(s||[]).reduce((i,a)=>i+("PART"===a.type?1:0),0);return o+=a&&a.length?a.length:0,o},"getKnownPartCount$1"),um=/* @__PURE__ */__name((i,a)=>{if(a.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;const s=lm(a).length>0;return s&&a.serverControl&&a.serverControl.partHoldBack?a.serverControl.partHoldBack:s&&a.partTargetDuration?3*a.partTargetDuration:a.serverControl&&a.serverControl.holdBack?a.serverControl.holdBack:a.targetDuration?3*a.targetDuration:0},"liveEdgeDelay$1"),dm=/* @__PURE__ */__name(function(i,a){let s=0,o=a-i.mediaSequence,u=i.segments[o];if(u){if(void 0!==u.start)return{result:u.start,precise:!0};if(void 0!==u.end)return{result:u.end-u.duration,precise:!0}}for(;o--;){if(u=i.segments[o],void 0!==u.end)return{result:s+u.end,precise:!0};if(s+=sm(i,u),void 0!==u.start)return{result:s+u.start,precise:!0}}return{result:s,precise:!1}},"backwardDuration$1"),hm=/* @__PURE__ */__name(function(i,a){let s,o=0,u=a-i.mediaSequence;for(;u<i.segments.length;u++){if(s=i.segments[u],void 0!==s.start)return{result:s.start-o,precise:!0};if(o+=sm(i,s),void 0!==s.end)return{result:s.end-o,precise:!0}}return{result:-1,precise:!1}},"forwardDuration$1"),pm=/* @__PURE__ */__name(function(i,a,s){if(void 0===a&&(a=i.mediaSequence+i.segments.length),a<i.mediaSequence)return 0;const o=dm(i,a);if(o.precise)return o.result;const u=hm(i,a);return u.precise?u.result:o.result+s},"intervalDuration$1"),mm=/* @__PURE__ */__name(function(i,a,s){if(!i)return 0;if("number"!=typeof s&&(s=0),void 0===a){if(i.totalDuration)return i.totalDuration;if(!i.endList)return Tn.Infinity}return pm(i,a,s)},"duration$1"),fm=/* @__PURE__ */__name(function({defaultDuration:i,durationList:a,startIndex:s,endIndex:o}){let u=0;if(s>o&&([s,o]=[o,s]),s<0){for(let a=s;a<Math.min(0,o);a++)u+=i;s=0}for(let _=s;_<o;_++)u+=a[_].duration;return u},"sumDurations$1"),gm=/* @__PURE__ */__name(function(i,a,s,o){if(!i||!i.segments)return null;if(i.endList)return mm(i);if(null===a)return null;a=a||0;let u=pm(i,i.mediaSequence+i.segments.length,a);return s&&(u-=o="number"==typeof o?o:um(null,i)),Math.max(0,u)},"playlistEnd$1"),_m=/* @__PURE__ */__name(function(i,a,s){const o=a||0;let u=gm(i,a,!0,s);return null===u?createTimeRanges$2():(u<o&&(u=o),createTimeRanges$2(o,u))},"seekable$1"),ym=/* @__PURE__ */__name(function({playlist:i,currentTime:a,startingSegmentIndex:s,startingPartIndex:o,startTime:u,exactManifestTimings:_}){let x=a-u;const w=om(i);let C=0;for(let L=0;L<w.length;L++){const i=w[L];if(s===i.segmentIndex&&("number"!=typeof o||"number"!=typeof i.partIndex||o===i.partIndex)){C=L;break}}if(x<0){if(C>0)for(let a=C-1;a>=0;a--){const s=w[a];if(x+=s.duration,_){if(x<0)continue}else if(x+qp<=0)continue;return{partIndex:s.partIndex,segmentIndex:s.segmentIndex,startTime:u-fm({defaultDuration:i.targetDuration,durationList:w,startIndex:C,endIndex:a})}}return{partIndex:w[0]&&w[0].partIndex||null,segmentIndex:w[0]&&w[0].segmentIndex||0,startTime:a}}if(C<0){for(let s=C;s<0;s++)if(x-=i.targetDuration,x<0)return{partIndex:w[0]&&w[0].partIndex||null,segmentIndex:w[0]&&w[0].segmentIndex||0,startTime:a};C=0}for(let L=C;L<w.length;L++){const a=w[L];x-=a.duration;const s=a.duration>qp;if(!(0===x)&&!(s&&x+qp>=0)||L===w.length-1){if(_){if(x>0)continue}else if(x-qp>=0)continue;return{partIndex:a.partIndex,segmentIndex:a.segmentIndex,startTime:u+fm({defaultDuration:i.targetDuration,durationList:w,startIndex:C,endIndex:L})}}}return{segmentIndex:w[w.length-1].segmentIndex,partIndex:w[w.length-1].partIndex,startTime:a}},"getMediaInfoForTime$1"),vm=/* @__PURE__ */__name(function(i){return i.excludeUntil&&i.excludeUntil>Date.now()},"isExcluded"),bm=/* @__PURE__ */__name(function(i){return i.excludeUntil&&i.excludeUntil===1/0},"isIncompatible$1"),Tm=/* @__PURE__ */__name(function(i){const a=vm(i);return!i.disabled&&!a},"isEnabled$1"),Sm=/* @__PURE__ */__name(function(i){return i.disabled},"isDisabled$1"),xm=/* @__PURE__ */__name(function(i){for(let a=0;a<i.segments.length;a++)if(i.segments[a].key)return!0;return!1},"isAes$1"),wm=/* @__PURE__ */__name(function(i,a){return a.attributes&&a.attributes[i]},"hasAttribute$1"),Am=/* @__PURE__ */__name(function(i,a,s,o=0){if(!wm("BANDWIDTH",s))return NaN;return(i*s.attributes.BANDWIDTH-8*o)/a},"estimateSegmentRequestTime$1"),Cm=/* @__PURE__ */__name((i,a)=>{if(1===i.playlists.length)return!0;const s=a.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===i.playlists.filter(i=>!!Tm(i)&&(i.attributes.BANDWIDTH||0)<s).length},"isLowestEnabledRendition$1"),Em=/* @__PURE__ */__name((i,a)=>!(!i&&!a||!i&&a||i&&!a)&&(i===a||(!(!i.id||!a.id||i.id!==a.id)||(!(!i.resolvedUri||!a.resolvedUri||i.resolvedUri!==a.resolvedUri)||!(!i.uri||!a.uri||i.uri!==a.uri)))),"playlistMatch$1"),Mm=/* @__PURE__ */__name(function(i,a){const s=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{};let o=!1;for(const u in s){for(const i in s[u])if(o=a(s[u][i]),o)break;if(o)break}return!!o},"someAudioVariant$1"),km=/* @__PURE__ */__name(i=>{if(!i||!i.playlists||!i.playlists.length){return Mm(i,i=>i.playlists&&i.playlists.length||i.uri)}for(let a=0;a<i.playlists.length;a++){const s=i.playlists[a],o=s.attributes&&s.attributes.CODECS;if(o&&o.split(",").every(i=>ur(i)))continue;if(!Mm(i,i=>Em(s,i)))return!1}return!0},"isAudioOnly$1");var Pm={liveEdgeDelay:um,duration:mm,seekable:_m,getMediaInfoForTime:ym,isEnabled:Tm,isDisabled:Sm,isExcluded:vm,isIncompatible:bm,playlistEnd:gm,isAes:xm,hasAttribute:wm,estimateSegmentRequestTime:Am,isLowestEnabledRendition:Cm,isAudioOnly:km,playlistMatch:Em,segmentDurationWithParts:sm};const{log:Im}=videojs$2,Lm=/* @__PURE__ */__name((i,a)=>`${i}-${a}`,"createPlaylistID$1"),Dm=/* @__PURE__ */__name((i,a,s)=>`placeholder-uri-${i}-${a}-${s}`,"groupID$1"),Rm=/* @__PURE__ */__name(({onwarn:i,oninfo:a,manifestString:s,customTagParsers:o=[],customTagMappers:u=[],llhls:_})=>{const x=new tr;i&&x.on("warn",i),a&&x.on("info",a),o.forEach(i=>x.addParser(i)),u.forEach(i=>x.addTagMapper(i)),x.push(s),x.end();const w=x.manifest;if(_||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(i){w.hasOwnProperty(i)&&delete w[i]}),w.segments&&w.segments.forEach(function(i){["parts","preloadHints"].forEach(function(a){i.hasOwnProperty(a)&&delete i[a]})})),!w.targetDuration){let a=10;w.segments&&w.segments.length&&(a=w.segments.reduce((i,a)=>Math.max(i,a.duration),0)),i&&i({message:`manifest has no targetDuration defaulting to ${a}`}),w.targetDuration=a}const C=lm(w);if(C.length&&!w.partTargetDuration){const a=C.reduce((i,a)=>Math.max(i,a.duration),0);i&&(i({message:`manifest has no partTargetDuration defaulting to ${a}`}),Im.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),w.partTargetDuration=a}return w},"parseManifest$1"),Om=/* @__PURE__ */__name((i,a)=>{i.mediaGroups&&["AUDIO","SUBTITLES"].forEach(s=>{if(i.mediaGroups[s])for(const o in i.mediaGroups[s])for(const u in i.mediaGroups[s][o]){const _=i.mediaGroups[s][o][u];a(_,s,o,u)}})},"forEachMediaGroup$2"),Nm=/* @__PURE__ */__name(({playlist:i,uri:a,id:s})=>{i.id=s,i.playlistErrors_=0,a&&(i.uri=a),i.attributes=i.attributes||{}},"setupMediaPlaylist$1"),Bm=/* @__PURE__ */__name(i=>{let a=i.playlists.length;for(;a--;){const s=i.playlists[a];Nm({playlist:s,id:Lm(a,s.uri)}),s.resolvedUri=$p(i.uri,s.uri),i.playlists[s.id]=s,i.playlists[s.uri]=s,s.attributes.BANDWIDTH||Im.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},"setupMediaPlaylists$1"),Fm=/* @__PURE__ */__name(i=>{Om(i,a=>{a.uri&&(a.resolvedUri=$p(i.uri,a.uri))})},"resolveMediaGroupUris$1"),Um=/* @__PURE__ */__name((i,a)=>{const s=Lm(0,a),o={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Tn.location.href,resolvedUri:Tn.location.href,playlists:[{uri:a,id:s,resolvedUri:a,attributes:{}}]};return o.playlists[s]=o.playlists[0],o.playlists[a]=o.playlists[0],o},"mainForMedia"),jm=/* @__PURE__ */__name((i,a,s=Dm)=>{i.uri=a;for(let u=0;u<i.playlists.length;u++)if(!i.playlists[u].uri){const a=`placeholder-uri-${u}`;i.playlists[u].uri=a}const o=km(i);Om(i,(a,u,_,x)=>{if(!a.playlists||!a.playlists.length){if(o&&"AUDIO"===u&&!a.uri)for(let a=0;a<i.playlists.length;a++){const s=i.playlists[a];if(s.attributes&&s.attributes.AUDIO&&s.attributes.AUDIO===_)return}a.playlists=[_extends({},a)]}a.playlists.forEach(function(a,o){const w=s(u,_,x,a),C=Lm(o,w);a.uri?a.resolvedUri=a.resolvedUri||$p(i.uri,a.uri):(a.uri=0===o?w:C,a.resolvedUri=a.uri),a.id=a.id||C,a.attributes=a.attributes||{},i.playlists[a.id]=a,i.playlists[a.uri]=a})}),Bm(i),Fm(i)},"addPropertiesToMain"),Vm=class _DateRangesStorage{constructor(){this.offset_=null,this.pendingDateRanges_=/* @__PURE__ */new Map,this.processedDateRanges_=/* @__PURE__ */new Map}setOffset(i=[]){if(null!==this.offset_)return;if(!i.length)return;const[a]=i;void 0!==a.programDateTime&&(this.offset_=a.programDateTime/1e3)}setPendingDateRanges(i=[]){if(!i.length)return;const[a]=i,s=a.startDate.getTime();this.trimProcessedDateRanges_(s),this.pendingDateRanges_=i.reduce((i,a)=>(i.set(a.id,a),i),/* @__PURE__ */new Map)}processDateRange(i){this.pendingDateRanges_.delete(i.id),this.processedDateRanges_.set(i.id,i)}getDateRangesToProcess(){if(null===this.offset_)return[];const i={},a=[];this.pendingDateRanges_.forEach((s,o)=>{if(!this.processedDateRanges_.has(o)&&(s.startTime=s.startDate.getTime()/1e3-this.offset_,s.processDateRange=()=>this.processDateRange(s),a.push(s),s.class))if(i[s.class]){const a=i[s.class].push(s);s.classListIndex=a-1}else i[s.class]=[s],s.classListIndex=0});for(const s of a){const a=i[s.class]||[];s.endDate?s.endTime=s.endDate.getTime()/1e3-this.offset_:s.endOnNext&&a[s.classListIndex+1]?s.endTime=a[s.classListIndex+1].startTime:s.duration?s.endTime=s.startTime+s.duration:s.plannedDuration?s.endTime=s.startTime+s.plannedDuration:s.endTime=s.startTime}return a}trimProcessedDateRanges_(i){new Map(this.processedDateRanges_).forEach((a,s)=>{a.startDate.getTime()<i&&this.processedDateRanges_.delete(s)})}};__name(Vm,"DateRangesStorage");let zm=Vm;const Hm=/* @__PURE__ */__name(({requestType:i,request:a,error:s,parseFailure:o})=>{const u=a.status<200||a.status>299,_=a.status>=400&&a.status<=499,x={uri:a.uri,requestType:i},w=u&&!_||o;if(s&&_)x.error=_extends({},s),x.errorType=videojs$2.Error.NetworkRequestFailed;else if(a.aborted)x.errorType=videojs$2.Error.NetworkRequestAborted;else if(a.timedout)x.erroType=videojs$2.Error.NetworkRequestTimeout;else if(w){const i=o?videojs$2.Error.NetworkBodyParserFailed:videojs$2.Error.NetworkBadStatus;x.errorType=i,x.status=a.status,x.headers=a.headers}return x},"getStreamingNetworkErrorMetadata"),$m=Wp("CodecUtils"),Gm=/* @__PURE__ */__name(function(i){const a=i.attributes||{};if(a.CODECS)return lr(a.CODECS)},"getCodecs$1"),Wm=/* @__PURE__ */__name((i,a)=>{const s=a.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&s.AUDIO&&i.mediaGroups.AUDIO[s.AUDIO]},"isMaat$1"),qm=/* @__PURE__ */__name((i,a)=>{if(!Wm(i,a))return!0;const s=a.attributes||{},o=i.mediaGroups.AUDIO[s.AUDIO];for(const u in o)if(!o[u].uri&&!o[u].playlists)return!0;return!1},"isMuxed$1"),Xm=/* @__PURE__ */__name(function(i){const a={};return i.forEach(({mediaType:i,type:s,details:o})=>{a[i]=a[i]||[],a[i].push(or(`${s}${o}`))}),Object.keys(a).forEach(function(i){if(a[i].length>1)return $m(`multiple ${i} codecs found as attributes: ${a[i].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),void(a[i]=null);a[i]=a[i][0]}),a},"unwrapCodecList$1"),Qm=/* @__PURE__ */__name(function(i){let a=0;return i.audio&&a++,i.video&&a++,a},"codecCount$1"),Km=/* @__PURE__ */__name(function(i,a){const s=a.attributes||{},o=Xm(Gm(a)||[]);if(Wm(i,a)&&!o.audio&&!qm(i,a)){const a=Xm(cr(i,s.AUDIO)||[]);a.audio&&(o.audio=a.audio)}return o},"codecsForPlaylist$1"),{EventTarget:Ym}=videojs$2,Jm=/* @__PURE__ */__name((i,a)=>{if(a.endList||!a.serverControl)return i;const s={};if(a.serverControl.canBlockReload){const{preloadSegment:i}=a;let o=a.mediaSequence+a.segments.length;if(i){const u=i.parts||[],_=cm(a)-1;_>-1&&_!==u.length-1&&(s._HLS_part=_),(_>-1||u.length)&&o--}s._HLS_msn=o}if(a.serverControl&&a.serverControl.canSkipUntil&&(s._HLS_skip=a.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(s).length){const a=new Tn.URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){s.hasOwnProperty(i)&&a.searchParams.set(i,s[i])}),i=a.toString()}return i},"addLLHLSQueryDirectives$1"),Zm=/* @__PURE__ */__name((i,a)=>{if(!i)return a;const s=merge$2(i,a);if(i.preloadHints&&!a.preloadHints&&delete s.preloadHints,i.parts&&!a.parts)delete s.parts;else if(i.parts&&a.parts)for(let o=0;o<a.parts.length;o++)i.parts&&i.parts[o]&&(s.parts[o]=merge$2(i.parts[o],a.parts[o]));return!i.skipped&&a.skipped&&(s.skipped=!1),i.preload&&!a.preload&&(s.preload=!1),s},"updateSegment$1"),ef=/* @__PURE__ */__name((i,a,s)=>{const o=i.slice(),u=a.slice();s=s||0;const _=[];let x;for(let w=0;w<u.length;w++){const i=o[w+s],a=u[w];i?(x=i.map||x,_.push(Zm(i,a))):(x&&!a.map&&(a.map=x),_.push(a))}return _},"updateSegments$1"),rf=/* @__PURE__ */__name((i,a)=>{!i.resolvedUri&&i.uri&&(i.resolvedUri=$p(a,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=$p(a,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=$p(a,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=$p(a,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(i=>{i.resolvedUri||(i.resolvedUri=$p(a,i.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(i=>{i.resolvedUri||(i.resolvedUri=$p(a,i.uri))})},"resolveSegmentUris$1"),af=/* @__PURE__ */__name(function(i){const a=i.segments||[],s=i.preloadSegment;if(s&&s.parts&&s.parts.length){if(s.preloadHints)for(let i=0;i<s.preloadHints.length;i++)if("MAP"===s.preloadHints[i].type)return a;s.duration=i.targetDuration,s.preload=!0,a.push(s)}return a},"getAllSegments$1"),of=/* @__PURE__ */__name((i,a)=>i===a||i.segments&&a.segments&&i.segments.length===a.segments.length&&i.endList===a.endList&&i.mediaSequence===a.mediaSequence&&i.preloadSegment===a.preloadSegment,"isPlaylistUnchanged$1"),lf=/* @__PURE__ */__name((i,a,s=of)=>{const o=merge$2(i,{}),u=o.playlists[a.id];if(!u)return null;if(s(u,a))return null;a.segments=af(a);const _=merge$2(u,a);if(_.preloadSegment&&!a.preloadSegment&&delete _.preloadSegment,u.segments){if(a.skip){a.segments=a.segments||[];for(let i=0;i<a.skip.skippedSegments;i++)a.segments.unshift({skipped:!0})}_.segments=ef(u.segments,a.segments,a.mediaSequence-u.mediaSequence)}_.segments.forEach(i=>{rf(i,_.resolvedUri)});for(let x=0;x<o.playlists.length;x++)o.playlists[x].id===a.id&&(o.playlists[x]=_);return o.playlists[a.id]=_,o.playlists[a.uri]=_,Om(i,(i,s,o,u)=>{if(i.playlists)for(let x=0;x<i.playlists.length;x++)a.id===i.playlists[x].id&&(i.playlists[x]=_)}),o},"updateMain$1"),cf=/* @__PURE__ */__name((i,a)=>{const s=i.segments||[],o=s[s.length-1],u=o&&o.parts&&o.parts[o.parts.length-1],_=u&&u.duration||o&&o.duration;return a&&_?1e3*_:500*(i.partTargetDuration||i.targetDuration||10)},"refreshDelay$1"),uf=/* @__PURE__ */__name((i,a,s)=>{if(!i)return;const o=[];return i.forEach(i=>{if(!i.attributes)return;const{BANDWIDTH:a,RESOLUTION:s,CODECS:u}=i.attributes;o.push({id:i.id,bandwidth:a,resolution:s,codecs:u})}),{type:a,isLive:s,renditions:o}},"playlistMetadataPayload");let df=(__name(Bt=class extends Ym{constructor(i,a,s={}){if(super(),!i)throw new Error("A non-empty playlist URL or object is required");this.logger_=Wp("PlaylistLoader");const{withCredentials:o=!1}=s;this.src=i,this.vhs_=a,this.withCredentials=o,this.addDateRangesToTextTrack_=s.addDateRangesToTextTrack;const u=a.options_;this.customTagParsers=u&&u.customTagParsers||[],this.customTagMappers=u&&u.customTagMappers||[],this.llhls=u&&u.llhls,this.dateRangesStorage_=new zm,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const i=this.media();if(!i)return;this.dateRangesStorage_.setOffset(i.segments),this.dateRangesStorage_.setPendingDateRanges(i.dateRanges);const a=this.dateRangesStorage_.getDateRangesToProcess();a.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(a)}handleMediaupdatetimeout_(){if("HAVE_METADATA"!==this.state)return;const i=this.media();let a=$p(this.main.uri,i.uri);this.llhls&&(a=Jm(a,i)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,a)=>{if(this.request)return i?this.playlistRequestError(this.request,this.media(),"HAVE_METADATA"):void this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})})}playlistRequestError(i,a,s){const{uri:o,id:u}=a;this.request=null,s&&(this.state=s),this.error={playlist:this.main.playlists[u],status:i.status,message:`HLS playlist request error at URL: ${o}.`,responseText:i.responseText,code:i.status>=500?4:2,metadata:Hm({requestType:i.requestType,request:i,error:i.error})},this.trigger("error")}parseManifest_({url:i,manifestString:a}){try{const s=Rm({onwarn:/* @__PURE__ */__name(({message:a})=>this.logger_(`m3u8-parser warn for ${i}: ${a}`),"onwarn"),oninfo:/* @__PURE__ */__name(({message:a})=>this.logger_(`m3u8-parser info for ${i}: ${a}`),"oninfo"),manifestString:a,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return s.playlists&&s.playlists.length?(this.excludeAudioOnlyVariants(s.playlists),s):s}catch(s){this.error=s,this.error.metadata={errorType:videojs$2.Error.StreamingHlsPlaylistParserError,error:s}}}excludeAudioOnlyVariants(i){const a=/* @__PURE__ */__name(i=>{const a=i.attributes||{},{width:s,height:o}=a.RESOLUTION||{};if(s&&o)return!0;const u=Gm(i)||[],_=Xm(u);return Boolean(_.video)},"hasVideo");i.some(a)&&i.forEach(i=>{a(i)||(i.excludeUntil=1/0)})}haveMetadata({playlistString:i,playlistObject:a,url:s,id:o}){this.request=null,this.state="HAVE_METADATA";const u={playlistInfo:{type:"media",uri:s}};this.trigger({type:"playlistparsestart",metadata:u});const _=a||this.parseManifest_({url:s,manifestString:i});_.lastRequest=Date.now(),Nm({playlist:_,uri:s,id:o});const x=lf(this.main,_);this.targetDuration=_.partTargetDuration||_.targetDuration,this.pendingMedia_=null,x?(this.main=x,this.media_=this.main.playlists[o]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(cf(this.media(),!!x)),u.parsedPlaylist=uf(this.main.playlists,u.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:u}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),Tn.clearTimeout(this.mediaUpdateTimeout),Tn.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new zm,this.off()}stopRequest(){if(this.request){const i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}}media(i,a){if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.main.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.main.playlists[i]}if(Tn.clearTimeout(this.finalRenditionTimeout),a){const a=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;return void(this.finalRenditionTimeout=Tn.setTimeout(this.media.bind(this,i,!1),a))}const s=this.state,o=!this.media_||i.id!==this.media_.id,u=this.main.playlists[i.id];if(u&&u.endList||i.endList&&i.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(o&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===s?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(cf(i,!0)),!o)return;if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i;const _={playlistInfo:{type:"media",uri:i.uri}};this.trigger({type:"playlistrequeststart",metadata:_}),this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(a,o)=>{if(this.request){if(i.lastRequest=Date.now(),i.resolvedUri=Gp(i.resolvedUri,o),a)return this.playlistRequestError(this.request,i,s);this.trigger({type:"playlistrequestcomplete",metadata:_}),this.haveMetadata({playlistString:o.responseText,url:i.uri,id:i.id}),"HAVE_MAIN_MANIFEST"===s?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}load(i){this.mediaUpdateTimeout&&(Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const a=this.media();if(i){const i=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;return void(this.mediaUpdateTimeout=Tn.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i))}this.started?a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}updateMediaUpdateTimeout_(i){this.mediaUpdateTimeout&&(Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Tn.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(i)},i))}start(){if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Tn.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);const i={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:i}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(a,s)=>{if(!this.request)return;if(this.request=null,a)return this.error={status:s.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:s.responseText,code:2,metadata:Hm({requestType:s.requestType,request:s,error:a})},"HAVE_NOTHING"===this.state&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:i}),this.src=Gp(this.src,s),this.trigger({type:"playlistparsestart",metadata:i});const o=this.parseManifest_({manifestString:s.responseText,url:this.src});i.parsedPlaylist=uf(o.playlists,i.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:i}),this.setupInitialPlaylist(o)})}srcUri(){return"string"==typeof this.src?this.src:this.src.uri}setupInitialPlaylist(i){if(this.state="HAVE_MAIN_MANIFEST",i.playlists)return this.main=i,jm(this.main,this.srcUri()),i.playlists.forEach(i=>{i.segments=af(i),i.segments.forEach(a=>{rf(a,i.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.main.playlists[0]));const a=this.srcUri()||Tn.location.href;this.main=Um(i,a),this.haveMetadata({playlistObject:i,url:a,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(i,a){const s=this.main,o=i.ID;let u=s.playlists.length;for(;u--;){const _=s.playlists[u];if(_.attributes["PATHWAY-ID"]===o){const x=_.resolvedUri,w=_.id;if(a){const a=this.createCloneURI_(_.resolvedUri,i),x=Lm(o,a),w=this.createCloneAttributes_(o,_.attributes),C=this.createClonePlaylist_(_,x,i,w);s.playlists[u]=C,s.playlists[x]=C,s.playlists[a]=C}else s.playlists.splice(u,1);delete s.playlists[w],delete s.playlists[x]}}this.updateOrDeleteCloneMedia(i,a)}updateOrDeleteCloneMedia(i,a){const s=this.main,o=i.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{if(s.mediaGroups[i]&&s.mediaGroups[i][o])for(const a in s.mediaGroups[i])if(a===o){for(const o in s.mediaGroups[i][a]){s.mediaGroups[i][a][o].playlists.forEach((i,a)=>{const o=s.playlists[i.id],u=o.id,_=o.resolvedUri;delete s.playlists[u],delete s.playlists[_]})}delete s.mediaGroups[i][a]}}),a&&this.createClonedMediaGroups_(i)}addClonePathway(i,a={}){const s=this.main,o=s.playlists.length,u=this.createCloneURI_(a.resolvedUri,i),_=Lm(i.ID,u),x=this.createCloneAttributes_(i.ID,a.attributes),w=this.createClonePlaylist_(a,_,i,x);s.playlists[o]=w,s.playlists[_]=w,s.playlists[u]=w,this.createClonedMediaGroups_(i)}createClonedMediaGroups_(i){const a=i.ID,s=i["BASE-ID"],o=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{if(o.mediaGroups[u]&&!o.mediaGroups[u][a])for(const _ in o.mediaGroups[u])if(_===s){o.mediaGroups[u][a]={};for(const s in o.mediaGroups[u][_]){const x=o.mediaGroups[u][_][s];o.mediaGroups[u][a][s]=_extends({},x);const w=o.mediaGroups[u][a][s],C=this.createCloneURI_(x.resolvedUri,i);w.resolvedUri=C,w.uri=C,w.playlists=[],x.playlists.forEach((_,x)=>{const C=o.playlists[_.id],L=Dm(u,a,s),B=Lm(a,L);if(C&&!o.playlists[B]){const a=this.createClonePlaylist_(C,B,i),s=a.resolvedUri;o.playlists[B]=a,o.playlists[s]=a}w.playlists[x]=this.createClonePlaylist_(_,B,i)})}}})}createClonePlaylist_(i,a,s,o){const u=this.createCloneURI_(i.resolvedUri,s),_={resolvedUri:u,uri:u,id:a};return i.segments&&(_.segments=[]),o&&(_.attributes=o),merge$2(i,_)}createCloneURI_(i,a){const s=new URL(i);s.hostname=a["URI-REPLACEMENT"].HOST;const o=a["URI-REPLACEMENT"].PARAMS;for(const u of Object.keys(o))s.searchParams.set(u,o[u]);return s.href}createCloneAttributes_(i,a){const s={"PATHWAY-ID":i};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(o=>{a[o]&&(s[o]=i)}),s}getKeyIdSet(i){if(i.contentProtection){const a=/* @__PURE__ */new Set;for(const s in i.contentProtection){const o=i.contentProtection[s].attributes.keyId;o&&a.add(o.toLowerCase())}return a}}},"PlaylistLoader"),Bt);const hf=/* @__PURE__ */__name(function(i,a,s,o){const u="arraybuffer"===i.responseType?i.response:i.responseText;!a&&u&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=u.byteLength||u.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),s.headers&&(i.responseHeaders=s.headers),a&&"ETIMEDOUT"===a.code&&(i.timedout=!0),a||i.aborted||200===s.statusCode||206===s.statusCode||0===s.statusCode||(a=new Error("XHR Failed with a response of: "+(i&&(u||i.responseText)))),o(a,i)},"callbackWrapper$1"),mf=/* @__PURE__ */__name((i,a)=>{if(!i||!i.size)return;let s=a;return i.forEach(i=>{s=i(s)}),s},"callAllRequestHooks"),gf=/* @__PURE__ */__name((i,a,s,o)=>{i&&i.size&&i.forEach(i=>{i(a,s,o)})},"callAllResponseHooks"),_f=/* @__PURE__ */__name(function(){const i=/* @__PURE__ */__name(function XhrFunction(i,a){i=merge$2({timeout:45e3},i);const s=XhrFunction.beforeRequest||videojs$2.Vhs.xhr.beforeRequest,o=XhrFunction._requestCallbackSet||videojs$2.Vhs.xhr._requestCallbackSet||/* @__PURE__ */new Set,u=XhrFunction._responseCallbackSet||videojs$2.Vhs.xhr._responseCallbackSet;s&&"function"==typeof s&&(videojs$2.log.warn("beforeRequest is deprecated, use onRequest instead."),o.add(s));const _=!0===videojs$2.Vhs.xhr.original?videojs$2.xhr:videojs$2.Vhs.xhr,x=mf(o,i);o.delete(s);const w=_(x||i,function(i,s){return gf(u,w,i,s),hf(w,i,s,a)}),C=w.abort;return w.abort=function(){return w.aborted=!0,C.apply(w,arguments)},w.uri=i.uri,w.requestType=i.requestType,w.requestTime=Date.now(),w},"XhrFunction");return i.original=!0,i},"xhrFactory$1"),yf=/* @__PURE__ */__name(function(i){let a;const s=i.offset;return a="bigint"==typeof i.offset||"bigint"==typeof i.length?Tn.BigInt(i.offset)+Tn.BigInt(i.length)-Tn.BigInt(1):i.offset+i.length-1,"bytes="+s+"-"+a},"byterangeStr$1"),bf=/* @__PURE__ */__name(function(i){const a={};return i.byterange&&(a.Range=yf(i.byterange)),a},"segmentXhrHeaders$1"),Tf=/* @__PURE__ */__name(function(i,a){return i.start(a)+"-"+i.end(a)},"textRange$1"),Sf=/* @__PURE__ */__name(function(i,a){const s=i.toString(16);return"00".substring(0,2-s.length)+s+(a%2?" ":"")},"formatHexString$1"),xf=/* @__PURE__ */__name(function(i){return i>=32&&i<126?String.fromCharCode(i):"."},"formatAsciiString$1"),Cf=/* @__PURE__ */__name(function(i){const a={};return Object.keys(i).forEach(s=>{const o=i[s];Tr(o)?a[s]={bytes:o.buffer,byteOffset:o.byteOffset,byteLength:o.byteLength}:a[s]=o}),a},"createTransferableMessage$1"),kf=/* @__PURE__ */__name(function(i){const a=i.byterange||{length:1/0,offset:0};return[a.length,a.offset,i.resolvedUri].join(",")},"initSegmentId$1"),Pf=/* @__PURE__ */__name(function(i){return i.resolvedUri},"segmentKeyId$1"),Df=/* @__PURE__ */__name(i=>{const a=Array.prototype.slice.call(i),s=16;let o,u,_="";for(let x=0;x<a.length/s;x++)o=a.slice(x*s,x*s+s).map(Sf).join(""),u=a.slice(x*s,x*s+s).map(xf).join(""),_+=o+" "+u+"\n";return _},"hexDump$1"),Rf=/* @__PURE__ */__name(({bytes:i})=>Df(i),"tagDump$1"),Of=/* @__PURE__ */__name(i=>{let a,s="";for(a=0;a<i.length;a++)s+=Tf(i,a)+" ";return s},"textRanges$1");var Nf=/* @__PURE__ */Object.freeze({__proto__:null,createTransferableMessage:Cf,initSegmentId:kf,segmentKeyId:Pf,hexDump:Df,tagDump:Rf,textRanges:Of});const Ff=/* @__PURE__ */__name((i,a)=>{if(!a.dateTimeObject)return null;const s=a.videoTimingInfo.transmuxerPrependedSeconds,o=i-(a.videoTimingInfo.transmuxedPresentationStart+s);return new Date(a.dateTimeObject.getTime()+1e3*o)},"playerTimeToProgramTime$1"),jf=/* @__PURE__ */__name(i=>i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds,"originalSegmentVideoDuration$1"),Vf=/* @__PURE__ */__name((i,a)=>{let s;try{s=new Date(i)}catch(w){return null}if(!a||!a.segments||0===a.segments.length)return null;let o=a.segments[0];if(s<new Date(o.dateTimeObject))return null;for(let C=0;C<a.segments.length-1;C++){o=a.segments[C];if(s<new Date(a.segments[C+1].dateTimeObject))break}const u=a.segments[a.segments.length-1],_=u.dateTimeObject,x=u.videoTimingInfo?jf(u.videoTimingInfo):u.duration+.25*u.duration;return s>new Date(_.getTime()+1e3*x)?null:(s>new Date(_)&&(o=u),{segment:o,estimatedStart:o.videoTimingInfo?o.videoTimingInfo.transmuxedPresentationStart:Pm.duration(a,a.mediaSequence+a.segments.indexOf(o)),type:o.videoTimingInfo?"accurate":"estimate"})},"findSegmentForProgramTime$1"),Hf=/* @__PURE__ */__name((i,a)=>{if(!a||!a.segments||0===a.segments.length)return null;let s,o=0;for(let _=0;_<a.segments.length&&(s=a.segments[_],o=s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationEnd:o+s.duration,!(i<=o));_++);const u=a.segments[a.segments.length-1];if(u.videoTimingInfo&&u.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>o){if(i>o+.25*u.duration)return null;s=u}return{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:o-s.duration,type:s.videoTimingInfo?"accurate":"estimate"}},"findSegmentForPlayerTime$1"),Gf=/* @__PURE__ */__name((i,a)=>{let s,o;try{s=new Date(i),o=new Date(a)}catch(_){}const u=s.getTime();return(o.getTime()-u)/1e3},"getOffsetFromTimestamp$1"),Wf=/* @__PURE__ */__name(i=>{if(!i.segments||0===i.segments.length)return!1;for(let a=0;a<i.segments.length;a++){if(!i.segments[a].dateTimeObject)return!1}return!0},"verifyProgramDateTimeTags$1"),Xf=/* @__PURE__ */__name(({playlist:i,time:a,callback:s})=>{if(!s)throw new Error("getProgramTime: callback must be provided");if(!i||void 0===a)return s({message:"getProgramTime: playlist and time must be provided"});const o=Hf(a,i);if(!o)return s({message:"valid programTime was not found"});if("estimate"===o.type)return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});const u={mediaSeconds:a},_=Ff(a,o.segment);return _&&(u.programDateTime=_.toISOString()),s(null,u)},"getProgramTime$1"),Qf=/* @__PURE__ */__name(({programTime:i,playlist:a,retryCount:s=2,seekTo:o,pauseAfterSeek:u=!0,tech:_,callback:x})=>{if(!x)throw new Error("seekToProgramTime: callback must be provided");if(void 0===i||!a||!o)return x({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!a.endList&&!_.hasStarted_)return x({message:"player must be playing a live stream to start buffering"});if(!Wf(a))return x({message:"programDateTime tags must be provided in the manifest "+a.resolvedUri});const w=Vf(i,a);if(!w)return x({message:`${i} was not found in the stream`});const C=w.segment,L=Gf(C.dateTimeObject,i);if("estimate"===w.type)return 0===s?x({message:`${i} is not buffered yet. Try again`}):(o(w.estimatedStart+L),void _.one("seeked",()=>{Qf({programTime:i,playlist:a,retryCount:s-1,seekTo:o,pauseAfterSeek:u,tech:_,callback:x})}));const B=C.start+L,U=/* @__PURE__ */__name(()=>x(null,_.currentTime()),"seekedCallback");_.one("seeked",U),u&&_.pause(),o(B)},"seekToProgramTime$1"),Jf=/* @__PURE__ */__name((i,a)=>{if(4===i.readyState)return a()},"callbackOnCompleted$1"),eg=/* @__PURE__ */__name((i,a,s,o)=>{let u,_=[],x=!1;const w=/* @__PURE__ */__name(function(i,a,o,u){return a.abort(),x=!0,s(i,a,o,u)},"endRequestAndCallback"),C=/* @__PURE__ */__name(function(i,a){if(x)return;if(i)return i.metadata=Hm({requestType:o,request:a,error:i}),w(i,a,"",_);const s=a.responseText.substring(_&&_.byteLength||0,a.responseText.length);if(_=Ir(_,Pr(s,!0)),u=u||Ws(_),_.length<10||u&&_.length<u+2)return Jf(a,()=>w(i,a,"",_));const C=yo(_);return"ts"===C&&_.length<188||!C&&_.length<376?Jf(a,()=>w(i,a,"",_)):w(null,a,C,_)},"progressListener"),L=a({uri:i,beforeSend(i){i.overrideMimeType("text/plain; charset=x-user-defined"),i.addEventListener("progress",function({total:a,loaded:s}){return hf(i,null,{statusCode:i.status},C)})}},function(i,a){return hf(L,i,a,C)});return L},"containerRequest$1"),{EventTarget:ng}=videojs$2,rg=/* @__PURE__ */__name(function(i,a){if(!of(i,a))return!1;if(i.sidx&&a.sidx&&(i.sidx.offset!==a.sidx.offset||i.sidx.length!==a.sidx.length))return!1;if(!i.sidx&&a.sidx||i.sidx&&!a.sidx)return!1;if(i.segments&&!a.segments||!i.segments&&a.segments)return!1;if(!i.segments&&!a.segments)return!0;for(let s=0;s<i.segments.length;s++){const o=i.segments[s],u=a.segments[s];if(o.uri!==u.uri)return!1;if(!o.byterange&&!u.byterange)continue;const _=o.byterange,x=u.byterange;if(_&&!x||!_&&x)return!1;if(_.offset!==x.offset||_.length!==x.length)return!1}return!0},"dashPlaylistUnchanged$1"),sg=/* @__PURE__ */__name((i,a,s,o)=>`placeholder-uri-${i}-${a}-${o.attributes.NAME||s}`,"dashGroupId$1"),og=/* @__PURE__ */__name(({mainXml:i,srcUrl:a,clientOffset:s,sidxMapping:o,previousManifest:u})=>{const _=Bs(i,{manifestUri:a,clientOffset:s,sidxMapping:o,previousManifest:u});return jm(_,a,sg),_},"parseMainXml"),lg=/* @__PURE__ */__name((i,a)=>{Om(i,(s,o,u,_)=>{a.mediaGroups[o][u]&&_ in a.mediaGroups[o][u]||delete i.mediaGroups[o][u][_]})},"removeOldMediaGroupLabels$1"),pg=/* @__PURE__ */__name((i,a,s)=>{let o=!0,u=merge$2(i,{duration:a.duration,minimumUpdatePeriod:a.minimumUpdatePeriod,timelineStarts:a.timelineStarts});for(let _=0;_<a.playlists.length;_++){const i=a.playlists[_];if(i.sidx){const a=Ia(i.sidx);s&&s[a]&&s[a].sidx&&ya(i,s[a].sidx,i.sidx.resolvedUri)}const x=lf(u,i,rg);x&&(u=x,o=!1)}return Om(a,(i,a,s,_)=>{if(i.playlists&&i.playlists.length){const x=i.playlists[0].id,w=lf(u,i.playlists[0],rg);w&&(u=w,_ in u.mediaGroups[a][s]||(u.mediaGroups[a][s][_]=i),u.mediaGroups[a][s][_].playlists[0]=u.playlists[x],o=!1)}}),lg(u,a),a.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(o=!1),o?null:u},"updateMain"),mg=/* @__PURE__ */__name((i,a)=>(Boolean(!i.map&&!a.map)||Boolean(i.map&&a.map&&i.map.byterange.offset===a.map.byterange.offset&&i.map.byterange.length===a.map.byterange.length))&&i.uri===a.uri&&i.byterange.offset===a.byterange.offset&&i.byterange.length===a.byterange.length,"equivalentSidx$1"),fg=/* @__PURE__ */__name((i,a)=>{const s={};for(const o in i){const u=i[o].sidx;if(u){const i=Ia(u);if(!a[i])break;const o=a[i].sidxInfo;mg(o,u)&&(s[i]=a[i])}}return s},"compareSidxEntry$1"),gg=/* @__PURE__ */__name((i,a)=>{let s=fg(i.playlists,a);return Om(i,(i,o,u,_)=>{if(i.playlists&&i.playlists.length){const o=i.playlists;s=merge$2(s,fg(o,a))}}),s},"filterChangedSidxMappings$1");let _g=(__name(Ft=class extends ng{constructor(i,a,s={},o){super(),this.isPaused_=!0,this.mainPlaylistLoader_=o||this,o||(this.isMain_=!0);const{withCredentials:u=!1}=s;if(this.vhs_=a,this.withCredentials=u,this.addMetadataToTextTrack=s.addMetadataToTextTrack,!i)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Wp("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=i,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=i}get isPaused(){return this.isPaused_}requestErrored_(i,a,s){return!this.request||(this.request=null,i?(this.error="object"!=typeof i||i instanceof Error?{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2,metadata:i.metadata}:i,s&&(this.state=s),this.trigger("error"),!0):void 0)}addSidxSegments_(i,a,s){const o=i.sidx&&Ia(i.sidx);if(!i.sidx||!o||this.mainPlaylistLoader_.sidxMapping_[o])return Tn.clearTimeout(this.mediaRequest_),void(this.mediaRequest_=Tn.setTimeout(()=>s(!1),0));const u=Gp(i.sidx.resolvedUri),_=/* @__PURE__ */__name((u,_)=>{if(this.requestErrored_(u,_,a))return;const x=this.mainPlaylistLoader_.sidxMapping_,{requestType:w}=_;let C;try{C=Hs(xr(_.response).subarray(8))}catch(L){return L.metadata=Hm({requestType:w,request:_,parseFailure:!0}),void this.requestErrored_(L,_,a)}return x[o]={sidxInfo:i.sidx,sidx:C},ya(i,C,i.sidx.resolvedUri),s(!0)},"fin");this.request=eg(u,this.vhs_.xhr,(a,s,o,x)=>{if(a)return _(a,s);if(!o||"mp4"!==o){const a=o||"unknown";return _({status:s.status,message:`Unsupported ${a} container type for sidx segment at URL: ${u}`,response:"",playlist:i,internal:!0,playlistExclusionDuration:1/0,code:2},s)}const{offset:w,length:C}=i.sidx.byterange;if(x.length>=C+w)return _(a,{response:x.subarray(w,w+C),status:s.status,uri:s.uri});this.request=this.vhs_.xhr({uri:u,responseType:"arraybuffer",requestType:"dash-sidx",headers:bf({byterange:i.sidx.byterange})},_)},"dash-sidx")}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Tn.clearTimeout(this.minimumUpdatePeriodTimeout_),Tn.clearTimeout(this.mediaRequest_),Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}}media(i){if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);const a=this.state;if("string"==typeof i){if(!this.mainPlaylistLoader_.main.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.mainPlaylistLoader_.main.playlists[i]}const s=!this.media_||i.id!==this.media_.id;if(s&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList)return this.state="HAVE_METADATA",this.media_=i,void(s&&(this.trigger("mediachanging"),this.trigger("mediachange")));s&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,a,s=>{this.haveMetadata({startingState:a,playlist:i})}))}haveMetadata({startingState:i,playlist:a}){this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,Tn.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(a.id),"HAVE_MAIN_MANIFEST"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(Tn.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)}load(i){this.isPaused_=!1,Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const a=this.media();if(i){const i=a?a.targetDuration/2*1e3:5e3;return void(this.mediaUpdateTimeout=Tn.setTimeout(()=>this.load(),i))}this.started?a&&!a.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()}start(){if(this.started=!0,!this.isMain_)return Tn.clearTimeout(this.mediaRequest_),void(this.mediaRequest_=Tn.setTimeout(()=>this.haveMain_(),0));this.requestMain_((i,a)=>{this.haveMain_(),this.hasPendingRequest()||this.media_||this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(i){const a={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(s,o)=>{if(s){const{requestType:i}=o;s.metadata=Hm({requestType:i,request:o,error:s})}if(this.requestErrored_(s,o))return void("HAVE_NOTHING"===this.state&&(this.started=!1));this.trigger({type:"manifestrequestcomplete",metadata:a});const u=o.responseText!==this.mainPlaylistLoader_.mainXml_;return this.mainPlaylistLoader_.mainXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?this.mainLoaded_=Date.parse(o.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Gp(this.mainPlaylistLoader_.srcUrl,o),u?(this.handleMain_(),void this.syncClientServerClock_(()=>i(o,u))):i(o,u)})}syncClientServerClock_(i){const a=Fs(this.mainPlaylistLoader_.mainXml_);return null===a?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),i()):"DIRECT"===a.method?(this.mainPlaylistLoader_.clientOffset_=a.value-Date.now(),i()):void(this.request=this.vhs_.xhr({uri:$p(this.mainPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(s,o)=>{if(!this.request)return;if(s){const{requestType:a}=o;return this.error.metadata=Hm({requestType:a,request:o,error:s}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),i()}let u;u="HEAD"===a.method?o.responseHeaders&&o.responseHeaders.date?Date.parse(o.responseHeaders.date):this.mainLoaded_:Date.parse(o.responseText),this.mainPlaylistLoader_.clientOffset_=u-Date.now(),i()}))}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){Tn.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const i=this.mainPlaylistLoader_.main,a={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};let s;this.trigger({type:"manifestparsestart",metadata:a});try{s=og({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:i})}catch(u){this.error=u,this.error.metadata={errorType:videojs$2.Error.StreamingDashManifestParserError,error:u},this.trigger("error")}i&&(s=pg(i,s,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=s||i;const o=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(o&&o!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=o),(!i||s&&s.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(s),s){const{duration:i,endList:o}=s,u=[];s.playlists.forEach(i=>{u.push({id:i.id,bandwidth:i.attributes.BANDWIDTH,resolution:i.attributes.RESOLUTION,codecs:i.attributes.CODECS})});const _={duration:i,isLive:!o,renditions:u};a.parsedManifest=_,this.trigger({type:"manifestparsecomplete",metadata:a})}return Boolean(s)}updateMinimumUpdatePeriodTimeout_(){const i=this.mainPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(Tn.clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);let a=i.main&&i.main.minimumUpdatePeriod;0===a&&(i.media()?a=1e3*i.media().targetDuration:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),"number"!=typeof a||a<=0?a<0&&this.logger_(`found invalid minimumUpdatePeriod of ${a}, not setting a timeout`):this.createMUPTimeout_(a)}createMUPTimeout_(i){const a=this.mainPlaylistLoader_;a.minimumUpdatePeriodTimeout_=Tn.setTimeout(()=>{a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(i)},i)}refreshXml_(){this.requestMain_((i,a)=>{a&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=gg(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(i){if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const a=this.mainPlaylistLoader_.main.playlists,s=!this.media_||this.media_!==a[i];if(s?this.media_=a[i]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const i=/* @__PURE__ */__name(()=>{this.media().endList||(this.mediaUpdateTimeout=Tn.setTimeout(()=>{this.trigger("mediaupdatetimeout"),i()},cf(this.media(),Boolean(s))))},"createMediaUpdateTimeout");i()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(i){if(i&&this.mainPlaylistLoader_.main.eventStream){const i=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",i,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(i){if(i.contentProtection){const a=/* @__PURE__ */new Set;for(const s in i.contentProtection){const o=i.contentProtection[s].attributes["cenc:default_KID"];o&&a.add(o.replace(/-/g,"").toLowerCase())}return a}}},"DashPlaylistLoader"),Ft);var yg={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const xg=/* @__PURE__ */__name(i=>{const a=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)a[s]=i.charCodeAt(s);return a.buffer},"stringToArrayBuffer$1"),kg=/* @__PURE__ */__name(function(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},"browserWorkerPolyFill$1"),Ug=/* @__PURE__ */__name(function(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch(a){const s=new BlobBuilder;return s.append(i),URL.createObjectURL(s.getBlob())}},"createObjectURL$1"),Vg=/* @__PURE__ */__name(function(i){return function(){const a=Ug(i),s=kg(new Worker(a));s.objURL=a;const o=s.terminate;return s.on=s.addEventListener,s.off=s.removeEventListener,s.terminate=function(){return URL.revokeObjectURL(a),o.call(this)},s}},"factory$2"),zg=/* @__PURE__ */__name(function(i){return`var browserWorkerPolyFill = ${kg.toString()};\nbrowserWorkerPolyFill(self);\n`+i},"transform$1"),Wg=/* @__PURE__ */__name(function(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},"getWorkerString$1"),qg=zg(Wg(function(){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=/* @__PURE__ */__name(function(){this.init=function(){var i={};this.on=function(a,s){i[a]||(i[a]=[]),i[a]=i[a].concat(s)},this.off=function(a,s){var o;return!!i[a]&&(o=i[a].indexOf(s),i[a]=i[a].slice(),i[a].splice(o,1),o>-1)},this.trigger=function(a){var s,o,u,_;if(s=i[a])if(2===arguments.length)for(u=s.length,o=0;o<u;++o)s[o].call(this,arguments[1]);else{for(_=[],o=arguments.length,o=1;o<arguments.length;++o)_.push(arguments[o]);for(u=s.length,o=0;o<u;++o)s[o].apply(this,_)}},this.dispose=function(){i={}}}},"Stream$8");a.prototype.pipe=function(i){return this.on("data",function(a){i.push(a)}),this.on("done",function(a){i.flush(a)}),this.on("partialdone",function(a){i.partialFlush(a)}),this.on("endedtimeline",function(a){i.endTimeline(a)}),this.on("reset",function(a){i.reset(a)}),i},a.prototype.push=function(i){this.trigger("data",i)},a.prototype.flush=function(i){this.trigger("done",i)},a.prototype.partialFlush=function(i){this.trigger("partialdone",i)},a.prototype.endTimeline=function(i){this.trigger("endedtimeline",i)},a.prototype.reset=function(i){this.trigger("reset",i)};var s,o,u,_,x,w,C,L,B,U,j,V,z,$,Y,Z,ee,ie,ae,le,ce,de,pe,fe,_e,ye,be,Te,Se,xe,we,Pe,Re,ze,He,$e,We,qe,Xe,Qe,Ye,et=a,tt=Math.pow(2,32),nt={getUint64:/* @__PURE__ */__name(function(i){var a,s=new DataView(i.buffer,i.byteOffset,i.byteLength);return s.getBigUint64?(a=s.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(a):a:s.getUint32(0)*tt+s.getUint32(4)},"getUint64$5"),MAX_UINT32:tt},it=nt.MAX_UINT32;!function(){var i;if(pe={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(i in pe)pe.hasOwnProperty(i)&&(pe[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);fe=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),ye=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),_e=new Uint8Array([0,0,0,1]),be=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Te=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Se={video:be,audio:Te},Pe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),we=new Uint8Array([0,0,0,0,0,0,0,0]),Re=new Uint8Array([0,0,0,0,0,0,0,0]),ze=Re,He=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),$e=Re,xe=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),s=/* @__PURE__ */__name(function(i){var a,s,o=[],u=0;for(a=1;a<arguments.length;a++)o.push(arguments[a]);for(a=o.length;a--;)u+=o[a].byteLength;for(s=new Uint8Array(u+8),new DataView(s.buffer,s.byteOffset,s.byteLength).setUint32(0,s.byteLength),s.set(i,4),a=0,u=8;a<o.length;a++)s.set(o[a],u),u+=o[a].byteLength;return s},"box"),o=/* @__PURE__ */__name(function(){return s(pe.dinf,s(pe.dref,Pe))},"dinf"),u=/* @__PURE__ */__name(function(i){return s(pe.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,i.audioobjecttype<<3|i.samplingfrequencyindex>>>1,i.samplingfrequencyindex<<7|i.channelcount<<3,6,1,2]))},"esds"),_=/* @__PURE__ */__name(function(){return s(pe.ftyp,fe,_e,fe,ye)},"ftyp"),Z=/* @__PURE__ */__name(function(i){return s(pe.hdlr,Se[i])},"hdlr"),x=/* @__PURE__ */__name(function(i){return s(pe.mdat,i)},"mdat"),Y=/* @__PURE__ */__name(function(i){var a=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,i.duration>>>24&255,i.duration>>>16&255,i.duration>>>8&255,255&i.duration,85,196,0,0]);return i.samplerate&&(a[12]=i.samplerate>>>24&255,a[13]=i.samplerate>>>16&255,a[14]=i.samplerate>>>8&255,a[15]=255&i.samplerate),s(pe.mdhd,a)},"mdhd"),$=/* @__PURE__ */__name(function(i){return s(pe.mdia,Y(i),Z(i.type),C(i))},"mdia"),w=/* @__PURE__ */__name(function(i){return s(pe.mfhd,new Uint8Array([0,0,0,0,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))},"mfhd"),C=/* @__PURE__ */__name(function(i){return s(pe.minf,"video"===i.type?s(pe.vmhd,xe):s(pe.smhd,we),o(),ie(i))},"minf"),L=/* @__PURE__ */__name(function(i,a){for(var o=[],u=a.length;u--;)o[u]=le(a[u]);return s.apply(null,[pe.moof,w(i)].concat(o))},"moof"),B=/* @__PURE__ */__name(function(i){for(var a=i.length,o=[];a--;)o[a]=V(i[a]);return s.apply(null,[pe.moov,j(4294967295)].concat(o).concat(U(i)))},"moov"),U=/* @__PURE__ */__name(function(i){for(var a=i.length,o=[];a--;)o[a]=ce(i[a]);return s.apply(null,[pe.mvex].concat(o))},"mvex"),j=/* @__PURE__ */__name(function(i){var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(pe.mvhd,a)},"mvhd"),ee=/* @__PURE__ */__name(function(i){var a,o,u=i.samples||[],_=new Uint8Array(4+u.length);for(o=0;o<u.length;o++)a=u[o].flags,_[o+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return s(pe.sdtp,_)},"sdtp"),ie=/* @__PURE__ */__name(function(i){return s(pe.stbl,ae(i),s(pe.stts,$e),s(pe.stsc,ze),s(pe.stsz,He),s(pe.stco,Re))},"stbl"),ae=/* @__PURE__ */__name(function(i){return s(pe.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===i.type?We(i):qe(i))},"stsd"),We=/* @__PURE__ */__name(function(i){var a,o,u=i.sps||[],_=i.pps||[],x=[],w=[];for(a=0;a<u.length;a++)x.push((65280&u[a].byteLength)>>>8),x.push(255&u[a].byteLength),x=x.concat(Array.prototype.slice.call(u[a]));for(a=0;a<_.length;a++)w.push((65280&_[a].byteLength)>>>8),w.push(255&_[a].byteLength),w=w.concat(Array.prototype.slice.call(_[a]));if(o=[pe.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&i.width)>>8,255&i.width,(65280&i.height)>>8,255&i.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(pe.avcC,new Uint8Array([1,i.profileIdc,i.profileCompatibility,i.levelIdc,255].concat([u.length],x,[_.length],w))),s(pe.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],i.sarRatio){var C=i.sarRatio[0],L=i.sarRatio[1];o.push(s(pe.pasp,new Uint8Array([(4278190080&C)>>24,(16711680&C)>>16,(65280&C)>>8,255&C,(4278190080&L)>>24,(16711680&L)>>16,(65280&L)>>8,255&L])))}return s.apply(null,o)},"videoSample"),qe=/* @__PURE__ */__name(function(i){return s(pe.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&i.channelcount)>>8,255&i.channelcount,(65280&i.samplesize)>>8,255&i.samplesize,0,0,0,0,(65280&i.samplerate)>>8,255&i.samplerate,0,0]),u(i))},"audioSample"),z=/* @__PURE__ */__name(function(i){var a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,0,(4278190080&i.duration)>>24,(16711680&i.duration)>>16,(65280&i.duration)>>8,255&i.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&i.width)>>8,255&i.width,0,0,(65280&i.height)>>8,255&i.height,0,0]);return s(pe.tkhd,a)},"tkhd"),le=/* @__PURE__ */__name(function(i){var a,o,u,_,x,w;return a=s(pe.tfhd,new Uint8Array([0,0,0,58,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),x=Math.floor(i.baseMediaDecodeTime/it),w=Math.floor(i.baseMediaDecodeTime%it),o=s(pe.tfdt,new Uint8Array([1,0,0,0,x>>>24&255,x>>>16&255,x>>>8&255,255&x,w>>>24&255,w>>>16&255,w>>>8&255,255&w])),"audio"===i.type?(u=de(i,92),s(pe.traf,a,o,u)):(_=ee(i),u=de(i,_.length+92),s(pe.traf,a,o,u,_))},"traf"),V=/* @__PURE__ */__name(function(i){return i.duration=i.duration||4294967295,s(pe.trak,z(i),$(i))},"trak"),ce=/* @__PURE__ */__name(function(i){var a=new Uint8Array([0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==i.type&&(a[a.length-1]=0),s(pe.trex,a)},"trex"),Ye=/* @__PURE__ */__name(function(i,a){var s=0,o=0,u=0,_=0;return i.length&&(void 0!==i[0].duration&&(s=1),void 0!==i[0].size&&(o=2),void 0!==i[0].flags&&(u=4),void 0!==i[0].compositionTimeOffset&&(_=8)),[0,0,s|o|u|_,1,(4278190080&i.length)>>>24,(16711680&i.length)>>>16,(65280&i.length)>>>8,255&i.length,(4278190080&a)>>>24,(16711680&a)>>>16,(65280&a)>>>8,255&a]},"trunHeader"),Qe=/* @__PURE__ */__name(function(i,a){var o,u,_,x,w,C;for(a+=20+16*(x=i.samples||[]).length,_=Ye(x,a),(u=new Uint8Array(_.length+16*x.length)).set(_),o=_.length,C=0;C<x.length;C++)w=x[C],u[o++]=(4278190080&w.duration)>>>24,u[o++]=(16711680&w.duration)>>>16,u[o++]=(65280&w.duration)>>>8,u[o++]=255&w.duration,u[o++]=(4278190080&w.size)>>>24,u[o++]=(16711680&w.size)>>>16,u[o++]=(65280&w.size)>>>8,u[o++]=255&w.size,u[o++]=w.flags.isLeading<<2|w.flags.dependsOn,u[o++]=w.flags.isDependedOn<<6|w.flags.hasRedundancy<<4|w.flags.paddingValue<<1|w.flags.isNonSyncSample,u[o++]=61440&w.flags.degradationPriority,u[o++]=15&w.flags.degradationPriority,u[o++]=(4278190080&w.compositionTimeOffset)>>>24,u[o++]=(16711680&w.compositionTimeOffset)>>>16,u[o++]=(65280&w.compositionTimeOffset)>>>8,u[o++]=255&w.compositionTimeOffset;return s(pe.trun,u)},"videoTrun"),Xe=/* @__PURE__ */__name(function(i,a){var o,u,_,x,w,C;for(a+=20+8*(x=i.samples||[]).length,_=Ye(x,a),(o=new Uint8Array(_.length+8*x.length)).set(_),u=_.length,C=0;C<x.length;C++)w=x[C],o[u++]=(4278190080&w.duration)>>>24,o[u++]=(16711680&w.duration)>>>16,o[u++]=(65280&w.duration)>>>8,o[u++]=255&w.duration,o[u++]=(4278190080&w.size)>>>24,o[u++]=(16711680&w.size)>>>16,o[u++]=(65280&w.size)>>>8,o[u++]=255&w.size;return s(pe.trun,o)},"audioTrun"),de=/* @__PURE__ */__name(function(i,a){return"audio"===i.type?Xe(i,a):Qe(i,a)},"trun$1");var rt,at,st,ot,lt,ct,ut,dt,ht={ftyp:_,mdat:x,moof:L,moov:B,initSegment:/* @__PURE__ */__name(function(i){var a,s=_(),o=B(i);return(a=new Uint8Array(s.byteLength+o.byteLength)).set(s),a.set(o,s.byteLength),a},"initSegment")},pt=/* @__PURE__ */__name(function(i){var a,s,o=[],u=[];for(u.byteLength=0,u.nalCount=0,u.duration=0,o.byteLength=0,a=0;a<i.length;a++)"access_unit_delimiter_rbsp"===(s=i[a]).nalUnitType?(o.length&&(o.duration=s.dts-o.dts,u.byteLength+=o.byteLength,u.nalCount+=o.length,u.duration+=o.duration,u.push(o)),(o=[s]).byteLength=s.data.byteLength,o.pts=s.pts,o.dts=s.dts):("slice_layer_without_partitioning_rbsp_idr"===s.nalUnitType&&(o.keyFrame=!0),o.duration=s.dts-o.dts,o.byteLength+=s.data.byteLength,o.push(s));return u.length&&(!o.duration||o.duration<=0)&&(o.duration=u[u.length-1].duration),u.byteLength+=o.byteLength,u.nalCount+=o.length,u.duration+=o.duration,u.push(o),u},"groupNalsIntoFrames"),mt=/* @__PURE__ */__name(function(i){var a,s,o=[],u=[];for(o.byteLength=0,o.nalCount=0,o.duration=0,o.pts=i[0].pts,o.dts=i[0].dts,u.byteLength=0,u.nalCount=0,u.duration=0,u.pts=i[0].pts,u.dts=i[0].dts,a=0;a<i.length;a++)(s=i[a]).keyFrame?(o.length&&(u.push(o),u.byteLength+=o.byteLength,u.nalCount+=o.nalCount,u.duration+=o.duration),(o=[s]).nalCount=s.length,o.byteLength=s.byteLength,o.pts=s.pts,o.dts=s.dts,o.duration=s.duration):(o.duration+=s.duration,o.nalCount+=s.length,o.byteLength+=s.byteLength,o.push(s));return u.length&&o.duration<=0&&(o.duration=u[u.length-1].duration),u.byteLength+=o.byteLength,u.nalCount+=o.nalCount,u.duration+=o.duration,u.push(o),u},"groupFramesIntoGops"),ft=/* @__PURE__ */__name(function(i){var a;return!i[0][0].keyFrame&&i.length>1&&(a=i.shift(),i.byteLength-=a.byteLength,i.nalCount-=a.nalCount,i[0][0].dts=a.dts,i[0][0].pts=a.pts,i[0][0].duration+=a.duration),i},"extendFirstKeyFrame"),gt=/* @__PURE__ */__name(function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},"createDefaultSample"),_t=/* @__PURE__ */__name(function(i,a){var s=gt();return s.dataOffset=a,s.compositionTimeOffset=i.pts-i.dts,s.duration=i.duration,s.size=4*i.length,s.size+=i.byteLength,i.keyFrame&&(s.flags.dependsOn=2,s.flags.isNonSyncSample=0),s},"sampleForFrame"),yt={groupNalsIntoFrames:pt,groupFramesIntoGops:mt,extendFirstKeyFrame:ft,generateSampleTable:/* @__PURE__ */__name(function(i,a){var s,o,u,_,x,w=a||0,C=[];for(s=0;s<i.length;s++)for(_=i[s],o=0;o<_.length;o++)x=_[o],w+=(u=_t(x,w)).size,C.push(u);return C},"generateSampleTable$1"),concatenateNalData:/* @__PURE__ */__name(function(i){var a,s,o,u,_,x,w=0,C=i.byteLength,L=i.nalCount,B=new Uint8Array(C+4*L),U=new DataView(B.buffer);for(a=0;a<i.length;a++)for(u=i[a],s=0;s<u.length;s++)for(_=u[s],o=0;o<_.length;o++)x=_[o],U.setUint32(w,x.data.byteLength),w+=4,B.set(x.data,w),w+=x.data.byteLength;return B},"concatenateNalData"),generateSampleTableForFrame:/* @__PURE__ */__name(function(i,a){var s,o=[];return s=_t(i,a||0),o.push(s),o},"generateSampleTableForFrame"),concatenateNalDataForFrame:/* @__PURE__ */__name(function(i){var a,s,o=0,u=i.byteLength,_=i.length,x=new Uint8Array(u+4*_),w=new DataView(x.buffer);for(a=0;a<i.length;a++)s=i[a],w.setUint32(o,s.data.byteLength),o+=4,x.set(s.data,o),o+=s.data.byteLength;return x},"concatenateNalDataForFrame")},vt=[33,16,5,32,164,27],bt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Tt=/* @__PURE__ */__name(function(i){for(var a=[];i--;)a.push(0);return a},"zeroFill"),St=/* @__PURE__ */__name(function(i){return Object.keys(i).reduce(function(a,s){return a[s]=new Uint8Array(i[s].reduce(function(i,a){return i.concat(a)},[])),a},{})},"makeTable"),xt=/* @__PURE__ */__name(function(){if(!rt){var i={96e3:[vt,[227,64],Tt(154),[56]],88200:[vt,[231],Tt(170),[56]],64e3:[vt,[248,192],Tt(240),[56]],48e3:[vt,[255,192],Tt(268),[55,148,128],Tt(54),[112]],44100:[vt,[255,192],Tt(268),[55,163,128],Tt(84),[112]],32e3:[vt,[255,192],Tt(268),[55,234],Tt(226),[112]],24e3:[vt,[255,192],Tt(268),[55,255,128],Tt(268),[111,112],Tt(126),[224]],16e3:[vt,[255,192],Tt(268),[55,255,128],Tt(268),[111,255],Tt(269),[223,108],Tt(195),[1,192]],12e3:[bt,Tt(268),[3,127,248],Tt(268),[6,255,240],Tt(268),[13,255,224],Tt(268),[27,253,128],Tt(259),[56]],11025:[bt,Tt(268),[3,127,248],Tt(268),[6,255,240],Tt(268),[13,255,224],Tt(268),[27,255,192],Tt(268),[55,175,128],Tt(108),[112]],8e3:[bt,Tt(268),[3,121,16],Tt(47),[7]]};rt=St(i)}return rt},"silence_1"),wt=9e4;at=/* @__PURE__ */__name(function(i){return i*wt},"secondsToVideoTs"),st=/* @__PURE__ */__name(function(i,a){return i*a},"secondsToAudioTs"),ot=/* @__PURE__ */__name(function(i){return i/wt},"videoTsToSeconds"),lt=/* @__PURE__ */__name(function(i,a){return i/a},"audioTsToSeconds"),ct=/* @__PURE__ */__name(function(i,a){return at(lt(i,a))},"audioTsToVideoTs"),ut=/* @__PURE__ */__name(function(i,a){return st(ot(i),a)},"videoTsToAudioTs"),dt=/* @__PURE__ */__name(function(i,a,s){return ot(s?i:i-a)},"metadataTsToSeconds");var At={ONE_SECOND_IN_TS:wt,secondsToVideoTs:at,secondsToAudioTs:st,videoTsToSeconds:ot,audioTsToSeconds:lt,audioTsToVideoTs:ct,videoTsToAudioTs:ut,metadataTsToSeconds:dt},Ct=xt,Et=At,Mt=/* @__PURE__ */__name(function(i){var a,s=0;for(a=0;a<i.length;a++)s+=i[a].data.byteLength;return s},"sumFrameByteLengths"),kt={prefixWithSilence:/* @__PURE__ */__name(function(i,a,s,o){var u,_,x,w,C,L=0,B=0,U=0;if(a.length&&(u=Et.audioTsToVideoTs(i.baseMediaDecodeTime,i.samplerate),_=Math.ceil(Et.ONE_SECOND_IN_TS/(i.samplerate/1024)),s&&o&&(L=u-Math.max(s,o),U=(B=Math.floor(L/_))*_),!(B<1||U>Et.ONE_SECOND_IN_TS/2))){for((x=Ct()[i.samplerate])||(x=a[0].data),w=0;w<B;w++)C=a[0],a.splice(0,0,{data:x,dts:C.dts-_,pts:C.pts-_});return i.baseMediaDecodeTime-=Math.floor(Et.videoTsToAudioTs(U,i.samplerate)),U}},"prefixWithSilence"),trimAdtsFramesByEarliestDts:/* @__PURE__ */__name(function(i,a,s){return a.minSegmentDts>=s?i:(a.minSegmentDts=1/0,i.filter(function(i){return i.dts>=s&&(a.minSegmentDts=Math.min(a.minSegmentDts,i.dts),a.minSegmentPts=a.minSegmentDts,!0)}))},"trimAdtsFramesByEarliestDts"),generateSampleTable:/* @__PURE__ */__name(function(i){var a,s,o=[];for(a=0;a<i.length;a++)s=i[a],o.push({size:s.data.byteLength,duration:1024});return o},"generateSampleTable"),concatenateFrameData:/* @__PURE__ */__name(function(i){var a,s,o=0,u=new Uint8Array(Mt(i));for(a=0;a<i.length;a++)s=i[a],u.set(s.data,o),o+=s.data.byteLength;return u},"concatenateFrameData")},Pt=At.ONE_SECOND_IN_TS,It=/* @__PURE__ */__name(function(i,a){"number"==typeof a.pts&&(void 0===i.timelineStartInfo.pts&&(i.timelineStartInfo.pts=a.pts),void 0===i.minSegmentPts?i.minSegmentPts=a.pts:i.minSegmentPts=Math.min(i.minSegmentPts,a.pts),void 0===i.maxSegmentPts?i.maxSegmentPts=a.pts:i.maxSegmentPts=Math.max(i.maxSegmentPts,a.pts)),"number"==typeof a.dts&&(void 0===i.timelineStartInfo.dts&&(i.timelineStartInfo.dts=a.dts),void 0===i.minSegmentDts?i.minSegmentDts=a.dts:i.minSegmentDts=Math.min(i.minSegmentDts,a.dts),void 0===i.maxSegmentDts?i.maxSegmentDts=a.dts:i.maxSegmentDts=Math.max(i.maxSegmentDts,a.dts))},"collectDtsInfo"),Lt={clearDtsInfo:/* @__PURE__ */__name(function(i){delete i.minSegmentDts,delete i.maxSegmentDts,delete i.minSegmentPts,delete i.maxSegmentPts},"clearDtsInfo"),calculateTrackBaseMediaDecodeTime:/* @__PURE__ */__name(function(i,a){var s,o=i.minSegmentDts;return a||(o-=i.timelineStartInfo.dts),s=i.timelineStartInfo.baseMediaDecodeTime,s+=o,s=Math.max(0,s),"audio"===i.type&&(s*=i.samplerate/Pt,s=Math.floor(s)),s},"calculateTrackBaseMediaDecodeTime"),collectDtsInfo:It},Dt={parseSei:/* @__PURE__ */__name(function(i){for(var a=0,s={payloadType:-1,payloadSize:0},o=0,u=0;a<i.byteLength&&128!==i[a];){for(;255===i[a];)o+=255,a++;for(o+=i[a++];255===i[a];)u+=255,a++;if(u+=i[a++],!s.payload&&4===o){if("GA94"===String.fromCharCode(i[a+3],i[a+4],i[a+5],i[a+6])){s.payloadType=o,s.payloadSize=u,s.payload=i.subarray(a,a+u);break}s.payload=void 0}a+=u,o=0,u=0}return s},"parseSei"),parseUserData:/* @__PURE__ */__name(function(i){return 181!==i.payload[0]||49!=(i.payload[1]<<8|i.payload[2])||"GA94"!==String.fromCharCode(i.payload[3],i.payload[4],i.payload[5],i.payload[6])||3!==i.payload[7]?null:i.payload.subarray(8,i.payload.length-1)},"parseUserData"),parseCaptionPackets:/* @__PURE__ */__name(function(i,a){var s,o,u,_,x=[];if(!(64&a[0]))return x;for(o=31&a[0],s=0;s<o;s++)_={type:3&a[(u=3*s)+2],pts:i},4&a[u+2]&&(_.ccData=a[u+3]<<8|a[u+4],x.push(_));return x},"parseCaptionPackets"),discardEmulationPreventionBytes:/* @__PURE__ */__name(function(i){for(var a,s,o=i.byteLength,u=[],_=1;_<o-2;)0===i[_]&&0===i[_+1]&&3===i[_+2]?(u.push(_+2),_+=2):_++;if(0===u.length)return i;a=o-u.length,s=new Uint8Array(a);var x=0;for(_=0;_<a;x++,_++)x===u[0]&&(x++,u.shift()),s[_]=i[x];return s},"discardEmulationPreventionBytes$1"),USER_DATA_REGISTERED_ITU_T_T35:4},Rt=et,Ot=Dt,Nt=/* @__PURE__ */__name(function(i){i=i||{},Nt.prototype.init.call(this),this.parse708captions_="boolean"!=typeof i.parse708captions||i.parse708captions,this.captionPackets_=[],this.ccStreams_=[new qt(0,0),new qt(0,1),new qt(1,0),new qt(1,1)],this.parse708captions_&&(this.cc708Stream_=new zt({captionServices:i.captionServices})),this.reset(),this.ccStreams_.forEach(function(i){i.on("data",this.trigger.bind(this,"data")),i.on("partialdone",this.trigger.bind(this,"partialdone")),i.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))},"CaptionStream$2");Nt.prototype=new Rt,Nt.prototype.push=function(i){var a,s,o;if("sei_rbsp"===i.nalUnitType&&(a=Ot.parseSei(i.escapedRBSP)).payload&&a.payloadType===Ot.USER_DATA_REGISTERED_ITU_T_T35&&(s=Ot.parseUserData(a)))if(i.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(i.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));o=Ot.parseCaptionPackets(i.pts,s),this.captionPackets_=this.captionPackets_.concat(o),this.latestDts_!==i.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=i.dts}},Nt.prototype.flushCCStreams=function(i){this.ccStreams_.forEach(function(a){return"flush"===i?a.flush():a.partialFlush()},this)},Nt.prototype.flushStream=function(i){this.captionPackets_.length?(this.captionPackets_.forEach(function(i,a){i.presortIndex=a}),this.captionPackets_.sort(function(i,a){return i.pts===a.pts?i.presortIndex-a.presortIndex:i.pts-a.pts}),this.captionPackets_.forEach(function(i){i.type<2?this.dispatchCea608Packet(i):this.dispatchCea708Packet(i)},this),this.captionPackets_.length=0,this.flushCCStreams(i)):this.flushCCStreams(i)},Nt.prototype.flush=function(){return this.flushStream("flush")},Nt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Nt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(i){i.reset()})},Nt.prototype.dispatchCea608Packet=function(i){this.setsTextOrXDSActive(i)?this.activeCea608Channel_[i.type]=null:this.setsChannel1Active(i)?this.activeCea608Channel_[i.type]=0:this.setsChannel2Active(i)&&(this.activeCea608Channel_[i.type]=1),null!==this.activeCea608Channel_[i.type]&&this.ccStreams_[(i.type<<1)+this.activeCea608Channel_[i.type]].push(i)},Nt.prototype.setsChannel1Active=function(i){return 4096==(30720&i.ccData)},Nt.prototype.setsChannel2Active=function(i){return 6144==(30720&i.ccData)},Nt.prototype.setsTextOrXDSActive=function(i){return 256==(28928&i.ccData)||4138==(30974&i.ccData)||6186==(30974&i.ccData)},Nt.prototype.dispatchCea708Packet=function(i){this.parse708captions_&&this.cc708Stream_.push(i)};var Bt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Ft=/* @__PURE__ */__name(function(i){var a=Bt[i]||i;return 4096&i&&i===a?"":String.fromCharCode(a)},"get708CharFromCode"),Ut=/* @__PURE__ */__name(function(i){return 32<=i&&i<=127||160<=i&&i<=255},"within708TextBlock"),jt=/* @__PURE__ */__name(function(i){this.windowNum=i,this.reset()},"Cea708Window");jt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},jt.prototype.getText=function(){return this.rows.join("\n")},jt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},jt.prototype.newLine=function(i){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(i),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},jt.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},jt.prototype.addText=function(i){this.rows[this.rowIdx]+=i},jt.prototype.backspace=function(){if(!this.isEmpty()){var i=this.rows[this.rowIdx];this.rows[this.rowIdx]=i.substr(0,i.length-1)}};var Vt=/* @__PURE__ */__name(function(i,a,s){this.serviceNum=i,this.text="",this.currentWindow=new jt(-1),this.windows=[],this.stream=s,"string"==typeof a&&this.createTextDecoder(a)},"Cea708Service");Vt.prototype.init=function(i,a){this.startPts=i;for(var s=0;s<8;s++)this.windows[s]=new jt(s),"function"==typeof a&&(this.windows[s].beforeRowOverflow=a)},Vt.prototype.setCurrentWindow=function(i){this.currentWindow=this.windows[i]},Vt.prototype.createTextDecoder=function(i){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(i)}catch(a){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+i+" encoding. "+a})}};var zt=/* @__PURE__ */__name(function(i){i=i||{},zt.prototype.init.call(this);var a,s=this,o=i.captionServices||{},u={};Object.keys(o).forEach(i=>{a=o[i],/^SERVICE/.test(i)&&(u[i]=a.encoding)}),this.serviceEncodings=u,this.current708Packet=null,this.services={},this.push=function(i){3===i.type?(s.new708Packet(),s.add708Bytes(i)):(null===s.current708Packet&&s.new708Packet(),s.add708Bytes(i))}},"Cea708Stream");zt.prototype=new Rt,zt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},zt.prototype.add708Bytes=function(i){var a=i.ccData,s=a>>>8,o=255&a;this.current708Packet.ptsVals.push(i.pts),this.current708Packet.data.push(s),this.current708Packet.data.push(o)},zt.prototype.push708Packet=function(){var i=this.current708Packet,a=i.data,s=null,o=null,u=0,_=a[u++];for(i.seq=_>>6,i.sizeCode=63&_;u<a.length;u++)o=31&(_=a[u++]),7===(s=_>>5)&&o>0&&(s=_=a[u++]),this.pushServiceBlock(s,u,o),o>0&&(u+=o-1)},zt.prototype.pushServiceBlock=function(i,a,s){var o,u=a,_=this.current708Packet.data,x=this.services[i];for(x||(x=this.initService(i,u));u<a+s&&u<_.length;u++)o=_[u],Ut(o)?u=this.handleText(u,x):24===o?u=this.multiByteCharacter(u,x):16===o?u=this.extendedCommands(u,x):128<=o&&o<=135?u=this.setCurrentWindow(u,x):152<=o&&o<=159?u=this.defineWindow(u,x):136===o?u=this.clearWindows(u,x):140===o?u=this.deleteWindows(u,x):137===o?u=this.displayWindows(u,x):138===o?u=this.hideWindows(u,x):139===o?u=this.toggleWindows(u,x):151===o?u=this.setWindowAttributes(u,x):144===o?u=this.setPenAttributes(u,x):145===o?u=this.setPenColor(u,x):146===o?u=this.setPenLocation(u,x):143===o?x=this.reset(u,x):8===o?x.currentWindow.backspace():12===o?x.currentWindow.clearText():13===o?x.currentWindow.pendingNewLine=!0:14===o?x.currentWindow.clearText():141===o&&u++},zt.prototype.extendedCommands=function(i,a){var s=this.current708Packet.data[++i];return Ut(s)&&(i=this.handleText(i,a,{isExtended:!0})),i},zt.prototype.getPts=function(i){return this.current708Packet.ptsVals[Math.floor(i/2)]},zt.prototype.initService=function(i,a){var s,o,u=this;return(s="SERVICE"+i)in this.serviceEncodings&&(o=this.serviceEncodings[s]),this.services[i]=new Vt(i,o,u),this.services[i].init(this.getPts(a),function(a){u.flushDisplayed(a,u.services[i])}),this.services[i]},zt.prototype.handleText=function(i,a,s){var o,u,_=s&&s.isExtended,x=s&&s.isMultiByte,w=this.current708Packet.data,C=_?4096:0,L=w[i],B=w[i+1],U=a.currentWindow;function toHexString2(i){return i.map(i=>("0"+(255&i).toString(16)).slice(-2)).join("")}if(__name(toHexString2,"toHexString"),x?(u=[L,B],i++):u=[L],a.textDecoder_&&!_)o=a.textDecoder_.decode(new Uint8Array(u));else if(x){const i=toHexString2(u);o=String.fromCharCode(parseInt(i,16))}else o=Ft(C|L);return U.pendingNewLine&&!U.isEmpty()&&U.newLine(this.getPts(i)),U.pendingNewLine=!1,U.addText(o),i},zt.prototype.multiByteCharacter=function(i,a){var s=this.current708Packet.data,o=s[i+1],u=s[i+2];return Ut(o)&&Ut(u)&&(i=this.handleText(++i,a,{isMultiByte:!0})),i},zt.prototype.setCurrentWindow=function(i,a){var s=7&this.current708Packet.data[i];return a.setCurrentWindow(s),i},zt.prototype.defineWindow=function(i,a){var s=this.current708Packet.data,o=s[i],u=7&o;a.setCurrentWindow(u);var _=a.currentWindow;return o=s[++i],_.visible=(32&o)>>5,_.rowLock=(16&o)>>4,_.columnLock=(8&o)>>3,_.priority=7&o,o=s[++i],_.relativePositioning=(128&o)>>7,_.anchorVertical=127&o,o=s[++i],_.anchorHorizontal=o,o=s[++i],_.anchorPoint=(240&o)>>4,_.rowCount=15&o,o=s[++i],_.columnCount=63&o,o=s[++i],_.windowStyle=(56&o)>>3,_.penStyle=7&o,_.virtualRowCount=_.rowCount+1,i},zt.prototype.setWindowAttributes=function(i,a){var s=this.current708Packet.data,o=s[i],u=a.currentWindow.winAttr;return o=s[++i],u.fillOpacity=(192&o)>>6,u.fillRed=(48&o)>>4,u.fillGreen=(12&o)>>2,u.fillBlue=3&o,o=s[++i],u.borderType=(192&o)>>6,u.borderRed=(48&o)>>4,u.borderGreen=(12&o)>>2,u.borderBlue=3&o,o=s[++i],u.borderType+=(128&o)>>5,u.wordWrap=(64&o)>>6,u.printDirection=(48&o)>>4,u.scrollDirection=(12&o)>>2,u.justify=3&o,o=s[++i],u.effectSpeed=(240&o)>>4,u.effectDirection=(12&o)>>2,u.displayEffect=3&o,i},zt.prototype.flushDisplayed=function(i,a){for(var s=[],o=0;o<8;o++)a.windows[o].visible&&!a.windows[o].isEmpty()&&s.push(a.windows[o].getText());a.endPts=i,a.text=s.join("\n\n"),this.pushCaption(a),a.startPts=i},zt.prototype.pushCaption=function(i){""!==i.text&&(this.trigger("data",{startPts:i.startPts,endPts:i.endPts,text:i.text,stream:"cc708_"+i.serviceNum}),i.text="",i.startPts=i.endPts)},zt.prototype.displayWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&(a.windows[u].visible=1);return i},zt.prototype.hideWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&(a.windows[u].visible=0);return i},zt.prototype.toggleWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&(a.windows[u].visible^=1);return i},zt.prototype.clearWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&a.windows[u].clearText();return i},zt.prototype.deleteWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&a.windows[u].reset();return i},zt.prototype.setPenAttributes=function(i,a){var s=this.current708Packet.data,o=s[i],u=a.currentWindow.penAttr;return o=s[++i],u.textTag=(240&o)>>4,u.offset=(12&o)>>2,u.penSize=3&o,o=s[++i],u.italics=(128&o)>>7,u.underline=(64&o)>>6,u.edgeType=(56&o)>>3,u.fontStyle=7&o,i},zt.prototype.setPenColor=function(i,a){var s=this.current708Packet.data,o=s[i],u=a.currentWindow.penColor;return o=s[++i],u.fgOpacity=(192&o)>>6,u.fgRed=(48&o)>>4,u.fgGreen=(12&o)>>2,u.fgBlue=3&o,o=s[++i],u.bgOpacity=(192&o)>>6,u.bgRed=(48&o)>>4,u.bgGreen=(12&o)>>2,u.bgBlue=3&o,o=s[++i],u.edgeRed=(48&o)>>4,u.edgeGreen=(12&o)>>2,u.edgeBlue=3&o,i},zt.prototype.setPenLocation=function(i,a){var s=this.current708Packet.data,o=s[i],u=a.currentWindow.penLoc;return a.currentWindow.pendingNewLine=!0,o=s[++i],u.row=15&o,o=s[++i],u.column=63&o,i},zt.prototype.reset=function(i,a){var s=this.getPts(i);return this.flushDisplayed(s,a),this.initService(a.serviceNum,i)};var Ht={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},$t=/* @__PURE__ */__name(function(i){return null===i?"":(i=Ht[i]||i,String.fromCharCode(i))},"getCharFromCode"),Gt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Wt=/* @__PURE__ */__name(function(){for(var i=[],a=15;a--;)i.push({text:"",indent:0,offset:0});return i},"createDisplayBuffer"),qt=/* @__PURE__ */__name(function(i,a){qt.prototype.init.call(this),this.field_=i||0,this.dataChannel_=a||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(i){var a,s,o,u,_;if((a=32639&i.ccData)!==this.lastControlCode_){if(4096==(61440&a)?this.lastControlCode_=a:a!==this.PADDING_&&(this.lastControlCode_=null),o=a>>>8,u=255&a,a!==this.PADDING_)if(a===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(a===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(i.pts),this.flushDisplayed(i.pts),s=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=s,this.startPts_=i.pts;else if(a===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(i.pts);else if(a===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(i.pts);else if(a===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(i.pts);else if(a===this.CARRIAGE_RETURN_)this.clearFormatting(i.pts),this.flushDisplayed(i.pts),this.shiftRowsUp_(),this.startPts_=i.pts;else if(a===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(a===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(i.pts),this.displayed_=Wt();else if(a===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Wt();else if(a===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(i.pts),this.displayed_=Wt()),this.mode_="paintOn",this.startPts_=i.pts;else if(this.isSpecialCharacter(o,u))_=$t((o=(3&o)<<8)|u),this[this.mode_](i.pts,_),this.column_++;else if(this.isExtCharacter(o,u))"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),_=$t((o=(3&o)<<8)|u),this[this.mode_](i.pts,_),this.column_++;else if(this.isMidRowCode(o,u))this.clearFormatting(i.pts),this[this.mode_](i.pts," "),this.column_++,14&~u||this.addFormatting(i.pts,["i"]),1&~u||this.addFormatting(i.pts,["u"]);else if(this.isOffsetControlCode(o,u)){const i=3&u;this.nonDisplayed_[this.row_].offset=i,this.column_+=i}else if(this.isPAC(o,u)){var x=Gt.indexOf(7968&a);if("rollUp"===this.mode_&&(x-this.rollUpRows_+1<0&&(x=this.rollUpRows_-1),this.setRollUp(i.pts,x)),x!==this.row_&&x>=0&&x<=14&&(this.clearFormatting(i.pts),this.row_=x),1&u&&-1===this.formatting_.indexOf("u")&&this.addFormatting(i.pts,["u"]),!(16&~a)){const i=(14&a)>>1;this.column_=4*i,this.nonDisplayed_[this.row_].indent+=i}this.isColorPAC(u)&&(14&~u||this.addFormatting(i.pts,["i"]))}else this.isNormalChar(o)&&(0===u&&(u=null),_=$t(o),_+=$t(u),this[this.mode_](i.pts,_),this.column_+=_.length)}else this.lastControlCode_=null}},"Cea608Stream");qt.prototype=new Rt,qt.prototype.flushDisplayed=function(i){const a=/* @__PURE__ */__name(i=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+i+"."})},"logWarning"),s=[];this.displayed_.forEach((i,o)=>{if(i&&i.text&&i.text.length){try{i.text=i.text.trim()}catch(u){a(o)}i.text.length&&s.push({text:i.text,line:o+1,position:10+Math.min(70,10*i.indent)+2.5*i.offset})}else null==i&&a(o)}),s.length&&this.trigger("data",{startPts:this.startPts_,endPts:i,content:s,stream:this.name_})},qt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Wt(),this.nonDisplayed_=Wt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},qt.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},qt.prototype.isSpecialCharacter=function(i,a){return i===this.EXT_&&a>=48&&a<=63},qt.prototype.isExtCharacter=function(i,a){return(i===this.EXT_+1||i===this.EXT_+2)&&a>=32&&a<=63},qt.prototype.isMidRowCode=function(i,a){return i===this.EXT_&&a>=32&&a<=47},qt.prototype.isOffsetControlCode=function(i,a){return i===this.OFFSET_&&a>=33&&a<=35},qt.prototype.isPAC=function(i,a){return i>=this.BASE_&&i<this.BASE_+8&&a>=64&&a<=127},qt.prototype.isColorPAC=function(i){return i>=64&&i<=79||i>=96&&i<=127},qt.prototype.isNormalChar=function(i){return i>=32&&i<=127},qt.prototype.setRollUp=function(i,a){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(i),this.nonDisplayed_=Wt(),this.displayed_=Wt()),void 0!==a&&a!==this.row_)for(var s=0;s<this.rollUpRows_;s++)this.displayed_[a-s]=this.displayed_[this.row_-s],this.displayed_[this.row_-s]={text:"",indent:0,offset:0};void 0===a&&(a=this.row_),this.topRow_=a-this.rollUpRows_+1},qt.prototype.addFormatting=function(i,a){this.formatting_=this.formatting_.concat(a);var s=a.reduce(function(i,a){return i+"<"+a+">"},"");this[this.mode_](i,s)},qt.prototype.clearFormatting=function(i){if(this.formatting_.length){var a=this.formatting_.reverse().reduce(function(i,a){return i+"</"+a+">"},"");this.formatting_=[],this[this.mode_](i,a)}},qt.prototype.popOn=function(i,a){var s=this.nonDisplayed_[this.row_].text;s+=a,this.nonDisplayed_[this.row_].text=s},qt.prototype.rollUp=function(i,a){var s=this.displayed_[this.row_].text;s+=a,this.displayed_[this.row_].text=s},qt.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++)this.displayed_[i]={text:"",indent:0,offset:0};for(i=this.row_+1;i<15;i++)this.displayed_[i]={text:"",indent:0,offset:0};for(i=this.topRow_;i<this.row_;i++)this.displayed_[i]=this.displayed_[i+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},qt.prototype.paintOn=function(i,a){var s=this.displayed_[this.row_].text;s+=a,this.displayed_[this.row_].text=s};var Xt={CaptionStream:Nt,Cea608Stream:qt,Cea708Stream:zt},Qt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Kt=et,Yt="shared",Jt=/* @__PURE__ */__name(function(i,a){var s=1;for(i>a&&(s=-1);Math.abs(a-i)>4294967296;)i+=8589934592*s;return i},"handleRollover$1"),Zt=/* @__PURE__ */__name(function(i){var a,s;Zt.prototype.init.call(this),this.type_=i||Yt,this.push=function(i){"metadata"!==i.type?this.type_!==Yt&&i.type!==this.type_||(void 0===s&&(s=i.dts),i.dts=Jt(i.dts,s),i.pts=Jt(i.pts,s),a=i.dts,this.trigger("data",i)):this.trigger("data",i)},this.flush=function(){s=a,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){s=void 0,a=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}},"TimestampRolloverStream$1");Zt.prototype=new Kt;var en,tn={TimestampRolloverStream:Zt,handleRollover:Jt},nn={typedArrayIndexOf:/* @__PURE__ */__name((i,a,s)=>{if(!i)return-1;for(var o=s;o<i.length;o++)if(i[o]===a)return o;return-1},"typedArrayIndexOf$1")}.typedArrayIndexOf,rn=3,an=/* @__PURE__ */__name(function(i,a,s){var o,u="";for(o=a;o<s;o++)u+="%"+("00"+i[o].toString(16)).slice(-2);return u},"percentEncode$1"),sn=/* @__PURE__ */__name(function(i,a,s){return decodeURIComponent(an(i,a,s))},"parseUtf8"),ln=/* @__PURE__ */__name(function(i,a,s){return unescape(an(i,a,s))},"parseIso88591$1"),cn=/* @__PURE__ */__name(function(i){return i[0]<<21|i[1]<<14|i[2]<<7|i[3]},"parseSyncSafeInteger$1"),un={APIC:/* @__PURE__ */__name(function(i){var a,s,o=1;i.data[0]===rn&&((a=nn(i.data,0,o))<0||(i.mimeType=ln(i.data,o,a),o=a+1,i.pictureType=i.data[o],o++,(s=nn(i.data,0,o))<0||(i.description=sn(i.data,o,s),o=s+1,"--\x3e"===i.mimeType?i.url=ln(i.data,o,i.data.length):i.pictureData=i.data.subarray(o,i.data.length))))},"APIC"),"T*":/* @__PURE__ */__name(function(i){i.data[0]===rn&&(i.value=sn(i.data,1,i.data.length).replace(/\0*$/,""),i.values=i.value.split("\0"))},"T*"),TXXX:/* @__PURE__ */__name(function(i){var a;i.data[0]===rn&&-1!==(a=nn(i.data,0,1))&&(i.description=sn(i.data,1,a),i.value=sn(i.data,a+1,i.data.length).replace(/\0*$/,""),i.data=i.value)},"TXXX"),"W*":/* @__PURE__ */__name(function(i){i.url=ln(i.data,0,i.data.length).replace(/\0.*$/,"")},"W*"),WXXX:/* @__PURE__ */__name(function(i){var a;i.data[0]===rn&&-1!==(a=nn(i.data,0,1))&&(i.description=sn(i.data,1,a),i.url=ln(i.data,a+1,i.data.length).replace(/\0.*$/,""))},"WXXX"),PRIV:/* @__PURE__ */__name(function(i){var a;for(a=0;a<i.data.length;a++)if(0===i.data[a]){i.owner=ln(i.data,0,a);break}i.privateData=i.data.subarray(a+1),i.data=i.privateData},"PRIV")},dn={parseId3Frames:/* @__PURE__ */__name(function(i){var a,s=10,o=0,u=[];if(!(i.length<10||i[0]!=="I".charCodeAt(0)||i[1]!=="D".charCodeAt(0)||i[2]!=="3".charCodeAt(0))){o=cn(i.subarray(6,10)),o+=10,64&i[5]&&(s+=4,s+=cn(i.subarray(10,14)),o-=cn(i.subarray(16,20)));do{if((a=cn(i.subarray(s+4,s+8)))<1)break;var _={id:String.fromCharCode(i[s],i[s+1],i[s+2],i[s+3]),data:i.subarray(s+10,s+a+10)};_.key=_.id,un[_.id]?un[_.id](_):"T"===_.id[0]?un["T*"](_):"W"===_.id[0]&&un["W*"](_),u.push(_),s+=10,s+=a}while(s<o);return u}},"parseId3Frames$1"),parseSyncSafeInteger:cn,frameParsers:un},hn=et,pn=Qt,mn=dn;(en=/* @__PURE__ */__name(function(i){var a,s={descriptor:i&&i.descriptor},o=0,u=[],_=0;if(en.prototype.init.call(this),this.dispatchType=pn.METADATA_STREAM_TYPE.toString(16),s.descriptor)for(a=0;a<s.descriptor.length;a++)this.dispatchType+=("00"+s.descriptor[a].toString(16)).slice(-2);this.push=function(i){var a,s,x,w,C;if("timed-metadata"===i.type)if(i.dataAlignmentIndicator&&(_=0,u.length=0),0===u.length&&(i.data.length<10||i.data[0]!=="I".charCodeAt(0)||i.data[1]!=="D".charCodeAt(0)||i.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(u.push(i),_+=i.data.byteLength,1===u.length&&(o=mn.parseSyncSafeInteger(i.data.subarray(6,10)),o+=10),!(_<o)){for(a={data:new Uint8Array(o),frames:[],pts:u[0].pts,dts:u[0].dts},C=0;C<o;)a.data.set(u[0].data.subarray(0,o-C),C),C+=u[0].data.byteLength,_-=u[0].data.byteLength,u.shift();s=10,64&a.data[5]&&(s+=4,s+=mn.parseSyncSafeInteger(a.data.subarray(10,14)),o-=mn.parseSyncSafeInteger(a.data.subarray(16,20)));do{if((x=mn.parseSyncSafeInteger(a.data.subarray(s+4,s+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((w={id:String.fromCharCode(a.data[s],a.data[s+1],a.data[s+2],a.data[s+3]),data:a.data.subarray(s+10,s+x+10)}).key=w.id,mn.frameParsers[w.id]?mn.frameParsers[w.id](w):"T"===w.id[0]?mn.frameParsers["T*"](w):"W"===w.id[0]&&mn.frameParsers["W*"](w),"com.apple.streaming.transportStreamTimestamp"===w.owner){var L=w.data,B=(1&L[3])<<30|L[4]<<22|L[5]<<14|L[6]<<6|L[7]>>>2;B*=4,B+=3&L[7],w.timeStamp=B,void 0===a.pts&&void 0===a.dts&&(a.pts=w.timeStamp,a.dts=w.timeStamp),this.trigger("timestamp",w)}a.frames.push(w),s+=10,s+=x}while(s<o);this.trigger("data",a)}}},"MetadataStream")).prototype=new hn;var fn,gn,_n,yn=en,vn=et,bn=Xt,Tn=Qt,Sn=tn.TimestampRolloverStream,xn=188;(fn=/* @__PURE__ */__name(function(){var i=new Uint8Array(xn),a=0;fn.prototype.init.call(this),this.push=function(s){var o,u=0,_=xn;for(a?((o=new Uint8Array(s.byteLength+a)).set(i.subarray(0,a)),o.set(s,a),a=0):o=s;_<o.byteLength;)71!==o[u]||71!==o[_]?(u++,_++):(this.trigger("data",o.subarray(u,_)),u+=xn,_+=xn);u<o.byteLength&&(i.set(o.subarray(u),0),a=o.byteLength-u)},this.flush=function(){a===xn&&71===i[0]&&(this.trigger("data",i),a=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){a=0,this.trigger("reset")}},"TransportPacketStream")).prototype=new vn,(gn=/* @__PURE__ */__name(function(){var i,a,s,o;gn.prototype.init.call(this),o=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,i=/* @__PURE__ */__name(function(i,o){var u=0;o.payloadUnitStartIndicator&&(u+=i[u]+1),"pat"===o.type?a(i.subarray(u),o):s(i.subarray(u),o)},"parsePsi"),a=/* @__PURE__ */__name(function(i,a){a.section_number=i[7],a.last_section_number=i[8],o.pmtPid=(31&i[10])<<8|i[11],a.pmtPid=o.pmtPid},"parsePat"),s=/* @__PURE__ */__name(function(i,a){var s,u;if(1&i[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},s=3+((15&i[1])<<8|i[2])-4,u=12+((15&i[10])<<8|i[11]);u<s;){var _=i[u],x=(31&i[u+1])<<8|i[u+2];_===Tn.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=x:_===Tn.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=x:_===Tn.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][x]=_),u+=5+((15&i[u+3])<<8|i[u+4])}a.programMapTable=o.programMapTable}},"parsePmt"),this.push=function(a){var s={},o=4;if(s.payloadUnitStartIndicator=!!(64&a[1]),s.pid=31&a[1],s.pid<<=8,s.pid|=a[2],(48&a[3])>>>4>1&&(o+=a[o]+1),0===s.pid)s.type="pat",i(a.subarray(o),s),this.trigger("data",s);else if(s.pid===this.pmtPid)for(s.type="pmt",i(a.subarray(o),s),this.trigger("data",s);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,o,s]):this.processPes_(a,o,s)},this.processPes_=function(i,a,s){s.pid===this.programMapTable.video?s.streamType=Tn.H264_STREAM_TYPE:s.pid===this.programMapTable.audio?s.streamType=Tn.ADTS_STREAM_TYPE:s.streamType=this.programMapTable["timed-metadata"][s.pid],s.type="pes",s.data=i.subarray(a),this.trigger("data",s)}},"TransportParseStream")).prototype=new vn,gn.STREAM_TYPES={h264:27,adts:15},(_n=/* @__PURE__ */__name(function(){var i,a=this,s=!1,o={data:[],size:0},u={data:[],size:0},_={data:[],size:0},x=/* @__PURE__ */__name(function(i,a){var s;const o=i[0]<<16|i[1]<<8|i[2];a.data=new Uint8Array,1===o&&(a.packetLength=6+(i[4]<<8|i[5]),a.dataAlignmentIndicator=!!(4&i[6]),192&(s=i[7])&&(a.pts=(14&i[9])<<27|(255&i[10])<<20|(254&i[11])<<12|(255&i[12])<<5|(254&i[13])>>>3,a.pts*=4,a.pts+=(6&i[13])>>>1,a.dts=a.pts,64&s&&(a.dts=(14&i[14])<<27|(255&i[15])<<20|(254&i[16])<<12|(255&i[17])<<5|(254&i[18])>>>3,a.dts*=4,a.dts+=(6&i[18])>>>1)),a.data=i.subarray(9+i[8]))},"parsePes"),w=/* @__PURE__ */__name(function(i,s,o){var u,_,w=new Uint8Array(i.size),C={type:s},L=0,B=0;if(i.data.length&&!(i.size<9)){for(C.trackId=i.data[0].pid,L=0;L<i.data.length;L++)_=i.data[L],w.set(_.data,B),B+=_.data.byteLength;x(w,C),u="video"===s||C.packetLength<=i.size,(o||u)&&(i.size=0,i.data.length=0),u&&a.trigger("data",C)}},"flushStream");_n.prototype.init.call(this),this.push=function(x){({pat:/* @__PURE__ */__name(function(){},"pat"),pes:/* @__PURE__ */__name(function(){var i,a;switch(x.streamType){case Tn.H264_STREAM_TYPE:i=o,a="video";break;case Tn.ADTS_STREAM_TYPE:i=u,a="audio";break;case Tn.METADATA_STREAM_TYPE:i=_,a="timed-metadata";break;default:return}x.payloadUnitStartIndicator&&w(i,a,!0),i.data.push(x),i.size+=x.data.byteLength},"pes"),pmt:/* @__PURE__ */__name(function(){var o={type:"metadata",tracks:[]};null!==(i=x.programMapTable).video&&o.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&o.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),s=!0,a.trigger("data",o)},"pmt")})[x.type]()},this.reset=function(){o.size=0,o.data.length=0,u.size=0,u.data.length=0,this.trigger("reset")},this.flushStreams_=function(){w(o,"video"),w(u,"audio"),w(_,"timed-metadata")},this.flush=function(){if(!s&&i){var o={type:"metadata",tracks:[]};null!==i.video&&o.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&o.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),a.trigger("data",o)}s=!1,this.flushStreams_(),this.trigger("done")}},"ElementaryStream")).prototype=new vn;var wn={PAT_PID:0,MP2T_PACKET_LENGTH:xn,TransportPacketStream:fn,TransportParseStream:gn,ElementaryStream:_n,TimestampRolloverStream:Sn,CaptionStream:bn.CaptionStream,Cea608Stream:bn.Cea608Stream,Cea708Stream:bn.Cea708Stream,MetadataStream:yn};for(var An in Tn)Tn.hasOwnProperty(An)&&(wn[An]=Tn[An]);var Cn,En=wn,Mn=et,kn=At.ONE_SECOND_IN_TS,Pn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Cn=/* @__PURE__ */__name(function(i){var a,s=0;Cn.prototype.init.call(this),this.skipWarn_=function(i,a){this.trigger("log",{level:"warn",message:`adts skiping bytes ${i} to ${a} in frame ${s} outside syncword`})},this.push=function(o){var u,_,x,w,C,L=0;if(i||(s=0),"audio"===o.type){var B;for(a&&a.length?(x=a,(a=new Uint8Array(x.byteLength+o.data.byteLength)).set(x),a.set(o.data,x.byteLength)):a=o.data;L+7<a.length;)if(255===a[L]&&240==(246&a[L+1])){if("number"==typeof B&&(this.skipWarn_(B,L),B=null),_=2*(1&~a[L+1]),u=(3&a[L+3])<<11|a[L+4]<<3|(224&a[L+5])>>5,C=(w=1024*(1+(3&a[L+6])))*kn/Pn[(60&a[L+2])>>>2],a.byteLength-L<u)break;this.trigger("data",{pts:o.pts+s*C,dts:o.dts+s*C,sampleCount:w,audioobjecttype:1+(a[L+2]>>>6&3),channelcount:(1&a[L+2])<<2|(192&a[L+3])>>>6,samplerate:Pn[(60&a[L+2])>>>2],samplingfrequencyindex:(60&a[L+2])>>>2,samplesize:16,data:a.subarray(L+7+_,L+u)}),s++,L+=u}else"number"!=typeof B&&(B=L),L++;"number"==typeof B&&(this.skipWarn_(B,L),B=null),a=a.subarray(L)}},this.flush=function(){s=0,this.trigger("done")},this.reset=function(){a=void 0,this.trigger("reset")},this.endTimeline=function(){a=void 0,this.trigger("endedtimeline")}},"AdtsStream$1")).prototype=new Mn;var In,Ln,Dn,Rn=Cn,On=et,Nn=/* @__PURE__ */__name(function(i){var a=i.byteLength,s=0,o=0;this.length=function(){return 8*a},this.bitsAvailable=function(){return 8*a+o},this.loadWord=function(){var u=i.byteLength-a,_=new Uint8Array(4),x=Math.min(4,a);if(0===x)throw new Error("no bytes available");_.set(i.subarray(u,u+x)),s=new DataView(_.buffer).getUint32(0),o=8*x,a-=x},this.skipBits=function(i){var u;o>i?(s<<=i,o-=i):(i-=o,i-=8*(u=Math.floor(i/8)),a-=u,this.loadWord(),s<<=i,o-=i)},this.readBits=function(i){var u=Math.min(o,i),_=s>>>32-u;return(o-=u)>0?s<<=u:a>0&&this.loadWord(),(u=i-u)>0?_<<u|this.readBits(u):_},this.skipLeadingZeros=function(){var i;for(i=0;i<o;++i)if(s&2147483648>>>i)return s<<=i,o-=i,i;return this.loadWord(),i+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var i=this.skipLeadingZeros();return this.readBits(i+1)-1},this.readExpGolomb=function(){var i=this.readUnsignedExpGolomb();return 1&i?1+i>>>1:-1*(i>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},"ExpGolomb$1");(Ln=/* @__PURE__ */__name(function(){var i,a,s=0;Ln.prototype.init.call(this),this.push=function(o){var u;a?((u=new Uint8Array(a.byteLength+o.data.byteLength)).set(a),u.set(o.data,a.byteLength),a=u):a=o.data;for(var _=a.byteLength;s<_-3;s++)if(1===a[s+2]){i=s+5;break}for(;i<_;)switch(a[i]){case 0:if(0!==a[i-1]){i+=2;break}if(0!==a[i-2]){i++;break}s+3!==i-2&&this.trigger("data",a.subarray(s+3,i-2));do{i++}while(1!==a[i]&&i<_);s=i-2,i+=3;break;case 1:if(0!==a[i-1]||0!==a[i-2]){i+=3;break}this.trigger("data",a.subarray(s+3,i-2)),s=i-2,i+=3;break;default:i+=3}a=a.subarray(s),i-=s,s=0},this.reset=function(){a=null,s=0,this.trigger("reset")},this.flush=function(){a&&a.byteLength>3&&this.trigger("data",a.subarray(s+3)),a=null,s=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},"NalByteStream")).prototype=new On,Dn={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(In=/* @__PURE__ */__name(function(){var i,a,s,o,u,_,x,w=new Ln;In.prototype.init.call(this),i=this,this.push=function(i){"video"===i.type&&(a=i.trackId,s=i.pts,o=i.dts,w.push(i))},w.on("data",function(x){var w={trackId:a,pts:s,dts:o,data:x,nalUnitTypeCode:31&x[0]};switch(w.nalUnitTypeCode){case 5:w.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:w.nalUnitType="sei_rbsp",w.escapedRBSP=u(x.subarray(1));break;case 7:w.nalUnitType="seq_parameter_set_rbsp",w.escapedRBSP=u(x.subarray(1)),w.config=_(w.escapedRBSP);break;case 8:w.nalUnitType="pic_parameter_set_rbsp";break;case 9:w.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",w)}),w.on("done",function(){i.trigger("done")}),w.on("partialdone",function(){i.trigger("partialdone")}),w.on("reset",function(){i.trigger("reset")}),w.on("endedtimeline",function(){i.trigger("endedtimeline")}),this.flush=function(){w.flush()},this.partialFlush=function(){w.partialFlush()},this.reset=function(){w.reset()},this.endTimeline=function(){w.endTimeline()},x=/* @__PURE__ */__name(function(i,a){var s,o=8,u=8;for(s=0;s<i;s++)0!==u&&(u=(o+a.readExpGolomb()+256)%256),o=0===u?o:u},"skipScalingList"),u=/* @__PURE__ */__name(function(i){for(var a,s,o=i.byteLength,u=[],_=1;_<o-2;)0===i[_]&&0===i[_+1]&&3===i[_+2]?(u.push(_+2),_+=2):_++;if(0===u.length)return i;a=o-u.length,s=new Uint8Array(a);var x=0;for(_=0;_<a;x++,_++)x===u[0]&&(x++,u.shift()),s[_]=i[x];return s},"discardEmulationPreventionBytes"),_=/* @__PURE__ */__name(function(i){var a,s,o,u,_,w,C,L,B,U,j,V,z=0,$=0,Y=0,Z=0,ee=[1,1];if(s=(a=new Nn(i)).readUnsignedByte(),u=a.readUnsignedByte(),o=a.readUnsignedByte(),a.skipUnsignedExpGolomb(),Dn[s]&&(3===(_=a.readUnsignedExpGolomb())&&a.skipBits(1),a.skipUnsignedExpGolomb(),a.skipUnsignedExpGolomb(),a.skipBits(1),a.readBoolean()))for(j=3!==_?8:12,V=0;V<j;V++)a.readBoolean()&&x(V<6?16:64,a);if(a.skipUnsignedExpGolomb(),0===(w=a.readUnsignedExpGolomb()))a.readUnsignedExpGolomb();else if(1===w)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),C=a.readUnsignedExpGolomb(),V=0;V<C;V++)a.skipExpGolomb();if(a.skipUnsignedExpGolomb(),a.skipBits(1),L=a.readUnsignedExpGolomb(),B=a.readUnsignedExpGolomb(),0===(U=a.readBits(1))&&a.skipBits(1),a.skipBits(1),a.readBoolean()&&(z=a.readUnsignedExpGolomb(),$=a.readUnsignedExpGolomb(),Y=a.readUnsignedExpGolomb(),Z=a.readUnsignedExpGolomb()),a.readBoolean()&&a.readBoolean()){switch(a.readUnsignedByte()){case 1:ee=[1,1];break;case 2:ee=[12,11];break;case 3:ee=[10,11];break;case 4:ee=[16,11];break;case 5:ee=[40,33];break;case 6:ee=[24,11];break;case 7:ee=[20,11];break;case 8:ee=[32,11];break;case 9:ee=[80,33];break;case 10:ee=[18,11];break;case 11:ee=[15,11];break;case 12:ee=[64,33];break;case 13:ee=[160,99];break;case 14:ee=[4,3];break;case 15:ee=[3,2];break;case 16:ee=[2,1];break;case 255:ee=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}ee&&(ee[0],ee[1])}return{profileIdc:s,levelIdc:o,profileCompatibility:u,width:16*(L+1)-2*z-2*$,height:(2-U)*(B+1)*16-2*Y-2*Z,sarRatio:ee}},"readSequenceParameterSet")},"H264Stream$1")).prototype=new On;var Bn,Fn={H264Stream:In},Un=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],jn=/* @__PURE__ */__name(function(i,a){var s=i[a+6]<<21|i[a+7]<<14|i[a+8]<<7|i[a+9];return s=s>=0?s:0,(16&i[a+5])>>4?s+20:s+10},"parseId3TagSize"),Vn=/* @__PURE__ */__name(function(i,a){return i.length-a<10||i[a]!=="I".charCodeAt(0)||i[a+1]!=="D".charCodeAt(0)||i[a+2]!=="3".charCodeAt(0)?a:(a+=jn(i,a),Vn(i,a))},"getId3Offset"),zn=/* @__PURE__ */__name(function(i){var a=Vn(i,0);return i.length>=a+2&&!(255&~i[a])&&!(240&~i[a+1])&&16==(22&i[a+1])},"isLikelyAacData$1"),Hn=/* @__PURE__ */__name(function(i){return i[0]<<21|i[1]<<14|i[2]<<7|i[3]},"parseSyncSafeInteger"),$n=/* @__PURE__ */__name(function(i,a,s){var o,u="";for(o=a;o<s;o++)u+="%"+("00"+i[o].toString(16)).slice(-2);return u},"percentEncode"),Gn=/* @__PURE__ */__name(function(i,a,s){return unescape($n(i,a,s))},"parseIso88591"),Wn={isLikelyAacData:zn,parseId3TagSize:jn,parseAdtsSize:/* @__PURE__ */__name(function(i,a){var s=(224&i[a+5])>>5,o=i[a+4]<<3;return 6144&i[a+3]|o|s},"parseAdtsSize"),parseType:/* @__PURE__ */__name(function(i,a){return i[a]==="I".charCodeAt(0)&&i[a+1]==="D".charCodeAt(0)&&i[a+2]==="3".charCodeAt(0)?"timed-metadata":!0&i[a]&&!(240&~i[a+1])?"audio":null},"parseType$5"),parseSampleRate:/* @__PURE__ */__name(function(i){for(var a=0;a+5<i.length;){if(255===i[a]&&240==(246&i[a+1]))return Un[(60&i[a+2])>>>2];a++}return null},"parseSampleRate"),parseAacTimestamp:/* @__PURE__ */__name(function(i){var a,s,o;a=10,64&i[5]&&(a+=4,a+=Hn(i.subarray(10,14)));do{if((s=Hn(i.subarray(a+4,a+8)))<1)return null;if("PRIV"===String.fromCharCode(i[a],i[a+1],i[a+2],i[a+3])){o=i.subarray(a+10,a+s+10);for(var u=0;u<o.byteLength;u++)if(0===o[u]){if("com.apple.streaming.transportStreamTimestamp"===Gn(o,0,u)){var _=o.subarray(u+1),x=(1&_[3])<<30|_[4]<<22|_[5]<<14|_[6]<<6|_[7]>>>2;return x*=4,x+=3&_[7]}break}}a+=10,a+=s}while(a<i.byteLength);return null},"parseAacTimestamp")},qn=et,Xn=Wn;(Bn=/* @__PURE__ */__name(function(){var i=new Uint8Array,a=0;Bn.prototype.init.call(this),this.setTimestamp=function(i){a=i},this.push=function(s){var o,u,_,x,w=0,C=0;for(i.length?(x=i.length,(i=new Uint8Array(s.byteLength+x)).set(i.subarray(0,x)),i.set(s,x)):i=s;i.length-C>=3;)if(i[C]!=="I".charCodeAt(0)||i[C+1]!=="D".charCodeAt(0)||i[C+2]!=="3".charCodeAt(0))if(255&~i[C]||240&~i[C+1])C++;else{if(i.length-C<7)break;if(C+(w=Xn.parseAdtsSize(i,C))>i.length)break;_={type:"audio",data:i.subarray(C,C+w),pts:a,dts:a},this.trigger("data",_),C+=w}else{if(i.length-C<10)break;if(C+(w=Xn.parseId3TagSize(i,C))>i.length)break;u={type:"timed-metadata",data:i.subarray(C,C+w)},this.trigger("data",u),C+=w}o=i.length-C,i=o>0?i.subarray(C):new Uint8Array},this.reset=function(){i=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){i=new Uint8Array,this.trigger("endedtimeline")}},"AacStream$1")).prototype=new qn;var Qn,Kn,Yn,Jn,Zn=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],_i=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Ei=et,Mi=ht,Pi=yt,Ri=kt,Oi=Lt,Wi=En,er=At,tr=Rn,nr=Fn.H264Stream,ir=Bn,rr=Wn.isLikelyAacData,ar=At.ONE_SECOND_IN_TS,sr=Zn,or=_i,lr=/* @__PURE__ */__name(function(i,a){a.stream=i,this.trigger("log",a)},"retriggerForStream"),cr=/* @__PURE__ */__name(function(i,a){for(var s=Object.keys(a),o=0;o<s.length;o++){var u=s[o];"headOfPipeline"!==u&&a[u].on&&a[u].on("log",lr.bind(i,u))}},"addPipelineLogRetriggers"),ur=/* @__PURE__ */__name(function(i,a){var s;if(i.length!==a.length)return!1;for(s=0;s<i.length;s++)if(i[s]!==a[s])return!1;return!0},"arrayEquals"),dr=/* @__PURE__ */__name(function(i,a,s,o,u,_){return{start:{dts:i,pts:i+(s-a)},end:{dts:i+(o-a),pts:i+(u-s)},prependedContentDuration:_,baseMediaDecodeTime:i}},"generateSegmentTimingInfo");(Kn=/* @__PURE__ */__name(function(i,a){var s,o=[],u=0,_=0,x=1/0;s=(a=a||{}).firstSequenceNumber||0,Kn.prototype.init.call(this),this.push=function(a){Oi.collectDtsInfo(i,a),i&&sr.forEach(function(s){i[s]=a[s]}),o.push(a)},this.setEarliestDts=function(i){u=i},this.setVideoBaseMediaDecodeTime=function(i){x=i},this.setAudioAppendStart=function(i){_=i},this.flush=function(){var w,C,L,B,U,j,V;0!==o.length?(w=Ri.trimAdtsFramesByEarliestDts(o,i,u),i.baseMediaDecodeTime=Oi.calculateTrackBaseMediaDecodeTime(i,a.keepOriginalTimestamps),V=Ri.prefixWithSilence(i,w,_,x),i.samples=Ri.generateSampleTable(w),L=Mi.mdat(Ri.concatenateFrameData(w)),o=[],C=Mi.moof(s,[i]),B=new Uint8Array(C.byteLength+L.byteLength),s++,B.set(C),B.set(L,C.byteLength),Oi.clearDtsInfo(i),U=Math.ceil(1024*ar/i.samplerate),w.length&&(j=w.length*U,this.trigger("segmentTimingInfo",dr(er.audioTsToVideoTs(i.baseMediaDecodeTime,i.samplerate),w[0].dts,w[0].pts,w[0].dts+j,w[0].pts+j,V||0)),this.trigger("timingInfo",{start:w[0].pts,end:w[0].pts+j})),this.trigger("data",{track:i,boxes:B}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Oi.clearDtsInfo(i),o=[],this.trigger("reset")}},"AudioSegmentStream")).prototype=new Ei,(Qn=/* @__PURE__ */__name(function(i,a){var s,o,u,_=[],x=[];s=(a=a||{}).firstSequenceNumber||0,Qn.prototype.init.call(this),delete i.minPTS,this.gopCache_=[],this.push=function(a){Oi.collectDtsInfo(i,a),"seq_parameter_set_rbsp"!==a.nalUnitType||o||(o=a.config,i.sps=[a.data],or.forEach(function(a){i[a]=o[a]},this)),"pic_parameter_set_rbsp"!==a.nalUnitType||u||(u=a.data,i.pps=[a.data]),_.push(a)},this.flush=function(){for(var o,u,w,C,L,B,U,j,V=0;_.length&&"access_unit_delimiter_rbsp"!==_[0].nalUnitType;)_.shift();if(0===_.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(o=Pi.groupNalsIntoFrames(_),(w=Pi.groupFramesIntoGops(o))[0][0].keyFrame||((u=this.getGopForFusion_(_[0],i))?(V=u.duration,w.unshift(u),w.byteLength+=u.byteLength,w.nalCount+=u.nalCount,w.pts=u.pts,w.dts=u.dts,w.duration+=u.duration):w=Pi.extendFirstKeyFrame(w)),x.length){var z;if(!(z=a.alignGopsAtEnd?this.alignGopsAtEnd_(w):this.alignGopsAtStart_(w)))return this.gopCache_.unshift({gop:w.pop(),pps:i.pps,sps:i.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Oi.clearDtsInfo(i),w=z}Oi.collectDtsInfo(i,w),i.samples=Pi.generateSampleTable(w),L=Mi.mdat(Pi.concatenateNalData(w)),i.baseMediaDecodeTime=Oi.calculateTrackBaseMediaDecodeTime(i,a.keepOriginalTimestamps),this.trigger("processedGopsInfo",w.map(function(i){return{pts:i.pts,dts:i.dts,byteLength:i.byteLength}})),U=w[0],j=w[w.length-1],this.trigger("segmentTimingInfo",dr(i.baseMediaDecodeTime,U.dts,U.pts,j.dts+j.duration,j.pts+j.duration,V)),this.trigger("timingInfo",{start:w[0].pts,end:w[w.length-1].pts+w[w.length-1].duration}),this.gopCache_.unshift({gop:w.pop(),pps:i.pps,sps:i.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.trigger("baseMediaDecodeTime",i.baseMediaDecodeTime),this.trigger("timelineStartInfo",i.timelineStartInfo),C=Mi.moof(s,[i]),B=new Uint8Array(C.byteLength+L.byteLength),s++,B.set(C),B.set(L,C.byteLength),this.trigger("data",{track:i,boxes:B}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),_=[],this.gopCache_.length=0,x.length=0,this.trigger("reset")},this.resetStream_=function(){Oi.clearDtsInfo(i),o=void 0,u=void 0},this.getGopForFusion_=function(a){var s,o,u,_,x,w=1/0;for(x=0;x<this.gopCache_.length;x++)u=(_=this.gopCache_[x]).gop,i.pps&&ur(i.pps[0],_.pps[0])&&i.sps&&ur(i.sps[0],_.sps[0])&&(u.dts<i.timelineStartInfo.dts||(s=a.dts-u.dts-u.duration)>=-1e4&&s<=45e3&&(!o||w>s)&&(o=_,w=s));return o?o.gop:null},this.alignGopsAtStart_=function(i){var a,s,o,u,_,w,C,L;for(_=i.byteLength,w=i.nalCount,C=i.duration,a=s=0;a<x.length&&s<i.length&&(o=x[a],u=i[s],o.pts!==u.pts);)u.pts>o.pts?a++:(s++,_-=u.byteLength,w-=u.nalCount,C-=u.duration);return 0===s?i:s===i.length?null:((L=i.slice(s)).byteLength=_,L.duration=C,L.nalCount=w,L.pts=L[0].pts,L.dts=L[0].dts,L)},this.alignGopsAtEnd_=function(i){var a,s,o,u,_,w,C;for(a=x.length-1,s=i.length-1,_=null,w=!1;a>=0&&s>=0;){if(o=x[a],u=i[s],o.pts===u.pts){w=!0;break}o.pts>u.pts?a--:(a===x.length-1&&(_=s),s--)}if(!w&&null===_)return null;if(0===(C=w?s:_))return i;var L=i.slice(C),B=L.reduce(function(i,a){return i.byteLength+=a.byteLength,i.duration+=a.duration,i.nalCount+=a.nalCount,i},{byteLength:0,duration:0,nalCount:0});return L.byteLength=B.byteLength,L.duration=B.duration,L.nalCount=B.nalCount,L.pts=L[0].pts,L.dts=L[0].dts,L},this.alignGopsWith=function(i){x=i}},"VideoSegmentStream")).prototype=new Ei,(Jn=/* @__PURE__ */__name(function(i,a){this.numberOfTracks=0,this.metadataStream=a,void 0!==(i=i||{}).remux?this.remuxTracks=!!i.remux:this.remuxTracks=!0,"boolean"==typeof i.keepOriginalTimestamps?this.keepOriginalTimestamps=i.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Jn.prototype.init.call(this),this.push=function(i){return i.content||i.text?this.pendingCaptions.push(i):i.frames?this.pendingMetadata.push(i):(this.pendingTracks.push(i.track),this.pendingBytes+=i.boxes.byteLength,"video"===i.track.type&&(this.videoTrack=i.track,this.pendingBoxes.push(i.boxes)),void("audio"===i.track.type&&(this.audioTrack=i.track,this.pendingBoxes.unshift(i.boxes))))}},"CoalesceStream")).prototype=new Ei,Jn.prototype.flush=function(i){var a,s,o,u,_=0,x={captions:[],captionStreams:{},metadata:[],info:{}},w=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==i&&"AudioSegmentStream"!==i)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(w=this.videoTrack.timelineStartInfo.pts,or.forEach(function(i){x.info[i]=this.videoTrack[i]},this)):this.audioTrack&&(w=this.audioTrack.timelineStartInfo.pts,sr.forEach(function(i){x.info[i]=this.audioTrack[i]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?x.type=this.pendingTracks[0].type:x.type="combined",this.emittedTracks+=this.pendingTracks.length,o=Mi.initSegment(this.pendingTracks),x.initSegment=new Uint8Array(o.byteLength),x.initSegment.set(o),x.data=new Uint8Array(this.pendingBytes),u=0;u<this.pendingBoxes.length;u++)x.data.set(this.pendingBoxes[u],_),_+=this.pendingBoxes[u].byteLength;for(u=0;u<this.pendingCaptions.length;u++)(a=this.pendingCaptions[u]).startTime=er.metadataTsToSeconds(a.startPts,w,this.keepOriginalTimestamps),a.endTime=er.metadataTsToSeconds(a.endPts,w,this.keepOriginalTimestamps),x.captionStreams[a.stream]=!0,x.captions.push(a);for(u=0;u<this.pendingMetadata.length;u++)(s=this.pendingMetadata[u]).cueTime=er.metadataTsToSeconds(s.pts,w,this.keepOriginalTimestamps),x.metadata.push(s);for(x.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",x),u=0;u<x.captions.length;u++)a=x.captions[u],this.trigger("caption",a);for(u=0;u<x.metadata.length;u++)s=x.metadata[u],this.trigger("id3Frame",s)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Jn.prototype.setRemux=function(i){this.remuxTracks=i},(Yn=/* @__PURE__ */__name(function(i){var a,s,o=this,u=!0;Yn.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var u={};this.transmuxPipeline_=u,u.type="aac",u.metadataStream=new Wi.MetadataStream,u.aacStream=new ir,u.audioTimestampRolloverStream=new Wi.TimestampRolloverStream("audio"),u.timedMetadataTimestampRolloverStream=new Wi.TimestampRolloverStream("timed-metadata"),u.adtsStream=new tr,u.coalesceStream=new Jn(i,u.metadataStream),u.headOfPipeline=u.aacStream,u.aacStream.pipe(u.audioTimestampRolloverStream).pipe(u.adtsStream),u.aacStream.pipe(u.timedMetadataTimestampRolloverStream).pipe(u.metadataStream).pipe(u.coalesceStream),u.metadataStream.on("timestamp",function(i){u.aacStream.setTimestamp(i.timeStamp)}),u.aacStream.on("data",function(_){"timed-metadata"!==_.type&&"audio"!==_.type||u.audioSegmentStream||(s=s||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},u.coalesceStream.numberOfTracks++,u.audioSegmentStream=new Kn(s,i),u.audioSegmentStream.on("log",o.getLogTrigger_("audioSegmentStream")),u.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),u.adtsStream.pipe(u.audioSegmentStream).pipe(u.coalesceStream),o.trigger("trackinfo",{hasAudio:!!s,hasVideo:!!a}))}),u.coalesceStream.on("data",this.trigger.bind(this,"data")),u.coalesceStream.on("done",this.trigger.bind(this,"done")),cr(this,u)},this.setupTsPipeline=function(){var u={};this.transmuxPipeline_=u,u.type="ts",u.metadataStream=new Wi.MetadataStream,u.packetStream=new Wi.TransportPacketStream,u.parseStream=new Wi.TransportParseStream,u.elementaryStream=new Wi.ElementaryStream,u.timestampRolloverStream=new Wi.TimestampRolloverStream,u.adtsStream=new tr,u.h264Stream=new nr,u.captionStream=new Wi.CaptionStream(i),u.coalesceStream=new Jn(i,u.metadataStream),u.headOfPipeline=u.packetStream,u.packetStream.pipe(u.parseStream).pipe(u.elementaryStream).pipe(u.timestampRolloverStream),u.timestampRolloverStream.pipe(u.h264Stream),u.timestampRolloverStream.pipe(u.adtsStream),u.timestampRolloverStream.pipe(u.metadataStream).pipe(u.coalesceStream),u.h264Stream.pipe(u.captionStream).pipe(u.coalesceStream),u.elementaryStream.on("data",function(_){var x;if("metadata"===_.type){for(x=_.tracks.length;x--;)a||"video"!==_.tracks[x].type?s||"audio"!==_.tracks[x].type||((s=_.tracks[x]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(a=_.tracks[x]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;a&&!u.videoSegmentStream&&(u.coalesceStream.numberOfTracks++,u.videoSegmentStream=new Qn(a,i),u.videoSegmentStream.on("log",o.getLogTrigger_("videoSegmentStream")),u.videoSegmentStream.on("timelineStartInfo",function(a){s&&!i.keepOriginalTimestamps&&(s.timelineStartInfo=a,u.audioSegmentStream.setEarliestDts(a.dts-o.baseMediaDecodeTime))}),u.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),u.videoSegmentStream.on("segmentTimingInfo",o.trigger.bind(o,"videoSegmentTimingInfo")),u.videoSegmentStream.on("baseMediaDecodeTime",function(i){s&&u.audioSegmentStream.setVideoBaseMediaDecodeTime(i)}),u.videoSegmentStream.on("timingInfo",o.trigger.bind(o,"videoTimingInfo")),u.h264Stream.pipe(u.videoSegmentStream).pipe(u.coalesceStream)),s&&!u.audioSegmentStream&&(u.coalesceStream.numberOfTracks++,u.audioSegmentStream=new Kn(s,i),u.audioSegmentStream.on("log",o.getLogTrigger_("audioSegmentStream")),u.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),u.audioSegmentStream.on("segmentTimingInfo",o.trigger.bind(o,"audioSegmentTimingInfo")),u.adtsStream.pipe(u.audioSegmentStream).pipe(u.coalesceStream)),o.trigger("trackinfo",{hasAudio:!!s,hasVideo:!!a})}}),u.coalesceStream.on("data",this.trigger.bind(this,"data")),u.coalesceStream.on("id3Frame",function(i){i.dispatchType=u.metadataStream.dispatchType,o.trigger("id3Frame",i)}),u.coalesceStream.on("caption",this.trigger.bind(this,"caption")),u.coalesceStream.on("done",this.trigger.bind(this,"done")),cr(this,u)},this.setBaseMediaDecodeTime=function(o){var u=this.transmuxPipeline_;i.keepOriginalTimestamps||(this.baseMediaDecodeTime=o),s&&(s.timelineStartInfo.dts=void 0,s.timelineStartInfo.pts=void 0,Oi.clearDtsInfo(s),u.audioTimestampRolloverStream&&u.audioTimestampRolloverStream.discontinuity()),a&&(u.videoSegmentStream&&(u.videoSegmentStream.gopCache_=[]),a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,Oi.clearDtsInfo(a),u.captionStream.reset()),u.timestampRolloverStream&&u.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(i){s&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(i)},this.setRemux=function(a){var s=this.transmuxPipeline_;i.remux=a,s&&s.coalesceStream&&s.coalesceStream.setRemux(a)},this.alignGopsWith=function(i){a&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(i)},this.getLogTrigger_=function(i){var a=this;return function(s){s.stream=i,a.trigger("log",s)}},this.push=function(i){if(u){var a=rr(i);a&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():a||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),u=!1}this.transmuxPipeline_.headOfPipeline.push(i)},this.flush=function(){u=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},"Transmuxer")).prototype=new Ei;var hr,pr,mr,fr,gr,_r,yr,vr={Transmuxer:Yn},br={toUnsigned:/* @__PURE__ */__name(function(i){return i>>>0},"toUnsigned$3"),toHexString:/* @__PURE__ */__name(function(i){return("00"+i.toString(16)).slice(-2)},"toHexString$1")},Tr=/* @__PURE__ */__name(function(i){var a="";return a+=String.fromCharCode(i[0]),a+=String.fromCharCode(i[1]),a+=String.fromCharCode(i[2]),a+=String.fromCharCode(i[3])},"parseType$4"),Sr=br.toUnsigned,xr=Tr,wr=/* @__PURE__ */__name(function(i,a){var s,o,u,_,x,w=[];if(!a.length)return null;for(s=0;s<i.byteLength;)o=Sr(i[s]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3]),u=xr(i.subarray(s+4,s+8)),_=o>1?s+o:i.byteLength,u===a[0]&&(1===a.length?w.push(i.subarray(s+8,_)):(x=wr(i.subarray(s+8,_),a.slice(1))).length&&(w=w.concat(x))),s=_;return w},"findBox$5"),Ar=wr,Cr=br.toUnsigned,Er=nt.getUint64,Mr=/* @__PURE__ */__name(function(i){var a={version:i[0],flags:new Uint8Array(i.subarray(1,4))};return 1===a.version?a.baseMediaDecodeTime=Er(i.subarray(4)):a.baseMediaDecodeTime=Cr(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),a},"tfdt"),kr=/* @__PURE__ */__name(function(i){var a,s=new DataView(i.buffer,i.byteOffset,i.byteLength),o={version:i[0],flags:new Uint8Array(i.subarray(1,4)),trackId:s.getUint32(4)},u=1&o.flags[2],_=2&o.flags[2],x=8&o.flags[2],w=16&o.flags[2],C=32&o.flags[2],L=65536&o.flags[0],B=131072&o.flags[0];return a=8,u&&(a+=4,o.baseDataOffset=s.getUint32(12),a+=4),_&&(o.sampleDescriptionIndex=s.getUint32(a),a+=4),x&&(o.defaultSampleDuration=s.getUint32(a),a+=4),w&&(o.defaultSampleSize=s.getUint32(a),a+=4),C&&(o.defaultSampleFlags=s.getUint32(a)),L&&(o.durationIsEmpty=!0),!u&&B&&(o.baseDataOffsetIsMoof=!0),o},"tfhd"),Pr=/* @__PURE__ */__name(function(i){return{isLeading:(12&i[0])>>>2,dependsOn:3&i[0],isDependedOn:(192&i[1])>>>6,hasRedundancy:(48&i[1])>>>4,paddingValue:(14&i[1])>>>1,isNonSyncSample:1&i[1],degradationPriority:i[2]<<8|i[3]}},"parseSampleFlags$1"),Ir=/* @__PURE__ */__name(function(i){var a,s={version:i[0],flags:new Uint8Array(i.subarray(1,4)),samples:[]},o=new DataView(i.buffer,i.byteOffset,i.byteLength),u=1&s.flags[2],_=4&s.flags[2],x=1&s.flags[1],w=2&s.flags[1],C=4&s.flags[1],L=8&s.flags[1],B=o.getUint32(4),U=8;for(u&&(s.dataOffset=o.getInt32(U),U+=4),_&&B&&(a={flags:Pr(i.subarray(U,U+4))},U+=4,x&&(a.duration=o.getUint32(U),U+=4),w&&(a.size=o.getUint32(U),U+=4),L&&(1===s.version?a.compositionTimeOffset=o.getInt32(U):a.compositionTimeOffset=o.getUint32(U),U+=4),s.samples.push(a),B--);B--;)a={},x&&(a.duration=o.getUint32(U),U+=4),w&&(a.size=o.getUint32(U),U+=4),C&&(a.flags=Pr(i.subarray(U,U+4)),U+=4),L&&(1===s.version?a.compositionTimeOffset=o.getInt32(U):a.compositionTimeOffset=o.getUint32(U),U+=4),s.samples.push(a);return s},"trun"),Lr={tfdt:Mr,trun:Ir},Dr={parseTfdt:Lr.tfdt,parseTrun:Lr.trun},Rr={uint8ToCString:/* @__PURE__ */__name(function(i){for(var a=0,s=String.fromCharCode(i[a]),o="";"\0"!==s;)o+=s,a++,s=String.fromCharCode(i[a]);return o+=s},"uint8ToCString$1")}.uint8ToCString,Or=nt.getUint64,Nr=/* @__PURE__ */__name(function(i){var a,s,o,u,_,x,w,C=4,L=i[0];if(0===L)C+=(a=Rr(i.subarray(C))).length,C+=(s=Rr(i.subarray(C))).length,o=(B=new DataView(i.buffer)).getUint32(C),C+=4,_=B.getUint32(C),C+=4,x=B.getUint32(C),C+=4,w=B.getUint32(C),C+=4;else if(1===L){var B;o=(B=new DataView(i.buffer)).getUint32(C),C+=4,u=Or(i.subarray(C)),C+=8,x=B.getUint32(C),C+=4,w=B.getUint32(C),C+=4,C+=(a=Rr(i.subarray(C))).length,C+=(s=Rr(i.subarray(C))).length}var U={scheme_id_uri:a,value:s,timescale:o||1,presentation_time:u,presentation_time_delta:_,event_duration:x,id:w,message_data:new Uint8Array(i.subarray(C,i.byteLength))};return Fr(L,U)?U:void 0},"parseEmsgBox"),Br=/* @__PURE__ */__name(function(i,a,s,o){return i||0===i?i/a:o+s/a},"scaleTime"),Fr=/* @__PURE__ */__name(function(i,a){var s="\0"!==a.scheme_id_uri,o=0===i&&Ur(a.presentation_time_delta)&&s,u=1===i&&Ur(a.presentation_time)&&s;return!(i>1)&&o||u},"isValidEmsgBox"),Ur=/* @__PURE__ */__name(function(i){return void 0!==i||null!==i},"isDefined"),jr="undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:{},Vr=br.toUnsigned,zr=br.toHexString,Hr=Ar,$r=Tr,Gr={parseEmsgBox:Nr,scaleTime:Br},Wr=kr,qr=Ir,Xr=Mr,Qr=nt.getUint64,Kr=jr,Yr=dn.parseId3Frames;hr=/* @__PURE__ */__name(function(i){return Hr(i,["moov","trak"]).reduce(function(i,a){var s,o,u,_,x;return(s=Hr(a,["tkhd"])[0])?(o=s[0],_=Vr(s[u=0===o?12:20]<<24|s[u+1]<<16|s[u+2]<<8|s[u+3]),(x=Hr(a,["mdia","mdhd"])[0])?(u=0===(o=x[0])?12:20,i[_]=Vr(x[u]<<24|x[u+1]<<16|x[u+2]<<8|x[u+3]),i):null):null},{})},"timescale"),pr=/* @__PURE__ */__name(function(i,a){var s=Hr(a,["moof","traf"]).reduce(function(a,s){var o,u=Hr(s,["tfhd"])[0],_=Vr(u[4]<<24|u[5]<<16|u[6]<<8|u[7]),x=i[_]||9e4,w=Hr(s,["tfdt"])[0],C=new DataView(w.buffer,w.byteOffset,w.byteLength);let L;return"bigint"==typeof(o=1===w[0]?Qr(w.subarray(4,12)):C.getUint32(4))?L=o/Kr.BigInt(x):"number"!=typeof o||isNaN(o)||(L=o/x),L<Number.MAX_SAFE_INTEGER&&(L=Number(L)),L<a&&(a=L),a},1/0);return"bigint"==typeof s||isFinite(s)?s:0},"startTime"),mr=/* @__PURE__ */__name(function(i,a){var s,o=Hr(a,["moof","traf"]),u=0,_=0;if(o&&o.length){var x=Hr(o[0],["tfhd"])[0],w=Hr(o[0],["trun"])[0],C=Hr(o[0],["tfdt"])[0];if(x)s=Wr(x).trackId;if(C)u=Xr(C).baseMediaDecodeTime;if(w){var L=qr(w);L.samples&&L.samples.length&&(_=L.samples[0].compositionTimeOffset||0)}}var B=i[s]||9e4;"bigint"==typeof u&&(_=Kr.BigInt(_),B=Kr.BigInt(B));var U=(u+_)/B;return"bigint"==typeof U&&U<Number.MAX_SAFE_INTEGER&&(U=Number(U)),U},"compositionStartTime"),fr=/* @__PURE__ */__name(function(i){var a=Hr(i,["moov","trak"]),s=[];return a.forEach(function(i){var a=Hr(i,["mdia","hdlr"]),o=Hr(i,["tkhd"]);a.forEach(function(i,a){var u,_,x=$r(i.subarray(8,12)),w=o[a];"vide"===x&&(_=0===(u=new DataView(w.buffer,w.byteOffset,w.byteLength)).getUint8(0)?u.getUint32(12):u.getUint32(20),s.push(_))})}),s},"getVideoTrackIds"),_r=/* @__PURE__ */__name(function(i){var a=0===i[0]?12:20;return Vr(i[a]<<24|i[a+1]<<16|i[a+2]<<8|i[a+3])},"getTimescaleFromMediaHeader$1"),gr=/* @__PURE__ */__name(function(i){var a=Hr(i,["moov","trak"]),s=[];return a.forEach(function(i){var a,o,u={},_=Hr(i,["tkhd"])[0];_&&(o=(a=new DataView(_.buffer,_.byteOffset,_.byteLength)).getUint8(0),u.id=0===o?a.getUint32(12):a.getUint32(20));var x=Hr(i,["mdia","hdlr"])[0];if(x){var w=$r(x.subarray(8,12));u.type="vide"===w?"video":"soun"===w?"audio":w}var C=Hr(i,["mdia","minf","stbl","stsd"])[0];if(C){var L=C.subarray(8);u.codec=$r(L.subarray(4,8));var B,U=Hr(L,[u.codec])[0];U&&(/^[asm]vc[1-9]$/i.test(u.codec)?(B=U.subarray(78),"avcC"===$r(B.subarray(4,8))&&B.length>11?(u.codec+=".",u.codec+=zr(B[9]),u.codec+=zr(B[10]),u.codec+=zr(B[11])):u.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(u.codec)?(B=U.subarray(28),"esds"===$r(B.subarray(4,8))&&B.length>20&&0!==B[19]?(u.codec+="."+zr(B[19]),u.codec+="."+zr(B[20]>>>2&63).replace(/^0/,"")):u.codec="mp4a.40.2"):u.codec=u.codec.toLowerCase())}var j=Hr(i,["mdia","mdhd"])[0];j&&(u.timescale=_r(j)),s.push(u)}),s},"getTracks"),yr=/* @__PURE__ */__name(function(i,a=0){return Hr(i,["emsg"]).map(i=>{var s=Gr.parseEmsgBox(new Uint8Array(i)),o=Yr(s.message_data);return{cueTime:Gr.scaleTime(s.presentation_time,s.timescale,s.presentation_time_delta,a),duration:Gr.scaleTime(s.event_duration,s.timescale),frames:o}})},"getEmsgID3");var Jr={findBox:Hr,parseType:$r,timescale:hr,startTime:pr,compositionStartTime:mr,videoTrackIds:fr,tracks:gr,getTimescaleFromMediaHeader:_r,getEmsgID3:yr};const{parseTrun:Zr}=Dr,{findBox:ea}=Jr;var na=jr,ia={getMdatTrafPairs:/* @__PURE__ */__name(function(i){var a=ea(i,["moof","traf"]),s=ea(i,["mdat"]),o=[];return s.forEach(function(i,s){var u=a[s];o.push({mdat:i,traf:u})}),o},"getMdatTrafPairs$2"),parseSamples:/* @__PURE__ */__name(function(i,a,s){var o=a,u=s.defaultSampleDuration||0,_=s.defaultSampleSize||0,x=s.trackId,w=[];return i.forEach(function(i){var a=Zr(i).samples;a.forEach(function(i){void 0===i.duration&&(i.duration=u),void 0===i.size&&(i.size=_),i.trackId=x,i.dts=o,void 0===i.compositionTimeOffset&&(i.compositionTimeOffset=0),"bigint"==typeof o?(i.pts=o+na.BigInt(i.compositionTimeOffset),o+=na.BigInt(i.duration)):(i.pts=o+i.compositionTimeOffset,o+=i.duration)}),w=w.concat(a)}),w},"parseSamples$2")},ra=Dt.discardEmulationPreventionBytes,aa=Xt.CaptionStream,la=Ar,ca=Mr,ua=kr,{getMdatTrafPairs:da,parseSamples:ma}=ia,ga=/* @__PURE__ */__name(function(i,a){for(var s=i,o=0;o<a.length;o++){var u=a[o];if(s<u.size)return u;s-=u.size}return null},"mapToSample"),_a=/* @__PURE__ */__name(function(i,a,s){var o,u,_,x,w=new DataView(i.buffer,i.byteOffset,i.byteLength),C={logs:[],seiNals:[]};for(u=0;u+4<i.length;u+=_)if(_=w.getUint32(u),u+=4,!(_<=0))switch(31&i[u]){case 6:var L=i.subarray(u+1,u+1+_),B=ga(u,a);if(o={nalUnitType:"sei_rbsp",size:_,data:L,escapedRBSP:ra(L),trackId:s},B)o.pts=B.pts,o.dts=B.dts,x=B;else{if(!x){C.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+u+" for trackId "+s+". See mux.js#223."});break}o.pts=x.pts,o.dts=x.dts}C.seiNals.push(o)}return C},"findSeiNals"),ya=/* @__PURE__ */__name(function(i,a){var s={};return da(i).forEach(function(i){var o,u,_=i.mdat,x=i.traf,w=la(x,["tfhd"]),C=ua(w[0]),L=C.trackId,B=la(x,["tfdt"]),U=B.length>0?ca(B[0]).baseMediaDecodeTime:0,j=la(x,["trun"]);a===L&&j.length>0&&(o=ma(j,U,C),u=_a(_,o,L),s[L]||(s[L]={seiNals:[],logs:[]}),s[L].seiNals=s[L].seiNals.concat(u.seiNals),s[L].logs=s[L].logs.concat(u.logs))}),s},"parseCaptionNals"),va=/* @__PURE__ */__name(function(i,a,s){if(null===a)return null;var o=ya(i,a)[a]||{};return{seiNals:o.seiNals,logs:o.logs,timescale:s}},"parseEmbeddedCaptions"),ba=/* @__PURE__ */__name(function(){var i,a,s,o,u,_,x=!1;this.isInitialized=function(){return x},this.init=function(a){i=new aa,x=!0,_=!!a&&a.isPartial,i.on("data",function(i){i.startTime=i.startPts/o,i.endTime=i.endPts/o,u.captions.push(i),u.captionStreams[i.stream]=!0}),i.on("log",function(i){u.logs.push(i)})},this.isNewInit=function(i,a){return!(i&&0===i.length||a&&"object"==typeof a&&0===Object.keys(a).length)&&(s!==i[0]||o!==a[s])},this.parse=function(i,_,x){var w;if(!this.isInitialized())return null;if(!_||!x)return null;if(this.isNewInit(_,x))s=_[0],o=x[s];else if(null===s||!o)return a.push(i),null;for(;a.length>0;){var C=a.shift();this.parse(C,_,x)}return(w=va(i,s,o))&&w.logs&&(u.logs=u.logs.concat(w.logs)),null!==w&&w.seiNals?(this.pushNals(w.seiNals),this.flushStream(),u):u.logs.length?{logs:u.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(a){if(!this.isInitialized()||!a||0===a.length)return null;a.forEach(function(a){i.push(a)})},this.flushStream=function(){if(!this.isInitialized())return null;_?i.partialFlush():i.flush()},this.clearParsedCaptions=function(){u.captions=[],u.captionStreams={},u.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;i.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){a=[],s=null,o=null,u?this.clearParsedCaptions():u={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},"CaptionParser");const{parseTfdt:xa}=Dr,wa=Ar,{getTimescaleFromMediaHeader:Aa}=Jr,{parseSamples:Ca,getMdatTrafPairs:Ea}=ia;var ka=/* @__PURE__ */__name(function(){let i=9e4;this.init=function(a){const s=wa(a,["moov","trak","mdia","mdhd"])[0];s&&(i=Aa(s))},this.parseSegment=function(a){const s=[],o=Ea(a);let u=0;return o.forEach(function(a){const o=a.mdat,_=a.traf,x=wa(_,["tfdt"])[0],w=wa(_,["tfhd"])[0],C=wa(_,["trun"]);if(x){const i=xa(x);u=i.baseMediaDecodeTime}if(C.length&&w){const a=Ca(C,u,w);let _=0;a.forEach(function(a){const u=new TextDecoder("utf-8"),x=o.slice(_,_+a.size);if(wa(x,["vtte"])[0])return void(_+=a.size);wa(x,["vttc"]).forEach(function(o){const _=wa(o,["payl"])[0],x=wa(o,["sttg"])[0],w=a.pts/i,C=(a.pts+a.duration)/i;let L,B;if(_)try{L=u.decode(_)}catch(U){console.error(U)}if(x)try{B=u.decode(x)}catch(U){console.error(U)}a.duration&&L&&s.push({cueText:L,start:w,end:C,settings:B})}),_+=a.size})}}),s}},"WebVttParser"),Ia=Qt,La=/* @__PURE__ */__name(function(i){var a=31&i[1];return a<<=8,a|=i[2]},"parsePid"),Da=/* @__PURE__ */__name(function(i){return!!(64&i[1])},"parsePayloadUnitStartIndicator"),Na=/* @__PURE__ */__name(function(i){var a=0;return(48&i[3])>>>4>1&&(a+=i[4]+1),a},"parseAdaptionField"),Ba=/* @__PURE__ */__name(function(i,a){var s=La(i);return 0===s?"pat":s===a?"pmt":a?"pes":null},"parseType"),Fa=/* @__PURE__ */__name(function(i){var a=Da(i),s=4+Na(i);return a&&(s+=i[s]+1),(31&i[s+10])<<8|i[s+11]},"parsePat"),ja=/* @__PURE__ */__name(function(i){var a={},s=Da(i),o=4+Na(i);if(s&&(o+=i[o]+1),1&i[o+5]){var u;u=3+((15&i[o+1])<<8|i[o+2])-4;for(var _=12+((15&i[o+10])<<8|i[o+11]);_<u;){var x=o+_;a[(31&i[x+1])<<8|i[x+2]]=i[x],_+=5+((15&i[x+3])<<8|i[x+4])}return a}},"parsePmt"),za=/* @__PURE__ */__name(function(i,a){switch(a[La(i)]){case Ia.H264_STREAM_TYPE:return"video";case Ia.ADTS_STREAM_TYPE:return"audio";case Ia.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},"parsePesType"),Ha=/* @__PURE__ */__name(function(i){if(!Da(i))return null;var a=4+Na(i);if(a>=i.byteLength)return null;var s,o=null;return 192&(s=i[a+7])&&((o={}).pts=(14&i[a+9])<<27|(255&i[a+10])<<20|(254&i[a+11])<<12|(255&i[a+12])<<5|(254&i[a+13])>>>3,o.pts*=4,o.pts+=(6&i[a+13])>>>1,o.dts=o.pts,64&s&&(o.dts=(14&i[a+14])<<27|(255&i[a+15])<<20|(254&i[a+16])<<12|(255&i[a+17])<<5|(254&i[a+18])>>>3,o.dts*=4,o.dts+=(6&i[a+18])>>>1)),o},"parsePesTime"),$a=/* @__PURE__ */__name(function(i){switch(i){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},"parseNalUnitType"),Ga={parseType:Ba,parsePat:Fa,parsePmt:ja,parsePayloadUnitStartIndicator:Da,parsePesType:za,parsePesTime:Ha,videoPacketContainsKeyFrame:/* @__PURE__ */__name(function(i){for(var a=4+Na(i),s=i.subarray(a),o=0,u=0,_=!1;u<s.byteLength-3;u++)if(1===s[u+2]){o=u+5;break}for(;o<s.byteLength;)switch(s[o]){case 0:if(0!==s[o-1]){o+=2;break}if(0!==s[o-2]){o++;break}u+3!==o-2&&"slice_layer_without_partitioning_rbsp_idr"===$a(31&s[u+3])&&(_=!0);do{o++}while(1!==s[o]&&o<s.length);u=o-2,o+=3;break;case 1:if(0!==s[o-1]||0!==s[o-2]){o+=3;break}"slice_layer_without_partitioning_rbsp_idr"===$a(31&s[u+3])&&(_=!0),u=o-2,o+=3;break;default:o+=3}return s=s.subarray(u),o-=u,u=0,s&&s.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===$a(31&s[u+3])&&(_=!0),_},"videoPacketContainsKeyFrame")},Ja=Qt,es=tn.handleRollover,ns={};ns.ts=Ga,ns.aac=Wn;var is=At.ONE_SECOND_IN_TS,rs=188,as=71,ss=/* @__PURE__ */__name(function(i,a){for(var s,o=0,u=rs;u<i.byteLength;)if(i[o]!==as||i[u]!==as)o++,u++;else{switch(s=i.subarray(o,u),ns.ts.parseType(s,a.pid)){case"pat":a.pid=ns.ts.parsePat(s);break;case"pmt":var _=ns.ts.parsePmt(s);a.table=a.table||{},Object.keys(_).forEach(function(i){a.table[i]=_[i]})}o+=rs,u+=rs}},"parsePsi_"),os=/* @__PURE__ */__name(function(i,a,s){for(var o,u,_,x,w=0,C=rs,L=!1;C<=i.byteLength;)if(i[w]!==as||i[C]!==as&&C!==i.byteLength)w++,C++;else{if(o=i.subarray(w,C),"pes"===ns.ts.parseType(o,a.pid))u=ns.ts.parsePesType(o,a.table),_=ns.ts.parsePayloadUnitStartIndicator(o),"audio"===u&&_&&(x=ns.ts.parsePesTime(o))&&(x.type="audio",s.audio.push(x),L=!0);if(L)break;w+=rs,C+=rs}for(w=(C=i.byteLength)-rs,L=!1;w>=0;)if(i[w]!==as||i[C]!==as&&C!==i.byteLength)w--,C--;else{if(o=i.subarray(w,C),"pes"===ns.ts.parseType(o,a.pid))u=ns.ts.parsePesType(o,a.table),_=ns.ts.parsePayloadUnitStartIndicator(o),"audio"===u&&_&&(x=ns.ts.parsePesTime(o))&&(x.type="audio",s.audio.push(x),L=!0);if(L)break;w-=rs,C-=rs}},"parseAudioPes_"),ls=/* @__PURE__ */__name(function(i,a,s){for(var o,u,_,x,w,C,L,B=0,U=rs,j=!1,V={data:[],size:0};U<i.byteLength;)if(i[B]!==as||i[U]!==as)B++,U++;else{if(o=i.subarray(B,U),"pes"===ns.ts.parseType(o,a.pid))if(u=ns.ts.parsePesType(o,a.table),_=ns.ts.parsePayloadUnitStartIndicator(o),"video"===u&&(_&&!j&&(x=ns.ts.parsePesTime(o))&&(x.type="video",s.video.push(x),j=!0),!s.firstKeyFrame)){if(_&&0!==V.size){for(w=new Uint8Array(V.size),C=0;V.data.length;)L=V.data.shift(),w.set(L,C),C+=L.byteLength;if(ns.ts.videoPacketContainsKeyFrame(w)){var z=ns.ts.parsePesTime(w);z?(s.firstKeyFrame=z,s.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}V.size=0}V.data.push(o),V.size+=o.byteLength}if(j&&s.firstKeyFrame)break;B+=rs,U+=rs}for(B=(U=i.byteLength)-rs,j=!1;B>=0;)if(i[B]!==as||i[U]!==as)B--,U--;else{if(o=i.subarray(B,U),"pes"===ns.ts.parseType(o,a.pid))u=ns.ts.parsePesType(o,a.table),_=ns.ts.parsePayloadUnitStartIndicator(o),"video"===u&&_&&(x=ns.ts.parsePesTime(o))&&(x.type="video",s.video.push(x),j=!0);if(j)break;B-=rs,U-=rs}},"parseVideoPes_"),cs=/* @__PURE__ */__name(function(i,a){if(i.audio&&i.audio.length){var s=a;(void 0===s||isNaN(s))&&(s=i.audio[0].dts),i.audio.forEach(function(i){i.dts=es(i.dts,s),i.pts=es(i.pts,s),i.dtsTime=i.dts/is,i.ptsTime=i.pts/is})}if(i.video&&i.video.length){var o=a;if((void 0===o||isNaN(o))&&(o=i.video[0].dts),i.video.forEach(function(i){i.dts=es(i.dts,o),i.pts=es(i.pts,o),i.dtsTime=i.dts/is,i.ptsTime=i.pts/is}),i.firstKeyFrame){var u=i.firstKeyFrame;u.dts=es(u.dts,o),u.pts=es(u.pts,o),u.dtsTime=u.dts/is,u.ptsTime=u.pts/is}}},"adjustTimestamp_"),us=/* @__PURE__ */__name(function(i){for(var a,s=!1,o=0,u=null,_=null,x=0,w=0;i.length-w>=3;){switch(ns.aac.parseType(i,w)){case"timed-metadata":if(i.length-w<10){s=!0;break}if((x=ns.aac.parseId3TagSize(i,w))>i.length){s=!0;break}null===_&&(a=i.subarray(w,w+x),_=ns.aac.parseAacTimestamp(a)),w+=x;break;case"audio":if(i.length-w<7){s=!0;break}if((x=ns.aac.parseAdtsSize(i,w))>i.length){s=!0;break}null===u&&(a=i.subarray(w,w+x),u=ns.aac.parseSampleRate(a)),o++,w+=x;break;default:w++}if(s)return null}if(null===u||null===_)return null;var C=is/u;return{audio:[{type:"audio",dts:_,pts:_},{type:"audio",dts:_+1024*o*C,pts:_+1024*o*C}]}},"inspectAac_"),ds=/* @__PURE__ */__name(function(i){var a={pid:null,table:null},s={};for(var o in ss(i,a),a.table){if(a.table.hasOwnProperty(o))switch(a.table[o]){case Ja.H264_STREAM_TYPE:s.video=[],ls(i,a,s),0===s.video.length&&delete s.video;break;case Ja.ADTS_STREAM_TYPE:s.audio=[],os(i,a,s),0===s.audio.length&&delete s.audio}}return s},"inspectTs_"),hs={inspect:/* @__PURE__ */__name(function(i,a){var s;return(s=ns.aac.isLikelyAacData(i)?us(i):ds(i))&&(s.audio||s.video)?(cs(s,a),s):null},"inspect"),parseAudioPes_:os};const ps=/* @__PURE__ */__name(function(i,a){a.on("data",function(a){const s=a.initSegment;a.initSegment={data:s.buffer,byteOffset:s.byteOffset,byteLength:s.byteLength};const o=a.data;a.data=o.buffer,i.postMessage({action:"data",segment:a,byteOffset:o.byteOffset,byteLength:o.byteLength},[a.data])}),a.on("done",function(a){i.postMessage({action:"done"})}),a.on("gopInfo",function(a){i.postMessage({action:"gopInfo",gopInfo:a})}),a.on("videoSegmentTimingInfo",function(a){const s={start:{decode:At.videoTsToSeconds(a.start.dts),presentation:At.videoTsToSeconds(a.start.pts)},end:{decode:At.videoTsToSeconds(a.end.dts),presentation:At.videoTsToSeconds(a.end.pts)},baseMediaDecodeTime:At.videoTsToSeconds(a.baseMediaDecodeTime)};a.prependedContentDuration&&(s.prependedContentDuration=At.videoTsToSeconds(a.prependedContentDuration)),i.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:s})}),a.on("audioSegmentTimingInfo",function(a){const s={start:{decode:At.videoTsToSeconds(a.start.dts),presentation:At.videoTsToSeconds(a.start.pts)},end:{decode:At.videoTsToSeconds(a.end.dts),presentation:At.videoTsToSeconds(a.end.pts)},baseMediaDecodeTime:At.videoTsToSeconds(a.baseMediaDecodeTime)};a.prependedContentDuration&&(s.prependedContentDuration=At.videoTsToSeconds(a.prependedContentDuration)),i.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:s})}),a.on("id3Frame",function(a){i.postMessage({action:"id3Frame",id3Frame:a})}),a.on("caption",function(a){i.postMessage({action:"caption",caption:a})}),a.on("trackinfo",function(a){i.postMessage({action:"trackinfo",trackInfo:a})}),a.on("audioTimingInfo",function(a){i.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:At.videoTsToSeconds(a.start),end:At.videoTsToSeconds(a.end)}})}),a.on("videoTimingInfo",function(a){i.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:At.videoTsToSeconds(a.start),end:At.videoTsToSeconds(a.end)}})}),a.on("log",function(a){i.postMessage({action:"log",log:a})})},"wireTransmuxerEvents"),ms=class _MessageHandlers{constructor(i,a){this.options=a||{},this.self=i,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new vr.Transmuxer(this.options),ps(this.self,this.transmuxer)}pushMp4Captions(i){this.captionParser||(this.captionParser=new ba,this.captionParser.init());const a=new Uint8Array(i.data,i.byteOffset,i.byteLength),s=this.captionParser.parse(a,i.trackIds,i.timescales);this.self.postMessage({action:"mp4Captions",captions:s&&s.captions||[],logs:s&&s.logs||[],data:a.buffer},[a.buffer])}initMp4WebVttParser(i){this.webVttParser||(this.webVttParser=new ka);const a=new Uint8Array(i.data,i.byteOffset,i.byteLength);this.webVttParser.init(a)}getMp4WebVttText(i){this.webVttParser||(this.webVttParser=new ka);const a=new Uint8Array(i.data,i.byteOffset,i.byteLength),s=this.webVttParser.parseSegment(a);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:s||[],data:a.buffer},[a.buffer])}probeMp4StartTime({timescales:i,data:a}){const s=Jr.startTime(i,a);this.self.postMessage({action:"probeMp4StartTime",startTime:s,data:a},[a.buffer])}probeMp4Tracks({data:i}){const a=Jr.tracks(i);this.self.postMessage({action:"probeMp4Tracks",tracks:a,data:i},[i.buffer])}probeEmsgID3({data:i,offset:a}){const s=Jr.getEmsgID3(i,a);this.self.postMessage({action:"probeEmsgID3",id3Frames:s,emsgData:i},[i.buffer])}probeTs({data:i,baseStartTime:a}){const s="number"!=typeof a||isNaN(a)?void 0:a*At.ONE_SECOND_IN_TS,o=hs.inspect(i,s);let u=null;o&&(u={hasVideo:o.video&&2===o.video.length||!1,hasAudio:o.audio&&2===o.audio.length||!1},u.hasVideo&&(u.videoStart=o.video[0].ptsTime),u.hasAudio&&(u.audioStart=o.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:u,data:i},[i.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(i){const a=new Uint8Array(i.data,i.byteOffset,i.byteLength);this.transmuxer.push(a)}reset(){this.transmuxer.reset()}setTimestampOffset(i){const a=i.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(At.secondsToVideoTs(a)))}setAudioAppendStart(i){this.transmuxer.setAudioAppendStart(Math.ceil(At.secondsToVideoTs(i.appendStart)))}setRemux(i){this.transmuxer.setRemux(i.remux)}flush(i){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(i){this.transmuxer.alignGopsWith(i.gopsToAlignWith.slice())}};__name(ms,"MessageHandlers");let fs=ms;self.onmessage=function(i){"init"===i.data.action&&i.data.options?this.messageHandlers=new fs(self,i.data.options):(this.messageHandlers||(this.messageHandlers=new fs(self)),i.data&&i.data.action&&"init"!==i.data.action&&this.messageHandlers[i.data.action]&&this.messageHandlers[i.data.action](i.data))}}));var Xg=Vg(qg);const Kg=/* @__PURE__ */__name((i,a,s)=>{const{type:o,initSegment:u,captions:_,captionStreams:x,metadata:w,videoFrameDtsTime:C,videoFramePtsTime:L}=i.data.segment;a.buffer.push({captions:_,captionStreams:x,metadata:w});const B=i.data.segment.boxes||{data:i.data.segment.data},U={type:o,data:new Uint8Array(B.data,B.data.byteOffset,B.data.byteLength),initSegment:new Uint8Array(u.data,u.byteOffset,u.byteLength)};void 0!==C&&(U.videoFrameDtsTime=C),void 0!==L&&(U.videoFramePtsTime=L),s(U)},"handleData_$1"),Yg=/* @__PURE__ */__name(({transmuxedData:i,callback:a})=>{i.buffer=[],a(i)},"handleDone_$1"),Zg=/* @__PURE__ */__name((i,a)=>{a.gopInfo=i.data.gopInfo},"handleGopInfo_$1"),e_=/* @__PURE__ */__name(i=>{const{transmuxer:a,bytes:s,audioAppendStart:o,gopsToAlignWith:u,remux:_,onData:x,onTrackInfo:w,onAudioTimingInfo:C,onVideoTimingInfo:L,onVideoSegmentTimingInfo:B,onAudioSegmentTimingInfo:U,onId3:j,onCaptions:V,onDone:z,onEndedTimeline:$,onTransmuxerLog:Y,isEndOfTimeline:Z,segment:ee,triggerSegmentEventFn:ie}=i,ae={buffer:[]};let le=Z;const ce=/* @__PURE__ */__name(s=>{a.currentTransmux===i&&("data"===s.data.action&&Kg(s,ae,x),"trackinfo"===s.data.action&&w(s.data.trackInfo),"gopInfo"===s.data.action&&Zg(s,ae),"audioTimingInfo"===s.data.action&&C(s.data.audioTimingInfo),"videoTimingInfo"===s.data.action&&L(s.data.videoTimingInfo),"videoSegmentTimingInfo"===s.data.action&&B(s.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===s.data.action&&U(s.data.audioSegmentTimingInfo),"id3Frame"===s.data.action&&j([s.data.id3Frame],s.data.id3Frame.dispatchType),"caption"===s.data.action&&V(s.data.caption),"endedtimeline"===s.data.action&&(le=!1,$()),"log"===s.data.action&&Y(s.data.log),"transmuxed"===s.data.type&&(le||(a.onmessage=null,Yg({transmuxedData:ae,callback:z}),t_(a))))},"handleMessage"),de=/* @__PURE__ */__name(()=>{const i={message:"Received an error message from the transmuxer worker",metadata:{errorType:videojs$2.Error.StreamingFailedToTransmuxSegment,segmentInfo:yy({segment:ee})}};z(null,i)},"handleError");if(a.onmessage=ce,a.onerror=de,o&&a.postMessage({action:"setAudioAppendStart",appendStart:o}),Array.isArray(u)&&a.postMessage({action:"alignGopsWith",gopsToAlignWith:u}),void 0!==_&&a.postMessage({action:"setRemux",remux:_}),s.byteLength){const i=s instanceof ArrayBuffer?s:s.buffer,o=s instanceof ArrayBuffer?0:s.byteOffset;ie({type:"segmenttransmuxingstart",segment:ee}),a.postMessage({action:"push",data:i,byteOffset:o,byteLength:s.byteLength},[i])}Z&&a.postMessage({action:"endTimeline"}),a.postMessage({action:"flush"})},"processTransmux$1"),t_=/* @__PURE__ */__name(i=>{i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),"function"==typeof i.currentTransmux?i.currentTransmux():e_(i.currentTransmux))},"dequeue$1"),n_=/* @__PURE__ */__name((i,a)=>{i.postMessage({action:a}),t_(i)},"processAction$1"),i_=/* @__PURE__ */__name((i,a)=>{if(!a.currentTransmux)return a.currentTransmux=i,void n_(a,i);a.transmuxQueue.push(n_.bind(null,a,i))},"enqueueAction$1"),r_=/* @__PURE__ */__name(i=>{i_("reset",i)},"reset$2"),a_=/* @__PURE__ */__name(i=>{i_("endTimeline",i)},"endTimeline$1"),s_=/* @__PURE__ */__name(i=>{if(!i.transmuxer.currentTransmux)return i.transmuxer.currentTransmux=i,void e_(i);i.transmuxer.transmuxQueue.push(i)},"transmux$1");var o_={reset:r_,endTimeline:a_,transmux:s_,createTransmuxer:/* @__PURE__ */__name(i=>{const a=new Xg;a.currentTransmux=null,a.transmuxQueue=[];const s=a.terminate;return a.terminate=()=>(a.currentTransmux=null,a.transmuxQueue.length=0,s.call(a)),a.postMessage({action:"init",options:i}),a},"createTransmuxer$1")};const l_=/* @__PURE__ */__name(function(i){const a=i.transmuxer,s=i.endAction||i.action,o=i.callback,u=_extends({},i,{endAction:null,transmuxer:null,callback:null}),_=/* @__PURE__ */__name(u=>{u.data.action===s&&(a.removeEventListener("message",_),u.data.data&&(u.data.data=new Uint8Array(u.data.data,i.byteOffset||0,i.byteLength||u.data.data.byteLength),i.data&&(i.data=u.data.data)),o(u.data))},"listenForEndEvent");if(a.addEventListener("message",_),i.data){const s=i.data instanceof ArrayBuffer;u.byteOffset=s?0:i.data.byteOffset,u.byteLength=i.data.byteLength;const o=[s?i.data:i.data.buffer];a.postMessage(u,o)}else a.postMessage(u)},"workerCallback$1"),c_=2,u_=-101,d_=-102,h_="wvtt",p_=/* @__PURE__ */__name(i=>{i.forEach(i=>{i.abort()})},"abortAll$1"),m_=/* @__PURE__ */__name(i=>({bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}),"getRequestStats$1"),f_=/* @__PURE__ */__name(i=>{const a=i.target,s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-a.requestTime||0};return s.bytesReceived=i.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s},"getProgressStats$1"),g_=/* @__PURE__ */__name((i,a)=>{const{requestType:s}=a,o=Hm({requestType:s,request:a,error:i});return a.timedout?{status:a.status,message:"HLS request timed-out at URL: "+a.uri,code:u_,xhr:a,metadata:o}:a.aborted?{status:a.status,message:"HLS request aborted at URL: "+a.uri,code:d_,xhr:a,metadata:o}:i?{status:a.status,message:"HLS request errored at URL: "+a.uri,code:c_,xhr:a,metadata:o}:"arraybuffer"===a.responseType&&0===a.response.byteLength?{status:a.status,message:"Empty HLS response at URL: "+a.uri,code:c_,xhr:a,metadata:o}:null},"handleErrors$1"),__=/* @__PURE__ */__name((i,a,s,o)=>(u,_)=>{const x=_.response,w=g_(u,_);if(w)return s(w,i);if(16!==x.byteLength)return s({status:_.status,message:"Invalid HLS key at URL: "+_.uri,code:c_,xhr:_},i);const C=new DataView(x),L=new Uint32Array([C.getUint32(0),C.getUint32(4),C.getUint32(8),C.getUint32(12)]);for(let i=0;i<a.length;i++)a[i].bytes=L;const B={uri:_.uri};return o({type:"segmentkeyloadcomplete",segment:i,keyInfo:B}),s(null,i)},"handleKeyResponse$1"),y_=/* @__PURE__ */__name((i,a)=>{a===h_&&i.transmuxer.postMessage({action:"initMp4WebVttParser",data:i.map.bytes})},"initMp4Text"),v_=/* @__PURE__ */__name((i,a,s)=>{a===h_&&l_({action:"getMp4WebVttText",data:i.bytes,transmuxer:i.transmuxer,callback:/* @__PURE__ */__name(({data:a,mp4VttCues:o})=>{i.bytes=a,s(null,i,{mp4VttCues:o})},"callback")})},"parseMp4TextSegment"),b_=/* @__PURE__ */__name((i,a)=>{const s=yo(i.map.bytes);if("mp4"!==s){const o=i.map.resolvedUri||i.map.uri,u=s||"unknown";return a({internal:!0,message:`Found unsupported ${u} container for initialization segment at URL: ${o}`,code:c_,metadata:{mediaType:u}})}l_({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:/* @__PURE__ */__name(({tracks:s,data:o})=>(i.map.bytes=o,s.forEach(function(a){i.map.tracks=i.map.tracks||{},i.map.tracks[a.type]||(i.map.tracks[a.type]=a,"number"==typeof a.id&&a.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[a.id]=a.timescale),"text"===a.type&&y_(i,a.codec))}),a(null)),"callback")})},"parseInitSegment$1"),T_=/* @__PURE__ */__name(({segment:i,finishProcessingFn:a,triggerSegmentEventFn:s})=>(o,u)=>{const _=g_(o,u);if(_)return a(_,i);const x=new Uint8Array(u.response);if(s({type:"segmentloaded",segment:i}),i.map.key)return i.map.encryptedBytes=x,a(null,i);i.map.bytes=x,b_(i,function(s){if(s)return s.xhr=u,s.status=u.status,a(s,i);a(null,i)})},"handleInitSegmentResponse$1"),S_=/* @__PURE__ */__name(({segment:i,finishProcessingFn:a,responseType:s,triggerSegmentEventFn:o})=>(u,_)=>{const x=g_(u,_);if(x)return a(x,i);o({type:"segmentloaded",segment:i});const w="arraybuffer"!==s&&_.responseText?xg(_.responseText.substring(i.lastReachedChar||0)):_.response;return i.stats=m_(_),i.key?i.encryptedBytes=new Uint8Array(w):i.bytes=new Uint8Array(w),a(null,i)},"handleSegmentResponse$1"),x_=/* @__PURE__ */__name(({segment:i,bytes:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:_,id3Fn:x,captionsFn:w,isEndOfTimeline:C,endedTimelineFn:L,dataFn:B,doneFn:U,onTransmuxerLog:j,triggerSegmentEventFn:V})=>{const z=i.map&&i.map.tracks||{},$=Boolean(z.audio&&z.video);let Y=o.bind(null,i,"audio","start");const Z=o.bind(null,i,"audio","end");let ee=o.bind(null,i,"video","start");const ie=o.bind(null,i,"video","end"),ae=/* @__PURE__ */__name(()=>s_({bytes:a,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:$,onData:/* @__PURE__ */__name(a=>{a.type="combined"===a.type?"video":a.type,B(i,a)},"onData"),onTrackInfo:/* @__PURE__ */__name(a=>{s&&($&&(a.isMuxed=!0),s(i,a))},"onTrackInfo"),onAudioTimingInfo:/* @__PURE__ */__name(i=>{Y&&void 0!==i.start&&(Y(i.start),Y=null),Z&&void 0!==i.end&&Z(i.end)},"onAudioTimingInfo"),onVideoTimingInfo:/* @__PURE__ */__name(i=>{ee&&void 0!==i.start&&(ee(i.start),ee=null),ie&&void 0!==i.end&&ie(i.end)},"onVideoTimingInfo"),onVideoSegmentTimingInfo:/* @__PURE__ */__name(a=>{const s={pts:{start:a.start.presentation,end:a.end.presentation},dts:{start:a.start.decode,end:a.end.decode}};V({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:s}),u(a)},"onVideoSegmentTimingInfo"),onAudioSegmentTimingInfo:/* @__PURE__ */__name(a=>{const s={pts:{start:a.start.pts,end:a.end.pts},dts:{start:a.start.dts,end:a.end.dts}};V({type:"segmenttransmuxingtiminginfoavailable",segment:i,timingInfo:s}),_(a)},"onAudioSegmentTimingInfo"),onId3:/* @__PURE__ */__name((a,s)=>{x(i,a,s)},"onId3"),onCaptions:/* @__PURE__ */__name(a=>{w(i,[a])},"onCaptions"),isEndOfTimeline:C,onEndedTimeline:/* @__PURE__ */__name(()=>{L()},"onEndedTimeline"),onTransmuxerLog:j,onDone:/* @__PURE__ */__name((a,s)=>{U&&(a.type="combined"===a.type?"video":a.type,V({type:"segmenttransmuxingcomplete",segment:i}),U(s,i,a))},"onDone"),segment:i,triggerSegmentEventFn:V}),"finish");l_({action:"probeTs",transmuxer:i.transmuxer,data:a,baseStartTime:i.baseStartTime,callback:/* @__PURE__ */__name(o=>{i.bytes=a=o.data;const u=o.result;u&&(s(i,{hasAudio:u.hasAudio,hasVideo:u.hasVideo,isMuxed:$}),s=null),ae()},"callback")})},"transmuxAndNotify$1"),w_=/* @__PURE__ */__name(({segment:i,bytes:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:_,id3Fn:x,captionsFn:w,isEndOfTimeline:C,endedTimelineFn:L,dataFn:B,doneFn:U,onTransmuxerLog:j,triggerSegmentEventFn:V})=>{let z=new Uint8Array(a);if(vo(z)){i.isFmp4=!0;const{tracks:u}=i.map;if(u.text&&(!u.audio||!u.video))return B(i,{data:z,type:"text"}),void v_(i,u.text.codec,U);const _={isFmp4:!0,hasVideo:!!u.video,hasAudio:!!u.audio};u.audio&&u.audio.codec&&"enca"!==u.audio.codec&&(_.audioCodec=u.audio.codec),u.video&&u.video.codec&&"encv"!==u.video.codec&&(_.videoCodec=u.video.codec),u.video&&u.audio&&(_.isMuxed=!0),s(i,_);const C=/* @__PURE__ */__name((a,s)=>{B(i,{data:z,type:_.hasAudio&&!_.isMuxed?"audio":"video"}),s&&s.length&&x(i,s),a&&a.length&&w(i,a),U(null,i,{})},"finishLoading");return void l_({action:"probeMp4StartTime",timescales:i.map.timescales,data:z,transmuxer:i.transmuxer,callback:/* @__PURE__ */__name(({data:s,startTime:x})=>{a=s.buffer,i.bytes=z=s,_.hasAudio&&!_.isMuxed&&o(i,"audio","start",x),_.hasVideo&&o(i,"video","start",x),l_({action:"probeEmsgID3",data:z,transmuxer:i.transmuxer,offset:x,callback:/* @__PURE__ */__name(({emsgData:s,id3Frames:o})=>{a=s.buffer,i.bytes=z=s,u.video&&s.byteLength&&i.transmuxer?l_({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:z,timescales:i.map.timescales,trackIds:[u.video.id],callback:/* @__PURE__ */__name(s=>{a=s.data.buffer,i.bytes=z=s.data,s.logs.forEach(function(i){j(merge$2(i,{stream:"mp4CaptionParser"}))}),C(s.captions,o)},"callback")}):C(void 0,o)},"callback")})},"callback")})}if(i.transmuxer){if(void 0===i.container&&(i.container=yo(z)),"ts"!==i.container&&"aac"!==i.container)return s(i,{hasAudio:!1,hasVideo:!1}),void U(null,i,{});x_({segment:i,bytes:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:_,id3Fn:x,captionsFn:w,isEndOfTimeline:C,endedTimelineFn:L,dataFn:B,doneFn:U,onTransmuxerLog:j,triggerSegmentEventFn:V})}else U(null,i,{})},"handleSegmentBytes$1"),A_=/* @__PURE__ */__name(function({id:i,key:a,encryptedBytes:s,decryptionWorker:o,segment:u,doneFn:_},x){const w=/* @__PURE__ */__name(a=>{if(a.data.source===i){o.removeEventListener("message",w);const i=a.data.decrypted;x(new Uint8Array(i.bytes,i.byteOffset,i.byteLength))}},"decryptionHandler");let C;o.onerror=()=>{const i="An error occurred in the decryption worker",a=yy({segment:u}),s={message:i,metadata:{error:new Error(i),errorType:videojs$2.Error.StreamingFailedToDecryptSegment,segmentInfo:a,keyInfo:{uri:u.key.resolvedUri||u.map.key.resolvedUri}}};_(s,u)},o.addEventListener("message",w),C=a.bytes.slice?a.bytes.slice():new Uint32Array(Array.prototype.slice.call(a.bytes)),o.postMessage(Cf({source:i,encrypted:s,key:C,iv:a.iv}),[s.buffer,C.buffer])},"decrypt$1"),C_=/* @__PURE__ */__name(({decryptionWorker:i,segment:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:_,id3Fn:x,captionsFn:w,isEndOfTimeline:C,endedTimelineFn:L,dataFn:B,doneFn:U,onTransmuxerLog:j,triggerSegmentEventFn:V})=>{V({type:"segmentdecryptionstart"}),A_({id:a.requestId,key:a.key,encryptedBytes:a.encryptedBytes,decryptionWorker:i,segment:a,doneFn:U},i=>{a.bytes=i,V({type:"segmentdecryptioncomplete",segment:a}),w_({segment:a,bytes:a.bytes,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:_,id3Fn:x,captionsFn:w,isEndOfTimeline:C,endedTimelineFn:L,dataFn:B,doneFn:U,onTransmuxerLog:j,triggerSegmentEventFn:V})})},"decryptSegment$1"),E_=/* @__PURE__ */__name(({activeXhrs:i,decryptionWorker:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:_,id3Fn:x,captionsFn:w,isEndOfTimeline:C,endedTimelineFn:L,dataFn:B,doneFn:U,onTransmuxerLog:j,triggerSegmentEventFn:V})=>{let z=0,$=!1;return(Y,Z)=>{if(!$){if(Y)return $=!0,p_(i),U(Y,Z);if(z+=1,z===i.length){const z=/* @__PURE__ */__name(function(){if(Z.encryptedBytes)return C_({decryptionWorker:a,segment:Z,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:_,id3Fn:x,captionsFn:w,isEndOfTimeline:C,endedTimelineFn:L,dataFn:B,doneFn:U,onTransmuxerLog:j,triggerSegmentEventFn:V});w_({segment:Z,bytes:Z.bytes,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:_,id3Fn:x,captionsFn:w,isEndOfTimeline:C,endedTimelineFn:L,dataFn:B,doneFn:U,onTransmuxerLog:j,triggerSegmentEventFn:V})},"segmentFinish");if(Z.endOfAllRequests=Date.now(),Z.map&&Z.map.encryptedBytes&&!Z.map.bytes)return V({type:"segmentdecryptionstart",segment:Z}),A_({decryptionWorker:a,id:Z.requestId+"-init",encryptedBytes:Z.map.encryptedBytes,key:Z.map.key,segment:Z,doneFn:U},a=>{Z.map.bytes=a,V({type:"segmentdecryptioncomplete",segment:Z}),b_(Z,a=>{if(a)return p_(i),U(a,Z);z()})});z()}}}},"waitForCompletion$1"),M_=/* @__PURE__ */__name(({loadendState:i,abortFn:a})=>s=>{s.target.aborted&&a&&!i.calledAbortFn&&(a(),i.calledAbortFn=!0)},"handleLoadEnd$1"),k_=/* @__PURE__ */__name(({segment:i,progressFn:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:_,id3Fn:x,captionsFn:w,isEndOfTimeline:C,endedTimelineFn:L,dataFn:B})=>s=>{if(!s.target.aborted)return i.stats=merge$2(i.stats,f_(s)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),a(s,i)},"handleProgress$1"),P_=/* @__PURE__ */__name(({xhr:i,xhrOptions:a,decryptionWorker:s,segment:o,abortFn:u,progressFn:_,trackInfoFn:x,timingInfoFn:w,videoSegmentTimingInfoFn:C,audioSegmentTimingInfoFn:L,id3Fn:B,captionsFn:U,isEndOfTimeline:j,endedTimelineFn:V,dataFn:z,doneFn:$,onTransmuxerLog:Y,triggerSegmentEventFn:Z})=>{const ee=[],ie=E_({activeXhrs:ee,decryptionWorker:s,trackInfoFn:x,timingInfoFn:w,videoSegmentTimingInfoFn:C,audioSegmentTimingInfoFn:L,id3Fn:B,captionsFn:U,isEndOfTimeline:j,endedTimelineFn:V,dataFn:z,doneFn:$,onTransmuxerLog:Y,triggerSegmentEventFn:Z});if(o.key&&!o.key.bytes){const s=[o.key];o.map&&!o.map.bytes&&o.map.key&&o.map.key.resolvedUri===o.key.resolvedUri&&s.push(o.map.key);const u=merge$2(a,{uri:o.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),_=__(o,s,ie,Z);Z({type:"segmentkeyloadstart",segment:o,keyInfo:{uri:o.key.resolvedUri}});const x=i(u,_);ee.push(x)}if(o.map&&!o.map.bytes){if(o.map.key&&(!o.key||o.key.resolvedUri!==o.map.key.resolvedUri)){const s=merge$2(a,{uri:o.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),u=__(o,[o.map.key],ie,Z);Z({type:"segmentkeyloadstart",segment:o,keyInfo:{uri:o.map.key.resolvedUri}});const _=i(s,u);ee.push(_)}const s=merge$2(a,{uri:o.map.resolvedUri,responseType:"arraybuffer",headers:bf(o.map),requestType:"segment-media-initialization"}),u=T_({segment:o,finishProcessingFn:ie,triggerSegmentEventFn:Z});Z({type:"segmentloadstart",segment:o});const _=i(s,u);ee.push(_)}const ae=merge$2(a,{uri:o.part&&o.part.resolvedUri||o.resolvedUri,responseType:"arraybuffer",headers:bf(o),requestType:"segment"}),le=S_({segment:o,finishProcessingFn:ie,responseType:ae.responseType,triggerSegmentEventFn:Z});Z({type:"segmentloadstart",segment:o});const ce=i(ae,le);ce.addEventListener("progress",k_({segment:o,progressFn:_,trackInfoFn:x,timingInfoFn:w,videoSegmentTimingInfoFn:C,audioSegmentTimingInfoFn:L,id3Fn:B,captionsFn:U,isEndOfTimeline:j,endedTimelineFn:V,dataFn:z})),ee.push(ce);const de={};return ee.forEach(i=>{i.addEventListener("loadend",M_({loadendState:de,abortFn:u}))}),()=>p_(ee)},"mediaSegmentRequest$1"),I_=Wp("PlaylistSelector"),L_=/* @__PURE__ */__name(function(i){if(!i||!i.playlist)return;const a=i.playlist;return JSON.stringify({id:a.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:a.attributes&&a.attributes.CODECS||""})},"representationToString$1"),D_=/* @__PURE__ */__name(function(i,a){if(!i)return"";const s=Tn.getComputedStyle(i);return s?s[a]:""},"safeGetComputedStyle$1"),R_=/* @__PURE__ */__name(function(i,a){const s=i.slice();i.sort(function(i,o){const u=a(i,o);return 0===u?s.indexOf(i)-s.indexOf(o):u})},"stableSort$1"),O_=/* @__PURE__ */__name(function(i,a){let s,o;return i.attributes.BANDWIDTH&&(s=i.attributes.BANDWIDTH),s=s||Tn.Number.MAX_VALUE,a.attributes.BANDWIDTH&&(o=a.attributes.BANDWIDTH),o=o||Tn.Number.MAX_VALUE,s-o},"comparePlaylistBandwidth$1"),N_=/* @__PURE__ */__name(function(i,a){let s,o;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(s=i.attributes.RESOLUTION.width),s=s||Tn.Number.MAX_VALUE,a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(o=a.attributes.RESOLUTION.width),o=o||Tn.Number.MAX_VALUE,s===o&&i.attributes.BANDWIDTH&&a.attributes.BANDWIDTH?i.attributes.BANDWIDTH-a.attributes.BANDWIDTH:s-o},"comparePlaylistResolution$1");let B_=/* @__PURE__ */__name(function(i){const{main:a,bandwidth:s,playerWidth:o,playerHeight:u,playerObjectFit:_,limitRenditionByPlayerDimensions:x,playlistController:w}=i;if(!a)return;const C={bandwidth:s,width:o,height:u,limitRenditionByPlayerDimensions:x};let L=a.playlists;Pm.isAudioOnly(a)&&(L=w.getAudioTrackPlaylists_(),C.audioOnly=!0);let B=L.map(i=>{let a;const s=i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width,o=i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height;return a=i.attributes&&i.attributes.BANDWIDTH,a=a||Tn.Number.MAX_VALUE,{bandwidth:a,width:s,height:o,playlist:i}});R_(B,(i,a)=>i.bandwidth-a.bandwidth),B=B.filter(i=>!Pm.isIncompatible(i.playlist));let U=B.filter(i=>Pm.isEnabled(i.playlist));U.length||(U=B.filter(i=>!Pm.isDisabled(i.playlist)));const j=U.filter(i=>i.bandwidth*yg.BANDWIDTH_VARIANCE<s);let V=j[j.length-1];const z=j.filter(i=>i.bandwidth===V.bandwidth)[0];if(!1===x){const i=z||U[0]||B[0];if(i&&i.playlist){let a="sortedPlaylistReps";return z&&(a="bandwidthBestRep"),U[0]&&(a="enabledPlaylistReps"),I_(`choosing ${L_(i)} using ${a} with options`,C),i.playlist}return I_("could not choose a playlist with options",C),null}const $=j.filter(i=>i.width&&i.height);R_($,(i,a)=>i.width-a.width);const Y=$.filter(i=>i.width===o&&i.height===u);V=Y[Y.length-1];const Z=Y.filter(i=>i.bandwidth===V.bandwidth)[0];let ee,ie,ae,le;if(Z||(ee=$.filter(i=>"cover"===_?i.width>o&&i.height>u:i.width>o||i.height>u),ie=ee.filter(i=>i.width===ee[0].width&&i.height===ee[0].height),V=ie[ie.length-1],ae=ie.filter(i=>i.bandwidth===V.bandwidth)[0]),w.leastPixelDiffSelector){const i=$.map(i=>(i.pixelDiff=Math.abs(i.width-o)+Math.abs(i.height-u),i));R_(i,(i,a)=>i.pixelDiff===a.pixelDiff?a.bandwidth-i.bandwidth:i.pixelDiff-a.pixelDiff),le=i[0]}const ce=le||ae||Z||z||U[0]||B[0];if(ce&&ce.playlist){let i="sortedPlaylistReps";return le?i="leastPixelDiffRep":ae?i="resolutionPlusOneRep":Z?i="resolutionBestRep":z?i="bandwidthBestRep":U[0]&&(i="enabledPlaylistReps"),I_(`choosing ${L_(ce)} using ${i} with options`,C),ce.playlist}return I_("could not choose a playlist with options",C),null},"simpleSelector$1");const F_=/* @__PURE__ */__name(function(){let i=this.useDevicePixelRatio&&Tn.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),B_({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(D_(this.tech_.el(),"width"),10)*i,playerHeight:parseInt(D_(this.tech_.el(),"height"),10)*i,playerObjectFit:this.usePlayerObjectFit?D_(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},"lastBandwidthSelector$1"),U_=/* @__PURE__ */__name(function(i){let a=-1,s=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let o=this.useDevicePixelRatio&&Tn.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(o=this.customPixelRatio),a<0&&(a=this.systemBandwidth,s=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==s&&(a=i*this.systemBandwidth+(1-i)*a,s=this.systemBandwidth),B_({main:this.playlists.main,bandwidth:a,playerWidth:parseInt(D_(this.tech_.el(),"width"),10)*o,playerHeight:parseInt(D_(this.tech_.el(),"height"),10)*o,playerObjectFit:this.usePlayerObjectFit?D_(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},"movingAverageBandwidthSelector$1"),j_=/* @__PURE__ */__name(function(i){const{main:a,currentTime:s,bandwidth:o,duration:u,segmentDuration:_,timeUntilRebuffer:x,currentTimeline:w,syncController:C}=i,L=a.playlists.filter(i=>!Pm.isIncompatible(i));let B=L.filter(Pm.isEnabled);B.length||(B=L.filter(i=>!Pm.isDisabled(i)));const U=B.filter(Pm.hasAttribute.bind(null,"BANDWIDTH")).map(i=>{const a=C.getSyncPoint(i,u,w,s)?1:2;return{playlist:i,rebufferingImpact:Pm.estimateSegmentRequestTime(_,o,i)*a-x}}),j=U.filter(i=>i.rebufferingImpact<=0);return R_(j,(i,a)=>O_(a.playlist,i.playlist)),j.length?j[0]:(R_(U,(i,a)=>i.rebufferingImpact-a.rebufferingImpact),U[0]||null)},"minRebufferMaxBandwidthSelector$1"),V_=/* @__PURE__ */__name(function(){const i=this.playlists.main.playlists.filter(Pm.isEnabled);R_(i,(i,a)=>O_(i,a));return i.filter(i=>!!Km(this.playlists.main,i).video)[0]||null},"lowestBitrateCompatibleVariantSelector$1"),z_=/* @__PURE__ */__name(i=>{let a,s=0;return i.bytes&&(a=new Uint8Array(i.bytes),i.segments.forEach(i=>{a.set(i,s),s+=i.byteLength})),a},"concatSegments$1");function compactSegmentUrlDescription(i){try{return new URL(i).pathname.split("/").slice(-2).join("/")}catch(a){return""}}__name(compactSegmentUrlDescription,"compactSegmentUrlDescription");const H_=/* @__PURE__ */__name(function(i,a,s){if(!i[s]){a.trigger({type:"usage",name:"vhs-608"});let o=s;/^cc708_/.test(s)&&(o="SERVICE"+s.split("_")[1]);const u=a.textTracks().getTrackById(o);if(u)i[s]=u;else{let u=s,_=s,x=!1;const w=(a.options_.vhs&&a.options_.vhs.captionServices||{})[o];w&&(u=w.label,_=w.language,x=w.default),i[s]=a.addRemoteTextTrack({kind:"captions",id:o,default:x,label:u,language:_},!1).track}}},"createCaptionsTrackIfNotExists$1"),$_=/* @__PURE__ */__name(function({inbandTextTracks:i,captionArray:a,timestampOffset:s}){if(!a)return;const o=Tn.WebKitDataCue||Tn.VTTCue;a.forEach(a=>{const u=a.stream;a.content?a.content.forEach(_=>{const x=new o(a.startTime+s,a.endTime+s,_.text);x.line=_.line,x.align="left",x.position=_.position,x.positionAlign="line-left",i[u].addCue(x)}):i[u].addCue(new o(a.startTime+s,a.endTime+s,a.text))})},"addCaptionData$1"),G_=/* @__PURE__ */__name(function(i){Object.defineProperties(i.frame,{id:{get:()=>(videojs$2.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key)},value:{get:()=>(videojs$2.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data)},privateData:{get:()=>(videojs$2.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data)}})},"deprecateOldCue$1"),W_=/* @__PURE__ */__name(({inbandTextTracks:i,metadataArray:a,timestampOffset:s,videoDuration:o})=>{if(!a)return;const u=Tn.WebKitDataCue||Tn.VTTCue,_=i.metadataTrack_;if(!_)return;if(a.forEach(i=>{const a=i.cueTime+s;!("number"!=typeof a||Tn.isNaN(a)||a<0)&&a<1/0&&i.frames&&i.frames.length&&i.frames.forEach(i=>{const s=new u(a,a,i.value||i.url||i.data||"");s.frame=i,s.value=i,G_(s),_.addCue(s)})}),!_.cues||!_.cues.length)return;const x=_.cues,w=[];for(let B=0;B<x.length;B++)x[B]&&w.push(x[B]);const C=w.reduce((i,a)=>{const s=i[a.startTime]||[];return s.push(a),i[a.startTime]=s,i},{}),L=Object.keys(C).sort((i,a)=>Number(i)-Number(a));L.forEach((i,a)=>{const s=C[i],u=isFinite(o)?o:i,_=Number(L[a+1])||u;s.forEach(i=>{i.endTime=_})})},"addMetadata$1"),q_={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},X_=/* @__PURE__ */new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Q_=/* @__PURE__ */__name(({inbandTextTracks:i,dateRanges:a})=>{const s=i.metadataTrack_;if(!s)return;const o=Tn.WebKitDataCue||Tn.VTTCue;a.forEach(i=>{for(const a of Object.keys(i)){if(X_.has(a))continue;const u=new o(i.startTime,i.endTime,"");u.id=i.id,u.type="com.apple.quicktime.HLS",u.value={key:q_[a],data:i[a]},"scte35Out"!==a&&"scte35In"!==a||(u.value.data=new Uint8Array(u.value.data.match(/[\da-f]{2}/gi)).buffer),s.addCue(u)}i.processDateRange()})},"addDateRangeMetadata"),K_=/* @__PURE__ */__name((i,a,s)=>{i.metadataTrack_||(i.metadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,videojs$2.browser.IS_ANY_SAFARI||(i.metadataTrack_.inBandMetadataTrackDispatchType=a))},"createMetadataTrackIfNotExists$1"),Y_=/* @__PURE__ */__name(function(i,a,s){let o,u;if(s&&s.cues)for(o=s.cues.length;o--;)u=s.cues[o],u.startTime>=i&&u.endTime<=a&&s.removeCue(u)},"removeCuesFromTrack$1"),J_=/* @__PURE__ */__name(function(i){const a=i.cues;if(!a)return;const s={};for(let o=a.length-1;o>=0;o--){const u=a[o],_=`${u.startTime}-${u.endTime}-${u.text}`;s[_]?i.removeCue(u):s[_]=u}},"removeDuplicateCuesFromTrack$1"),Z_=/* @__PURE__ */__name((i,a,s)=>{if(null==a||!i.length)return[];const o=Math.ceil((a-s+3)*bo.ONE_SECOND_IN_TS);let u;for(u=0;u<i.length&&!(i[u].pts>o);u++);return i.slice(u)},"gopsSafeToAlignWith$1"),ey=/* @__PURE__ */__name((i,a,s)=>{if(!a.length)return i;if(s)return a.slice();const o=a[0].pts;let u=0;for(;u<i.length&&!(i[u].pts>=o);u++);return i.slice(0,u).concat(a)},"updateGopBuffer$1"),ty=/* @__PURE__ */__name((i,a,s,o)=>{const u=Math.ceil((a-o)*bo.ONE_SECOND_IN_TS),_=Math.ceil((s-o)*bo.ONE_SECOND_IN_TS),x=i.slice();let w=i.length;for(;w--&&!(i[w].pts<=_););if(-1===w)return x;let C=w+1;for(;C--&&!(i[C].pts<=u););return C=Math.max(C,0),x.splice(C,w-C+1),x},"removeGopBuffer$1"),ny=/* @__PURE__ */__name(function(i,a){if(!i&&!a||!i&&a||i&&!a)return!1;if(i===a)return!0;const s=Object.keys(i).sort(),o=Object.keys(a).sort();if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){const _=s[u];if(_!==o[u])return!1;if(i[_]!==a[_])return!1}return!0},"shallowEqual$1"),iy=/* @__PURE__ */__name(function(i,a,s){a=a||[];const o=[];let u=0;for(let _=0;_<a.length;_++){const x=a[_];if(i===x.timeline&&(o.push(_),u+=x.duration,u>s))return _}return 0===o.length?0:o[o.length-1]},"getSyncSegmentCandidate$1"),ry=/* @__PURE__ */__name(i=>"number"==typeof i&&isFinite(i),"finite$1"),ay=1/60,sy=/* @__PURE__ */__name((i,a,s)=>"main"===i&&a&&s?s.hasAudio||s.hasVideo?a.hasVideo&&!s.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.hasVideo&&s.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null,"illegalMediaSwitch$1"),oy=/* @__PURE__ */__name((i,a,s)=>{let o=a-yg.BACK_BUFFER_LENGTH;i.length&&(o=Math.max(o,i.start(0)));const u=a-s;return Math.min(u,o)},"safeBackBufferTrimTime$1"),ly=/* @__PURE__ */__name(i=>{const{startOfSegment:a,duration:s,segment:o,part:u,playlist:{mediaSequence:_,id:x,segments:w=[]},mediaIndex:C,partIndex:L,timeline:B}=i,U=w.length-1;let j="mediaIndex/partIndex increment";i.getMediaInfoForTime?j=`getMediaInfoForTime (${i.getMediaInfoForTime})`:i.isSyncRequest&&(j="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(j+=` with independent ${i.independent}`);const V="number"==typeof L,z=i.segment.uri?"segment":"pre-segment",$=V?cm({preloadSegment:o})-1:0;return`${z} [${_+C}/${_+U}]`+(V?` part [${L}/${$}]`:"")+` segment start/end [${o.start} => ${o.end}]`+(V?` part start/end [${u.start} => ${u.end}]`:"")+` startOfSegment [${a}] duration [${s}] timeline [${B}] selected by [${j}] playlist [${x}]`},"segmentInfoString$1"),cy=/* @__PURE__ */__name(i=>`${i}TimingInfo`,"timingInfoPropertyForMedia$1"),uy=/* @__PURE__ */__name(({segmentTimeline:i,currentTimeline:a,startOfSegment:s,buffered:o,overrideCheck:u})=>u||i!==a?i<a?s:o.length?o.end(o.length-1):s:null,"timestampOffsetForSegment$1"),dy=/* @__PURE__ */__name(({timelineChangeController:i,currentTimeline:a,segmentTimeline:s,loaderType:o,audioDisabled:u})=>{if(a===s)return!1;if("audio"===o){const a=i.lastTimelineChange({type:"main"});return!a||a.to!==s}if("main"===o&&u){const a=i.pendingTimelineChange({type:"audio"});return!a||a.to!==s}return!1},"shouldWaitForTimelineChange$1"),hy=/* @__PURE__ */__name(i=>{if(!i)return!1;const a=i.pendingTimelineChange({type:"audio"}),s=i.pendingTimelineChange({type:"main"}),o=a&&s,u=o&&a.to!==s.to;return!(!o||-1===a.from||-1===s.from||!u)},"shouldFixBadTimelineChanges"),py=/* @__PURE__ */__name(i=>{const a=i.timelineChangeController_.pendingTimelineChange({type:"audio"}),s=i.timelineChangeController_.pendingTimelineChange({type:"main"});return a&&s&&a.to<s.to},"isAudioTimelineBehind"),my=/* @__PURE__ */__name(i=>{const a=i.pendingSegment_;if(!a)return;if(dy({timelineChangeController:i.timelineChangeController_,currentTimeline:i.currentTimeline_,segmentTimeline:a.timeline,loaderType:i.loaderType_,audioDisabled:i.audioDisabled_})&&hy(i.timelineChangeController_)){if(py(i))return void i.timelineChangeController_.trigger("audioTimelineBehind");i.timelineChangeController_.trigger("fixBadTimelineChange")}},"checkAndFixTimelines"),fy=/* @__PURE__ */__name(i=>{let a=0;return["video","audio"].forEach(function(s){const o=i[`${s}TimingInfo`];if(!o)return;const{start:u,end:_}=o;let x;"bigint"==typeof u||"bigint"==typeof _?x=Tn.BigInt(_)-Tn.BigInt(u):"number"==typeof u&&"number"==typeof _&&(x=_-u),void 0!==x&&x>a&&(a=x)}),"bigint"==typeof a&&a<Number.MAX_SAFE_INTEGER&&(a=Number(a)),a},"mediaDuration$1"),gy=/* @__PURE__ */__name(({segmentDuration:i,maxDuration:a})=>!!i&&Math.round(i)>a+qp,"segmentTooLong$1"),_y=/* @__PURE__ */__name((i,a)=>{if("hls"!==a)return null;const s=fy({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!s)return null;const o=i.playlist.targetDuration,u=gy({segmentDuration:s,maxDuration:2*o}),_=gy({segmentDuration:s,maxDuration:o}),x=`Segment with index ${i.mediaIndex} from playlist ${i.playlist.id} has a duration of ${s} when the reported duration is ${i.duration} and the target duration is ${o}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return u||_?{severity:u?"warn":"info",message:x}:null},"getTroublesomeSegmentDurationMessage$1"),yy=/* @__PURE__ */__name(({type:i,segment:a})=>{if(!a)return;const s=Boolean(a.key||a.map&&a.map.ke),o=Boolean(a.map&&!a.map.bytes),u=void 0===a.startOfSegment?a.start:a.startOfSegment;return{type:i||a.type,uri:a.resolvedUri||a.uri,start:u,duration:a.duration,isEncrypted:s,isMediaInitialization:o}},"segmentInfoPayload");let vy=(Ut=class extends videojs$2.EventTarget{constructor(i,a={}){if(super(),!i)throw new TypeError("Initialization settings are required");if("function"!=typeof i.currentTime)throw new TypeError("No currentTime getter specified");if(!i.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=i.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=i.hasPlayed,this.currentTime_=i.currentTime,this.seekable_=i.seekable,this.seeking_=i.seeking,this.duration_=i.duration,this.mediaSource_=i.mediaSource,this.vhs_=i.vhs,this.loaderType_=i.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=i.segmentMetadataTrack,this.goalBufferLength_=i.goalBufferLength,this.sourceType_=i.sourceType,this.sourceUpdater_=i.sourceUpdater,this.inbandTextTracks_=i.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=i.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=i.parse708captions,this.useDtsForTimestampOffset_=i.useDtsForTimestampOffset,this.captionServices_=i.captionServices,this.exactManifestTimings=i.exactManifestTimings,this.addMetadataToTextTrack=i.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=i.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=i.decrypter,this.syncController_=i.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Wp(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():my(this)}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(_extends({type:"codecschange"},i))}),"main"===this.loaderType_&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():my(this)}),"audio"===this.loaderType_&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(_extends({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():my(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():my(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return o_.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Tn.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if("WAITING"!==this.state)return this.pendingSegment_&&(this.pendingSegment_=null),void this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Tn.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(i){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==i:(this.state="READY",!0)}error(i){return void 0!==i&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&o_.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return createTimeRanges$2();if("main"===this.loaderType_){const{hasAudio:a,hasVideo:s,isMuxed:o}=i;if(s&&a&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(i,a=!1){if(!i)return null;const s=kf(i);let o=this.initSegments_[s];return a&&!o&&i.bytes&&(this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),o||i}segmentKey(i,a=!1){if(!i)return null;const s=Pf(i);let o=this.keyCache_[s];this.cacheEncryptionKeys_&&a&&!o&&i.bytes&&(this.keyCache_[s]=o={resolvedUri:i.resolvedUri,bytes:i.bytes});const u={resolvedUri:(o||i).resolvedUri};return o&&(u.bytes=o.bytes),u}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(i,a={}){if(!i)return;if(this.playlist_&&this.playlist_.endList&&i.endList&&this.playlist_.uri===i.uri)return;const s=this.playlist_,o=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=a,"INIT"===this.state&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(i));let u=null;if(s&&(s.id?u=s.id:s.uri&&(u=s.uri)),this.logger_(`playlist update [${u} => ${i.id||i.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(i,this.currentTime_()),this.logger_(`Playlist update:\ncurrentTime: ${this.currentTime_()}\nbufferedEnd: ${rm(this.buffered_())}\n`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==i.uri){if(null!==this.mediaIndex){!i.endList&&"number"==typeof i.partTargetDuration?this.resetLoader():this.resyncLoader()}return this.currentMediaInfo_=void 0,void this.trigger("playlistupdate")}const _=i.mediaSequence-s.mediaSequence;if(this.logger_(`live window shift [${_}]`),null!==this.mediaIndex)if(this.mediaIndex-=_,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const i=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!i.parts||!i.parts.length||!i.parts[this.partIndex])){const i=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=i}}o&&(o.mediaIndex-=_,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=i.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,i)}pause(){this.checkBufferTimeout_&&(Tn.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return null===this.checkBufferTimeout_}resetEverything(i){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&o_.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const i=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;"hls"===this.sourceType_&&!i&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(i,a,s=()=>{},o=!1){if(a===1/0&&(a=this.duration_()),a<=i)return void this.logger_("skipping remove because end ${end} is <= start ${start}");if(!this.sourceUpdater_||!this.getMediaInfo_())return void this.logger_("skipping remove because no source updater or starting media info");let u=1;const _=/* @__PURE__ */__name(()=>{u--,0===u&&s()},"removeFinished");!o&&this.audioDisabled_||(u++,this.sourceUpdater_.removeAudio(i,a,_)),(o||"main"===this.loaderType_)&&(this.gopBuffer_=ty(this.gopBuffer_,i,a,this.timeMapping_),u++,this.sourceUpdater_.removeVideo(i,a,_));for(const x in this.inbandTextTracks_)Y_(i,a,this.inbandTextTracks_[x]);Y_(i,a,this.segmentMetadataTrack_),_()}monitorBuffer_(){this.checkBufferTimeout_&&Tn.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Tn.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Tn.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Tn.setTimeout(this.monitorBufferTick_.bind(this),500)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const i=this.chooseNextRequest_();if(!i)return;const a={segmentInfo:yy({type:this.loaderType_,segment:i})};this.trigger({type:"segmentselected",metadata:a}),"number"==typeof i.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i)}isEndOfStream_(i=this.mediaIndex,a=this.playlist_,s=this.partIndex){if(!a||!this.mediaSource_)return!1;const o="number"==typeof i&&a.segments[i],u=i+1===a.segments.length,_=!o||!o.parts||s+1===o.parts.length;return a.endList&&"open"===this.mediaSource_.readyState&&u&&_}chooseNextRequest_(){const i=this.buffered_(),a=rm(i)||0,s=am(i,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,u=s>=this.goalBufferLength_(),_=this.playlist_.segments;if(!_.length||o||u)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const x={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(x.isSyncRequest)x.mediaIndex=iy(this.currentTimeline_,_,a),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${x.mediaIndex}`);else if(null!==this.mediaIndex){const i=_[this.mediaIndex],s="number"==typeof this.partIndex?this.partIndex:-1;x.startOfSegment=i.end?i.end:a,i.parts&&i.parts[s+1]?(x.mediaIndex=this.mediaIndex,x.partIndex=s+1):x.mediaIndex=this.mediaIndex+1}else{let i,s,o;const u=this.fetchAtBuffer_?a:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:\nFor TargetTime: ${u}.\nCurrentTime: ${this.currentTime_()}\nBufferedEnd: ${a}\nFetch At Buffer: ${this.fetchAtBuffer_}\n`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const a=this.getSyncInfoFromMediaSequenceSync_(u);if(!a){const i="No sync info found while using media sequence sync";return this.error({message:i,metadata:{errorType:videojs$2.Error.StreamingFailedToSelectNextSegment,error:new Error(i)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${a.start} --\x3e ${a.end})`),i=a.segmentIndex,s=a.partIndex,o=a.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const a=Pm.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:u,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});i=a.segmentIndex,s=a.partIndex,o=a.startTime}x.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${u}`:`currentTime ${u}`,x.mediaIndex=i,x.startOfSegment=o,x.partIndex=s,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${x.mediaIndex} `)}const w=_[x.mediaIndex];let C=w&&"number"==typeof x.partIndex&&w.parts&&w.parts[x.partIndex];if(!w||"number"==typeof x.partIndex&&!C)return null;"number"!=typeof x.partIndex&&w.parts&&(x.partIndex=0,C=w.parts[0]);const L=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!s&&C&&!L&&!C.independent)if(0===x.partIndex){const i=_[x.mediaIndex-1],a=i.parts&&i.parts.length&&i.parts[i.parts.length-1];a&&a.independent&&(x.mediaIndex-=1,x.partIndex=i.parts.length-1,x.independent="previous segment")}else w.parts[x.partIndex-1].independent&&(x.partIndex-=1,x.independent="previous part");const B=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return x.mediaIndex>=_.length-1&&B&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,x.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(x))}getSyncInfoFromMediaSequenceSync_(i){if(!this.mediaSequenceSync_)return null;const a=Math.max(i,this.mediaSequenceSync_.start);i!==a&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${i} to ${a}`);const s=this.mediaSequenceSync_.getSyncInfoForTime(a);if(!s)return null;if(!s.isAppended)return s;const o=this.mediaSequenceSync_.getSyncInfoForTime(s.end);return o?(o.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),o):null}generateSegmentInfo_(i){const{independent:a,playlist:s,mediaIndex:o,startOfSegment:u,isSyncRequest:_,partIndex:x,forceTimestampOffset:w,getMediaInfoForTime:C}=i,L=s.segments[o],B="number"==typeof x&&L.parts[x],U={requestId:"segment-loader-"+Math.random(),uri:B&&B.resolvedUri||L.resolvedUri,mediaIndex:o,partIndex:B?x:null,isSyncRequest:_,startOfSegment:u,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:L.timeline,duration:B&&B.duration||L.duration,segment:L,part:B,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:C,independent:a},j=void 0!==w?w:this.isPendingTimestampOffset_;U.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:L.timeline,currentTimeline:this.currentTimeline_,startOfSegment:u,buffered:this.buffered_(),overrideCheck:j});const V=rm(this.sourceUpdater_.audioBuffered());return"number"==typeof V&&(U.audioAppendStart=V-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(U.gopsToAlignWith=Z_(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),U}timestampOffsetForSegment_(i){return uy(i)}earlyAbortWhenNeeded_(i){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return;if(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)return;const a=this.currentTime_(),s=i.bandwidth,o=this.pendingSegment_.duration,u=Pm.estimateSegmentRequestTime(o,s,this.playlist_,i.bytesReceived),_=tm(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(u<=_)return;const x=j_({main:this.vhs_.playlists.main,currentTime:a,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:_,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!x)return;const w=u-_-x.rebufferingImpact;let C=.5;_<=qp&&(C=1),!x.playlist||x.playlist.uri===this.playlist_.uri||w<C||(this.bandwidth=x.playlist.attributes.BANDWIDTH*yg.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(i){this.logger_(`Aborting ${ly(i)}`),this.mediaRequestsAborted+=1}handleProgress_(i,a){this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId)||this.trigger("progress")}handleTrackInfo_(i,a){const{hasAudio:s,hasVideo:o}=a,u={segmentInfo:yy({type:this.loaderType_,segment:i}),trackInfo:{hasAudio:s,hasVideo:o}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:u}),this.earlyAbortWhenNeeded_(i.stats),this.checkForAbort_(i.requestId)||this.checkForIllegalMediaSwitch(a)||(a=a||{},ny(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),this.checkForAbort_(i.requestId)||(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()?this.processCallQueue_():my(this)))}handleTimingInfo_(i,a,s,o){if(this.earlyAbortWhenNeeded_(i.stats),this.checkForAbort_(i.requestId))return;const u=this.pendingSegment_,_=cy(a);u[_]=u[_]||{},u[_][s]=o,this.logger_(`timinginfo: ${a} - ${s} - ${o}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():my(this)}handleCaptions_(i,a){if(this.earlyAbortWhenNeeded_(i.stats),this.checkForAbort_(i.requestId))return;if(0===a.length)return void this.logger_("SegmentLoader received no captions from a caption event");if(!this.pendingSegment_.hasAppendedData_)return void this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,a));const s=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),o={};a.forEach(i=>{o[i.stream]=o[i.stream]||{startTime:1/0,captions:[],endTime:0};const a=o[i.stream];a.startTime=Math.min(a.startTime,i.startTime+s),a.endTime=Math.max(a.endTime,i.endTime+s),a.captions.push(i)}),Object.keys(o).forEach(i=>{const{startTime:a,endTime:u,captions:_}=o[i],x=this.inbandTextTracks_;this.logger_(`adding cues from ${a} -> ${u} for ${i}`),H_(x,this.vhs_.tech_,i),Y_(a,u,x[i]),$_({captionArray:_,inbandTextTracks:x,timestampOffset:s})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(i,a,s){if(this.earlyAbortWhenNeeded_(i.stats),this.checkForAbort_(i.requestId))return;this.pendingSegment_.hasAppendedData_?this.addMetadataToTextTrack(s,a,this.duration_()):this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,a,s))}processMetadataQueue_(){this.metadataQueue_.id3.forEach(i=>i()),this.metadataQueue_.caption.forEach(i=>i()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const i=this.callQueue_;this.callQueue_=[],i.forEach(i=>i())}processLoadQueue_(){const i=this.loadQueue_;this.loadQueue_=[],i.forEach(i=>i())}hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;const i=this.pendingSegment_;return!!i&&(!this.getCurrentMediaInfo_()||!dy({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}getCurrentMediaInfo_(i=this.pendingSegment_){return i&&i.trackInfo||this.currentMediaInfo_}getMediaInfo_(i=this.pendingSegment_){return this.getCurrentMediaInfo_(i)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const i=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!i||!a)return!1;const{hasAudio:s,hasVideo:o,isMuxed:u}=a;return!(o&&!i.videoTimingInfo)&&(!(s&&!this.audioDisabled_&&!u&&!i.audioTimingInfo)&&!dy({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(i,a){if(this.earlyAbortWhenNeeded_(i.stats),this.checkForAbort_(i.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_())return my(this),void this.callQueue_.push(this.handleData_.bind(this,i,a));const s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),"closed"!==this.mediaSource_.readyState){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),s.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),s.isFmp4=i.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[cy(a.type)].start;else{const i=this.getCurrentMediaInfo_(),a="main"===this.loaderType_&&i&&i.hasVideo;let o;a&&(o=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:o,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,a.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:"main"===this.loaderType_});const i=this.chooseNextRequest_();if(i.mediaIndex!==s.mediaIndex||i.partIndex!==s.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,a)}}updateAppendInitSegmentStatus(i,a){"main"!==this.loaderType_||"number"!=typeof i.timestampOffset||i.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==i.playlist&&(this.appendInitSegment_[a]=!0)}getInitSegmentAndUpdateState_({type:i,initSegment:a,map:s,playlist:o}){if(s){const i=kf(s);if(this.activeInitSegmentId_===i)return null;a=this.initSegmentForMap(s,!0).bytes,this.activeInitSegmentId_=i}return a&&this.appendInitSegment_[i]?(this.playlistOfLastInitSegment_[i]=o,this.appendInitSegment_[i]=!1,this.activeInitSegmentId_=null,a):null}handleQuotaExceededError_({segmentInfo:i,type:a,bytes:s},o){const u=this.sourceUpdater_.audioBuffered(),_=this.sourceUpdater_.videoBuffered();u.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+nm(u).join(", ")),_.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+nm(_).join(", "));const x=u.length?u.start(0):0,w=u.length?u.end(u.length-1):0,C=_.length?_.start(0):0,L=_.length?_.end(_.length-1):0;if(w-x<=1&&L-C<=1)return this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${s.byteLength}, audio buffer: ${nm(u).join(", ")}, video buffer: ${nm(_).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:i,type:a,bytes:s}));const B=this.currentTime_()-1;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${B}`),this.remove(0,B,()=>{this.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=Tn.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},1e3)},!0)}handleAppendError_({segmentInfo:i,type:a,bytes:s},o){o&&(22!==o.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",o),this.error({message:`${a} append of ${s.length}b failed for segment #${i.mediaIndex} in playlist ${i.playlist.id}`,metadata:{errorType:videojs$2.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:i,type:a,bytes:s}))}appendToSourceBuffer_({segmentInfo:i,type:a,initSegment:s,data:o,bytes:u}){if(!u){const i=[o];let a=o.byteLength;s&&(i.unshift(s),a+=s.byteLength),u=z_({bytes:a,segments:i})}const _={segmentInfo:yy({type:this.loaderType_,segment:i})};this.trigger({type:"segmentappendstart",metadata:_}),this.sourceUpdater_.appendBuffer({segmentInfo:i,type:a,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:i,type:a,bytes:u}))}handleSegmentTimingInfo_(i,a,s){if(!this.pendingSegment_||a!==this.pendingSegment_.requestId)return;const o=this.pendingSegment_.segment,u=`${i}TimingInfo`;o[u]||(o[u]={}),o[u].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[u].transmuxedPresentationStart=s.start.presentation,o[u].transmuxedDecodeStart=s.start.decode,o[u].transmuxedPresentationEnd=s.end.presentation,o[u].transmuxedDecodeEnd=s.end.decode,o[u].baseMediaDecodeTime=s.baseMediaDecodeTime}appendData_(i,a){const{type:s,data:o}=a;if(!o||!o.byteLength)return;if("audio"===s&&this.audioDisabled_)return;const u=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:s,initSegment:u,data:o})}loadSegment_(i){if(this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),"number"==typeof i.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_())return my(this),void this.loadQueue_.push(()=>{const a=_extends({},i,{forceTimestampOffset:!0});_extends(i,this.generateSegmentInfo_(a)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(i)});this.updateTransmuxerAndRequestSegment_(i)}updateTransmuxerAndRequestSegment_(i){this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));const a=this.createSimplifiedSegmentObj_(i),s=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex),o=null!==this.mediaIndex,u=i.timeline!==this.currentTimeline_&&i.timeline>0,_=s||o&&u;this.logger_(`Requesting\n${compactSegmentUrlDescription(i.uri)}\n${ly(i)}`),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=P_({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:_,endedTimelineFn:/* @__PURE__ */__name(()=>{this.logger_("received endedtimeline callback")},"endedTimelineFn"),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:/* @__PURE__ */__name(({message:a,level:s,stream:o})=>{this.logger_(`${ly(i)} logged from transmuxer stream ${o} as a ${s}: ${a}`)},"onTransmuxerLog"),triggerSegmentEventFn:/* @__PURE__ */__name(({type:i,segment:a,keyInfo:s,trackInfo:o,timingInfo:u})=>{const _={segmentInfo:yy({segment:a})};s&&(_.keyInfo=s),o&&(_.trackInfo=o),u&&(_.timingInfo=u),this.trigger({type:i,metadata:_})},"triggerSegmentEventFn")})}trimBackBuffer_(i){const a=oy(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)}createSimplifiedSegmentObj_(i){const a=i.segment,s=i.part,o=i.segment.key||i.segment.map&&i.segment.map.key,u=i.segment.map&&!i.segment.map.bytes,_={resolvedUri:s?s.resolvedUri:a.resolvedUri,byterange:s?s.byterange:a.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part,type:this.loaderType_,start:i.startOfSegment,duration:i.duration,isEncrypted:o,isMediaInitialization:u},x=i.playlist.segments[i.mediaIndex-1];if(x&&x.timeline===a.timeline&&(x.videoTimingInfo?_.baseStartTime=x.videoTimingInfo.transmuxedDecodeEnd:x.audioTimingInfo&&(_.baseStartTime=x.audioTimingInfo.transmuxedDecodeEnd)),a.key){const s=a.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);_.key=this.segmentKey(a.key),_.key.iv=s}return a.map&&(_.map=this.initSegmentForMap(a.map)),_}saveTransferStats_(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)}saveBandwidthRelatedStats_(i,a){if(this.pendingSegment_.byteLength=a.bytesReceived,i<ay)return void this.logger_(`Ignoring segment's bandwidth because its duration of ${i} is less than the min to record 0.016666666666666666`);const s={bandwidthInfo:{from:this.bandwidth,to:a.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:s}),this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(i,a,s){if(this.callQueue_.length)return void this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,a,s));if(this.saveTransferStats_(a.stats),!this.pendingSegment_)return;if(a.requestId!==this.pendingSegment_.requestId)return;if(i){if(this.pendingSegment_=null,this.state="READY",i.code===d_)return;return this.pause(),i.code===u_?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(i),void this.trigger("error"))}const o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,a.stats),o.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=ey(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}setTimeMapping_(i){const a=this.syncController_.mappingForTimeline(i);null!==a&&(this.timeMapping_=a)}updateMediaSecondsLoaded_(i){"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration}shouldUpdateTransmuxerTimestampOffset_(i){return null!==i&&("main"===this.loaderType_&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset())}trueSegmentStart_({currentStart:i,playlist:a,mediaIndex:s,firstVideoFrameTimeForData:o,currentVideoTimestampOffset:u,useVideoTimingInfo:_,videoTimingInfo:x,audioTimingInfo:w}){if(void 0!==i)return i;if(!_)return w.start;const C=a.segments[s-1];return 0!==s&&C&&void 0!==C.start&&C.end===o+u?x.start:o}waitForAppendsToComplete_(i){const a=this.getCurrentMediaInfo_(i);if(!a)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");const{hasAudio:s,hasVideo:o,isMuxed:u}=a,_="main"===this.loaderType_&&o,x=!this.audioDisabled_&&s&&!u;if(i.waitingOnAppends=0,!i.hasAppendedData_)return i.timingInfo||"number"!=typeof i.timestampOffset||(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),void this.checkAppendsDone_(i);_&&i.waitingOnAppends++,x&&i.waitingOnAppends++,_&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),x&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))}checkAppendsDone_(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,0===i.waitingOnAppends&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(i){const a=sy(this.loaderType_,this.getCurrentMediaInfo_(),i);return!!a&&(this.error({message:a,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}updateSourceBufferTimestampOffset_(i){if(null===i.timestampOffset||"number"!=typeof i.timingInfo.start||i.changedTimestampOffset||"main"!==this.loaderType_)return;let a=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),a=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i,audioTimingInfo:a,timingInfo:s}){return this.useDtsForTimestampOffset_?i&&"number"==typeof i.transmuxedDecodeStart?i.transmuxedDecodeStart:a&&"number"==typeof a.transmuxedDecodeStart?a.transmuxedDecodeStart:s.start:s.start}updateTimingInfoEnd_(i){i.timingInfo=i.timingInfo||{};const a=this.getMediaInfo_(),s="main"===this.loaderType_&&a&&a.hasVideo&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;s&&(i.timingInfo.end="number"==typeof s.end?s.end:s.start+i.duration)}handleAppendsDone_(){if(this.pendingSegment_){const i={segmentInfo:yy({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:i})}if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());const i=this.pendingSegment_;i.part&&i.part.syncInfo?i.part.syncInfo.markAppended():i.segment.syncInfo&&i.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});const a=_y(i,this.sourceType_);if(a&&("warn"===a.severity?videojs$2.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",i.isSyncRequest&&(this.trigger("syncinfoupdate"),!i.hasAppendedData_))return void this.logger_(`Throwing away un-appended sync request ${ly(i)}`);this.logger_(`Appended ${ly(i)}`),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");const s=i.segment,o=i.part,u=s.end&&this.currentTime_()-s.end>3*i.playlist.targetDuration,_=o&&o.end&&this.currentTime_()-o.end>3*i.playlist.partTargetDuration;if(u||_)return this.logger_(`bad ${u?"segment":"part"} ${ly(i)}`),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(i){if(i.duration<ay)return void this.logger_(`Ignoring segment's throughput because its duration of ${i.duration} is less than the min to record 0.016666666666666666`);const a=this.throughput.rate,s=Date.now()-i.endOfAllRequests+1,o=Math.floor(i.byteLength/s*8*1e3);this.throughput.rate+=(o-a)/++this.throughput.count}addSegmentMetadataCue_(i){if(!this.segmentMetadataTrack_)return;const a=i.segment,s=a.start,o=a.end;if(!ry(s)||!ry(o))return;Y_(s,o,this.segmentMetadataTrack_);const u=Tn.WebKitDataCue||Tn.VTTCue,_={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,programDateTime:a.programDateTime,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:s,end:o},x=new u(s,o,JSON.stringify(_));x.value=_,this.segmentMetadataTrack_.addCue(x)}},__name(Ut,"SegmentLoader"),Ut);function noop$1(){}__name(noop$1,"noop$1");const by=/* @__PURE__ */__name(function(i){return"string"!=typeof i?i:i.replace(/./,i=>i.toUpperCase())},"toTitleCase$2"),Ty=["video","audio"],Sy=/* @__PURE__ */__name((i,a)=>{const s=a[`${i}Buffer`];return s&&s.updating||a.queuePending[i]},"updating"),xy=/* @__PURE__ */__name((i,a)=>{for(let s=0;s<a.length;s++){const o=a[s];if("mediaSource"===o.type)return null;if(o.type===i)return s}return null},"nextQueueIndexOfType$1"),wy=/* @__PURE__ */__name((i,a)=>{if(0===a.queue.length)return;let s=0,o=a.queue[s];if("mediaSource"!==o.type){if("mediaSource"!==i&&a.ready()&&"closed"!==a.mediaSource.readyState&&!Sy(i,a)){if(o.type!==i){if(s=xy(i,a.queue),null===s)return;o=a.queue[s]}return a.queue.splice(s,1),a.queuePending[i]=o,o.action(i,a),o.doneFn?void 0:(a.queuePending[i]=null,void wy(i,a))}}else a.updating()||"closed"===a.mediaSource.readyState||(a.queue.shift(),o.action(a),o.doneFn&&o.doneFn(),wy("audio",a),wy("video",a))},"shiftQueue$1"),Ay=/* @__PURE__ */__name((i,a)=>{const s=a[`${i}Buffer`],o=by(i);s&&(s.removeEventListener("updateend",a[`on${o}UpdateEnd_`]),s.removeEventListener("error",a[`on${o}Error_`]),a.codecs[i]=null,a[`${i}Buffer`]=null)},"cleanupBuffer$1"),Cy=/* @__PURE__ */__name((i,a)=>i&&a&&-1!==Array.prototype.indexOf.call(i.sourceBuffers,a),"inSourceBuffers$1"),Ey={appendBuffer:/* @__PURE__ */__name((i,a,s)=>(o,u)=>{const _=u[`${o}Buffer`];if(Cy(u.mediaSource,_)){u.logger_(`Appending segment ${a.mediaIndex}'s ${i.length} bytes to ${o}Buffer`);try{_.appendBuffer(i)}catch(x){u.logger_(`Error with code ${x.code} `+(22===x.code?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${a.mediaIndex} to ${o}Buffer`),u.queuePending[o]=null,s(x)}}},"appendBuffer"),remove:/* @__PURE__ */__name((i,a)=>(s,o)=>{const u=o[`${s}Buffer`];if(Cy(o.mediaSource,u)){o.logger_(`Removing ${i} to ${a} from ${s}Buffer`);try{u.remove(i,a)}catch(_){o.logger_(`Remove ${i} to ${a} from ${s}Buffer failed`)}}},"remove"),timestampOffset:/* @__PURE__ */__name(i=>(a,s)=>{const o=s[`${a}Buffer`];Cy(s.mediaSource,o)&&(s.logger_(`Setting ${a}timestampOffset to ${i}`),o.timestampOffset=i)},"timestampOffset"),callback:/* @__PURE__ */__name(i=>(a,s)=>{i()},"callback"),endOfStream:/* @__PURE__ */__name(i=>a=>{if("open"===a.mediaSource.readyState){a.logger_(`Calling mediaSource endOfStream(${i||""})`);try{a.mediaSource.endOfStream(i)}catch(s){videojs$2.log.warn("Failed to call media source endOfStream",s)}}},"endOfStream"),duration:/* @__PURE__ */__name(i=>a=>{a.logger_(`Setting mediaSource duration to ${i}`);try{a.mediaSource.duration=i}catch(s){videojs$2.log.warn("Failed to set media source duration",s)}},"duration"),abort:/* @__PURE__ */__name(()=>(i,a)=>{if("open"!==a.mediaSource.readyState)return;const s=a[`${i}Buffer`];if(Cy(a.mediaSource,s)){a.logger_(`calling abort on ${i}Buffer`);try{s.abort()}catch(o){videojs$2.log.warn(`Failed to abort on ${i}Buffer`,o)}}},"abort"),addSourceBuffer:/* @__PURE__ */__name((i,a)=>s=>{const o=by(i),u=hr(a);s.logger_(`Adding ${i}Buffer with codec ${a} to mediaSource`);const _=s.mediaSource.addSourceBuffer(u);_.addEventListener("updateend",s[`on${o}UpdateEnd_`]),_.addEventListener("error",s[`on${o}Error_`]),s.codecs[i]=a,s[`${i}Buffer`]=_},"addSourceBuffer"),removeSourceBuffer:/* @__PURE__ */__name(i=>a=>{const s=a[`${i}Buffer`];if(Ay(i,a),Cy(a.mediaSource,s)){a.logger_(`Removing ${i}Buffer with codec ${a.codecs[i]} from mediaSource`);try{a.mediaSource.removeSourceBuffer(s)}catch(o){videojs$2.log.warn(`Failed to removeSourceBuffer ${i}Buffer`,o)}}},"removeSourceBuffer"),changeType:/* @__PURE__ */__name(i=>(a,s)=>{const o=s[`${a}Buffer`],u=hr(i);if(!Cy(s.mediaSource,o))return;const _=i.substring(0,i.indexOf(".")),x=s.codecs[a];if(x.substring(0,x.indexOf("."))===_)return;const w={codecsChangeInfo:{from:x,to:i}};s.trigger({type:"codecschange",metadata:w}),s.logger_(`changing ${a}Buffer codec from ${x} to ${i}`);try{o.changeType(u),s.codecs[a]=i}catch(C){w.errorType=videojs$2.Error.StreamingCodecsChangeError,w.error=C,C.metadata=w,s.error_=C,s.trigger("error"),videojs$2.log.warn(`Failed to changeType on ${a}Buffer`,C)}},"changeType")},My=/* @__PURE__ */__name(({type:i,sourceUpdater:a,action:s,doneFn:o,name:u})=>{a.queue.push({type:i,action:s,doneFn:o,name:u}),wy(i,a)},"pushQueue$1"),ky=/* @__PURE__ */__name((i,a)=>s=>{const o=bufferedRangesToString(a[`${i}Buffered`]());if(a.logger_(`received "updateend" event for ${i} Source Buffer: `,o),a.queuePending[i]){const s=a.queuePending[i].doneFn;a.queuePending[i]=null,s&&s(a[`${i}Error_`])}wy(i,a)},"onUpdateend$1");let Py=(jt=class extends videojs$2.EventTarget{constructor(i){super(),this.mediaSource=i,this.sourceopenListener_=()=>wy("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Wp("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=ky("video",this),this.onAudioUpdateEnd_=ky("audio",this),this.onVideoError_=i=>{this.videoError_=i},this.onAudioError_=i=>{this.audioError_=i},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(i,a){My({type:"mediaSource",sourceUpdater:this,action:Ey.addSourceBuffer(i,a),name:"addSourceBuffer"})}abort(i){My({type:i,sourceUpdater:this,action:Ey.abort(i),name:"abort"})}removeSourceBuffer(i){this.canRemoveSourceBuffer()?My({type:"mediaSource",sourceUpdater:this,action:Ey.removeSourceBuffer(i),name:"removeSourceBuffer"}):videojs$2.log.error("removeSourceBuffer is not supported!")}canRemoveSourceBuffer(){return!videojs$2.browser.IS_FIREFOX&&Tn.MediaSource&&Tn.MediaSource.prototype&&"function"==typeof Tn.MediaSource.prototype.removeSourceBuffer}static canChangeType(){return Tn.SourceBuffer&&Tn.SourceBuffer.prototype&&"function"==typeof Tn.SourceBuffer.prototype.changeType}canChangeType(){return this.constructor.canChangeType()}changeType(i,a){this.canChangeType()?My({type:i,sourceUpdater:this,action:Ey.changeType(a),name:"changeType"}):videojs$2.log.error("changeType is not supported!")}addOrChangeSourceBuffers(i){if(!i||"object"!=typeof i||0===Object.keys(i).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(a=>{const s=i[a];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(a,s);this.canChangeType()&&this.changeType(a,s)})}appendBuffer(i,a){const{segmentInfo:s,type:o,bytes:u}=i;if(this.processedAppend_=!0,"audio"===o&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([i,a]),void this.logger_(`delayed audio append of ${u.length} until video append`);const _=a;if(My({type:o,sourceUpdater:this,action:Ey.appendBuffer(u,s||{mediaIndex:-1},_),doneFn:a,name:"appendBuffer"}),"video"===o){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const i=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${i.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,i.forEach(i=>{this.appendBuffer.apply(this,i)})}}audioBuffered(){return Cy(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:createTimeRanges$2()}videoBuffered(){return Cy(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:createTimeRanges$2()}buffered(){const i=Cy(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=Cy(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!i?this.audioBuffered():i&&!a?this.videoBuffered():Zp(this.audioBuffered(),this.videoBuffered())}setDuration(i,a=noop$1){My({type:"mediaSource",sourceUpdater:this,action:Ey.duration(i),name:"duration",doneFn:a})}endOfStream(i=null,a=noop$1){"string"!=typeof i&&(i=void 0),My({type:"mediaSource",sourceUpdater:this,action:Ey.endOfStream(i),name:"endOfStream",doneFn:a})}removeAudio(i,a,s=noop$1){this.audioBuffered().length&&0!==this.audioBuffered().end(0)?My({type:"audio",sourceUpdater:this,action:Ey.remove(i,a),doneFn:s,name:"remove"}):s()}removeVideo(i,a,s=noop$1){this.videoBuffered().length&&0!==this.videoBuffered().end(0)?My({type:"video",sourceUpdater:this,action:Ey.remove(i,a),doneFn:s,name:"remove"}):s()}updating(){return!(!Sy("audio",this)&&!Sy("video",this))}audioTimestampOffset(i){return void 0!==i&&this.audioBuffer&&this.audioTimestampOffset_!==i&&(My({type:"audio",sourceUpdater:this,action:Ey.timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_}videoTimestampOffset(i){return void 0!==i&&this.videoBuffer&&this.videoTimestampOffset_!==i&&(My({type:"video",sourceUpdater:this,action:Ey.timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_}audioQueueCallback(i){this.audioBuffer&&My({type:"audio",sourceUpdater:this,action:Ey.callback(i),name:"callback"})}videoQueueCallback(i){this.videoBuffer&&My({type:"video",sourceUpdater:this,action:Ey.callback(i),name:"callback"})}dispose(){this.trigger("dispose"),Ty.forEach(i=>{this.abort(i),this.canRemoveSourceBuffer()?this.removeSourceBuffer(i):this[`${i}QueueCallback`](()=>Ay(i,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}},__name(jt,"SourceUpdater"),jt);const Iy=/* @__PURE__ */__name(i=>decodeURIComponent(escape(String.fromCharCode.apply(null,i))),"uint8ToUtf8$1"),Ly=/* @__PURE__ */__name(i=>{const a=new Uint8Array(i);return Array.from(a).map(i=>i.toString(16).padStart(2,"0")).join("")},"bufferToHexString"),Dy=new Uint8Array("\n\n".split("").map(i=>i.charCodeAt(0)));let Ry=(Vt=class extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}},__name(Vt,"NoVttJsError"),Vt),Oy=(zt=class extends vy{constructor(i,a={}){super(i,a),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=i.featuresNativeTextTracks,this.loadVttJs=i.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return createTimeRanges$2();const i=this.subtitlesTrack_.cues;return createTimeRanges$2([[i[0].startTime,i[i.length-1].startTime]])}initSegmentForMap(i,a=!1){if(!i)return null;const s=kf(i);let o=this.initSegments_[s];if(a&&!o&&i.bytes){const a=Dy.byteLength+i.bytes.byteLength,u=new Uint8Array(a);u.set(i.bytes),u.set(Dy,i.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:u}}return o||i}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(i){return void 0===i||(this.subtitlesTrack_=i,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}remove(i,a){Y_(i,a,this.subtitlesTrack_)}fillBuffer_(){const i=this.chooseNextRequest_();if(i){if(null===this.syncController_.timestampOffsetForTimeline(i.timeline)){const i=/* @__PURE__ */__name(()=>{this.state="READY",this.paused()||this.monitorBuffer_()},"checkTimestampOffset");return this.syncController_.one("timestampoffset",i),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(i)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i}stopForError(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(i,a,s){if(!this.subtitlesTrack_)return void(this.state="READY");if(this.saveTransferStats_(a.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(i)return i.code===u_&&this.handleTimeout_(),i.code===d_?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(i);const o=this.pendingSegment_,u=s.mp4VttCues&&s.mp4VttCues.length;u&&(o.mp4VttCues=s.mp4VttCues),this.saveBandwidthRelatedStats_(o.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");const _=o.segment;if(_.map&&(_.map.bytes=a.map.bytes),o.bytes=a.bytes,"function"!=typeof Tn.WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(()=>this.segmentRequestFinished_(i,a,s),()=>this.stopForError({message:"Error loading vtt.js"}));_.requested=!0;try{this.parseVTTCues_(o)}catch(x){return void this.stopForError({message:x.message,metadata:{errorType:videojs$2.Error.StreamingVttParserError,error:x}})}if(u||this.updateTimeMapping_(o,this.syncController_.timelines[o.timeline],this.playlist_),o.cues.length?o.timingInfo={start:o.cues[0].startTime,end:o.cues[o.cues.length-1].endTime}:o.timingInfo={start:o.startOfSegment,end:o.startOfSegment+o.duration},o.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");o.byteLength=o.bytes.byteLength,this.mediaSecondsLoaded+=_.duration,o.cues.forEach(i=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new Tn.VTTCue(i.startTime,i.endTime,i.text):i)}),J_(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(i,a){const s=i&&"vtt"===i.type,o=a&&"text"===a.type;s&&o&&super.handleData_(i,a)}updateTimingInfoEnd_(){}parseMp4VttCues_(i){const a=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();i.mp4VttCues.forEach(s=>{const o=s.start+a,u=s.end+a,_=new Tn.VTTCue(o,u,s.cueText);s.settings&&s.settings.split(" ").forEach(i=>{const a=i.split(":"),s=a[0],o=a[1];_[s]=isNaN(o)?o:Number(o)}),i.cues.push(_)})}parseVTTCues_(i){let a,s=!1;if("function"!=typeof Tn.WebVTT)throw new Ry;if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},i.mp4VttCues)return void this.parseMp4VttCues_(i);"function"==typeof Tn.TextDecoder?a=new Tn.TextDecoder("utf8"):(a=Tn.WebVTT.StringDecoder(),s=!0);const o=new Tn.WebVTT.Parser(Tn,Tn.vttjs,a);if(o.oncue=i.cues.push.bind(i.cues),o.ontimestampmap=a=>{i.timestampmap=a},o.onparsingerror=i=>{videojs$2.log.warn("Error encountered when parsing cues: "+i.message)},i.segment.map){let a=i.segment.map.bytes;s&&(a=Iy(a)),o.parse(a)}let u=i.bytes;s&&(u=Iy(u)),o.parse(u),o.flush()}updateTimeMapping_(i,a,s){const o=i.segment;if(!a)return;if(!i.cues.length)return void(o.empty=!0);const{MPEGTS:u,LOCAL:_}=i.timestampmap,x=u/bo.ONE_SECOND_IN_TS-_+a.mapping;if(i.cues.forEach(i=>{const s=i.endTime-i.startTime,o=this.handleRollover_(i.startTime+x,a.time);i.startTime=Math.max(o,0),i.endTime=Math.max(o+s,0)}),!s.syncInfo){const a=i.cues[0].startTime,u=i.cues[i.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+i.mediaIndex,time:Math.min(a,u-o.duration)}}}handleRollover_(i,a){if(null===a)return i;let s=i*bo.ONE_SECOND_IN_TS;const o=a*bo.ONE_SECOND_IN_TS;let u;for(u=o<s?-8589934592:8589934592;Math.abs(s-o)>4294967296;)s+=u;return s/bo.ONE_SECOND_IN_TS}},__name(zt,"VTTSegmentLoader"),zt);const Ny=/* @__PURE__ */__name(function(i,a){const s=i.cues;for(let o=0;o<s.length;o++){const i=s[o];if(a>=i.adStartTime&&a<=i.adEndTime)return i}return null},"findAdCue$1"),By=/* @__PURE__ */__name(function(i,a,s=0){if(!i.segments)return;let o,u=s;for(let _=0;_<i.segments.length;_++){const s=i.segments[_];if(o||(o=Ny(a,u+s.duration/2)),o){if("cueIn"in s){o.endTime=u,o.adEndTime=u,u+=s.duration,o=null;continue}if(u<o.endTime){u+=s.duration;continue}o.endTime+=s.duration}else if("cueOut"in s&&(o=new Tn.VTTCue(u,u+s.duration,s.cueOut),o.adStartTime=u,o.adEndTime=u+parseFloat(s.cueOut),a.addCue(o)),"cueOutCont"in s){const[i,_]=s.cueOutCont.split("/").map(parseFloat);o=new Tn.VTTCue(u,u+s.duration,""),o.adStartTime=u-i,o.adEndTime=o.adStartTime+_,a.addCue(o)}u+=s.duration}},"updateAdCues$1"),Fy=class _SyncInfo{constructor({start:i,end:a,segmentIndex:s,partIndex:o=null,appended:u=!1}){this.start_=i,this.end_=a,this.segmentIndex_=s,this.partIndex_=o,this.appended_=u}isInRange(i){return i>=this.start&&i<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}};__name(Fy,"SyncInfo");let Uy=Fy;const jy=class _SyncInfoData{constructor(i,a=[]){this.segmentSyncInfo_=i,this.partsSyncInfo_=a}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(i=>i.resetAppendedStatus())}};__name(jy,"SyncInfoData");let Vy=jy;const zy=class _MediaSequenceSync{constructor(){this.storage_=/* @__PURE__ */new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(i=>i.resetAppendStatus())}update(i,a){const{mediaSequence:s,segments:o}=i;if(this.isReliable_=this.isReliablePlaylist_(s,o),this.isReliable_)return this.updateStorage_(o,s,this.calculateBaseTime_(s,o,a))}getSyncInfoForTime(i){for(const{segmentSyncInfo:a,partsSyncInfo:s}of this.storage_.values())if(s.length){for(const o of s)if(o.isInRange(i))return o}else if(a.isInRange(i))return a;return null}getSyncInfoForMediaSequence(i){return this.storage_.get(i)}updateStorage_(i,a,s){const o=/* @__PURE__ */new Map;let u="\n",_=s,x=a;this.start_=_,i.forEach((i,a)=>{const s=this.storage_.get(x),w=_,C=w+i.duration,L=Boolean(s&&s.segmentSyncInfo&&s.segmentSyncInfo.isAppended),B=new Uy({start:w,end:C,appended:L,segmentIndex:a});i.syncInfo=B;let U=_;const j=(i.parts||[]).map((i,o)=>{const _=U,w=U+i.duration,C=Boolean(s&&s.partsSyncInfo&&s.partsSyncInfo[o]&&s.partsSyncInfo[o].isAppended),L=new Uy({start:_,end:w,appended:C,segmentIndex:a,partIndex:o});return U=w,u+=`Media Sequence: ${x}.${o} | Range: ${_} --\x3e ${w} | Appended: ${C}\n`,i.syncInfo=L,L});o.set(x,new Vy(B,j)),u+=`${compactSegmentUrlDescription(i.resolvedUri)} | Media Sequence: ${x} | Range: ${w} --\x3e ${C} | Appended: ${L}\n`,x++,_=C}),this.end_=_,this.storage_=o,this.diagnostics_=u}calculateBaseTime_(i,a,s){if(!this.storage_.size)return 0;if(this.storage_.has(i))return this.storage_.get(i).segmentSyncInfo.start;const o=Math.min(...this.storage_.keys());if(i<o){const s=o-i;let u=this.storage_.get(o).segmentSyncInfo.start;for(let i=0;i<s;i++){u-=a[i].duration}return u}return s}isReliablePlaylist_(i,a){return null!=i&&Array.isArray(a)&&a.length}};__name(zy,"MediaSequenceSync");let Hy=zy;const $y=class _DependantMediaSequenceSync extends Hy{constructor(i){super(),this.parent_=i}calculateBaseTime_(i,a,s){if(!this.storage_.size){const a=this.parent_.getSyncInfoForMediaSequence(i);return a?a.segmentSyncInfo.start:0}return super.calculateBaseTime_(i,a,s)}};__name($y,"DependantMediaSequenceSync");let Gy=$y;const Wy=[{name:"VOD",run:/* @__PURE__ */__name((i,a,s,o,u)=>{if(s!==1/0){return{time:0,segmentIndex:0,partIndex:null}}return null},"run")},{name:"MediaSequence",run:/* @__PURE__ */__name((i,a,s,o,u,_)=>{const x=i.getMediaSequenceSync(_);if(!x)return null;if(!x.isReliable)return null;const w=x.getSyncInfoForTime(u);return w?{time:w.start,partIndex:w.partIndex,segmentIndex:w.segmentIndex}:null},"run")},{name:"ProgramDateTime",run:/* @__PURE__ */__name((i,a,s,o,u)=>{if(!Object.keys(i.timelineToDatetimeMappings).length)return null;let _=null,x=null;const w=om(a);u=u||0;for(let C=0;C<w.length;C++){const s=w[a.endList||0===u?C:w.length-(C+1)],o=s.segment,L=i.timelineToDatetimeMappings[o.timeline];if(!L||!o.dateTimeObject)continue;let B=o.dateTimeObject.getTime()/1e3+L;if(o.parts&&"number"==typeof s.partIndex)for(let i=0;i<s.partIndex;i++)B+=o.parts[i].duration;const U=Math.abs(u-B);if(null!==x&&(0===U||x<U))break;x=U,_={time:B,segmentIndex:s.segmentIndex,partIndex:s.partIndex}}return _},"run")},{name:"Segment",run:/* @__PURE__ */__name((i,a,s,o,u)=>{let _=null,x=null;u=u||0;const w=om(a);for(let C=0;C<w.length;C++){const i=w[a.endList||0===u?C:w.length-(C+1)],s=i.segment,L=i.part&&i.part.start||s&&s.start;if(s.timeline===o&&void 0!==L){const a=Math.abs(u-L);if(null!==x&&x<a)break;(!_||null===x||x>=a)&&(x=a,_={time:L,segmentIndex:i.segmentIndex,partIndex:i.partIndex})}}return _},"run")},{name:"Discontinuity",run:/* @__PURE__ */__name((i,a,s,o,u)=>{let _=null;if(u=u||0,a.discontinuityStarts&&a.discontinuityStarts.length){let s=null;for(let o=0;o<a.discontinuityStarts.length;o++){const x=a.discontinuityStarts[o],w=a.discontinuitySequence+o+1,C=i.discontinuities[w];if(C){const i=Math.abs(u-C.time);if(null!==s&&s<i)break;(!_||null===s||s>=i)&&(s=i,_={time:C.time,segmentIndex:x,partIndex:null})}}}return _},"run")},{name:"Playlist",run:/* @__PURE__ */__name((i,a,s,o,u)=>{if(a.syncInfo){return{time:a.syncInfo.time,segmentIndex:a.syncInfo.mediaSequence-a.mediaSequence,partIndex:null}}return null},"run")}];let qy=(Ht=class extends videojs$2.EventTarget{constructor(i={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const a=new Hy,s=new Gy(a),o=new Gy(a);this.mediaSequenceStorage_={main:a,audio:s,vtt:o},this.logger_=Wp("SyncController")}getMediaSequenceSync(i){return this.mediaSequenceStorage_[i]||null}getSyncPoint(i,a,s,o,u){if(a!==1/0){return Wy.find(({name:i})=>"VOD"===i).run(this,i,a)}const _=this.runStrategies_(i,a,s,o,u);if(!_.length)return null;for(const x of _){const{syncPoint:a,strategy:s}=x,{segmentIndex:u,time:_}=a;if(u<0)continue;const w=_,C=w+i.segments[u].duration;if(this.logger_(`Strategy: ${s}. Current time: ${o}. selected segment: ${u}. Time: [${w} -> ${C}]}`),o>=w&&o<C)return this.logger_("Found sync point with exact match: ",a),a}return this.selectSyncPoint_(_,{key:"time",value:o})}getExpiredTime(i,a){if(!i||!i.segments)return null;const s=this.runStrategies_(i,a,i.discontinuitySequence,0);if(!s.length)return null;const o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+fm({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:o.segmentIndex,endIndex:0}))}runStrategies_(i,a,s,o,u){const _=[];for(let x=0;x<Wy.length;x++){const w=Wy[x],C=w.run(this,i,a,s,o,u);C&&(C.strategy=w.name,_.push({strategy:w.name,syncPoint:C}))}return _}selectSyncPoint_(i,a){let s=i[0].syncPoint,o=Math.abs(i[0].syncPoint[a.key]-a.value),u=i[0].strategy;for(let _=1;_<i.length;_++){const x=Math.abs(i[_].syncPoint[a.key]-a.value);x<o&&(o=x,s=i[_].syncPoint,u=i[_].strategy)}return this.logger_(`syncPoint for [${a.key}: ${a.value}] chosen with strategy [${u}]: [time:${s.time}, segmentIndex:${s.segmentIndex}`+("number"==typeof s.partIndex?`,partIndex:${s.partIndex}`:"")+"]"),s}saveExpiredSegmentInfo(i,a){const s=a.mediaSequence-i.mediaSequence;if(s>86400)videojs$2.log.warn(`Not saving expired segment info. Media sequence gap ${s} is too large.`);else for(let o=s-1;o>=0;o--){const s=i.segments[o];if(s&&void 0!==s.start){a.syncInfo={mediaSequence:i.mediaSequence+o,time:s.start},this.logger_(`playlist refresh sync: [time:${a.syncInfo.time}, mediaSequence: ${a.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){const a=i.segments[0],s=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-s}}saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:a}){const s=this.calculateSegmentTimeMapping_(i,i.timingInfo,a),o=i.segment;s&&(this.saveDiscontinuitySyncInfo_(i),i.playlist.syncInfo||(i.playlist.syncInfo={mediaSequence:i.playlist.mediaSequence+i.mediaIndex,time:o.start}));const u=o.dateTimeObject;o.discontinuity&&a&&u&&(this.timelineToDatetimeMappings[o.timeline]=-u.getTime()/1e3)}timestampOffsetForTimeline(i){return void 0===this.timelines[i]?null:this.timelines[i].time}mappingForTimeline(i){return void 0===this.timelines[i]?null:this.timelines[i].mapping}calculateSegmentTimeMapping_(i,a,s){const o=i.segment,u=i.part;let _,x,w=this.timelines[i.timeline];if("number"==typeof i.timestampOffset)w={time:i.startOfSegment,mapping:i.startOfSegment-a.start},s&&(this.timelines[i.timeline]=w,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${i.timeline}: [time: ${w.time}] [mapping: ${w.mapping}]`)),_=i.startOfSegment,x=a.end+w.mapping;else{if(!w)return!1;_=a.start+w.mapping,x=a.end+w.mapping}return u&&(u.start=_,u.end=x),(!o.start||_<o.start)&&(o.start=_),o.end=x,!0}saveDiscontinuitySyncInfo_(i){const a=i.playlist,s=i.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(let o=0;o<a.discontinuityStarts.length;o++){const u=a.discontinuityStarts[o],_=a.discontinuitySequence+o+1,x=u-i.mediaIndex,w=Math.abs(x);if(!this.discontinuities[_]||this.discontinuities[_].accuracy>w){let o;o=x<0?s.start-fm({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex,endIndex:u}):s.end+fm({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex+1,endIndex:u}),this.discontinuities[_]={time:o,accuracy:w}}}}dispose(){this.trigger("dispose"),this.off()}},__name(Ht,"SyncController"),Ht),Xy=($t=class extends videojs$2.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:i,from:a,to:s}){return"number"==typeof a&&"number"==typeof s&&(this.pendingTimelineChanges_[i]={type:i,from:a,to:s},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[i]}lastTimelineChange({type:i,from:a,to:s}){if("number"==typeof a&&"number"==typeof s){this.lastTimelineChanges_[i]={type:i,from:a,to:s},delete this.pendingTimelineChanges_[i];const o={timelineChangeInfo:{from:a,to:s}};this.trigger({type:"timelinechange",metadata:o})}return this.lastTimelineChanges_[i]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}},__name($t,"TimelineChangeController"),$t);const Qy=zg(Wg(function(){var i=/* @__PURE__ */function(){function Stream3(){this.listeners={}}__name(Stream3,"Stream");var i=Stream3.prototype;return i.on=/* @__PURE__ */__name(function on2(i,a){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(a)},"on"),i.off=/* @__PURE__ */__name(function off2(i,a){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(a);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},"off"),i.trigger=/* @__PURE__ */__name(function trigger2(i){var a=this.listeners[i];if(a)if(2===arguments.length)for(var s=a.length,o=0;o<s;++o)a[o].call(this,arguments[1]);else for(var u=Array.prototype.slice.call(arguments,1),_=a.length,x=0;x<_;++x)a[x].apply(this,u)},"trigger"),i.dispose=/* @__PURE__ */__name(function dispose(){this.listeners={}},"dispose"),i.pipe=/* @__PURE__ */__name(function pipe(i){this.on("data",function(a){i.push(a)})},"pipe"),Stream3}();function unpad(i){return i.subarray(0,i.byteLength-i[i.byteLength-1])}__name(unpad,"unpad");const a=/* @__PURE__ */__name(function(){const i=[[[],[],[],[],[]],[[],[],[],[],[]]],a=i[0],s=i[1],o=a[4],u=s[4];let _,x,w;const C=[],L=[];let B,U,j,V,z,$;for(_=0;_<256;_++)L[(C[_]=_<<1^283*(_>>7))^_]=_;for(x=w=0;!o[x];x^=B||1,w=L[w]||1)for(V=w^w<<1^w<<2^w<<3^w<<4,V=V>>8^255&V^99,o[x]=V,u[V]=x,j=C[U=C[B=C[x]]],$=16843009*j^65537*U^257*B^16843008*x,z=257*C[V]^16843008*V,_=0;_<4;_++)a[_][x]=z=z<<24^z>>>8,s[_][V]=$=$<<24^$>>>8;for(_=0;_<5;_++)a[_]=a[_].slice(0),s[_]=s[_].slice(0);return i},"precompute");let s=null;const o=class _AES{constructor(i){let o,u,_;s||(s=a()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];const x=this._tables[0][4],w=this._tables[1],C=i.length;let L=1;if(4!==C&&6!==C&&8!==C)throw new Error("Invalid aes key size");const B=i.slice(0),U=[];for(this._key=[B,U],o=C;o<4*C+28;o++)_=B[o-1],(o%C===0||8===C&&o%C===4)&&(_=x[_>>>24]<<24^x[_>>16&255]<<16^x[_>>8&255]<<8^x[255&_],o%C===0&&(_=_<<8^_>>>24^L<<24,L=L<<1^283*(L>>7))),B[o]=B[o-C]^_;for(u=0;o;u++,o--)_=B[3&u?o:o-4],U[u]=o<=4||u<4?_:w[0][x[_>>>24]]^w[1][x[_>>16&255]]^w[2][x[_>>8&255]]^w[3][x[255&_]]}decrypt(i,a,s,o,u,_){const x=this._key[1];let w,C,L,B=i^x[0],U=o^x[1],j=s^x[2],V=a^x[3];const z=x.length/4-2;let $,Y=4;const Z=this._tables[1],ee=Z[0],ie=Z[1],ae=Z[2],le=Z[3],ce=Z[4];for($=0;$<z;$++)w=ee[B>>>24]^ie[U>>16&255]^ae[j>>8&255]^le[255&V]^x[Y],C=ee[U>>>24]^ie[j>>16&255]^ae[V>>8&255]^le[255&B]^x[Y+1],L=ee[j>>>24]^ie[V>>16&255]^ae[B>>8&255]^le[255&U]^x[Y+2],V=ee[V>>>24]^ie[B>>16&255]^ae[U>>8&255]^le[255&j]^x[Y+3],Y+=4,B=w,U=C,j=L;for($=0;$<4;$++)u[(3&-$)+_]=ce[B>>>24]<<24^ce[U>>16&255]<<16^ce[j>>8&255]<<8^ce[255&V]^x[Y++],w=B,B=U,U=j,j=V,V=w}};__name(o,"AES");let u=o;const _=class _AsyncStream extends i{constructor(){super(i),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(i){this.jobs.push(i),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}};__name(_,"AsyncStream");let x=_;const w=/* @__PURE__ */__name(function(i){return i<<24|(65280&i)<<8|(16711680&i)>>8|i>>>24},"ntoh"),C=/* @__PURE__ */__name(function(i,a,s){const o=new Int32Array(i.buffer,i.byteOffset,i.byteLength>>2),_=new u(Array.prototype.slice.call(a)),x=new Uint8Array(i.byteLength),C=new Int32Array(x.buffer);let L,B,U,j,V,z,$,Y,Z;for(L=s[0],B=s[1],U=s[2],j=s[3],Z=0;Z<o.length;Z+=4)V=w(o[Z]),z=w(o[Z+1]),$=w(o[Z+2]),Y=w(o[Z+3]),_.decrypt(V,z,$,Y,C,Z),C[Z]=w(C[Z]^L),C[Z+1]=w(C[Z+1]^B),C[Z+2]=w(C[Z+2]^U),C[Z+3]=w(C[Z+3]^j),L=V,B=z,U=$,j=Y;return x},"decrypt"),L=class _Decrypter{constructor(i,a,s,o){const u=_Decrypter.STEP,_=new Int32Array(i.buffer),C=new Uint8Array(i.byteLength);let L=0;for(this.asyncStream_=new x,this.asyncStream_.push(this.decryptChunk_(_.subarray(L,L+u),a,s,C)),L=u;L<_.length;L+=u)s=new Uint32Array([w(_[L-4]),w(_[L-3]),w(_[L-2]),w(_[L-1])]),this.asyncStream_.push(this.decryptChunk_(_.subarray(L,L+u),a,s,C));this.asyncStream_.push(function(){o(null,unpad(C))})}static get STEP(){return 32e3}decryptChunk_(i,a,s,o){return function(){const u=C(i,a,s);o.set(u,i.byteOffset)}}};__name(L,"Decrypter");let B=L;var U="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},j="undefined"!=typeof window?window:void 0!==U?U:"undefined"!=typeof self?self:{},V=/* @__PURE__ */__name(function isArrayBufferView3(i){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer},"isArrayBufferView"),z=j.BigInt||Number;z("0x1"),z("0x100"),z("0x10000"),z("0x1000000"),z("0x100000000"),z("0x10000000000"),z("0x1000000000000"),z("0x100000000000000"),z("0x10000000000000000"),function(){var i=new Uint16Array([65484]),a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);255===a[0]||a[0]}();const $=/* @__PURE__ */__name(function(i){const a={};return Object.keys(i).forEach(s=>{const o=i[s];V(o)?a[s]={bytes:o.buffer,byteOffset:o.byteOffset,byteLength:o.byteLength}:a[s]=o}),a},"createTransferableMessage");self.onmessage=function(i){const a=i.data,s=new Uint8Array(a.encrypted.bytes,a.encrypted.byteOffset,a.encrypted.byteLength),o=new Uint32Array(a.key.bytes,a.key.byteOffset,a.key.byteLength/4),u=new Uint32Array(a.iv.bytes,a.iv.byteOffset,a.iv.byteLength/4);new B(s,o,u,function(i,s){self.postMessage($({source:a.source,decrypted:s}),[s.buffer])})}}));var Ky=Vg(Qy);const Yy=/* @__PURE__ */__name(i=>{let a=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(a="main-desc"),a},"audioTrackKind_$1"),Jy=/* @__PURE__ */__name((i,a)=>{i.abort(),i.pause(),a&&a.activePlaylistLoader&&(a.activePlaylistLoader.pause(),a.activePlaylistLoader=null)},"stopLoaders$1"),Zy=/* @__PURE__ */__name((i,a)=>{a.activePlaylistLoader=i,i.load()},"startLoaders$1"),ev=/* @__PURE__ */__name((i,a)=>()=>{const{segmentLoaders:{[i]:s,main:o},mediaTypes:{[i]:u}}=a,_=u.activeTrack(),x=u.getActiveGroup(),w=u.activePlaylistLoader,C=u.lastGroup_;x&&C&&x.id===C.id||(u.lastGroup_=x,u.lastTrack_=_,Jy(s,u),x&&!x.isMainPlaylist&&(x.playlistLoader?(s.resyncLoader(),Zy(x.playlistLoader,u)):w&&o.resetEverything()))},"onGroupChanged$1"),tv=/* @__PURE__ */__name((i,a)=>()=>{const{segmentLoaders:{[i]:s},mediaTypes:{[i]:o}}=a;o.lastGroup_=null,s.abort(),s.pause()},"onGroupChanging$1"),nv=/* @__PURE__ */__name((i,a)=>()=>{const{mainPlaylistLoader:s,segmentLoaders:{[i]:o,main:u},mediaTypes:{[i]:_}}=a,x=_.activeTrack(),w=_.getActiveGroup(),C=_.activePlaylistLoader,L=_.lastTrack_;if((!L||!x||L.id!==x.id)&&(_.lastGroup_=w,_.lastTrack_=x,Jy(o,_),w)){if(w.isMainPlaylist){if(!x||!L||x.id===L.id)return;const i=a.vhs.playlistController_,o=i.selectPlaylist();if(i.media()===o)return;return _.logger_(`track change. Switching main audio from ${L.id} to ${x.id}`),s.pause(),u.resetEverything(),void i.fastQualityChange_(o)}if("AUDIO"===i){if(!w.playlistLoader)return u.setAudio(!0),void u.resetEverything();o.setAudio(!0),u.setAudio(!1)}C!==w.playlistLoader?(o.track&&o.track(x),o.resetEverything(),Zy(w.playlistLoader,_)):Zy(w.playlistLoader,_)}},"onTrackChanged$1"),iv={AUDIO:/* @__PURE__ */__name((i,a)=>()=>{const{mediaTypes:{[i]:s},excludePlaylist:o}=a,u=s.activeTrack(),_=s.activeGroup(),x=(_.filter(i=>i.default)[0]||_[0]).id,w=s.tracks[x];if(u!==w){videojs$2.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const i in s.tracks)s.tracks[i].enabled=s.tracks[i]===w;s.onTrackChanged()}else o({error:{message:"Problem encountered loading the default audio track."}})},"AUDIO"),SUBTITLES:/* @__PURE__ */__name((i,a)=>()=>{const{mediaTypes:{[i]:s}}=a;videojs$2.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const o=s.activeTrack();o&&(o.mode="disabled"),s.onTrackChanged()},"SUBTITLES")},rv={AUDIO:/* @__PURE__ */__name((i,a,s)=>{if(!a)return;const{tech:o,requestOptions:u,segmentLoaders:{[i]:_}}=s;a.on("loadedmetadata",()=>{const i=a.media();_.playlist(i,u),(!o.paused()||i.endList&&"none"!==o.preload())&&_.load()}),a.on("loadedplaylist",()=>{_.playlist(a.media(),u),o.paused()||_.load()}),a.on("error",iv[i](i,s))},"AUDIO"),SUBTITLES:/* @__PURE__ */__name((i,a,s)=>{const{tech:o,requestOptions:u,segmentLoaders:{[i]:_},mediaTypes:{[i]:x}}=s;a.on("loadedmetadata",()=>{const i=a.media();_.playlist(i,u),_.track(x.activeTrack()),(!o.paused()||i.endList&&"none"!==o.preload())&&_.load()}),a.on("loadedplaylist",()=>{_.playlist(a.media(),u),o.paused()||_.load()}),a.on("error",iv[i](i,s))},"SUBTITLES")},av={AUDIO:/* @__PURE__ */__name((i,a)=>{const{vhs:s,sourceType:o,segmentLoaders:{[i]:u},requestOptions:_,main:{mediaGroups:x},mediaTypes:{[i]:{groups:w,tracks:C,logger_:L}},mainPlaylistLoader:B}=a,U=km(B.main);x[i]&&0!==Object.keys(x[i]).length||(x[i]={main:{default:{default:!0}}},U&&(x[i].main.default.playlists=B.main.playlists));for(const j in x[i]){w[j]||(w[j]=[]);for(const u in x[i][j]){let V,z=x[i][j][u];if(U?(L(`AUDIO group '${j}' label '${u}' is a main playlist`),z.isMainPlaylist=!0,V=null):V="vhs-json"===o&&z.playlists?new df(z.playlists[0],s,_):z.resolvedUri?new df(z.resolvedUri,s,_):z.playlists&&"dash"===o?new _g(z.playlists[0],s,_,B):null,z=merge$2({id:u,playlistLoader:V},z),rv[i](i,z.playlistLoader,a),w[j].push(z),void 0===C[u]){const i=new videojs$2.AudioTrack({id:u,kind:Yy(z),enabled:!1,language:z.language,default:z.default,label:u});C[u]=i}}}u.on("error",iv[i](i,a))},"AUDIO"),SUBTITLES:/* @__PURE__ */__name((i,a)=>{const{tech:s,vhs:o,sourceType:u,segmentLoaders:{[i]:_},requestOptions:x,main:{mediaGroups:w},mediaTypes:{[i]:{groups:C,tracks:L}},mainPlaylistLoader:B}=a;for(const U in w[i]){C[U]||(C[U]=[]);for(const _ in w[i][U]){if(!o.options_.useForcedSubtitles&&w[i][U][_].forced)continue;let j,V=w[i][U][_];if("hls"===u)j=new df(V.resolvedUri,o,x);else if("dash"===u){if(!V.playlists.filter(i=>i.excludeUntil!==1/0).length)return;j=new _g(V.playlists[0],o,x,B)}else"vhs-json"===u&&(j=new df(V.playlists?V.playlists[0]:V.resolvedUri,o,x));if(V=merge$2({id:_,playlistLoader:j},V),rv[i](i,V.playlistLoader,a),C[U].push(V),void 0===L[_]){const i=s.addRemoteTextTrack({id:_,kind:"subtitles",default:V.default&&V.autoselect,language:V.language,label:_},!1).track;L[_]=i}}}_.on("error",iv[i](i,a))},"SUBTITLES"),"CLOSED-CAPTIONS":/* @__PURE__ */__name((i,a)=>{const{tech:s,main:{mediaGroups:o},mediaTypes:{[i]:{groups:u,tracks:_}}}=a;for(const x in o[i]){u[x]||(u[x]=[]);for(const a in o[i][x]){const w=o[i][x][a];if(!/^(?:CC|SERVICE)/.test(w.instreamId))continue;const C=s.options_.vhs&&s.options_.vhs.captionServices||{};let L={label:a,language:w.language,instreamId:w.instreamId,default:w.default&&w.autoselect};if(C[L.instreamId]&&(L=merge$2(L,C[L.instreamId])),void 0===L.default&&delete L.default,u[x].push(merge$2({id:a},w)),void 0===_[a]){const i=s.addRemoteTextTrack({id:L.instreamId,kind:"captions",default:L.default,language:L.language,label:L.label},!1).track;_[a]=i}}}},"CLOSED-CAPTIONS")},sv=/* @__PURE__ */__name((i,a)=>{for(let s=0;s<i.length;s++){if(Em(a,i[s]))return!0;if(i[s].playlists&&sv(i[s].playlists,a))return!0}return!1},"groupMatch$1"),ov=/* @__PURE__ */__name((i,a)=>s=>{const{mainPlaylistLoader:o,mediaTypes:{[i]:{groups:u}}}=a,_=o.media();if(!_)return null;let x=null;_.attributes[i]&&(x=u[_.attributes[i]]);const w=Object.keys(u);if(!x)if("AUDIO"===i&&w.length>1&&km(a.main))for(let i=0;i<w.length;i++){const a=u[w[i]];if(sv(a,_)){x=a;break}}else u.main?x=u.main:1===w.length&&(x=u[w[0]]);return void 0===s?x:null!==s&&x&&x.filter(i=>i.id===s.id)[0]||null},"activeGroup$1"),lv={AUDIO:/* @__PURE__ */__name((i,a)=>()=>{const{mediaTypes:{[i]:{tracks:s}}}=a;for(const i in s)if(s[i].enabled)return s[i];return null},"AUDIO"),SUBTITLES:/* @__PURE__ */__name((i,a)=>()=>{const{mediaTypes:{[i]:{tracks:s}}}=a;for(const i in s)if("showing"===s[i].mode||"hidden"===s[i].mode)return s[i];return null},"SUBTITLES")},cv=/* @__PURE__ */__name((i,{mediaTypes:a})=>()=>{const s=a[i].activeTrack();return s?a[i].activeGroup(s):null},"getActiveGroup$1"),uv=/* @__PURE__ */__name(i=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{av[a](a,i)});const{mediaTypes:a,mainPlaylistLoader:s,tech:o,vhs:u,segmentLoaders:{AUDIO:_,main:x}}=i;["AUDIO","SUBTITLES"].forEach(s=>{a[s].activeGroup=ov(s,i),a[s].activeTrack=lv[s](s,i),a[s].onGroupChanged=ev(s,i),a[s].onGroupChanging=tv(s,i),a[s].onTrackChanged=nv(s,i),a[s].getActiveGroup=cv(s,i)});const w=a.AUDIO.activeGroup();if(w){const i=(w.filter(i=>i.default)[0]||w[0]).id;a.AUDIO.tracks[i].enabled=!0,a.AUDIO.onGroupChanged(),a.AUDIO.onTrackChanged();a.AUDIO.getActiveGroup().playlistLoader?(x.setAudio(!1),_.setAudio(!0)):x.setAudio(!0)}s.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(i=>a[i].onGroupChanged())}),s.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(i=>a[i].onGroupChanging())});const C=/* @__PURE__ */__name(()=>{a.AUDIO.onTrackChanged(),o.trigger({type:"usage",name:"vhs-audio-change"})},"onAudioTrackChanged");o.audioTracks().addEventListener("change",C),o.remoteTextTracks().addEventListener("change",a.SUBTITLES.onTrackChanged),u.on("dispose",()=>{o.audioTracks().removeEventListener("change",C),o.remoteTextTracks().removeEventListener("change",a.SUBTITLES.onTrackChanged)}),o.clearTracks("audio");for(const L in a.AUDIO.tracks)o.audioTracks().addTrack(a.AUDIO.tracks[L])},"setupMediaGroups$1"),dv=/* @__PURE__ */__name(()=>{const i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(a=>{i[a]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop$1,activeTrack:noop$1,getActiveGroup:noop$1,onGroupChanged:noop$1,onTrackChanged:noop$1,lastTrack_:null,logger_:Wp(`MediaGroups[${a}]`)}}),i},"createMediaTypes$1"),hv=class _SteeringManifest{constructor(){this.priority_=[],this.pathwayClones_=/* @__PURE__ */new Map}set version(i){1===i&&(this.version_=i)}set ttl(i){this.ttl_=i||300}set reloadUri(i){i&&(this.reloadUri_=$p(this.reloadUri_,i))}set priority(i){i&&i.length&&(this.priority_=i)}set pathwayClones(i){i&&i.length&&(this.pathwayClones_=new Map(i.map(i=>[i.ID,i])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}};__name(hv,"SteeringManifest");let pv=hv;const mv=class _ContentSteeringController extends videojs$2.EventTarget{constructor(i,a){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=/* @__PURE__ */new Set,this.steeringManifest=new pv,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=/* @__PURE__ */new Map,this.nextPathwayClones=/* @__PURE__ */new Map,this.excludedSteeringManifestURLs=/* @__PURE__ */new Set,this.logger_=Wp("Content Steering"),this.xhr_=i,this.getBandwidth_=a}assignTagProperties(i,a){this.manifestType_=a.serverUri?"HLS":"DASH";const s=a.serverUri||a.serverURL;if(!s)return this.logger_(`steering manifest URL is ${s}, cannot request steering manifest.`),void this.trigger("error");s.startsWith("data:")?this.decodeDataUriManifest_(s.substring(s.indexOf(",")+1)):(this.steeringManifest.reloadUri=$p(i,s),this.defaultPathway=a.pathwayId||a.defaultServiceLocation,this.queryBeforeStart=a.queryBeforeStart,this.proxyServerUrl_=a.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"))}requestSteeringManifest(i){const a=this.steeringManifest.reloadUri;if(!a)return;const s=i?a:this.getRequestURI(a);if(!s)return this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),void this.dispose();const o={contentSteeringInfo:{uri:s}};this.trigger({type:"contentsteeringloadstart",metadata:o}),this.request_=this.xhr_({uri:s,requestType:"content-steering-manifest"},(i,a)=>{if(i){if(410===a.status)return this.logger_(`manifest request 410 ${i}.`),this.logger_(`There will be no more content steering requests to ${s} this session.`),void this.excludedSteeringManifestURLs.add(s);if(429===a.status){const s=a.responseHeaders["retry-after"];return this.logger_(`manifest request 429 ${i}.`),this.logger_(`content steering will retry in ${s} seconds.`),void this.startTTLTimeout_(parseInt(s,10))}return this.logger_(`manifest failed to load ${i}.`),void this.startTTLTimeout_()}let u;this.trigger({type:"contentsteeringloadcomplete",metadata:o});try{u=JSON.parse(this.request_.responseText)}catch(x){const i={errorType:videojs$2.Error.StreamingContentSteeringParserError,error:x};this.trigger({type:"error",metadata:i})}this.assignSteeringProperties_(u);const _={contentSteeringInfo:o.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:_}),this.startTTLTimeout_()})}setProxyServerUrl_(i){const a=new Tn.URL(i),s=new Tn.URL(this.proxyServerUrl_);return s.searchParams.set("url",encodeURI(a.toString())),this.setSteeringParams_(s.toString())}decodeDataUriManifest_(i){const a=JSON.parse(Tn.atob(i));this.assignSteeringProperties_(a)}setSteeringParams_(i){const a=new Tn.URL(i),s=this.getPathway(),o=this.getBandwidth_();if(s){const i=`_${this.manifestType_}_pathway`;a.searchParams.set(i,s)}if(o){const i=`_${this.manifestType_}_throughput`;a.searchParams.set(i,o)}return a.toString()}assignSteeringProperties_(i){if(this.steeringManifest.version=i.VERSION,!this.steeringManifest.version)return this.logger_(`manifest version is ${i.VERSION}, which is not supported.`),void this.trigger("error");this.steeringManifest.ttl=i.TTL,this.steeringManifest.reloadUri=i["RELOAD-URI"],this.steeringManifest.priority=i["PATHWAY-PRIORITY"]||i["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=i["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const a=/* @__PURE__ */__name(i=>{for(const a of i)if(this.availablePathways_.has(a))return a;return[...this.availablePathways_][0]},"chooseNextPathway")(this.steeringManifest.priority);this.currentPathway!==a&&(this.currentPathway=a,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(i){if(!i)return null;const a=/* @__PURE__ */__name(i=>this.excludedSteeringManifestURLs.has(i),"isExcluded");if(this.proxyServerUrl_){const s=this.setProxyServerUrl_(i);if(!a(s))return s}const s=this.setSteeringParams_(i);return a(s)?null:s}startTTLTimeout_(i=this.steeringManifest.ttl){const a=1e3*i;this.ttlTimeout_=Tn.setTimeout(()=>{this.requestSteeringManifest()},a)}clearTTLTimeout_(){Tn.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=/* @__PURE__ */new Set,this.availablePathways_=/* @__PURE__ */new Set,this.steeringManifest=new pv}addAvailablePathway(i){i&&this.availablePathways_.add(i)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(i){return this.availablePathways_.delete(i)}didDASHTagChange(i,a){return!a&&this.steeringManifest.reloadUri||a&&($p(i,a.serverURL)!==this.steeringManifest.reloadUri||a.defaultServiceLocation!==this.defaultPathway||a.queryBeforeStart!==this.queryBeforeStart||a.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}};__name(mv,"ContentSteeringController");let fv=mv;const gv=/* @__PURE__ */__name((i,a)=>{let s=null;return(...o)=>{clearTimeout(s),s=setTimeout(()=>{i.apply(null,o)},a)}},"debounce$2");let _v;const yv=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],vv=/* @__PURE__ */__name(function(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},"sumLoaderStat$1"),bv=/* @__PURE__ */__name(function({currentPlaylist:i,buffered:a,currentTime:s,nextPlaylist:o,bufferLowWaterLine:u,bufferHighWaterLine:_,duration:x,bufferBasedABR:w,log:C}){if(!o)return videojs$2.log.warn("We received no playlist to switch to. Please check your stream."),!1;const L=`allowing switch ${i&&i.id||"null"} -> ${o.id}`;if(!i)return C(`${L} as current playlist is not set`),!0;if(o.id===i.id)return!1;const B=Boolean(Kp(a,s).length);if(!i.endList)return B||"number"!=typeof i.partTargetDuration?(C(`${L} as current playlist is live`),!0):(C(`not ${L} as current playlist is live llhls, but currentTime isn't in buffered.`),!1);const U=am(a,s),j=w?yg.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:yg.MAX_BUFFER_LOW_WATER_LINE;if(x<j)return C(`${L} as duration < max low water line (${x} < ${j})`),!0;const V=o.attributes.BANDWIDTH,z=i.attributes.BANDWIDTH;if(V<z&&(!w||U<_)){let i=`${L} as next bandwidth < current bandwidth (${V} < ${z})`;return w&&(i+=` and forwardBuffer < bufferHighWaterLine (${U} < ${_})`),C(i),!0}if((!w||V>z)&&U>=u){let i=`${L} as forwardBuffer >= bufferLowWaterLine (${U} >= ${u})`;return w&&(i+=` and next bandwidth > current bandwidth (${V} > ${z})`),C(i),!0}return C(`not ${L} as no switching criteria met`),!1},"shouldSwitchToMedia$1"),Tv=class _PlaylistController extends videojs$2.EventTarget{constructor(i){super(),this.fastQualityChange_=gv(this.fastQualityChange_.bind(this),100);const{src:a,withCredentials:s,tech:o,bandwidth:u,externVhs:_,useCueTags:x,playlistExclusionDuration:w,enableLowInitialPlaylist:C,sourceType:L,cacheEncryptionKeys:B,bufferBasedABR:U,leastPixelDiffSelector:j,captionServices:V,experimentalUseMMS:z}=i;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:$}=i;null==$&&($=1/0),_v=_,this.bufferBasedABR=Boolean(U),this.leastPixelDiffSelector=Boolean(j),this.withCredentials=s,this.tech_=o,this.vhs_=o.vhs,this.player_=i.player_,this.sourceType_=L,this.useCueTags_=x,this.playlistExclusionDuration=w,this.maxPlaylistRetries=$,this.enableLowInitialPlaylist=C,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:s,maxPlaylistRetries:$,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=dv(),z&&Tn.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new Tn.ManagedMediaSource,this.usingManagedMediaSource_=!0,videojs$2.log("Using ManagedMediaSource")):Tn.MediaSource&&(this.mediaSource=new Tn.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=createTimeRanges$2(),this.hasPlayed_=!1,this.syncController_=new qy(i),this.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new Ky,this.sourceUpdater_=new Py(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new Xy,this.keyStatusMap_=/* @__PURE__ */new Map;const Y={vhs:this.vhs_,parse708captions:i.parse708captions,useDtsForTimestampOffset:i.useDtsForTimestampOffset,captionServices:V,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:/* @__PURE__ */__name(()=>this.seekable(),"seekable"),seeking:/* @__PURE__ */__name(()=>this.tech_.seeking(),"seeking"),duration:/* @__PURE__ */__name(()=>this.duration(),"duration"),hasPlayed:/* @__PURE__ */__name(()=>this.hasPlayed_,"hasPlayed"),goalBufferLength:/* @__PURE__ */__name(()=>this.goalBufferLength(),"goalBufferLength"),bandwidth:u,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:B,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:i.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_="dash"===this.sourceType_?new _g(a,this.vhs_,merge$2(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new df(a,this.vhs_,merge$2(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new vy(merge$2(Y,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),i),this.audioSegmentLoader_=new vy(merge$2(Y,{loaderType:"audio"}),i),this.subtitleSegmentLoader_=new Oy(merge$2(Y,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:/* @__PURE__ */__name(()=>new Promise((i,a)=>{function onLoad(){o.off("vttjserror",onError2),i()}function onError2(){o.off("vttjsloaded",onLoad),a()}__name(onLoad,"onLoad"),__name(onError2,"onError"),o.one("vttjsloaded",onLoad),o.one("vttjserror",onError2),o.addWebVttScript_()}),"loadVttJs")}),i);const Z=/* @__PURE__ */__name(()=>this.mainSegmentLoader_.bandwidth,"getBandwidth");this.contentSteeringController_=new fv(this.vhs_.xhr,Z),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),yv.forEach(i=>{this[i+"_"]=vv.bind(this,i)}),this.logger_=Wp("pc"),this.triggeredFmp4Usage=!1,"none"===this.tech_.preload()?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const ee="none"===this.tech_.preload()?"play":"loadstart";this.tech_.one(ee,()=>{const i=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-i,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const i=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return-1===i||-1===a?-1:i+a}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(i="abr"){const a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,i)}switchMedia_(i,a,s){const o=this.media(),u=o&&(o.id||o.uri),_=i&&(i.id||i.uri);if(u&&u!==_){this.logger_(`switch media ${u} -> ${_} from ${a}`);const s={renditionInfo:{id:_,bandwidth:i.attributes.BANDWIDTH,resolution:i.attributes.RESOLUTION,codecs:i.attributes.CODECS},cause:a};this.trigger({type:"renditionselected",metadata:s}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${a}`})}this.mainPlaylistLoader_.media(i,s)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(i=>{const a=this.mediaTypes_[i],s=a?a.activeGroup():null,o=this.contentSteeringController_.getPathway();if(s&&o){const a=(s.length?s[0].playlists:s.playlists).filter(i=>i.attributes.serviceLocation===o);a.length&&this.mediaTypes_[i].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=Tn.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Tn.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const i=this.main(),a=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return a;const s=i.mediaGroups.AUDIO,o=Object.keys(s);let u;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)u=this.mediaTypes_.AUDIO.activeTrack();else{const i=s.main||o.length&&s[o[0]];for(const a in i)if(i[a].default){u={label:a};break}}if(!u)return a;const _=[];for(const x in s)if(s[x][u.label]){const a=s[x][u.label];if(a.playlists&&a.playlists.length)_.push.apply(_,a.playlists);else if(a.uri)_.push(a);else if(i.playlists.length)for(let s=0;s<i.playlists.length;s++){const a=i.playlists[s];a.attributes&&a.attributes.AUDIO&&a.attributes.AUDIO===x&&_.push(a)}}return _.length?_:a}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const i=this.mainPlaylistLoader_.media(),a=1.5*i.targetDuration*1e3;Cm(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=a,i.endList&&"none"!==this.tech_.preload()&&(this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.mainSegmentLoader_.load()),uv({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),i),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let i=this.mainPlaylistLoader_.media();if(!i){let a;if(this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_(),this.enableLowInitialPlaylist&&(a=this.selectInitialPlaylist()),a||(a=this.selectPlaylist()),!a||!this.shouldSwitchToMedia_(a))return;this.initialMedia_=a,this.switchMedia_(this.initialMedia_,"initial");if(!("vhs-json"===this.sourceType_&&this.initialMedia_.segments))return;i=this.initialMedia_}this.handleUpdatedMediaPlaylist(i)}),this.mainPlaylistLoader_.on("error",()=>{const i=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const i=this.mainPlaylistLoader_.media(),a=1.5*i.targetDuration*1e3;Cm(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=a,"dash"===this.sourceType_&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const i=this.mainPlaylistLoader_.media();if("playlist-unchanged"===i.lastExcludeReason_)return;this.stuckAtPlaylistEnd_(i)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})});["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(i=>{this.mainPlaylistLoader_.on(i,i=>{this.player_.trigger(_extends({},i))})})}handleUpdatedMediaPlaylist(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(i,a){const s=i.mediaGroups||{};let o=!0;const u=Object.keys(s.AUDIO);for(const _ in s.AUDIO)for(const i in s.AUDIO[_]){s.AUDIO[_][i].uri||(o=!1)}o&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(s.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),_v.Playlist.isAes(a)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),u.length&&Object.keys(s.AUDIO[u[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(i){const a=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),u=this.bufferHighWaterLine(),_=this.tech_.buffered();return bv({buffered:_,currentTime:s,currentPlaylist:a,nextPlaylist:i,bufferLowWaterLine:o,bufferHighWaterLine:u,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const i=this.audioSegmentLoader_.pendingSegment_;if(!i||!i.segment||!i.segment.syncInfo)return;const a=i.segment.syncInfo.end+.01;this.tech_.setCurrentTime(a)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))});const i=/* @__PURE__ */__name(()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)},"updateCodecs");this.mainSegmentLoader_.on("trackinfo",i),this.audioSegmentLoader_.on("trackinfo",i),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()});["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(i=>{this.mainSegmentLoader_.on(i,i=>{this.player_.trigger(_extends({},i))}),this.audioSegmentLoader_.on(i,i=>{this.player_.trigger(_extends({},i))}),this.subtitleSegmentLoader_.on(i,i=>{this.player_.trigger(_extends({},i))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(i=this.selectPlaylist()){i&&i===this.mainPlaylistLoader_.media()?this.logger_("skipping fastQualityChange because new media is same as old"):(this.switchMedia_(i,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0)}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const i=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0)?this.tech_.setCurrentTime(i.end(i.length-1)):void 0}setupFirstPlay(){const i=this.mainPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_)return!1;if(!i.endList||i.start){const a=this.seekable();if(!a.length)return!1;const s=a.end(0);let o=s;if(i.start){const u=i.start.timeOffset;o=u<0?Math.max(s+u,a.start(0)):Math.min(s,u)}this.trigger("firstplay"),this.tech_.setCurrentTime(o)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const i=this.tech_.play();void 0!==i&&"function"==typeof i.then&&i.then(null,i=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const i=this.inbandTextTracks_.metadataTrack_.cues;if(!i||!i.length)return;const a=this.duration();i[i.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const a=this.mainSegmentLoader_.getCurrentMediaInfo_();i=!a||a.hasVideo?i&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}i&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(i){if(!this.seekable().length)return!1;const a=this.syncController_.getExpiredTime(i,this.duration());if(null===a)return!1;const s=_v.Playlist.playlistEnd(i,a),o=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return s-o<=Xp;const _=u.end(u.length-1);return _-o<=Xp&&s-_<=Xp}excludePlaylist({playlistToExclude:i=this.mainPlaylistLoader_.media(),error:a={},playlistExclusionDuration:s}){if(i=i||this.mainPlaylistLoader_.media(),s=s||a.playlistExclusionDuration||this.playlistExclusionDuration,!i)return this.error=a,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));i.playlistErrors_++;const o=this.mainPlaylistLoader_.main.playlists,u=o.filter(Tm),_=1===u.length&&u[0]===i;if(1===o.length&&s!==1/0)return videojs$2.log.warn(`Problem encountered with playlist ${i.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(_);if(_){if(this.main().contentSteering){const a=this.pathwayAttribute_(i),s=1e3*this.contentSteeringController_.steeringManifest.ttl;return this.contentSteeringController_.excludePathway(a),this.excludeThenChangePathway_(),void setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(a)},s)}let a=!1;o.forEach(s=>{if(s===i)return;const o=s.excludeUntil;void 0!==o&&o!==1/0&&(a=!0,delete s.excludeUntil)}),a&&(videojs$2.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let x;x=i.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*s,i.excludeUntil=x,a.reason&&(i.lastExcludeReason_=a.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const w=this.selectPlaylist();if(!w)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");const C=a.internal?this.logger_:videojs$2.log.warn,L=a.message?" "+a.message:"";C(`${a.internal?"Internal problem":"Problem"} encountered with playlist ${i.id}.${L} Switching to playlist ${w.id}.`),w.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),w.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const B=w.targetDuration/2*1e3||5e3,U="number"==typeof w.lastRequest&&Date.now()-w.lastRequest<=B;return this.switchMedia_(w,"exclude",_||U)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(i,a){const s=[],o="all"===i;(o||"main"===i)&&s.push(this.mainPlaylistLoader_);const u=[];(o||"audio"===i)&&u.push("AUDIO"),(o||"subtitle"===i)&&(u.push("CLOSED-CAPTIONS"),u.push("SUBTITLES")),u.forEach(i=>{const a=this.mediaTypes_[i]&&this.mediaTypes_[i].activePlaylistLoader;a&&s.push(a)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];!o||i!==a&&"all"!==i||s.push(o)}),s.forEach(i=>a.forEach(a=>{"function"==typeof i[a]&&i[a]()}))}setCurrentTime(i){const a=Kp(this.tech_.buffered(),i);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?a&&a.length?i:(this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),void this.load()):0}duration(){if(!this.mainPlaylistLoader_)return 0;const i=this.mainPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:_v.Playlist.duration(i):1/0:0}seekable(){return this.seekable_}getSeekableRange_(i,a){const s=i.media();if(!s)return null;const o=this.syncController_.getMediaSequenceSync(a);if(o&&o.isReliable){const i=o.start,a=o.end;if(!isFinite(i)||!isFinite(a))return null;const u=_v.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,s);return createTimeRanges$2([[i,Math.max(i,a-u)]])}const u=this.syncController_.getExpiredTime(s,this.duration());if(null===u)return null;const _=_v.Playlist.seekable(s,u,_v.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,s));return _.length?_:null}computeFinalSeekable_(i,a){if(!a)return i;const s=i.start(0),o=i.end(0),u=a.start(0),_=a.end(0);return u>o||s>_?i:createTimeRanges$2([[Math.max(s,u),Math.min(o,_)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const i=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!i)return;let a;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!a))return;const s=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(i,a),!this.seekable_)return;if(s&&s.length&&this.seekable_.length&&s.start(0)===this.seekable_.start(0)&&s.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${em(this.seekable_)}]`);const o={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:o}),this.tech_.trigger("seekablechanged")}updateDuration(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,i),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(i){const i=this.seekable();if(!i.length)return;return void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1))&&this.sourceUpdater_.setDuration(i.end(i.length-1)))}const a=this.tech_.buffered();let s=_v.Playlist.duration(this.mainPlaylistLoader_.media());a.length>0&&(s=Math.max(s,a.end(a.length-1))),this.mediaSource.duration!==s&&this.sourceUpdater_.setDuration(s)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(i=>{const a=this.mediaTypes_[i].groups;for(const s in a)a[s].forEach(i=>{i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=!i||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!a||!s)}getCodecsOrExclude_(){const i={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},a=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();i.video=i.main;const s=Km(this.main(),a),o={},u=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(i.main.hasVideo&&(o.video=s.video||i.main.videoCodec||"avc1.4d400d"),i.main.isMuxed&&(o.video+=`,${s.audio||i.main.audioCodec||fr}`),(i.main.hasAudio&&!i.main.isMuxed||i.audio.hasAudio||u)&&(o.audio=s.audio||i.main.audioCodec||i.audio.audioCodec||fr,i.audio.isFmp4=i.main.hasAudio&&!i.main.isMuxed?i.main.isFmp4:i.audio.isFmp4),!o.audio&&!o.video)return void this.excludePlaylist({playlistToExclude:a,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});const _=/* @__PURE__ */__name((i,a)=>i?pr(a,this.usingManagedMediaSource_):mr(a),"supportFunction"),x={};let w;if(["video","audio"].forEach(function(a){if(o.hasOwnProperty(a)&&!_(i[a].isFmp4,o[a])){const s=i[a].isFmp4?"browser":"muxer";x[s]=x[s]||[],x[s].push(o[a]),"audio"===a&&(w=s)}}),u&&w&&a.attributes.AUDIO){const i=a.attributes.AUDIO;this.main().playlists.forEach(s=>{(s.attributes&&s.attributes.AUDIO)===i&&s!==a&&(s.excludeUntil=1/0)}),this.logger_(`excluding audio group ${i} as ${w} does not support codec(s): "${o.audio}"`)}if(Object.keys(x).length){const i=Object.keys(x).reduce((i,a)=>(i&&(i+=", "),i+=`${a} does not support codec(s): "${x[a].join(",")}"`),"")+".";return void this.excludePlaylist({playlistToExclude:a,error:{internal:!0,message:i},playlistExclusionDuration:1/0})}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const i=[];if(["video","audio"].forEach(a=>{const s=(lr(this.sourceUpdater_.codecs[a]||"")[0]||{}).type,u=(lr(o[a]||"")[0]||{}).type;s&&u&&s.toLowerCase()!==u.toLowerCase()&&i.push(`"${this.sourceUpdater_.codecs[a]}" -> "${o[a]}"`)}),i.length)return void this.excludePlaylist({playlistToExclude:a,error:{message:`Codec switching not supported: ${i.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0})}return o}tryToCreateSourceBuffers_(){if("open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers())return;if(!this.areMediaTypesKnown_())return;const i=this.getCodecsOrExclude_();if(!i)return;this.sourceUpdater_.createSourceBuffers(i);const a=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}excludeUnsupportedVariants_(){const i=this.main().playlists,a=[];Object.keys(i).forEach(s=>{const o=i[s];if(-1!==a.indexOf(o.id))return;a.push(o.id);const u=Km(this.main,o),_=[];!u.audio||mr(u.audio)||pr(u.audio,this.usingManagedMediaSource_)||_.push(`audio codec ${u.audio}`),!u.video||mr(u.video)||pr(u.video,this.usingManagedMediaSource_)||_.push(`video codec ${u.video}`),u.text&&"stpp.ttml.im1t"===u.text&&_.push(`text codec ${u.text}`),_.length&&(o.excludeUntil=1/0,this.logger_(`excluding ${o.id} for unsupported: ${_.join(", ")}`))})}excludeIncompatibleVariants_(i){const a=[],s=this.main().playlists,o=Xm(lr(i)),u=Qm(o),_=o.video&&lr(o.video)[0]||null,x=o.audio&&lr(o.audio)[0]||null;Object.keys(s).forEach(i=>{const o=s[i];if(-1!==a.indexOf(o.id)||o.excludeUntil===1/0)return;a.push(o.id);const w=[],C=Km(this.mainPlaylistLoader_.main,o),L=Qm(C);if(C.audio||C.video){if(L!==u&&w.push(`codec count "${L}" !== "${u}"`),!this.sourceUpdater_.canChangeType()){const i=C.video&&lr(C.video)[0]||null,a=C.audio&&lr(C.audio)[0]||null;i&&_&&i.type.toLowerCase()!==_.type.toLowerCase()&&w.push(`video codec "${i.type}" !== "${_.type}"`),a&&x&&a.type.toLowerCase()!==x.type.toLowerCase()&&w.push(`audio codec "${a.type}" !== "${x.type}"`)}w.length&&(o.excludeUntil=1/0,this.logger_(`excluding ${o.id}: ${w.join(" && ")}`))}})}updateAdCues_(i){let a=0;const s=this.seekable();s.length&&(a=s.start(0)),By(i,this.cueTagsTrack_,a)}goalBufferLength(){const i=this.tech_.currentTime(),a=yg.GOAL_BUFFER_LENGTH,s=yg.GOAL_BUFFER_LENGTH_RATE,o=Math.max(a,yg.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+i*s,o)}bufferLowWaterLine(){const i=this.tech_.currentTime(),a=yg.BUFFER_LOW_WATER_LINE,s=yg.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(a,yg.MAX_BUFFER_LOW_WATER_LINE),u=Math.max(a,yg.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+i*s,this.bufferBasedABR?u:o)}bufferHighWaterLine(){return yg.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(i){K_(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Q_({inbandTextTracks:this.inbandTextTracks_,dateRanges:i})}addMetadataToTextTrack(i,a,s){const o=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();K_(this.inbandTextTracks_,i,this.tech_),W_({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:o,videoDuration:s})}pathwayAttribute_(i){return i.attributes["PATHWAY-ID"]||i.attributes.serviceLocation}initContentSteeringController_(){const i=this.main();if(i.contentSteering){for(const a of i.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(a));this.contentSteeringController_.assignTagProperties(i.uri,i.contentSteering),this.contentSteeringController_.queryBeforeStart?this.contentSteeringController_.requestSteeringManifest(!0):this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this));["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(i=>{this.contentSteeringController_.on(i,i=>{this.trigger(_extends({},i))})}),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const i=this.main();(this.contentSteeringController_.didDASHTagChange(i.uri,i.contentSteering)||/* @__PURE__ */__name(()=>{const a=this.contentSteeringController_.getAvailablePathways(),s=[];for(const o of i.playlists){const i=o.attributes.serviceLocation;if(i&&(s.push(i),!a.has(i)))return!0}return!(s.length||!a.size)},"didPathwaysChange")())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const i=this.contentSteeringController_.getPathway();if(!i)return;this.handlePathwayClones_();const a=this.main().playlists,s=/* @__PURE__ */new Set;let o=!1;Object.keys(a).forEach(u=>{const _=a[u],x=this.pathwayAttribute_(_),w=x&&i!==x;_.excludeUntil===1/0&&"content-steering"===_.lastExcludeReason_&&!w&&(delete _.excludeUntil,delete _.lastExcludeReason_,o=!0);const C=!_.excludeUntil&&_.excludeUntil!==1/0;!s.has(_.id)&&w&&C&&(s.add(_.id),_.excludeUntil=1/0,_.lastExcludeReason_="content-steering",this.logger_(`excluding ${_.id} for ${_.lastExcludeReason_}`))}),"DASH"===this.contentSteeringController_.manifestType_&&Object.keys(this.mediaTypes_).forEach(a=>{const s=this.mediaTypes_[a];if(s.activePlaylistLoader){const a=s.activePlaylistLoader.media_;a&&a.attributes.serviceLocation!==i&&(o=!0)}}),o&&this.changeSegmentPathway_()}handlePathwayClones_(){const i=this.main().playlists,a=this.contentSteeringController_.currentPathwayClones,s=this.contentSteeringController_.nextPathwayClones;if(a&&a.size||s&&s.size){for(const[i,o]of a.entries()){s.get(i)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(i))}for(const[o,u]of s.entries()){const s=a.get(o);if(!s){i.filter(i=>i.attributes["PATHWAY-ID"]===u["BASE-ID"]).forEach(i=>{this.mainPlaylistLoader_.addClonePathway(u,i)}),this.contentSteeringController_.addAvailablePathway(o);continue}this.equalPathwayClones_(s,u)||(this.mainPlaylistLoader_.updateOrDeleteClone(u,!0),this.contentSteeringController_.addAvailablePathway(o))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...s])))}}equalPathwayClones_(i,a){if(i["BASE-ID"]!==a["BASE-ID"]||i.ID!==a.ID||i["URI-REPLACEMENT"].HOST!==a["URI-REPLACEMENT"].HOST)return!1;const s=i["URI-REPLACEMENT"].PARAMS,o=a["URI-REPLACEMENT"].PARAMS;for(const u in s)if(s[u]!==o[u])return!1;for(const u in o)if(s[u]!==o[u])return!1;return!0}changeSegmentPathway_(){const i=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(i,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let i=0;const a="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(s=>{const o=this.mainPlaylistLoader_.getKeyIdSet(s);o&&o.size&&o.forEach(o=>{const u="usable",_=this.keyStatusMap_.has(o)&&this.keyStatusMap_.get(o)===u,x=s.lastExcludeReason_===a&&s.excludeUntil===1/0;_?_&&x&&(delete s.excludeUntil,delete s.lastExcludeReason_,this.logger_(`enabling playlist ${s.id} because key ID ${o} is ${u}`)):(s.excludeUntil!==1/0&&s.lastExcludeReason_!==a&&(s.excludeUntil=1/0,s.lastExcludeReason_=a,this.logger_(`excluding playlist ${s.id} because the key ID ${o} doesn't exist in the keyStatusMap or is not ${u}`)),i++)})}),i>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const s=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,o=i.excludeUntil===1/0&&i.lastExcludeReason_===a;s&&o&&(delete i.excludeUntil,videojs$2.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${a} key IDs`))})}addKeyStatus_(i,a){const s=("string"==typeof i?i:Ly(i)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${a}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,a)}updatePlaylistByKeyStatus(i,a){this.addKeyStatus_(i,a),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}};__name(Tv,"PlaylistController");let Sv=Tv;const xv=/* @__PURE__ */__name((i,a,s)=>o=>{const u=i.main.playlists[a],_=bm(u),x=Tm(u);if(void 0===o)return x;o?delete u.disabled:u.disabled=!0;const w={renditionInfo:{id:a,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS},cause:"fast-quality"};return o===x||_||(o?(s(u),i.trigger({type:"renditionenabled",metadata:w})):i.trigger({type:"renditiondisabled",metadata:w})),o},"enableFunction$1");let wv=(__name(Gt=class{constructor(i,a,s){const{playlistController_:o}=i,u=o.fastQualityChange_.bind(o);if(a.attributes){const i=a.attributes.RESOLUTION;this.width=i&&i.width,this.height=i&&i.height,this.bandwidth=a.attributes.BANDWIDTH,this.frameRate=a.attributes["FRAME-RATE"]}this.codecs=Km(o.main(),a),this.playlist=a,this.id=s,this.enabled=xv(i.playlists,a.id,u)}},"Representation"),Gt);const Av=/* @__PURE__ */__name(function(i){i.representations=()=>{const a=i.playlistController_.main(),s=km(a)?i.playlistController_.getAudioTrackPlaylists_():a.playlists;return s?s.filter(i=>!bm(i)).map((a,s)=>new wv(i,a,a.id)):[]}},"renditionSelectionMixin$1"),Cv=["seeking","seeked","pause","playing","error"];let Ev=(Wt=class extends videojs$2.EventTarget{constructor(i){super(),this.playlistController_=i.playlistController,this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=i.liveRangeSafeTimeDelta,this.media=i.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Wp("PlaybackWatcher"),this.logger_("initialize");const a=/* @__PURE__ */__name(()=>this.monitorCurrentTime_(),"playHandler"),s=/* @__PURE__ */__name(()=>this.monitorCurrentTime_(),"canPlayHandler"),o=/* @__PURE__ */__name(()=>this.techWaiting_(),"waitingHandler"),u=/* @__PURE__ */__name(()=>this.resetTimeUpdate_(),"cancelTimerHandler"),_=this.playlistController_,x=["main","subtitle","audio"],w={};x.forEach(i=>{w[i]={reset:/* @__PURE__ */__name(()=>this.resetSegmentDownloads_(i),"reset"),updateend:/* @__PURE__ */__name(()=>this.checkSegmentDownloads_(i),"updateend")},_[`${i}SegmentLoader_`].on("appendsdone",w[i].updateend),_[`${i}SegmentLoader_`].on("playlistupdate",w[i].reset),this.tech_.on(["seeked","seeking"],w[i].reset)});const C=/* @__PURE__ */__name(i=>{["main","audio"].forEach(a=>{_[`${a}SegmentLoader_`][i]("appended",this.seekingAppendCheck_)})},"setSeekingHandlers");this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),C("off"))},this.clearSeekingAppendCheck_=()=>C("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),C("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",o),this.tech_.on(Cv,u),this.tech_.on("canplay",s),this.tech_.one("play",a),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",o),this.tech_.off(Cv,u),this.tech_.off("canplay",s),this.tech_.off("play",a),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),x.forEach(i=>{_[`${i}SegmentLoader_`].off("appendsdone",w[i].updateend),_[`${i}SegmentLoader_`].off("playlistupdate",w[i].reset),this.tech_.off(["seeked","seeking"],w[i].reset)}),this.checkCurrentTimeTimeout_&&Tn.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Tn.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Tn.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(i){const a=this.playlistController_[`${i}SegmentLoader_`];this[`${i}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${i} loader`),this[`${i}StalledDownloads_`]=0,this[`${i}Buffered_`]=a.buffered_()}checkSegmentDownloads_(i){const a=this.playlistController_,s=a[`${i}SegmentLoader_`],o=s.buffered_(),u=im(this[`${i}Buffered_`],o);if(this[`${i}Buffered_`]=o,u){const s={bufferedRanges:o};return a.trigger({type:"bufferedrangeschanged",metadata:s}),void this.resetSegmentDownloads_(i)}this[`${i}StalledDownloads_`]++,this.logger_(`found #${this[`${i}StalledDownloads_`]} ${i} appends that did not increase buffer (possible stalled download)`,{playlistId:s.playlist_&&s.playlist_.id,buffered:nm(o)}),this[`${i}StalledDownloads_`]<10||(this.logger_(`${i} loader stalled download exclusion`),this.resetSegmentDownloads_(i),this.tech_.trigger({type:"usage",name:`vhs-${i}-download-exclusion`}),"subtitle"!==i&&a.excludePlaylist({error:{message:`Excessive ${i} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const i=this.tech_.currentTime(),a=this.tech_.buffered();if(this.lastRecordedTime===i&&(!a.length||i+Xp>=a.end(a.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&i===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(i===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(createTimeRanges$2([this.lastRecordedTime,i]));const a={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:a}),this.consecutiveUpdates=0,this.lastRecordedTime=i}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const i=this.seekable(),a=this.tech_.currentTime();let s;if(this.afterSeekableWindow_(i,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow)){s=i.end(i.length-1)}if(this.beforeSeekableWindow_(i,a)){const a=i.start(0);s=a+(a===i.end(0)?0:Xp)}if(void 0!==s)return this.logger_(`Trying to seek outside of seekable at time ${a} with seekable range ${em(i)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const o=this.playlistController_.sourceUpdater_,u=this.tech_.buffered(),_=o.audioBuffer?o.audioBuffered():null,x=o.videoBuffer?o.videoBuffered():null,w=this.media(),C=w.partTargetDuration?w.partTargetDuration:2*(w.targetDuration-qp),L=[_,x];for(let U=0;U<L.length;U++){if(!L[U])continue;if(am(L[U],a)<C)return!1}const B=Yp(u,a);return 0!==B.length&&(s=B.start(0)+Xp,this.logger_(`Buffered region starts (${B.start(0)})  just beyond seek point (${a}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const i=this.tech_.currentTime(),a=this.tech_.buffered(),s=Kp(a,i);return s.length&&i+3<=s.end(0)?(this.resetTimeUpdate_(),this.tech_.setCurrentTime(i),this.logger_(`Stopped at ${i} while inside a buffered region [${s.start(0)} -> ${s.end(0)}]. Attempting to resume playback by seeking to the current time.`),void this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"})):void 0}techWaiting_(){const i=this.seekable(),a=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(i,a)){const s=i.end(i.length-1);return this.logger_(`Fell out of live window at time ${a}. Seeking to live point (seekable end) ${s}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const s=this.tech_.vhs.playlistController_.sourceUpdater_,o=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:a}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const u=Yp(o,a);return u.length>0&&(this.logger_(`Stopped at ${a} and seeking to ${u.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(a),!0)}afterSeekableWindow_(i,a,s,o=!1){if(!i.length)return!1;let u=i.end(i.length-1)+Xp;const _=!s.endList,x="number"==typeof s.partTargetDuration;return _&&(x||o)&&(u=i.end(i.length-1)+3*s.targetDuration),a>u}beforeSeekableWindow_(i,a){return!!(i.length&&i.start(0)>0&&a<i.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:i,audioBuffered:a,currentTime:s}){if(!i)return;let o;if(i.length&&a.length){const u=Kp(i,s-3),_=Kp(i,s),x=Kp(a,s);x.length&&!_.length&&u.length&&(o={start:u.end(0),end:x.end(0)})}else{Yp(i,s).length||(o=this.gapFromVideoUnderflow_(i,s))}return!!o&&(this.logger_(`Encountered a gap in video from ${o.start} to ${o.end}. Seeking to current time ${s}`),!0)}skipTheGap_(i){const a=this.tech_.buffered(),s=this.tech_.currentTime(),o=Yp(a,s);if(this.resetTimeUpdate_(),0===o.length||s!==i)return;this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",i,"nextRange start:",o.start(0)),this.tech_.setCurrentTime(o.start(0)+qp);const u={gapInfo:{from:s,to:o.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:u}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(i,a){const s=Jp(i);for(let o=0;o<s.length;o++){const i=s.start(o),u=s.end(o);if(a-i<4&&a-i>2)return{start:i,end:u}}return null}},__name(Wt,"PlaybackWatcher"),Wt);const Mv={errorInterval:30,getSource(i){return i(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},kv=/* @__PURE__ */__name(function(i,a){let s=0,o=0;const u=merge$2(Mv,a);i.ready(()=>{i.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const _=/* @__PURE__ */__name(function(){o&&i.currentTime(o)},"loadedMetadataHandler"),x=/* @__PURE__ */__name(function(a){null!=a&&(o=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",_),i.src(a),i.trigger({type:"usage",name:"vhs-error-reload"}),i.play())},"setSource"),w=/* @__PURE__ */__name(function(){if(Date.now()-s<1e3*u.errorInterval)i.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(u.getSource&&"function"==typeof u.getSource)return s=Date.now(),u.getSource.call(i,x);videojs$2.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},"errorHandler"),C=/* @__PURE__ */__name(function(){i.off("loadedmetadata",_),i.off("error",w),i.off("dispose",C)},"cleanupEvents"),L=/* @__PURE__ */__name(function(a){C(),kv(i,a)},"reinitPlugin");i.on("error",w),i.on("dispose",C),i.reloadSourceOnError=L},"initPlugin$2"),Pv=/* @__PURE__ */__name(function(i){kv(this,i)},"reloadSourceOnError$1");var Iv="3.17.0";const Lv={PlaylistLoader:df,Playlist:Pm,utils:Nf,STANDARD_PLAYLIST_SELECTOR:F_,INITIAL_PLAYLIST_SELECTOR:V_,lastBandwidthSelector:F_,movingAverageBandwidthSelector:U_,comparePlaylistBandwidth:O_,comparePlaylistResolution:N_,xhr:_f()};Object.keys(yg).forEach(i=>{Object.defineProperty(Lv,i,{get:()=>(videojs$2.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),yg[i]),set(a){videojs$2.log.warn(`using Vhs.${i} is UNSAFE be sure you know what you are doing`),"number"!=typeof a||a<0?videojs$2.log.warn(`value of Vhs.${i} must be greater than or equal to 0`):yg[i]=a}})});const Dv="videojs-vhs",Rv=/* @__PURE__ */__name(function(i,a){const s=a.media();let o=-1;for(let u=0;u<i.length;u++)if(i[u].id===s.id){o=u;break}i.selectedIndex_=o,i.trigger({selectedIndex:o,type:"change"})},"handleVhsMediaChange$1"),Ov=/* @__PURE__ */__name(function(i,a){a.representations().forEach(a=>{i.addQualityLevel(a)}),Rv(i,a.playlists)},"handleVhsLoadedMetadata$1");Lv.canPlaySource=function(){return videojs$2.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Nv=/* @__PURE__ */__name((i,a,s)=>{if(!i)return i;let o={};a&&a.attributes&&a.attributes.CODECS&&(o=Xm(lr(a.attributes.CODECS))),s&&s.attributes&&s.attributes.CODECS&&(o.audio=s.attributes.CODECS);const u=hr(o.video),_=hr(o.audio),x={};for(const w in i)x[w]={},_&&(x[w].audioContentType=_),u&&(x[w].videoContentType=u),a.contentProtection&&a.contentProtection[w]&&a.contentProtection[w].pssh&&(x[w].pssh=a.contentProtection[w].pssh),"string"==typeof i[w]&&(x[w].url=i[w]);return merge$2(i,x)},"emeKeySystems$1"),Bv=/* @__PURE__ */__name((i,a)=>i.reduce((i,s)=>{if(!s.contentProtection)return i;const o=a.reduce((i,a)=>{const o=s.contentProtection[a];return o&&o.pssh&&(i[a]={pssh:o.pssh}),i},{});return Object.keys(o).length&&i.push(o),i},[]),"getAllPsshKeySystemsOptions$1"),Fv=/* @__PURE__ */__name(({player:i,sourceKeySystems:a,audioMedia:s,mainPlaylists:o})=>{if(!i.eme.initializeMediaKeys)return Promise.resolve();const u=s?o.concat([s]):o,_=Bv(u,Object.keys(a)),x=[],w=[];return _.forEach(a=>{w.push(new Promise((a,s)=>{i.tech_.one("keysessioncreated",a)})),x.push(new Promise((s,o)=>{i.eme.initializeMediaKeys({keySystems:a},i=>{i?o(i):s()})}))}),Promise.race([Promise.all(x),Promise.race(w)])},"waitForKeySessionCreation$1"),Uv=/* @__PURE__ */__name(({player:i,sourceKeySystems:a,media:s,audioMedia:o})=>{const u=Nv(a,s,o);return!!u&&(i.currentSource().keySystems=u,!(u&&!i.eme)||(videojs$2.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},"setupEmeOptions$1"),jv=/* @__PURE__ */__name(()=>{if(!Tn.localStorage)return null;const i=Tn.localStorage.getItem(Dv);if(!i)return null;try{return JSON.parse(i)}catch(a){return null}},"getVhsLocalStorage$1"),Vv=/* @__PURE__ */__name(i=>{if(!Tn.localStorage)return!1;let a=jv();a=a?merge$2(a,i):i;try{Tn.localStorage.setItem(Dv,JSON.stringify(a))}catch(s){return!1}return a},"updateVhsLocalStorage$1"),zv=/* @__PURE__ */__name(i=>0===i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i,"expandDataUri$1"),Hv=/* @__PURE__ */__name((i,a)=>{i._requestCallbackSet||(i._requestCallbackSet=/* @__PURE__ */new Set),i._requestCallbackSet.add(a)},"addOnRequestHook"),$v=/* @__PURE__ */__name((i,a)=>{i._responseCallbackSet||(i._responseCallbackSet=/* @__PURE__ */new Set),i._responseCallbackSet.add(a)},"addOnResponseHook"),Gv=/* @__PURE__ */__name((i,a)=>{i._requestCallbackSet&&(i._requestCallbackSet.delete(a),i._requestCallbackSet.size||delete i._requestCallbackSet)},"removeOnRequestHook"),Wv=/* @__PURE__ */__name((i,a)=>{i._responseCallbackSet&&(i._responseCallbackSet.delete(a),i._responseCallbackSet.size||delete i._responseCallbackSet)},"removeOnResponseHook");Lv.supportsNativeHls=function(){if(!An||!An.createElement)return!1;const i=An.createElement("video");if(!videojs$2.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(a){return/maybe|probably/i.test(i.canPlayType(a))})}(),Lv.supportsNativeDash=!!(An&&An.createElement&&videojs$2.getTech("Html5").isSupported())&&/maybe|probably/i.test(An.createElement("video").canPlayType("application/dash+xml")),Lv.supportsTypeNatively=i=>"hls"===i?Lv.supportsNativeHls:"dash"===i&&Lv.supportsNativeDash,Lv.isSupported=function(){return videojs$2.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},Lv.xhr.onRequest=function(i){Hv(Lv.xhr,i)},Lv.xhr.onResponse=function(i){$v(Lv.xhr,i)},Lv.xhr.offRequest=function(i){Gv(Lv.xhr,i)},Lv.xhr.offResponse=function(i){Wv(Lv.xhr,i)};const qv=videojs$2.getComponent("Component");let Xv=(__name(qt=class extends qv{constructor(i,a,s){if(super(a,s.vhs),"number"==typeof s.initialBandwidth&&(this.options_.bandwidth=s.initialBandwidth),this.logger_=Wp("VhsHandler"),a.options_&&a.options_.playerId){const i=videojs$2.getPlayer(a.options_.playerId);this.player_=i}if(this.tech_=a,this.source_=i,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&a.overrideNativeAudioTracks&&a.overrideNativeVideoTracks)a.overrideNativeAudioTracks(!0),a.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(a.featuresNativeVideoTracks||a.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(An,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],i=>{const a=An.fullscreenElement||An.webkitFullscreenElement||An.mozFullScreenElement||An.msFullscreenElement;a&&a.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(i={}){if(this.options_=merge$2(this.options_,i),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=void 0===this.options_.useNetworkInformationApi||this.options_.useNetworkInformationApi,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){const i=jv();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=yg.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===yg.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{void 0!==this.source_[i]&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const a=this.options_.customPixelRatio;"number"==typeof a&&a>=0&&(this.customPixelRatio=a)}setOptions(i={}){this.setOptions_(i)}src(i,a){if(!i)return;this.setOptions_(),this.options_.src=zv(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Lv,this.options_.sourceType=yr(a),this.options_.seekTo=i=>{this.tech_.setCurrentTime(i)},this.options_.player_=this.player_,this.playlistController_=new Sv(this.options_);const s=merge$2({liveRangeSafeTimeDelta:Xp},this.options_,{seekable:/* @__PURE__ */__name(()=>this.seekable(),"seekable"),media:/* @__PURE__ */__name(()=>this.playlistController_.media(),"media"),playlistController:this.playlistController_});this.playbackWatcher_=new Ev(s),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const i=videojs$2.players[this.tech_.options_.playerId];let a=this.playlistController_.error;"object"!=typeof a||a.code?"string"==typeof a&&(a={message:a,code:3}):a.code=3,i.error(a)});const o=this.options_.bufferBasedABR?Lv.movingAverageBandwidthSelector(.55):Lv.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):o.bind(this),this.playlistController_.selectInitialPlaylist=Lv.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(i){this.playlistController_.selectPlaylist=i.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(i){this.playlistController_.mainSegmentLoader_.throughput.rate=i,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let i=this.playlistController_.mainSegmentLoader_.bandwidth;const a=Tn.navigator.connection||Tn.navigator.mozConnection||Tn.navigator.webkitConnection,s=1e7;if(this.options_.useNetworkInformationApi&&a){const o=1e3*a.downlink*1e3;i=o>=s&&i>=s?Math.max(i,o):o}return i},set(i){this.playlistController_.mainSegmentLoader_.bandwidth=i,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const i=1/(this.bandwidth||1);let a;a=this.throughput>0?1/this.throughput:0;return Math.floor(1/(i+a))},set(){videojs$2.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:/* @__PURE__ */__name(()=>this.bandwidth||0,"get"),enumerable:!0},mediaRequests:{get:/* @__PURE__ */__name(()=>this.playlistController_.mediaRequests_()||0,"get"),enumerable:!0},mediaRequestsAborted:{get:/* @__PURE__ */__name(()=>this.playlistController_.mediaRequestsAborted_()||0,"get"),enumerable:!0},mediaRequestsTimedout:{get:/* @__PURE__ */__name(()=>this.playlistController_.mediaRequestsTimedout_()||0,"get"),enumerable:!0},mediaRequestsErrored:{get:/* @__PURE__ */__name(()=>this.playlistController_.mediaRequestsErrored_()||0,"get"),enumerable:!0},mediaTransferDuration:{get:/* @__PURE__ */__name(()=>this.playlistController_.mediaTransferDuration_()||0,"get"),enumerable:!0},mediaBytesTransferred:{get:/* @__PURE__ */__name(()=>this.playlistController_.mediaBytesTransferred_()||0,"get"),enumerable:!0},mediaSecondsLoaded:{get:/* @__PURE__ */__name(()=>this.playlistController_.mediaSecondsLoaded_()||0,"get"),enumerable:!0},mediaAppends:{get:/* @__PURE__ */__name(()=>this.playlistController_.mediaAppends_()||0,"get"),enumerable:!0},mainAppendsToLoadedData:{get:/* @__PURE__ */__name(()=>this.playlistController_.mainAppendsToLoadedData_()||0,"get"),enumerable:!0},audioAppendsToLoadedData:{get:/* @__PURE__ */__name(()=>this.playlistController_.audioAppendsToLoadedData_()||0,"get"),enumerable:!0},appendsToLoadedData:{get:/* @__PURE__ */__name(()=>this.playlistController_.appendsToLoadedData_()||0,"get"),enumerable:!0},timeToLoadedData:{get:/* @__PURE__ */__name(()=>this.playlistController_.timeToLoadedData_()||0,"get"),enumerable:!0},buffered:{get:/* @__PURE__ */__name(()=>nm(this.tech_.buffered()),"get"),enumerable:!0},currentTime:{get:/* @__PURE__ */__name(()=>this.tech_.currentTime(),"get"),enumerable:!0},currentSource:{get:/* @__PURE__ */__name(()=>this.tech_.currentSource_,"get"),enumerable:!0},currentTech:{get:/* @__PURE__ */__name(()=>this.tech_.name_,"get"),enumerable:!0},duration:{get:/* @__PURE__ */__name(()=>this.tech_.duration(),"get"),enumerable:!0},main:{get:/* @__PURE__ */__name(()=>this.playlists.main,"get"),enumerable:!0},playerDimensions:{get:/* @__PURE__ */__name(()=>this.tech_.currentDimensions(),"get"),enumerable:!0},seekable:{get:/* @__PURE__ */__name(()=>nm(this.tech_.seekable()),"get"),enumerable:!0},timestamp:{get:/* @__PURE__ */__name(()=>Date.now(),"get"),enumerable:!0},videoPlaybackQuality:{get:/* @__PURE__ */__name(()=>this.tech_.getVideoPlaybackQuality(),"get"),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&Vv({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{Av(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Tn.URL.createObjectURL(this.playlistController_.mediaSource),(videojs$2.browser.IS_ANY_SAFARI||videojs$2.browser.IS_IOS)&&this.options_.overrideNative&&"hls"===this.options_.sourceType&&"function"==typeof this.tech_.addSourceElement?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const i=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Fv({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:i&&i.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(i=>{this.logger_("error while creating EME key session",i),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const i=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=Uv({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:i&&i.media()});this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),a?this.createKeySessions_():this.playlistController_.sourceUpdater_.initializedEme()}setupQualityLevels_(){const i=videojs$2.players[this.tech_.options_.playerId];i&&i.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=i.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{Ov(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Rv(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":Iv,"mux.js":"7.1.0","mpd-parser":"1.3.1","m3u8-parser":"7.2.0","aes-decrypter":"4.0.2"}}version(){return this.constructor.version()}canChangeType(){return Py.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(i){this.playlistController_.setCurrentTime(i)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&Tn.URL.revokeObjectURL&&(Tn.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(i,a){return Xf({playlist:this.playlistController_.media(),time:i,callback:a})}seekToProgramTime(i,a,s=!0,o=2){return Qf({programTime:i,playlist:this.playlistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})}setupXhrHooks_(){this.xhr.onRequest=i=>{Hv(this.xhr,i)},this.xhr.onResponse=i=>{$v(this.xhr,i)},this.xhr.offRequest=i=>{Gv(this.xhr,i)},this.xhr.offResponse=i=>{Wv(this.xhr,i)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(i=>{this.playlistController_.on(i,i=>{this.player_.trigger(_extends({},i))})}),["gapjumped","playedrangeschanged"].forEach(i=>{this.playbackWatcher_.on(i,i=>{this.player_.trigger(_extends({},i))})})}},"VhsHandler"),qt);const Qv={name:"videojs-http-streaming",VERSION:Iv,canHandleSource(i,a={}){const s=merge$2(videojs$2.options,a);return!(!s.vhs.experimentalUseMMS&&!pr("avc1.4d400d,mp4a.40.2",!1))&&Qv.canPlayType(i.type,s)},handleSource(i,a,s={}){const o=merge$2(videojs$2.options,s);return a.vhs=new Xv(i,a,o),a.vhs.xhr=_f(),a.vhs.setupXhrHooks_(),a.vhs.src(i.src,i.type),a.vhs},canPlayType(i,a){const s=yr(i);if(!s)return"";const o=Qv.getOverrideNative(a);return!Lv.supportsTypeNatively(s)||o?"maybe":""},getOverrideNative(i={}){const{vhs:a={}}=i,s=!(videojs$2.browser.IS_ANY_SAFARI||videojs$2.browser.IS_IOS),{overrideNative:o=s}=a;return o}};/* @__PURE__ */__name(()=>pr("avc1.4d400d,mp4a.40.2",!0),"supportsNativeMediaSources$1")()&&videojs$2.getTech("Html5").registerSourceHandler(Qv,0),videojs$2.VhsHandler=Xv,videojs$2.VhsSourceHandler=Qv,videojs$2.Vhs=Lv,videojs$2.use||videojs$2.registerComponent("Vhs",Lv),videojs$2.options.vhs=videojs$2.options.vhs||{},videojs$2.getPlugin&&videojs$2.getPlugin("reloadSourceOnError")||videojs$2.registerPlugin("reloadSourceOnError",Pv);const Kv=/* @__PURE__ */__name(({className:i,size:a=24,...s})=>/* @__PURE__ */bn.jsxs("svg",{className:i,width:a,height:a,viewBox:"0 0 1080 1080",xmlns:"http://www.w3.org/2000/svg",...s,children:[
/* @__PURE__ */bn.jsx("path",{d:"M0 0 C0.98444092 0.5667041 1.96888184 1.1334082 2.9831543 1.71728516 C11.79915747 6.81238697 20.55182327 12.01772296 29.30053711 17.22729492 C37.01717971 21.82181521 44.77417417 26.34062674 52.5625 30.8125 C62.57980932 36.56588394 72.52928972 42.42565338 82.45703125 48.33203125 C90.12448945 52.88651911 97.8292319 57.37078011 105.5625 61.8125 C114.43778787 66.91015627 123.26634893 72.079483 132.0625 77.3125 C141.99754115 83.22183413 151.97901105 89.0432911 161.99951172 94.80639648 C172.23102058 100.69094782 182.42633052 106.6363648 192.61669922 112.59179688 C195.53644319 114.29727968 198.4574316 116.00060877 201.37890625 117.703125 C212.90258952 124.4190222 224.4149979 131.15385372 235.91986084 137.9019165 C248.12240577 145.05881903 260.33991794 152.1898696 272.5625 159.3125 C286.02539523 167.15791485 299.4792247 175.01844523 312.91986084 182.9019165 C325.12240577 190.05881903 337.33991794 197.1898696 349.5625 204.3125 C365.49682551 213.59812481 381.42242035 222.89837799 397.32331848 232.24113464 C401.20081641 234.51783098 405.08665952 236.77969177 408.9765625 239.03515625 C410.92190154 240.1692253 412.86721561 241.30333721 414.8125 242.4375 C415.67439941 242.9332251 416.53629883 243.4289502 417.42431641 243.93969727 C428.5826319 250.4687809 437.81827372 257.53747917 442.03125 270.2265625 C444.71822729 280.77689979 443.53244603 291.21111996 438.20263672 300.76245117 C432.38406589 309.80903829 423.80579166 314.96817322 414.5625 320 C413.32178993 320.69045676 412.08189495 321.38237999 410.84277344 322.07568359 C408.31436743 323.48725669 405.78159044 324.89039462 403.24414062 326.28564453 C397.75033325 329.30652091 392.28298862 332.37466853 386.8125 335.4375 C385.7915625 336.00686279 384.770625 336.57622559 383.71875 337.1628418 C375.61125834 341.69308281 367.5897463 346.36086587 359.58105469 351.06298828 C351.41990626 355.84255592 343.17773139 360.46616602 334.91357422 365.06469727 C327.78621733 369.04065635 320.72310908 373.11413998 313.6875 377.25 C304.08543764 382.89231859 294.38029042 388.32652817 284.62939453 393.70678711 C277.21334148 397.80977022 269.86734825 402.01495979 262.5625 406.3125 C254.13027249 411.27329255 245.62827077 416.08609533 237.0625 420.8125 C227.40911754 426.14016517 217.846847 431.59932246 208.33984375 437.18359375 C200.67269608 441.68233073 192.94655455 446.0675082 185.19726562 450.42285156 C178.36018663 454.27423541 171.57869784 458.21313675 164.8125 462.1875 C155.16785768 467.84821163 145.42103902 473.30399746 135.62988281 478.70654297 C128.21364613 482.80957113 120.86750517 487.01486748 113.5625 491.3125 C105.13027394 496.27329169 96.62829665 501.08614413 88.0625 505.8125 C78.45433937 511.11456842 68.94070912 516.55210957 59.48046875 522.11328125 C51.36176661 526.87510919 43.16048432 531.47736805 34.93505859 536.05175781 C27.58740089 540.14898179 20.31389293 544.36008532 13.0625 548.625 C6.09749914 552.70974586 -0.88343497 556.74654328 -8 560.5625 C-8.66 560.92126221 -9.32 561.28002441 -10 561.6496582 C-19.49529425 566.65763629 -29.21138742 567.92877808 -39.625 565.1875 C-49.40844994 561.8063397 -58.01164742 554.96617899 -62.7890625 545.6875 C-65.1476677 539.98612341 -66.56491893 534.61368906 -66.55741024 528.41808891 C-66.55861445 527.45107135 -66.55981866 526.48405378 -66.56105936 525.48773265 C-66.55717915 524.4307918 -66.55329894 523.37385095 -66.54930115 522.28488159 C-66.54886525 520.58665532 -66.54886525 520.58665532 -66.54842055 518.85412145 C-66.54582889 515.02755993 -66.53561089 511.20105929 -66.52514648 507.37451172 C-66.52169149 505.31279562 -66.51896442 503.25107937 -66.5162843 501.18936213 C-66.46723654 464.5493012 -66.26073688 427.90939215 -66.06657338 391.26988077 C-66.03462433 385.23361215 -66.00328587 379.19734044 -65.97207451 373.16106796 C-65.86792731 353.02984479 -65.762487 332.89862903 -65.65524632 312.76742209 C-65.64953506 311.69529585 -65.64382379 310.62316961 -65.63793945 309.51855469 C-65.63222053 308.44504036 -65.62650161 307.37152604 -65.6206094 306.26548098 C-65.52818096 288.90048705 -65.43889183 271.5354786 -65.35104198 254.17046095 C-65.2596399 236.11053942 -65.16582381 218.05063172 -65.06965441 199.99073493 C-65.01619733 189.94345699 -64.96361915 179.89617657 -64.9136219 169.84888077 C-64.80062734 147.24727372 -64.66957889 124.64591045 -64.49601831 102.0446801 C-64.46274307 97.70566778 -64.43062744 93.36665294 -64.40105963 89.02761364 C-64.33650029 79.5765968 -64.26338248 70.12579335 -64.16400493 60.67507078 C-64.122571 56.72736636 -64.0853881 52.77976061 -64.06062138 48.83191323 C-64.03764267 45.21186234 -64.0008162 41.59221645 -63.95323582 37.97240773 C-63.93128529 36.04647398 -63.92344112 34.12039518 -63.91618669 32.19435 C-63.71565532 19.30425802 -60.63728685 9.53992519 -51.40234375 0.26953125 C-35.29393739 -13.44161682 -16.79770512 -9.85262895 0 0 Z ",fill:"currentColor",transform:"translate(78.4375,266.6875)"}),
/* @__PURE__ */bn.jsx("path",{d:"M0 0 C10.32329688 10.12206302 15.43615919 25.94156498 20.8125 39.125 C21.11336517 39.8592218 21.41423035 40.5934436 21.72421265 41.34991455 C27.61188675 55.7421791 33.02150178 70.26584945 38 85 C38.57741943 86.70349609 38.57741943 86.70349609 39.16650391 88.44140625 C54.10899445 132.86198141 64.02602688 178.32585278 69.25 224.875 C69.33317474 225.61141724 69.41634949 226.34783447 69.50204468 227.10656738 C71.79828653 247.68010947 72.24389529 268.12198877 72.25 288.8125 C72.25066278 289.8433736 72.25066278 289.8433736 72.25133896 290.89507294 C72.25855596 312.34548781 71.86461832 333.62042507 69.25323486 354.93243408 C68.98919779 357.08819591 68.73437843 359.24493646 68.47998047 361.40185547 C61.35292101 421.02861519 45.76501631 479.47924086 23.25 535.125 C22.9876355 535.77660095 22.725271 536.4282019 22.45495605 537.09954834 C9.02987164 570.29702276 9.02987164 570.29702276 -7 578 C-17.72736492 582.36004862 -28.20065077 581.91965167 -38.984375 577.8828125 C-48.55476332 573.58342486 -56.02818825 566.70574915 -60.29296875 556.98828125 C-65.89344349 541.23887992 -61.76640772 527.30490002 -55.125 512.5625 C-30.0737579 454.99550864 -15.7886637 393.36843627 -10 331 C-9.89469971 329.93362305 -9.78939941 328.86724609 -9.6809082 327.76855469 C-8.71772342 316.63499471 -8.81392777 305.467739 -8.81469727 294.30078125 C-8.81253054 290.79935168 -8.79437695 287.2982483 -8.77539062 283.796875 C-8.72339401 263.16129731 -9.990864 242.65124978 -12.6875 222.1875 C-12.85411133 220.92164063 -13.02072266 219.65578125 -13.19238281 218.3515625 C-17.9169081 183.52793385 -25.75729187 149.2999983 -37 116 C-37.33080566 115.00258789 -37.66161133 114.00517578 -38.00244141 112.97753906 C-44.27861608 94.07593429 -51.57668965 75.66749695 -59.40625 57.359375 C-59.77290771 56.49948975 -60.13956543 55.63960449 -60.51733398 54.75366211 C-61.18491116 53.19442263 -61.85832848 51.63766207 -62.53930664 50.08422852 C-67.09251982 39.50524741 -69.14158402 28.43989337 -65.375 17.25 C-60.31379474 5.07479295 -52.7160209 -2.97224469 -40.5234375 -8.06640625 C-26.18561119 -13.37095809 -11.63699433 -9.1625641 0 0 Z ",fill:"currentColor",transform:"translate(991,265)"}),
/* @__PURE__ */bn.jsx("path",{d:"M0 0 C0.71800781 0.24492187 1.43601562 0.48984375 2.17578125 0.7421875 C13.88563866 5.3128745 20.2220512 14.25032782 26 25 C26.40976074 25.76054687 26.81952148 26.52109375 27.24169922 27.3046875 C68.40069131 104.70862073 79.83368986 194.25818804 57 279 C56.7932666 279.77827148 56.5865332 280.55654297 56.37353516 281.35839844 C50.67826733 302.44971309 42.65347343 322.9271035 33.375 342.6875 C32.87347412 343.77877197 32.37194824 344.87004395 31.85522461 345.99438477 C26.82794386 356.39228459 19.20937211 367.00107292 8 371.1875 C-3.56511576 375.09945862 -14.49749428 374.80112021 -25.65625 369.8125 C-35.66147775 364.37756147 -42.52286667 356.26443448 -46.19140625 345.5 C-49.74931552 330.09958111 -44.57410568 317.81750338 -38.25 304.0625 C-8.53025778 238.05676683 -3.54858745 167.48630877 -29.09521484 99.17749023 C-34.67863837 84.83123608 -41.28944333 70.75080457 -48.53881836 57.17114258 C-53.8524583 46.96498699 -54.71988293 35.71167665 -51.375 24.6875 C-49.37327184 19.34955825 -46.7839695 15.23291503 -43 11 C-42.24783203 10.07574219 -42.24783203 10.07574219 -41.48046875 9.1328125 C-31.5359111 -2.14252537 -13.80998523 -4.79628229 0 0 Z ",fill:"currentColor",transform:"translate(800,363)"}),
/* @__PURE__ */bn.jsx("path",{d:"M0 0 C20.36797209 17.5208362 30.98152094 48.65216331 33.25 74.875 C34.66601923 105.04141347 29.99407499 140.23347324 9.25 163.875 C2.33437498 171.2402957 -6.767565 174.89927327 -16.75 175.875 C-29.27439391 176.03859876 -39.73763503 171.67182096 -48.65625 163.02734375 C-57.30505975 153.81049777 -59.15690908 144.16178785 -58.96484375 131.91796875 C-58.6585184 123.68904251 -55.38521402 117.01020231 -51.953125 109.66015625 C-46.34038834 96.66703535 -45.36581086 83.40730035 -49.75 69.875 C-51.70175288 65.01460373 -54.2229643 60.45698781 -56.75 55.875 C-62.88742914 44.32124959 -65.72598793 34.36956431 -62.625 21.25 C-59.29685073 10.41810676 -51.73490932 2.40718705 -42.1875 -3.5 C-28.61773045 -9.91480015 -12.25454701 -8.86098015 0 0 Z ",fill:"currentColor",transform:"translate(637.75,466.125)"})]}),"Logo");var Yv=Object.defineProperty,Jv=/* @__PURE__ */__name((i,a,s)=>a in i?Yv(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,"__defNormalProp$8"),Zv=/* @__PURE__ */__name((i,a,s)=>Jv(i,"symbol"!=typeof a?a+"":a,s),"__publicField$8");let eb=null,tb=null;const nb=/* @__PURE__ */__name(async()=>{if(!eb)try{return eb=await Promise.resolve().then(()=>XO),await Promise.resolve().then(()=>QO),eb}catch(i){return null}return eb},"loadVRPlugin"),pb=/* @__PURE__ */__name(async()=>{if(!tb)try{return tb=await Promise.resolve().then(()=>uN),tb}catch(i){return null}return tb},"loadPlaylistPlugin"),mb=class _MediaPlayer extends Zt.Component{constructor(i){super(i),Zv(this,"handlePlaylistPropsChange",()=>{this.player&&this.isPlayerReady&&this.updatePlaylistFromProps()}),Zv(this,"updatePlaylistFromProps",async()=>{if(!this.player||!this.isPlayerReady||"function"!=typeof this.player.playlist)return;const i=this.props.playlist||[];if(0===i.length)return this.player.playlist([]),void this.notify?.("status:media",{message:"Playlist cleared",type:"info"});try{this.notify?.("status:media",{message:`Updating Video.js playlist: ${i.length} items`,type:"log"});const a=this.filterForVideojs(i);this.player.playlist(a),-1===this.player.playlist.currentItem()&&this.player.playlist.currentItem(0),this.notify?.("status:media",{message:"Video.js playlist updated successfully",type:"success"}),this._triggerRender()}catch(a){this.notify?.("status:media",{message:"Failed to update Video.js playlist",type:"error",error:a.message}),this.props.onError?.(a)}}),Zv(this,"_hasValidPlaylist",()=>{const i=this.props.playlist;return i&&i.length>0}),Zv(this,"_triggerRender",()=>{this.setState(i=>({renderTrigger:i.renderTrigger+1}))}),Zv(this,"_isPlaylistMode",()=>this.player&&"function"==typeof this.player.playlist&&this.player.playlist().length>0),Zv(this,"initPlaylistPlugin",async()=>{if(this.player&&!this.isDestroyed)try{this.notify?.("status:media",{message:"Loading Video.js playlist plugin...",type:"log"});const i=await pb();if(!i)return void this.notify?.("status:media",{message:"Playlist plugin not available, skipping",type:"info"});if("function"!=typeof this.player.playlist&&i.default&&videojs$2.registerPlugin("playlist",i.default),"function"!=typeof this.player.playlist)throw new Error("Playlist plugin failed to register");this.player.on("playlistchange",this.handlePlaylistChange),this.player.on("playlistitem",this.handlePlaylistItem),this.notify?.("status:media",{message:"Video.js playlist plugin loaded successfully",type:"success"})}catch(i){throw this.notify?.("status:media",{message:"Playlist plugin initialization failed",type:"error",error:i.message}),i}}),Zv(this,"filterForVideojs",i=>i.map(i=>{const{funscript:a,...s}=i;return s})),Zv(this,"handlePlaylistChange",()=>{this.notify?.("status:media",{message:"Video.js playlist changed",type:"log"}),this._triggerRender(),this.updatePlaylistButtons()}),Zv(this,"handlePlaylistItem",()=>{setTimeout(()=>{const i=this.player.playlist.currentItem();this.notify?.("status:media",{message:`Video.js switched to item ${i}`,type:"log"}),this.props.onPlaylistItemChange?.(i),setTimeout(()=>{const i=this.getCurrentPlaylistItem();i&&i.poster&&this.player.poster(i.poster)},100),this.updatePlaylistButtons()},0)}),Zv(this,"getCurrentPlaylistItem",()=>{if(!this._isPlaylistMode())return null;const i=this.player.playlist.currentItem(),a=this.player.playlist();return i>=0&&i<a.length?a[i]:null}),Zv(this,"goToPlaylistItem",i=>{if(!this._isPlaylistMode())return!1;try{const a=this.player.playlist();return i<0||i>=a.length?(this.notify?.("status:media",{message:`Invalid playlist index: ${i}`,type:"error"}),!1):(this.player.playlist.currentItem(i),this.notify?.("status:media",{message:`Navigated to playlist item ${i}`,type:"log"}),setTimeout(()=>{const a=this.player.playlist.currentItem();a!==i&&this.notify?.("status:media",{message:`Navigation mismatch: requested ${i}, got ${a}`,type:"error"})},10),!0)}catch(a){return this.notify?.("status:media",{message:`Failed to navigate to playlist item ${i}`,type:"error",error:a.message}),!1}}),Zv(this,"handleNext",()=>{this._isPlaylistMode()&&(this.player.playlist.next(),this.notify?.("status:media",{message:"Video.js playlist: next item",type:"log"}))}),Zv(this,"handlePrevious",()=>{this._isPlaylistMode()&&(this.player.playlist.previous(),this.notify?.("status:media",{message:"Video.js playlist: previous item",type:"log"}))}),Zv(this,"getPlaylistInfo",()=>{if(!this._isPlaylistMode())return{hasPlaylist:!1,currentIndex:-1,totalItems:0};const i=this.player.playlist.currentItem(),a=this.player.playlist().length;return{hasPlaylist:!0,currentIndex:i,totalItems:a,canNext:i<a-1,canPrevious:i>0}}),Zv(this,"registerPlaylistComponents",()=>{const i=videojs$2.getComponent("Button"),a=class _PreviousButton extends i{constructor(i,a){super(i,a),this.controlText("Previous item")}handleClick(){this.player().playlist&&this.player().playlist.previous()}createEl(){const i=super.createEl("button",{className:"vjs-previous-button vjs-control vjs-button"});return i.innerHTML='<span aria-hidden="true">⏮</span>',i.title="Previous item",i}};__name(a,"PreviousButton");let s=a;const o=class _NextButton extends i{constructor(i,a){super(i,a),this.controlText("Next item")}handleClick(){this.player().playlist&&this.player().playlist.next()}createEl(){const i=super.createEl("button",{className:"vjs-next-button vjs-control vjs-button"});return i.innerHTML='<span aria-hidden="true">⏭</span>',i.title="Next item",i}};__name(o,"NextButton");let u=o;videojs$2.registerComponent("PreviousButton",s),videojs$2.registerComponent("NextButton",u),this.notify?.("status:media",{message:"Video.js playlist control buttons registered",type:"log"})}),Zv(this,"updatePlaylistButtons",()=>{if(!this.player)return;const i=this.player.getChild("controlBar");if(!i)return;const a=i.getChild("PreviousButton"),s=i.getChild("NextButton"),o=this.getPlaylistInfo();a&&(a.el().disabled=!o.canPrevious,a.el().style.opacity=o.canPrevious?"1":"0.3"),s&&(s.el().disabled=!o.canNext,s.el().style.opacity=o.canNext?"1":"0.3")}),Zv(this,"initPlayer",async()=>{if(!(this.isDestroyed||this.isInitialized||this.isInitializing))if(this.videoRef?.current){this.isInitializing=!0,this.notify?.("status:media",{message:"Initializing Video.js player...",type:"processing"});try{const i=this.videoRef.current;this.registerPlaylistComponents();const a={controls:!0,responsive:!0,fluid:!0,playsinline:!0,preload:"metadata",techOrder:["html5"],html5:{vhs:{overrideNative:!1}},controlBar:{children:["playToggle","currentTimeDisplay","timeDivider","durationDisplay","progressControl","PreviousButton","NextButton","volumePanel","fullscreenToggle"]}};if(this.player=videojs$2(i,a),!this.player)throw new Error("Failed to create Video.js player instance");this.player.ready(()=>{this.isDestroyed||(this.isPlayerReady=!0,this.isInitialized=!0,this.isInitializing=!1,this.notify?.("status:media",{message:"Video.js player ready",type:"success"}),this.initPlugins().then(()=>{this.setupCallbacks(),this.notify?.("status:media",{message:"Video.js player initialization complete",type:"success"}),this._triggerRender()}).catch(i=>{this.notify?.("status:media",{message:"Plugin initialization failed",type:"error",error:i.message}),this.props.onError?.(i)}))})}catch(i){this.notify?.("status:media",{message:"Failed to initialize Video.js player",type:"error",error:i.message}),this.isInitializing=!1,this.props.onError?.(i)}}else this.notify?.("status:media",{message:"Video element not available for initialization",type:"error"})}),Zv(this,"initPlugins",async()=>{if(!this.isDestroyed&&this.player)try{this.notify?.("status:media",{message:"Loading Video.js plugins...",type:"processing"});const[i,a]=await Promise.allSettled([this.initVRPlugin(),this.initPlaylistPlugin()]);"rejected"===i.status&&this.notify?.("status:media",{message:"VR plugin initialization failed",type:"log",error:i.reason?.message}),"rejected"===a.status&&this.notify?.("status:media",{message:"Playlist plugin initialization failed",type:"error",error:a.reason?.message}),this._hasValidPlaylist()&&await this.updatePlaylistFromProps(),this.notify?.("status:media",{message:"Video.js plugins loaded",type:"success"})}catch(i){throw this.notify?.("status:media",{message:"Plugin initialization error",type:"error",error:i.message}),i}}),Zv(this,"initVRPlugin",async()=>{if(this.player&&!this.isDestroyed)try{this.notify?.("status:media",{message:"Loading Video.js VR plugin...",type:"log"});const i=await nb();if(!i)return void this.notify?.("status:media",{message:"VR plugin not available",type:"info"});if("function"==typeof this.player.vr)return void this.configureVRPlugin();if(!videojs$2.getPlugin("vr")&&i.default){const a=/* @__PURE__ */__name(function(a={}){return new i.default(this,a)},"vrWrapper");videojs$2.registerPlugin("vr",a)}this.configureVRPlugin(),this.notify?.("status:media",{message:"VR plugin loaded successfully",type:"success"})}catch(i){this.notify?.("status:media",{message:"VR plugin initialization failed",type:"log",error:i.message})}}),Zv(this,"configureVRPlugin",()=>{if(this.player&&!this.isDestroyed)try{this.player.mediainfo||(this.player.mediainfo={}),this.player.vr({projection:"AUTO",debug:!1,forceCardboard:!1}),this.notify?.("status:media",{message:"VR plugin configured",type:"log"})}catch(i){this.notify?.("status:media",{message:"VR configuration failed",type:"log",error:i.message})}}),Zv(this,"setupCallbacks",()=>{this.player&&(this.player.on("error",i=>{this.notify?.("status:media",{message:"Video.js player error occurred",type:"error",error:i?.message||"Unknown Video.js error"}),this.props.onError?.(i)}),this.player.on("play",()=>{const i=this.player.currentTime()||0;this.notify?.("status:media",{message:`Playback started at ${i.toFixed(1)}s`,type:"log"}),this.updatePlaylistButtons(),this.props.onPlay?.({currentTime:i})}),this.player.on("pause",()=>{const i=this.player.currentTime()||0;this.notify?.("status:media",{message:`Playback paused at ${i.toFixed(1)}s`,type:"log"}),this.props.onPause?.({currentTime:i})}),this.player.on("ended",()=>{this.notify?.("status:media",{message:"Media playback ended",type:"info"}),this.props.onEnded?.({currentTime:0})}),this.player.on("seeking",()=>{const i=this.player.currentTime()||0;this.notify?.("status:media",{message:`Seeking to ${i.toFixed(1)}s`,type:"log"}),this.props.onSeeking?.({currentTime:i})}),this.player.on("seeked",()=>{const i=this.player.currentTime()||0;this.notify?.("status:media",{message:`Seeked to ${i.toFixed(1)}s`,type:"log"}),this.props.onSeeked?.({currentTime:i})}),this.player.on("timeupdate",()=>{const i=this.player.currentTime()||0;this.props.onTimeUpdate?.({currentTime:i})}),this.player.on("durationchange",()=>{const i=this.player.duration()||0;this.notify?.("status:media",{message:`Duration changed: ${i.toFixed(1)}s`,type:"log"}),this.props.onDurationChange?.({duration:i})}),this.player.on("loadstart",()=>{this.notify?.("status:media",{message:"Media loading started",type:"log"}),this.props.onLoadStart?.({})}),this.player.on("loadeddata",()=>{const i=this.player.duration()||0;this.notify?.("status:media",{message:"Media data loaded",type:"log"}),this.props.onLoadedData?.({duration:i})}),this.player.on("loadedmetadata",()=>{const i=this.player.duration()||0;this.notify?.("status:media",{message:`Media loaded: ${i.toFixed(1)}s duration`,type:"success"}),this.updatePlaylistButtons(),this._triggerRender(),this.props.onLoadedMetadata?.({duration:i,type:this._isPlaylistMode()?"playlist":"media"})}),this.player.on("canplay",()=>{const i=this.player.currentTime()||0;this.notify?.("status:media",{message:"Media ready to play",type:"log"}),this.props.onCanPlay?.({currentTime:i})}),this.player.on("canplaythrough",()=>{const i=this.player.currentTime()||0;this.notify?.("status:media",{message:"Media can play through",type:"log"}),this.props.onCanPlayThrough?.({currentTime:i})}),this.player.on("waiting",()=>{const i=this.player.currentTime()||0;this.notify?.("status:media",{message:"Media buffering...",type:"log"}),this.props.onWaiting?.({currentTime:i})}),this.player.on("stalled",()=>{const i=this.player.currentTime()||0;this.notify?.("status:media",{message:"Media connection stalled",type:"warning"}),this.props.onStalled?.({currentTime:i})}),this.player.on("suspend",()=>{const i=this.player.currentTime()||0;this.notify?.("status:media",{message:"Media loading suspended",type:"log"}),this.props.onSuspend?.({currentTime:i})}),this.player.on("volumechange",()=>{const i=this.player.volume(),a=this.player.muted();this.notify?.("status:media",{message:"Volume: "+(a?"muted":Math.round(100*i)+"%"),type:"log"}),this.props.onVolumeChange?.({volume:i,muted:a})}),this.player.on("error",i=>{this.notify?.("status:media",{message:"Video.js player error occurred",type:"error",error:i?.message||"Unknown Video.js error"}),this.props.onError?.(i)}),this.player.on("resize",()=>{const i={width:this.player.currentWidth(),height:this.player.currentHeight()};this.notify?.("status:media",{message:`Player resized: ${i.width}x${i.height}`,type:"log"}),this.props.onResize?.(i)}),this.player.playlist&&this.player.on("playlistitem",i=>{const a=this.player.playlist.currentItem(),s=this.player.playlist().length;this.notify?.("status:media",{message:`Playlist item changed: ${a+1}/${s}`,type:"info"}),this.updatePlaylistButtons(),this._triggerRender(),this.props.onPlaylistItemChange?.({index:a,total:s,item:this.player.playlist()[a]})}))}),Zv(this,"cleanup",()=>{if(this.isDestroyed=!0,this.isInitialized=!1,this.isInitializing=!1,this.player)try{this.player.paused()||this.player.pause(),"function"==typeof this.player.dispose&&this.player.dispose(),this.notify?.("status:media",{message:"Video.js player disposed",type:"log"})}catch(i){this.notify?.("status:media",{message:"Error during player cleanup",type:"error",error:i.message})}finally{this.player=null,this.isPlayerReady=!1,this.initRetries=0,this.setState({renderTrigger:0})}}),Zv(this,"play",()=>this.player?.play()),Zv(this,"pause",()=>this.player?.pause()),Zv(this,"stop",()=>{this.player?.pause(),this.player?.currentTime(0)}),Zv(this,"seek",i=>this.player?.currentTime(i)),Zv(this,"getTime",()=>this.player?.currentTime()||0),Zv(this,"getDuration",()=>this.player?.duration()||0),Zv(this,"isPlaying",()=>!!this.player&&!this.player.paused()),Zv(this,"nextItem",()=>this.handleNext()),Zv(this,"previousItem",()=>this.handlePrevious()),Zv(this,"goToItem",i=>this.goToPlaylistItem(i)),Zv(this,"getCurrentItem",()=>this.getCurrentPlaylistItem()),Zv(this,"getPlaylist",()=>this._isPlaylistMode()?this.player.playlist():[]),Zv(this,"getState",()=>({currentTime:this.getTime(),duration:this.getDuration(),isPlaying:this.isPlaying(),mediaType:this._isPlaylistMode()?"playlist":"media",playlistInfo:this.getPlaylistInfo()})),this.videoRef=en.createRef(),this.player=null,this.isPlayerReady=!1,this.initRetries=0,this.maxRetries=3,this.state={renderTrigger:0},this.isInitialized=!1,this.isInitializing=!1,this.isDestroyed=!1,this.notify=i.notify}componentDidMount(){this.isDestroyed=!1,this.isInitialized=!1,this.isInitializing=!1;!this._hasValidPlaylist()||this.isInitialized||this.isInitializing||setTimeout(()=>{this.isDestroyed||this.initPlayer()},50)}componentDidUpdate(i){if(this.isDestroyed)return;if(i.playlist===this.props.playlist)return;this.handlePlaylistPropsChange();!this._hasValidPlaylist()||this.isInitialized||this.isInitializing||setTimeout(()=>{this.isDestroyed||this.initPlayer()},50)}componentWillUnmount(){this.cleanup()}render(){const i=this._hasValidPlaylist();/* @__PURE__ */
return bn.jsx("div",{className:"fp-media-player",children:i?/* @__PURE__ */bn.jsx("video",{ref:this.videoRef,className:"video-js vjs-default-skin fp-media-player-video",playsInline:!0,"data-setup":"{}"}):/* @__PURE__ */bn.jsx("div",{className:"fp-media-player-placeholder",children:/* @__PURE__ */bn.jsx(Kv,{className:"fp-media-player-placeholder-logo",size:240})})})}};__name(mb,"MediaPlayer");let _b=mb;var yb,Sb,wb={},Ab={},Mb={},Pb={exports:{}};function requireEventemitter3(){return yb||(yb=1,function(i){var a=Object.prototype.hasOwnProperty,s="~";function Events2(){}function EE(i,a,s){this.fn=i,this.context=a,this.once=s||!1}function addListener(i,a,o,u,_){if("function"!=typeof o)throw new TypeError("The listener must be a function");var x=new EE(o,u||i,_),w=s?s+a:a;return i._events[w]?i._events[w].fn?i._events[w]=[i._events[w],x]:i._events[w].push(x):(i._events[w]=x,i._eventsCount++),i}function clearEvent(i,a){0===--i._eventsCount?i._events=new Events2:delete i._events[a]}function EventEmitter(){this._events=new Events2,this._eventsCount=0}__name(Events2,"Events"),Object.create&&(Events2.prototype=/* @__PURE__ */Object.create(null),(new Events2).__proto__||(s=!1)),__name(EE,"EE"),__name(addListener,"addListener"),__name(clearEvent,"clearEvent"),__name(EventEmitter,"EventEmitter"),EventEmitter.prototype.eventNames=/* @__PURE__ */__name(function eventNames(){var i,o,u=[];if(0===this._eventsCount)return u;for(o in i=this._events)a.call(i,o)&&u.push(s?o.slice(1):o);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(i)):u},"eventNames"),EventEmitter.prototype.listeners=/* @__PURE__ */__name(function listeners(i){var a=s?s+i:i,o=this._events[a];if(!o)return[];if(o.fn)return[o.fn];for(var u=0,_=o.length,x=new Array(_);u<_;u++)x[u]=o[u].fn;return x},"listeners"),EventEmitter.prototype.listenerCount=/* @__PURE__ */__name(function listenerCount(i){var a=s?s+i:i,o=this._events[a];return o?o.fn?1:o.length:0},"listenerCount"),EventEmitter.prototype.emit=/* @__PURE__ */__name(function emit(i,a,o,u,_,x){var w=s?s+i:i;if(!this._events[w])return!1;var C,L,B=this._events[w],U=arguments.length;if(B.fn){switch(B.once&&this.removeListener(i,B.fn,void 0,!0),U){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,a),!0;case 3:return B.fn.call(B.context,a,o),!0;case 4:return B.fn.call(B.context,a,o,u),!0;case 5:return B.fn.call(B.context,a,o,u,_),!0;case 6:return B.fn.call(B.context,a,o,u,_,x),!0}for(L=1,C=new Array(U-1);L<U;L++)C[L-1]=arguments[L];B.fn.apply(B.context,C)}else{var j,V=B.length;for(L=0;L<V;L++)switch(B[L].once&&this.removeListener(i,B[L].fn,void 0,!0),U){case 1:B[L].fn.call(B[L].context);break;case 2:B[L].fn.call(B[L].context,a);break;case 3:B[L].fn.call(B[L].context,a,o);break;case 4:B[L].fn.call(B[L].context,a,o,u);break;default:if(!C)for(j=1,C=new Array(U-1);j<U;j++)C[j-1]=arguments[j];B[L].fn.apply(B[L].context,C)}}return!0},"emit"),EventEmitter.prototype.on=/* @__PURE__ */__name(function on2(i,a,s){return addListener(this,i,a,s,!1)},"on"),EventEmitter.prototype.once=/* @__PURE__ */__name(function once(i,a,s){return addListener(this,i,a,s,!0)},"once"),EventEmitter.prototype.removeListener=/* @__PURE__ */__name(function removeListener(i,a,o,u){var _=s?s+i:i;if(!this._events[_])return this;if(!a)return clearEvent(this,_),this;var x=this._events[_];if(x.fn)x.fn!==a||u&&!x.once||o&&x.context!==o||clearEvent(this,_);else{for(var w=0,C=[],L=x.length;w<L;w++)(x[w].fn!==a||u&&!x[w].once||o&&x[w].context!==o)&&C.push(x[w]);C.length?this._events[_]=1===C.length?C[0]:C:clearEvent(this,_)}return this},"removeListener"),EventEmitter.prototype.removeAllListeners=/* @__PURE__ */__name(function removeAllListeners(i){var a;return i?(a=s?s+i:i,this._events[a]&&clearEvent(this,a)):(this._events=new Events2,this._eventsCount=0),this},"removeAllListeners"),EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=s,EventEmitter.EventEmitter=EventEmitter,i.exports=EventEmitter}(Pb)),Pb.exports}function requireLogging(){if(Sb)return Mb;Sb=1,Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.ButtplugLogger=Mb.LogMessage=Mb.ButtplugLogLevel=void 0;const i=requireEventemitter3();var a,s;(s=a||(Mb.ButtplugLogLevel=a={}))[s.Off=0]="Off",s[s.Error=1]="Error",s[s.Warn=2]="Warn",s[s.Info=3]="Info",s[s.Debug=4]="Debug",s[s.Trace=5]="Trace";const o=class _LogMessage{constructor(i,a){const s=/* @__PURE__ */new Date,o=s.getHours(),u=s.getMinutes(),_=s.getSeconds();this.timestamp=`${o}:${u}:${_}`,this.logMessage=i,this.logLevel=a}get Message(){return this.logMessage}get LogLevel(){return this.logLevel}get Timestamp(){return this.timestamp}get FormattedMessage(){return`${a[this.logLevel]} : ${this.timestamp} : ${this.logMessage}`}};__name(o,"LogMessage");let u=o;Mb.LogMessage=u;const _=class _ButtplugLogger extends i.EventEmitter{static get Logger(){return void 0===_ButtplugLogger.sLogger&&(_ButtplugLogger.sLogger=new _ButtplugLogger),this.sLogger}constructor(){super(),this.maximumConsoleLogLevel=a.Off,this.maximumEventLogLevel=a.Off}get MaximumConsoleLogLevel(){return this.maximumConsoleLogLevel}set MaximumConsoleLogLevel(i){this.maximumConsoleLogLevel=i}get MaximumEventLogLevel(){return this.maximumEventLogLevel}set MaximumEventLogLevel(i){this.maximumEventLogLevel=i}Error(i){this.AddLogMessage(i,a.Error)}Warn(i){this.AddLogMessage(i,a.Warn)}Info(i){this.AddLogMessage(i,a.Info)}Debug(i){this.AddLogMessage(i,a.Debug)}Trace(i){this.AddLogMessage(i,a.Trace)}AddLogMessage(i,a){if(a>this.maximumEventLogLevel&&a>this.maximumConsoleLogLevel)return;const s=new u(i,a);a<=this.maximumConsoleLogLevel&&console.log(s.FormattedMessage),a<=this.maximumEventLogLevel&&this.emit("log",s)}};__name(_,"ButtplugLogger");let x=_;return Mb.ButtplugLogger=x,x.sLogger=void 0,Mb}__name(requireEventemitter3,"requireEventemitter3"),__name(requireLogging,"requireLogging");var Ib,Lb,Rb={},Ob={};(Lb=Ib||(Ib={}))[Lb.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",Lb[Lb.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",Lb[Lb.CLASS_TO_CLASS=2]="CLASS_TO_CLASS";var zb=new(function(){function MetadataStorage2(){this._typeMetadatas=/* @__PURE__ */new Map,this._transformMetadatas=/* @__PURE__ */new Map,this._exposeMetadatas=/* @__PURE__ */new Map,this._excludeMetadatas=/* @__PURE__ */new Map,this._ancestorsMap=/* @__PURE__ */new Map}return __name(MetadataStorage2,"MetadataStorage"),MetadataStorage2.prototype.addTypeMetadata=function(i){this._typeMetadatas.has(i.target)||this._typeMetadatas.set(i.target,/* @__PURE__ */new Map),this._typeMetadatas.get(i.target).set(i.propertyName,i)},MetadataStorage2.prototype.addTransformMetadata=function(i){this._transformMetadatas.has(i.target)||this._transformMetadatas.set(i.target,/* @__PURE__ */new Map),this._transformMetadatas.get(i.target).has(i.propertyName)||this._transformMetadatas.get(i.target).set(i.propertyName,[]),this._transformMetadatas.get(i.target).get(i.propertyName).push(i)},MetadataStorage2.prototype.addExposeMetadata=function(i){this._exposeMetadatas.has(i.target)||this._exposeMetadatas.set(i.target,/* @__PURE__ */new Map),this._exposeMetadatas.get(i.target).set(i.propertyName,i)},MetadataStorage2.prototype.addExcludeMetadata=function(i){this._excludeMetadatas.has(i.target)||this._excludeMetadatas.set(i.target,/* @__PURE__ */new Map),this._excludeMetadatas.get(i.target).set(i.propertyName,i)},MetadataStorage2.prototype.findTransformMetadatas=function(i,a,s){return this.findMetadatas(this._transformMetadatas,i,a).filter(function(i){return!i.options||(!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?s===Ib.CLASS_TO_CLASS||s===Ib.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||s===Ib.CLASS_TO_PLAIN))})},MetadataStorage2.prototype.findExcludeMetadata=function(i,a){return this.findMetadata(this._excludeMetadatas,i,a)},MetadataStorage2.prototype.findExposeMetadata=function(i,a){return this.findMetadata(this._exposeMetadatas,i,a)},MetadataStorage2.prototype.findExposeMetadataByCustomName=function(i,a){return this.getExposedMetadatas(i).find(function(i){return i.options&&i.options.name===a})},MetadataStorage2.prototype.findTypeMetadata=function(i,a){return this.findMetadata(this._typeMetadatas,i,a)},MetadataStorage2.prototype.getStrategy=function(i){var a=this._excludeMetadatas.get(i),s=a&&a.get(void 0),o=this._exposeMetadatas.get(i),u=o&&o.get(void 0);return s&&u||!s&&!u?"none":s?"excludeAll":"exposeAll"},MetadataStorage2.prototype.getExposedMetadatas=function(i){return this.getMetadata(this._exposeMetadatas,i)},MetadataStorage2.prototype.getExcludedMetadatas=function(i){return this.getMetadata(this._excludeMetadatas,i)},MetadataStorage2.prototype.getExposedProperties=function(i,a){return this.getExposedMetadatas(i).filter(function(i){return!i.options||(!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?a===Ib.CLASS_TO_CLASS||a===Ib.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||a===Ib.CLASS_TO_PLAIN))}).map(function(i){return i.propertyName})},MetadataStorage2.prototype.getExcludedProperties=function(i,a){return this.getExcludedMetadatas(i).filter(function(i){return!i.options||(!0===i.options.toClassOnly&&!0===i.options.toPlainOnly||(!0===i.options.toClassOnly?a===Ib.CLASS_TO_CLASS||a===Ib.PLAIN_TO_CLASS:!0!==i.options.toPlainOnly||a===Ib.CLASS_TO_PLAIN))}).map(function(i){return i.propertyName})},MetadataStorage2.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},MetadataStorage2.prototype.getMetadata=function(i,a){var s,o=i.get(a);o&&(s=Array.from(o.values()).filter(function(i){return void 0!==i.propertyName}));for(var u=[],_=0,x=this.getAncestors(a);_<x.length;_++){var w=x[_],C=i.get(w);if(C){var L=Array.from(C.values()).filter(function(i){return void 0!==i.propertyName});u.push.apply(u,L)}}return u.concat(s||[])},MetadataStorage2.prototype.findMetadata=function(i,a,s){var o=i.get(a);if(o){var u=o.get(s);if(u)return u}for(var _=0,x=this.getAncestors(a);_<x.length;_++){var w=x[_],C=i.get(w);if(C){var L=C.get(s);if(L)return L}}},MetadataStorage2.prototype.findMetadatas=function(i,a,s){var o,u=i.get(a);u&&(o=u.get(s));for(var _=[],x=0,w=this.getAncestors(a);x<w.length;x++){var C=w[x],L=i.get(C);L&&L.has(s)&&_.push.apply(_,L.get(s))}return _.slice().reverse().concat((o||[]).slice().reverse())},MetadataStorage2.prototype.getAncestors=function(i){if(!i)return[];if(!this._ancestorsMap.has(i)){for(var a=[],s=Object.getPrototypeOf(i.prototype.constructor);void 0!==s.prototype;s=Object.getPrototypeOf(s.prototype.constructor))a.push(s);this._ancestorsMap.set(i,a)}return this._ancestorsMap.get(i)},MetadataStorage2}());function getGlobal(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}function isPromise$1(i){return null!==i&&"object"==typeof i&&"function"==typeof i.then}__name(getGlobal,"getGlobal"),__name(isPromise$1,"isPromise$1");var __spreadArray=function(i,a,s){if(s||2===arguments.length)for(var o,u=0,_=a.length;u<_;u++)!o&&u in a||(o||(o=Array.prototype.slice.call(a,0,u)),o[u]=a[u]);return i.concat(o||Array.prototype.slice.call(a))};function instantiateArrayType(i){var a=new i;return a instanceof Set||"push"in a?a:[]}__name(instantiateArrayType,"instantiateArrayType");var qb=function(){function TransformOperationExecutor2(i,a){this.transformationType=i,this.options=a,this.recursionStack=/* @__PURE__ */new Set}return __name(TransformOperationExecutor2,"TransformOperationExecutor"),TransformOperationExecutor2.prototype.transform=function(i,a,s,o,u,_){var x=this;if(void 0===_&&(_=0),Array.isArray(a)||a instanceof Set){var w=o&&this.transformationType===Ib.PLAIN_TO_CLASS?instantiateArrayType(o):[];return a.forEach(function(a,o){var u=i?i[o]:void 0;if(x.options.enableCircularCheck&&x.isCircular(a))x.transformationType===Ib.CLASS_TO_CLASS&&(w instanceof Set?w.add(a):w.push(a));else{var C=void 0;if("function"!=typeof s&&s&&s.options&&s.options.discriminator&&s.options.discriminator.property&&s.options.discriminator.subTypes){if(x.transformationType===Ib.PLAIN_TO_CLASS){C=s.options.discriminator.subTypes.find(function(i){return i.name===a[s.options.discriminator.property]});var L={newObject:w,object:a,property:void 0},B=s.typeFunction(L);C=void 0===C?B:C.value,s.options.keepDiscriminatorProperty||delete a[s.options.discriminator.property]}x.transformationType===Ib.CLASS_TO_CLASS&&(C=a.constructor),x.transformationType===Ib.CLASS_TO_PLAIN&&(a[s.options.discriminator.property]=s.options.discriminator.subTypes.find(function(i){return i.value===a.constructor}).name)}else C=s;var U=x.transform(u,a,C,void 0,a instanceof Map,_+1);w instanceof Set?w.add(U):w.push(U)}}),w}if(s!==String||u){if(s!==Number||u){if(s!==Boolean||u){if((s===Date||a instanceof Date)&&!u)return a instanceof Date?new Date(a.valueOf()):null==a?a:new Date(a);if(getGlobal().Buffer&&(s===Buffer||a instanceof Buffer)&&!u)return null==a?a:Buffer.from(a);if(isPromise$1(a)&&!u)return new Promise(function(i,o){a.then(function(a){return i(x.transform(void 0,a,s,void 0,void 0,_+1))},o)});if(u||null===a||"object"!=typeof a||"function"!=typeof a.then){if("object"==typeof a&&null!==a){s||a.constructor===Object||(Array.isArray(a)||a.constructor!==Array)&&(s=a.constructor),!s&&i&&(s=i.constructor),this.options.enableCircularCheck&&this.recursionStack.add(a);var C=this.getKeys(s,a,u),L=i||{};i||this.transformationType!==Ib.PLAIN_TO_CLASS&&this.transformationType!==Ib.CLASS_TO_CLASS||(L=u?/* @__PURE__ */new Map:s?new s:{});for(var B=/* @__PURE__ */__name(function(o){if("__proto__"===o||"constructor"===o)return"continue";var x=o,w=o,C=o;if(!U.options.ignoreDecorators&&s)if(U.transformationType===Ib.PLAIN_TO_CLASS)(B=zb.findExposeMetadataByCustomName(s,o))&&(C=B.propertyName,w=B.propertyName);else if(U.transformationType===Ib.CLASS_TO_PLAIN||U.transformationType===Ib.CLASS_TO_CLASS){var B;(B=zb.findExposeMetadata(s,o))&&B.options&&B.options.name&&(w=B.options.name)}var j=void 0;j=U.transformationType===Ib.PLAIN_TO_CLASS?a[x]:a instanceof Map?a.get(x):a[x]instanceof Function?a[x]():a[x];var V=void 0,z=j instanceof Map;if(s&&u)V=s;else if(s){var $=zb.findTypeMetadata(s,C);if($){var Y={newObject:L,object:a,property:C},Z=$.typeFunction?$.typeFunction(Y):$.reflectedType;$.options&&$.options.discriminator&&$.options.discriminator.property&&$.options.discriminator.subTypes?a[x]instanceof Array?V=$:(U.transformationType===Ib.PLAIN_TO_CLASS&&(V=void 0===(V=$.options.discriminator.subTypes.find(function(i){if(j&&j instanceof Object&&$.options.discriminator.property in j)return i.name===j[$.options.discriminator.property]}))?Z:V.value,$.options.keepDiscriminatorProperty||j&&j instanceof Object&&$.options.discriminator.property in j&&delete j[$.options.discriminator.property]),U.transformationType===Ib.CLASS_TO_CLASS&&(V=j.constructor),U.transformationType===Ib.CLASS_TO_PLAIN&&j&&(j[$.options.discriminator.property]=$.options.discriminator.subTypes.find(function(i){return i.value===j.constructor}).name)):V=Z,z=z||$.reflectedType===Map}else if(U.options.targetMaps)U.options.targetMaps.filter(function(i){return i.target===s&&!!i.properties[C]}).forEach(function(i){return V=i.properties[C]});else if(U.options.enableImplicitConversion&&U.transformationType===Ib.PLAIN_TO_CLASS){var ee=Reflect.getMetadata("design:type",s.prototype,C);ee&&(V=ee)}}var ie=Array.isArray(a[x])?U.getReflectedType(s,C):void 0,ae=i?i[x]:void 0;if(L.constructor.prototype){var le=Object.getOwnPropertyDescriptor(L.constructor.prototype,w);if((U.transformationType===Ib.PLAIN_TO_CLASS||U.transformationType===Ib.CLASS_TO_CLASS)&&(le&&!le.set||L[w]instanceof Function))return"continue"}if(U.options.enableCircularCheck&&U.isCircular(j)){if(U.transformationType===Ib.CLASS_TO_CLASS){de=j;(void 0!==(de=U.applyCustomTransformations(de,s,o,a,U.transformationType))||U.options.exposeUnsetFields)&&(L instanceof Map?L.set(w,de):L[w]=de)}}else{var ce=U.transformationType===Ib.PLAIN_TO_CLASS?w:o,de=void 0;U.transformationType===Ib.CLASS_TO_PLAIN?(de=a[ce],de=U.applyCustomTransformations(de,s,ce,a,U.transformationType),de=a[ce]===de?j:de,de=U.transform(ae,de,V,ie,z,_+1)):void 0===j&&U.options.exposeDefaultValues?de=L[w]:(de=U.transform(ae,j,V,ie,z,_+1),de=U.applyCustomTransformations(de,s,ce,a,U.transformationType)),(void 0!==de||U.options.exposeUnsetFields)&&(L instanceof Map?L.set(w,de):L[w]=de)}},"_loop_1"),U=this,j=0,V=C;j<V.length;j++){B(V[j])}return this.options.enableCircularCheck&&this.recursionStack.delete(a),L}return a}return a}return null==a?a:Boolean(a)}return null==a?a:Number(a)}return null==a?a:String(a)},TransformOperationExecutor2.prototype.applyCustomTransformations=function(i,a,s,o,u){var _=this,x=zb.findTransformMetadatas(a,s,this.transformationType);return void 0!==this.options.version&&(x=x.filter(function(i){return!i.options||_.checkVersion(i.options.since,i.options.until)})),(x=this.options.groups&&this.options.groups.length?x.filter(function(i){return!i.options||_.checkGroups(i.options.groups)}):x.filter(function(i){return!i.options||!i.options.groups||!i.options.groups.length})).forEach(function(a){i=a.transformFn({value:i,key:s,obj:o,type:u,options:_.options})}),i},TransformOperationExecutor2.prototype.isCircular=function(i){return this.recursionStack.has(i)},TransformOperationExecutor2.prototype.getReflectedType=function(i,a){if(i){var s=zb.findTypeMetadata(i,a);return s?s.reflectedType:void 0}},TransformOperationExecutor2.prototype.getKeys=function(i,a,s){var o=this,u=zb.getStrategy(i);"none"===u&&(u=this.options.strategy||"exposeAll");var _=[];if(("exposeAll"===u||s)&&(_=a instanceof Map?Array.from(a.keys()):Object.keys(a)),s)return _;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&i){var x=zb.getExposedProperties(i,this.transformationType),w=zb.getExcludedProperties(i,this.transformationType);_=__spreadArray(__spreadArray([],x,!0),w,!0)}if(!this.options.ignoreDecorators&&i){x=zb.getExposedProperties(i,this.transformationType);this.transformationType===Ib.PLAIN_TO_CLASS&&(x=x.map(function(a){var s=zb.findExposeMetadata(i,a);return s&&s.options&&s.options.name?s.options.name:a})),_=this.options.excludeExtraneousValues?x:_.concat(x);var C=zb.getExcludedProperties(i,this.transformationType);C.length>0&&(_=_.filter(function(i){return!C.includes(i)})),void 0!==this.options.version&&(_=_.filter(function(a){var s=zb.findExposeMetadata(i,a);return!s||!s.options||o.checkVersion(s.options.since,s.options.until)})),_=this.options.groups&&this.options.groups.length?_.filter(function(a){var s=zb.findExposeMetadata(i,a);return!s||!s.options||o.checkGroups(s.options.groups)}):_.filter(function(a){var s=zb.findExposeMetadata(i,a);return!(s&&s.options&&s.options.groups&&s.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(_=_.filter(function(i){return o.options.excludePrefixes.every(function(a){return i.substr(0,a.length)!==a})})),_=_.filter(function(i,a,s){return s.indexOf(i)===a})},TransformOperationExecutor2.prototype.checkVersion=function(i,a){var s=!0;return s&&i&&(s=this.options.version>=i),s&&a&&(s=this.options.version<a),s},TransformOperationExecutor2.prototype.checkGroups=function(i){return!i||this.options.groups.some(function(a){return i.includes(a)})},TransformOperationExecutor2}(),Qb={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},__assign=function(){return __assign=Object.assign||function(i){for(var a,s=1,o=arguments.length;s<o;s++)for(var u in a=arguments[s])Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u]);return i},__assign.apply(this,arguments)},eT=function(){function ClassTransformer2(){}return __name(ClassTransformer2,"ClassTransformer"),ClassTransformer2.prototype.instanceToPlain=function(i,a){return new qb(Ib.CLASS_TO_PLAIN,__assign(__assign({},Qb),a)).transform(void 0,i,void 0,void 0,void 0,void 0)},ClassTransformer2.prototype.classToPlainFromExist=function(i,a,s){return new qb(Ib.CLASS_TO_PLAIN,__assign(__assign({},Qb),s)).transform(a,i,void 0,void 0,void 0,void 0)},ClassTransformer2.prototype.plainToInstance=function(i,a,s){return new qb(Ib.PLAIN_TO_CLASS,__assign(__assign({},Qb),s)).transform(void 0,a,i,void 0,void 0,void 0)},ClassTransformer2.prototype.plainToClassFromExist=function(i,a,s){return new qb(Ib.PLAIN_TO_CLASS,__assign(__assign({},Qb),s)).transform(i,a,void 0,void 0,void 0,void 0)},ClassTransformer2.prototype.instanceToInstance=function(i,a){return new qb(Ib.CLASS_TO_CLASS,__assign(__assign({},Qb),a)).transform(void 0,i,void 0,void 0,void 0,void 0)},ClassTransformer2.prototype.classToClassFromExist=function(i,a,s){return new qb(Ib.CLASS_TO_CLASS,__assign(__assign({},Qb),s)).transform(a,i,void 0,void 0,void 0,void 0)},ClassTransformer2.prototype.serialize=function(i,a){return JSON.stringify(this.instanceToPlain(i,a))},ClassTransformer2.prototype.deserialize=function(i,a,s){var o=JSON.parse(a);return this.plainToInstance(i,o,s)},ClassTransformer2.prototype.deserializeArray=function(i,a,s){var o=JSON.parse(a);return this.plainToInstance(i,o,s)},ClassTransformer2}();function Exclude(i){return void 0===i&&(i={}),function(a,s){zb.addExcludeMetadata({target:a instanceof Function?a:a.constructor,propertyName:s,options:i})}}function Expose(i){return void 0===i&&(i={}),function(a,s){zb.addExposeMetadata({target:a instanceof Function?a:a.constructor,propertyName:s,options:i})}}function TransformInstanceToInstance(i){return function(a,s,o){var u=new eT,_=o.value;o.value=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=_.apply(this,a);return!!o&&("object"==typeof o||"function"==typeof o)&&"function"==typeof o.then?o.then(function(a){return u.instanceToInstance(a,i)}):u.instanceToInstance(o,i)}}}function TransformInstanceToPlain(i){return function(a,s,o){var u=new eT,_=o.value;o.value=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var o=_.apply(this,a);return!!o&&("object"==typeof o||"function"==typeof o)&&"function"==typeof o.then?o.then(function(a){return u.instanceToPlain(a,i)}):u.instanceToPlain(o,i)}}}function TransformPlainToInstance(i,a){return function(s,o,u){var _=new eT,x=u.value;u.value=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var u=x.apply(this,s);return!!u&&("object"==typeof u||"function"==typeof u)&&"function"==typeof u.then?u.then(function(s){return _.plainToInstance(i,s,a)}):_.plainToInstance(i,u,a)}}}function Transform(i,a){return void 0===a&&(a={}),function(s,o){zb.addTransformMetadata({target:s.constructor,propertyName:o,transformFn:i,options:a})}}function Type(i,a){return void 0===a&&(a={}),function(s,o){var u=Reflect.getMetadata("design:type",s,o);zb.addTypeMetadata({target:s.constructor,propertyName:o,reflectedType:u,typeFunction:i,options:a})}}__name(Exclude,"Exclude"),__name(Expose,"Expose"),__name(TransformInstanceToInstance,"TransformInstanceToInstance"),__name(TransformInstanceToPlain,"TransformInstanceToPlain"),__name(TransformPlainToInstance,"TransformPlainToInstance"),__name(Transform,"Transform"),__name(Type,"Type");var tT=new eT;function classToPlain(i,a){return tT.instanceToPlain(i,a)}function instanceToPlain(i,a){return tT.instanceToPlain(i,a)}function classToPlainFromExist(i,a,s){return tT.classToPlainFromExist(i,a,s)}function plainToClass(i,a,s){return tT.plainToInstance(i,a,s)}function plainToInstance(i,a,s){return tT.plainToInstance(i,a,s)}function plainToClassFromExist(i,a,s){return tT.plainToClassFromExist(i,a,s)}function instanceToInstance(i,a){return tT.instanceToInstance(i,a)}function classToClassFromExist(i,a,s){return tT.classToClassFromExist(i,a,s)}function serialize(i,a){return tT.serialize(i,a)}function deserialize(i,a,s){return tT.deserialize(i,a,s)}function deserializeArray(i,a,s){return tT.deserializeArray(i,a,s)}__name(classToPlain,"classToPlain"),__name(instanceToPlain,"instanceToPlain"),__name(classToPlainFromExist,"classToPlainFromExist"),__name(plainToClass,"plainToClass"),__name(plainToInstance,"plainToInstance"),__name(plainToClassFromExist,"plainToClassFromExist"),__name(instanceToInstance,"instanceToInstance"),__name(classToClassFromExist,"classToClassFromExist"),__name(serialize,"serialize"),__name(deserialize,"deserialize"),__name(deserializeArray,"deserializeArray");const nT=/* @__PURE__ */getAugmentedNamespace(/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,ClassTransformer:eT,Exclude:Exclude,Expose:Expose,Transform:Transform,TransformInstanceToInstance:TransformInstanceToInstance,TransformInstanceToPlain:TransformInstanceToPlain,TransformPlainToInstance:TransformPlainToInstance,get TransformationType(){return Ib},Type:Type,classToClassFromExist:classToClassFromExist,classToPlain:classToPlain,classToPlainFromExist:classToPlainFromExist,deserialize:deserialize,deserializeArray:deserializeArray,instanceToInstance:instanceToInstance,instanceToPlain:instanceToPlain,plainToClass:plainToClass,plainToClassFromExist:plainToClassFromExist,plainToInstance:plainToInstance,serialize:serialize},Symbol.toStringTag,{value:"Module"})));var iT,rT,aT={};function require_Reflect(){return iT||(iT=1,a=i||(i={}),function(){var i="object"==typeof globalThis?globalThis:"object"==typeof Xt?Xt:"object"==typeof self?self:"object"==typeof this?this:sloppyModeThis(),s=makeExporter(a);function makeExporter(i,a){return function(s,o){Object.defineProperty(i,s,{configurable:!0,writable:!0,value:o}),a&&a(s,o)}}function functionThis(){try{return Function("return this;")()}catch(i){}}function indirectEvalThis(){try{return(0,eval)("(function() { return this; })()")}catch(i){}}function sloppyModeThis(){return functionThis()||indirectEvalThis()}void 0!==i.Reflect&&(s=makeExporter(i.Reflect,s)),function(i,a){var s=Object.prototype.hasOwnProperty,o="function"==typeof Symbol,u=o&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",_=o&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",x="function"==typeof Object.create,w={__proto__:[]}instanceof Array,C=!x&&!w,L={create:x?function(){return MakeDictionary(/* @__PURE__ */Object.create(null))}:w?function(){return MakeDictionary({__proto__:null})}:function(){return MakeDictionary({})},has:C?function(i,a){return s.call(i,a)}:function(i,a){return a in i},get:C?function(i,a){return s.call(i,a)?i[a]:void 0}:function(i,a){return i[a]}},B=Object.getPrototypeOf(Function),U="function"==typeof Map&&"function"==typeof Map.prototype.entries?Map:CreateMapPolyfill(),j="function"==typeof Set&&"function"==typeof Set.prototype.entries?Set:CreateSetPolyfill(),V="function"==typeof WeakMap?WeakMap:CreateWeakMapPolyfill(),z=o?Symbol.for("@reflect-metadata:registry"):void 0,$=GetOrCreateMetadataRegistry(),Y=CreateMetadataProvider($);function decorate(i,a,s,o){if(IsUndefined(s)){if(!IsArray(i))throw new TypeError;if(!IsConstructor(a))throw new TypeError;return DecorateConstructor(i,a)}if(!IsArray(i))throw new TypeError;if(!IsObject(a))throw new TypeError;if(!IsObject(o)&&!IsUndefined(o)&&!IsNull(o))throw new TypeError;return IsNull(o)&&(o=void 0),DecorateProperty(i,a,s=ToPropertyKey(s),o)}function metadata(i,a){function decorator(s,o){if(!IsObject(s))throw new TypeError;if(!IsUndefined(o)&&!IsPropertyKey(o))throw new TypeError;OrdinaryDefineOwnMetadata(i,a,s,o)}return __name(decorator,"decorator"),decorator}function defineMetadata(i,a,s,o){if(!IsObject(s))throw new TypeError;return IsUndefined(o)||(o=ToPropertyKey(o)),OrdinaryDefineOwnMetadata(i,a,s,o)}function hasMetadata(i,a,s){if(!IsObject(a))throw new TypeError;return IsUndefined(s)||(s=ToPropertyKey(s)),OrdinaryHasMetadata(i,a,s)}function hasOwnMetadata(i,a,s){if(!IsObject(a))throw new TypeError;return IsUndefined(s)||(s=ToPropertyKey(s)),OrdinaryHasOwnMetadata(i,a,s)}function getMetadata(i,a,s){if(!IsObject(a))throw new TypeError;return IsUndefined(s)||(s=ToPropertyKey(s)),OrdinaryGetMetadata(i,a,s)}function getOwnMetadata(i,a,s){if(!IsObject(a))throw new TypeError;return IsUndefined(s)||(s=ToPropertyKey(s)),OrdinaryGetOwnMetadata(i,a,s)}function getMetadataKeys(i,a){if(!IsObject(i))throw new TypeError;return IsUndefined(a)||(a=ToPropertyKey(a)),OrdinaryMetadataKeys(i,a)}function getOwnMetadataKeys(i,a){if(!IsObject(i))throw new TypeError;return IsUndefined(a)||(a=ToPropertyKey(a)),OrdinaryOwnMetadataKeys(i,a)}function deleteMetadata(i,a,s){if(!IsObject(a))throw new TypeError;if(IsUndefined(s)||(s=ToPropertyKey(s)),!IsObject(a))throw new TypeError;IsUndefined(s)||(s=ToPropertyKey(s));var o=GetMetadataProvider(a,s,!1);return!IsUndefined(o)&&o.OrdinaryDeleteMetadata(i,a,s)}function DecorateConstructor(i,a){for(var s=i.length-1;s>=0;--s){var o=(0,i[s])(a);if(!IsUndefined(o)&&!IsNull(o)){if(!IsConstructor(o))throw new TypeError;a=o}}return a}function DecorateProperty(i,a,s,o){for(var u=i.length-1;u>=0;--u){var _=(0,i[u])(a,s,o);if(!IsUndefined(_)&&!IsNull(_)){if(!IsObject(_))throw new TypeError;o=_}}return o}function OrdinaryHasMetadata(i,a,s){if(OrdinaryHasOwnMetadata(i,a,s))return!0;var o=OrdinaryGetPrototypeOf(a);return!IsNull(o)&&OrdinaryHasMetadata(i,o,s)}function OrdinaryHasOwnMetadata(i,a,s){var o=GetMetadataProvider(a,s,!1);return!IsUndefined(o)&&ToBoolean(o.OrdinaryHasOwnMetadata(i,a,s))}function OrdinaryGetMetadata(i,a,s){if(OrdinaryHasOwnMetadata(i,a,s))return OrdinaryGetOwnMetadata(i,a,s);var o=OrdinaryGetPrototypeOf(a);return IsNull(o)?void 0:OrdinaryGetMetadata(i,o,s)}function OrdinaryGetOwnMetadata(i,a,s){var o=GetMetadataProvider(a,s,!1);if(!IsUndefined(o))return o.OrdinaryGetOwnMetadata(i,a,s)}function OrdinaryDefineOwnMetadata(i,a,s,o){GetMetadataProvider(s,o,!0).OrdinaryDefineOwnMetadata(i,a,s,o)}function OrdinaryMetadataKeys(i,a){var s=OrdinaryOwnMetadataKeys(i,a),o=OrdinaryGetPrototypeOf(i);if(null===o)return s;var u=OrdinaryMetadataKeys(o,a);if(u.length<=0)return s;if(s.length<=0)return u;for(var _=new j,x=[],w=0,C=s;w<C.length;w++){var L=C[w];_.has(L)||(_.add(L),x.push(L))}for(var B=0,U=u;B<U.length;B++)L=U[B],_.has(L)||(_.add(L),x.push(L));return x}function OrdinaryOwnMetadataKeys(i,a){var s=GetMetadataProvider(i,a,!1);return s?s.OrdinaryOwnMetadataKeys(i,a):[]}function Type2(i){if(null===i)return 1;switch(typeof i){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===i?1:6;default:return 6}}function IsUndefined(i){return void 0===i}function IsNull(i){return null===i}function IsSymbol(i){return"symbol"==typeof i}function IsObject(i){return"object"==typeof i?null!==i:"function"==typeof i}function ToPrimitive(i,a){switch(Type2(i)){case 0:case 1:case 2:case 3:case 4:case 5:return i}var s="string",o=GetMethod(i,u);if(void 0!==o){var _=o.call(i,s);if(IsObject(_))throw new TypeError;return _}return OrdinaryToPrimitive(i)}function OrdinaryToPrimitive(i,a){var s,o,u=i.toString;if(IsCallable(u)&&!IsObject(o=u.call(i)))return o;if(IsCallable(s=i.valueOf)&&!IsObject(o=s.call(i)))return o;throw new TypeError}function ToBoolean(i){return!!i}function ToString(i){return""+i}function ToPropertyKey(i){var a=ToPrimitive(i);return IsSymbol(a)?a:ToString(a)}function IsArray(i){return Array.isArray?Array.isArray(i):i instanceof Object?i instanceof Array:"[object Array]"===Object.prototype.toString.call(i)}function IsCallable(i){return"function"==typeof i}function IsConstructor(i){return"function"==typeof i}function IsPropertyKey(i){switch(Type2(i)){case 3:case 4:return!0;default:return!1}}function SameValueZero(i,a){return i===a||i!=i&&a!=a}function GetMethod(i,a){var s=i[a];if(null!=s){if(!IsCallable(s))throw new TypeError;return s}}function GetIterator(i){var a=GetMethod(i,_);if(!IsCallable(a))throw new TypeError;var s=a.call(i);if(!IsObject(s))throw new TypeError;return s}function IteratorValue(i){return i.value}function IteratorStep(i){var a=i.next();return!a.done&&a}function IteratorClose(i){var a=i.return;a&&a.call(i)}function OrdinaryGetPrototypeOf(i){var a=Object.getPrototypeOf(i);if("function"!=typeof i||i===B)return a;if(a!==B)return a;var s=i.prototype,o=s&&Object.getPrototypeOf(s);if(null==o||o===Object.prototype)return a;var u=o.constructor;return"function"!=typeof u||u===i?a:u}function CreateMetadataRegistry(){var i,s,o,u;IsUndefined(z)||void 0===a.Reflect||z in a.Reflect||"function"!=typeof a.Reflect.defineMetadata||(i=CreateFallbackProvider(a.Reflect));var _=new V,x={registerProvider:registerProvider,getProvider:getProvider,setProvider:setProvider};return x;function registerProvider(a){if(!Object.isExtensible(x))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case i===a:break;case IsUndefined(s):s=a;break;case s===a:break;case IsUndefined(o):o=a;break;case o===a:break;default:void 0===u&&(u=new j),u.add(a)}}function getProviderNoCache(a,_){if(!IsUndefined(s)){if(s.isProviderFor(a,_))return s;if(!IsUndefined(o)){if(o.isProviderFor(a,_))return s;if(!IsUndefined(u))for(var x=GetIterator(u);;){var w=IteratorStep(x);if(!w)return;var C=IteratorValue(w);if(C.isProviderFor(a,_))return IteratorClose(x),C}}}if(!IsUndefined(i)&&i.isProviderFor(a,_))return i}function getProvider(i,a){var s,o=_.get(i);return IsUndefined(o)||(s=o.get(a)),IsUndefined(s)?(IsUndefined(s=getProviderNoCache(i,a))||(IsUndefined(o)&&(o=new U,_.set(i,o)),o.set(a,s)),s):s}function hasProvider(i){if(IsUndefined(i))throw new TypeError;return s===i||o===i||!IsUndefined(u)&&u.has(i)}function setProvider(i,a,s){if(!hasProvider(s))throw new Error("Metadata provider not registered.");var o=getProvider(i,a);if(o!==s){if(!IsUndefined(o))return!1;var u=_.get(i);IsUndefined(u)&&(u=new U,_.set(i,u)),u.set(a,s)}return!0}}function GetOrCreateMetadataRegistry(){var i;return!IsUndefined(z)&&IsObject(a.Reflect)&&Object.isExtensible(a.Reflect)&&(i=a.Reflect[z]),IsUndefined(i)&&(i=CreateMetadataRegistry()),!IsUndefined(z)&&IsObject(a.Reflect)&&Object.isExtensible(a.Reflect)&&Object.defineProperty(a.Reflect,z,{enumerable:!1,configurable:!1,writable:!1,value:i}),i}function CreateMetadataProvider(i){var a=new V,s={isProviderFor:/* @__PURE__ */__name(function(i,s){var o=a.get(i);return!IsUndefined(o)&&o.has(s)},"isProviderFor"),OrdinaryDefineOwnMetadata:OrdinaryDefineOwnMetadata2,OrdinaryHasOwnMetadata:OrdinaryHasOwnMetadata2,OrdinaryGetOwnMetadata:OrdinaryGetOwnMetadata2,OrdinaryOwnMetadataKeys:OrdinaryOwnMetadataKeys2,OrdinaryDeleteMetadata:OrdinaryDeleteMetadata};return $.registerProvider(s),s;function GetOrCreateMetadataMap(o,u,_){var x=a.get(o),w=!1;if(IsUndefined(x)){if(!_)return;x=new U,a.set(o,x),w=!0}var C=x.get(u);if(IsUndefined(C)){if(!_)return;if(C=new U,x.set(u,C),!i.setProvider(o,u,s))throw x.delete(u),w&&a.delete(o),new Error("Wrong provider for target.")}return C}function OrdinaryHasOwnMetadata2(i,a,s){var o=GetOrCreateMetadataMap(a,s,!1);return!IsUndefined(o)&&ToBoolean(o.has(i))}function OrdinaryGetOwnMetadata2(i,a,s){var o=GetOrCreateMetadataMap(a,s,!1);if(!IsUndefined(o))return o.get(i)}function OrdinaryDefineOwnMetadata2(i,a,s,o){GetOrCreateMetadataMap(s,o,!0).set(i,a)}function OrdinaryOwnMetadataKeys2(i,a){var s=[],o=GetOrCreateMetadataMap(i,a,!1);if(IsUndefined(o))return s;for(var u=GetIterator(o.keys()),_=0;;){var x=IteratorStep(u);if(!x)return s.length=_,s;var w=IteratorValue(x);try{s[_]=w}catch(C){try{IteratorClose(u)}finally{throw C}}_++}}function OrdinaryDeleteMetadata(i,s,o){var u=GetOrCreateMetadataMap(s,o,!1);if(IsUndefined(u))return!1;if(!u.delete(i))return!1;if(0===u.size){var _=a.get(s);IsUndefined(_)||(_.delete(o),0===_.size&&a.delete(_))}return!0}}function CreateFallbackProvider(i){var a=i.defineMetadata,s=i.hasOwnMetadata,o=i.getOwnMetadata,u=i.getOwnMetadataKeys,_=i.deleteMetadata,x=new V;return{isProviderFor:/* @__PURE__ */__name(function(i,a){var s=x.get(i);return!(IsUndefined(s)||!s.has(a))||!!u(i,a).length&&(IsUndefined(s)&&(s=new j,x.set(i,s)),s.add(a),!0)},"isProviderFor"),OrdinaryDefineOwnMetadata:a,OrdinaryHasOwnMetadata:s,OrdinaryGetOwnMetadata:o,OrdinaryOwnMetadataKeys:u,OrdinaryDeleteMetadata:_}}function GetMetadataProvider(i,a,s){var o=$.getProvider(i,a);if(!IsUndefined(o))return o;if(s){if($.setProvider(i,a,Y))return Y;throw new Error("Illegal state.")}}function CreateMapPolyfill(){var i={},a=[],s=function(){function MapIterator2(i,a,s){this._index=0,this._keys=i,this._values=a,this._selector=s}return __name(MapIterator2,"MapIterator"),MapIterator2.prototype["@@iterator"]=function(){return this},MapIterator2.prototype[_]=function(){return this},MapIterator2.prototype.next=function(){var i=this._index;if(i>=0&&i<this._keys.length){var s=this._selector(this._keys[i],this._values[i]);return i+1>=this._keys.length?(this._index=-1,this._keys=a,this._values=a):this._index++,{value:s,done:!1}}return{value:void 0,done:!0}},MapIterator2.prototype.throw=function(i){throw this._index>=0&&(this._index=-1,this._keys=a,this._values=a),i},MapIterator2.prototype.return=function(i){return this._index>=0&&(this._index=-1,this._keys=a,this._values=a),{value:i,done:!0}},MapIterator2}();return function(){function Map3(){this._keys=[],this._values=[],this._cacheKey=i,this._cacheIndex=-2}return __name(Map3,"Map"),Object.defineProperty(Map3.prototype,"size",{get:/* @__PURE__ */__name(function(){return this._keys.length},"get"),enumerable:!0,configurable:!0}),Map3.prototype.has=function(i){return this._find(i,!1)>=0},Map3.prototype.get=function(i){var a=this._find(i,!1);return a>=0?this._values[a]:void 0},Map3.prototype.set=function(i,a){var s=this._find(i,!0);return this._values[s]=a,this},Map3.prototype.delete=function(a){var s=this._find(a,!1);if(s>=0){for(var o=this._keys.length,u=s+1;u<o;u++)this._keys[u-1]=this._keys[u],this._values[u-1]=this._values[u];return this._keys.length--,this._values.length--,SameValueZero(a,this._cacheKey)&&(this._cacheKey=i,this._cacheIndex=-2),!0}return!1},Map3.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=i,this._cacheIndex=-2},Map3.prototype.keys=function(){return new s(this._keys,this._values,getKey)},Map3.prototype.values=function(){return new s(this._keys,this._values,getValue)},Map3.prototype.entries=function(){return new s(this._keys,this._values,getEntry)},Map3.prototype["@@iterator"]=function(){return this.entries()},Map3.prototype[_]=function(){return this.entries()},Map3.prototype._find=function(i,a){if(!SameValueZero(this._cacheKey,i)){this._cacheIndex=-1;for(var s=0;s<this._keys.length;s++)if(SameValueZero(this._keys[s],i)){this._cacheIndex=s;break}}return this._cacheIndex<0&&a&&(this._cacheIndex=this._keys.length,this._keys.push(i),this._values.push(void 0)),this._cacheIndex},Map3}();function getKey(i,a){return i}function getValue(i,a){return a}function getEntry(i,a){return[i,a]}}function CreateSetPolyfill(){return function(){function Set3(){this._map=new U}return __name(Set3,"Set"),Object.defineProperty(Set3.prototype,"size",{get:/* @__PURE__ */__name(function(){return this._map.size},"get"),enumerable:!0,configurable:!0}),Set3.prototype.has=function(i){return this._map.has(i)},Set3.prototype.add=function(i){return this._map.set(i,i),this},Set3.prototype.delete=function(i){return this._map.delete(i)},Set3.prototype.clear=function(){this._map.clear()},Set3.prototype.keys=function(){return this._map.keys()},Set3.prototype.values=function(){return this._map.keys()},Set3.prototype.entries=function(){return this._map.entries()},Set3.prototype["@@iterator"]=function(){return this.keys()},Set3.prototype[_]=function(){return this.keys()},Set3}()}function CreateWeakMapPolyfill(){var i=16,a=L.create(),o=CreateUniqueKey();return function(){function WeakMap2(){this._key=CreateUniqueKey()}return __name(WeakMap2,"WeakMap"),WeakMap2.prototype.has=function(i){var a=GetOrCreateWeakMapTable(i,!1);return void 0!==a&&L.has(a,this._key)},WeakMap2.prototype.get=function(i){var a=GetOrCreateWeakMapTable(i,!1);return void 0!==a?L.get(a,this._key):void 0},WeakMap2.prototype.set=function(i,a){return GetOrCreateWeakMapTable(i,!0)[this._key]=a,this},WeakMap2.prototype.delete=function(i){var a=GetOrCreateWeakMapTable(i,!1);return void 0!==a&&delete a[this._key]},WeakMap2.prototype.clear=function(){this._key=CreateUniqueKey()},WeakMap2}();function CreateUniqueKey(){var i;do{i="@@WeakMap@@"+CreateUUID()}while(L.has(a,i));return a[i]=!0,i}function GetOrCreateWeakMapTable(i,a){if(!s.call(i,o)){if(!a)return;Object.defineProperty(i,o,{value:L.create()})}return i[o]}function FillRandomBytes(i,a){for(var s=0;s<a;++s)i[s]=255*Math.random()|0;return i}function GenRandomBytes(i){if("function"==typeof Uint8Array){var a=new Uint8Array(i);return"undefined"!=typeof crypto?crypto.getRandomValues(a):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(a):FillRandomBytes(a,i),a}return FillRandomBytes(new Array(i),i)}function CreateUUID(){var a=GenRandomBytes(i);a[6]=79&a[6]|64,a[8]=191&a[8]|128;for(var s="",o=0;o<i;++o){var u=a[o];4!==o&&6!==o&&8!==o||(s+="-"),u<16&&(s+="0"),s+=u.toString(16).toLowerCase()}return s}}function MakeDictionary(i){return i.__=void 0,delete i.__,i}__name(decorate,"decorate"),i("decorate",decorate),__name(metadata,"metadata"),i("metadata",metadata),__name(defineMetadata,"defineMetadata"),i("defineMetadata",defineMetadata),__name(hasMetadata,"hasMetadata"),i("hasMetadata",hasMetadata),__name(hasOwnMetadata,"hasOwnMetadata"),i("hasOwnMetadata",hasOwnMetadata),__name(getMetadata,"getMetadata"),i("getMetadata",getMetadata),__name(getOwnMetadata,"getOwnMetadata"),i("getOwnMetadata",getOwnMetadata),__name(getMetadataKeys,"getMetadataKeys"),i("getMetadataKeys",getMetadataKeys),__name(getOwnMetadataKeys,"getOwnMetadataKeys"),i("getOwnMetadataKeys",getOwnMetadataKeys),__name(deleteMetadata,"deleteMetadata"),i("deleteMetadata",deleteMetadata),__name(DecorateConstructor,"DecorateConstructor"),__name(DecorateProperty,"DecorateProperty"),__name(OrdinaryHasMetadata,"OrdinaryHasMetadata"),__name(OrdinaryHasOwnMetadata,"OrdinaryHasOwnMetadata"),__name(OrdinaryGetMetadata,"OrdinaryGetMetadata"),__name(OrdinaryGetOwnMetadata,"OrdinaryGetOwnMetadata"),__name(OrdinaryDefineOwnMetadata,"OrdinaryDefineOwnMetadata"),__name(OrdinaryMetadataKeys,"OrdinaryMetadataKeys"),__name(OrdinaryOwnMetadataKeys,"OrdinaryOwnMetadataKeys"),__name(Type2,"Type"),__name(IsUndefined,"IsUndefined"),__name(IsNull,"IsNull"),__name(IsSymbol,"IsSymbol"),__name(IsObject,"IsObject"),__name(ToPrimitive,"ToPrimitive"),__name(OrdinaryToPrimitive,"OrdinaryToPrimitive"),__name(ToBoolean,"ToBoolean"),__name(ToString,"ToString"),__name(ToPropertyKey,"ToPropertyKey"),__name(IsArray,"IsArray"),__name(IsCallable,"IsCallable"),__name(IsConstructor,"IsConstructor"),__name(IsPropertyKey,"IsPropertyKey"),__name(SameValueZero,"SameValueZero"),__name(GetMethod,"GetMethod"),__name(GetIterator,"GetIterator"),__name(IteratorValue,"IteratorValue"),__name(IteratorStep,"IteratorStep"),__name(IteratorClose,"IteratorClose"),__name(OrdinaryGetPrototypeOf,"OrdinaryGetPrototypeOf"),__name(CreateMetadataRegistry,"CreateMetadataRegistry"),__name(GetOrCreateMetadataRegistry,"GetOrCreateMetadataRegistry"),__name(CreateMetadataProvider,"CreateMetadataProvider"),__name(CreateFallbackProvider,"CreateFallbackProvider"),__name(GetMetadataProvider,"GetMetadataProvider"),__name(CreateMapPolyfill,"CreateMapPolyfill"),__name(CreateSetPolyfill,"CreateSetPolyfill"),__name(CreateWeakMapPolyfill,"CreateWeakMapPolyfill"),__name(MakeDictionary,"MakeDictionary")}(s,i),void 0===i.Reflect&&(i.Reflect=a),__name(makeExporter,"makeExporter"),__name(functionThis,"functionThis"),__name(indirectEvalThis,"indirectEvalThis"),__name(sloppyModeThis,"sloppyModeThis")}()),aT;var i,a}function requireMessages(){return rT||(rT=1,function(i){var a=Ob&&Ob.__decorate||function(i,a,s,o){var u,_=arguments.length,x=_<3?a:null===o?o=Object.getOwnPropertyDescriptor(a,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)x=Reflect.decorate(i,a,s,o);else for(var w=i.length-1;w>=0;w--)(u=i[w])&&(x=(_<3?u(x):_>3?u(a,s,x):u(a,s))||x);return _>3&&x&&Object.defineProperty(a,s,x),x},s=Ob&&Ob.__metadata||function(i,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(i,a)};Object.defineProperty(i,"__esModule",{value:!0}),i.RawReading=i.RawUnsubscribeCmd=i.RawSubscribeCmd=i.RawWriteCmd=i.RawReadCmd=i.SensorReading=i.SensorReadCmd=i.LinearCmd=i.VectorSubcommand=i.RotateCmd=i.RotateSubcommand=i.ScalarCmd=i.ScalarSubcommand=i.GenericMessageSubcommand=i.StopAllDevices=i.StopDeviceCmd=i.ServerInfo=i.RequestServerInfo=i.ScanningFinished=i.StopScanning=i.StartScanning=i.RequestDeviceList=i.DeviceRemoved=i.DeviceAdded=i.DeviceList=i.DeviceInfo=i.Error=i.ErrorClass=i.Ping=i.Ok=i.ButtplugSystemMessage=i.ButtplugDeviceMessage=i.ButtplugMessage=i.SensorDeviceMessageAttributes=i.RawDeviceMessageAttributes=i.GenericDeviceMessageAttributes=i.SensorType=i.ActuatorType=i.MessageAttributes=i.MESSAGE_SPEC_VERSION=i.MAX_ID=i.DEFAULT_MESSAGE_ID=i.SYSTEM_MESSAGE_ID=void 0;const o=nT;require_Reflect(),i.SYSTEM_MESSAGE_ID=0,i.DEFAULT_MESSAGE_ID=1,i.MAX_ID=4294967295,i.MESSAGE_SPEC_VERSION=3;const u=class _MessageAttributes{constructor(i){Object.assign(this,i)}update(){var i,a,s,o,u;null===(i=this.ScalarCmd)||void 0===i||i.forEach((i,a)=>i.Index=a),null===(a=this.RotateCmd)||void 0===a||a.forEach((i,a)=>i.Index=a),null===(s=this.LinearCmd)||void 0===s||s.forEach((i,a)=>i.Index=a),null===(o=this.SensorReadCmd)||void 0===o||o.forEach((i,a)=>i.Index=a),null===(u=this.SensorSubscribeCmd)||void 0===u||u.forEach((i,a)=>i.Index=a)}};__name(u,"MessageAttributes");let _=u;var x,w,C,L;i.MessageAttributes=_,(w=x||(i.ActuatorType=x={})).Unknown="Unknown",w.Vibrate="Vibrate",w.Rotate="Rotate",w.Oscillate="Oscillate",w.Constrict="Constrict",w.Inflate="Inflate",w.Position="Position",(L=C||(i.SensorType=C={})).Unknown="Unknown",L.Battery="Battery",L.RSSI="RSSI",L.Button="Button",L.Pressure="Pressure";const B=class _GenericDeviceMessageAttributes{constructor(i){this.Index=0,Object.assign(this,i)}};__name(B,"GenericDeviceMessageAttributes");let U=B;i.GenericDeviceMessageAttributes=U;const j=class _RawDeviceMessageAttributes{constructor(i){this.Endpoints=i}};__name(j,"RawDeviceMessageAttributes");let V=j;i.RawDeviceMessageAttributes=V;const z=class _SensorDeviceMessageAttributes{constructor(i){this.Index=0,Object.assign(this,i)}};__name(z,"SensorDeviceMessageAttributes");let $=z;i.SensorDeviceMessageAttributes=$;const Y=class _ButtplugMessage{constructor(i){this.Id=i}get Type(){return this.constructor}toJSON(){return JSON.stringify(this.toProtocolFormat())}toProtocolFormat(){const i={};return i[this.constructor.Name]=(0,o.instanceToPlain)(this),i}update(){}};__name(Y,"ButtplugMessage");let Z=Y;i.ButtplugMessage=Z;const ee=class _ButtplugDeviceMessage extends Z{constructor(i,a){super(a),this.DeviceIndex=i,this.Id=a}};__name(ee,"ButtplugDeviceMessage");let ie=ee;i.ButtplugDeviceMessage=ie;const ae=class _ButtplugSystemMessage extends Z{constructor(a=i.SYSTEM_MESSAGE_ID){super(a),this.Id=a}};__name(ae,"ButtplugSystemMessage");let le=ae;i.ButtplugSystemMessage=le;const ce=class _Ok extends le{constructor(a=i.DEFAULT_MESSAGE_ID){super(a),this.Id=a}};__name(ce,"Ok");let de=ce;i.Ok=de,de.Name="Ok";const pe=class _Ping extends Z{constructor(a=i.DEFAULT_MESSAGE_ID){super(a),this.Id=a}};__name(pe,"Ping");let fe=pe;var _e,ye;i.Ping=fe,fe.Name="Ping",(ye=_e||(i.ErrorClass=_e={}))[ye.ERROR_UNKNOWN=0]="ERROR_UNKNOWN",ye[ye.ERROR_INIT=1]="ERROR_INIT",ye[ye.ERROR_PING=2]="ERROR_PING",ye[ye.ERROR_MSG=3]="ERROR_MSG",ye[ye.ERROR_DEVICE=4]="ERROR_DEVICE";const be=class _Error extends Z{constructor(a,s=_e.ERROR_UNKNOWN,o=i.DEFAULT_MESSAGE_ID){super(o),this.ErrorMessage=a,this.ErrorCode=s,this.Id=o}get Schemversion(){return 0}};__name(be,"Error");let Te=be;i.Error=Te,Te.Name="Error";const Se=class _DeviceInfo{constructor(i){Object.assign(this,i)}};__name(Se,"DeviceInfo");let xe=Se;i.DeviceInfo=xe,a([(0,o.Type)(()=>_),s("design:type",_)],xe.prototype,"DeviceMessages",void 0);const we=class _DeviceList extends Z{constructor(a,s=i.DEFAULT_MESSAGE_ID){super(s),this.Devices=a,this.Id=s}update(){for(const i of this.Devices)i.DeviceMessages.update()}};__name(we,"DeviceList");let Pe=we;i.DeviceList=Pe,Pe.Name="DeviceList",a([(0,o.Type)(()=>xe),s("design:type",Array)],Pe.prototype,"Devices",void 0);const Re=class _DeviceAdded extends le{constructor(i){super(),Object.assign(this,i)}update(){this.DeviceMessages.update()}};__name(Re,"DeviceAdded");let ze=Re;i.DeviceAdded=ze,ze.Name="DeviceAdded",a([(0,o.Type)(()=>_),s("design:type",_)],ze.prototype,"DeviceMessages",void 0);const He=class _DeviceRemoved extends le{constructor(i){super(),this.DeviceIndex=i}};__name(He,"DeviceRemoved");let $e=He;i.DeviceRemoved=$e,$e.Name="DeviceRemoved";const We=class _RequestDeviceList extends Z{constructor(a=i.DEFAULT_MESSAGE_ID){super(a),this.Id=a}};__name(We,"RequestDeviceList");let qe=We;i.RequestDeviceList=qe,qe.Name="RequestDeviceList";const Xe=class _StartScanning extends Z{constructor(a=i.DEFAULT_MESSAGE_ID){super(a),this.Id=a}};__name(Xe,"StartScanning");let Qe=Xe;i.StartScanning=Qe,Qe.Name="StartScanning";const Ye=class _StopScanning extends Z{constructor(a=i.DEFAULT_MESSAGE_ID){super(a),this.Id=a}};__name(Ye,"StopScanning");let et=Ye;i.StopScanning=et,et.Name="StopScanning";const tt=class _ScanningFinished extends le{constructor(){super()}};__name(tt,"ScanningFinished");let nt=tt;i.ScanningFinished=nt,nt.Name="ScanningFinished";const it=class _RequestServerInfo extends Z{constructor(a,s=0,o=i.DEFAULT_MESSAGE_ID){super(o),this.ClientName=a,this.MessageVersion=s,this.Id=o}};__name(it,"RequestServerInfo");let rt=it;i.RequestServerInfo=rt,rt.Name="RequestServerInfo";const at=class _ServerInfo extends le{constructor(a,s,o,u=i.DEFAULT_MESSAGE_ID){super(),this.MessageVersion=a,this.MaxPingTime=s,this.ServerName=o,this.Id=u}};__name(at,"ServerInfo");let st=at;i.ServerInfo=st,st.Name="ServerInfo";const ot=class _StopDeviceCmd extends ie{constructor(a=-1,s=i.DEFAULT_MESSAGE_ID){super(a,s),this.DeviceIndex=a,this.Id=s}};__name(ot,"StopDeviceCmd");let lt=ot;i.StopDeviceCmd=lt,lt.Name="StopDeviceCmd";const ct=class _StopAllDevices extends Z{constructor(a=i.DEFAULT_MESSAGE_ID){super(a),this.Id=a}};__name(ct,"StopAllDevices");let ut=ct;i.StopAllDevices=ut,ut.Name="StopAllDevices";const dt=class _GenericMessageSubcommand{constructor(i){this.Index=i}};__name(dt,"GenericMessageSubcommand");let ht=dt;i.GenericMessageSubcommand=ht;const pt=class _ScalarSubcommand extends ht{constructor(i,a,s){super(i),this.Scalar=a,this.ActuatorType=s}};__name(pt,"ScalarSubcommand");let mt=pt;i.ScalarSubcommand=mt;const ft=class _ScalarCmd extends ie{constructor(a,s=-1,o=i.DEFAULT_MESSAGE_ID){super(s,o),this.Scalars=a,this.DeviceIndex=s,this.Id=o}};__name(ft,"ScalarCmd");let gt=ft;i.ScalarCmd=gt,gt.Name="ScalarCmd";const _t=class _RotateSubcommand extends ht{constructor(i,a,s){super(i),this.Speed=a,this.Clockwise=s}};__name(_t,"RotateSubcommand");let yt=_t;i.RotateSubcommand=yt;const vt=class _RotateCmd extends ie{static Create(i,a){const s=new Array;let o=0;for(const[u,_]of a)s.push(new yt(o,u,_)),++o;return new _RotateCmd(s,i)}constructor(a,s=-1,o=i.DEFAULT_MESSAGE_ID){super(s,o),this.Rotations=a,this.DeviceIndex=s,this.Id=o}};__name(vt,"RotateCmd");let bt=vt;i.RotateCmd=bt,bt.Name="RotateCmd";const Tt=class _VectorSubcommand extends ht{constructor(i,a,s){super(i),this.Position=a,this.Duration=s}};__name(Tt,"VectorSubcommand");let St=Tt;i.VectorSubcommand=St;const xt=class _LinearCmd extends ie{static Create(i,a){const s=new Array;let o=0;for(const u of a)s.push(new St(o,u[0],u[1])),++o;return new _LinearCmd(s,i)}constructor(a,s=-1,o=i.DEFAULT_MESSAGE_ID){super(s,o),this.Vectors=a,this.DeviceIndex=s,this.Id=o}};__name(xt,"LinearCmd");let wt=xt;i.LinearCmd=wt,wt.Name="LinearCmd";const At=class _SensorReadCmd extends ie{constructor(a,s,o,u=i.DEFAULT_MESSAGE_ID){super(a,u),this.DeviceIndex=a,this.SensorIndex=s,this.SensorType=o,this.Id=u}};__name(At,"SensorReadCmd");let Ct=At;i.SensorReadCmd=Ct,Ct.Name="SensorReadCmd";const Et=class _SensorReading extends ie{constructor(a,s,o,u,_=i.DEFAULT_MESSAGE_ID){super(a,_),this.DeviceIndex=a,this.SensorIndex=s,this.SensorType=o,this.Data=u,this.Id=_}};__name(Et,"SensorReading");let Mt=Et;i.SensorReading=Mt,Mt.Name="SensorReading";const kt=class _RawReadCmd extends ie{constructor(a,s,o,u,_=i.DEFAULT_MESSAGE_ID){super(a,_),this.DeviceIndex=a,this.Endpoint=s,this.ExpectedLength=o,this.Timeout=u,this.Id=_}};__name(kt,"RawReadCmd");let Pt=kt;i.RawReadCmd=Pt,Pt.Name="RawReadCmd";const It=class _RawWriteCmd extends ie{constructor(a,s,o,u,_=i.DEFAULT_MESSAGE_ID){super(a,_),this.DeviceIndex=a,this.Endpoint=s,this.Data=o,this.WriteWithResponse=u,this.Id=_}};__name(It,"RawWriteCmd");let Lt=It;i.RawWriteCmd=Lt,Lt.Name="RawWriteCmd";const Dt=class _RawSubscribeCmd extends ie{constructor(a,s,o=i.DEFAULT_MESSAGE_ID){super(a,o),this.DeviceIndex=a,this.Endpoint=s,this.Id=o}};__name(Dt,"RawSubscribeCmd");let Rt=Dt;i.RawSubscribeCmd=Rt,Rt.Name="RawSubscribeCmd";const Ot=class _RawUnsubscribeCmd extends ie{constructor(a,s,o=i.DEFAULT_MESSAGE_ID){super(a,o),this.DeviceIndex=a,this.Endpoint=s,this.Id=o}};__name(Ot,"RawUnsubscribeCmd");let Nt=Ot;i.RawUnsubscribeCmd=Nt,Nt.Name="RawUnsubscribeCmd";const Bt=class _RawReading extends ie{constructor(a,s,o,u=i.DEFAULT_MESSAGE_ID){super(a,u),this.DeviceIndex=a,this.Endpoint=s,this.Data=o,this.Id=u}};__name(Bt,"RawReading");let Ft=Bt;i.RawReading=Ft,Ft.Name="RawReading"}(Ob)),Ob}__name(require_Reflect,"require_Reflect"),__name(requireMessages,"requireMessages");var sT,oT={};function requireExceptions(){if(sT)return oT;sT=1;var i=oT&&oT.__createBinding||(Object.create?function(i,a,s,o){void 0===o&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);u&&!("get"in u?!a.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:/* @__PURE__ */__name(function(){return a[s]},"get")}),Object.defineProperty(i,o,u)}:function(i,a,s,o){void 0===o&&(o=s),i[o]=a[s]}),a=oT&&oT.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),s=oT&&oT.__importStar||function(s){if(s&&s.__esModule)return s;var o={};if(null!=s)for(var u in s)"default"!==u&&Object.prototype.hasOwnProperty.call(s,u)&&i(o,s,u);return a(o,s),o};Object.defineProperty(oT,"__esModule",{value:!0}),oT.ButtplugUnknownError=oT.ButtplugPingError=oT.ButtplugMessageError=oT.ButtplugDeviceError=oT.ButtplugInitError=oT.ButtplugError=void 0;const o=s(requireMessages()),u=class _ButtplugError extends Error{get ErrorClass(){return this.errorClass}get InnerError(){return this.innerError}get Id(){return this.messageId}get ErrorMessage(){return new o.Error(this.message,this.ErrorClass,this.Id)}static LogAndError(i,a,s,u=o.SYSTEM_MESSAGE_ID){return a.Error(s),new i(s,u)}static FromError(i){switch(i.ErrorCode){case o.ErrorClass.ERROR_DEVICE:return new L(i.ErrorMessage,i.Id);case o.ErrorClass.ERROR_INIT:return new w(i.ErrorMessage,i.Id);case o.ErrorClass.ERROR_UNKNOWN:return new $(i.ErrorMessage,i.Id);case o.ErrorClass.ERROR_PING:return new V(i.ErrorMessage,i.Id);case o.ErrorClass.ERROR_MSG:return new U(i.ErrorMessage,i.Id);default:throw new Error(`Message type ${i.ErrorCode} not handled`)}}constructor(i,a,s=o.SYSTEM_MESSAGE_ID,u){super(i),this.errorClass=o.ErrorClass.ERROR_UNKNOWN,this.errorClass=a,this.innerError=u,this.messageId=s}};__name(u,"ButtplugError");let _=u;oT.ButtplugError=_;const x=class _ButtplugInitError extends _{constructor(i,a=o.SYSTEM_MESSAGE_ID){super(i,o.ErrorClass.ERROR_INIT,a)}};__name(x,"ButtplugInitError");let w=x;oT.ButtplugInitError=w;const C=class _ButtplugDeviceError extends _{constructor(i,a=o.SYSTEM_MESSAGE_ID){super(i,o.ErrorClass.ERROR_DEVICE,a)}};__name(C,"ButtplugDeviceError");let L=C;oT.ButtplugDeviceError=L;const B=class _ButtplugMessageError extends _{constructor(i,a=o.SYSTEM_MESSAGE_ID){super(i,o.ErrorClass.ERROR_MSG,a)}};__name(B,"ButtplugMessageError");let U=B;oT.ButtplugMessageError=U;const j=class _ButtplugPingError extends _{constructor(i,a=o.SYSTEM_MESSAGE_ID){super(i,o.ErrorClass.ERROR_PING,a)}};__name(j,"ButtplugPingError");let V=j;oT.ButtplugPingError=V;const z=class _ButtplugUnknownError extends _{constructor(i,a=o.SYSTEM_MESSAGE_ID){super(i,o.ErrorClass.ERROR_UNKNOWN,a)}};__name(z,"ButtplugUnknownError");let $=z;return oT.ButtplugUnknownError=$,oT}__name(requireExceptions,"requireExceptions");var lT,cT,uT={};function requireMessageUtils(){if(lT)return uT;lT=1;var i=uT&&uT.__createBinding||(Object.create?function(i,a,s,o){void 0===o&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);u&&!("get"in u?!a.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:/* @__PURE__ */__name(function(){return a[s]},"get")}),Object.defineProperty(i,o,u)}:function(i,a,s,o){void 0===o&&(o=s),i[o]=a[s]}),a=uT&&uT.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),s=uT&&uT.__importStar||function(s){if(s&&s.__esModule)return s;var o={};if(null!=s)for(var u in s)"default"!==u&&Object.prototype.hasOwnProperty.call(s,u)&&i(o,s,u);return a(o,s),o};Object.defineProperty(uT,"__esModule",{value:!0}),uT.fromJSON=uT.getMessageClassFromMessage=void 0;const o=nT,u=s(requireMessages());function getMessageClass(i){for(const a of Object.values(u))if("function"==typeof a&&"Name"in a&&a.Name===i)return a;return null}function getMessageClassFromMessage(i){return getMessageClass(Object.getPrototypeOf(i).constructor.Name)}function fromJSON(i){const a=JSON.parse(i),s=[];for(const u of Array.from(a)){const i=Object.getOwnPropertyNames(u)[0],a=getMessageClass(i);if(a){const _=(0,o.plainToInstance)(a,u[i]);_.update(),s.push(_)}}return s}return __name(getMessageClass,"getMessageClass"),__name(getMessageClassFromMessage,"getMessageClassFromMessage"),uT.getMessageClassFromMessage=getMessageClassFromMessage,__name(fromJSON,"fromJSON"),uT.fromJSON=fromJSON,uT}function requireButtplugClientDevice(){var i;if(cT)return Rb;cT=1;var a=Rb&&Rb.__createBinding||(Object.create?function(i,a,s,o){void 0===o&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);u&&!("get"in u?!a.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:/* @__PURE__ */__name(function(){return a[s]},"get")}),Object.defineProperty(i,o,u)}:function(i,a,s,o){void 0===o&&(o=s),i[o]=a[s]}),s=Rb&&Rb.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),o=Rb&&Rb.__importStar||function(i){if(i&&i.__esModule)return i;var o={};if(null!=i)for(var u in i)"default"!==u&&Object.prototype.hasOwnProperty.call(i,u)&&a(o,i,u);return s(o,i),o},u=Rb&&Rb.__awaiter||function(i,a,s,o){function adopt(i){return i instanceof s?i:new s(function(a){a(i)})}return __name(adopt,"adopt"),new(s||(s=Promise))(function(s,u){function fulfilled(i){try{step(o.next(i))}catch(a){u(a)}}function rejected(i){try{step(o.throw(i))}catch(a){u(a)}}function step(i){i.done?s(i.value):adopt(i.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((o=o.apply(i,a||[])).next())})};Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.ButtplugClientDevice=void 0;const _=o(requireMessages()),x=requireExceptions(),w=requireEventemitter3(),C=requireMessageUtils();let L=(i=class extends w.EventEmitter{get name(){return this._deviceInfo.DeviceName}get displayName(){return this._deviceInfo.DeviceDisplayName}get index(){return this._deviceInfo.DeviceIndex}get messageTimingGap(){return this._deviceInfo.DeviceMessageTimingGap}get messageAttributes(){return this._deviceInfo.DeviceMessages}static fromMsg(a,s){return new i(a,s)}constructor(i,a){super(),this._deviceInfo=i,this._sendClosure=a,this.allowedMsgs=/* @__PURE__ */new Map,i.DeviceMessages.update()}send(i){return u(this,void 0,void 0,function*(){return yield this._sendClosure(this,i)})}sendExpectOk(i){return u(this,void 0,void 0,function*(){const a=yield this.send(i);switch((0,C.getMessageClassFromMessage)(a)){case _.Ok:return;case _.Error:throw x.ButtplugError.FromError(a);default:throw new x.ButtplugMessageError(`Message type ${a.constructor} not handled by SendMsgExpectOk`)}})}scalar(i){return u(this,void 0,void 0,function*(){Array.isArray(i)?yield this.sendExpectOk(new _.ScalarCmd(i,this.index)):yield this.sendExpectOk(new _.ScalarCmd([i],this.index))})}scalarCommandBuilder(i,a){var s;return u(this,void 0,void 0,function*(){const o=null===(s=this.messageAttributes.ScalarCmd)||void 0===s?void 0:s.filter(i=>i.ActuatorType===a);if(!o||0===o.length)throw new x.ButtplugDeviceError(`Device ${this.name} has no ${a} capabilities`);const u=[];if("number"==typeof i)o.forEach(s=>u.push(new _.ScalarSubcommand(s.Index,i,a)));else{if(!Array.isArray(i))throw new x.ButtplugDeviceError(`${a} can only take numbers or arrays of numbers.`);if(i.length>o.length)throw new x.ButtplugDeviceError(`${i.length} commands send to a device with ${o.length} vibrators`);o.forEach((s,o)=>{u.push(new _.ScalarSubcommand(s.Index,i[o],a))})}yield this.scalar(u)})}get vibrateAttributes(){var i,a;return null!==(a=null===(i=this.messageAttributes.ScalarCmd)||void 0===i?void 0:i.filter(i=>i.ActuatorType===_.ActuatorType.Vibrate))&&void 0!==a?a:[]}vibrate(i){return u(this,void 0,void 0,function*(){yield this.scalarCommandBuilder(i,_.ActuatorType.Vibrate)})}get oscillateAttributes(){var i,a;return null!==(a=null===(i=this.messageAttributes.ScalarCmd)||void 0===i?void 0:i.filter(i=>i.ActuatorType===_.ActuatorType.Oscillate))&&void 0!==a?a:[]}oscillate(i){return u(this,void 0,void 0,function*(){yield this.scalarCommandBuilder(i,_.ActuatorType.Oscillate)})}get rotateAttributes(){var i;return null!==(i=this.messageAttributes.RotateCmd)&&void 0!==i?i:[]}rotate(i,a){return u(this,void 0,void 0,function*(){const s=this.messageAttributes.RotateCmd;if(!s||0===s.length)throw new x.ButtplugDeviceError(`Device ${this.name} has no Rotate capabilities`);let o;if("number"==typeof i)o=_.RotateCmd.Create(this.index,new Array(s.length).fill([i,a]));else{if(!Array.isArray(i))throw new x.ButtplugDeviceError("SendRotateCmd can only take a number and boolean, or an array of number/boolean tuples");o=_.RotateCmd.Create(this.index,i)}yield this.sendExpectOk(o)})}get linearAttributes(){var i;return null!==(i=this.messageAttributes.LinearCmd)&&void 0!==i?i:[]}linear(i,a){return u(this,void 0,void 0,function*(){const s=this.messageAttributes.LinearCmd;if(!s||0===s.length)throw new x.ButtplugDeviceError(`Device ${this.name} has no Linear capabilities`);let o;if("number"==typeof i)o=_.LinearCmd.Create(this.index,new Array(s.length).fill([i,a]));else{if(!Array.isArray(i))throw new x.ButtplugDeviceError("SendLinearCmd can only take a number and number, or an array of number/number tuples");o=_.LinearCmd.Create(this.index,i)}yield this.sendExpectOk(o)})}sensorRead(i,a){return u(this,void 0,void 0,function*(){const s=yield this.send(new _.SensorReadCmd(this.index,i,a));switch((0,C.getMessageClassFromMessage)(s)){case _.SensorReading:return s.Data;case _.Error:throw x.ButtplugError.FromError(s);default:throw new x.ButtplugMessageError(`Message type ${s.constructor} not handled by sensorRead`)}})}get hasBattery(){var i;const a=null===(i=this.messageAttributes.SensorReadCmd)||void 0===i?void 0:i.filter(i=>i.SensorType===_.SensorType.Battery);return void 0!==a&&a.length>0}battery(){var i;return u(this,void 0,void 0,function*(){if(!this.hasBattery)throw new x.ButtplugDeviceError(`Device ${this.name} has no Battery capabilities`);const a=null===(i=this.messageAttributes.SensorReadCmd)||void 0===i?void 0:i.filter(i=>i.SensorType===_.SensorType.Battery);return(yield this.sensorRead(a[0].Index,_.SensorType.Battery))[0]/100})}get hasRssi(){var i;const a=null===(i=this.messageAttributes.SensorReadCmd)||void 0===i?void 0:i.filter(i=>i.SensorType===_.SensorType.RSSI);return void 0!==a&&0===a.length}rssi(){var i;return u(this,void 0,void 0,function*(){if(!this.hasRssi)throw new x.ButtplugDeviceError(`Device ${this.name} has no RSSI capabilities`);const a=null===(i=this.messageAttributes.SensorReadCmd)||void 0===i?void 0:i.filter(i=>i.SensorType===_.SensorType.RSSI);return(yield this.sensorRead(a[0].Index,_.SensorType.RSSI))[0]})}rawRead(i,a,s){return u(this,void 0,void 0,function*(){if(!this.messageAttributes.RawReadCmd)throw new x.ButtplugDeviceError(`Device ${this.name} has no raw read capabilities`);if(-1===this.messageAttributes.RawReadCmd.Endpoints.indexOf(i))throw new x.ButtplugDeviceError(`Device ${this.name} has no raw readable endpoint ${i}`);const o=yield this.send(new _.RawReadCmd(this.index,i,a,s));switch((0,C.getMessageClassFromMessage)(o)){case _.RawReading:return new Uint8Array(o.Data);case _.Error:throw x.ButtplugError.FromError(o);default:throw new x.ButtplugMessageError(`Message type ${o.constructor} not handled by rawRead`)}})}rawWrite(i,a,s){return u(this,void 0,void 0,function*(){if(!this.messageAttributes.RawWriteCmd)throw new x.ButtplugDeviceError(`Device ${this.name} has no raw write capabilities`);if(-1===this.messageAttributes.RawWriteCmd.Endpoints.indexOf(i))throw new x.ButtplugDeviceError(`Device ${this.name} has no raw writable endpoint ${i}`);yield this.sendExpectOk(new _.RawWriteCmd(this.index,i,a,s))})}rawSubscribe(i){return u(this,void 0,void 0,function*(){if(!this.messageAttributes.RawSubscribeCmd)throw new x.ButtplugDeviceError(`Device ${this.name} has no raw subscribe capabilities`);if(-1===this.messageAttributes.RawSubscribeCmd.Endpoints.indexOf(i))throw new x.ButtplugDeviceError(`Device ${this.name} has no raw subscribable endpoint ${i}`);yield this.sendExpectOk(new _.RawSubscribeCmd(this.index,i))})}rawUnsubscribe(i){return u(this,void 0,void 0,function*(){if(!this.messageAttributes.RawSubscribeCmd)throw new x.ButtplugDeviceError(`Device ${this.name} has no raw unsubscribe capabilities`);if(-1===this.messageAttributes.RawSubscribeCmd.Endpoints.indexOf(i))throw new x.ButtplugDeviceError(`Device ${this.name} has no raw unsubscribable endpoint ${i}`);yield this.sendExpectOk(new _.RawUnsubscribeCmd(this.index,i))})}stop(){return u(this,void 0,void 0,function*(){yield this.sendExpectOk(new _.StopDeviceCmd(this.index))})}emitDisconnected(){this.emit("deviceremoved")}},__name(i,"ButtplugClientDevice"),i);return Rb.ButtplugClientDevice=L,Rb}__name(requireMessageUtils,"requireMessageUtils"),__name(requireButtplugClientDevice,"requireButtplugClientDevice");var dT,hT={};function requireButtplugMessageSorter(){var i;if(dT)return hT;dT=1;var a=hT&&hT.__createBinding||(Object.create?function(i,a,s,o){void 0===o&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);u&&!("get"in u?!a.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:/* @__PURE__ */__name(function(){return a[s]},"get")}),Object.defineProperty(i,o,u)}:function(i,a,s,o){void 0===o&&(o=s),i[o]=a[s]}),s=hT&&hT.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),o=hT&&hT.__importStar||function(i){if(i&&i.__esModule)return i;var o={};if(null!=i)for(var u in i)"default"!==u&&Object.prototype.hasOwnProperty.call(i,u)&&a(o,i,u);return s(o,i),o};Object.defineProperty(hT,"__esModule",{value:!0}),hT.ButtplugMessageSorter=void 0;const u=o(requireMessages()),_=requireExceptions();let x=(__name(i=class{constructor(i){this._useCounter=i,this._counter=1,this._waitingMsgs=/* @__PURE__ */new Map}PrepareOutgoingMessage(i){let a,s;this._useCounter&&(i.Id=this._counter,this._counter+=1);const o=new Promise((i,o)=>{a=i,s=o});return this._waitingMsgs.set(i.Id,[a,s]),o}ParseIncomingMessages(i){const a=[];for(const s of i){if(s.Id!==u.SYSTEM_MESSAGE_ID&&this._waitingMsgs.has(s.Id)){const[i,a]=this._waitingMsgs.get(s.Id);if(s.Type===u.Error){a(_.ButtplugError.FromError(s));continue}i(s);continue}a.push(s)}return a}},"ButtplugMessageSorter"),i);return hT.ButtplugMessageSorter=x,hT}__name(requireButtplugMessageSorter,"requireButtplugMessageSorter");var pT,mT,fT={};function requireButtplugClientConnectorException(){var i;if(pT)return fT;pT=1;var a=fT&&fT.__createBinding||(Object.create?function(i,a,s,o){void 0===o&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);u&&!("get"in u?!a.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:/* @__PURE__ */__name(function(){return a[s]},"get")}),Object.defineProperty(i,o,u)}:function(i,a,s,o){void 0===o&&(o=s),i[o]=a[s]}),s=fT&&fT.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),o=fT&&fT.__importStar||function(i){if(i&&i.__esModule)return i;var o={};if(null!=i)for(var u in i)"default"!==u&&Object.prototype.hasOwnProperty.call(i,u)&&a(o,i,u);return s(o,i),o};Object.defineProperty(fT,"__esModule",{value:!0}),fT.ButtplugClientConnectorException=void 0;const u=requireExceptions(),_=o(requireMessages());let x=(i=class extends u.ButtplugError{constructor(i){super(i,_.ErrorClass.ERROR_UNKNOWN)}},__name(i,"ButtplugClientConnectorException"),i);return fT.ButtplugClientConnectorException=x,fT}function requireClient(){if(mT)return Ab;mT=1;var i=Ab&&Ab.__createBinding||(Object.create?function(i,a,s,o){void 0===o&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);u&&!("get"in u?!a.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:/* @__PURE__ */__name(function(){return a[s]},"get")}),Object.defineProperty(i,o,u)}:function(i,a,s,o){void 0===o&&(o=s),i[o]=a[s]}),a=Ab&&Ab.__setModuleDefault||(Object.create?function(i,a){Object.defineProperty(i,"default",{enumerable:!0,value:a})}:function(i,a){i.default=a}),s=Ab&&Ab.__importStar||function(s){if(s&&s.__esModule)return s;var o={};if(null!=s)for(var u in s)"default"!==u&&Object.prototype.hasOwnProperty.call(s,u)&&i(o,s,u);return a(o,s),o},o=Ab&&Ab.__awaiter||function(i,a,s,o){function adopt(i){return i instanceof s?i:new s(function(a){a(i)})}return __name(adopt,"adopt"),new(s||(s=Promise))(function(s,u){function fulfilled(i){try{step(o.next(i))}catch(a){u(a)}}function rejected(i){try{step(o.throw(i))}catch(a){u(a)}}function step(i){i.done?s(i.value):adopt(i.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((o=o.apply(i,a||[])).next())})};Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.ButtplugClient=void 0;const u=requireLogging(),_=requireEventemitter3(),x=requireButtplugClientDevice(),w=requireButtplugMessageSorter(),C=s(requireMessages()),L=requireExceptions(),B=requireButtplugClientConnectorException(),U=requireMessageUtils(),j=class _ButtplugClient extends _.EventEmitter{constructor(i="Generic Buttplug Client"){super(),this._pingTimer=null,this._connector=null,this._devices=/* @__PURE__ */new Map,this._logger=u.ButtplugLogger.Logger,this._isScanning=!1,this._sorter=new w.ButtplugMessageSorter(!0),this.connect=i=>o(this,void 0,void 0,function*(){this._logger.Info(`ButtplugClient: Connecting using ${i.constructor.name}`),yield i.connect(),this._connector=i,this._connector.addListener("message",this.parseMessages),this._connector.addListener("disconnect",this.disconnectHandler),yield this.initializeConnection()}),this.disconnect=()=>o(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: Disconnect called"),this.checkConnector(),yield this.shutdownConnection(),yield this._connector.disconnect()}),this.startScanning=()=>o(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StartScanning called"),this._isScanning=!0,yield this.sendMsgExpectOk(new C.StartScanning)}),this.stopScanning=()=>o(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopScanning called"),this._isScanning=!1,yield this.sendMsgExpectOk(new C.StopScanning)}),this.stopAllDevices=()=>o(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopAllDevices"),yield this.sendMsgExpectOk(new C.StopAllDevices)}),this.disconnectHandler=()=>{this._logger.Info("ButtplugClient: Disconnect event receieved."),this.emit("disconnect")},this.parseMessages=i=>{const a=this._sorter.ParseIncomingMessages(i);for(const s of a)switch((0,U.getMessageClassFromMessage)(s)){case C.DeviceAdded:{const i=s,a=x.ButtplugClientDevice.fromMsg(i,this.sendDeviceMessageClosure);this._devices.set(i.DeviceIndex,a),this.emit("deviceadded",a);break}case C.DeviceRemoved:{const i=s;if(this._devices.has(i.DeviceIndex)){const a=this._devices.get(i.DeviceIndex);null==a||a.emitDisconnected(),this._devices.delete(i.DeviceIndex),this.emit("deviceremoved",a)}break}case C.ScanningFinished:this._isScanning=!1,this.emit("scanningfinished",s)}},this.initializeConnection=()=>o(this,void 0,void 0,function*(){this.checkConnector();const i=yield this.sendMessage(new C.RequestServerInfo(this._clientName,C.MESSAGE_SPEC_VERSION));switch((0,U.getMessageClassFromMessage)(i)){case C.ServerInfo:{const a=i;if(this._logger.Info(`ButtplugClient: Connected to Server ${a.ServerName}`),a.MaxPingTime,a.MessageVersion<C.MESSAGE_SPEC_VERSION)throw yield this._connector.disconnect(),L.ButtplugError.LogAndError(L.ButtplugInitError,this._logger,`Server protocol version ${a.MessageVersion} is older than client protocol version ${C.MESSAGE_SPEC_VERSION}. Please update server.`);return yield this.requestDeviceList(),!0}case C.Error:{yield this._connector.disconnect();const a=i;throw L.ButtplugError.LogAndError(L.ButtplugInitError,this._logger,`Cannot connect to server. ${a.ErrorMessage}`)}}return!1}),this.requestDeviceList=()=>o(this,void 0,void 0,function*(){this.checkConnector(),this._logger.Debug("ButtplugClient: ReceiveDeviceList called");(yield this.sendMessage(new C.RequestDeviceList)).Devices.forEach(i=>{if(this._devices.has(i.DeviceIndex))this._logger.Debug(`ButtplugClient: Device already added: ${i}`);else{const a=x.ButtplugClientDevice.fromMsg(i,this.sendDeviceMessageClosure);this._logger.Debug(`ButtplugClient: Adding Device: ${a}`),this._devices.set(i.DeviceIndex,a),this.emit("deviceadded",a)}})}),this.shutdownConnection=()=>o(this,void 0,void 0,function*(){yield this.stopAllDevices(),null!==this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=null)}),this.sendMsgExpectOk=i=>o(this,void 0,void 0,function*(){const a=yield this.sendMessage(i);switch((0,U.getMessageClassFromMessage)(a)){case C.Ok:return;case C.Error:throw L.ButtplugError.FromError(a);default:throw L.ButtplugError.LogAndError(L.ButtplugMessageError,this._logger,`Message type ${(0,U.getMessageClassFromMessage)(a).constructor} not handled by SendMsgExpectOk`)}}),this.sendDeviceMessageClosure=(i,a)=>o(this,void 0,void 0,function*(){return yield this.sendDeviceMessage(i,a)}),this._clientName=i,this._logger.Debug(`ButtplugClient: Client ${i} created.`)}get connected(){return null!==this._connector&&this._connector.Connected}get devices(){this.checkConnector();const i=[];return this._devices.forEach(a=>{i.push(a)}),i}get isScanning(){return this._isScanning}sendDeviceMessage(i,a){return o(this,void 0,void 0,function*(){this.checkConnector();if(void 0===this._devices.get(i.index))throw L.ButtplugError.LogAndError(L.ButtplugDeviceError,this._logger,`Device ${i.index} not available.`);return a.DeviceIndex=i.index,yield this.sendMessage(a)})}sendMessage(i){return o(this,void 0,void 0,function*(){this.checkConnector();const a=this._sorter.PrepareOutgoingMessage(i);return yield this._connector.send(i),yield a})}checkConnector(){if(!this.connected)throw new B.ButtplugClientConnectorException("ButtplugClient not connected")}};__name(j,"ButtplugClient");let V=j;return Ab.ButtplugClient=V,Ab}__name(requireButtplugClientConnectorException,"requireButtplugClientConnectorException"),__name(requireClient,"requireClient");var gT,_T,yT={},vT={};function requireButtplugBrowserWebsocketConnector(){var i;if(gT)return vT;gT=1;var a=vT&&vT.__awaiter||function(i,a,s,o){function adopt(i){return i instanceof s?i:new s(function(a){a(i)})}return __name(adopt,"adopt"),new(s||(s=Promise))(function(s,u){function fulfilled(i){try{step(o.next(i))}catch(a){u(a)}}function rejected(i){try{step(o.throw(i))}catch(a){u(a)}}function step(i){i.done?s(i.value):adopt(i.value).then(fulfilled,rejected)}__name(fulfilled,"fulfilled"),__name(rejected,"rejected"),__name(step,"step"),step((o=o.apply(i,a||[])).next())})};Object.defineProperty(vT,"__esModule",{value:!0}),vT.ButtplugBrowserWebsocketConnector=void 0;const s=requireEventemitter3(),o=requireMessageUtils();let u=(i=class extends s.EventEmitter{constructor(i){super(),this._url=i,this._websocketConstructor=null,this.connect=()=>a(this,void 0,void 0,function*(){var i;const s=new(null!==(i=this._websocketConstructor)&&void 0!==i?i:WebSocket)(this._url);let o,u;const _=new Promise((i,a)=>{o=i,u=a}),x=/* @__PURE__ */__name(()=>u(),"conErrorCallback");return s.addEventListener("open",()=>a(this,void 0,void 0,function*(){this._ws=s;try{yield this.initialize(),this._ws.addEventListener("message",i=>{this.parseIncomingMessage(i)}),this._ws.removeEventListener("close",x),this._ws.addEventListener("close",this.disconnect),o()}catch(i){console.log(i),u()}})),s.addEventListener("close",x),_}),this.disconnect=()=>a(this,void 0,void 0,function*(){this.Connected&&(this._ws.close(),this._ws=void 0,this.emit("disconnect"))}),this.initialize=()=>a(this,void 0,void 0,function*(){return Promise.resolve()})}get Connected(){return void 0!==this._ws}sendMessage(i){if(!this.Connected)throw new Error("ButtplugBrowserWebsocketConnector not connected");this._ws.send("["+i.toJSON()+"]")}parseIncomingMessage(i){if("string"==typeof i.data){const a=(0,o.fromJSON)(i.data);this.emit("message",a)}else i.data,Blob}onReaderLoad(i){const a=(0,o.fromJSON)(i.target.result);this.emit("message",a)}},__name(i,"ButtplugBrowserWebsocketConnector"),i);return vT.ButtplugBrowserWebsocketConnector=u,vT}function requireButtplugBrowserWebsocketClientConnector(){var i;if(_T)return yT;_T=1,Object.defineProperty(yT,"__esModule",{value:!0}),yT.ButtplugBrowserWebsocketClientConnector=void 0;const a=requireButtplugBrowserWebsocketConnector();let s=(i=class extends a.ButtplugBrowserWebsocketConnector{constructor(){super(...arguments),this.send=i=>{if(!this.Connected)throw new Error("ButtplugClient not connected");this.sendMessage(i)}}},__name(i,"ButtplugBrowserWebsocketClientConnector"),i);return yT.ButtplugBrowserWebsocketClientConnector=s,yT}__name(requireButtplugBrowserWebsocketConnector,"requireButtplugBrowserWebsocketConnector"),__name(requireButtplugBrowserWebsocketClientConnector,"requireButtplugBrowserWebsocketClientConnector");var bT,TT,ST,xT={};function requireBrowser(){return TT?bT:(TT=1,bT=/* @__PURE__ */__name(function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},"browser$1"))}function requireButtplugNodeWebsocketClientConnector(){var i;if(ST)return xT;ST=1,Object.defineProperty(xT,"__esModule",{value:!0}),xT.ButtplugNodeWebsocketClientConnector=void 0;const a=requireButtplugBrowserWebsocketClientConnector(),s=requireBrowser();let o=(i=class extends a.ButtplugBrowserWebsocketClientConnector{constructor(){super(...arguments),this._websocketConstructor=s.WebSocket}},__name(i,"ButtplugNodeWebsocketClientConnector"),i);return xT.ButtplugNodeWebsocketClientConnector=o,xT}__name(requireBrowser,"requireBrowser"),__name(requireButtplugNodeWebsocketClientConnector,"requireButtplugNodeWebsocketClientConnector");var wT,AT,CT={};function requireIButtplugClientConnector(){return wT||(wT=1,Object.defineProperty(CT,"__esModule",{value:!0})),CT}function requireSrc(){return AT||(AT=1,i=wb,a=wb&&wb.__createBinding||(Object.create?function(i,a,s,o){void 0===o&&(o=s);var u=Object.getOwnPropertyDescriptor(a,s);u&&!("get"in u?!a.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:/* @__PURE__ */__name(function(){return a[s]},"get")}),Object.defineProperty(i,o,u)}:function(i,a,s,o){void 0===o&&(o=s),i[o]=a[s]}),s=wb&&wb.__exportStar||function(i,s){for(var o in i)"default"===o||Object.prototype.hasOwnProperty.call(s,o)||a(s,i,o)},Object.defineProperty(i,"__esModule",{value:!0}),s(requireClient(),i),s(requireButtplugClientDevice(),i),s(requireButtplugBrowserWebsocketClientConnector(),i),s(requireButtplugNodeWebsocketClientConnector(),i),s(requireButtplugClientConnectorException(),i),s(requireButtplugMessageSorter(),i),s(requireIButtplugClientConnector(),i),s(requireMessages(),i),s(requireMessageUtils(),i),s(requireLogging(),i),s(requireExceptions(),i)),wb;var i,a,s}__name(requireIButtplugClientConnector,"requireIButtplugClientConnector"),__name(requireSrc,"requireSrc");var ET=requireSrc();const MT="scalar",kT="polar",PT={LINEAR:"linear",VIBRATE:"vibrate",OSCILLATE:"oscillate",ROTATE:"rotate"},IT={[PT.LINEAR]:MT,[PT.VIBRATE]:MT,[PT.OSCILLATE]:MT,[PT.ROTATE]:kT},LT=class _VirtualDevice{constructor(i=null){this.index=-1,this.name="Virtual Device",this.notify=i,this.messageTimingGap=0,this.actuatorConfig=[],this.messageAttributes={},this.setConfig("default"),this.commandCounts={total:0,byActuator:/* @__PURE__ */new Map,lastCommand:null,lastCommandTime:null},this.notify?.("status:virtual",{message:"Virtual Device initialized with default config",type:"success"})}setConfig(i){let a=[];if("string"==typeof i)a=this._getPresetConfig(i);else{if(!Array.isArray(i))return this.notify?.("status:virtual",{message:"Invalid config type. Use preset name or array",type:"error"}),!1;a=this._validateCustomConfig(i)}const s=[...this.actuatorConfig];return this.actuatorConfig=a,this._rebuildMessageAttributes(),this._resetCommandCounts(),this.notify?.("status:virtual",{message:`Config changed from ${s.length} to ${a.length} actuators`,type:"success"}),this.notify?.("buttplug:device",{device:this,configChanged:!0,oldConfig:s,newConfig:[...a]}),!0}_getPresetConfig(i){const a={default:[{capability:PT.LINEAR,name:"Main Stroke"},{capability:PT.VIBRATE,name:"Vibration"},{capability:PT.OSCILLATE,name:"Oscillation"},{capability:PT.ROTATE,name:"Rotation"}],simple:[{capability:PT.LINEAR,name:"Stroke"},{capability:PT.VIBRATE,name:"Buzz"}],stroker:[{capability:PT.LINEAR,name:"Main Stroke"}],"multi-vibe":[{capability:PT.VIBRATE,name:"Vibe 1"},{capability:PT.VIBRATE,name:"Vibe 2"},{capability:PT.VIBRATE,name:"Vibe 3"}],"full-featured":[{capability:PT.LINEAR,name:"Main Stroke"},{capability:PT.LINEAR,name:"Secondary"},{capability:PT.VIBRATE,name:"Tip Vibe"},{capability:PT.VIBRATE,name:"Base Vibe"},{capability:PT.ROTATE,name:"Twist"},{capability:PT.OSCILLATE,name:"Swing"}],rotator:[{capability:PT.ROTATE,name:"Main Rotation"},{capability:PT.VIBRATE,name:"Secondary Vibe"}]};return a[i]?(this.notify?.("status:virtual",{message:`Applied preset: ${i}`,type:"log"}),a[i]):(this.notify?.("status:virtual",{message:`Unknown preset '${i}', using 'default'`,type:"info"}),a.default)}_validateCustomConfig(i){const a=Object.values(PT);return i.map((i,s)=>i.capability&&a.includes(i.capability)?{capability:i.capability,name:i.name||`${i.capability} ${s}`,stepCount:i.stepCount||20,featureDescriptor:i.featureDescriptor||`Virtual ${i.capability}`}:(this.notify?.("status:virtual",{message:`Invalid capability for actuator ${s}, using linear`,type:"error"}),{capability:PT.LINEAR,name:`Actuator ${s}`}))}_rebuildMessageAttributes(){this.messageAttributes={};const i=[],a=[],s=[];this.actuatorConfig.forEach((o,u)=>{const _={Index:u,StepCount:o.stepCount||20,FeatureDescriptor:o.featureDescriptor||o.name};switch(o.capability){case PT.VIBRATE:i.push({..._,ActuatorType:"Vibrate"});break;case PT.OSCILLATE:i.push({..._,ActuatorType:"Oscillate"});break;case PT.LINEAR:a.push(_);break;case PT.ROTATE:s.push(_)}}),i.length>0&&(this.messageAttributes.ScalarCmd=i),a.length>0&&(this.messageAttributes.LinearCmd=a),s.length>0&&(this.messageAttributes.RotateCmd=s),this.messageAttributes.StopDeviceCmd={},this.notify?.("status:virtual",{message:`MessageAttributes rebuilt: ${Object.keys(this.messageAttributes).join(", ")}`,type:"log"})}async vibrate(i){return this._countCommand("ScalarCmd","Vibrate",i),Promise.resolve()}async oscillate(i){return this._countCommand("ScalarCmd","Oscillate",i),Promise.resolve()}async linear(i){return this._countCommand("LinearCmd",null,i),Promise.resolve()}async rotate(i){return this._countCommand("RotateCmd",null,i),Promise.resolve()}async stop(){return this._countCommand("StopDeviceCmd"),Promise.resolve()}getAllowedMessages(){return Object.keys(this.messageAttributes)}_countCommand(i,a=null,s=null){this.commandCounts.total++,this.commandCounts.lastCommand=i,this.commandCounts.lastCommandTime=Date.now();this._getAffectedActuators(i,a,s).forEach(i=>{this.commandCounts.byActuator.has(i)||this.commandCounts.byActuator.set(i,0),this.commandCounts.byActuator.set(i,this.commandCounts.byActuator.get(i)+1)})}_getAffectedActuators(i,a,s){const o=[];return"StopDeviceCmd"===i?this.actuatorConfig.map((i,a)=>a):(this.actuatorConfig.forEach((s,u)=>{let _=!1;"ScalarCmd"===i&&a?_="Vibrate"===a&&s.capability===PT.VIBRATE||"Oscillate"===a&&s.capability===PT.OSCILLATE:"LinearCmd"===i?_=s.capability===PT.LINEAR:"RotateCmd"===i&&(_=s.capability===PT.ROTATE),_&&o.push(u)}),o)}_resetCommandCounts(){this.commandCounts={total:0,byActuator:/* @__PURE__ */new Map,lastCommand:null,lastCommandTime:null},this.notify?.("status:virtual",{message:"Command counts reset",type:"log"})}getConfig(){return{actuatorCount:this.actuatorConfig.length,actuators:this.actuatorConfig.map((i,a)=>({index:a,capability:i.capability,name:i.name})),presets:this.getAvailablePresets()}}getAvailablePresets(){return["default","simple","stroker","multi-vibe","full-featured","rotator"]}addActuator(i,a=null){const s={capability:i,name:a||`${i} ${this.actuatorConfig.length}`,stepCount:20,featureDescriptor:`Virtual ${i}`};return this.actuatorConfig.push(s),this._rebuildMessageAttributes(),this.notify?.("status:virtual",{message:`Added ${i} actuator`,type:"success"}),this.notify?.("buttplug:device",{device:this,actuatorAdded:!0,newActuator:s}),!0}removeActuator(i){if(i<0||i>=this.actuatorConfig.length)return this.notify?.("status:virtual",{message:`Invalid actuator index ${i}`,type:"error"}),!1;const a=this.actuatorConfig.splice(i,1)[0];return this._rebuildMessageAttributes(),this._resetCommandCounts(),this.notify?.("status:virtual",{message:`Removed actuator ${i} (${a.capability})`,type:"success"}),this.notify?.("buttplug:device",{device:this,actuatorRemoved:!0,removedActuator:a}),!0}getCommandStats(){const i={};return this.commandCounts.byActuator.forEach((a,s)=>{const o=this.actuatorConfig[s];i[s]={count:a,capability:o?.capability||"unknown",name:o?.name||`Actuator ${s}`}}),{total:this.commandCounts.total,byActuator:i,lastCommand:this.commandCounts.lastCommand,lastCommandTime:this.commandCounts.lastCommandTime,actuatorCount:this.actuatorConfig.length}}resetCommandStats(){this._resetCommandCounts(),this.notify?.("status:virtual",{message:"Command stats reset",type:"info"})}getDebugInfo(){const i={config:this.getConfig(),stats:this.getCommandStats(),messageAttributes:this.messageAttributes,name:this.name,index:this.index};return this.notify?.("status:virtual",{message:"Debug info requested",type:"log"}),i}};__name(LT,"VirtualDevice");let DT=LT;const RT=class _Actuator{constructor(i,a,s={},o=null){this.index=i,this.type=IT[a],this.capability=a,this.notify=o,this.settings={enabled:!0,scale:1,invert:!1,timeOffset:0,range:[0,1],...s.settings},this.assignedChannel=null,this.previousMappedChannel=null,this.metadata={name:`Actuator ${i}`,featureDescriptor:"",stepCount:20,...s.metadata},this.notify?.("status:actuator",{message:`Actuator ${i} (${a}) initialized`,type:"log"})}plug(i){const a=i.plug(this);return a?(this.previousMappedChannel=i.name,this.notify?.("status:actuator",{message:`Actuator ${this.index} plugged to channel "${i.name}"`,type:"success"}),this.notify?.("actuator:plugged",{actuatorIndex:this.index,channelName:i.name,channel:{name:i.name,type:i.type,duration:i.duration},actuator:{index:this.index,type:this.type,capability:this.capability}})):this.notify?.("status:actuator",{message:`Failed to plug actuator ${this.index} to channel "${i.name}" (incompatible)`,type:"error"}),a}unplug(){if(this.assignedChannel){const i=this.assignedChannel.name;this.previousMappedChannel||(this.previousMappedChannel=i),this.assignedChannel.unplug(this),this.notify?.("status:actuator",{message:`Actuator ${this.index} unplugged from channel "${i}"`,type:"info"}),this.notify?.("actuator:unplugged",{actuatorIndex:this.index,channelName:i,actuator:{index:this.index,type:this.type,capability:this.capability}})}else this.notify?.("status:actuator",{message:`Actuator ${this.index} was not plugged to any channel`,type:"info"})}forgetPreviousMapping(){const i=this.previousMappedChannel;this.previousMappedChannel=null,this.notify?.("status:actuator",{message:`Actuator ${this.index} forgot previous mapping to "${i}"`,type:"info"}),this.notify?.("actuator:mappingForgotten",{actuatorIndex:this.index,forgottenChannelName:i,actuator:{index:this.index,type:this.type,capability:this.capability}})}canPlugTo(i){const a=this.settings.enabled&&this.type===i.type;return a||this.notify?.("status:actuator",{message:`Actuator ${this.index} incompatible with channel "${i.name}" (${this.type} vs ${i.type})`,type:"log"}),a}getAssignedChannelName(){return this.assignedChannel?this.assignedChannel.name:null}getPreviousMappedChannelName(){return this.previousMappedChannel}hasPreviousMapping(){return null!==this.previousMappedChannel}isPlugged(){return null!==this.assignedChannel}updateSettings(i){const a={...this.settings};this.settings={...this.settings,...i};const s=Object.keys(i);this.notify?.("status:actuator",{message:`Actuator ${this.index} settings updated: ${s.join(", ")}`,type:"log"}),this.notify?.("actuator:settingsChanged",{actuatorIndex:this.index,oldSettings:a,newSettings:{...this.settings},changes:s,actuator:{index:this.index,type:this.type,capability:this.capability,channelName:this.getAssignedChannelName()}})}resetSettings(){const i={...this.settings};this.settings={enabled:!0,scale:1,invert:!1,timeOffset:0,range:[0,1]},this.notify?.("status:actuator",{message:`Actuator ${this.index} settings reset to defaults`,type:"info"}),this.notify?.("actuator:settingsReset",{actuatorIndex:this.index,oldSettings:i,newSettings:{...this.settings},actuator:{index:this.index,type:this.type,capability:this.capability,channelName:this.getAssignedChannelName()}})}isCompatibleWith(i){return this.type===i.type}canProcess(i){return this.settings.enabled?this.assignedChannel&&this.assignedChannel!==i?(this.notify?.("status:actuator",{message:`Actuator ${this.index} cannot process: assigned to different channel`,type:"log"}),!1):this.isCompatibleWith(i):(this.notify?.("status:actuator",{message:`Actuator ${this.index} cannot process: disabled`,type:"log"}),!1)}processValue(i,a=1){if(!this.settings.enabled||null==i)return 0;let s=i;this.settings.invert&&(s=this.type===kT?-s:1-s),s*=this.settings.scale,s*=a;const[o,u]=this.settings.range;if(this.type===kT){const i=Math.abs(s),a=Math.max(0,Math.min(1,i));s=Math.sign(s)*a}else s=Math.max(0,Math.min(1,s));return s}generateCommand(i,a={}){if(!this.settings.enabled||0===i)return{capability:this.capability,value:0,options:{}};const s={capability:this.capability,value:i,options:{}};switch(this.capability){case PT.LINEAR:s.options.duration=a.duration||100;break;case PT.ROTATE:s.value=Math.abs(i),s.options.clockwise=i>=0}return s}process(i,a=1,s={}){const o=this.processValue(i,a);return this.generateCommand(o,s)}toConfig(){return{index:this.index,type:this.type,capability:this.capability,settings:{...this.settings},assignedChannelName:this.getAssignedChannelName(),previousMappedChannel:this.previousMappedChannel,metadata:{...this.metadata}}}fromConfig(i){i.settings&&(this.settings,this.settings={...this.settings,...i.settings},this.notify?.("status:actuator",{message:`Actuator ${this.index} loaded settings from config`,type:"log"})),i.metadata&&(this.metadata={...this.metadata,...i.metadata}),i.previousMappedChannel&&(this.previousMappedChannel=i.previousMappedChannel,this.notify?.("status:actuator",{message:`Actuator ${this.index} restored previous mapping to "${i.previousMappedChannel}"`,type:"log"}))}getDebugInfo(){return{index:this.index,type:this.type,capability:this.capability,settings:{...this.settings},assignedChannel:this.assignedChannel?{name:this.assignedChannel.name,type:this.assignedChannel.type,duration:this.assignedChannel.duration}:null,previousMappedChannel:this.previousMappedChannel,isPlugged:this.isPlugged(),hasPreviousMapping:this.hasPreviousMapping(),metadata:{...this.metadata}}}toString(){const i=this.getAssignedChannelName()||"unassigned",a=this.settings.enabled?"enabled":"disabled",s=this.isPlugged()?"plugged":"unplugged",o=this.previousMappedChannel?` (prev: ${this.previousMappedChannel})`:"";return`Actuator[${this.index}](${this.capability}, ${this.type}, ${a}, ${s} to ${i}${o})`}};__name(RT,"Actuator");let OT=RT;const NT=class _ButtPlugManager{constructor(i){__publicField(this,"_sendScalarCommand",/* @__PURE__ */__name(async(i,a,s=null)=>{if(!this.selectedDevice)throw new Error("No device selected");const o=i===ET.ActuatorType.Vibrate?PT.VIBRATE:PT.OSCILLATE;if(null===this._resolveActuatorIndex(o,s))throw new Error(`No ${i} actuator available`);try{const s=Math.max(0,Math.min(1,a));return i===ET.ActuatorType.Vibrate?await this.selectedDevice.vibrate(s):i===ET.ActuatorType.Oscillate&&await this.selectedDevice.oscillate(s),!0}catch(u){return this.notify?.("status:buttplug",{message:`${i} command failed: ${u.message}`,type:"log"}),!1}},"_sendScalarCommand")),__publicField(this,"_resolveActuatorIndex",/* @__PURE__ */__name((i,a)=>{if(null!=a){const s=this.getActuator(a);return s&&s.capability===i?a:null}const s=this.getActuatorsByCapability(i);return s.length>0?s[0].index:null},"_resolveActuatorIndex")),__publicField(this,"_resetDevice",/* @__PURE__ */__name(()=>{this.selectedDevice=this.virtualDevice,this._initActuators(),this._notifyDeviceChanged(this.virtualDevice)},"_resetDevice")),__publicField(this,"_resetConnectionState",/* @__PURE__ */__name(()=>{this.isConnected=!1,this.isScanning=!1,this.devices.clear(),this.devices.set(-1,this.virtualDevice),this.throttleMap.clear(),this._resetDevice(),this.notify?.("buttplug:connection",{connected:!1})},"_resetConnectionState")),__publicField(this,"_onDeviceAdded",/* @__PURE__ */__name(i=>{this.devices.set(i.index,i),this.notify?.("status:buttplug",{message:`Device connected: ${i.name}`,type:"success"}),this.notify?.("buttplug:device",{device:void 0})},"_onDeviceAdded")),__publicField(this,"_onDeviceRemoved",/* @__PURE__ */__name(i=>{this.devices.delete(i.index),this.selectedDevice?.index===i.index&&this.selectDevice(-1),this.notify?.("status:buttplug",{message:`Device disconnected: ${i.name}`,type:"info"}),this.notify?.("buttplug:device",{device:void 0})},"_onDeviceRemoved")),__publicField(this,"_onDisconnect",/* @__PURE__ */__name(()=>{this.notify?.("status:buttplug",{message:"Lost connection to Intiface Central",type:"error"}),this._resetConnectionState()},"_onDisconnect")),this.notify=i,this.client=null,this.connector=null,this.initialized=!1,this.intifaceUrl="ws://localhost:12345",this.devices=/* @__PURE__ */new Map,this.isConnected=!1,this.isScanning=!1,this.virtualDevice=new DT(this.notify),this.devices.set(-1,this.virtualDevice),this.selectedDevice=this.virtualDevice,this.actuators=[],this._initActuators(),this.globalScale=1,this.globalOffset=0,this.throttleMap=/* @__PURE__ */new Map,this.minCommandInterval=16}async init(){if(this.initialized)return!0;try{return this.notify?.("status:buttplug",{message:"Initializing ButtPlug client...",type:"processing"}),this.client=new ET.ButtplugClient("FunPlayer"),this.connector=new ET.ButtplugBrowserWebsocketClientConnector(this.intifaceUrl),this.client.addListener("deviceadded",this._onDeviceAdded),this.client.addListener("deviceremoved",this._onDeviceRemoved),this.client.addListener("disconnect",this._onDisconnect),this.initialized=!0,this.notify?.("status:buttplug",{message:"ButtPlug client initialized successfully",type:"log"}),!0}catch(i){return this.notify?.("status:buttplug",{message:"Failed to initialize ButtPlug client",type:"error",error:i.message||String(i)}),this.notify?.("buttplug:error",{message:"Initialization failed",error:i.message||String(i)}),!1}}async connect(i=null){if(this.isConnected)return!0;const a=i||this.intifaceUrl;if(!this.initialized){if(!(await this.init()))return!1}this.connector._url!==a&&(this.connector=new ET.ButtplugBrowserWebsocketClientConnector(a));try{this.notify?.("status:buttplug",{message:`Connecting to ${a}...`,type:"processing"}),await this.client.connect(this.connector),this.isConnected=!0,i&&i!==this.intifaceUrl&&this.setIntifaceUrl(i);const s=this.client.devices;return s.forEach(i=>{this.devices.set(i.index,i)}),this.notify?.("status:buttplug",{message:"Connected to Intiface Central",type:"success"}),this.notify?.("status:buttplug",{message:`Found ${s.length} existing devices (+ Virtual)`,type:"log"}),this.notify?.("buttplug:connection",{connected:!0}),!0}catch(s){return this.notify?.("status:buttplug",{message:"Failed to connect to Intiface Central",type:"error",error:s.message||String(s)}),this.notify?.("buttplug:error",{message:"Connection failed",error:s.message||String(s)}),!1}}async scan(i=5e3){if(!this.isConnected||this.isScanning)return[];try{this.isScanning=!0;const a=new Set(this.devices.keys());this.notify?.("status:buttplug",{message:"Scanning for devices...",type:"processing"}),await this.client.startScanning(),await new Promise(a=>setTimeout(a,i)),await this.client.stopScanning();this.client.devices.forEach(i=>{this.devices.set(i.index,i)});const s=Array.from(this.devices.values()).filter(i=>!a.has(i.index));return s.length>0?this.notify?.("status:buttplug",{message:`Found ${s.length} new device(s)`,type:"success"}):this.notify?.("status:buttplug",{message:"No new devices found",type:"info"}),s}catch(a){return this.notify?.("status:buttplug",{message:"Device scan failed",type:"error",error:a.message||String(a)}),[]}finally{this.isScanning=!1}}async disconnect(){if(this.isConnected){try{this.client&&await this.client.disconnect(),this.notify?.("status:buttplug",{message:"Disconnected from Intiface Central",type:"info"})}catch(i){this.notify?.("status:buttplug",{message:`Disconnect error: ${i.message}`,type:"log"})}this._resetConnectionState()}}selectDevice(i){if(null==i)return this.selectDevice(-1);const a=this.devices.get(i);if(!a)return this.notify?.("status:buttplug",{message:`Device ${i} not found`,type:"error"}),!1;this.selectedDevice=a,this._initActuators();const s=-1===i?"Virtual Device":a.name;return this.notify?.("status:buttplug",{message:`Selected: ${s}`,type:"success"}),this.notify?.("buttplug:device",{device:a}),!0}_initActuators(){this.actuators.forEach(i=>i.unplug()),this.actuators=[],this.selectedDevice&&(this.actuators=this._buildActuators(this.selectedDevice),this.notify?.("status:buttplug",{message:`Built ${this.actuators.length} actuators for ${this.selectedDevice.name}`,type:"log"}))}_buildActuators(i){const a=i.messageAttributes,s=[];return this.notify?.("status:buttplug",{message:`Building actuators for device: ${i.name}`,type:"log"}),this.notify?.("status:buttplug",{message:`Device messageAttributes: ${JSON.stringify(a)}`,type:"log"}),a.ScalarCmd&&a.ScalarCmd.forEach(a=>{let o;if(this.notify?.("status:buttplug",{message:`Processing ScalarCmd attr: ${JSON.stringify(a)}`,type:"log"}),a.ActuatorType===ET.ActuatorType.Vibrate?(this.notify?.("status:buttplug",{message:"Matched Vibrate actuator",type:"log"}),o=PT.VIBRATE):a.ActuatorType===ET.ActuatorType.Oscillate?(this.notify?.("status:buttplug",{message:"Matched Oscillate actuator",type:"log"}),o=PT.OSCILLATE):this.notify?.("status:buttplug",{message:`No match for ActuatorType: ${a.ActuatorType}`,type:"log"}),o){this.notify?.("status:buttplug",{message:`Creating actuator with capability: ${o}`,type:"log"});const u=new OT(a.Index,o,{metadata:{name:`${i.name} #${a.Index}`,featureDescriptor:a.FeatureDescriptor||"",stepCount:a.StepCount||20}},this.notify);s.push(u)}}),a.LinearCmd&&a.LinearCmd.forEach(a=>{this.notify?.("status:buttplug",{message:`Processing LinearCmd attr: ${JSON.stringify(a)}`,type:"log"});const o=new OT(a.Index,PT.LINEAR,{metadata:{name:`${i.name} #${a.Index}`,featureDescriptor:a.FeatureDescriptor||"",stepCount:a.StepCount||20}},this.notify);s.push(o)}),a.RotateCmd&&a.RotateCmd.forEach(a=>{this.notify?.("status:buttplug",{message:`Processing RotateCmd attr: ${JSON.stringify(a)}`,type:"log"});const o=new OT(a.Index,PT.ROTATE,{metadata:{name:`${i.name} #${a.Index}`,featureDescriptor:a.FeatureDescriptor||"",stepCount:a.StepCount||20}},this.notify);s.push(o)}),s.sort((i,a)=>i.index-a.index),this.notify?.("status:buttplug",{message:`Final actuators array: ${s.length} actuators`,type:"log"}),s}getActuators(){return[...this.actuators]}getActuator(i){return this.actuators.find(a=>a.index===i)||null}getActuatorsByCapability(i){return this.actuators.filter(a=>a.capability===i)}setActuatorSettings(i,a){const s=this.getActuator(i);return!!s&&(s.updateSettings(a),this.notify?.("buttplug:actuatorOptions",{actuatorIndex:i,options:s.settings}),!0)}getActuatorSettings(i){const a=this.getActuator(i);return a?{...a.settings}:null}plugChannelToActuator(i,a){const s=this.getActuator(a);if(!s)return!1;const o=i.plug(s);return o&&this.notify?.("buttplug:mapping",{channel:i.name,actuatorIndex:a}),o}unplugChannelFromActuator(i,a){const s=this.getActuator(a);return!!s&&(i.unplug(s),this.notify?.("buttplug:mapping",{channel:i.name,actuatorIndex:null}),!0)}unplugAllChannels(){this.actuators.forEach(i=>i.unplug()),this.notify?.("buttplug:mapping",{channel:null,actuatorIndex:null})}setGlobalScale(i){const a="number"==typeof i?Math.max(0,Math.min(5,i)):1;this.globalScale!==a&&(this.globalScale=a,this.notify?.("buttplug:globalScale",{scale:a}))}getGlobalScale(){return this.globalScale}setGlobalOffset(i){const a="number"==typeof i?i:0;this.globalOffset!==a&&(this.globalOffset=a,this.notify?.("buttplug:globalOffset",{offset:a}))}getGlobalOffset(){return this.globalOffset}getTimeWithOffsets(i){const a=/* @__PURE__ */new Map;for(const s of this.actuators)if(s.isPlugged()&&s.settings.enabled){const o=s.assignedChannel,u=i+this.globalOffset+s.settings.timeOffset;a.set(o.name,u)}return a}async processChannels(i){if(!this.selectedDevice)/* @__PURE__ */
return new Map;const a=/* @__PURE__ */new Map;for(const s of this.actuators)if(s.isPlugged()&&s.settings.enabled){const o=i[s.assignedChannel.name];if(null!=o){const i=s.process(o,this.globalScale);await this.sendThrottled(s.capability,i.value,s.index,i.options),a.set(s.index,{value:i.value,type:s.capability})}}return a}async vibrate(i,a=null){return this._sendScalarCommand(ET.ActuatorType.Vibrate,i,a)}async oscillate(i,a=null){return this._sendScalarCommand(ET.ActuatorType.Oscillate,i,a)}async linear(i,a=100,s=null){if(!this.selectedDevice)throw new Error("No device selected");if(null===this._resolveActuatorIndex(PT.LINEAR,s))throw new Error("No linear actuator available");try{const s=Math.max(0,Math.min(1,i)),o=Math.max(1,Math.min(2e4,a));return await this.selectedDevice.linear([[s,o]]),!0}catch(o){return this.notify?.("status:buttplug",{message:`Linear command failed: ${o.message}`,type:"log"}),!1}}async rotate(i,a=null){if(!this.selectedDevice)throw new Error("No device selected");if(null===this._resolveActuatorIndex(PT.ROTATE,a))throw new Error("No rotate actuator available");try{const a=Math.abs(i),s=i>=0;return await this.selectedDevice.rotate([[a,s]]),!0}catch(s){return this.notify?.("status:buttplug",{message:`Rotate command failed: ${s.message}`,type:"log"}),!1}}async sendThrottled(i,a,s,o={}){const u=Date.now(),_=`${i}-${s}`;if(u-(this.throttleMap.get(_)||0)<this.minCommandInterval&&!o.force)return!0;this.throttleMap.set(_,u);try{switch(i){case PT.VIBRATE:return await this.vibrate(a,s);case PT.OSCILLATE:return await this.oscillate(a,s);case PT.LINEAR:return await this.linear(a,o.duration||100,s);case PT.ROTATE:return await this.rotate(a,s);default:return this.notify?.("status:buttplug",{message:`Unknown capability: ${i}`,type:"log"}),!1}}catch(x){return!1}}async stopAll(){if(this.isConnected&&this.client)try{await this.client.stopAllDevices(),this.notify?.("status:buttplug",{message:"All devices stopped",type:"log"})}catch(i){this.notify?.("status:buttplug",{message:`Stop all failed: ${i.message}`,type:"log"})}}getDevices(){return Array.from(this.devices.values())}getSelected(){return this.selectedDevice}getDeviceInfo(){return this.selectedDevice?{deviceName:this.selectedDevice.name,deviceIndex:this.selectedDevice.index,actuatorCount:this.actuators.length,actuators:this.actuators.map(i=>({index:i.index,type:i.type,capability:i.capability,enabled:i.settings.enabled,assignedChannel:i.getAssignedChannelName(),metadata:i.metadata})),messageTimingGap:this.selectedDevice.messageTimingGap||0}:null}getStatus(){return{isConnected:this.isConnected,isScanning:this.isScanning,deviceCount:this.devices.size,selectedDevice:this.selectedDevice?{index:this.selectedDevice.index,name:this.selectedDevice.name}:null,actuatorCount:this.actuators.length,globalScale:this.globalScale,globalOffset:this.globalOffset,config:{intifaceUrl:this.intifaceUrl}}}setIntifaceUrl(i){const a=this._validateAndCleanUrl(i);if(this.intifaceUrl!==a){const i=this.isConnected,s=this.intifaceUrl;this.intifaceUrl=a,this.connector&&this.connector._url!==a&&(this.connector=new ET.ButtplugBrowserWebsocketClientConnector(a)),this.notify?.("status:buttplug",{message:`URL changed: ${s} → ${a}`,type:"log"}),this.notify?.("buttplug:config",{key:"intifaceUrl",data:{oldUrl:s,newUrl:a,wasConnected:i}})}}getIntifaceUrl(){return this.intifaceUrl}_validateAndCleanUrl(i){if(!i||"string"!=typeof i)return"ws://localhost:12345";let a=i.trim();a.startsWith("ws://")||a.startsWith("wss://")||(a="ws://"+a);try{const i=new URL(a);i.port||(i.port="12345",a=i.toString())}catch(s){return this.notify?.("status:buttplug",{message:`Invalid WebSocket URL, using default: ${i}`,type:"log"}),"ws://localhost:12345"}return a}async cleanup(){if(this.isConnected&&this.client)try{await this.client.stopAllDevices()}catch(i){this.notify?.("status:buttplug",{message:`Stop all devices failed during cleanup: ${i.message}`,type:"log"})}if(this.isConnected&&this.client)try{await this.client.disconnect()}catch(i){this.notify?.("status:buttplug",{message:`Disconnect failed during cleanup: ${i.message}`,type:"log"})}if(this.client){try{this.client.removeAllListeners()}catch(i){this.notify?.("status:buttplug",{message:`Remove listeners failed during cleanup: ${i.message}`,type:"log"})}this.client=null}this.connector=null,this.throttleMap.clear(),this.actuators.forEach(i=>i.unplug()),this.actuators=[],this.initialized=!1,this.isConnected=!1,this.isScanning=!1,this.devices.clear(),this.devices.set(-1,this.virtualDevice),this._resetDevice(),this.notify?.("status:buttplug",{message:"ButtPlug cleanup completed",type:"log"})}};__name(NT,"ButtPlugManager");let BT=NT;const FT=class _Channel{constructor(i,a,s={},o={},u=null){if(!i||"string"!=typeof i)throw new Error("Channel name must be a non-empty string");if(this.name=i,this.metadata=o,this.notify=u,this.fieldConfig={timeField:"at",valueField:"pos",directionField:null,durationField:null,...s},!this.fieldConfig.timeField||!this.fieldConfig.valueField)throw new Error(`Channel "${i}": timeField and valueField must be specified`);this.interpolationCache={leftIndex:0,rightIndex:1,lastTime:-1},this.seekThreshold=1e3,this.connectedActuators=/* @__PURE__ */new Map,this.notify?.("status:channel",{message:`Creating channel "${i}"...`,type:"log"}),this.actions=this._processActions(a),this.likelyCapability=this._determineLikelyCapability(),this.type=this._determineType(),this.duration=this._calculateDuration(),this.averageIntervalMs=this.actions.length>1?1e3*this.duration/(this.actions.length-1):100,this.valueRange=this._calculateValueRange(),this.notify?.("status:channel",{message:`Channel "${i}" created: ${this.type} type, likely_capability: ${this.likelyCapability}, ${this.actions.length} actions, ${this.duration.toFixed(2)}s`,type:"success"})}_determineLikelyCapability(){if(this.metadata.capability)return this.notify?.("status:channel",{message:`Channel "${this.name}": Using explicit capability from metadata: ${this.metadata.capability}`,type:"log"}),this.metadata.capability;const i=this._heuristicCapabilityAnalysis(),a=this._validateCapabilityWithContext(i);return this.notify?.("status:channel",{message:`Channel "${this.name}": Likely capability determined as "${a}" (from heuristic: "${i}")`,type:"log"}),a}_heuristicCapabilityAnalysis(){const i=this.name.toLowerCase(),a=[{capability:PT.ROTATE,regex:/^(rot|rotat|twist|spin|turn|roll|angle|pitch|yaw)$/i},{capability:PT.LINEAR,regex:/^(pos|position|stroke|linear|up|down|vertical|y)$/i},{capability:PT.OSCILLATE,regex:/^(osc|oscill|swing|wave|sway)$/i},{capability:PT.VIBRATE,regex:/^(vib|vibr|vibrat|buzz|rumble|shake)$/i},{capability:PT.VIBRATE,regex:/^(squeeze|constrict|pressure|grip|clamp)$/i},{capability:PT.VIBRATE,regex:/^(suck|suction|vacuum|pump)$/i}];for(const{capability:s,regex:o}of a)if(o.test(i))return this.notify?.("status:channel",{message:`Channel "${this.name}": Pattern match for ${s}`,type:"log"}),s;return this._inferCapabilityFromFieldConfig()}_inferCapabilityFromFieldConfig(){if(this.fieldConfig.directionField)return this.notify?.("status:channel",{message:`Channel "${this.name}": Direction field detected, suggesting rotate`,type:"log"}),PT.ROTATE;if(this.fieldConfig.durationField)return this.notify?.("status:channel",{message:`Channel "${this.name}": Duration field detected, suggesting linear`,type:"log"}),PT.LINEAR;const i=this.fieldConfig.valueField.toLowerCase();return i.includes("speed")||i.includes("spd")?(this.notify?.("status:channel",{message:`Channel "${this.name}": Speed field detected, suggesting rotate`,type:"log"}),PT.ROTATE):i.includes("pos")||i.includes("position")?(this.notify?.("status:channel",{message:`Channel "${this.name}": Position field detected, suggesting linear`,type:"log"}),PT.LINEAR):(this.notify?.("status:channel",{message:`Channel "${this.name}": No clear indicators, defaulting to linear`,type:"log"}),PT.LINEAR)}_validateCapabilityWithContext(i){const a=this.actions.some(i=>i.value<0),s=!!this.fieldConfig.directionField;return i!==PT.ROTATE||s||a?i===PT.LINEAR&&s?(this.notify?.("status:channel",{message:`Channel "${this.name}": Linear detected but has direction field, upgrading to rotate`,type:"log"}),PT.ROTATE):i:(this.notify?.("status:channel",{message:`Channel "${this.name}": Rotate detected but no rotation data, downgrading to linear`,type:"warning"}),PT.LINEAR)}plug(i){return this.canPlugTo(i)?(i.assignedChannel&&i.assignedChannel!==this&&i.assignedChannel.unplug(i),this.connectedActuators.set(i.index,i),i.assignedChannel=this,i.previousMappedChannel=this.name,this.notify?.("status:channel",{message:`Channel "${this.name}" plugged to actuator ${i.index} (${i.capability})`,type:"success"}),this.notify?.("channel:plugged",{channelName:this.name,actuatorIndex:i.index,actuator:{index:i.index,type:i.type,capability:i.capability},connectedCount:this.connectedActuators.size}),!0):(this.notify?.("status:channel",{message:`Cannot plug actuator ${i.index} to channel "${this.name}" (incompatible: ${i.type} vs ${this.type})`,type:"error"}),!1)}unplug(i){this.connectedActuators.get(i.index)===i?(this.connectedActuators.delete(i.index),i.assignedChannel===this&&(i.assignedChannel=null),this.notify?.("status:channel",{message:`Channel "${this.name}" unplugged from actuator ${i.index}`,type:"info"}),this.notify?.("channel:unplugged",{channelName:this.name,actuatorIndex:i.index,actuator:{index:i.index,type:i.type,capability:i.capability},connectedCount:this.connectedActuators.size})):this.notify?.("status:channel",{message:`Actuator ${i.index} was not connected to channel "${this.name}"`,type:"warning"})}unplugAll(){Array.from(this.connectedActuators.values()).forEach(i=>this.unplug(i))}canPlugTo(i){return i.settings.enabled&&this.type===i.type}getConnectedActuators(){return Array.from(this.connectedActuators.values())}getLikelyCapability(){return this.likelyCapability}getMetadata(){return{...this.metadata}}hasActions(){return this.actions.length>0}getActionCount(){return this.actions.length}_processActions(i){if(!Array.isArray(i)||0===i.length)return this.notify?.("status:channel",{message:`Channel "${this.name}": No actions provided`,type:"error"}),[];this.notify?.("status:channel",{message:`Channel "${this.name}": Processing ${i.length} raw actions...`,type:"log"});const{timeField:a,valueField:s,directionField:o}=this.fieldConfig,u=[];for(const[w,C]of i.entries()){const i=C[a];let _=C[s];if(o&&void 0!==C[o]){const i=C[o],a=Math.abs(_);if(_<0&&this.notify?.("status:channel",{message:`Channel "${this.name}": Negative value with direction field, applying Math.abs()`,type:"warning"}),"boolean"==typeof i)_=i?a:-a;else if("string"==typeof i){_=["cw","clockwise","right","positive","+","true","1"].includes(i.toLowerCase())?a:-a}else"number"==typeof i?_=i>=0?a:-a:(this.notify?.("status:channel",{message:`Channel "${this.name}": Invalid direction "${i}", using absolute value`,type:"warning"}),_=a)}if("number"==typeof i&&"number"==typeof _){const x={...C};delete x[a],delete x[s],o&&delete x[o],u.push({time:i,value:_,metadata:x})}else this.notify?.("status:channel",{message:`Channel "${this.name}": Invalid action at index ${w} (time: ${typeof i}, value: ${typeof _})`,type:"log"})}if(0===u.length)throw this.notify?.("status:channel",{message:`Channel "${this.name}": No valid actions found. Check "${a}" and "${s}" fields`,type:"error"}),new Error(`Channel "${this.name}": No valid actions. Check "${a}" and "${s}" fields.`);u.sort((i,a)=>i.time-a.time);const _=Math.max(...u.map(i=>Math.abs(i.value))),x=_>0?1/_:1;return this.notify?.("status:channel",{message:`Channel "${this.name}": ${u.length} valid actions, normalization factor: ${x.toFixed(3)}`,type:"log"}),u.map(({time:i,value:a,metadata:s})=>({time:i,value:a*x,metadata:s}))}_determineType(){if(0===this.actions.length)return MT;if(this.fieldConfig.directionField)return this.notify?.("status:channel",{message:`Channel "${this.name}": Type determined as POLAR (has direction field)`,type:"log"}),kT;const i=this.actions.some(i=>i.value<0),a=i?kT:MT;return this.notify?.("status:channel",{message:`Channel "${this.name}": Type determined as ${a} (${i?"has negative values":"all positive values"})`,type:"log"}),a}_calculateDuration(){const i=this.actions.length>0?this.actions[this.actions.length-1].time/1e3:0;return this.notify?.("status:channel",{message:`Channel "${this.name}": Duration calculated as ${i.toFixed(2)}s`,type:"log"}),i}_calculateValueRange(){if(0===this.actions.length)return[0,0];const i=this.actions.map(i=>i.value),a=[Math.min(...i),Math.max(...i)];return this.notify?.("status:channel",{message:`Channel "${this.name}": Value range: [${a[0].toFixed(3)}, ${a[1].toFixed(3)}]`,type:"log"}),a}interpolateAt(i){if(0===this.actions.length)return 0;const a=1e3*i;if(a<=this.actions[0].time)return 0;if(a>=this.actions[this.actions.length-1].time)return 0;const{leftIndex:s,rightIndex:o,lastTime:u}=this.interpolationCache;(a<this.actions[s].time||a>=this.actions[o].time)&&this._updateInterpolationCache(a);const _=this.actions[this.interpolationCache.leftIndex],x=this.actions[this.interpolationCache.rightIndex],w=(a-_.time)/(x.time-_.time),C=_.value+w*(x.value-_.value);return this.interpolationCache.lastTime=a,C}_updateInterpolationCache(i){const{leftIndex:a,rightIndex:s,lastTime:o}=this.interpolationCache;o>=0&&Math.abs(i-o)<=this.seekThreshold&&this._tryIncrementalSlide(i)||this._performBinarySearch(i)}_tryIncrementalSlide(i){let{leftIndex:a,rightIndex:s}=this.interpolationCache;const o=this.seekThreshold/this.averageIntervalMs;let u=0;for(;i<this.actions[a]?.time&&a>0&&u<o;)a--,s--,u++;for(;i>=this.actions[s]?.time&&s<this.actions.length-1&&u<o;)a++,s++,u++;return!!(a>=0&&s<this.actions.length&&a<s&&i>=this.actions[a].time&&i<this.actions[s].time)&&(this.interpolationCache.leftIndex=a,this.interpolationCache.rightIndex=s,!0)}_performBinarySearch(i){const{leftIndex:a,rightIndex:s}=this.interpolationCache;let o,u;i<this.actions[a]?.time?(o=0,u=a):i>this.actions[s]?.time?(o=s,u=this.actions.length-1):(o=a,u=s);let _=o,x=u;for(;x-_>1;){const a=Math.floor((_+x)/2);this.actions[a].time<=i?_=a:x=a}this.interpolationCache.leftIndex=_,this.interpolationCache.rightIndex=x}getDebugInfo(){const i={name:this.name,type:this.type,likelyCapability:this.likelyCapability,duration:this.duration,actionCount:this.actions.length,valueRange:this.valueRange,fieldConfig:{...this.fieldConfig},metadata:{...this.metadata},connectedActuators:Object.fromEntries(Array.from(this.connectedActuators.entries()).map(([i,a])=>[i,{index:a.index,type:a.type,enabled:a.settings.enabled}])),sampleActions:this.actions.slice(0,3).map(i=>({...i,metadata:i.metadata?i.metadata:void 0})),cache:{...this.interpolationCache}};return i}toString(){const i=`${this.fieldConfig.valueField}${this.fieldConfig.directionField?"+"+this.fieldConfig.directionField:""}`,a=this.connectedActuators.size;return`Channel[${this.name}](${this.type}/${this.likelyCapability}, ${i}, ${this.actions.length} actions, ${this.duration.toFixed(2)}s, ${a} actuators)`}};__name(FT,"Channel");let UT=FT;const jT=class _FunscriptManager{constructor(i){this.notify=i,this.data=null,this.channels=[],this.duration=0,this.customFieldConfig=null}async loadFromSource(i){try{let a;return this.notify?.("status:funscript",{message:"Loading funscript from source...",type:"processing"}),a="string"==typeof i?i.startsWith("http")||i.startsWith("/")?await this._fetchWithCorsProxy(i):JSON.parse(i):i,this.load(a)}catch(a){throw this.notify?.("status:funscript",{message:"Failed to load funscript from source",type:"error",error:a.message}),a}}load(i){try{return this.notify?.("status:funscript",{message:"Processing funscript data...",type:"processing"}),this.data="string"==typeof i?JSON.parse(i):i,this._extractChannels(),this._calculateDuration(),this.notify?.("status:funscript",{message:`Loaded ${this.channels.length} channels, ${this.duration.toFixed(2)}s`,type:"success"}),this.notify?.("status:funscript",{message:`Channel extraction complete: ${this.channels.map(i=>i.name).join(", ")}`,type:"log"}),this.notify?.("funscript:load",{data:this.data,channels:this.channels.map(i=>i.name),channelInstances:this.channels,duration:this.duration}),this.notify?.("funscript:channels",{channels:this.channels.map(i=>i.name),channelInstances:this.channels,total:this.channels.length}),!0}catch(a){return this.notify?.("status:funscript",{message:"Failed to process funscript",type:"error",error:a.message}),this._reset(),!1}}loadWithCustomFieldConfig(i,a=null){return this.customFieldConfig=a,this.load(i)}async loadFromPlaylistItem(i){if(!i)return this.reset(),!0;try{return this.notify?.("status:funscript",{message:`Loading funscript for item: ${i.name||"Untitled"}`,type:"processing"}),i.funscript?("object"==typeof i.funscript?this.load(i.funscript):await this.loadFromSource(i.funscript),this.notify?.("status:funscript",{message:`Funscript loaded for: ${i.name||"Untitled"}`,type:"success"})):(this.reset(),this.notify?.("status:funscript",{message:"No funscript for current item",type:"info"})),!0}catch(a){return this.notify?.("status:funscript",{message:`Failed to load funscript from playlist item: ${a.message}`,type:"error"}),this.reset(),!1}}async _fetchWithCorsProxy(i){try{const a=await fetch(i);if(!a.ok)throw new Error(`HTTP ${a.status}`);return await a.json()}catch(a){try{const a=`https://corsproxy.io/?${encodeURIComponent(i)}`,s=await fetch(a);if(!s.ok)throw new Error(`HTTP ${s.status}`);return await s.json()}catch(s){throw new Error(`Failed to fetch funscript. Direct: ${a.message}, Proxy: ${s.message}`)}}}hasFunscript(){return this.channels.length>0}reset(){this._reset(),this.notify?.("status:funscript",{message:"Funscript manager reset",type:"info"}),this.notify?.("funscript:reset",{})}_reset(){this.channels.forEach(i=>i.unplugAll()),this.data=null,this.channels=[],this.duration=0,this.customFieldConfig=null}getChannels(){return[...this.channels]}getChannelNames(){return this.channels.map(i=>i.name)}getChannel(i){return this.channels.find(a=>a.name===i)||null}hasChannel(i){return null!==this.getChannel(i)}getChannelsByType(i){return this.channels.filter(a=>a.type===i)}getDuration(){return this.duration}interpolateAll(i){const a={};for(const[s,o]of Object.entries(i)){const i=this.getChannel(s);if(i){const u=i.interpolateAt(o);null!=u&&(a[s]=u)}}return a}autoMapChannels(i){if(0===this.channels.length)return this.notify?.("status:funscript",{message:"No channels available for auto-mapping",type:"info"}),{suggestions:[],mapped:0,total:0,mode:"no channels"};if(!i||0===i.length)return this.notify?.("status:funscript",{message:"No actuators available for auto-mapping",type:"info"}),{suggestions:[],mapped:0,total:this.channels.length,mode:"no actuators"};this.notify?.("status:funscript",{message:`Starting auto-mapping for ${this.channels.length} channels with ${i.length} actuators...`,type:"processing"});const a=[];let s=0;for(const u of this.channels){const o=this._findBestActuatorMatch(u,i);o?(a.push({channelName:u.name,actuatorIndex:o.index,confidence:"high",reason:`${u.likelyCapability} match`}),s++):this.notify?.("status:funscript",{message:`No compatible actuator found for channel "${u.name}" (${u.type}, likely: ${u.likelyCapability})`,type:"warning"})}const o=s===this.channels.length?"complete":s>0?"partial":"none";return this.notify?.("status:funscript",{message:`Auto-mapping complete: ${s}/${this.channels.length} channels mapped`,type:s>0?"success":"warning"}),{suggestions:a,mapped:s,total:this.channels.length,mode:o}}_findBestActuatorMatch(i,a){const s=a.filter(a=>a.settings.enabled&&i.canPlugTo(a));if(0===s.length)return this.notify?.("status:funscript",{message:`No compatible actuators for channel "${i.name}" (${i.type})`,type:"log"}),null;const o=s.find(a=>a.capability===i.likelyCapability);if(o)return this.notify?.("status:funscript",{message:`Perfect match: ${i.name} → ${o.capability} (likely_capability match)`,type:"log"}),o;const u=["linear","vibrate","oscillate","rotate"];for(const x of u){const a=s.find(i=>i.capability===x);if(a)return this.notify?.("status:funscript",{message:`Fallback mapping: ${i.name} → ${x} (priority order)`,type:"log"}),a}const _=s[0]||null;return _&&this.notify?.("status:funscript",{message:`Last resort mapping: ${i.name} → ${_.capability} (first available)`,type:"log"}),_}_extractChannels(){this.channels=[],this.notify?.("status:funscript",{message:"Extracting channels from funscript data...",type:"processing"});const i=this._extractMetadata();if(this.data.actions?.length){const a=this._createChannelFromActions("pos",this.data.actions,i);a&&(this.channels.push(a),this.notify?.("status:funscript",{message:`Found main channel: ${a.name} (${this.data.actions.length} actions)`,type:"log"}))}if(this._extractMultiAxisChannels(i),this.data.tracks){this.notify?.("status:funscript",{message:`Processing ${Object.keys(this.data.tracks).length} nested tracks...`,type:"log"});for(const[a,s]of Object.entries(this.data.tracks))if(s.actions?.length){const o={...i,...s.metadata},u=this._createChannelFromActions(a,s.actions,o);u&&(this.channels.push(u),this.notify?.("status:funscript",{message:`Found track channel: ${u.name} (${s.actions.length} actions)`,type:"log"}))}}if(0===this.channels.length)throw new Error("No valid channels found in funscript data");this.notify?.("status:funscript",{message:`Channel extraction complete: ${this.channels.length} channels created`,type:"success"})}_extractMultiAxisChannels(i){this.notify?.("status:funscript",{message:"Scanning for multi-axis channels...",type:"log"});let a=0;for(const[s,o]of Object.entries(this.data))if(this._isActionArray(o)){if("actions"===s)continue;const u=this._createChannelFromActions(s,o,i);u&&(this.channels.push(u),a++)}a>0&&this.notify?.("status:funscript",{message:`Found ${a} multi-axis channels`,type:"log"})}_isActionArray(i){return Array.isArray(i)&&i.length>0&&i.every(i=>"object"==typeof i&&null!==i&&(void 0!==i.at||void 0!==i.t||void 0!==i.time))}_createChannelFromActions(i,a,s={}){try{if(this.notify?.("status:funscript",{message:`Creating channel from field: ${i} (${a.length} actions)`,type:"log"}),this.customFieldConfig&&this.customFieldConfig[i]){const o=this.customFieldConfig[i],u={timeField:o.timeField||"at",valueField:o.valueField||"pos",directionField:o.directionField||null,durationField:o.durationField||null};return this.notify?.("status:funscript",{message:`Using user-defined config for ${i}`,type:"success"}),new UT(i,a,u,{...s,originalField:i},this.notify)}const o=this._buildBasicFieldConfig(i,a,s),u=new UT(i,a,o,{...s,originalField:i},this.notify);return this.notify?.("status:funscript",{message:`Channel created: ${u.name} (${u.type}, likely: ${u.likelyCapability}, ${u.actions.length} actions)`,type:"log"}),u}catch(o){return this.notify?.("status:funscript",{message:`Failed to create channel "${i}": ${o.message}`,type:"error"}),null}}_buildBasicFieldConfig(i,a,s){if(0===a.length)return{timeField:"at",valueField:"pos"};const o=a[0],u=Object.keys(o),_=this._detectTimeField(u),x=this._detectValueField(u,i),w=this._detectDirectionField(u),C=this._detectDurationField(u);return this.notify?.("status:funscript",{message:`Field detection for ${i}: time=${_}, value=${x}, direction=${w||"none"}, duration=${C||"none"}`,type:"log"}),{timeField:_,valueField:x,directionField:w,durationField:C}}_detectTimeField(i){const a=["at","t","time","timestamp"];for(const s of a)if(i.includes(s))return s;return"at"}_detectValueField(i,a){if(i.includes(a.toLowerCase()))return a.toLowerCase();const s=["pos","position","value","val","v","speed","spd","s","scalar","intensity","i"];for(const o of s)if(i.includes(o))return o;return"pos"}_detectDirectionField(i){const a=["clockwise","cw","direction","dir","ccw","counterclockwise"];for(const s of a)if(i.includes(s))return s;return null}_detectDurationField(i){const a=["duration","dur","d"];for(const s of a)if(i.includes(s))return s;return null}_extractMetadata(){return this.data?{metadata:this.data.metadata||{},channels:this.data.channels||{},mapping:this.data.mapping||{},...this.data.metadata}:{}}_calculateDuration(){this.duration=Math.max(...this.channels.map(i=>i.duration),0)}getChannelSuggestions(){return this.channels.map(i=>({name:i.name,type:i.type,likelyCapability:i.likelyCapability,actionCount:i.getActionCount(),duration:i.duration}))}getDebugInfo(){return{loaded:this.hasFunscript(),channelCount:this.channels.length,duration:this.duration,channels:this.channels.map(i=>({name:i.name,type:i.type,likelyCapability:i.likelyCapability,actionCount:i.getActionCount(),connectedActuators:i.getConnectedActuators().length})),customFieldConfig:this.customFieldConfig,dataKeys:this.data?Object.keys(this.data):[]}}getChannelMetadata(i){const a=this.getChannel(i);return a?a.getMetadata():{}}hasNegativeValues(i){const a=this.getChannel(i);return!!a&&a.type===kT}getDetectedFields(){if(!this.data)return{};const i={};this.data.actions?.length>0&&(i.pos=this._analyzeFieldsInActions(this.data.actions));for(const[a,s]of Object.entries(this.data))this._isActionArray(s)&&"actions"!==a&&(i[a]=this._analyzeFieldsInActions(s));if(this.data.tracks)for(const[a,s]of Object.entries(this.data.tracks))s.actions?.length&&(i[a]=this._analyzeFieldsInActions(s.actions));return i}_analyzeFieldsInActions(i){if(!i||0===i.length)return{availableTimeFields:["at"],availableValueFields:["pos"],availableDirectionFields:[],availableDurationFields:[],otherFields:[],sampleAction:null};const a=i[0],s=Object.keys(a);return{availableTimeFields:s.filter(i=>{const a=i.toLowerCase();return["at","t","time","timestamp","ms"].includes(a)}),availableValueFields:s.filter(i=>{const a=i.toLowerCase();return["pos","p","position","scalar","speed","spd","s","val","v","value","intensity","i"].includes(a)}),availableDirectionFields:s.filter(i=>{const a=i.toLowerCase();return["clockwise","cw","direction","dir","ccw","counterclockwise"].includes(a)}),availableDurationFields:s.filter(i=>{const a=i.toLowerCase();return["duration","dur","d","delay","ms","millis","time"].includes(a)}),otherFields:s.filter(i=>{const a=i.toLowerCase();return!["at","t","time","timestamp","ms","pos","p","position","scalar","speed","spd","s","val","v","value","intensity","i","clockwise","cw","direction","dir","ccw","counterclockwise","duration","dur","d","delay","millis"].includes(a)}),sampleAction:a}}};__name(jT,"FunscriptManager");let VT=jT;var zT,HT={exports:{}},$T=HT.exports;function requireFeather(){return zT||(zT=1,i=HT,
/* @__PURE__ */__name(function webpackUniversalModuleDefinition(a,s){i.exports=s()},"webpackUniversalModuleDefinition")("undefined"!=typeof self?self:$T,function(){return function(i){var a={};function __webpack_require__(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return i[s].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}return __name(__webpack_require__,"__webpack_require__"),__webpack_require__.m=i,__webpack_require__.c=a,__webpack_require__.d=function(i,a,s){__webpack_require__.o(i,a)||Object.defineProperty(i,a,{configurable:!1,enumerable:!0,get:s})},__webpack_require__.r=function(i){Object.defineProperty(i,"__esModule",{value:!0})},__webpack_require__.n=function(i){var a=i&&i.__esModule?
/* @__PURE__ */__name(function getDefault(){return i.default},"getDefault"):
/* @__PURE__ */__name(function getModuleExports(){return i},"getModuleExports");return __webpack_require__.d(a,"a",a),a},__webpack_require__.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}({"./dist/icons.json":
/* @__PURE__ */__name(function(i){i.exports={activity:'<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',airplay:'<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon>',"alert-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',"align-center":'<line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line>',"align-justify":'<line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line>',"align-left":'<line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line>',"align-right":'<line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line>',anchor:'<circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>',aperture:'<circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',"arrow-down-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line>',"arrow-down-left":'<line x1="17" y1="7" x2="7" y2="17"></line><polyline points="17 17 7 17 7 7"></polyline>',"arrow-down-right":'<line x1="7" y1="7" x2="17" y2="17"></line><polyline points="17 7 17 17 7 17"></polyline>',"arrow-down":'<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',"arrow-left-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',"arrow-left":'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',"arrow-right-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',"arrow-right":'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',"arrow-up-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line>',"arrow-up-left":'<line x1="17" y1="17" x2="7" y2="7"></line><polyline points="7 17 7 7 17 7"></polyline>',"arrow-up-right":'<line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline>',"arrow-up":'<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',"at-sign":'<circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>',award:'<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',"bar-chart-2":'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',"bar-chart":'<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',"battery-charging":'<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',battery:'<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',"bell-off":'<path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line>',bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',bluetooth:'<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',bold:'<path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>',"book-open":'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',book:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',bookmark:'<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',box:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',calendar:'<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',"camera-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"></path>',camera:'<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',cast:'<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line>',"check-circle":'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',"check-square":'<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',check:'<polyline points="20 6 9 17 4 12"></polyline>',"chevron-down":'<polyline points="6 9 12 15 18 9"></polyline>',"chevron-left":'<polyline points="15 18 9 12 15 6"></polyline>',"chevron-right":'<polyline points="9 18 15 12 9 6"></polyline>',"chevron-up":'<polyline points="18 15 12 9 6 15"></polyline>',"chevrons-down":'<polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline>',"chevrons-left":'<polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline>',"chevrons-right":'<polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline>',"chevrons-up":'<polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline>',chrome:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="21.17" y1="8" x2="12" y2="8"></line><line x1="3.95" y1="6.06" x2="8.54" y2="14"></line><line x1="10.88" y1="21.94" x2="15.46" y2="14"></line>',circle:'<circle cx="12" cy="12" r="10"></circle>',clipboard:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',clock:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',"cloud-drizzle":'<line x1="8" y1="19" x2="8" y2="21"></line><line x1="8" y1="13" x2="8" y2="15"></line><line x1="16" y1="19" x2="16" y2="21"></line><line x1="16" y1="13" x2="16" y2="15"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="12" y1="15" x2="12" y2="17"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-lightning":'<path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline>',"cloud-off":'<path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path><line x1="1" y1="1" x2="23" y2="23"></line>',"cloud-rain":'<line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-snow":'<path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="16" x2="8.01" y2="16"></line><line x1="8" y1="20" x2="8.01" y2="20"></line><line x1="12" y1="18" x2="12.01" y2="18"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="16" y1="16" x2="16.01" y2="16"></line><line x1="16" y1="20" x2="16.01" y2="20"></line>',cloud:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',code:'<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',codepen:'<polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"></polygon><line x1="12" y1="22" x2="12" y2="15.5"></line><polyline points="22 8.5 12 15.5 2 8.5"></polyline><polyline points="2 15.5 12 8.5 22 15.5"></polyline><line x1="12" y1="2" x2="12" y2="8.5"></line>',codesandbox:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',columns:'<path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>',command:'<path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>',compass:'<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',copy:'<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',"corner-down-left":'<polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path>',"corner-down-right":'<polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',"corner-left-down":'<polyline points="14 15 9 20 4 15"></polyline><path d="M20 4h-7a4 4 0 0 0-4 4v12"></path>',"corner-left-up":'<polyline points="14 9 9 4 4 9"></polyline><path d="M20 20h-7a4 4 0 0 1-4-4V4"></path>',"corner-right-down":'<polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>',"corner-right-up":'<polyline points="10 9 15 4 20 9"></polyline><path d="M4 20h7a4 4 0 0 0 4-4V4"></path>',"corner-up-left":'<polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>',"corner-up-right":'<polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>',cpu:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line>',"credit-card":'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',crop:'<path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path>',crosshair:'<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',database:'<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',delete:'<path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line>',disc:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle>',"divide-circle":'<line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line><circle cx="12" cy="12" r="10"></circle>',"divide-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line>',divide:'<circle cx="12" cy="6" r="2"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="2"></circle>',"dollar-sign":'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',"download-cloud":'<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',dribbble:'<circle cx="12" cy="12" r="10"></circle><path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32"></path>',droplet:'<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>',"edit-2":'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',"edit-3":'<path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>',edit:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',"external-link":'<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',"eye-off":'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>',eye:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',facebook:'<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>',"fast-forward":'<polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon>',feather:'<path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line>',figma:'<path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"></path><path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"></path><path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"></path><path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"></path><path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"></path>',"file-minus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line>',"file-plus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line>',"file-text":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',file:'<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',film:'<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',filter:'<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',flag:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',"folder-minus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line>',"folder-plus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line>',folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',framer:'<path d="M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7"></path>',frown:'<circle cx="12" cy="12" r="10"></circle><path d="M16 16s-1.5-2-4-2-4 2-4 2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',gift:'<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',"git-branch":'<line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path>',"git-commit":'<circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line>',"git-merge":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M6 21V9a9 9 0 0 0 9 9"></path>',"git-pull-request":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line>',github:'<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',gitlab:'<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>',globe:'<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',grid:'<rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>',"hard-drive":'<line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line>',hash:'<line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>',headphones:'<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',"help-circle":'<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',hexagon:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>',home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',inbox:'<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',instagram:'<rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>',italic:'<line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line>',key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',layers:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',layout:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',"life-buoy":'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line>',"link-2":'<path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line>',link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',linkedin:'<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',list:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',loader:'<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',"log-in":'<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',"log-out":'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',mail:'<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',"map-pin":'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',map:'<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line>',"maximize-2":'<polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line>',maximize:'<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',meh:'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',menu:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',"message-circle":'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',"message-square":'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',"mic-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',mic:'<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',"minimize-2":'<polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>',minimize:'<path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>',"minus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line>',"minus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',minus:'<line x1="5" y1="12" x2="19" y2="12"></line>',monitor:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',moon:'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',"more-horizontal":'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',"more-vertical":'<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',"mouse-pointer":'<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path>',move:'<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',"navigation-2":'<polygon points="12 2 19 21 12 17 5 21 12 2"></polygon>',navigation:'<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',octagon:'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>',package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',paperclip:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',"pause-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',"pen-tool":'<path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle>',percent:'<line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle>',"phone-call":'<path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-forwarded":'<polyline points="19 1 23 5 19 9"></polyline><line x1="15" y1="5" x2="23" y2="5"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-incoming":'<polyline points="16 2 16 8 22 8"></polyline><line x1="23" y1="1" x2="16" y2="8"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-missed":'<line x1="23" y1="1" x2="17" y2="7"></line><line x1="17" y1="1" x2="23" y2="7"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-off":'<path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path><line x1="23" y1="1" x2="1" y2="23"></line>',"phone-outgoing":'<polyline points="23 7 23 1 17 1"></polyline><line x1="16" y1="8" x2="23" y2="1"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"pie-chart":'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',"play-circle":'<circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon>',play:'<polygon points="5 3 19 12 5 21 5 3"></polygon>',"plus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',"plus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',plus:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',pocket:'<path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path><polyline points="8 10 12 14 16 10"></polyline>',power:'<path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line>',printer:'<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',radio:'<circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path>',"refresh-ccw":'<polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>',"refresh-cw":'<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',repeat:'<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path>',rewind:'<polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon>',"rotate-ccw":'<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',"rotate-cw":'<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',rss:'<path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',send:'<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',server:'<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',"share-2":'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',share:'<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line>',"shield-off":'<path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line>',shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',"shopping-bag":'<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path>',"shopping-cart":'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',shuffle:'<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',sidebar:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line>',"skip-back":'<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',"skip-forward":'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',slack:'<path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path>',slash:'<circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>',sliders:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',smile:'<circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',speaker:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><circle cx="12" cy="14" r="4"></circle><line x1="12" y1="6" x2="12.01" y2="6"></line>',square:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',"stop-circle":'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',sun:'<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',sunrise:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline>',sunset:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="9" x2="12" y2="2"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="16 5 12 9 8 5"></polyline>',table:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"></path>',tablet:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',tag:'<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',target:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',terminal:'<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',thermometer:'<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',"thumbs-down":'<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',"thumbs-up":'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',"toggle-left":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle>',"toggle-right":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle>',tool:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',"trash-2":'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',trello:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>',"trending-down":'<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',"trending-up":'<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',triangle:'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>',truck:'<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',tv:'<rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline>',twitch:'<path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>',twitter:'<path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>',type:'<polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line>',umbrella:'<path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path>',underline:'<path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line>',unlock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',"upload-cloud":'<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',"user-check":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',"user-minus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="23" y1="11" x2="17" y2="11"></line>',"user-plus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',"user-x":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="18" y1="8" x2="23" y2="13"></line><line x1="23" y1="8" x2="18" y2="13"></line>',user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',"video-off":'<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',voicemail:'<circle cx="5.5" cy="11.5" r="4.5"></circle><circle cx="18.5" cy="11.5" r="4.5"></circle><line x1="5.5" y1="16" x2="18.5" y2="16"></line>',"volume-1":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-2":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-x":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',volume:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',watch:'<circle cx="12" cy="12" r="7"></circle><polyline points="12 9 12 12 13.5 13.5"></polyline><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>',"wifi-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wifi:'<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wind:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>',"x-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line>',x:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',youtube:'<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>',"zap-off":'<polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line>',zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',"zoom-in":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line>',"zoom-out":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line>'}},"./dist/icons.json"),"./node_modules/classnames/dedupe.js":
/* @__PURE__ */__name(function(i,a,s){var o,u;u=function(){function StorageObject(){}function _parseArray(i,a){for(var s=a.length,o=0;o<s;++o)_parse(i,a[o])}__name(StorageObject,"StorageObject"),StorageObject.prototype=/* @__PURE__ */Object.create(null),__name(_parseArray,"_parseArray");var i={}.hasOwnProperty;function _parseNumber(i,a){i[a]=!0}function _parseObject(a,s){for(var o in s)i.call(s,o)&&(a[o]=!!s[o])}__name(_parseNumber,"_parseNumber"),__name(_parseObject,"_parseObject");var a=/\s+/;function _parseString(i,s){for(var o=s.split(a),u=o.length,_=0;_<u;++_)i[o[_]]=!0}function _parse(i,a){if(a){var s=typeof a;"string"===s?_parseString(i,a):Array.isArray(a)?_parseArray(i,a):"object"===s?_parseObject(i,a):"number"===s&&_parseNumber(i,a)}}function _classNames(){for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];var o=new StorageObject;_parseArray(o,a);var u=[];for(var _ in o)o[_]&&u.push(_);return u.join(" ")}return __name(_parseString,"_parseString"),__name(_parse,"_parse"),__name(_classNames,"_classNames"),_classNames}(),void 0!==i&&i.exports?i.exports=u:void 0===(o=function(){return u}.apply(a,[]))||(i.exports=o)},"./node_modules/classnames/dedupe.js"),"./node_modules/core-js/es/array/from.js":
/* @__PURE__ */__name(function(i,a,s){s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.from.js");var o=s("./node_modules/core-js/internals/path.js");i.exports=o.Array.from},"./node_modules/core-js/es/array/from.js"),"./node_modules/core-js/internals/a-function.js":
/* @__PURE__ */__name(function(i,a){i.exports=function(i){if("function"!=typeof i)throw TypeError(String(i)+" is not a function");return i}},"./node_modules/core-js/internals/a-function.js"),"./node_modules/core-js/internals/an-object.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/is-object.js");i.exports=function(i){if(!o(i))throw TypeError(String(i)+" is not an object");return i}},"./node_modules/core-js/internals/an-object.js"),"./node_modules/core-js/internals/array-from.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/bind-context.js"),u=s("./node_modules/core-js/internals/to-object.js"),_=s("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),x=s("./node_modules/core-js/internals/is-array-iterator-method.js"),w=s("./node_modules/core-js/internals/to-length.js"),C=s("./node_modules/core-js/internals/create-property.js"),L=s("./node_modules/core-js/internals/get-iterator-method.js");i.exports=/* @__PURE__ */__name(function from2(i){var a,s,B,U,j=u(i),V="function"==typeof this?this:Array,z=arguments.length,$=z>1?arguments[1]:void 0,Y=void 0!==$,Z=0,ee=L(j);if(Y&&($=o($,z>2?arguments[2]:void 0,2)),null==ee||V==Array&&x(ee))for(s=new V(a=w(j.length));a>Z;Z++)C(s,Z,Y?$(j[Z],Z):j[Z]);else for(U=ee.call(j),s=new V;!(B=U.next()).done;Z++)C(s,Z,Y?_(U,$,[B.value,Z],!0):B.value);return s.length=Z,s},"from")},"./node_modules/core-js/internals/array-from.js"),"./node_modules/core-js/internals/array-includes.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/to-indexed-object.js"),u=s("./node_modules/core-js/internals/to-length.js"),_=s("./node_modules/core-js/internals/to-absolute-index.js");i.exports=function(i){return function(a,s,x){var w,C=o(a),L=u(C.length),B=_(x,L);if(i&&s!=s){for(;L>B;)if((w=C[B++])!=w)return!0}else for(;L>B;B++)if((i||B in C)&&C[B]===s)return i||B||0;return!i&&-1}}},"./node_modules/core-js/internals/array-includes.js"),"./node_modules/core-js/internals/bind-context.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/a-function.js");i.exports=function(i,a,s){if(o(i),void 0===a)return i;switch(s){case 0:return function(){return i.call(a)};case 1:return function(s){return i.call(a,s)};case 2:return function(s,o){return i.call(a,s,o)};case 3:return function(s,o,u){return i.call(a,s,o,u)}}return function(){return i.apply(a,arguments)}}},"./node_modules/core-js/internals/bind-context.js"),"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/an-object.js");i.exports=function(i,a,s,u){try{return u?a(o(s)[0],s[1]):a(s)}catch(x){var _=i.return;throw void 0!==_&&o(_.call(i)),x}}},"./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),"./node_modules/core-js/internals/check-correctness-of-iteration.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/well-known-symbol.js")("iterator"),u=!1;try{var _=0,x={next:/* @__PURE__ */__name(function(){return{done:!!_++}},"next"),return:/* @__PURE__ */__name(function(){u=!0},"return")};x[o]=function(){return this},Array.from(x,function(){throw 2})}catch(w){}i.exports=function(i,a){if(!a&&!u)return!1;var s=!1;try{var _={};_[o]=function(){return{next:/* @__PURE__ */__name(function(){return{done:s=!0}},"next")}},i(_)}catch(w){}return s}},"./node_modules/core-js/internals/check-correctness-of-iteration.js"),"./node_modules/core-js/internals/classof-raw.js":
/* @__PURE__ */__name(function(i,a){var s={}.toString;i.exports=function(i){return s.call(i).slice(8,-1)}},"./node_modules/core-js/internals/classof-raw.js"),"./node_modules/core-js/internals/classof.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/classof-raw.js"),u=s("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),_="Arguments"==o(/* @__PURE__ */function(){return arguments}()),x=/* @__PURE__ */__name(function(i,a){try{return i[a]}catch(s){}},"tryGet");i.exports=function(i){var a,s,w;return void 0===i?"Undefined":null===i?"Null":"string"==typeof(s=x(a=Object(i),u))?s:_?o(a):"Object"==(w=o(a))&&"function"==typeof a.callee?"Arguments":w}},"./node_modules/core-js/internals/classof.js"),"./node_modules/core-js/internals/copy-constructor-properties.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/has.js"),u=s("./node_modules/core-js/internals/own-keys.js"),_=s("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),x=s("./node_modules/core-js/internals/object-define-property.js");i.exports=function(i,a){for(var s=u(a),w=x.f,C=_.f,L=0;L<s.length;L++){var B=s[L];o(i,B)||w(i,B,C(a,B))}}},"./node_modules/core-js/internals/copy-constructor-properties.js"),"./node_modules/core-js/internals/correct-prototype-getter.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/fails.js");i.exports=!o(function(){function F(){}return __name(F,"F"),F.prototype.constructor=null,Object.getPrototypeOf(new F)!==F.prototype})},"./node_modules/core-js/internals/correct-prototype-getter.js"),"./node_modules/core-js/internals/create-iterator-constructor.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,u=s("./node_modules/core-js/internals/object-create.js"),_=s("./node_modules/core-js/internals/create-property-descriptor.js"),x=s("./node_modules/core-js/internals/set-to-string-tag.js"),w=s("./node_modules/core-js/internals/iterators.js"),C=/* @__PURE__ */__name(function(){return this},"returnThis");i.exports=function(i,a,s){var L=a+" Iterator";return i.prototype=u(o,{next:_(1,s)}),x(i,L,!1,!0),w[L]=C,i}},"./node_modules/core-js/internals/create-iterator-constructor.js"),"./node_modules/core-js/internals/create-property-descriptor.js":
/* @__PURE__ */__name(function(i,a){i.exports=function(i,a){return{enumerable:!(1&i),configurable:!(2&i),writable:!(4&i),value:a}}},"./node_modules/core-js/internals/create-property-descriptor.js"),"./node_modules/core-js/internals/create-property.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/to-primitive.js"),u=s("./node_modules/core-js/internals/object-define-property.js"),_=s("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=function(i,a,s){var x=o(a);x in i?u.f(i,x,_(0,s)):i[x]=s}},"./node_modules/core-js/internals/create-property.js"),"./node_modules/core-js/internals/define-iterator.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/export.js"),u=s("./node_modules/core-js/internals/create-iterator-constructor.js"),_=s("./node_modules/core-js/internals/object-get-prototype-of.js"),x=s("./node_modules/core-js/internals/object-set-prototype-of.js"),w=s("./node_modules/core-js/internals/set-to-string-tag.js"),C=s("./node_modules/core-js/internals/hide.js"),L=s("./node_modules/core-js/internals/redefine.js"),B=s("./node_modules/core-js/internals/well-known-symbol.js"),U=s("./node_modules/core-js/internals/is-pure.js"),j=s("./node_modules/core-js/internals/iterators.js"),V=s("./node_modules/core-js/internals/iterators-core.js"),z=V.IteratorPrototype,$=V.BUGGY_SAFARI_ITERATORS,Y=B("iterator"),Z="keys",ee="values",ie="entries",ae=/* @__PURE__ */__name(function(){return this},"returnThis");i.exports=function(i,a,s,B,V,le,ce){u(s,a,B);var de,pe,fe,_e=/* @__PURE__ */__name(function(i){if(i===V&&xe)return xe;if(!$&&i in Te)return Te[i];switch(i){case Z:/* @__PURE__ */
return __name(function keys2(){return new s(this,i)},"keys");case ee:/* @__PURE__ */
return __name(function values2(){return new s(this,i)},"values");case ie:/* @__PURE__ */
return __name(function entries(){return new s(this,i)},"entries")}return function(){return new s(this)}},"getIterationMethod"),ye=a+" Iterator",be=!1,Te=i.prototype,Se=Te[Y]||Te["@@iterator"]||V&&Te[V],xe=!$&&Se||_e(V),we="Array"==a&&Te.entries||Se;if(we&&(de=_(we.call(new i)),z!==Object.prototype&&de.next&&(U||_(de)===z||(x?x(de,z):"function"!=typeof de[Y]&&C(de,Y,ae)),w(de,ye,!0,!0),U&&(j[ye]=ae))),V==ee&&Se&&Se.name!==ee&&(be=!0,xe=/* @__PURE__ */__name(function values2(){return Se.call(this)},"values")),U&&!ce||Te[Y]===xe||C(Te,Y,xe),j[a]=xe,V)if(pe={values:_e(ee),keys:le?xe:_e(Z),entries:_e(ie)},ce)for(fe in pe)($||be||!(fe in Te))&&L(Te,fe,pe[fe]);else o({target:a,proto:!0,forced:$||be},pe);return pe}},"./node_modules/core-js/internals/define-iterator.js"),"./node_modules/core-js/internals/descriptors.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/fails.js");i.exports=!o(function(){return 7!=Object.defineProperty({},"a",{get:/* @__PURE__ */__name(function(){return 7},"get")}).a})},"./node_modules/core-js/internals/descriptors.js"),"./node_modules/core-js/internals/document-create-element.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/global.js"),u=s("./node_modules/core-js/internals/is-object.js"),_=o.document,x=u(_)&&u(_.createElement);i.exports=function(i){return x?_.createElement(i):{}}},"./node_modules/core-js/internals/document-create-element.js"),"./node_modules/core-js/internals/enum-bug-keys.js":
/* @__PURE__ */__name(function(i,a){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/enum-bug-keys.js"),"./node_modules/core-js/internals/export.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/global.js"),u=s("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,_=s("./node_modules/core-js/internals/hide.js"),x=s("./node_modules/core-js/internals/redefine.js"),w=s("./node_modules/core-js/internals/set-global.js"),C=s("./node_modules/core-js/internals/copy-constructor-properties.js"),L=s("./node_modules/core-js/internals/is-forced.js");i.exports=function(i,a){var s,B,U,j,V,z=i.target,$=i.global,Y=i.stat;if(s=$?o:Y?o[z]||w(z,{}):(o[z]||{}).prototype)for(B in a){if(j=a[B],U=i.noTargetGet?(V=u(s,B))&&V.value:s[B],!L($?B:z+(Y?".":"#")+B,i.forced)&&void 0!==U){if(typeof j==typeof U)continue;C(j,U)}(i.sham||U&&U.sham)&&_(j,"sham",!0),x(s,B,j,i)}}},"./node_modules/core-js/internals/export.js"),"./node_modules/core-js/internals/fails.js":
/* @__PURE__ */__name(function(i,a){i.exports=function(i){try{return!!i()}catch(a){return!0}}},"./node_modules/core-js/internals/fails.js"),"./node_modules/core-js/internals/function-to-string.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/shared.js");i.exports=o("native-function-to-string",Function.toString)},"./node_modules/core-js/internals/function-to-string.js"),"./node_modules/core-js/internals/get-iterator-method.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/classof.js"),u=s("./node_modules/core-js/internals/iterators.js"),_=s("./node_modules/core-js/internals/well-known-symbol.js")("iterator");i.exports=function(i){if(null!=i)return i[_]||i["@@iterator"]||u[o(i)]}},"./node_modules/core-js/internals/get-iterator-method.js"),"./node_modules/core-js/internals/global.js":
/* @__PURE__ */__name(function(i,a,s){(function(a){var s="object",o=/* @__PURE__ */__name(function(i){return i&&i.Math==Math&&i},"check");i.exports=o(typeof globalThis==s&&globalThis)||o(typeof window==s&&window)||o(typeof self==s&&self)||o(typeof a==s&&a)||Function("return this")()}).call(this,s("./node_modules/webpack/buildin/global.js"))},"./node_modules/core-js/internals/global.js"),"./node_modules/core-js/internals/has.js":
/* @__PURE__ */__name(function(i,a){var s={}.hasOwnProperty;i.exports=function(i,a){return s.call(i,a)}},"./node_modules/core-js/internals/has.js"),"./node_modules/core-js/internals/hidden-keys.js":
/* @__PURE__ */__name(function(i,a){i.exports={}},"./node_modules/core-js/internals/hidden-keys.js"),"./node_modules/core-js/internals/hide.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/descriptors.js"),u=s("./node_modules/core-js/internals/object-define-property.js"),_=s("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=o?function(i,a,s){return u.f(i,a,_(1,s))}:function(i,a,s){return i[a]=s,i}},"./node_modules/core-js/internals/hide.js"),"./node_modules/core-js/internals/html.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/global.js").document;i.exports=o&&o.documentElement},"./node_modules/core-js/internals/html.js"),"./node_modules/core-js/internals/ie8-dom-define.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/descriptors.js"),u=s("./node_modules/core-js/internals/fails.js"),_=s("./node_modules/core-js/internals/document-create-element.js");i.exports=!o&&!u(function(){return 7!=Object.defineProperty(_("div"),"a",{get:/* @__PURE__ */__name(function(){return 7},"get")}).a})},"./node_modules/core-js/internals/ie8-dom-define.js"),"./node_modules/core-js/internals/indexed-object.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/fails.js"),u=s("./node_modules/core-js/internals/classof-raw.js"),_="".split;i.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(i){return"String"==u(i)?_.call(i,""):Object(i)}:Object},"./node_modules/core-js/internals/indexed-object.js"),"./node_modules/core-js/internals/internal-state.js":
/* @__PURE__ */__name(function(i,a,s){var o,u,_,x=s("./node_modules/core-js/internals/native-weak-map.js"),w=s("./node_modules/core-js/internals/global.js"),C=s("./node_modules/core-js/internals/is-object.js"),L=s("./node_modules/core-js/internals/hide.js"),B=s("./node_modules/core-js/internals/has.js"),U=s("./node_modules/core-js/internals/shared-key.js"),j=s("./node_modules/core-js/internals/hidden-keys.js"),V=w.WeakMap,z=/* @__PURE__ */__name(function(i){return _(i)?u(i):o(i,{})},"enforce"),$=/* @__PURE__ */__name(function(i){return function(a){var s;if(!C(a)||(s=u(a)).type!==i)throw TypeError("Incompatible receiver, "+i+" required");return s}},"getterFor");if(x){var Y=new V,Z=Y.get,ee=Y.has,ie=Y.set;o=/* @__PURE__ */__name(function(i,a){return ie.call(Y,i,a),a},"set"),u=/* @__PURE__ */__name(function(i){return Z.call(Y,i)||{}},"get"),_=/* @__PURE__ */__name(function(i){return ee.call(Y,i)},"has")}else{var ae=U("state");j[ae]=!0,o=/* @__PURE__ */__name(function(i,a){return L(i,ae,a),a},"set"),u=/* @__PURE__ */__name(function(i){return B(i,ae)?i[ae]:{}},"get"),_=/* @__PURE__ */__name(function(i){return B(i,ae)},"has")}i.exports={set:o,get:u,has:_,enforce:z,getterFor:$}},"./node_modules/core-js/internals/internal-state.js"),"./node_modules/core-js/internals/is-array-iterator-method.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/well-known-symbol.js"),u=s("./node_modules/core-js/internals/iterators.js"),_=o("iterator"),x=Array.prototype;i.exports=function(i){return void 0!==i&&(u.Array===i||x[_]===i)}},"./node_modules/core-js/internals/is-array-iterator-method.js"),"./node_modules/core-js/internals/is-forced.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/fails.js"),u=/#|\.prototype\./,_=/* @__PURE__ */__name(function(i,a){var s=w[x(i)];return s==L||s!=C&&("function"==typeof a?o(a):!!a)},"isForced"),x=_.normalize=function(i){return String(i).replace(u,".").toLowerCase()},w=_.data={},C=_.NATIVE="N",L=_.POLYFILL="P";i.exports=_},"./node_modules/core-js/internals/is-forced.js"),"./node_modules/core-js/internals/is-object.js":
/* @__PURE__ */__name(function(i,a){i.exports=function(i){return"object"==typeof i?null!==i:"function"==typeof i}},"./node_modules/core-js/internals/is-object.js"),"./node_modules/core-js/internals/is-pure.js":
/* @__PURE__ */__name(function(i,a){i.exports=!1},"./node_modules/core-js/internals/is-pure.js"),"./node_modules/core-js/internals/iterators-core.js":
/* @__PURE__ */__name(function(i,a,s){var o,u,_,x=s("./node_modules/core-js/internals/object-get-prototype-of.js"),w=s("./node_modules/core-js/internals/hide.js"),C=s("./node_modules/core-js/internals/has.js"),L=s("./node_modules/core-js/internals/well-known-symbol.js"),B=s("./node_modules/core-js/internals/is-pure.js"),U=L("iterator"),j=!1,V=/* @__PURE__ */__name(function(){return this},"returnThis");[].keys&&("next"in(_=[].keys())?(u=x(x(_)))!==Object.prototype&&(o=u):j=!0),null==o&&(o={}),B||C(o,U)||w(o,U,V),i.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:j}},"./node_modules/core-js/internals/iterators-core.js"),"./node_modules/core-js/internals/iterators.js":
/* @__PURE__ */__name(function(i,a){i.exports={}},"./node_modules/core-js/internals/iterators.js"),"./node_modules/core-js/internals/native-symbol.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/fails.js");i.exports=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())})},"./node_modules/core-js/internals/native-symbol.js"),"./node_modules/core-js/internals/native-weak-map.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/global.js"),u=s("./node_modules/core-js/internals/function-to-string.js"),_=o.WeakMap;i.exports="function"==typeof _&&/native code/.test(u.call(_))},"./node_modules/core-js/internals/native-weak-map.js"),"./node_modules/core-js/internals/object-create.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/an-object.js"),u=s("./node_modules/core-js/internals/object-define-properties.js"),_=s("./node_modules/core-js/internals/enum-bug-keys.js"),x=s("./node_modules/core-js/internals/hidden-keys.js"),w=s("./node_modules/core-js/internals/html.js"),C=s("./node_modules/core-js/internals/document-create-element.js"),L=s("./node_modules/core-js/internals/shared-key.js")("IE_PROTO"),B="prototype",U=/* @__PURE__ */__name(function(){},"Empty"),j=/* @__PURE__ */__name(function(){var i,a=C("iframe"),s=_.length,o="script",u="java"+o+":";for(a.style.display="none",w.appendChild(a),a.src=String(u),(i=a.contentWindow.document).open(),i.write("<"+o+">document.F=Object</"+o+">"),i.close(),j=i.F;s--;)delete j[B][_[s]];return j()},"createDict");i.exports=Object.create||/* @__PURE__ */__name(function create(i,a){var s;return null!==i?(U[B]=o(i),s=new U,U[B]=null,s[L]=i):s=j(),void 0===a?s:u(s,a)},"create"),x[L]=!0},"./node_modules/core-js/internals/object-create.js"),"./node_modules/core-js/internals/object-define-properties.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/descriptors.js"),u=s("./node_modules/core-js/internals/object-define-property.js"),_=s("./node_modules/core-js/internals/an-object.js"),x=s("./node_modules/core-js/internals/object-keys.js");i.exports=o?Object.defineProperties:/* @__PURE__ */__name(function defineProperties(i,a){_(i);for(var s,o=x(a),w=o.length,C=0;w>C;)u.f(i,s=o[C++],a[s]);return i},"defineProperties")},"./node_modules/core-js/internals/object-define-properties.js"),"./node_modules/core-js/internals/object-define-property.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/descriptors.js"),u=s("./node_modules/core-js/internals/ie8-dom-define.js"),_=s("./node_modules/core-js/internals/an-object.js"),x=s("./node_modules/core-js/internals/to-primitive.js"),w=Object.defineProperty;a.f=o?w:/* @__PURE__ */__name(function defineProperty(i,a,s){if(_(i),a=x(a,!0),_(s),u)try{return w(i,a,s)}catch(o){}if("get"in s||"set"in s)throw TypeError("Accessors not supported");return"value"in s&&(i[a]=s.value),i},"defineProperty")},"./node_modules/core-js/internals/object-define-property.js"),"./node_modules/core-js/internals/object-get-own-property-descriptor.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/descriptors.js"),u=s("./node_modules/core-js/internals/object-property-is-enumerable.js"),_=s("./node_modules/core-js/internals/create-property-descriptor.js"),x=s("./node_modules/core-js/internals/to-indexed-object.js"),w=s("./node_modules/core-js/internals/to-primitive.js"),C=s("./node_modules/core-js/internals/has.js"),L=s("./node_modules/core-js/internals/ie8-dom-define.js"),B=Object.getOwnPropertyDescriptor;a.f=o?B:/* @__PURE__ */__name(function getOwnPropertyDescriptor(i,a){if(i=x(i),a=w(a,!0),L)try{return B(i,a)}catch(s){}if(C(i,a))return _(!u.f.call(i,a),i[a])},"getOwnPropertyDescriptor")},"./node_modules/core-js/internals/object-get-own-property-descriptor.js"),"./node_modules/core-js/internals/object-get-own-property-names.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/object-keys-internal.js"),u=s("./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");a.f=Object.getOwnPropertyNames||/* @__PURE__ */__name(function getOwnPropertyNames(i){return o(i,u)},"getOwnPropertyNames")},"./node_modules/core-js/internals/object-get-own-property-names.js"),"./node_modules/core-js/internals/object-get-own-property-symbols.js":
/* @__PURE__ */__name(function(i,a){a.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-own-property-symbols.js"),"./node_modules/core-js/internals/object-get-prototype-of.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/has.js"),u=s("./node_modules/core-js/internals/to-object.js"),_=s("./node_modules/core-js/internals/shared-key.js"),x=s("./node_modules/core-js/internals/correct-prototype-getter.js"),w=_("IE_PROTO"),C=Object.prototype;i.exports=x?Object.getPrototypeOf:function(i){return i=u(i),o(i,w)?i[w]:"function"==typeof i.constructor&&i instanceof i.constructor?i.constructor.prototype:i instanceof Object?C:null}},"./node_modules/core-js/internals/object-get-prototype-of.js"),"./node_modules/core-js/internals/object-keys-internal.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/has.js"),u=s("./node_modules/core-js/internals/to-indexed-object.js"),_=s("./node_modules/core-js/internals/array-includes.js"),x=s("./node_modules/core-js/internals/hidden-keys.js"),w=_(!1);i.exports=function(i,a){var s,_=u(i),C=0,L=[];for(s in _)!o(x,s)&&o(_,s)&&L.push(s);for(;a.length>C;)o(_,s=a[C++])&&(~w(L,s)||L.push(s));return L}},"./node_modules/core-js/internals/object-keys-internal.js"),"./node_modules/core-js/internals/object-keys.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/object-keys-internal.js"),u=s("./node_modules/core-js/internals/enum-bug-keys.js");i.exports=Object.keys||/* @__PURE__ */__name(function keys2(i){return o(i,u)},"keys")},"./node_modules/core-js/internals/object-keys.js"),"./node_modules/core-js/internals/object-property-is-enumerable.js":
/* @__PURE__ */__name(function(i,a,s){var o={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,_=u&&!o.call({1:2},1);a.f=_?/* @__PURE__ */__name(function propertyIsEnumerable(i){var a=u(this,i);return!!a&&a.enumerable},"propertyIsEnumerable"):o},"./node_modules/core-js/internals/object-property-is-enumerable.js"),"./node_modules/core-js/internals/object-set-prototype-of.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/validate-set-prototype-of-arguments.js");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i,a=!1,s={};try{(i=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(s,[]),a=s instanceof Array}catch(u){}/* @__PURE__ */
return __name(function setPrototypeOf(s,u){return o(s,u),a?i.call(s,u):s.__proto__=u,s},"setPrototypeOf")}():void 0)},"./node_modules/core-js/internals/object-set-prototype-of.js"),"./node_modules/core-js/internals/own-keys.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/global.js"),u=s("./node_modules/core-js/internals/object-get-own-property-names.js"),_=s("./node_modules/core-js/internals/object-get-own-property-symbols.js"),x=s("./node_modules/core-js/internals/an-object.js"),w=o.Reflect;i.exports=w&&w.ownKeys||/* @__PURE__ */__name(function ownKeys(i){var a=u.f(x(i)),s=_.f;return s?a.concat(s(i)):a},"ownKeys")},"./node_modules/core-js/internals/own-keys.js"),"./node_modules/core-js/internals/path.js":
/* @__PURE__ */__name(function(i,a,s){i.exports=s("./node_modules/core-js/internals/global.js")},"./node_modules/core-js/internals/path.js"),"./node_modules/core-js/internals/redefine.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/global.js"),u=s("./node_modules/core-js/internals/shared.js"),_=s("./node_modules/core-js/internals/hide.js"),x=s("./node_modules/core-js/internals/has.js"),w=s("./node_modules/core-js/internals/set-global.js"),C=s("./node_modules/core-js/internals/function-to-string.js"),L=s("./node_modules/core-js/internals/internal-state.js"),B=L.get,U=L.enforce,j=String(C).split("toString");u("inspectSource",function(i){return C.call(i)}),(i.exports=function(i,a,s,u){var C=!!u&&!!u.unsafe,L=!!u&&!!u.enumerable,B=!!u&&!!u.noTargetGet;"function"==typeof s&&("string"!=typeof a||x(s,"name")||_(s,"name",a),U(s).source=j.join("string"==typeof a?a:"")),i!==o?(C?!B&&i[a]&&(L=!0):delete i[a],L?i[a]=s:_(i,a,s)):L?i[a]=s:w(a,s)})(Function.prototype,"toString",/* @__PURE__ */__name(function toString2(){return"function"==typeof this&&B(this).source||C.call(this)},"toString"))},"./node_modules/core-js/internals/redefine.js"),"./node_modules/core-js/internals/require-object-coercible.js":
/* @__PURE__ */__name(function(i,a){i.exports=function(i){if(null==i)throw TypeError("Can't call method on "+i);return i}},"./node_modules/core-js/internals/require-object-coercible.js"),"./node_modules/core-js/internals/set-global.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/global.js"),u=s("./node_modules/core-js/internals/hide.js");i.exports=function(i,a){try{u(o,i,a)}catch(s){o[i]=a}return a}},"./node_modules/core-js/internals/set-global.js"),"./node_modules/core-js/internals/set-to-string-tag.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/object-define-property.js").f,u=s("./node_modules/core-js/internals/has.js"),_=s("./node_modules/core-js/internals/well-known-symbol.js")("toStringTag");i.exports=function(i,a,s){i&&!u(i=s?i:i.prototype,_)&&o(i,_,{configurable:!0,value:a})}},"./node_modules/core-js/internals/set-to-string-tag.js"),"./node_modules/core-js/internals/shared-key.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/shared.js"),u=s("./node_modules/core-js/internals/uid.js"),_=o("keys");i.exports=function(i){return _[i]||(_[i]=u(i))}},"./node_modules/core-js/internals/shared-key.js"),"./node_modules/core-js/internals/shared.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/global.js"),u=s("./node_modules/core-js/internals/set-global.js"),_=s("./node_modules/core-js/internals/is-pure.js"),x="__core-js_shared__",w=o[x]||u(x,{});(i.exports=function(i,a){return w[i]||(w[i]=void 0!==a?a:{})})("versions",[]).push({version:"3.1.3",mode:_?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/shared.js"),"./node_modules/core-js/internals/string-at.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/to-integer.js"),u=s("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(i,a,s){var _,x,w=String(u(i)),C=o(a),L=w.length;return C<0||C>=L?s?"":void 0:(_=w.charCodeAt(C))<55296||_>56319||C+1===L||(x=w.charCodeAt(C+1))<56320||x>57343?s?w.charAt(C):_:s?w.slice(C,C+2):x-56320+(_-55296<<10)+65536}},"./node_modules/core-js/internals/string-at.js"),"./node_modules/core-js/internals/to-absolute-index.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/to-integer.js"),u=Math.max,_=Math.min;i.exports=function(i,a){var s=o(i);return s<0?u(s+a,0):_(s,a)}},"./node_modules/core-js/internals/to-absolute-index.js"),"./node_modules/core-js/internals/to-indexed-object.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/indexed-object.js"),u=s("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(i){return o(u(i))}},"./node_modules/core-js/internals/to-indexed-object.js"),"./node_modules/core-js/internals/to-integer.js":
/* @__PURE__ */__name(function(i,a){var s=Math.ceil,o=Math.floor;i.exports=function(i){return isNaN(i=+i)?0:(i>0?o:s)(i)}},"./node_modules/core-js/internals/to-integer.js"),"./node_modules/core-js/internals/to-length.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/to-integer.js"),u=Math.min;i.exports=function(i){return i>0?u(o(i),9007199254740991):0}},"./node_modules/core-js/internals/to-length.js"),"./node_modules/core-js/internals/to-object.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(i){return Object(o(i))}},"./node_modules/core-js/internals/to-object.js"),"./node_modules/core-js/internals/to-primitive.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/is-object.js");i.exports=function(i,a){if(!o(i))return i;var s,u;if(a&&"function"==typeof(s=i.toString)&&!o(u=s.call(i)))return u;if("function"==typeof(s=i.valueOf)&&!o(u=s.call(i)))return u;if(!a&&"function"==typeof(s=i.toString)&&!o(u=s.call(i)))return u;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/to-primitive.js"),"./node_modules/core-js/internals/uid.js":
/* @__PURE__ */__name(function(i,a){var s=0,o=Math.random();i.exports=function(i){return"Symbol(".concat(void 0===i?"":i,")_",(++s+o).toString(36))}},"./node_modules/core-js/internals/uid.js"),"./node_modules/core-js/internals/validate-set-prototype-of-arguments.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/is-object.js"),u=s("./node_modules/core-js/internals/an-object.js");i.exports=function(i,a){if(u(i),!o(a)&&null!==a)throw TypeError("Can't set "+String(a)+" as a prototype")}},"./node_modules/core-js/internals/validate-set-prototype-of-arguments.js"),"./node_modules/core-js/internals/well-known-symbol.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/global.js"),u=s("./node_modules/core-js/internals/shared.js"),_=s("./node_modules/core-js/internals/uid.js"),x=s("./node_modules/core-js/internals/native-symbol.js"),w=o.Symbol,C=u("wks");i.exports=function(i){return C[i]||(C[i]=x&&w[i]||(x?w:_)("Symbol."+i))}},"./node_modules/core-js/internals/well-known-symbol.js"),"./node_modules/core-js/modules/es.array.from.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/export.js"),u=s("./node_modules/core-js/internals/array-from.js");o({target:"Array",stat:!0,forced:!s("./node_modules/core-js/internals/check-correctness-of-iteration.js")(function(i){Array.from(i)})},{from:u})},"./node_modules/core-js/modules/es.array.from.js"),"./node_modules/core-js/modules/es.string.iterator.js":
/* @__PURE__ */__name(function(i,a,s){var o=s("./node_modules/core-js/internals/string-at.js"),u=s("./node_modules/core-js/internals/internal-state.js"),_=s("./node_modules/core-js/internals/define-iterator.js"),x="String Iterator",w=u.set,C=u.getterFor(x);_(String,"String",function(i){w(this,{type:x,string:String(i),index:0})},/* @__PURE__ */__name(function next(){var i,a=C(this),s=a.string,u=a.index;return u>=s.length?{value:void 0,done:!0}:(i=o(s,u,!0),a.index+=i.length,{value:i,done:!1})},"next"))},"./node_modules/core-js/modules/es.string.iterator.js"),"./node_modules/webpack/buildin/global.js":
/* @__PURE__ */__name(function(i,a){var s;s=/* @__PURE__ */function(){return this}();try{s=s||Function("return this")()||(0,eval)("this")}catch(o){"object"==typeof window&&(s=window)}i.exports=s},"./node_modules/webpack/buildin/global.js"),"./src/default-attrs.json":
/* @__PURE__ */__name(function(i){i.exports={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}},"./src/default-attrs.json"),"./src/icon.js":
/* @__PURE__ */__name(function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},u=/* @__PURE__ */function(){function defineProperties(i,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return __name(defineProperties,"defineProperties"),function(i,a,s){return a&&defineProperties(i.prototype,a),s&&defineProperties(i,s),i}}(),_=_interopRequireDefault(s("./node_modules/classnames/dedupe.js")),x=_interopRequireDefault(s("./src/default-attrs.json"));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function _classCallCheck(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}__name(_interopRequireDefault,"_interopRequireDefault"),__name(_classCallCheck,"_classCallCheck");var w=function(){function Icon2(i,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];_classCallCheck(this,Icon2),this.name=i,this.contents=a,this.tags=s,this.attrs=o({},x.default,{class:"feather feather-"+i})}return __name(Icon2,"Icon"),u(Icon2,[{key:"toSvg",value:/* @__PURE__ */__name(function toSvg(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"<svg "+attrsToString(o({},this.attrs,i,{class:(0,_.default)(this.attrs.class,i.class)}))+">"+this.contents+"</svg>"},"toSvg")},{key:"toString",value:/* @__PURE__ */__name(function toString2(){return this.contents},"toString")}]),Icon2}();function attrsToString(i){return Object.keys(i).map(function(a){return a+'="'+i[a]+'"'}).join(" ")}__name(attrsToString,"attrsToString"),a.default=w},"./src/icon.js"),"./src/icons.js":
/* @__PURE__ */__name(function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0});var o=_interopRequireDefault(s("./src/icon.js")),u=_interopRequireDefault(s("./dist/icons.json")),_=_interopRequireDefault(s("./src/tags.json"));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}__name(_interopRequireDefault,"_interopRequireDefault"),a.default=Object.keys(u.default).map(function(i){return new o.default(i,u.default[i],_.default[i])}).reduce(function(i,a){return i[a.name]=a,i},{})},"./src/icons.js"),"./src/index.js":
/* @__PURE__ */__name(function(i,a,s){var o=_interopRequireDefault(s("./src/icons.js")),u=_interopRequireDefault(s("./src/to-svg.js")),_=_interopRequireDefault(s("./src/replace.js"));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}__name(_interopRequireDefault,"_interopRequireDefault"),i.exports={icons:o.default,toSvg:u.default,replace:_.default}},"./src/index.js"),"./src/replace.js":
/* @__PURE__ */__name(function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0});var o=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},u=_interopRequireDefault(s("./node_modules/classnames/dedupe.js")),_=_interopRequireDefault(s("./src/icons.js"));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function replace(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"==typeof document)throw new Error("`feather.replace()` only works in a browser environment.");var a=document.querySelectorAll("[data-feather]");Array.from(a).forEach(function(a){return replaceElement(a,i)})}function replaceElement(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=getAttrs(i),x=s["data-feather"];if(delete s["data-feather"],void 0!==_.default[x]){var w=_.default[x].toSvg(o({},a,s,{class:(0,u.default)(a.class,s.class)})),C=(new DOMParser).parseFromString(w,"image/svg+xml").querySelector("svg");i.parentNode.replaceChild(C,i)}else console.warn("feather: '"+x+"' is not a valid icon")}function getAttrs(i){return Array.from(i.attributes).reduce(function(i,a){return i[a.name]=a.value,i},{})}__name(_interopRequireDefault,"_interopRequireDefault"),__name(replace,"replace"),__name(replaceElement,"replaceElement"),__name(getAttrs,"getAttrs"),a.default=replace},"./src/replace.js"),"./src/tags.json":
/* @__PURE__ */__name(function(i){i.exports={activity:["pulse","health","action","motion"],airplay:["stream","cast","mirroring"],"alert-circle":["warning","alert","danger"],"alert-octagon":["warning","alert","danger"],"alert-triangle":["warning","alert","danger"],"align-center":["text alignment","center"],"align-justify":["text alignment","justified"],"align-left":["text alignment","left"],"align-right":["text alignment","right"],anchor:[],archive:["index","box"],"at-sign":["mention","at","email","message"],award:["achievement","badge"],aperture:["camera","photo"],"bar-chart":["statistics","diagram","graph"],"bar-chart-2":["statistics","diagram","graph"],battery:["power","electricity"],"battery-charging":["power","electricity"],bell:["alarm","notification","sound"],"bell-off":["alarm","notification","silent"],bluetooth:["wireless"],"book-open":["read","library"],book:["read","dictionary","booklet","magazine","library"],bookmark:["read","clip","marker","tag"],box:["cube"],briefcase:["work","bag","baggage","folder"],calendar:["date"],camera:["photo"],cast:["chromecast","airplay"],"chevron-down":["expand"],"chevron-up":["collapse"],circle:["off","zero","record"],clipboard:["copy"],clock:["time","watch","alarm"],"cloud-drizzle":["weather","shower"],"cloud-lightning":["weather","bolt"],"cloud-rain":["weather"],"cloud-snow":["weather","blizzard"],cloud:["weather"],codepen:["logo"],codesandbox:["logo"],code:["source","programming"],coffee:["drink","cup","mug","tea","cafe","hot","beverage"],columns:["layout"],command:["keyboard","cmd","terminal","prompt"],compass:["navigation","safari","travel","direction"],copy:["clone","duplicate"],"corner-down-left":["arrow","return"],"corner-down-right":["arrow"],"corner-left-down":["arrow"],"corner-left-up":["arrow"],"corner-right-down":["arrow"],"corner-right-up":["arrow"],"corner-up-left":["arrow"],"corner-up-right":["arrow"],cpu:["processor","technology"],"credit-card":["purchase","payment","cc"],crop:["photo","image"],crosshair:["aim","target"],database:["storage","memory"],delete:["remove"],disc:["album","cd","dvd","music"],"dollar-sign":["currency","money","payment"],droplet:["water"],edit:["pencil","change"],"edit-2":["pencil","change"],"edit-3":["pencil","change"],eye:["view","watch"],"eye-off":["view","watch","hide","hidden"],"external-link":["outbound"],facebook:["logo","social"],"fast-forward":["music"],figma:["logo","design","tool"],"file-minus":["delete","remove","erase"],"file-plus":["add","create","new"],"file-text":["data","txt","pdf"],film:["movie","video"],filter:["funnel","hopper"],flag:["report"],"folder-minus":["directory"],"folder-plus":["directory"],folder:["directory"],framer:["logo","design","tool"],frown:["emoji","face","bad","sad","emotion"],gift:["present","box","birthday","party"],"git-branch":["code","version control"],"git-commit":["code","version control"],"git-merge":["code","version control"],"git-pull-request":["code","version control"],github:["logo","version control"],gitlab:["logo","version control"],globe:["world","browser","language","translate"],"hard-drive":["computer","server","memory","data"],hash:["hashtag","number","pound"],headphones:["music","audio","sound"],heart:["like","love","emotion"],"help-circle":["question mark"],hexagon:["shape","node.js","logo"],home:["house","living"],image:["picture"],inbox:["email"],instagram:["logo","camera"],key:["password","login","authentication","secure"],layers:["stack"],layout:["window","webpage"],"life-buoy":["help","life ring","support"],link:["chain","url"],"link-2":["chain","url"],linkedin:["logo","social media"],list:["options"],lock:["security","password","secure"],"log-in":["sign in","arrow","enter"],"log-out":["sign out","arrow","exit"],mail:["email","message"],"map-pin":["location","navigation","travel","marker"],map:["location","navigation","travel"],maximize:["fullscreen"],"maximize-2":["fullscreen","arrows","expand"],meh:["emoji","face","neutral","emotion"],menu:["bars","navigation","hamburger"],"message-circle":["comment","chat"],"message-square":["comment","chat"],"mic-off":["record","sound","mute"],mic:["record","sound","listen"],minimize:["exit fullscreen","close"],"minimize-2":["exit fullscreen","arrows","close"],minus:["subtract"],monitor:["tv","screen","display"],moon:["dark","night"],"more-horizontal":["ellipsis"],"more-vertical":["ellipsis"],"mouse-pointer":["arrow","cursor"],move:["arrows"],music:["note"],navigation:["location","travel"],"navigation-2":["location","travel"],octagon:["stop"],package:["box","container"],paperclip:["attachment"],pause:["music","stop"],"pause-circle":["music","audio","stop"],"pen-tool":["vector","drawing"],percent:["discount"],"phone-call":["ring"],"phone-forwarded":["call"],"phone-incoming":["call"],"phone-missed":["call"],"phone-off":["call","mute"],"phone-outgoing":["call"],phone:["call"],play:["music","start"],"pie-chart":["statistics","diagram"],"play-circle":["music","start"],plus:["add","new"],"plus-circle":["add","new"],"plus-square":["add","new"],pocket:["logo","save"],power:["on","off"],printer:["fax","office","device"],radio:["signal"],"refresh-cw":["synchronise","arrows"],"refresh-ccw":["arrows"],repeat:["loop","arrows"],rewind:["music"],"rotate-ccw":["arrow"],"rotate-cw":["arrow"],rss:["feed","subscribe"],save:["floppy disk"],scissors:["cut"],search:["find","magnifier","magnifying glass"],send:["message","mail","email","paper airplane","paper aeroplane"],settings:["cog","edit","gear","preferences"],"share-2":["network","connections"],shield:["security","secure"],"shield-off":["security","insecure"],"shopping-bag":["ecommerce","cart","purchase","store"],"shopping-cart":["ecommerce","cart","purchase","store"],shuffle:["music"],"skip-back":["music"],"skip-forward":["music"],slack:["logo"],slash:["ban","no"],sliders:["settings","controls"],smartphone:["cellphone","device"],smile:["emoji","face","happy","good","emotion"],speaker:["audio","music"],star:["bookmark","favorite","like"],"stop-circle":["media","music"],sun:["brightness","weather","light"],sunrise:["weather","time","morning","day"],sunset:["weather","time","evening","night"],tablet:["device"],tag:["label"],target:["logo","bullseye"],terminal:["code","command line","prompt"],thermometer:["temperature","celsius","fahrenheit","weather"],"thumbs-down":["dislike","bad","emotion"],"thumbs-up":["like","good","emotion"],"toggle-left":["on","off","switch"],"toggle-right":["on","off","switch"],tool:["settings","spanner"],trash:["garbage","delete","remove","bin"],"trash-2":["garbage","delete","remove","bin"],triangle:["delta"],truck:["delivery","van","shipping","transport","lorry"],tv:["television","stream"],twitch:["logo"],twitter:["logo","social"],type:["text"],umbrella:["rain","weather"],unlock:["security"],"user-check":["followed","subscribed"],"user-minus":["delete","remove","unfollow","unsubscribe"],"user-plus":["new","add","create","follow","subscribe"],"user-x":["delete","remove","unfollow","unsubscribe","unavailable"],user:["person","account"],users:["group"],"video-off":["camera","movie","film"],video:["camera","movie","film"],voicemail:["phone"],volume:["music","sound","mute"],"volume-1":["music","sound"],"volume-2":["music","sound"],"volume-x":["music","sound","mute"],watch:["clock","time"],"wifi-off":["disabled"],wifi:["connection","signal","wireless"],wind:["weather","air"],"x-circle":["cancel","close","delete","remove","times","clear"],"x-octagon":["delete","stop","alert","warning","times","clear"],"x-square":["cancel","close","delete","remove","times","clear"],x:["cancel","close","delete","remove","times","clear"],youtube:["logo","video","play"],"zap-off":["flash","camera","lightning"],zap:["flash","camera","lightning"],"zoom-in":["magnifying glass"],"zoom-out":["magnifying glass"]}},"./src/tags.json"),"./src/to-svg.js":
/* @__PURE__ */__name(function(i,a,s){Object.defineProperty(a,"__esModule",{value:!0});var o=_interopRequireDefault(s("./src/icons.js"));function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function toSvg(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(console.warn("feather.toSvg() is deprecated. Please use feather.icons[name].toSvg() instead."),!i)throw new Error("The required `key` (icon name) parameter is missing.");if(!o.default[i])throw new Error("No icon matching '"+i+"'. See the complete list of icons at https://feathericons.com");return o.default[i].toSvg(a)}__name(_interopRequireDefault,"_interopRequireDefault"),__name(toSvg,"toSvg"),a.default=toSvg},"./src/to-svg.js"),0:function(i,a,s){s("./node_modules/core-js/es/array/from.js"),i.exports=s("./src/index.js")}})})),HT.exports;var i}__name(requireFeather,"requireFeather");const GT=/* @__PURE__ */getDefaultExportFromCjs(requireFeather()),WT=class _PlaylistUtils{static detectMimeType(i){if(i.startsWith("data:")){const a=i.match(/data:([^;]+)/);return a?a[1]:"video/mp4"}return{mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",mov:"video/quicktime",avi:"video/x-msvideo",mkv:"video/x-matroska",m4v:"video/mp4",ogv:"video/ogg",mp3:"audio/mpeg",wav:"audio/wav",ogg:"audio/ogg",m4a:"audio/mp4",aac:"audio/aac",flac:"audio/flac",oga:"audio/ogg",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",json:"application/json",funscript:"application/json"}[new URL(i,window.location.href).pathname.toLowerCase().split(".").pop()]||"video/mp4"}static generateSilentAudio(i){const a=44100,s=Math.floor(i*a),o=new ArrayBuffer(44+2*s),u=new DataView(o),_=/* @__PURE__ */__name((i,a)=>{for(let s=0;s<a.length;s++)u.setUint8(i+s,a.charCodeAt(s))},"writeString");_(0,"RIFF"),u.setUint32(4,36+2*s,!0),_(8,"WAVE"),_(12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,1,!0),u.setUint32(24,a,!0),u.setUint32(28,88200,!0),u.setUint16(32,2,!0),u.setUint16(34,16,!0),_(36,"data"),u.setUint32(40,2*s,!0);for(let w=0;w<s;w++)u.setInt16(44+2*w,0,!0);const x=new Blob([o],{type:"audio/wav"});return URL.createObjectURL(x)}static generateSVGPoster(i,a){let s="file";if(i.sources&&i.sources.length>0){const a=i.sources[0],o=a.src.toLowerCase(),u=(a.type||"").toLowerCase();u.startsWith("audio/")||[".mp3",".wav",".ogg",".m4a",".aac"].some(i=>o.includes(i))?s="music":(u.startsWith("video/")||[".mp4",".webm",".mov",".avi",".mkv"].some(i=>o.includes(i)))&&(s="film")}else i.funscript?s="activity":i.duration&&(s="clock");const o=GT.icons[s].toSvg({width:16,height:16,stroke:"white","stroke-width":2});return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(`<svg width="48" height="32" xmlns="http://www.w3.org/2000/svg">\n      <rect width="48" height="32" fill="#000000" rx="4"/>\n      <g transform="translate(16, 8)">\n        ${o}\n      </g>\n    </svg>`)}`}static extractFunscriptDuration(i){try{let a=i;if("string"==typeof i){if(i.startsWith("http")||i.startsWith("/"))return console.warn("Cannot extract duration from funscript URL synchronously"),0;a=JSON.parse(i)}if(!a||"object"!=typeof a)return 0;if(a.duration&&"number"==typeof a.duration)return a.duration;let s=0;if(a.actions&&Array.isArray(a.actions)&&a.actions.length>0){const i=a.actions[a.actions.length-1];i&&"number"==typeof i.at&&(s=Math.max(s,i.at))}for(const[i,o]of Object.entries(a))if(Array.isArray(o)&&o.length>0){const i=o[o.length-1];i&&"number"==typeof i.at?s=Math.max(s,i.at):i&&"number"==typeof i.t?s=Math.max(s,i.t):i&&"number"==typeof i.time&&(s=Math.max(s,i.time))}return s>0?s/1e3+1:0}catch(a){return 0}}static async generatePosterFromVideo(i,a=10,s=480){return new Promise((o,u)=>{const _=document.createElement("video"),x=document.createElement("canvas"),w=x.getContext("2d");_.crossOrigin="anonymous",_.muted=!0,_.style.display="none",document.body.appendChild(_);const C=/* @__PURE__ */__name(()=>{_.parentNode&&_.parentNode.removeChild(_)},"cleanup");_.onloadedmetadata=()=>{const i=_.videoWidth/_.videoHeight;_.videoWidth>s?(x.width=s,x.height=s/i):(x.width=_.videoWidth,x.height=_.videoHeight),_.currentTime=Math.min(a,_.duration-1)},_.onseeked=()=>{try{w.drawImage(_,0,0,x.width,x.height);const i=x.toDataURL("image/jpeg",.8);if(i&&i.length>1e3){Math.round(.75*i.length/1024);C(),o(i)}else C(),u(new Error("Failed to generate valid poster"))}catch(i){C(),u(i)}},_.onerror=()=>{C(),u(new Error("Video loading failed"))},_.src=i,_.load()})}static isSupportedMediaFile(i){const a=i.toLowerCase().split(".").pop();return["mp4","webm","mov","avi","mkv","ogv","m4v","mp3","wav","ogg","m4a","aac","flac"].includes(a)}static isFunscriptFile(i){const a=i.toLowerCase().split(".").pop();return["funscript","json"].includes(a)}static extractFilename(i){if(i.startsWith("data:"))return"uploaded_file";try{return new URL(i,window.location.href).pathname.split("/").pop().split(".")[0]||"unnamed"}catch{return"unnamed"}}static deepComparePlaylist(i,a){if(i===a)return!0;if(!i||!a)return i===a;if(i.length!==a.length)return!1;for(let s=0;s<i.length;s++)if(!_PlaylistUtils.deepComparePlaylistItem(i[s],a[s]))return!1;return!0}static deepComparePlaylistItem(i,a){if(i===a)return!0;if(!i||!a)return i===a;const s=/* @__PURE__ */new Set(["_id","_generatedPoster","poster"]),o=Object.keys(i).filter(i=>!s.has(i)),u=Object.keys(a).filter(i=>!s.has(i));if(o.length!==u.length)return!1;for(const _ of o){if(!u.includes(_))return!1;const s=i[_],o=a[_];if("object"==typeof s&&"object"==typeof o)if(Array.isArray(s)&&Array.isArray(o)){if(!_PlaylistUtils.deepCompareArray(s,o))return!1}else{if(Array.isArray(s)||Array.isArray(o))return!1;if(!_PlaylistUtils.deepCompareObject(s,o))return!1}else if(s!==o)return!1}return!0}static deepCompareArray(i,a){if(i.length!==a.length)return!1;for(let s=0;s<i.length;s++){const o=i[s],u=a[s];if("object"==typeof o&&"object"==typeof u)if(Array.isArray(o)&&Array.isArray(u)){if(!_PlaylistUtils.deepCompareArray(o,u))return!1}else{if(Array.isArray(o)||Array.isArray(u))return!1;if(!_PlaylistUtils.deepCompareObject(o,u))return!1}else if(o!==u)return!1}return!0}static deepCompareObject(i,a){if(!i||!a)return i===a;const s=Object.keys(i),o=Object.keys(a);if(s.length!==o.length)return!1;for(const u of s){if(!o.includes(u))return!1;const s=i[u],_=a[u];if("object"==typeof s&&"object"==typeof _)if(Array.isArray(s)&&Array.isArray(_)){if(!_PlaylistUtils.deepCompareArray(s,_))return!1}else{if(Array.isArray(s)||Array.isArray(_))return!1;if(!_PlaylistUtils.deepCompareObject(s,_))return!1}else if(s!==_)return!1}return!0}};__name(WT,"PlaylistUtils");let qT=WT;const XT=class _PlaylistManager{constructor(i){__publicField(this,"loadPlaylist",/* @__PURE__ */__name(async i=>{if(!i||0===i.length)return this._resetPlaylist(),this.notify?.("status:playlist",{message:"No playlist to load",type:"info"}),this.notify?.("playlist:loaded",{items:[],originalPlaylist:[],totalItems:0}),[];try{if(qT.deepComparePlaylist(this.originalPlaylist,i))return this.notify?.("status:playlist",{message:"Playlist content identical, keeping current state",type:"log"}),this.items;this.notify?.("status:playlist",{message:`Playlist content changed, processing ${i.length} items...`,type:"processing"}),this.originalPlaylist=[...i];const a=await this.processPlaylist(i);return this.items=a,this.currentIndex=a.length>0?0:-1,this.notify?.("status:playlist",{message:`Playlist loaded: ${a.length} items processed`,type:"success"}),this.notify?.("playlist:loaded",{items:this.items,originalPlaylist:this.originalPlaylist,totalItems:this.items.length}),this.items}catch(a){throw this.notify?.("status:playlist",{message:"Playlist loading failed",type:"error",error:a.message}),a}},"loadPlaylist")),__publicField(this,"processPlaylist",/* @__PURE__ */__name(async i=>{this.notify?.("status:playlist",{message:"Starting playlist processing pipeline...",type:"log"});const a=this.filterValidItems(i);this.notify?.("status:playlist",{message:`Filtered to ${a.length} valid items`,type:"log"});const s=this.markItemTypes(a);this.notify?.("status:playlist",{message:"Item types marked",type:"log"});const o=this.addFallbackPosters(s);this.notify?.("status:playlist",{message:"Fallback posters generated",type:"log"});const u=this.processNoMediaItems(o);this.notify?.("status:playlist",{message:"Silent audio generated for haptic-only items",type:"log"});const _=this.normalizeSources(u);return this.notify?.("status:playlist",{message:"Source normalization complete",type:"log"}),_},"processPlaylist")),__publicField(this,"filterValidItems",/* @__PURE__ */__name(i=>{this.notify?.("status:playlist",{message:`Filtering ${i.length} items for validity...`,type:"log"});const a=i.filter((i,a)=>!!(i.sources&&i.sources.length>0)||(!!i.funscript||(!i.duration||i.sources||i.funscript?(this.notify?.("status:playlist",{message:`Filtered out empty item ${a+1}`,type:"log"}),!1):(this.notify?.("status:playlist",{message:`Filtered out timeline-only item ${a+1}`,type:"log"}),!1)))),s=i.length-a.length;return s>0&&this.notify?.("status:playlist",{message:`Filtered out ${s} invalid items`,type:"info"}),a},"filterValidItems")),__publicField(this,"markItemTypes",/* @__PURE__ */__name(i=>(this.notify?.("status:playlist",{message:"Analyzing item types...",type:"log"}),i.map((i,a)=>{let s="unknown";if(i.sources&&i.sources.length>0){const a=i.sources[0],o=(a.type||qT.detectMimeType(a.src)).toLowerCase();s=o.startsWith("video/")?i.funscript?"video_haptic":"video":o.startsWith("audio/")?i.funscript?"audio_haptic":"audio":"media"}else i.funscript&&(s="haptic");return this.notify?.("status:playlist",{message:`Item ${a+1}: ${s}`,type:"log"}),{...i,item_type:s}})),"markItemTypes")),__publicField(this,"processNoMediaItems",/* @__PURE__ */__name(i=>{this.notify?.("status:playlist",{message:"Processing haptic-only items...",type:"log"});let a=0;const s=i.map((i,s)=>{if(i.sources&&i.sources.length>0)return i;if(i.funscript)try{const o=qT.extractFunscriptDuration(i.funscript);if(o>0){const u=qT.generateSilentAudio(o);return a++,this.notify?.("status:playlist",{message:`Generated ${o.toFixed(1)}s silent audio for item ${s+1}`,type:"log"}),{...i,sources:[{src:u,type:"audio/wav"}]}}}catch(o){this.notify?.("status:playlist",{message:`Failed to process funscript for item ${s+1}: ${o.message}`,type:"error"})}return this.notify?.("status:playlist",{message:`Unexpected item without sources or funscript at index ${s}`,type:"log"}),i});return a>0&&this.notify?.("status:playlist",{message:`Generated silent audio for ${a} haptic-only items`,type:"info"}),s},"processNoMediaItems")),__publicField(this,"normalizeSources",/* @__PURE__ */__name(i=>(this.notify?.("status:playlist",{message:"Normalizing source MIME types...",type:"log"}),i.map(i=>{if(!i.sources||0===i.sources.length)return i;const a=i.sources.map(i=>({...i,type:i.type||qT.detectMimeType(i.src)}));return{...i,sources:a}})),"normalizeSources")),__publicField(this,"addFallbackPosters",/* @__PURE__ */__name(i=>{this.notify?.("status:playlist",{message:"Generating fallback posters...",type:"log"});let a=0;const s=i.map((i,s)=>i.poster?i:(a++,{...i,poster:qT.generateSVGPoster(i,s),_generatedPoster:!0}));return a>0&&this.notify?.("status:playlist",{message:`Generated ${a} SVG fallback posters`,type:"log"}),s},"addFallbackPosters")),__publicField(this,"next",/* @__PURE__ */__name(()=>{if(0===this.items.length)return this.notify?.("status:playlist",{message:"Cannot go next: empty playlist",type:"info"}),!1;const i=this.currentIndex+1;return i>=this.items.length?(this.notify?.("status:playlist",{message:"Cannot go next: end of playlist reached",type:"info"}),!1):this.goTo(i)},"next")),__publicField(this,"previous",/* @__PURE__ */__name(()=>{if(0===this.items.length)return this.notify?.("status:playlist",{message:"Cannot go previous: empty playlist",type:"info"}),!1;const i=this.currentIndex-1;return i<0?(this.notify?.("status:playlist",{message:"Cannot go previous: beginning of playlist reached",type:"info"}),!1):this.goTo(i)},"previous")),__publicField(this,"goTo",/* @__PURE__ */__name(i=>{if(0===this.items.length)return this.notify?.("status:playlist",{message:"Cannot navigate: empty playlist",type:"error"}),!1;if(i<0||i>=this.items.length)return this.notify?.("status:playlist",{message:`Cannot navigate to index ${i}: out of bounds`,type:"error"}),!1;const a=this.currentIndex;this.currentIndex=i;const s=this.items[i],o=s?.name||`Item ${i+1}`;return this.notify?.("status:playlist",{message:`Playing: ${o} (${i+1}/${this.items.length})`,type:"success"}),this.notify?.("playlist:itemChanged",{index:i,item:s?{...s}:null,previousIndex:a,hasNext:this.canNext(),hasPrevious:this.canPrevious()}),!0},"goTo")),__publicField(this,"canNext",/* @__PURE__ */__name(()=>this.items.length>0&&this.currentIndex<this.items.length-1,"canNext")),__publicField(this,"canPrevious",/* @__PURE__ */__name(()=>this.items.length>0&&this.currentIndex>0,"canPrevious")),__publicField(this,"getCurrentIndex",/* @__PURE__ */__name(()=>this.currentIndex,"getCurrentIndex")),__publicField(this,"getCurrentItem",/* @__PURE__ */__name(()=>this.currentIndex>=0&&this.currentIndex<this.items.length?this.items[this.currentIndex]:null,"getCurrentItem")),__publicField(this,"getOriginalPlaylist",/* @__PURE__ */__name(()=>[...this.originalPlaylist],"getOriginalPlaylist")),__publicField(this,"getPlaylistInfo",/* @__PURE__ */__name(()=>({currentIndex:this.currentIndex,totalItems:this.items.length,hasPlaylist:this.items.length>0,canNext:this.canNext(),canPrevious:this.canPrevious(),isPlaying:this.isPlaying,currentTime:this.currentTime,duration:this.duration}),"getPlaylistInfo")),__publicField(this,"updatePlaybackState",/* @__PURE__ */__name((i,a=null,s=null)=>{let o=!1;this.isPlaying!==i&&(this.isPlaying=i,o=!0),null!==a&&this.currentTime!==a&&(this.currentTime=a,o=!0),null!==s&&this.duration!==s&&(this.duration=s,o=!0),o&&(this.notify?.("status:playlist",{message:`Playback state: ${i?"playing":"paused"} ${a?.toFixed(1)}s/${s?.toFixed(1)}s`,type:"log"}),this.notify?.("playlist:playbackChanged",{isPlaying:this.isPlaying,currentTime:this.currentTime,duration:this.duration,currentIndex:this.currentIndex,currentItem:this.getCurrentItem(),playlistInfo:this.getPlaylistInfo()}))},"updatePlaybackState")),__publicField(this,"updateCurrentItemDuration",/* @__PURE__ */__name(i=>{const a=this.getCurrentItem();if(!a)return!1;const s=a.duration;return a.duration=i,this.notify?.("status:playlist",{message:`Duration corrected: ${s?.toFixed(1)||"unknown"}s → ${i.toFixed(1)}s`,type:"log"}),this.notify?.("playlist:itemUpdated",{index:this.currentIndex,item:{...a},change:{field:"duration",oldValue:s,newValue:i}}),!0},"updateCurrentItemDuration")),__publicField(this,"_resetPlaylist",/* @__PURE__ */__name(()=>{this.currentIndex=-1,this.items=[],this.originalPlaylist=[],this.isPlaying=!1,this.currentTime=0,this.duration=0},"_resetPlaylist")),__publicField(this,"reset",/* @__PURE__ */__name(()=>{this._resetPlaylist(),this.notify?.("status:playlist",{message:"Playlist manager reset",type:"info"})},"reset")),__publicField(this,"cleanup",/* @__PURE__ */__name(()=>{this._resetPlaylist(),this.notify?.("status:playlist",{message:"Playlist manager cleanup completed",type:"log"})},"cleanup")),__publicField(this,"getStats",/* @__PURE__ */__name(()=>({totalItems:this.items.length,currentIndex:this.currentIndex,isPlaying:this.isPlaying,hasGeneratedPosters:this.items.filter(i=>i._generatedPoster).length,processingComplete:!0}),"getStats")),__publicField(this,"getDebugInfo",/* @__PURE__ */__name(()=>{const i=this.getStats();return this.notify?.("status:playlist",{message:`Debug info requested: ${i.totalItems} items, index ${i.currentIndex}, ${i.hasGeneratedPosters} generated posters`,type:"log"}),{state:{currentIndex:this.currentIndex,totalItems:this.items.length,isPlaying:this.isPlaying,currentTime:this.currentTime,duration:this.duration},currentItem:this.getCurrentItem(),navigation:{canNext:this.canNext(),canPrevious:this.canPrevious()},stats:i}},"getDebugInfo")),this.notify=i,this.currentIndex=-1,this.items=[],this.originalPlaylist=[],this.isPlaying=!1,this.currentTime=0,this.duration=0}};__name(XT,"PlaylistManager");let QT=XT;const KT=class _LoggingManager{constructor(i){this.notify=i,this.enableConsoleLogging=!1,this.maxDebugLogs=1e3,this.sessionStart=performance.now(),this.debugLogs=[],this.statusEmojis={log:"📝",info:"ℹ️",success:"✅",warning:"⚠️",error:"❌",processing:"⏳",device:"🔌",funscript:"📊",playlist:"📋",media:"🎬"}}createMessage(i,a={}){return{timestamp:/* @__PURE__ */(new Date).toISOString(),relativeTime:((performance.now()-this.sessionStart)/1e3).toFixed(3),source:this._extractSource(i),type:a.type||"log",message:a.message||"",error:a.error||null,event:i,id:this._generateMessageId()}}formatMessage(i,a=!1){return`${this.statusEmojis[i.type]||"📝"} ${a?`[${i.relativeTime.padStart(8)}s] `:""}${`[${i.source.padEnd(13)}]`} ${`[${({log:"LOG",info:"INFO",success:"SUCCESS",warning:"WARNING",error:"ERROR",processing:"PROCESSING"}[i.type]||i.type.toUpperCase()).padEnd(13)}]`} ${i.message}${i.error?` (ERROR: ${i.error})`:""}`}addInitialSessionMessage(){this.notify("status:core",{message:"FunPlayerCore session started",type:"info"})}log(i,a={}){const s=this.createMessage(i,a);return this._addMessage(s),this.enableConsoleLogging&&this._outputToConsole(s),this.notify?.("logging:new-message",{messageObj:s}),s}getLogs(){return[...this.debugLogs]}getFormattedLogs(){return this.debugLogs.map(i=>this.formatMessage(i,!0)).join("\n")}getFilteredLogs(i={}){return this.debugLogs.filter(a=>(!i.source||a.source===i.source)&&((!i.type||a.type===i.type)&&(!(i.since&&new Date(a.timestamp)<i.since)&&!(i.until&&new Date(a.timestamp)>i.until))))}clear(){this.debugLogs=[],this.sessionStart=performance.now(),this.addInitialSessionMessage(),this.notify("status:logging",{message:"Logs cleared",type:"info"})}generateExportContent(){return`FunPlayer Debug Log\nGenerated: ${/* @__PURE__ */(new Date).toISOString()}\nTotal entries: ${this.debugLogs.length}\nSession duration: ${((performance.now()-this.sessionStart)/1e3).toFixed(1)}s\nConsole logging: ${this.enableConsoleLogging?"enabled":"disabled"}\n\n${"=".repeat(80)}\n\n`+this.debugLogs.map(i=>this.formatMessage(i,!0)).join("\n")}setConsoleLogging(i){this.enableConsoleLogging=i,this.notify?.("status:config",{message:"Console logging "+(i?"enabled":"disabled"),type:"info"})}getConsoleLogging(){return this.enableConsoleLogging}setMaxLogs(i){this.maxDebugLogs=Math.max(100,i),this._rotateLogsIfNeeded(),this.notify?.("logging:config",{message:`Max logs set to ${this.maxDebugLogs}`,type:"info"})}getMaxLogs(){return this.maxDebugLogs}_addMessage(i){this.debugLogs.push(i),this._rotateLogsIfNeeded()}_rotateLogsIfNeeded(){this.debugLogs.length>this.maxDebugLogs&&(this.debugLogs=this.debugLogs.slice(-this.maxDebugLogs))}_extractSource(i){return i.split(":")[1]||i.split(":")[0]||"unknown"}_generateMessageId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}_outputToConsole(i){const a=this.formatMessage(i);switch(i.type){case"error":console.error(a,i.error||"");break;case"warning":console.warn(a);break;case"info":case"success":console.info(a);break;default:console.log(a)}}};__name(KT,"LoggingManager");let YT=KT;const JT=class _FunPlayerCore{constructor(){__publicField(this,"notify",/* @__PURE__ */__name((i,a)=>{this.listeners.forEach(s=>{try{s(i,a)}catch(o){this.enableConsoleLogging&&console.error("Core: Listener error:",o)}})},"notify")),__publicField(this,"handleEvent",/* @__PURE__ */__name((i,a)=>{i.startsWith("status:")?this._handleStatusEvent(i,a):i.startsWith("buttplug:")?this._handleButtplugEvent(i,a):i.startsWith("channel:")?this._handleChannelEvent(i,a):i.startsWith("actuator:")?this._handleActuatorEvent(i,a):i.startsWith("funscript:")?this._handleFunscriptEvent(i,a):i.startsWith("playlist:")?this._handlePlaylistEvent(i,a):i.startsWith("media:")?this._handleMediaEvent(i,a):i.startsWith("core:")?this._handleCoreEvent(i,a):i.startsWith("logging:")?this._handleLoggingEvent(i,a):i.startsWith("component:")?this._handleComponentEvent(i,a):this.enableConsoleLogging&&console.warn(`FunPlayerCore: Unknown event type ${i}`)},"handleEvent")),__publicField(this,"_handleStatusEvent",/* @__PURE__ */__name((i,a)=>{const s=this.logging.log(i,a);switch(s.type){case"log":break;case"error":this.setError(s);break;default:this.setStatus(s)}},"_handleStatusEvent")),__publicField(this,"_handleCoreEvent",/* @__PURE__ */__name((i,a)=>{switch(i){case"core:autoConnect":a.success?this.setStatus({source:"core",message:`Auto-connected to ${a.device.name} (${a.mapResult.mapped}/${a.mapResult.total} channels mapped)`,type:"success"}):this.setError({source:"core",message:"Auto-connect failed",type:"error",error:a.error});break;case"core:autoMap":this.setStatus({source:"core",message:`Auto-mapped ${a.result.mapped} new channels`,type:"success"})}},"_handleCoreEvent")),__publicField(this,"_handleButtplugEvent",/* @__PURE__ */__name((i,a)=>{switch(i){case"buttplug:connection":this.setStatus({source:"buttplug",message:a.connected?"Connected to Intiface":"Disconnected from Intiface",type:a.connected?"success":"info"});break;case"buttplug:device":this.setStatus({source:"buttplug",message:a.device?`Device selected: ${a.device.name}`:"No device selected",type:a.device?"success":"info"}),a.device&&setTimeout(()=>{this.autoMapChannels()},100);break;case"buttplug:error":this.setError({source:"buttplug",message:"Device error",type:"error",error:a.error})}},"_handleButtplugEvent")),__publicField(this,"_handleFunscriptEvent",/* @__PURE__ */__name((i,a)=>{if("funscript:load"===i)setTimeout(()=>{this.autoMapChannels()},100)},"_handleFunscriptEvent")),__publicField(this,"_handlePlaylistEvent",/* @__PURE__ */__name((i,a)=>{switch(i){case"playlist:loaded":if(this.isReady=!1,a.items&&a.items.length>0){const i=a.items[0];this.notify?.("status:core",{message:`Preloading funscript for first item: ${i.name||"Untitled"}`,type:"log"}),this.funscript.loadFromPlaylistItem(i).then(()=>{this.notify?.("status:core",{message:`First item ready: ${i.name||"Untitled"}`,type:"success"}),this.setReady(!0)}).catch(i=>{this.notify?.("status:core",{message:"Failed to preload funscript for first item",type:"error",error:i.message}),this.setReady(!0)})}else this.setReady(!0);break;case"playlist:itemChanged":this.isReady=!1,this.buttplug.stopAll().catch(i=>console.warn("Failed to stop devices:",i)),a.item?this.funscript.loadFromPlaylistItem(a.item).then(()=>{this.setReady(!0)}).catch(i=>{console.error("Failed to load funscript for item:",i),this.setReady(!0)}):this.setReady(!0)}},"_handlePlaylistEvent")),__publicField(this,"_handleActuatorEvent",/* @__PURE__ */__name((i,a)=>{},"_handleActuatorEvent")),__publicField(this,"_handleChannelEvent",/* @__PURE__ */__name((i,a)=>{},"_handleChannelEvent")),__publicField(this,"_handleLoggingEvent",/* @__PURE__ */__name((i,a)=>{},"_handleLoggingEvent")),__publicField(this,"_handleMediaEvent",/* @__PURE__ */__name((i,a)=>{},"_handleMediaEvent")),__publicField(this,"_handleComponentEvent",/* @__PURE__ */__name((i,a)=>{},"_handleComponentEvent")),__publicField(this,"setStatus",/* @__PURE__ */__name(i=>{const a=`[${i.source.charAt(0).toUpperCase()+i.source.slice(1)}] ${i.message}`;this.status=a,this.error=null,this.notify("core:status",{status:a,error:null,messageObj:i})},"setStatus")),__publicField(this,"setError",/* @__PURE__ */__name(i=>{const a=`[${i.source.charAt(0).toUpperCase()+i.source.slice(1)}] ${i.message}`;this.error=a,this.status="error",this.isReady=!1,i.error&&console.error(`FunPlayer Core Error: ${a}`,i.error),this.notify("core:status",{status:"error",error:a,messageObj:i})},"setError")),__publicField(this,"setReady",/* @__PURE__ */__name(i=>{this.isReady=i,this.notify("core:ready",{isReady:i})},"setReady")),this.enableConsoleLogging=!1,this.debugLogs=[],this.maxDebugLogs=1e3,this.sessionStart=performance.now(),this._buttplug=null,this._funscript=null,this._playlist=null,this._logging=null,this.status="idle",this.error=null,this.isReady=!1,this.listeners=/* @__PURE__ */new Set,this.addListener(this.handleEvent),this.logging.addInitialSessionMessage()}addListener(i){return this.listeners.add(i),()=>this.listeners.delete(i)}get buttplug(){return this._buttplug||(this._buttplug=new BT(this.notify)),this._buttplug}get funscript(){return this._funscript||(this._funscript=new VT(this.notify)),this._funscript}get playlist(){return this._playlist||(this._playlist=new QT(this.notify)),this._playlist}get logging(){return this._logging||(this._logging=new YT(this.notify)),this._logging}plugChannel(i,a){const s=this.funscript.getChannel(i),o=this.buttplug.getActuator(a);return!(!s||!o)&&s.plug(o)}unplugChannel(i,a){const s=this.funscript.getChannel(i),o=this.buttplug.getActuator(a);return!(!s||!o)&&(s.unplug(o),!0)}unplugAllChannels(){this.funscript.getChannels().forEach(i=>{i.unplugAll()})}async autoConnect(i=3e3){try{if(!(await this.buttplug.connect()))throw new Error("Failed to connect to Intiface Central");const i=this.buttplug.getDevices().filter(i=>i.index>=0);if(0===i.length)throw new Error("No physical device found");if(!this.buttplug.selectDevice(i[0].index))throw new Error("Failed to select device");const a=this.autoMapChannels();return this.notify("core:autoConnect",{success:!0,device:i[0],mapResult:a,deviceInfo:this.buttplug.getDeviceInfo()}),this.notify("status:core",{message:`AutoConnect successful: ${i[0].name}`,type:"success"}),{success:!0,device:i[0],mapResult:a}}catch(a){return this.notify("core:autoConnect",{success:!1,error:a.message}),this.notify("status:core",{message:"AutoConnect failed",type:"error",error:a.message}),{success:!1,error:a.message}}}async processHapticFrame(i,a={}){if(0===this.funscript.getChannels().length)/* @__PURE__ */
return new Map;const s=this.buttplug.getTimeWithOffsets(i),o=Object.fromEntries(s.entries()),u=this.funscript.interpolateAll(o);return await this.buttplug.processChannels(u)}autoMapChannels(){const i=this.buttplug.getActuators(),a=this.funscript.getChannels();if(0===i.length)return this.notify("status:core",{message:"No actuators available for auto-mapping",type:"info"}),{mapped:0,total:0,skippedIncompatible:0,strategy:"no_actuators"};if(0===a.length)return this.notify("status:core",{message:"No channels available for auto-mapping",type:"info"}),{mapped:0,total:i.length,skippedIncompatible:0,strategy:"no_channels"};this.notify("status:core",{message:`🎯 Starting intelligent autoMap: ${i.length} actuators → ${a.length} channels`,type:"processing"}),this._savePreviousMappings(i);const s={mappedActuators:/* @__PURE__ */new Set,assignedChannels:/* @__PURE__ */new Map,unmappedChannels:new Set(a.map(i=>i.name)),statistics:{priorityByName:0,priorityByCapability:0,priorityByType:0,fallbackMultiAssignment:0,incompatible:0}};this._phase1PriorityMapping(i,a,s),this._phase2FallbackMapping(i,a,s);const o=this._buildAutoMapResult(s,i.length);return this.notify("core:autoMap",{result:o,deviceInfo:this.buttplug.getDeviceInfo(),strategy:"intelligent_persistent"}),o}_savePreviousMappings(i){let a=0;for(const s of i)if(s.isPlugged()){const i=s.getAssignedChannelName();this.notify("status:core",{message:`💾 Saving mapping: Actuator ${s.index} was connected to "${i}"`,type:"log"}),a++}a>0&&this.notify("status:core",{message:`💾 Saved ${a} previous mappings for intelligent autoMap`,type:"info"})}_phase1PriorityMapping(i,a,s){this.notify("status:core",{message:"🎯 Phase 1: Priority mapping (name → capability → type)",type:"log"});for(const o of i)o.settings.enabled?this._tryMapByPreviousName(o,a,s)||this._tryMapByCapability(o,a,s,!1)||this._tryMapByType(o,a,s,!1):this.notify("status:core",{message:`⏭️ Skipping disabled actuator ${o.index}`,type:"log"})}_phase2FallbackMapping(i,a,s){this.notify("status:core",{message:"🎯 Phase 2: Fallback multi-assignment on already mapped channels",type:"log"});for(const o of i)o.settings.enabled&&!s.mappedActuators.has(o.index)&&(this._tryMapByCapability(o,a,s,!0)||this._tryMapByType(o,a,s,!0)||(s.statistics.incompatible++,this.notify("status:core",{message:`❌ No mapping found for actuator ${o.index} (${o.capability}/${o.type})`,type:"warning"})))}_tryMapByPreviousName(i,a,s){const o=i.getPreviousMappedChannelName();if(!o)return!1;const u=a.find(i=>i.name===o);if(!u)return this.notify("status:core",{message:`🔍 Previous channel "${o}" not found in new funscript for actuator ${i.index}`,type:"log"}),!1;if(!i.canPlugTo(u))return this.notify("status:core",{message:`🔍 Previous channel "${o}" incompatible with actuator ${i.index} (${i.type} vs ${u.type})`,type:"log"}),!1;return!!u.plug(i)&&(this._recordSuccessfulMapping(i,u,s,"previous_name"),s.statistics.priorityByName++,this.notify("status:core",{message:`✅ [PRIORITY NAME] Actuator ${i.index} → "${u.name}" (restored previous mapping)`,type:"success"}),!0)}_tryMapByCapability(i,a,s,o){const u=a.filter(a=>{if(!i.canPlugTo(a))return!1;if(a.likelyCapability!==i.capability)return!1;const u=s.assignedChannels.has(a.name);return o||!u});if(0===u.length)return!1;const _=u[0];if(_.plug(i)){const a=o?"MULTI-CAPABILITY":"CAPABILITY";return this._recordSuccessfulMapping(i,_,s,"capability"),o?s.statistics.fallbackMultiAssignment++:s.statistics.priorityByCapability++,this.notify("status:core",{message:`✅ [${a}] Actuator ${i.index} → "${_.name}" (${i.capability} match)`,type:"success"}),!0}return!1}_tryMapByType(i,a,s,o){const u=a.filter(a=>{if(!i.canPlugTo(a))return!1;const u=s.assignedChannels.has(a.name);return o||!u});if(0===u.length)return!1;const _=u[0];if(_.plug(i)){const a=o?"MULTI-TYPE":"TYPE";return this._recordSuccessfulMapping(i,_,s,"type"),o?s.statistics.fallbackMultiAssignment++:s.statistics.priorityByType++,this.notify("status:core",{message:`✅ [${a}] Actuator ${i.index} → "${_.name}" (${i.type} type match)`,type:"success"}),!0}return!1}_recordSuccessfulMapping(i,a,s,o){s.mappedActuators.add(i.index),s.assignedChannels.has(a.name)||(s.assignedChannels.set(a.name,[]),s.unmappedChannels.delete(a.name)),s.assignedChannels.get(a.name).push({actuatorIndex:i.index,reason:o})}_buildAutoMapResult(i,a){const s=i.mappedActuators.size,o=Array.from(i.assignedChannels.entries()).filter(([i,a])=>a.length>1).length;this.notify("status:core",{message:`🎯 AutoMap completed: ${s}/${a} actuators mapped`+(o>0?`, ${o} channels multi-assigned`:""),type:s>0?"success":"warning"});const u=i.statistics;return u.priorityByName>0&&this.notify("status:core",{message:`📊 Priority mappings: ${u.priorityByName} by name, ${u.priorityByCapability} by capability, ${u.priorityByType} by type`,type:"log"}),u.fallbackMultiAssignment>0&&this.notify("status:core",{message:`📊 Fallback multi-assignments: ${u.fallbackMultiAssignment}`,type:"log"}),u.incompatible>0&&this.notify("status:core",{message:`📊 Incompatible actuators: ${u.incompatible}`,type:"log"}),{mapped:s,total:a,skippedIncompatible:u.incompatible,strategy:"intelligent_persistent",statistics:{...u,multiAssignedChannels:o,unmappedChannels:i.unmappedChannels.size},details:{assignedChannels:Object.fromEntries(i.assignedChannels.entries()),unmappedChannels:Array.from(i.unmappedChannels)}}}clearAllPreviousMappings(){const i=this.buttplug.getActuators();let a=0;for(const s of i)s.hasPreviousMapping()&&(s.forgetPreviousMapping(),a++);return this.notify("status:core",{message:`🧹 Cleared ${a} previous mappings`,type:"info"}),{cleared:a,total:i.length}}getPreviousMappingsDiagnostic(){const i=this.buttplug.getActuators(),a=this.funscript.getChannelNames(),s=i.map(i=>{const s=i.getPreviousMappedChannelName(),o=i.getAssignedChannelName(),u=!!s&&a.includes(s),_=!!u&&i.canPlugTo(this.funscript.getChannel(s));return{actuatorIndex:i.index,capability:i.capability,type:i.type,currentChannel:o,previousChannel:s,isAvailable:u,isCompatible:_,canRestore:u&&_}}),o={total:i.length,withPreviousMapping:s.filter(i=>i.previousChannel).length,canRestore:s.filter(i=>i.canRestore).length,lost:s.filter(i=>i.previousChannel&&!i.isAvailable).length,incompatible:s.filter(i=>i.previousChannel&&i.isAvailable&&!i.isCompatible).length};return{diagnostics:s,stats:o}}getCompatibilityDiagnostic(){const i=this.funscript.getChannels(),a=this.buttplug.getActuators();if(0===i.length)return{channels:[],actuators:[],issues:["No funscript loaded"]};const s=i.map(i=>{const s=a.filter(a=>i.canPlugTo(a)).map(i=>i.index);return{channel:i.name,type:i.type,valueRange:i.valueRange,compatibleActuators:s,isOrphaned:0===s.length,connectedActuators:Array.from(i.connectedActuators.keys())}}),o=a.map(a=>{const s=i.filter(i=>i.canPlugTo(a)).map(i=>i.name);return{index:a.index,type:a.type,capability:a.capability,compatibleChannels:s,isUnused:0===s.length,assignedChannel:a.getAssignedChannelName()}}),u=[],_=s.filter(i=>i.isOrphaned),x=o.filter(i=>i.isUnused);return _.length>0&&u.push(`${_.length} channel(s) have no compatible actuators`),x.length>0&&u.push(`${x.length} actuator(s) have no compatible channels`),{channels:s,actuators:o,issues:u}}getStatus(){return{status:this.status,error:this.error,isReady:this.isReady,buttplug:this.buttplug.getStatus(),funscript:this.funscript?.getDebugInfo()||{loaded:!1},playlist:this.playlist.getStats()}}async cleanup(){this._buttplug&&(await this._buttplug.cleanup(),this._buttplug=null),this._playlist&&(this._playlist.cleanup(),this._playlist=null),this._funscript&&(this._funscript.reset(),this._funscript=null),this.status="idle",this.error=null,this.isReady=!1,this.listeners.clear(),this.logging.enableConsoleLogging&&console.log("Core: Cleanup complete"),this._logging&&(this._logging.cleanup(),this._logging=null)}};__name(JT,"FunPlayerCore"),__publicField(JT,"instance",null);let ZT=JT;var eS=Object.defineProperty,tS=/* @__PURE__ */__name((i,a,s)=>a in i?eS(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,"__defNormalProp$7"),nS=/* @__PURE__ */__name((i,a,s)=>tS(i,"symbol"!=typeof a?a+"":a,s),"__publicField$7");const iS=class _PlaylistComponent extends Zt.Component{constructor(i){super(i),nS(this,"handleEvent",(i,a)=>{["playlist:loaded","playlist:itemChanged"].includes(i)&&(this._triggerRender(),this.core.notify("component:resize",{source:"PlaylistComponent",reason:"playlist:loaded"===i?"playlist-loaded":"item-changed"}))}),nS(this,"_triggerRender",()=>{this.setState(i=>({renderTrigger:i.renderTrigger+1}))}),nS(this,"handleItemClick",i=>{this.core.playlist.goTo(i)||console.error("PlaylistComponent: Failed to go to item",i)}),nS(this,"getItemTitle",(i,a)=>{if(i.name)return i.name;if(i.title)return i.title;if(i.sources&&i.sources.length>0){const s=i.sources[0];if(s.src.startsWith("data:")){const i=s.src.match(/data:([^;]+)/);return`Uploaded ${(i?i[1]:"unknown").split("/")[0]}`}return s.src.split("/").pop().split(".")[0]||`Item ${a+1}`}if(i.funscript&&"string"==typeof i.funscript){if(i.funscript.startsWith("data:"))return"Uploaded funscript";return i.funscript.split("/").pop().split(".")[0]||`Haptic ${a+1}`}return`Item ${a+1}`}),nS(this,"getItemInfo",i=>{const a=[];switch(i.item_type){case"video":case"video_haptic":a.push("VIDEO");break;case"audio":case"audio_haptic":a.push("AUDIO");break;case"haptic":a.push("HAPTIC")}if(i.duration){const s=Math.floor(i.duration/60),o=Math.floor(i.duration%60);a.push(`${s}:${o.toString().padStart(2,"0")}`)}return["video_haptic","audio_haptic","haptic"].includes(i.item_type)&&a.push("🎮"),a.join(" • ")}),this.core=i.core,this.state={renderTrigger:0},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentDidUpdate(i){if(i.visible!==this.props.visible){const i=this.props.visible?"shown":"hidden";this.core.notify("component:resize",{source:"PlaylistComponent",reason:`visibility-${i}`})}}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){const{visible:i=!0}=this.props;if(!i)return null;const a=this.core.playlist.items,s=this.core.playlist.getCurrentIndex();return a.length<=1?null:/* @__PURE__ */bn.jsxs("div",{className:"fp-playlist",children:[
/* @__PURE__ */bn.jsx("div",{className:"fp-playlist-header",children:/* @__PURE__ */bn.jsxs("span",{className:"fp-playlist-title",children:["Playlist (",a.length,")"]})}),
/* @__PURE__ */bn.jsx("div",{className:"fp-playlist-items",children:a.map((i,a)=>/* @__PURE__ */bn.jsxs("div",{className:"fp-playlist-item "+(a===s?"fp-playlist-item-active":""),onClick:/* @__PURE__ */__name(()=>this.handleItemClick(a),"onClick"),title:i.description||this.getItemTitle(i,a),children:[
/* @__PURE__ */bn.jsx("div",{className:"fp-playlist-item-thumbnail",children:/* @__PURE__ */bn.jsx("img",{className:"fp-playlist-item-image",src:i.poster,alt:this.getItemTitle(i,a),onError:/* @__PURE__ */__name(i=>{i.target.style.display="none",i.target.parentElement.innerHTML="📄"},"onError")})}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-playlist-item-content",children:[
/* @__PURE__ */bn.jsx("div",{className:"fp-playlist-item-title",children:this.getItemTitle(i,a)}),
/* @__PURE__ */bn.jsx("div",{className:"fp-playlist-item-info",children:this.getItemInfo(i)})]})]},a))})]})}};__name(iS,"PlaylistComponent");let rS=iS;const aS=/* @__PURE__ */__name(({name:i,size:a=16,color:s=null,strokeWidth:o=2,className:u="",style:_={},...x})=>{const w=GT.icons[i];if(!w)return null;const C={width:`var(--icon-size, ${a}px)`,height:`var(--icon-size, ${a}px)`,"stroke-width":`var(--icon-stroke-width, ${o})`,stroke:s||"var(--icon-color, currentColor)",class:u},L=w.toSvg(C),B={display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:1,verticalAlign:"middle",transform:"translateY(1px)",..._};/* @__PURE__ */
return bn.jsx("span",{style:B,dangerouslySetInnerHTML:{__html:L},...x})},"FeatherIcon");var sS=Object.defineProperty,oS=/* @__PURE__ */__name((i,a,s)=>a in i?sS(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,"__defNormalProp$6"),lS=/* @__PURE__ */__name((i,a,s)=>oS(i,"symbol"!=typeof a?a+"":a,s),"__publicField$6");const cS=class _ButtPlugSettingsComponent extends Zt.Component{constructor(i){super(i),lS(this,"handleEvent",(i,a)=>{["buttplug:connection","buttplug:scan","buttplug:device","funscript:load","funscript:channels"].includes(i)&&(this._triggerRender(),"buttplug:connection"===i&&this.setState({isAutoConnecting:!1}),"buttplug:scan"===i&&this.setState({isRescanActive:!1}))}),lS(this,"_triggerRender",()=>{this.setState(i=>({renderTrigger:i.renderTrigger+1}))}),lS(this,"handleAutoConnect",async()=>{if(!this.state.isAutoConnecting){this.setState({isAutoConnecting:!0});try{await this.core.buttplug.connect()&&await this.core.buttplug.scan()}catch(i){console.error("Auto-connect failed:",i)}}}),lS(this,"handleDisconnect",async()=>{try{await this.core.buttplug.disconnect()}catch(i){console.error("Disconnect failed:",i)}}),lS(this,"handleRescan",async()=>{if(!this.state.isRescanActive){this.setState({isRescanActive:!0});try{await this.core.buttplug.scan()}catch(i){console.error("Rescan failed:",i)}}}),lS(this,"handleDeviceChange",i=>{try{const a="-1"===i?-1:parseInt(i);this.core.buttplug.selectDevice(a)}catch(a){console.error("Device selection failed:",a)}}),this.core=i.core,this.state={isAutoConnecting:!1,isRescanActive:!1,renderTrigger:0},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){const{onToggleSettings:i,isSettingsExpanded:a}=this.props,{isAutoConnecting:s,isRescanActive:o}=this.state,u=this.core.buttplug.getStatus(),_=this.core.funscript.getChannelNames(),x=this.core.buttplug.getDevices(),w=this.core.buttplug.getSelected(),C=u?.isConnected||!1;/* @__PURE__ */
return bn.jsxs("div",{className:"fp-buttplug-settings",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-buttplug-settings-status",children:[
/* @__PURE__ */bn.jsx(aS,{name:C?"wifi":"wifi-off",size:18,className:"fp-buttplug-settings-connection-icon"}),
/* @__PURE__ */bn.jsx("span",{className:"fp-buttplug-settings-device-name",children:w?.name||"Unknown device"}),0===_.length&&/* @__PURE__ */bn.jsx("span",{className:"fp-buttplug-settings-no-haptic-hint",children:"No haptic"})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-buttplug-settings-actions",children:[C?/* @__PURE__ */bn.jsxs(bn.Fragment,{children:[
/* @__PURE__ */bn.jsxs("button",{className:"fp-buttplug-settings-disconnect-btn",onClick:this.handleDisconnect,children:[
/* @__PURE__ */bn.jsx(aS,{name:"zap-off",size:14,className:"fp-icon-button",style:{marginRight:"4px"}}),"Disconnect"]}),
/* @__PURE__ */bn.jsx("button",{className:"fp-buttplug-settings-rescan-btn",onClick:this.handleRescan,disabled:o,title:"Scan for new devices",children:/* @__PURE__ */bn.jsx(aS,{name:o?"loader":"search",size:14,className:"fp-icon-button"})})]}):/* @__PURE__ */bn.jsxs("button",{className:"fp-buttplug-settings-connect-btn",onClick:this.handleAutoConnect,disabled:s||0===_.length,title:0===_.length?"Load funscript first":"Connect to Intiface Central",children:[
/* @__PURE__ */bn.jsx(aS,{name:s?"loader":"zap",size:14,className:"fp-icon-button",style:{marginRight:"4px"}}),s?"Connecting...":"Connect"]}),
/* @__PURE__ */bn.jsx("select",{className:"fp-buttplug-settings-device-select",value:w?.index??-1,onChange:/* @__PURE__ */__name(i=>this.handleDeviceChange(i.target.value),"onChange"),disabled:0===_.length,title:0===_.length?"Load funscript first":"Select haptic device",children:x.map(i=>/* @__PURE__ */bn.jsxs("option",{value:i.index,children:[i.name," ",-1===i.index?"(Virtual)":""]},i.index))}),
/* @__PURE__ */bn.jsx("button",{className:"fp-buttplug-settings-toggle",onClick:i,title:a?"Hide haptic settings":"Show haptic settings",children:/* @__PURE__ */bn.jsx(aS,{name:a?"chevron-up":"chevron-down",size:20,className:"fp-icon-button",style:{marginLeft:"6px",marginRight:"6px"}})})]})]})}};__name(cS,"ButtPlugSettingsComponent");let uS=cS;var dS=Object.defineProperty,hS=/* @__PURE__ */__name((i,a,s)=>a in i?dS(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,"__defNormalProp$5"),pS=/* @__PURE__ */__name((i,a,s)=>hS(i,"symbol"!=typeof a?a+"":a,s),"__publicField$5");const mS=class _ActuatorSettingsComponent extends Zt.Component{constructor(i){super(i),pS(this,"handleEvent",(i,a)=>{const{actuator:s}=this.props;if(!s)return;if("actuator:settingsChanged"===i||"actuator:settingsReset"===i||"actuator:plugged"===i||"actuator:unplugged"===i)return void(a.actuatorIndex===s.index&&this._triggerRender());if("channel:plugged"===i||"channel:unplugged"===i)return void(a.actuatorIndex===s.index&&this._triggerRender());["funscript:load","funscript:channels","buttplug:device"].includes(i)&&this._triggerRender()}),pS(this,"_triggerRender",()=>{this.setState(i=>({renderTrigger:i.renderTrigger+1}))}),pS(this,"handleToggleExpanded",()=>{this.setState({isExpanded:!this.state.isExpanded},()=>{this.core.notify("component:resize",{source:"ActuatorSettingsComponent",reason:`actuator-${this.props.actuator?.index}-${this.state.isExpanded?"expanded":"collapsed"}`})})}),pS(this,"handleGlobalScaleChange",i=>{this.core.buttplug.setGlobalScale(i)}),pS(this,"handleActuatorSettingChange",(i,a)=>{const{actuator:s}=this.props;s&&s.updateSettings({[i]:a})}),pS(this,"handleChannelMapping",i=>{const{actuator:a}=this.props;if(a)if(""===i||null===i)a.unplug();else{const s=this.core.funscript.getChannel(i);s&&s.plug(a)}}),this.core=i.core,this.state={isExpanded:!1,renderTrigger:0},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){/* @__PURE__ */
return bn.jsxs("div",{className:"fp-actuator-settings",children:[this.renderCompactLine(),this.renderExpandedSettings()]})}renderCompactLine(){const{actuator:i}=this.props,{isExpanded:a}=this.state;if(!i)/* @__PURE__ */
return bn.jsx("div",{className:"fp-actuator-settings-error",children:"No actuator provided"});const s=this.core.funscript.getChannels(),o=s.filter(a=>a.canPlugTo(i)),u=i.assignedChannel;let _=null;if(i.settings.enabled)if(0===s.length)_="Load funscript first";else if(0===o.length){const a="rotate"===i.capability,o=s.some(i=>"polar"===i.type);_=o&&!a?"Funscript has bipolar channels (needs rotate actuator)":!o&&a?"Funscript has only unipolar channels (rotate not needed)":"No compatible channels in current funscript"}/* @__PURE__ */
return bn.jsxs("div",{className:"fp-actuator-settings-header",children:[
/* @__PURE__ */bn.jsxs("span",{className:"fp-actuator-settings-badge "+(i.settings.enabled?"":"fp-actuator-settings-badge-disabled"),children:["#",i.index," (",i.capability,")",!i.settings.enabled&&/* @__PURE__ */bn.jsx("span",{className:"fp-actuator-settings-warning",title:_,children:"⚠️"})]}),
/* @__PURE__ */bn.jsx("label",{className:"fp-actuator-settings-enable-toggle",children:/* @__PURE__ */bn.jsx("input",{className:"fp-actuator-settings-enable-checkbox",type:"checkbox",checked:i.settings.enabled,onChange:/* @__PURE__ */__name(i=>this.handleActuatorSettingChange("enabled",i.target.checked),"onChange"),title:i.settings.enabled?"Enable/disable this actuator":_})}),
/* @__PURE__ */bn.jsxs("select",{className:"fp-actuator-settings-channel-select",value:u?.name||"",onChange:/* @__PURE__ */__name(i=>this.handleChannelMapping(i.target.value),"onChange"),disabled:!i.settings.enabled,title:i.settings.enabled?"Assign compatible channel to this actuator":_,children:[
/* @__PURE__ */bn.jsx("option",{value:"",children:"None"}),o.map(i=>{const a="polar"===i.type?" (±)":"";/* @__PURE__ */
return bn.jsxs("option",{value:i.name,children:[i.name,a]},i.name)})]}),
/* @__PURE__ */bn.jsx("button",{className:"fp-actuator-settings-expand-toggle",onClick:this.handleToggleExpanded,children:/* @__PURE__ */bn.jsx(aS,{name:a?"chevron-up":"chevron-down",size:18,className:"fp-icon-button"})})]})}renderExpandedSettings(){if(!this.state.isExpanded)return null;const{actuator:i}=this.props;if(!i)return null;const a=this.core.funscript.getChannels(),s=a.filter(a=>a.canPlugTo(i));/* @__PURE__ */
return bn.jsxs("div",{className:"fp-actuator-settings-expanded",children:[!i.settings.enabled&&0===a.length&&/* @__PURE__ */bn.jsx("div",{className:"fp-actuator-settings-warning-message",children:"📄 Load a funscript first"}),i.settings.enabled&&s.length>0&&/* @__PURE__ */bn.jsxs("div",{className:"fp-actuator-settings-compatibility-info",children:["Compatible with ",s.length," channel(s): ",s.map(i=>i.name).join(", ")]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-actuator-settings-controls",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-actuator-settings-scale-control",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-actuator-settings-scale-label",children:["Scale: ",(100*(i.settings.scale||1)).toFixed(0),"%"]}),
/* @__PURE__ */bn.jsx("input",{className:"fp-actuator-settings-scale-range",type:"range",min:"0",max:"2",step:"0.01",value:i.settings.scale||1,onChange:/* @__PURE__ */__name(i=>this.handleActuatorSettingChange("scale",parseFloat(i.target.value)),"onChange"),disabled:!i.settings.enabled})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-actuator-settings-offset-control",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-actuator-settings-offset-label",children:["Time Offset: ",(1e3*(i.settings.timeOffset||0)).toFixed(0),"ms"]}),
/* @__PURE__ */bn.jsx("input",{className:"fp-actuator-settings-offset-range",type:"range",min:"-0.5",max:"0.5",step:"0.001",value:i.settings.timeOffset||0,onChange:/* @__PURE__ */__name(i=>this.handleActuatorSettingChange("timeOffset",parseFloat(i.target.value)),"onChange"),disabled:!i.settings.enabled})]})]}),
/* @__PURE__ */bn.jsxs("label",{className:"fp-actuator-settings-invert-toggle",children:[
/* @__PURE__ */bn.jsx("input",{className:"fp-actuator-settings-invert-checkbox",type:"checkbox",checked:i.settings.invert||!1,onChange:/* @__PURE__ */__name(i=>this.handleActuatorSettingChange("invert",i.target.checked),"onChange"),disabled:!i.settings.enabled}),
/* @__PURE__ */bn.jsx("span",{className:"fp-actuator-settings-invert-label",children:"Invert Values"})]})]})}};__name(mS,"ActuatorSettingsComponent");let fS=mS;var gS=Object.defineProperty,_S=/* @__PURE__ */__name((i,a,s)=>a in i?gS(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,"__defNormalProp$4"),yS=/* @__PURE__ */__name((i,a,s)=>_S(i,"symbol"!=typeof a?a+"":a,s),"__publicField$4");const vS=class _ChannelSettingsComponent extends Zt.Component{constructor(i){super(i),yS(this,"handleEvent",(i,a)=>{["funscript:load","funscript:reset"].includes(i)&&("funscript:load"===i&&this.setState({pendingConfig:{}}),"funscript:reset"===i&&this.setState({isExpanded:!1}),this._triggerRender())}),yS(this,"_triggerRender",()=>{this.setState(i=>({renderTrigger:i.renderTrigger+1}))}),yS(this,"handleToggleExpanded",()=>{this.setState({isExpanded:!this.state.isExpanded},()=>{this.core.notify("component:resize",{source:"ChannelSettingsComponent",reason:"config-"+(this.state.isExpanded?"expanded":"collapsed")})})}),yS(this,"handleFieldChange",(i,a,s)=>{this.setState(o=>({pendingConfig:{...o.pendingConfig,[i]:{...o.pendingConfig[i],[a]:"none"===s?null:s}}}))}),yS(this,"handleValidate",()=>{try{const i=this.core.funscript.data;i&&(this.core.funscript.loadWithCustomFieldConfig(i,pendingConfig),this.setState({pendingConfig:{},isExpanded:!1}))}catch(i){console.error("Failed to apply channel configuration:",i)}}),yS(this,"getCurrentConfig",(i,a)=>{const{pendingConfig:s}=this.state,o=this.core.funscript.getChannel(i);if(s[i]&&void 0!==s[i][a])return s[i][a]||"none";if(o&&o.fieldConfig)return o.fieldConfig[a]||"none";return{timeField:"at",valueField:"pos",directionField:"none",durationField:"none"}[a]||"none"}),yS(this,"getAvailableFields",(i,a)=>i[{timeField:"availableTimeFields",valueField:"availableValueFields",directionField:"availableDirectionFields",durationField:"availableDurationFields"}[a]]||[]),yS(this,"hasPendingChanges",()=>Object.keys(this.state.pendingConfig).length>0),yS(this,"renderExpandedSettings",()=>{if(!this.state.isExpanded)return null;const i=this.core.funscript.getDetectedFields(),a=Object.keys(i);return 0===a.length?/* @__PURE__ */bn.jsx("div",{className:"fp-channel-settings-empty",children:"No channels detected. Load a funscript first."}):/* @__PURE__ */bn.jsxs("div",{className:"fp-channel-settings-expanded",children:[a.map(a=>this.renderChannelConfig(a,i[a])),
/* @__PURE__ */bn.jsxs("div",{className:"fp-channel-settings-actions",children:[
/* @__PURE__ */bn.jsx("button",{className:"fp-channel-settings-validate-btn",onClick:this.handleValidate,disabled:!this.hasPendingChanges(),children:"✓ Validate Changes"}),this.hasPendingChanges()&&/* @__PURE__ */bn.jsx("button",{className:"fp-channel-settings-cancel-btn",onClick:/* @__PURE__ */__name(()=>this.setState({pendingConfig:{}}),"onClick"),children:"Cancel"})]})]})}),yS(this,"renderChannelConfig",(i,a)=>/* @__PURE__ */bn.jsxs("div",{className:"fp-channel-settings-channel",children:[
/* @__PURE__ */bn.jsx("span",{className:"fp-channel-settings-channel-name",children:i}),[{key:"timeField",label:"Time"},{key:"valueField",label:"Value"},{key:"directionField",label:"Direction"},{key:"durationField",label:"Duration"}].map(({key:s,label:o})=>{const u=this.getAvailableFields(a,s),_=this.getCurrentConfig(i,s);/* @__PURE__ */
return bn.jsxs("div",{className:"fp-channel-settings-field",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-channel-settings-field-label",children:[o,":"]}),
/* @__PURE__ */bn.jsxs("select",{className:"fp-channel-settings-field-select",value:_,onChange:/* @__PURE__ */__name(a=>this.handleFieldChange(i,s,a.target.value),"onChange"),children:[
/* @__PURE__ */bn.jsx("option",{value:"none",children:"none"}),u.map(i=>/* @__PURE__ */bn.jsx("option",{value:i,children:i},i))]})]},s)})]})),this.core=i.core,this.state={isExpanded:!1,renderTrigger:0,pendingConfig:{}},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){const{isExpanded:i}=this.state;if(!this.core.funscript.hasFunscript())return null;const a=this.core.funscript.getDetectedFields(),s=Object.keys(a).length;/* @__PURE__ */
return bn.jsxs("div",{className:"fp-channel-settings",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-channel-settings-header",children:[
/* @__PURE__ */bn.jsxs("span",{className:"fp-channel-settings-title",children:["Configure Action Channels (",s,")"]}),
/* @__PURE__ */bn.jsx("button",{className:"fp-channel-settings-toggle",onClick:this.handleToggleExpanded,children:/* @__PURE__ */bn.jsx(aS,{name:i?"chevron-up":"chevron-down",size:18,className:"fp-icon-button"})})]}),this.renderExpandedSettings()]})}};__name(vS,"ChannelSettingsComponent");let bS=vS;var TS=Object.defineProperty,SS=/* @__PURE__ */__name((i,a,s)=>a in i?TS(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,"__defNormalProp$3"),xS=/* @__PURE__ */__name((i,a,s)=>SS(i,"symbol"!=typeof a?a+"":a,s),"__publicField$3");const wS=class _HapticSettingsComponent extends Zt.Component{constructor(i){super(i),xS(this,"handleEvent",(i,a)=>{(["buttplug:device","funscript:load","funscript:channels","buttplug:connection"].includes(i)||["buttplug:globalScale","buttplug:globalOffset","core:autoConnect","core:autoMap"].includes(i))&&this._triggerRender()}),xS(this,"_triggerRender",()=>{this.setState(i=>({renderTrigger:i.renderTrigger+1}))}),xS(this,"handleToggleExpanded",()=>{this.setState({isExpanded:!this.state.isExpanded},()=>{this.core.notify("component:resize",{source:"HapticSettingsComponent",reason:"main-settings-"+(this.state.isExpanded?"expanded":"collapsed")})})}),xS(this,"handleAutoMap",()=>{this.core.autoMapChannels()}),xS(this,"handleUpdateRateChange",i=>{this.props.onUpdateRateChange?.(i)}),xS(this,"handleGlobalScaleChange",i=>{this.core.buttplug.setGlobalScale(i)}),xS(this,"handleGlobalOffsetChange",i=>{this.core.buttplug.setGlobalOffset(i)}),xS(this,"handleIntifaceUrlChange",i=>{this.core.buttplug.setIntifaceUrl(i)}),this.core=i.core,this.state={isExpanded:!1,renderTrigger:0},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){const{isExpanded:i}=this.state;/* @__PURE__ */
return bn.jsxs("div",{className:"fp-haptic-settings",children:[
/* @__PURE__ */bn.jsx(uS,{core:this.core,onToggleSettings:this.handleToggleExpanded,isSettingsExpanded:i}),this.renderExpandedSettings()]})}renderExpandedSettings(){if(!this.state.isExpanded)return null;const i=this.core.funscript.getChannelNames(),a=this.core.buttplug.getActuators(),s=this.props.onGetUpdateRate?.()||60,o=this.core.buttplug.getGlobalOffset(),u=this.core.buttplug.getGlobalScale(),_=this.core.buttplug.getIntifaceUrl(),x=this.core.buttplug.getStatus()?.isConnected||!1;/* @__PURE__ */
return bn.jsxs("div",{className:"fp-haptic-settings-expanded",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-connection-section",children:[
/* @__PURE__ */bn.jsxs("h6",{className:"fp-haptic-settings-section-title",children:[
/* @__PURE__ */bn.jsx(aS,{name:"bluetooth",size:18,className:"fp-haptic-settings-section-header-icon"}),"Connection"]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-connection-controls",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-url-control",children:[
/* @__PURE__ */bn.jsx("label",{className:"fp-haptic-settings-url-label",children:"Intiface WebSocket URL"}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-url-input-group",children:[
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-settings-url-input",type:"text",value:_,onChange:/* @__PURE__ */__name(i=>this.handleIntifaceUrlChange(i.target.value),"onChange"),placeholder:"ws://localhost:12345",title:"WebSocket URL for Intiface Central connection"}),
/* @__PURE__ */bn.jsx("button",{className:"fp-haptic-settings-url-reset-btn",onClick:/* @__PURE__ */__name(()=>this.handleIntifaceUrlChange("ws://localhost:12345"),"onClick"),title:"Reset to default",children:/* @__PURE__ */bn.jsx(aS,{name:"rotate-ccw",size:14,className:"fp-icon-button"})})]}),
/* @__PURE__ */bn.jsxs("span",{className:"fp-haptic-settings-url-status",children:[
/* @__PURE__ */bn.jsx(aS,{name:x?"check-circle":"alert-triangle",size:14,className:"fp-icon",style:{marginRight:"6px"}}),x?`Connected to ${_}`:"Not connected"]})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-rate-control",children:[
/* @__PURE__ */bn.jsx("label",{className:"fp-haptic-settings-rate-label",children:"Update Rate"}),
/* @__PURE__ */bn.jsxs("select",{className:"fp-haptic-settings-rate-select",value:s,onChange:/* @__PURE__ */__name(i=>this.handleUpdateRateChange(parseInt(i.target.value)),"onChange"),title:"Haptic command frequency (higher = smoother but more CPU)",children:[
/* @__PURE__ */bn.jsx("option",{value:10,children:"10 Hz"}),
/* @__PURE__ */bn.jsx("option",{value:30,children:"30 Hz"}),
/* @__PURE__ */bn.jsx("option",{value:60,children:"60 Hz"}),
/* @__PURE__ */bn.jsx("option",{value:90,children:"90 Hz"}),
/* @__PURE__ */bn.jsx("option",{value:120,children:"120 Hz"})]}),
/* @__PURE__ */bn.jsxs("span",{className:"fp-haptic-settings-rate-info",children:[(1e3/s).toFixed(1),"ms interval"]})]})]})]}),
/* @__PURE__ */bn.jsx("div",{className:"fp-haptic-settings-divider"}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-master-section",children:[
/* @__PURE__ */bn.jsxs("h6",{className:"fp-haptic-settings-section-title",children:[
/* @__PURE__ */bn.jsx(aS,{name:"sliders",size:18,className:"fp-haptic-settings-section-header-icon"}),"Master"]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-master-controls",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-scale-control",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-haptic-settings-scale-label",children:["Global Scale: ",(100*(u||1)).toFixed(0),"%"]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-scale-input-group",children:[
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-settings-scale-range",type:"range",min:"0",max:"2",step:"0.01",value:u||1,onChange:/* @__PURE__ */__name(i=>this.handleGlobalScaleChange(parseFloat(i.target.value)),"onChange"),title:"Master intensity control for all actuators"}),
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-settings-scale-number",type:"number",value:u||1,onChange:/* @__PURE__ */__name(i=>this.handleGlobalScaleChange(parseFloat(i.target.value)||1),"onChange"),step:"0.01",min:"0",max:"2"})]})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-offset-control",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-haptic-settings-offset-label",children:["Global Offset: ",(1e3*(o||0)).toFixed(0),"ms"]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-offset-input-group",children:[
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-settings-offset-range",type:"range",value:o||0,onChange:/* @__PURE__ */__name(i=>this.handleGlobalOffsetChange(parseFloat(i.target.value)),"onChange"),min:"-1",max:"1",step:"0.01",title:"Global timing offset for all actuators"}),
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-settings-offset-number",type:"number",value:o||0,onChange:/* @__PURE__ */__name(i=>this.handleGlobalOffsetChange(parseFloat(i.target.value)||0),"onChange"),step:"0.01",min:"-1",max:"1"})]})]})]})]}),i.length>0&&/* @__PURE__ */bn.jsxs(bn.Fragment,{children:[
/* @__PURE__ */bn.jsx("div",{className:"fp-haptic-settings-divider"}),
/* @__PURE__ */bn.jsx("div",{className:"fp-haptic-settings-channels-header",children:/* @__PURE__ */bn.jsxs("h6",{className:"fp-haptic-settings-section-title",children:[
/* @__PURE__ */bn.jsx(aS,{name:"music",size:18,className:"fp-haptic-settings-section-header-icon"}),"Channels"]})}),
/* @__PURE__ */bn.jsx(bS,{core:this.core})]}),i.length>0&&/* @__PURE__ */bn.jsxs(bn.Fragment,{children:[
/* @__PURE__ */bn.jsx("div",{className:"fp-haptic-settings-divider"}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-actuators-section",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-settings-actuators-header",children:[
/* @__PURE__ */bn.jsxs("h6",{className:"fp-haptic-settings-section-title",children:[
/* @__PURE__ */bn.jsx(aS,{name:"activity",size:18,className:"fp-haptic-settings-section-header-icon"}),"Actuators"]}),
/* @__PURE__ */bn.jsxs("button",{className:"fp-haptic-settings-automap-btn",onClick:this.handleAutoMap,children:["Auto Map All (",a.length,")"]})]}),
/* @__PURE__ */bn.jsx("div",{className:"fp-haptic-settings-actuators-list",children:a.map(i=>/* @__PURE__ */bn.jsx(fS,{core:this.core,actuator:i},i.index))})]})]})]})}};__name(wS,"HapticSettingsComponent");let AS=wS;var CS=Object.defineProperty,ES=/* @__PURE__ */__name((i,a,s)=>a in i?CS(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,"__defNormalProp$2"),MS=/* @__PURE__ */__name((i,a,s)=>ES(i,"symbol"!=typeof a?a+"":a,s),"__publicField$2");const kS=class _HapticVisualizerComponent extends Zt.Component{constructor(i){super(i),MS(this,"initCanvas",()=>{const i=this.canvasRef.current;if(!i)return;this.ctx=i.getContext("2d");const a=i.getBoundingClientRect(),s=window.devicePixelRatio||1;i.width=a.width*s,i.height=a.height*s,this.ctx.scale(s,s),i.style.width=a.width+"px",i.style.height=a.height+"px"}),MS(this,"gaussian",(i,a,s)=>1/(s*Math.sqrt(2*Math.PI))*Math.exp(-Math.pow(i-a,2)/(2*Math.pow(s,2)))),MS(this,"calculateSigma",i=>{const{sigmaMin:a,sigmaMax:s}=this.config;return s-i*(s-a)}),MS(this,"getActuatorPosition",(i,a)=>a<=1?.5:(i+1)/(a+1)),MS(this,"getCurrentActuatorData",()=>this.props.getCurrentActuatorData?.()||/* @__PURE__ */new Map),MS(this,"getConfiguredActuatorCount",()=>{const i=this.getCurrentActuatorData();return Math.max(1,i.size)}),MS(this,"calculateNormalizationFactor",i=>{if(this.normalizationCache.has(i))return this.normalizationCache.get(i);const{resolution:a,sigmaMin:s}=this.config;let o=0;for(let _=0;_<=a;_++){const u=_/a;let x=0;for(let a=0;a<i;a++){const o=this.getActuatorPosition(a,i);x+=this.gaussian(u,o,s)}o=Math.max(o,x)}const u=o>0?1/o:1;return this.normalizationCache.set(i,u),u}),MS(this,"getActiveActuators",i=>Array.from(i.entries())),MS(this,"rebuildColorCache",()=>{const{resolution:i,rainbowRotation:a}=this.config;this.colorCache.rainbowColors=Array.from({length:i+1},(a,s)=>this.getColorAt(s/i)),this.colorCache.actuatorColors=/* @__PURE__ */new Map;for(let s=1;s<=8;s++)for(let i=0;i<s;i++){const a=this.getActuatorPosition(i,s),o=this.getColorAt(a);this.colorCache.actuatorColors.set(`${s}-${i}`,o)}this.colorCache.lastRotation=a,this.colorCache.lastResolution=i}),MS(this,"ensureColorCache",i=>{const{resolution:a,rainbowRotation:s}=this.config;this.colorCache.lastRotation===s&&this.colorCache.lastResolution===a&&this.colorCache.lastNActive===i||(this.rebuildColorCache(),this.colorCache.lastNActive=i)}),MS(this,"getCachedRainbowColor",i=>this.colorCache.rainbowColors[i]),MS(this,"getCachedActuatorColor",(i,a,s=1)=>{const o=this.colorCache.actuatorColors.get(`${i}-${a}`);return o?[Math.round(o[0]*s),Math.round(o[1]*s),Math.round(o[2]*s)]:[255,255,255]}),MS(this,"hsvToRgb",(i,a,s)=>{const o=s*a,u=o*(1-Math.abs(i/60%2-1)),_=s-o;let x,w,C;return[x,w,C]=i>=0&&i<60?[o,u,0]:i>=60&&i<120?[u,o,0]:i>=120&&i<180?[0,o,u]:i>=180&&i<240?[0,u,o]:i>=240&&i<300?[u,0,o]:[o,0,u],[Math.round(255*(x+_)),Math.round(255*(w+_)),Math.round(255*(C+_))]}),MS(this,"getColorAt",i=>{const a=(i+this.config.rainbowRotation)%1*360;return this.hsvToRgb(a,1,1)}),MS(this,"getActuatorColor",(i,a=1)=>{const s=this.getColorAt(i);return[Math.round(s[0]*a),Math.round(s[1]*a),Math.round(s[2]*a)]}),MS(this,"getRainbowBackgroundColor",i=>this.getColorAt(i)),MS(this,"calculatePoints",(i,a,s)=>{const o=this.getConfiguredActuatorCount(),u=i.length,{resolution:_,heightScale:x}=this.config,w=this.calculateNormalizationFactor(o);this.ensureColorCache(u);const C=[];for(let L=0;L<=_;L++){const o=L/_;let B=0,U=[0,0,0];i.forEach(([i,a],s)=>{const _=this.getActuatorPosition(s,u),x=Math.abs(a.value),w=this.calculateSigma(x),C=this.gaussian(o,_,w)*x;if(C>.001){const i=this.getCachedActuatorColor(u,s,x),a=this.getCachedRainbowColor(L),o=this.config.rainbowIntensity,_=[i[0]*(1-o)+a[0]*o,i[1]*(1-o)+a[1]*o,i[2]*(1-o)+a[2]*o];U[0]+=_[0]*C,U[1]+=_[1]*C,U[2]+=_[2]*C,B+=C}}),B>0&&(U=U.map(i=>Math.round(i/B))),C.push({x:o*a,y:s-B*w*x*s,intensity:B*w,color:U})}return C}),MS(this,"renderGradientFill",(i,a,s)=>{if(i.length<2)return;this.ctx.beginPath(),this.ctx.moveTo(0,s),i.forEach((a,s)=>{if(0===s)this.ctx.lineTo(a.x,a.y);else{const o=i[s-1],u=(o.x+a.x)/2;this.ctx.quadraticCurveTo(o.x,o.y,u,(o.y+a.y)/2)}}),this.ctx.lineTo(a,s),this.ctx.closePath();const o=this.ctx.createLinearGradient(0,0,a,0);i.forEach((a,s)=>{const u=s/(i.length-1),[_,x,w]=a.color,C=Math.min(1,.8*a.intensity);o.addColorStop(u,`rgba(${_}, ${x}, ${w}, ${C})`)}),this.ctx.fillStyle=o,this.ctx.fill(),this.ctx.shadowColor="rgba(255, 255, 255, 0.2)",this.ctx.shadowBlur=8,this.ctx.strokeStyle="rgba(255, 255, 255, 0.4)",this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.shadowBlur=0}),MS(this,"renderCurrentFrame",()=>{const i=this.getCurrentActuatorData(),a=this.getActiveActuators(i);if(0===a.length)return;const s=this.canvasRef.current;if(!s)return;const o=s.clientWidth,u=s.clientHeight,_=this.calculatePoints(a,o,u);this.renderGradientFill(_,o,u)}),MS(this,"startAnimation",()=>{const i=/* @__PURE__ */__name(()=>{this.canvasRef.current&&(this.renderFrame(),this.animationId=requestAnimationFrame(i))},"animate");this.animationId=requestAnimationFrame(i)}),MS(this,"renderFrame",()=>{if(!this.ctx)return;const i=this.canvasRef.current;i&&(this.ctx.clearRect(0,0,i.clientWidth,i.clientHeight),this.renderCurrentFrame())}),MS(this,"toggleConfig",()=>{const i=!this.state.showConfig;this.setState({showConfig:i},()=>{this.core.notify("component:resize",{source:"HapticVisualizerComponent",reason:"config-panel-"+(i?"expanded":"collapsed")})})}),MS(this,"updateConfig",(i,a)=>{this.config[i]=a,"sigmaMin"!==i&&"sigmaMax"!==i||this.normalizationCache.clear(),this.forceUpdate()}),this.core=i.core,this.state={isPlaying:!1,showConfig:!1},this.canvasRef=en.createRef(),this.ctx=null,this.animationId=null,this.config={resolution:300,heightScale:.95,sigmaMin:.07,sigmaMax:.15,rainbowIntensity:.25,rainbowRotation:0},this.normalizationCache=/* @__PURE__ */new Map,this.colorCache={rainbowColors:null,actuatorColors:null,lastRotation:-1,lastResolution:-1,lastNActive:-1}}componentDidMount(){this.props.visible&&setTimeout(()=>{this.initCanvas(),this.startAnimation()},50)}componentDidUpdate(i){const a=this.props.isPlaying||!1;a!==this.state.isPlaying&&this.setState({isPlaying:a}),i.visible!==this.props.visible&&(this.core.notify("component:resize",{source:"HapticVisualizerComponent",reason:"visibility-"+(this.props.visible?"shown":"hidden")}),!i.visible&&this.props.visible?setTimeout(()=>{this.initCanvas(),this.startAnimation()},50):i.visible&&!this.props.visible&&this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null))}componentWillUnmount(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null,console.log("🧹 HapticVisualizer animation cleanup completed"))}render(){const{visible:i=!0}=this.props;return i?/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-visualizer",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-visualizer-canvas-area",children:[
/* @__PURE__ */bn.jsx("canvas",{ref:this.canvasRef,className:"fp-haptic-visualizer-canvas"}),
/* @__PURE__ */bn.jsx("button",{className:"fp-haptic-visualizer-config-btn",onClick:this.toggleConfig,title:"Visualizer settings",children:/* @__PURE__ */bn.jsx(aS,{name:"settings",size:14,className:"fp-icon-button"})})]}),this.state.showConfig&&/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-visualizer-config",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Resolution: ",this.config.resolution]}),
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"50",max:"500",step:"25",value:this.config.resolution,onChange:/* @__PURE__ */__name(i=>this.updateConfig("resolution",parseInt(i.target.value)),"onChange")})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Height: ",(100*this.config.heightScale).toFixed(0),"%"]}),
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.1",max:"1.0",step:"0.05",value:this.config.heightScale,onChange:/* @__PURE__ */__name(i=>this.updateConfig("heightScale",parseFloat(i.target.value)),"onChange")})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Sigma Min: ",this.config.sigmaMin.toFixed(2)]}),
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.01",max:"0.2",step:"0.01",value:this.config.sigmaMin,onChange:/* @__PURE__ */__name(i=>this.updateConfig("sigmaMin",parseFloat(i.target.value)),"onChange")})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Sigma Max: ",this.config.sigmaMax.toFixed(2)]}),
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.05",max:"0.3",step:"0.01",value:this.config.sigmaMax,onChange:/* @__PURE__ */__name(i=>this.updateConfig("sigmaMax",parseFloat(i.target.value)),"onChange")})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Rainbow: ",(100*this.config.rainbowIntensity).toFixed(0),"%"]}),
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.0",max:"1",step:"0.05",value:this.config.rainbowIntensity,onChange:/* @__PURE__ */__name(i=>this.updateConfig("rainbowIntensity",parseFloat(i.target.value)),"onChange")})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[
/* @__PURE__ */bn.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Hue: ",(360*this.config.rainbowRotation).toFixed(0),"°"]}),
/* @__PURE__ */bn.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.0",max:"1.0",step:"0.02",value:this.config.rainbowRotation,onChange:/* @__PURE__ */__name(i=>this.updateConfig("rainbowRotation",parseFloat(i.target.value)),"onChange")})]})]})]}):null}};__name(kS,"HapticVisualizerComponent");let PS=kS;var IS=Object.defineProperty,LS=/* @__PURE__ */__name((i,a,s)=>a in i?IS(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,"__defNormalProp$1"),DS=/* @__PURE__ */__name((i,a,s)=>LS(i,"symbol"!=typeof a?a+"":a,s),"__publicField$1");const RS=class _LoggingComponent extends Zt.Component{constructor(i){super(i),DS(this,"setupResizeObserver",()=>{this.textareaRef.current&&window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(()=>{setTimeout(()=>{this.core.notify("component:resize",{source:"LoggingComponent",reason:"textarea-content-changed"})},0)}),this.resizeObserver.observe(this.textareaRef.current))}),DS(this,"handleEvent",(i,a)=>{i.startsWith("status:")&&this.updateTextarea()}),DS(this,"updateTextarea",()=>{this.textareaRef.current&&(this.textareaRef.current.value=this.core.logging.getFormattedLogs(),this.state.autoScroll&&(this.textareaRef.current.scrollTop=this.textareaRef.current.scrollHeight))}),DS(this,"handleClear",()=>{this.core.logging.clear()}),DS(this,"handleDownload",()=>{const i=this.core.generateExportContent(),a=`funplayer-debug-${/* @__PURE__ */(new Date).toISOString().replace(/[:.]/g,"-").slice(0,19)}.log`,s=new Blob([i],{type:"text/plain"}),o=URL.createObjectURL(s),u=document.createElement("a");u.href=o,u.download=a,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(o),this.core.notify?.("status:logging",{message:`Debug logs downloaded: ${a}`,type:"success"})}),DS(this,"handleCopy",async()=>{try{const i=this.core.generateExportContent();await navigator.clipboard.writeText(i),this.core.notify?.("status:logging",{message:"Debug logs copied to clipboard",type:"success"})}catch(i){this.textareaRef.current&&(this.textareaRef.current.select(),this.core.notify?.("status:logging",{message:"Logs selected, press Ctrl+C to copy",type:"info"}))}}),DS(this,"handleToggleAutoScroll",()=>{this.setState(i=>({autoScroll:!i.autoScroll}))}),this.core=i.core,this.state={autoScroll:!0},this.textareaRef=en.createRef(),this.coreListener=null,this.resizeObserver=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent),this.updateTextarea(),this.props.visible&&setTimeout(()=>{this.setupResizeObserver()},10)}componentDidUpdate(i){!i.visible&&this.props.visible&&setTimeout(()=>{this.setupResizeObserver()},10),i.visible&&!this.props.visible&&this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}componentWillUnmount(){console.log("LoggingComponent unmounting"),this.coreListener&&(this.coreListener(),this.coreListener=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}render(){const{visible:i=!0}=this.props;if(!i)return null;const{autoScroll:a}=this.state,s=this.core.logging.getLogs().length;/* @__PURE__ */
return bn.jsxs("div",{className:"fp-logging",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-logging-header",children:[
/* @__PURE__ */bn.jsxs("div",{className:"fp-logging-title",children:[
/* @__PURE__ */bn.jsx(aS,{name:"file-text",size:16,className:"fp-icon"}),
/* @__PURE__ */bn.jsx("span",{className:"fp-logging-label",children:"Debug Logs"}),
/* @__PURE__ */bn.jsx("span",{className:"fp-logging-count",children:s})]}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-logging-actions",children:[
/* @__PURE__ */bn.jsx("button",{className:"fp-logging-clear-btn",onClick:this.handleClear,title:"Clear logs",children:/* @__PURE__ */bn.jsx(aS,{name:"trash-2",size:14,className:"fp-icon-button"})}),
/* @__PURE__ */bn.jsx("button",{className:"fp-logging-download-btn",onClick:this.handleDownload,title:"Download logs",children:/* @__PURE__ */bn.jsx(aS,{name:"download",size:14,className:"fp-icon-button"})}),
/* @__PURE__ */bn.jsx("button",{className:"fp-logging-copy-btn",onClick:this.handleCopy,title:"Copy to clipboard",children:/* @__PURE__ */bn.jsx(aS,{name:"copy",size:14,className:"fp-icon-button"})}),
/* @__PURE__ */bn.jsx("button",{className:"fp-logging-autoscroll-btn "+(a?"fp-logging-autoscroll-btn-active":""),onClick:this.handleToggleAutoScroll,title:"Toggle auto-scroll",children:/* @__PURE__ */bn.jsx(aS,{name:a?"lock":"unlock",size:14,className:"fp-icon-button"})})]})]}),
/* @__PURE__ */bn.jsx("textarea",{ref:this.textareaRef,className:"fp-logging-textarea",readOnly:!0,placeholder:"Debug logs will appear here..."})]})}};__name(RS,"LoggingComponent");let OS=RS;const NS=class _StatusBarComponent extends Zt.Component{render(){const{isPlaying:i,updateRate:a,showVisualizer:s,showDebug:o,showPlaylist:u,onToggleVisualizer:_,onToggleDebug:x,onTogglePlaylist:w}=this.props;/* @__PURE__ */
return bn.jsxs("div",{className:"fp-status-bar",children:[
/* @__PURE__ */bn.jsxs("span",{className:"fp-status-bar-status",children:[
/* @__PURE__ */bn.jsx(aS,{name:i?"play":"pause",className:"fp-status-bar-status-icon"}),a,"Hz"]}),
/* @__PURE__ */bn.jsx("div",{className:"fp-status-bar-logo-area",children:/* @__PURE__ */bn.jsx(Kv,{className:"fp-status-bar-logo",size:30})}),
/* @__PURE__ */bn.jsxs("div",{className:"fp-status-bar-controls",children:[
/* @__PURE__ */bn.jsx("button",{className:"fp-status-bar-playlist-btn",onClick:w,title:u?"Hide Playlist":"Show Playlist",children:/* @__PURE__ */bn.jsx(aS,{name:"list",size:16,className:"fp-icon-button"})}),
/* @__PURE__ */bn.jsx("button",{className:"fp-status-bar-visualizer-btn",onClick:_,title:s?"Hide Visualizer":"Show Visualizer",children:/* @__PURE__ */bn.jsx(aS,{name:"bar-chart-2",size:16,className:"fp-icon-button"})}),
/* @__PURE__ */bn.jsx("button",{className:"fp-status-bar-debug-btn",onClick:x,title:o?"Hide Debug":"Show Debug",children:/* @__PURE__ */bn.jsx(aS,{name:"search",size:16,className:"fp-icon-button"})})]})]})}};__name(NS,"StatusBarComponent");let BS=NS;const FS={primaryColor:"--fp-primary-color",backgroundColor:"--fp-background-color",secondaryBackgroundColor:"--fp-secondary-background-color",textColor:"--fp-text-color",borderColor:"--fp-border-color",fontFamily:"--fp-font-family",baseRadius:"--fp-base-radius",spacing:"--fp-spacing"};function convertToCssVar(i){return FS[i]||`--fp-${i.replace(/([A-Z])/g,"-$1").toLowerCase()}`}function sanitizeTheme(i){if(!i||"object"!=typeof i)return{};const a={};return Object.entries(i).forEach(([i,s])=>{null!=s&&""!==s&&(a[i]=String(s).trim())}),a}function isValidTheme(i){return!(!i||"object"!=typeof i)&&Object.keys(i).some(a=>null!==i[a]&&void 0!==i[a]&&""!==i[a])}function applyThemeToElement(i,a,s={}){if(!i||!a)return!1;const{setDataTheme:o=!0}=s;try{const s=sanitizeTheme(i);return Object.entries(s).forEach(([i,s])=>{if("base"!==i){const o=convertToCssVar(i);a.style.setProperty(o,s)}}),o&&s.base&&a.setAttribute("data-theme",s.base),!0}catch(u){return console.error("Failed to apply theme to element:",u),!1}}__name(convertToCssVar,"convertToCssVar"),__name(sanitizeTheme,"sanitizeTheme"),__name(isValidTheme,"isValidTheme"),__name(applyThemeToElement,"applyThemeToElement");const US={convertToCssVar:convertToCssVar,sanitizeTheme:sanitizeTheme,isValidTheme:isValidTheme,applyThemeToElement:applyThemeToElement,CSS_VAR_MAPPINGS:FS};var jS=Object.defineProperty,VS=/* @__PURE__ */__name((i,a,s)=>a in i?jS(i,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[a]=s,"__defNormalProp"),zS=/* @__PURE__ */__name((i,a,s)=>VS(i,"symbol"!=typeof a?a+"":a,s),"__publicField");const HS=class _FunPlayer extends Zt.Component{constructor(i){super(i),zS(this,"initializeComponent",()=>{try{this.core.notify?.("status:funplayer",{message:"Initializing FunPlayer component...",type:"processing"}),this.coreListener=this.core.addListener(this.handleEvent),this.props.playlist&&this.handlePlaylistUpdate(),this.core.notify?.("status:funplayer",{message:"FunPlayer component initialized",type:"success"})}catch(i){this.core.notify?.("status:funplayer",{message:"FunPlayer initialization failed",type:"error",error:i.message})}}),zS(this,"handlePlaylistUpdate",async()=>{const{playlist:i}=this.props;this.core.notify?.("status:funplayer",{message:`Synchronizing playlist: ${i?.length||0} items`,type:"log"}),await this.core.playlist.loadPlaylist(i)}),zS(this,"applyTheme",()=>{const{theme:i}=this.props;if(!i)return;const a=this.containerRef.current;if(!a)return void console.warn("Cannot apply theme: container ref not available");US.applyThemeToElement(i,a)?this.core.notify?.("status:funplayer",{message:"Theme applied successfully with fp- prefixed variables",type:"log"}):this.core.notify?.("status:funplayer",{message:"Failed to apply theme",type:"error"})}),zS(this,"handleEvent",(i,a)=>{switch(i){case"media:play":this.handleMediaPlayEvent(a);break;case"media:pause":this.handleMediaPauseEvent(a);break;case"media:ended":this.handleMediaEndedEvent(a);break;case"media:seeking":this.handleMediaSeekingEvent(a);break;case"media:seeked":this.handleMediaSeekedEvent(a);break;case"media:timeupdate":this.handleMediaTimeUpdateEvent(a);break;case"media:durationchange":this.handleMediaDurationChangeEvent(a);break;case"media:loadstart":this.handleMediaLoadStartEvent(a);break;case"media:loadeddata":this.handleMediaLoadedDataEvent(a);break;case"media:loadedmetadata":this.handleMediaLoadedMetadataEvent(a);break;case"media:canplay":this.handleMediaCanPlayEvent(a);break;case"media:canplaythrough":this.handleMediaCanPlayThroughEvent(a);break;case"media:waiting":this.handleMediaWaitingEvent(a);break;case"media:stalled":this.handleMediaStalledEvent(a);break;case"media:suspend":this.handleMediaSuspendEvent(a);break;case"media:volumechange":this.handleMediaVolumeChangeEvent(a);break;case"media:error":this.handleMediaErrorEvent(a);break;case"media:playlistitemchange":this.handleMediaPlaylistItemChangeEvent(a);break;case"media:resize":this.handleMediaResizeEvent(a);break;case"buttplug:device":!1!==a.connected?this.handleDeviceConnect(a):this.handleDeviceDisconnect(a),this._triggerRender();break;case"buttplug:connection":if(!1===a.connected&&a.reason){const i={device:{name:"All devices"},reason:a.reason};this.handleDeviceDisconnect(i)}this._triggerRender();break;case"haptic:started":this.handleHapticStart(a);break;case"haptic:stopped":this.handleHapticStop(a);break;case"core:ready":this.core.notify("status:funplayer",{message:"Core systems ready",type:"success"}),this._triggerRender();break;case"playlist:playbackChanged":this.setState({isPlaying:a.isPlaying});break;case"playlist:itemChanged":if(this.mediaPlayerRef.current&&a.index>=0){const i=this.mediaPlayerRef.current.getPlaylistInfo().currentIndex;i!==a.index&&(this.core.notify?.("status:funplayer",{message:`Syncing MediaPlayer: ${i} → ${a.index}`,type:"log"}),this.mediaPlayerRef.current.goToPlaylistItem(a.index))}break;case"funscript:load":case"funscript:channels":this._triggerRender();break;case"component:resize":this.handleResize(a)}}),zS(this,"_triggerRender",()=>{this.setState(i=>({renderTrigger:i.renderTrigger+1}))}),zS(this,"handleResize",i=>{const a=this.containerRef.current;if(!a)return void console.warn("📏 FunPlayer container ref not available");const s={width:a.offsetWidth,height:a.offsetHeight};if(i&&"object"==typeof i){const a=i.source||"unknown",o=i.reason?` (${i.reason})`:"";this.core.notify?.("status:funplayer",{message:`Resize from ${a}${o}: ${s.width}×${s.height}px`,type:"log"})}else this.core.notify?.("status:funplayer",{message:`Resize (legacy call): ${s.width}×${s.height}px`,type:"log"});this.props.onResize?.(s)}),zS(this,"handleDeviceConnect",i=>{this.core.notify?.("status:funplayer",{message:`Device connected: ${i.device?.name||"Unknown"}`,type:"log"}),this.props.onDeviceConnect?.(i)}),zS(this,"handleDeviceDisconnect",i=>{this.core.notify?.("status:funplayer",{message:`Device disconnected: ${i.device?.name||"Unknown"}`,type:"log"}),this.props.onDeviceDisconnect?.(i)}),zS(this,"handleHapticStart",i=>{this.core.notify?.("status:funplayer",{message:`Haptic playback started: ${i.channels} channels at ${i.updateRate}Hz`,type:"log"}),this.props.onHapticStart?.(i)}),zS(this,"handleHapticStop",i=>{this.core.notify?.("status:funplayer",{message:`Haptic playback stopped: ${i.reason}`,type:"log"}),this.props.onHapticStop?.(i)}),zS(this,"handleMediaPlay",i=>{this.core.notify("media:play",i),this.props.onPlay?.(i)}),zS(this,"handleMediaPause",i=>{this.core.notify("media:pause",i),this.props.onPause?.(i)}),zS(this,"handleMediaEnded",i=>{this.core.notify("media:ended",i),this.props.onEnded?.(i)}),zS(this,"handleMediaSeeking",i=>{this.core.notify("media:seeking",i),this.props.onSeeking?.(i)}),zS(this,"handleMediaSeeked",i=>{this.core.notify("media:seeked",i),this.props.onSeeked?.(i)}),zS(this,"handleMediaTimeUpdate",i=>{this.core.notify("media:timeupdate",i),this.props.onTimeUpdate?.(i)}),zS(this,"handleMediaDurationChange",i=>{this.core.notify("media:durationchange",i),this.props.onDurationChange?.(i)}),zS(this,"handleMediaLoadStart",i=>{this.core.notify("media:loadstart",i),this.props.onLoadStart?.(i)}),zS(this,"handleMediaLoadedData",i=>{this.core.notify("media:loadeddata",i),this.props.onLoadedData?.(i)}),zS(this,"handleMediaLoadedMetadata",i=>{this.core.notify("media:loadedmetadata",i),this.props.onLoadedMetadata?.(i)}),zS(this,"handleMediaCanPlay",i=>{this.core.notify("media:canplay",i),this.props.onCanPlay?.(i)}),zS(this,"handleMediaCanPlayThrough",i=>{this.core.notify("media:canplaythrough",i),this.props.onCanPlayThrough?.(i)}),zS(this,"handleMediaWaiting",i=>{this.core.notify("media:waiting",i),this.props.onWaiting?.(i)}),zS(this,"handleMediaStalled",i=>{this.core.notify("media:stalled",i),this.props.onStalled?.(i)}),zS(this,"handleMediaSuspend",i=>{this.core.notify("media:suspend",i),this.props.onSuspend?.(i)}),zS(this,"handleMediaVolumeChange",i=>{this.core.notify("media:volumechange",i),this.props.onVolumeChange?.(i)}),zS(this,"handleMediaError",i=>{this.core.notify("media:error",i),this.props.onError?.(i)}),zS(this,"handleMediaPlaylistItemChange",i=>{this.core.notify("media:playlistitemchange",i),this.props.onPlaylistItemChange?.(i)}),zS(this,"handleMediaResize",i=>{this.core.notify("media:resize",i)}),zS(this,"handleMediaPlayEvent",({currentTime:i})=>{this.hapticTime=i||0,this.lastMediaTime=this.hapticTime,this.lastSyncTime=performance.now();const a=this.mediaPlayerRef.current?.getDuration()||0;this.core.playlist.updatePlaybackState(!0,i,a),this.core.funscript.hasFunscript()&&(this.startHapticLoop(),this.core.notify?.("status:funplayer",{message:`Haptic playback started at ${i.toFixed(1)}s`,type:"log"}))}),zS(this,"handleMediaPauseEvent",async({currentTime:i})=>{if(this.core.funscript.hasFunscript()){this.stopHapticLoop();try{await this.core.buttplug.stopAll(),this.core.notify?.("status:funplayer",{message:"Haptic devices stopped",type:"log"})}catch(s){this.core.notify?.("status:funplayer",{message:"Failed to stop haptic devices",type:"log",error:s.message})}}const a=this.mediaPlayerRef.current?.getDuration()||0;this.core.playlist.updatePlaybackState(!1,i,a),this.setState({currentActuatorData:/* @__PURE__ */new Map})}),zS(this,"handleMediaEndedEvent",async({currentTime:i})=>{if(this.core.funscript.hasFunscript()){this.stopHapticLoop();try{await this.core.buttplug.stopAll(),this.core.notify?.("status:funplayer",{message:"Haptic playback ended",type:"log"})}catch(a){this.core.notify?.("status:funplayer",{message:"Failed to stop haptic devices on end",type:"log",error:a.message})}}this.core.playlist.updatePlaybackState(!1,0,0),this.hapticTime=0,this.lastMediaTime=0,this.setState({currentActuatorData:/* @__PURE__ */new Map})}),zS(this,"handleMediaSeekingEvent",({currentTime:i})=>{this.core.notify?.("status:funplayer",{message:`Seeking to ${i.toFixed(1)}s`,type:"log"})}),zS(this,"handleMediaSeekedEvent",({currentTime:i})=>{this.core.funscript.hasFunscript()&&this.hapticIntervalId&&(this.hapticTime=i,this.lastMediaTime=i,this.lastSyncTime=performance.now(),this.core.notify?.("status:funplayer",{message:`Seeked to ${i.toFixed(1)}s`,type:"log"}))}),zS(this,"handleMediaTimeUpdateEvent",({currentTime:i})=>{if(this.isHapticAborted)return;if(!this.core.funscript.hasFunscript()||!this.hapticIntervalId)return;const a=performance.now(),s=(a-this.lastSyncTime)/1e3,o=i-this.lastMediaTime;if(s>1&&Math.abs(o)<.01&&!this.isBuffering)return this.core.notify?.("status:funplayer",{message:"Player stall detected (1s+ frozen), starting timeout",type:"error"}),void this._startBuffering("stall_detection",i);const u=Math.abs(i-this.hapticTime);(u>.05||s>1)&&(this.hapticTime=i,this.lastMediaTime=i,this.lastSyncTime=a,u>.1&&this.core.notify?.("status:funplayer",{message:`Haptic drift detected: ${(1e3*u).toFixed(1)}ms, resyncing`,type:"log"}))}),zS(this,"handleMediaDurationChangeEvent",({duration:i})=>{this.core.notify?.("status:funplayer",{message:`Duration changed: ${i.toFixed(1)}s`,type:"log"})}),zS(this,"handleMediaLoadStartEvent",i=>{this.core.notify?.("status:funplayer",{message:"Media loading started",type:"log"})}),zS(this,"handleMediaLoadedDataEvent",({duration:i})=>{this.core.notify?.("status:funplayer",{message:`Media data loaded: ${i.toFixed(1)}s`,type:"log"})}),zS(this,"handleMediaLoadedMetadataEvent",i=>{this.core.notify?.("status:funplayer",{message:`Media loaded: ${i.duration.toFixed(1)}s`,type:"log"});const a=this.core.playlist.getCurrentItem();a&&Math.abs((a.duration||0)-i.duration)>1&&(this.core.notify?.("status:funplayer",{message:`Duration corrected: ${a.duration?.toFixed(1)||"unknown"}s → ${i.duration.toFixed(1)}s`,type:"log"}),this.core.playlist.updateCurrentItemDuration(i.duration)),this.handleResize()}),zS(this,"handleMediaCanPlayEvent",({currentTime:i})=>{this.core.notify?.("status:funplayer",{message:"Media can play",type:"log"}),this.isBuffering&&this._endBuffering("canplay",i)}),zS(this,"handleMediaCanPlayThroughEvent",({currentTime:i})=>{this.core.notify?.("status:funplayer",{message:"Media can play through",type:"log"})}),zS(this,"handleMediaWaitingEvent",({currentTime:i})=>{this.isBuffering&&"waiting"===this.bufferingSource||(this.stallTimeoutId&&(clearTimeout(this.stallTimeoutId),this.stallTimeoutId=null),this._startBuffering("waiting",i))}),zS(this,"handleMediaStalledEvent",({currentTime:i})=>{this.handleMediaWaitingEvent({currentTime:i})}),zS(this,"handleMediaSuspendEvent",({currentTime:i})=>{this.core.notify?.("status:funplayer",{message:"Media loading suspended",type:"log"})}),zS(this,"handleMediaVolumeChangeEvent",({volume:i,muted:a})=>{this.core.notify?.("status:funplayer",{message:"Volume: "+(a?"muted":Math.round(100*i)+"%"),type:"log"})}),zS(this,"handleMediaErrorEvent",i=>{this.core.notify?.("status:funplayer",{message:"Media loading failed",type:"error",error:i.message}),this.core.setError("Media loading failed",i)}),zS(this,"handleMediaPlaylistItemChangeEvent",i=>{if(this.core.notify?.("status:funplayer",{message:`MediaPlayer switched to item ${i}`,type:"log"}),i>=0){i!==this.core.playlist.getCurrentIndex()&&(this.core.notify?.("status:funplayer",{message:`Syncing core playlist to Video.js index ${i}`,type:"log"}),this.core.playlist.goTo(i))}}),zS(this,"handleMediaResizeEvent",i=>{this.core.notify("component:resize",{source:"MediaPlayer",reason:"video-js-resize",dimensions:i})}),zS(this,"_startBuffering",(i,a)=>{if(!this.isBuffering||"waiting"!==this.bufferingSource){if(this.isBuffering=!0,this.bufferingSource=i,this.bufferingStartTime=performance.now(),this.hapticIntervalId){this.stopHapticLoop();try{this.core.buttplug.stopAll(),this.core.notify?.("status:funplayer",{message:`Buffering suspended (${i})`,type:"log"})}catch(s){this.core.notify?.("status:funplayer",{message:"Failed to stop haptic devices",type:"log",error:s.message})}}this.setState({currentActuatorData:/* @__PURE__ */new Map}),"stall_detection"===i&&(this.stallTimeoutId=setTimeout(()=>{this._abortHapticPlayback()},this.stallTimeout),this.core.notify?.("status:funplayer",{message:`Player stall timeout started (${this.stallTimeout}ms)`,type:"error"}))}}),zS(this,"_endBuffering",(i,a)=>{if(!this.isBuffering)return;const s=performance.now()-this.bufferingStartTime,o="stall_detection"===this.bufferingSource;this.stallTimeoutId&&(clearTimeout(this.stallTimeoutId),this.stallTimeoutId=null),this.isBuffering=!1,this.bufferingSource=null,this.isHapticAborted&&"canplay"===i&&(this.isHapticAborted=!1,this.core.notify?.("status:funplayer",{message:"Player recovered, haptic playback re-enabled",type:"success"}));const u=this.mediaPlayerRef.current;if(u&&u.isPlaying()&&this.core.funscript.hasFunscript()&&!this.isHapticAborted){this.hapticTime=a||u.getTime(),this.lastMediaTime=this.hapticTime,this.lastSyncTime=performance.now(),this.startHapticLoop();const _=o?" (stall recovered)":"";this.core.notify?.("status:funplayer",{message:`Buffering ended via ${i} (${s.toFixed(0)}ms)${_}, haptic resumed`,type:"success"})}}),zS(this,"_abortHapticPlayback",()=>{const i=performance.now()-this.bufferingStartTime;this.stallTimeoutId&&(clearTimeout(this.stallTimeoutId),this.stallTimeoutId=null),this.isHapticAborted=!0,this.isBuffering=!1,this.bufferingSource=null,this.stopHapticLoop();try{this.core.buttplug.stopAll()}catch(s){}const a=this.mediaPlayerRef.current;if(a)try{a.pause(),this.core.notify?.("status:funplayer",{message:"Sent pause command to unresponsive player",type:"log"})}catch(s){this.core.notify?.("status:funplayer",{message:"Failed to send pause to player",type:"log",error:s.message})}this.setState({currentActuatorData:/* @__PURE__ */new Map}),this.core.notify?.("status:funplayer",{message:`Media playing aborted due to unresponsive player (${i.toFixed(0)}ms stall)`,type:"error"})}),zS(this,"processHapticFrame",async i=>{const a=this.mediaPlayerRef.current;if(!a)return;if(this.isHapticAborted||this.isBuffering)return;this.hapticTime+=i;const s=this.hapticTime,o=this.getMediaRefreshRate(a),u=this.calculateLinearDuration(i,o),_=await this.core.processHapticFrame(s,{duration:1e3*u});this.setState({currentActuatorData:_})}),zS(this,"startHapticLoop",()=>{if(this.hapticIntervalId)return;this.expectedHapticTime=performance.now();const i=1e3/this.state.updateRate;this.core.notify?.("status:funplayer",{message:`Starting haptic loop at ${this.state.updateRate}Hz`,type:"log"});const a={channels:this.core.funscript.getChannels().length,updateRate:this.state.updateRate,reason:"media_play"};this.core.notify("haptic:started",a);const s=/* @__PURE__ */__name(()=>{try{const a=performance.now(),o=a-this.expectedHapticTime,u=i/1e3;this.processHapticFrame(u),this.expectedHapticTime+=i;const _=Math.max(0,i-o),x=1e3/this.state.updateRate;x!==i?(this.expectedHapticTime=a+x,this.hapticIntervalId=setTimeout(()=>this.restartWithNewRate(),x)):this.hapticIntervalId=setTimeout(s,_)}catch(a){this.core.notify?.("status:funplayer",{message:"Haptic loop error",type:"error",error:a.message}),this.hapticIntervalId=setTimeout(s,i)}},"optimizedLoop");this.hapticIntervalId=setTimeout(s,i)}),zS(this,"stopHapticLoop",()=>{if(this.hapticIntervalId){clearTimeout(this.hapticIntervalId),this.hapticIntervalId=null,this.core.notify?.("status:funplayer",{message:"Haptic loop stopped",type:"log"});const i={reason:"media_pause"};this.core.notify("haptic:stopped",i)}this.expectedHapticTime=0,this.lastSyncTime=0}),zS(this,"restartWithNewRate",()=>{null!==this.hapticIntervalId&&(this.core.notify?.("status:funplayer",{message:`Restarting haptic loop with new rate: ${this.state.updateRate}Hz`,type:"log"}),this.stopHapticLoop(),this.startHapticLoop())}),zS(this,"getCurrentActuatorData",()=>this.state.currentActuatorData),zS(this,"getMediaRefreshRate",i=>{switch(i.getState().mediaType){case"playlist":const a=i.getCurrentItem();if(!a||!a.sources||0===a.sources.length)return this.state.updateRate;return(a.sources[0].type||"").startsWith("audio/")?this.state.updateRate:30;case"media":return 30;default:return this.state.updateRate}}),zS(this,"calculateLinearDuration",(i,a)=>{const s=1/a,o=1.2*Math.max(i,s);return Math.max(.01,Math.min(.1,o))}),zS(this,"getUpdateRate",()=>this.state.updateRate),zS(this,"handleUpdateRateChange",i=>{this.core.notify?.("status:funplayer",{message:`Update rate changed: ${this.state.updateRate}Hz → ${i}Hz`,type:"log"}),this.setState({updateRate:i})}),zS(this,"handleToggleVisualizer",()=>{const i=!this.state.showVisualizer;this.core.notify?.("status:funplayer",{message:"Visualizer "+(i?"shown":"hidden"),type:"log"}),this.setState({showVisualizer:i},()=>{this.handleResize()})}),zS(this,"handleToggleDebug",()=>{const i=!this.state.showDebug;this.core.notify?.("status:funplayer",{message:"Debug panel "+(i?"shown":"hidden"),type:"log"}),this.setState({showDebug:i},()=>{this.handleResize()})}),zS(this,"handleTogglePlaylist",()=>{const i=!this.state.showPlaylist;this.core.notify?.("status:funplayer",{message:"Playlist "+(i?"shown":"hidden"),type:"log"}),this.setState({showPlaylist:i},()=>{this.handleResize()})}),this.core=new ZT,this.state={updateRate:60,isPlaying:!1,currentActuatorData:/* @__PURE__ */new Map,showVisualizer:!0,showDebug:!1,showPlaylist:!0,renderTrigger:0},this.containerRef=en.createRef(),this.mediaPlayerRef=en.createRef(),this.hapticIntervalId=null,this.expectedHapticTime=0,this.hapticTime=0,this.lastMediaTime=0,this.lastSyncTime=0,this.isBuffering=!1,this.bufferingStartTime=0,this.bufferingSource=null,this.stallTimeoutId=null,this.stallTimeout=5e3,this.isHapticAborted=!1,this.coreListener=null}componentDidMount(){this.applyTheme(),this.initializeComponent()}componentDidUpdate(i){i.theme!==this.props.theme&&this.applyTheme(),i.playlist!==this.props.playlist&&this.handlePlaylistUpdate()}componentWillUnmount(){this.stopHapticLoop(),this.stallTimeoutId&&(clearTimeout(this.stallTimeoutId),this.stallTimeoutId=null),this.coreListener&&this.coreListener()}render(){const{showVisualizer:i,showDebug:a,showPlaylist:s}=this.state,o=this.core.playlist.items;/* @__PURE__ */
return bn.jsxs("div",{className:"fp-funplayer",ref:this.containerRef,children:[
/* @__PURE__ */bn.jsx(AS,{core:this.core,onUpdateRateChange:this.handleUpdateRateChange,onGetUpdateRate:this.getUpdateRate}),
/* @__PURE__ */bn.jsx(_b,{ref:this.mediaPlayerRef,playlist:o,notify:this.core.notify,onPlay:this.handleMediaPlay,onPause:this.handleMediaPause,onEnded:this.handleMediaEnded,onSeeking:this.handleMediaSeeking,onSeeked:this.handleMediaSeeked,onTimeUpdate:this.handleMediaTimeUpdate,onDurationChange:this.handleMediaDurationChange,onLoadStart:this.handleMediaLoadStart,onLoadedData:this.handleMediaLoadedData,onLoadedMetadata:this.handleMediaLoadedMetadata,onCanPlay:this.handleMediaCanPlay,onCanPlayThrough:this.handleMediaCanPlayThrough,onWaiting:this.handleMediaWaiting,onStalled:this.handleMediaStalled,onSuspend:this.handleMediaSuspend,onVolumeChange:this.handleMediaVolumeChange,onError:this.handleMediaError,onResize:this.handleResize}),
/* @__PURE__ */bn.jsx(PS,{core:this.core,visible:i,isPlaying:this.state.isPlaying,getCurrentActuatorData:this.getCurrentActuatorData}),
/* @__PURE__ */bn.jsx(OS,{core:this.core,visible:a}),
/* @__PURE__ */bn.jsx(BS,{core:this.core,isPlaying:this.state.isPlaying,updateRate:this.state.updateRate,showVisualizer:i,showDebug:a,showPlaylist:s,onToggleVisualizer:this.handleToggleVisualizer,onToggleDebug:this.handleToggleDebug,onTogglePlaylist:this.handleTogglePlaylist}),
/* @__PURE__ */bn.jsx(rS,{core:this.core,visible:s})]})}};__name(HS,"FunPlayer");let $S=HS;const GS=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,default:$S},Symbol.toStringTag,{value:"Module"})),WS={PLAY:"play",PAUSE:"pause",ENDED:"ended",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",DURATION_CHANGE:"durationchange",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",LOADED_METADATA:"loadedmetadata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",WAITING:"waiting",STALLED:"stalled",SUSPEND:"suspend",VOLUME_CHANGE:"volumechange",ERROR:"error",RESIZE:"resize"},qS={PLAYLIST_ITEM_CHANGE:"playlistitemchange",DEVICE_CONNECT:"deviceconnect",DEVICE_DISCONNECT:"devicedisconnect",HAPTIC_START:"hapticstart",HAPTIC_STOP:"hapticstop"},XS={play:"onPlay",pause:"onPause",ended:"onEnded",seeking:"onSeeking",seeked:"onSeeked",timeupdate:"onTimeUpdate",durationchange:"onDurationChange",loadstart:"onLoadStart",loadeddata:"onLoadedData",loadedmetadata:"onLoadedMetadata",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",waiting:"onWaiting",stalled:"onStalled",suspend:"onSuspend",volumechange:"onVolumeChange",error:"onError",resize:"onResize",playlistitemchange:"onPlaylistItemChange",deviceconnect:"onDeviceConnect",devicedisconnect:"onDeviceDisconnect",hapticstart:"onHapticStart",hapticstop:"onHapticStop"};function getCallbackNameFromEvent(i){return XS[i]?XS[i]:`on${i.split(/[-_]/).map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join("")}`}__name(getCallbackNameFromEvent,"getCallbackNameFromEvent");const QS={...Object.fromEntries(Object.values(WS).map(i=>[i,getCallbackNameFromEvent(i)])),...Object.fromEntries(Object.values(qS).map(i=>[i,getCallbackNameFromEvent(i)]))},KS=[...Object.values(WS),...Object.values(qS)];function createCallbackProps(i){const a={};return KS.forEach(s=>{const o=QS[s];a[o]=a=>{i.dispatchEvent(new CustomEvent(`funplayer-${s}`,{detail:a,bubbles:!0,cancelable:!0}));const u=i[o];if("function"==typeof u)try{u(a)}catch(x){console.error(`❌ Error in direct callback ${o}:`,x)}const _=i.getAttribute(o.toLowerCase());if(_&&"function"==typeof window[_])try{window[_](a)}catch(x){console.error(`❌ Error in attribute callback ${_}:`,x)}}}),a}function getEventDocumentation(){const i={videoJsEvents:{},funPlayerEvents:{},usage:{}};return Object.entries(WS).forEach(([a,s])=>{const o=QS[s];i.videoJsEvents[s]={callback:o,domEvent:`funplayer-${s}`,description:getEventDescription(s),dataStructure:getEventDataStructure(s)}}),Object.entries(qS).forEach(([a,s])=>{const o=QS[s];i.funPlayerEvents[s]={callback:o,domEvent:`funplayer-${s}`,description:getEventDescription(s),dataStructure:getEventDataStructure(s)}}),i.usage={htmlAttributes:'<funplayer onplay="handlePlay" ontimeupdate="handleTimeUpdate" onresize="handleResize"></funplayer>',directCallbacks:"player.onPlay = (data) => console.log(data); player.onTimeUpdate = (data) => updateProgress(data);",domEvents:"player.addEventListener('funplayer-play', (e) => console.log(e.detail)); player.addEventListener('funplayer-timeupdate', (e) => updateUI(e.detail));",dynamicCreation:"FunPlayer.create('#container', { onPlay: handlePlay, onTimeUpdate: handleTimeUpdate, onResize: handleResize })"},i}function getEventDescription(i){return{play:"Fired when playback starts",pause:"Fired when playback is paused",ended:"Fired when playback reaches the end",seeking:"Fired when seeking starts",seeked:"Fired when seeking completes",timeupdate:"Fired periodically during playback (usually 15-250ms intervals)",durationchange:"Fired when media duration changes",loadstart:"Fired when loading starts",loadeddata:"Fired when media data is loaded",loadedmetadata:"Fired when metadata is loaded (duration, dimensions, etc.)",canplay:"Fired when enough data is available to start playback",canplaythrough:"Fired when entire media can play without buffering",waiting:"Fired when playback stops due to buffering",stalled:"Fired when download has stopped unexpectedly",suspend:"Fired when loading is intentionally suspended",volumechange:"Fired when volume or muted state changes",error:"Fired when an error occurs during loading or playback",resize:"Fired when player dimensions change",playlistitemchange:"Fired when playlist advances to next/previous item",deviceconnect:"Fired when a haptic device connects",devicedisconnect:"Fired when a haptic device disconnects",hapticstart:"Fired when haptic playback begins",hapticstop:"Fired when haptic playback stops"}[i]||"Event fired during media interaction"}function getEventDataStructure(i){return{play:"{ currentTime: number, duration: number }",pause:"{ currentTime: number, duration: number }",timeupdate:"{ currentTime: number, duration: number }",seeking:"{ currentTime: number, seekingTo: number }",seeked:"{ currentTime: number, duration: number }",durationchange:"{ duration: number }",loadedmetadata:"{ duration: number, videoWidth?: number, videoHeight?: number }",canplay:"{ currentTime: number, duration: number }",canplaythrough:"{ currentTime: number, duration: number }",waiting:"{ currentTime: number, reason: string }",volumechange:"{ volume: number, muted: boolean }",resize:"{ width: number, height: number }",error:"{ message: string, code: number, error?: Error }",deviceconnect:"{ device: object, name: string }",devicedisconnect:"{ device: object, name: string }",hapticstart:"{ channels: number, updateRate: number }",hapticstop:"{ reason: string }",ended:"{ currentTime: 0 }",loadstart:"{ }",stalled:"{ currentTime: number }",suspend:"{ currentTime: number }"}[i]||"{ }"}__name(createCallbackProps,"createCallbackProps"),__name(getEventDocumentation,"getEventDocumentation"),__name(getEventDescription,"getEventDescription"),__name(getEventDataStructure,"getEventDataStructure"),KS.length;const YS="\n/* ============================================================================\n   TOUS LES STYLES DU DOM PRINCIPAL {EXTRACTION_COMMENT}\n   ============================================================================ */\n\n{ALL_STYLES}\n\n/* ============================================================================\n   WEB COMPONENT HOST STYLES BASIQUES\n   ============================================================================ */\n\n:host {\n  display: block;\n  width: 100%;\n  height: auto;\n  min-height: 200px;\n  transition: height 0.2s ease;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n}\n\n.funplayer-shadow-container {\n  width: 100%;\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n  padding: 0;\n  background: transparent;\n  outline: none;\n}\n",JS=class _FunPlayerWebComponent extends HTMLElement{constructor(){super(),console.log("🔍 Creating shadow DOM..."),this.attachShadow({mode:"open"}),console.log("🔍 Shadow DOM created:",!!this.shadowRoot),this.reactRoot=null,this.stylesInjected=!1,this.initializationPromise=null,this.styleObserver=null,console.log("✅ FunPlayerWebComponent constructed")}connectedCallback(){console.log("🔗 FunPlayerWebComponent connected to DOM"),this.initializationPromise?console.log("⚠️ Already initializing, skipping..."):this.initializationPromise=this.initializeAsync()}disconnectedCallback(){console.log("🔌 FunPlayerWebComponent disconnected from DOM"),this.cleanup()}attributeChangedCallback(i,a,s){a!==s&&(console.log(`🔄 Attribute changed: ${i}`,{oldValue:a,newValue:s}),this.reactRoot&&this.updateReactComponent())}static get observedAttributes(){return["playlist","theme"]}async initializeAsync(){try{console.log("🚀 Initializing FunPlayerWebComponent..."),await this.injectStylesAsync(),this.initializeReact(),console.log("✅ FunPlayerWebComponent fully initialized")}catch(i){console.error("❌ FunPlayerWebComponent initialization failed:",i),this.showErrorFallback(i)}}initializeReact(){try{console.log("⚛️ Initializing React in Shadow DOM...");const i=document.createElement("div");i.className="funplayer-shadow-container",this.shadowRoot.appendChild(i),this.reactRoot=pn.createRoot(i),this.updateReactComponent(),console.log("✅ React initialized successfully in Shadow DOM")}catch(i){throw console.error("❌ React initialization failed:",i),i}}updateReactComponent(){if(this.reactRoot)try{const i=this.buildReactProps();console.log("🔄 Updating React component with props:",{hasPlaylist:!!i.playlist,hasTheme:!!i.theme,eventCallbacks:Object.keys(i).filter(i=>i.startsWith("on")).length}),this.reactRoot.render(en.createElement($S,i))}catch(i){console.error("❌ React component update failed:",i),this.showErrorFallback(i)}}buildReactProps(){const i={};try{const a=this.getAttribute("playlist");a&&(i.playlist=JSON.parse(a))}catch(s){console.warn("⚠️ Invalid playlist JSON:",s.message),i.playlist=[]}try{const a=this.getAttribute("theme");a&&(i.theme=JSON.parse(a))}catch(s){console.warn("⚠️ Invalid theme JSON:",s.message)}const a=createCallbackProps(this);return Object.assign(i,a),i.onResize=i=>{console.log("📏 FunPlayer resize:",i);const a=this.getBoundingClientRect().height;console.log("🔍 Host height BEFORE resize:",a),i&&i.height&&(this.style.height=`${i.height}px`,console.log("🎬 Web Component resized to:",i.height+"px"),setTimeout(()=>{const a=this.getBoundingClientRect().height;console.log("🔍 Host height AFTER resize:",a),console.log("📊 Difference:",a-i.height)},10))},i}getStyleTemplate(i=""){return YS.replace("{ALL_STYLES}",i).replace("{EXTRACTION_COMMENT}",i?"":"(vides)")}async injectStylesAsync(){if(!this.stylesInjected)try{console.log("🎨 Injecting ALL styles into Shadow DOM...");const i=this.extractAllExistingStyles(),a=document.createElement("style");a.id="funplayer-injected-styles",a.textContent=this.getStyleTemplate(i),this.shadowRoot.appendChild(a),this.stylesInjected=!0,this.observeStyleChanges(),console.log("✅ All styles successfully injected into Shadow DOM"),console.log(`📊 Total CSS length: ${i.length} characters`)}catch(i){console.error("❌ Failed to inject styles:",i),this.injectFallbackStylesOnly()}}extractAllExistingStyles(){let i="";try{console.log("🔍 Extracting ALL styles from main DOM...");const a=document.querySelectorAll("style"),s=document.styleSheets;return console.log(`📊 Found ${a.length} <style> tags`),console.log(`📊 Found ${s.length} stylesheets`),a.forEach((a,s)=>{a.textContent&&(i+=`\n/* <style> tag ${s+1} */\n${a.textContent}\n`)}),Array.from(s).forEach((a,s)=>{try{const o=Array.from(a.cssRules||a.rules||[]).map(i=>i.cssText).join("\n");o&&(i+=`\n/* Stylesheet ${s+1} */\n${o}\n`)}catch(o){console.warn(`Cannot access stylesheet ${s+1} (CORS):`,o.message)}}),console.log(`✅ Extracted ${i.length} characters of CSS`),i}catch(a){return console.error("❌ CSS extraction failed:",a),""}}observeStyleChanges(){if(!this.styleObserver)try{this.styleObserver=new MutationObserver(i=>{let a=!1;i.forEach(i=>{"childList"===i.type&&i.addedNodes.forEach(i=>{("STYLE"===i.tagName||"LINK"===i.tagName&&"stylesheet"===i.rel)&&(a=!0)})}),a&&(console.log("🔍 New styles detected, updating Shadow DOM..."),this.updateStylesFromChanges())}),this.styleObserver.observe(document.head,{childList:!0,subtree:!0}),console.log("👁️ Style observer started")}catch(i){console.warn("⚠️ Cannot observe style changes:",i)}}updateStylesFromChanges(){const i=this.shadowRoot.getElementById("funplayer-injected-styles");if(!i)return;const a=this.extractAllExistingStyles();i.textContent=this.getStyleTemplate(a),console.log("✅ Styles updated for lazy loading")}injectFallbackStylesOnly(){if(this.stylesInjected)return;const i=document.createElement("style");i.textContent=this.getStyleTemplate(""),this.shadowRoot.appendChild(i),this.stylesInjected=!0,console.log("⚠️ Fallback styles injected")}showErrorFallback(i){this.shadowRoot.innerHTML=`\n      <div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px; font-family: monospace; font-size: 14px;">\n        <h3>FunPlayer Error</h3>\n        <p>Something went wrong with the FunPlayer Web Component:</p>\n        <pre style="background: #f9f9f9; padding: 10px; border-radius: 3px; overflow: auto;">${i.message}</pre>\n        <button onclick="window.location.reload()" style="margin-top: 10px; padding: 5px 10px; cursor: pointer;">\n          Reload\n        </button>\n      </div>\n    `}cleanup(){this.reactRoot&&(this.reactRoot.unmount(),this.reactRoot=null),this.styleObserver&&(this.styleObserver.disconnect(),this.styleObserver=null),this.stylesInjected=!1,this.initializationPromise=null}};__name(JS,"FunPlayerWebComponent");let ZS=JS;function registerFunPlayerWebComponent(){window.customElements.get("fun-player")?console.log("⚠️ <fun-player> already registered"):(window.customElements.define("fun-player",ZS),console.log("✅ <fun-player> Web Component registered"))}function createFunPlayerElement(i,a={}){let s;if("string"==typeof i){if(s=document.querySelector(i),!s)throw new Error(`Container not found: ${i}`)}else{if(!(i instanceof HTMLElement))throw new Error("Container must be a CSS selector string or HTMLElement");s=i}const o=document.createElement("fun-player");return a.playlist&&o.setAttribute("playlist",JSON.stringify(a.playlist)),a.theme&&o.setAttribute("theme",JSON.stringify(a.theme)),Object.keys(a).forEach(i=>{if("function"==typeof a[i]&&i.startsWith("on")){const s=i.slice(2).toLowerCase();o.addEventListener(`funplayer-${s}`,a[i])}}),s.appendChild(o),o}__name(registerFunPlayerWebComponent,"registerFunPlayerWebComponent"),window.customElements||console.warn("⚠️ Web Components not supported. Consider loading a polyfill."),window.ResizeObserver||(window.ResizeObserver=class{observe(){}unobserve(){}disconnect(){}}),window.FunPlayer={version:"1.0.0",mode:"embed",WebComponent:ZS,register:registerFunPlayerWebComponent,getSupportedEvents:/* @__PURE__ */__name(()=>KS,"getSupportedEvents"),getEventDocumentation:getEventDocumentation,create:/* @__PURE__ */__name((i,a={})=>createFunPlayerElement(i,a),"create"),React:{Component:null,createElement:en.createElement,version:en.version}},__name(createFunPlayerElement,"createFunPlayerElement"),registerFunPlayerWebComponent(),Promise.resolve().then(()=>GS).then(({default:i})=>{window.FunPlayer.React.Component=i}).catch(i=>{console.warn("⚠️ Failed to load React Component for advanced usage:",i)}),window.addEventListener("error",i=>{i.error&&i.error.message&&i.error.message.includes("FunPlayer")&&console.error("🎮 FunPlayer Error:",i.error)});const ex=window.FunPlayer;"undefined"!=typeof module&&module.exports&&(module.exports=window.FunPlayer);var tx,nx={exports:{}},ix={exports:{}};function requireKeycode(){return tx||(tx=1,function(i,a){function keyCode(i){if(i&&"object"==typeof i){var a=i.which||i.keyCode||i.charCode;a&&(i=a)}if("number"==typeof i)return _[i];var u,x=String(i);return(u=s[x.toLowerCase()])?u:(u=o[x.toLowerCase()])||(1===x.length?x.charCodeAt(0):void 0)}__name(keyCode,"keyCode"),keyCode.isEventKey=/* @__PURE__ */__name(function isEventKey(i,a){if(i&&"object"==typeof i){var u=i.which||i.keyCode||i.charCode;if(null==u)return!1;if("string"==typeof a){var _;if(_=s[a.toLowerCase()])return _===u;if(_=o[a.toLowerCase()])return _===u}else if("number"==typeof a)return a===u;return!1}},"isEventKey");var s=(a=i.exports=keyCode).code=a.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=a.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(u=97;u<123;u++)s[String.fromCharCode(u)]=u-32;for(var u=48;u<58;u++)s[u-48]=u;for(u=1;u<13;u++)s["f"+u]=u+111;for(u=0;u<10;u++)s["numpad "+u]=u+96;var _=a.names=a.title={};for(u in s)_[s[u]]=u;for(var x in o)s[x]=o[x]}(ix,ix.exports)),ix.exports}__name(requireKeycode,"requireKeycode");const rx=/* @__PURE__ */getDefaultExportFromCjs(requireKeycode());function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _setPrototypeOf(i,a){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i})(i,a)}function _inheritsLoose(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,_setPrototypeOf(i,a)}var ax,sx;function requireTuple(){if(sx)return ax;function SafeParseTuple(i,a){var s,o=null;try{s=JSON.parse(i,a)}catch(u){o=u}return[o,s]}return sx=1,ax=SafeParseTuple,__name(SafeParseTuple,"SafeParseTuple"),ax}__name(_assertThisInitialized,"_assertThisInitialized"),__name(_setPrototypeOf,"_setPrototypeOf"),__name(_inheritsLoose,"_inheritsLoose"),__name(requireTuple,"requireTuple");const ox=/* @__PURE__ */getDefaultExportFromCjs(requireTuple());var lx,cx,ux,dx={exports:{}};function requireHttpHandler(){if(cx)return lx;cx=1;var i=requireWindow(),a=/* @__PURE__ */__name(function httpResponseHandler2(a,s){return void 0===s&&(s=!1),function(o,u,_){if(o)a(o);else if(u.statusCode>=400&&u.statusCode<=599){var x=_;if(s)if(i.TextDecoder){var w=getCharset(u.headers&&u.headers["content-type"]);try{x=new TextDecoder(w).decode(_)}catch(C){}}else x=String.fromCharCode.apply(null,new Uint8Array(_));a({cause:x})}else a(null,_)}},"httpResponseHandler");function getCharset(i){return void 0===i&&(i=""),i.toLowerCase().split(";").reduce(function(i,a){var s=a.split("="),o=s[0],u=s[1];return"charset"===o.trim()?u.trim():i},"utf-8")}return __name(getCharset,"getCharset"),lx=a}function requireLib(){if(ux)return dx.exports;ux=1;var i=requireWindow(),a=require_extends(),s=requireIsFunction();createXHR.httpHandler=requireHttpHandler();var o=/* @__PURE__ */__name(function parseHeaders2(i){var a={};return i?(i.trim().split("\n").forEach(function(i){var s=i.indexOf(":"),o=i.slice(0,s).trim().toLowerCase(),u=i.slice(s+1).trim();void 0===a[o]?a[o]=u:Array.isArray(a[o])?a[o].push(u):a[o]=[a[o],u]}),a):a},"parseHeaders");function forEachArray(i,a){for(var s=0;s<i.length;s++)a(i[s])}function isEmpty(i){for(var a in i)if(i.hasOwnProperty(a))return!1;return!0}function initParams(i,o,u){var _=i;return s(o)?(u=o,"string"==typeof i&&(_={uri:i})):_=a({},o,{uri:i}),_.callback=u,_}function createXHR(i,a,s){return _createXHR(a=initParams(i,a,s))}function _createXHR(i){if(void 0===i.callback)throw new Error("callback argument missing");var a=!1,s=/* @__PURE__ */__name(function cbOnce(s,o,u){a||(a=!0,i.callback(s,o,u))},"cbOnce");function readystatechange(){4===x.readyState&&setTimeout(loadFunc,0)}function getBody(){var i=void 0;if(i=x.response?x.response:x.responseText||getXml(x),V)try{i=JSON.parse(i)}catch(a){}return i}function errorFunc(i){return clearTimeout(w),i instanceof Error||(i=new Error(""+(i||"Unknown XMLHttpRequest Error"))),i.statusCode=0,s(i,z)}function loadFunc(){if(!_){var a;clearTimeout(w),a=i.useXDR&&void 0===x.status?200:1223===x.status?204:x.status;var u=z,B=null;return 0!==a?(u={body:getBody(),statusCode:a,method:L,headers:{},url:C,rawRequest:x},x.getAllResponseHeaders&&(u.headers=o(x.getAllResponseHeaders()))):B=new Error("Internal XMLHttpRequest Error"),s(B,u,u.body)}}__name(readystatechange,"readystatechange"),__name(getBody,"getBody"),__name(errorFunc,"errorFunc"),__name(loadFunc,"loadFunc");var u,_,x=i.xhr||null;x||(x=i.cors||i.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var w,C=x.url=i.uri||i.url,L=x.method=i.method||"GET",B=i.body||i.data,U=x.headers=i.headers||{},j=!!i.sync,V=!1,z={body:void 0,headers:{},statusCode:0,method:L,url:C,rawRequest:x};if("json"in i&&!1!==i.json&&(V=!0,U.accept||U.Accept||(U.Accept="application/json"),"GET"!==L&&"HEAD"!==L&&(U["content-type"]||U["Content-Type"]||(U["Content-Type"]="application/json"),B=JSON.stringify(!0===i.json?B:i.json))),x.onreadystatechange=readystatechange,x.onload=loadFunc,x.onerror=errorFunc,x.onprogress=function(){},x.onabort=function(){_=!0},x.ontimeout=errorFunc,x.open(L,C,!j,i.username,i.password),j||(x.withCredentials=!!i.withCredentials),!j&&i.timeout>0&&(w=setTimeout(function(){if(!_){_=!0,x.abort("timeout");var i=new Error("XMLHttpRequest timeout");i.code="ETIMEDOUT",errorFunc(i)}},i.timeout)),x.setRequestHeader)for(u in U)U.hasOwnProperty(u)&&x.setRequestHeader(u,U[u]);else if(i.headers&&!isEmpty(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(x.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(x),x.send(B||null),x}function getXml(i){try{if("document"===i.responseType)return i.responseXML;var a=i.responseXML&&"parsererror"===i.responseXML.documentElement.nodeName;if(""===i.responseType&&!a)return i.responseXML}catch(s){}return null}function noop2(){}return dx.exports=createXHR,dx.exports.default=createXHR,createXHR.XMLHttpRequest=i.XMLHttpRequest||noop2,createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:i.XDomainRequest,forEachArray(["get","put","post","patch","head","delete"],function(i){createXHR["delete"===i?"del":i]=function(a,s,o){return(s=initParams(a,s,o)).method=i.toUpperCase(),_createXHR(s)}}),__name(forEachArray,"forEachArray"),__name(isEmpty,"isEmpty"),__name(initParams,"initParams"),__name(createXHR,"createXHR"),__name(_createXHR,"_createXHR"),__name(getXml,"getXml"),__name(noop2,"noop"),dx.exports}__name(requireHttpHandler,"requireHttpHandler"),__name(requireLib,"requireLib");const hx=/* @__PURE__ */getDefaultExportFromCjs(requireLib());function _isNativeReflectConstruct(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(_isNativeReflectConstruct=/* @__PURE__ */__name(function _isNativeReflectConstruct2(){return!!i},"_isNativeReflectConstruct"))()}function _construct(i,a,s){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,a);var u=new(i.bind.apply(i,o));return s&&_setPrototypeOf(u,s.prototype),u}function _inherits(i,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(a&&a.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),a&&_setPrototypeOf(i,a)}__name(_isNativeReflectConstruct,"_isNativeReflectConstruct"),__name(_construct,"_construct"),__name(_inherits,"_inherits");var px,mx={exports:{}};function requireUrlToolkit(){return px||(px=1,i=mx,a=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,o=/(?:\/|^)\.(?=\/)/g,u=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,_={buildAbsoluteURL:/* @__PURE__ */__name(function(i,a,o){if(o=o||{},i=i.trim(),!(a=a.trim())){if(!o.alwaysNormalize)return i;var u=_.parseURL(i);if(!u)throw new Error("Error trying to parse base URL.");return u.path=_.normalizePath(u.path),_.buildURLFromParts(u)}var x=_.parseURL(a);if(!x)throw new Error("Error trying to parse relative URL.");if(x.scheme)return o.alwaysNormalize?(x.path=_.normalizePath(x.path),_.buildURLFromParts(x)):a;var w=_.parseURL(i);if(!w)throw new Error("Error trying to parse base URL.");if(!w.netLoc&&w.path&&"/"!==w.path[0]){var C=s.exec(w.path);w.netLoc=C[1],w.path=C[2]}w.netLoc&&!w.path&&(w.path="/");var L={scheme:w.scheme,netLoc:x.netLoc,path:null,params:x.params,query:x.query,fragment:x.fragment};if(!x.netLoc&&(L.netLoc=w.netLoc,"/"!==x.path[0]))if(x.path){var B=w.path,U=B.substring(0,B.lastIndexOf("/")+1)+x.path;L.path=_.normalizePath(U)}else L.path=w.path,x.params||(L.params=w.params,x.query||(L.query=w.query));return null===L.path&&(L.path=o.alwaysNormalize?_.normalizePath(x.path):x.path),_.buildURLFromParts(L)},"buildAbsoluteURL"),parseURL:/* @__PURE__ */__name(function(i){var s=a.exec(i);return s?{scheme:s[1]||"",netLoc:s[2]||"",path:s[3]||"",params:s[4]||"",query:s[5]||"",fragment:s[6]||""}:null},"parseURL"),normalizePath:/* @__PURE__ */__name(function(i){for(i=i.split("").reverse().join("").replace(o,"");i.length!==(i=i.replace(u,"")).length;);return i.split("").reverse().join("")},"normalizePath"),buildURLFromParts:/* @__PURE__ */__name(function(i){return i.scheme+i.netLoc+i.path+i.params+i.query+i.fragment},"buildURLFromParts")},i.exports=_),mx.exports;var i,a,s,o,u,_}__name(requireUrlToolkit,"requireUrlToolkit");const fx=/* @__PURE__ */getDefaultExportFromCjs(requireUrlToolkit());var gx="http://example.com",_x=/* @__PURE__ */__name(function resolveUrl2(i,a){if(/^[a-z]+:/i.test(a))return a;/^data:/.test(i)&&(i=Tn.location&&Tn.location.href||"");var s="function"==typeof Tn.URL,o=/^\/\//.test(i),u=!Tn.location&&!/\/\//i.test(i);if(s?i=new Tn.URL(i,Tn.location||gx):/\/\//i.test(i)||(i=fx.buildAbsoluteURL(Tn.location&&Tn.location.href||"",i)),s){var _=new URL(a,i);return u?_.href.slice(18):o?_.href.slice(_.protocol.length):_.href}return fx.buildAbsoluteURL(i,a)},"resolveUrl"),yx=/* @__PURE__ */function(){function Stream2(){this.listeners={}}__name(Stream2,"Stream");var i=Stream2.prototype;return i.on=/* @__PURE__ */__name(function on2(i,a){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(a)},"on"),i.off=/* @__PURE__ */__name(function off2(i,a){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(a);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},"off"),i.trigger=/* @__PURE__ */__name(function trigger2(i){var a=this.listeners[i];if(a)if(2===arguments.length)for(var s=a.length,o=0;o<s;++o)a[o].call(this,arguments[1]);else for(var u=Array.prototype.slice.call(arguments,1),_=a.length,x=0;x<_;++x)a[x].apply(this,u)},"trigger"),i.dispose=/* @__PURE__ */__name(function dispose(){this.listeners={}},"dispose"),i.pipe=/* @__PURE__ */__name(function pipe(i){this.on("data",function(a){i.push(a)})},"pipe"),Stream2}(),vx=/* @__PURE__ */__name(function atob2(i){return Tn.atob?Tn.atob(i):Buffer.from(i,"base64").toString("binary")},"atob");function decodeB64ToUint8Array(i){for(var a=vx(i),s=new Uint8Array(a.length),o=0;o<a.length;o++)s[o]=a.charCodeAt(o);return s}__name(decodeB64ToUint8Array,"decodeB64ToUint8Array");var bx=/* @__PURE__ */function(i){function LineStream2(){var a;return(a=i.call(this)||this).buffer="",a}return _inheritsLoose(LineStream2,i),__name(LineStream2,"LineStream"),LineStream2.prototype.push=/* @__PURE__ */__name(function push(i){var a;for(this.buffer+=i,a=this.buffer.indexOf("\n");a>-1;a=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)},"push"),LineStream2}(yx),Tx=String.fromCharCode(9),Sx=/* @__PURE__ */__name(function parseByterange2(i){var a=/([0-9.]*)?@?([0-9.]*)?/.exec(i||""),s={};return a[1]&&(s.length=parseInt(a[1],10)),a[2]&&(s.offset=parseInt(a[2],10)),s},"parseByterange"),xx=/* @__PURE__ */__name(function attributeSeparator2(){return new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')},"attributeSeparator"),wx=/* @__PURE__ */__name(function parseAttributes2(i){for(var a,s=i.split(xx()),o={},u=s.length;u--;)""!==s[u]&&((a=/([^=]*)=(.*)/.exec(s[u]).slice(1))[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),o[a[0]]=a[1]);return o},"parseAttributes"),Ax=/* @__PURE__ */function(i){function ParseStream2(){var a;return(a=i.call(this)||this).customParsers=[],a.tagMappers=[],a}_inheritsLoose(ParseStream2,i),__name(ParseStream2,"ParseStream");var a=ParseStream2.prototype;return a.push=/* @__PURE__ */__name(function push(i){var a,s,o=this;0!==(i=i.trim()).length&&("#"===i[0]?this.tagMappers.reduce(function(a,s){var o=s(i);return o===i?a:a.concat([o])},[i]).forEach(function(i){for(var u=0;u<o.customParsers.length;u++)if(o.customParsers[u].call(o,i))return;if(0===i.indexOf("#EXT"))if(i=i.replace("\r",""),a=/^#EXTM3U/.exec(i))o.trigger("data",{type:"tag",tagType:"m3u"});else{if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(i))return s={type:"tag",tagType:"inf"},a[1]&&(s.duration=parseFloat(a[1])),a[2]&&(s.title=a[2]),void o.trigger("data",s);if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(i))return s={type:"tag",tagType:"targetduration"},a[1]&&(s.duration=parseInt(a[1],10)),void o.trigger("data",s);if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(i))return s={type:"tag",tagType:"version"},a[1]&&(s.version=parseInt(a[1],10)),void o.trigger("data",s);if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(i))return s={type:"tag",tagType:"media-sequence"},a[1]&&(s.number=parseInt(a[1],10)),void o.trigger("data",s);if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(i))return s={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(s.number=parseInt(a[1],10)),void o.trigger("data",s);if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(i))return s={type:"tag",tagType:"playlist-type"},a[1]&&(s.playlistType=a[1]),void o.trigger("data",s);if(a=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(i))return s=_extends(Sx(a[1]),{type:"tag",tagType:"byterange"}),void o.trigger("data",s);if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(i))return s={type:"tag",tagType:"allow-cache"},a[1]&&(s.allowed=!/NO/.test(a[1])),void o.trigger("data",s);if(a=/^#EXT-X-MAP:?(.*)$/.exec(i)){if(s={type:"tag",tagType:"map"},a[1]){var _=wx(a[1]);_.URI&&(s.uri=_.URI),_.BYTERANGE&&(s.byterange=Sx(_.BYTERANGE))}o.trigger("data",s)}else if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(i)){if(s={type:"tag",tagType:"stream-inf"},a[1]){if(s.attributes=wx(a[1]),s.attributes.RESOLUTION){var x=s.attributes.RESOLUTION.split("x"),w={};x[0]&&(w.width=parseInt(x[0],10)),x[1]&&(w.height=parseInt(x[1],10)),s.attributes.RESOLUTION=w}s.attributes.BANDWIDTH&&(s.attributes.BANDWIDTH=parseInt(s.attributes.BANDWIDTH,10)),s.attributes["FRAME-RATE"]&&(s.attributes["FRAME-RATE"]=parseFloat(s.attributes["FRAME-RATE"])),s.attributes["PROGRAM-ID"]&&(s.attributes["PROGRAM-ID"]=parseInt(s.attributes["PROGRAM-ID"],10))}o.trigger("data",s)}else{if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(i))return s={type:"tag",tagType:"media"},a[1]&&(s.attributes=wx(a[1])),void o.trigger("data",s);if(a=/^#EXT-X-ENDLIST/.exec(i))o.trigger("data",{type:"tag",tagType:"endlist"});else if(a=/^#EXT-X-DISCONTINUITY/.exec(i))o.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(i))return s={type:"tag",tagType:"program-date-time"},a[1]&&(s.dateTimeString=a[1],s.dateTimeObject=new Date(a[1])),void o.trigger("data",s);if(a=/^#EXT-X-KEY:?(.*)$/.exec(i))return s={type:"tag",tagType:"key"},a[1]&&(s.attributes=wx(a[1]),s.attributes.IV&&("0x"===s.attributes.IV.substring(0,2).toLowerCase()&&(s.attributes.IV=s.attributes.IV.substring(2)),s.attributes.IV=s.attributes.IV.match(/.{8}/g),s.attributes.IV[0]=parseInt(s.attributes.IV[0],16),s.attributes.IV[1]=parseInt(s.attributes.IV[1],16),s.attributes.IV[2]=parseInt(s.attributes.IV[2],16),s.attributes.IV[3]=parseInt(s.attributes.IV[3],16),s.attributes.IV=new Uint32Array(s.attributes.IV))),void o.trigger("data",s);if(a=/^#EXT-X-START:?(.*)$/.exec(i))return s={type:"tag",tagType:"start"},a[1]&&(s.attributes=wx(a[1]),s.attributes["TIME-OFFSET"]=parseFloat(s.attributes["TIME-OFFSET"]),s.attributes.PRECISE=/YES/.test(s.attributes.PRECISE)),void o.trigger("data",s);if(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(i))return s={type:"tag",tagType:"cue-out-cont"},a[1]?s.data=a[1]:s.data="",void o.trigger("data",s);if(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(i))return s={type:"tag",tagType:"cue-out"},a[1]?s.data=a[1]:s.data="",void o.trigger("data",s);if(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(i))return s={type:"tag",tagType:"cue-in"},a[1]?s.data=a[1]:s.data="",void o.trigger("data",s);if((a=/^#EXT-X-SKIP:(.*)$/.exec(i))&&a[1])return(s={type:"tag",tagType:"skip"}).attributes=wx(a[1]),s.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(s.attributes["SKIPPED-SEGMENTS"]=parseInt(s.attributes["SKIPPED-SEGMENTS"],10)),s.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(s.attributes["RECENTLY-REMOVED-DATERANGES"]=s.attributes["RECENTLY-REMOVED-DATERANGES"].split(Tx)),void o.trigger("data",s);if((a=/^#EXT-X-PART:(.*)$/.exec(i))&&a[1])return(s={type:"tag",tagType:"part"}).attributes=wx(a[1]),["DURATION"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=parseFloat(s.attributes[i]))}),["INDEPENDENT","GAP"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=/YES/.test(s.attributes[i]))}),s.attributes.hasOwnProperty("BYTERANGE")&&(s.attributes.byterange=Sx(s.attributes.BYTERANGE)),void o.trigger("data",s);if((a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(i))&&a[1])return(s={type:"tag",tagType:"server-control"}).attributes=wx(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=parseFloat(s.attributes[i]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=/YES/.test(s.attributes[i]))}),void o.trigger("data",s);if((a=/^#EXT-X-PART-INF:(.*)$/.exec(i))&&a[1])return(s={type:"tag",tagType:"part-inf"}).attributes=wx(a[1]),["PART-TARGET"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=parseFloat(s.attributes[i]))}),void o.trigger("data",s);if((a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(i))&&a[1])return(s={type:"tag",tagType:"preload-hint"}).attributes=wx(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(i){if(s.attributes.hasOwnProperty(i)){s.attributes[i]=parseInt(s.attributes[i],10);var a="BYTERANGE-LENGTH"===i?"length":"offset";s.attributes.byterange=s.attributes.byterange||{},s.attributes.byterange[a]=s.attributes[i],delete s.attributes[i]}}),void o.trigger("data",s);if((a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(i))&&a[1])return(s={type:"tag",tagType:"rendition-report"}).attributes=wx(a[1]),["LAST-MSN","LAST-PART"].forEach(function(i){s.attributes.hasOwnProperty(i)&&(s.attributes[i]=parseInt(s.attributes[i],10))}),void o.trigger("data",s);o.trigger("data",{type:"tag",data:i.slice(4)})}}}else o.trigger("data",{type:"comment",text:i.slice(1)})}):this.trigger("data",{type:"uri",uri:i}))},"push"),a.addParser=/* @__PURE__ */__name(function addParser(i){var a=this,s=i.expression,o=i.customType,u=i.dataParser,_=i.segment;"function"!=typeof u&&(u=/* @__PURE__ */__name(function dataParser2(i){return i},"dataParser")),this.customParsers.push(function(i){if(s.exec(i))return a.trigger("data",{type:"custom",data:u(i),customType:o,segment:_}),!0})},"addParser"),a.addTagMapper=/* @__PURE__ */__name(function addTagMapper(i){var a=i.expression,s=i.map,o=/* @__PURE__ */__name(function mapFn2(i){return a.test(i)?s(i):i},"mapFn");this.tagMappers.push(o)},"addTagMapper"),ParseStream2}(yx),Cx=/* @__PURE__ */__name(function camelCase2(i){return i.toLowerCase().replace(/-(\w)/g,function(i){return i[1].toUpperCase()})},"camelCase"),Ex=/* @__PURE__ */__name(function camelCaseKeys2(i){var a={};return Object.keys(i).forEach(function(s){a[Cx(s)]=i[s]}),a},"camelCaseKeys"),Mx=/* @__PURE__ */__name(function setHoldBack2(i){var a=i.serverControl,s=i.targetDuration,o=i.partTargetDuration;if(a){var u="#EXT-X-SERVER-CONTROL",_="holdBack",x="partHoldBack",w=s&&3*s,C=o&&2*o;s&&!a.hasOwnProperty(_)&&(a[_]=w,this.trigger("info",{message:u+" defaulting HOLD-BACK to targetDuration * 3 ("+w+")."})),w&&a[_]<w&&(this.trigger("warn",{message:u+" clamping HOLD-BACK ("+a[_]+") to targetDuration * 3 ("+w+")"}),a[_]=w),o&&!a.hasOwnProperty(x)&&(a[x]=3*o,this.trigger("info",{message:u+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+a[x]+")."})),o&&a[x]<C&&(this.trigger("warn",{message:u+" clamping PART-HOLD-BACK ("+a[x]+") to partTargetDuration * 2 ("+C+")."}),a[x]=C)}},"setHoldBack"),kx=/* @__PURE__ */function(i){function Parser2(){var a;(a=i.call(this)||this).lineStream=new bx,a.parseStream=new Ax,a.lineStream.pipe(a.parseStream);var s,o,u=_assertThisInitialized(a),_=[],x={},w=!1,C=/* @__PURE__ */__name(function noop3(){},"noop"),L={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},B=0;a.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var U=0,j=0;return a.on("end",function(){x.uri||!x.parts&&!x.preloadHints||(!x.map&&s&&(x.map=s),!x.key&&o&&(x.key=o),x.timeline||"number"!=typeof B||(x.timeline=B),a.manifest.preloadSegment=x)}),a.parseStream.on("data",function(i){var a,V;({tag:/* @__PURE__ */__name(function tag(){({version:/* @__PURE__ */__name(function version2(){i.version&&(this.manifest.version=i.version)},"version"),"allow-cache":/* @__PURE__ */__name(function allowCache(){this.manifest.allowCache=i.allowed,"allowed"in i||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},"allowCache"),byterange:/* @__PURE__ */__name(function byterange(){var a={};"length"in i&&(x.byterange=a,a.length=i.length,"offset"in i||(i.offset=U)),"offset"in i&&(x.byterange=a,a.offset=i.offset),U=a.offset+a.length},"byterange"),endlist:/* @__PURE__ */__name(function endlist(){this.manifest.endList=!0},"endlist"),inf:/* @__PURE__ */__name(function inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),i.duration>0&&(x.duration=i.duration),0===i.duration&&(x.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=_},"inf"),key:/* @__PURE__ */__name(function key(){if(i.attributes)if("NONE"!==i.attributes.METHOD)if(i.attributes.URI){if("com.apple.streamingkeydelivery"===i.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:i.attributes});if("com.microsoft.playready"===i.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:i.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===i.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(i.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===i.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==i.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):i.attributes.KEYID&&"0x"===i.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:i.attributes.KEYFORMAT,keyId:i.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array(i.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}i.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:i.attributes.METHOD||"AES-128",uri:i.attributes.URI},void 0!==i.attributes.IV&&(o.iv=i.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else o=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"key"),"media-sequence":/* @__PURE__ */__name(function mediaSequence(){isFinite(i.number)?this.manifest.mediaSequence=i.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+i.number})},"mediaSequence"),"discontinuity-sequence":/* @__PURE__ */__name(function discontinuitySequence(){isFinite(i.number)?(this.manifest.discontinuitySequence=i.number,B=i.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+i.number})},"discontinuitySequence"),"playlist-type":/* @__PURE__ */__name(function playlistType(){/VOD|EVENT/.test(i.playlistType)?this.manifest.playlistType=i.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+i.playlist})},"playlistType"),map:/* @__PURE__ */__name(function map(){s={},i.uri&&(s.uri=i.uri),i.byterange&&(s.byterange=i.byterange),o&&(s.key=o)},"map"),"stream-inf":/* @__PURE__ */__name(function streamInf(){this.manifest.playlists=_,this.manifest.mediaGroups=this.manifest.mediaGroups||L,i.attributes?(x.attributes||(x.attributes={}),_extends(x.attributes,i.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},"streamInf"),media:/* @__PURE__ */__name(function media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||L,i.attributes&&i.attributes.TYPE&&i.attributes["GROUP-ID"]&&i.attributes.NAME){var s=this.manifest.mediaGroups[i.attributes.TYPE];s[i.attributes["GROUP-ID"]]=s[i.attributes["GROUP-ID"]]||{},a=s[i.attributes["GROUP-ID"]],(V={default:/yes/i.test(i.attributes.DEFAULT)}).default?V.autoselect=!0:V.autoselect=/yes/i.test(i.attributes.AUTOSELECT),i.attributes.LANGUAGE&&(V.language=i.attributes.LANGUAGE),i.attributes.URI&&(V.uri=i.attributes.URI),i.attributes["INSTREAM-ID"]&&(V.instreamId=i.attributes["INSTREAM-ID"]),i.attributes.CHARACTERISTICS&&(V.characteristics=i.attributes.CHARACTERISTICS),i.attributes.FORCED&&(V.forced=/yes/i.test(i.attributes.FORCED)),a[i.attributes.NAME]=V}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},"media"),discontinuity:/* @__PURE__ */__name(function discontinuity(){B+=1,x.discontinuity=!0,this.manifest.discontinuityStarts.push(_.length)},"discontinuity"),"program-date-time":/* @__PURE__ */__name(function programDateTime(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=i.dateTimeString,this.manifest.dateTimeObject=i.dateTimeObject),x.dateTimeString=i.dateTimeString,x.dateTimeObject=i.dateTimeObject},"programDateTime"),targetduration:/* @__PURE__ */__name(function targetduration(){!isFinite(i.duration)||i.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+i.duration}):(this.manifest.targetDuration=i.duration,Mx.call(this,this.manifest))},"targetduration"),start:/* @__PURE__ */__name(function start(){i.attributes&&!isNaN(i.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:i.attributes["TIME-OFFSET"],precise:i.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"start"),"cue-out":/* @__PURE__ */__name(function cueOut(){x.cueOut=i.data},"cueOut"),"cue-out-cont":/* @__PURE__ */__name(function cueOutCont(){x.cueOutCont=i.data},"cueOutCont"),"cue-in":/* @__PURE__ */__name(function cueIn(){x.cueIn=i.data},"cueIn"),skip:/* @__PURE__ */__name(function skip(){this.manifest.skip=Ex(i.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",i.attributes,["SKIPPED-SEGMENTS"])},"skip"),part:/* @__PURE__ */__name(function part(){var a=this;w=!0;var s=this.manifest.segments.length,o=Ex(i.attributes);x.parts=x.parts||[],x.parts.push(o),o.byterange&&(o.byterange.hasOwnProperty("offset")||(o.byterange.offset=j),j=o.byterange.offset+o.byterange.length);var u=x.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+u+" for segment #"+s,i.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(i,s){i.hasOwnProperty("lastPart")||a.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+s+" lacks required attribute(s): LAST-PART"})})},"part"),"server-control":/* @__PURE__ */__name(function serverControl(){var a=this.manifest.serverControl=Ex(i.attributes);a.hasOwnProperty("canBlockReload")||(a.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Mx.call(this,this.manifest),a.canSkipDateranges&&!a.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"serverControl"),"preload-hint":/* @__PURE__ */__name(function preloadHint(){var a=this.manifest.segments.length,s=Ex(i.attributes),o=s.type&&"PART"===s.type;x.preloadHints=x.preloadHints||[],x.preloadHints.push(s),s.byterange&&(s.byterange.hasOwnProperty("offset")||(s.byterange.offset=o?j:0,o&&(j=s.byterange.offset+s.byterange.length)));var u=x.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+u+" for segment #"+a,i.attributes,["TYPE","URI"]),s.type)for(var _=0;_<x.preloadHints.length-1;_++){var w=x.preloadHints[_];w.type&&(w.type===s.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+u+" for segment #"+a+" has the same TYPE "+s.type+" as preload hint #"+_}))}},"preloadHint"),"rendition-report":/* @__PURE__ */__name(function renditionReport(){var a=Ex(i.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(a);var s=this.manifest.renditionReports.length-1,o=["LAST-MSN","URI"];w&&o.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+s,i.attributes,o)},"renditionReport"),"part-inf":/* @__PURE__ */__name(function partInf(){this.manifest.partInf=Ex(i.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",i.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Mx.call(this,this.manifest)},"partInf")}[i.tagType]||C).call(u)},"tag"),uri:/* @__PURE__ */__name(function uri(){x.uri=i.uri,_.push(x),this.manifest.targetDuration&&!("duration"in x)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),x.duration=this.manifest.targetDuration),o&&(x.key=o),x.timeline=B,s&&(x.map=s),j=0,x={}},"uri"),comment:/* @__PURE__ */__name(function comment(){},"comment"),custom:/* @__PURE__ */__name(function custom(){i.segment?(x.custom=x.custom||{},x.custom[i.customType]=i.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[i.customType]=i.data)},"custom")})[i.type].call(u)}),a}_inheritsLoose(Parser2,i),__name(Parser2,"Parser");var a=Parser2.prototype;return a.warnOnMissingAttributes_=/* @__PURE__ */__name(function warnOnMissingAttributes_(i,a,s){var o=[];s.forEach(function(i){a.hasOwnProperty(i)||o.push(i)}),o.length&&this.trigger("warn",{message:i+" lacks required attribute(s): "+o.join(", ")})},"warnOnMissingAttributes_"),a.push=/* @__PURE__ */__name(function push(i){this.lineStream.push(i)},"push"),a.end=/* @__PURE__ */__name(function end(){this.lineStream.push("\n"),this.trigger("end")},"end"),a.addParser=/* @__PURE__ */__name(function addParser(i){this.parseStream.addParser(i)},"addParser"),a.addTagMapper=/* @__PURE__ */__name(function addTagMapper(i){this.parseStream.addTagMapper(i)},"addTagMapper"),Parser2}(yx),Px={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Ix=["video","audio","text"],Lx=["Video","Audio","Text"],Dx=/* @__PURE__ */__name(function translateLegacyCodec2(i){return i?i.replace(/avc1\.(\d+)\.(\d+)/i,function(i,a,s){return"avc1."+("00"+Number(a).toString(16)).slice(-2)+"00"+("00"+Number(s).toString(16)).slice(-2)}):i},"translateLegacyCodec"),Rx=/* @__PURE__ */__name(function parseCodecs2(i){void 0===i&&(i="");var a=i.split(","),s=[];return a.forEach(function(i){var a;i=i.trim(),Ix.forEach(function(o){var u=Px[o].exec(i.toLowerCase());if(u&&!(u.length<=1)){a=o;var _=i.substring(0,u[1].length),x=i.replace(_,"");s.push({type:_,details:x,mediaType:o})}}),a||s.push({type:i,details:"",mediaType:"unknown"})}),s},"parseCodecs"),Ox=/* @__PURE__ */__name(function codecsFromDefault2(i,a){if(!i.mediaGroups.AUDIO||!a)return null;var s=i.mediaGroups.AUDIO[a];if(!s)return null;for(var o in s){var u=s[o];if(u.default&&u.playlists)return Rx(u.playlists[0].attributes.CODECS)}return null},"codecsFromDefault"),Nx=/* @__PURE__ */__name(function isAudioCodec2(i){return void 0===i&&(i=""),Px.audio.test(i.trim().toLowerCase())},"isAudioCodec"),Bx=/* @__PURE__ */__name(function isTextCodec2(i){return void 0===i&&(i=""),Px.text.test(i.trim().toLowerCase())},"isTextCodec"),Fx=/* @__PURE__ */__name(function getMimeForCodec2(i){if(i&&"string"==typeof i){var a=i.toLowerCase().split(",").map(function(i){return Dx(i.trim())}),s="video";1===a.length&&Nx(a[0])?s="audio":1===a.length&&Bx(a[0])&&(s="application");var o="mp4";return a.every(function(i){return Px.mp4.test(i)})?o="mp4":a.every(function(i){return Px.webm.test(i)})?o="webm":a.every(function(i){return Px.ogg.test(i)})&&(o="ogg"),s+"/"+o+';codecs="'+i+'"'}},"getMimeForCodec"),Ux=/* @__PURE__ */__name(function browserSupportsCodec2(i){return void 0===i&&(i=""),Tn.MediaSource&&Tn.MediaSource.isTypeSupported&&Tn.MediaSource.isTypeSupported(Fx(i))||!1},"browserSupportsCodec"),jx=/* @__PURE__ */__name(function muxerSupportsCodec2(i){return void 0===i&&(i=""),i.toLowerCase().split(",").every(function(i){i=i.trim();for(var a=0;a<Lx.length;a++){if(Px["muxer"+Lx[a]].test(i))return!0}return!1})},"muxerSupportsCodec"),Vx="mp4a.40.2",zx=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Hx=/^application\/dash\+xml/i,$x=/* @__PURE__ */__name(function simpleTypeFromSourceType2(i){return zx.test(i)?"hls":Hx.test(i)?"dash":"application/vnd.videojs.vhs+json"===i?"vhs-json":null},"simpleTypeFromSourceType"),Gx=/* @__PURE__ */__name(function countBits2(i){return i.toString(2).length},"countBits"),Wx=/* @__PURE__ */__name(function countBytes2(i){return Math.ceil(Gx(i)/8)},"countBytes"),qx=/* @__PURE__ */__name(function isArrayBufferView2(i){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer},"isArrayBufferView"),Xx=/* @__PURE__ */__name(function isTypedArray2(i){return qx(i)},"isTypedArray"),Qx=/* @__PURE__ */__name(function toUint82(i){return i instanceof Uint8Array?i:(Array.isArray(i)||Xx(i)||i instanceof ArrayBuffer||(i="number"!=typeof i||"number"==typeof i&&i!=i?0:[i]),new Uint8Array(i&&i.buffer||i,i&&i.byteOffset||0,i&&i.byteLength||0))},"toUint8"),Kx=Tn.BigInt||Number,Yx=[Kx("0x1"),Kx("0x100"),Kx("0x10000"),Kx("0x1000000"),Kx("0x100000000"),Kx("0x10000000000"),Kx("0x1000000000000"),Kx("0x100000000000000"),Kx("0x10000000000000000")];!function(){var i=new Uint16Array([65484]),a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);255===a[0]||a[0]}();var Jx,Zx,ew,tw,nw=/* @__PURE__ */__name(function bytesToNumber2(i,a){var s=void 0===a?{}:a,o=s.signed,u=void 0!==o&&o,_=s.le,x=void 0!==_&&_;i=Qx(i);var w=x?"reduce":"reduceRight",C=(i[w]?i[w]:Array.prototype[w]).call(i,function(a,s,o){var u=x?o:Math.abs(o+1-i.length);return a+Kx(s)*Yx[u]},Kx(0));if(u){var L=Yx[i.length]/Kx(2)-Kx(1);(C=Kx(C))>L&&(C-=L,C-=L,C-=Kx(2))}return Number(C)},"bytesToNumber"),iw=/* @__PURE__ */__name(function numberToBytes2(i,a){var s={}.le,o=void 0!==s&&s;("bigint"!=typeof i&&"number"!=typeof i||"number"==typeof i&&i!=i)&&(i=0),i=Kx(i);for(var u=Wx(i),_=new Uint8Array(new ArrayBuffer(u)),x=0;x<u;x++){var w=o?x:Math.abs(x+1-_.length);_[w]=Number(i/Yx[x]&Kx(255)),i<0&&(_[w]=Math.abs(~_[w]),_[w]-=0===x?1:2)}return _},"numberToBytes"),rw=/* @__PURE__ */__name(function stringToBytes2(i,a){if("string"!=typeof i&&i&&"function"==typeof i.toString&&(i=i.toString()),"string"!=typeof i)return new Uint8Array;a||(i=unescape(encodeURIComponent(i)));for(var s=new Uint8Array(i.length),o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return s},"stringToBytes"),aw=/* @__PURE__ */__name(function concatTypedArrays2(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(a=a.filter(function(i){return i&&(i.byteLength||i.length)&&"string"!=typeof i}),a.length<=1)return Qx(a[0]);var o=a.reduce(function(i,a,s){return i+(a.byteLength||a.length)},0),u=new Uint8Array(o),_=0;return a.forEach(function(i){i=Qx(i),u.set(i,_),_+=i.byteLength}),u},"concatTypedArrays"),sw=/* @__PURE__ */__name(function bytesMatch2(i,a,s){var o=void 0===s?{}:s,u=o.offset,_=void 0===u?0:u,x=o.mask,w=void 0===x?[]:x;i=Qx(i);var C=(a=Qx(a)).every?a.every:Array.prototype.every;return a.length&&i.length-_>=a.length&&C.call(a,function(a,s){return a===(w[s]?w[s]&i[_+s]:i[_+s])})},"bytesMatch"),ow=/* @__PURE__ */__name(function forEachMediaGroup2(i,a,s){a.forEach(function(a){for(var o in i.mediaGroups[a])for(var u in i.mediaGroups[a][o]){var _=i.mediaGroups[a][o][u];s(_,a,o,u)}})},"forEachMediaGroup"),lw=/* @__PURE__ */__name(function isObject2(i){return!!i&&"object"==typeof i},"isObject"),cw=/* @__PURE__ */__name(function merge2(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return a.reduce(function(i,a){return"object"!=typeof a||Object.keys(a).forEach(function(s){Array.isArray(i[s])&&Array.isArray(a[s])?i[s]=i[s].concat(a[s]):lw(i[s])&&lw(a[s])?i[s]=merge2(i[s],a[s]):i[s]=a[s]}),i},{})},"merge"),uw=/* @__PURE__ */__name(function values2(i){return Object.keys(i).map(function(a){return i[a]})},"values"),dw=/* @__PURE__ */__name(function range2(i,a){for(var s=[],o=i;o<a;o++)s.push(o);return s},"range"),hw=/* @__PURE__ */__name(function flatten2(i){return i.reduce(function(i,a){return i.concat(a)},[])},"flatten"),pw=/* @__PURE__ */__name(function from2(i){if(!i.length)return[];for(var a=[],s=0;s<i.length;s++)a.push(i[s]);return a},"from"),mw=/* @__PURE__ */__name(function findIndexes2(i,a){return i.reduce(function(i,s,o){return s[a]&&i.push(o),i},[])},"findIndexes"),fw=/* @__PURE__ */__name(function findIndex2(i,a){for(var s=0;s<i.length;s++)if(a(i[s]))return s;return-1},"findIndex"),gw=/* @__PURE__ */__name(function union2(i,a){return uw(i.reduce(function(i,s){return s.forEach(function(s){i[a(s)]=s}),i},{}))},"union"),_w="INVALID_NUMBER_OF_PERIOD",yw="DASH_EMPTY_MANIFEST",vw="DASH_INVALID_XML",bw="NO_BASE_URL",Tw="SEGMENT_TIME_UNSPECIFIED",Sw="UNSUPPORTED_UTC_TIMING_SCHEME",xw=/* @__PURE__ */__name(function urlTypeToSegment2(i){var a=i.baseUrl,s=void 0===a?"":a,o=i.source,u=void 0===o?"":o,_=i.range,x=void 0===_?"":_,w=i.indexRange,C=void 0===w?"":w,L={uri:u,resolvedUri:_x(s||"",u)};if(x||C){var B,U=(x||C).split("-"),j=Tn.BigInt?Tn.BigInt(U[0]):parseInt(U[0],10),V=Tn.BigInt?Tn.BigInt(U[1]):parseInt(U[1],10);j<Number.MAX_SAFE_INTEGER&&"bigint"==typeof j&&(j=Number(j)),V<Number.MAX_SAFE_INTEGER&&"bigint"==typeof V&&(V=Number(V)),"bigint"==typeof(B="bigint"==typeof V||"bigint"==typeof j?Tn.BigInt(V)-Tn.BigInt(j)+Tn.BigInt(1):V-j+1)&&B<Number.MAX_SAFE_INTEGER&&(B=Number(B)),L.byterange={length:B,offset:j}}return L},"urlTypeToSegment"),ww=/* @__PURE__ */__name(function byteRangeToString2(i){var a;return a="bigint"==typeof i.offset||"bigint"==typeof i.length?Tn.BigInt(i.offset)+Tn.BigInt(i.length)-Tn.BigInt(1):i.offset+i.length-1,i.offset+"-"+a},"byteRangeToString"),Aw=/* @__PURE__ */__name(function parseEndNumber2(i){return i&&"number"!=typeof i&&(i=parseInt(i,10)),isNaN(i)?null:i},"parseEndNumber"),Cw={static:/* @__PURE__ */__name(function _static(i){var a=i.duration,s=i.timescale,o=void 0===s?1:s,u=i.sourceDuration,_=i.periodDuration,x=Aw(i.endNumber),w=a/o;return"number"==typeof x?{start:0,end:x}:"number"==typeof _?{start:0,end:_/w}:{start:0,end:u/w}},"_static"),dynamic:/* @__PURE__ */__name(function dynamic(i){var a=i.NOW,s=i.clientOffset,o=i.availabilityStartTime,u=i.timescale,_=void 0===u?1:u,x=i.duration,w=i.periodStart,C=void 0===w?0:w,L=i.minimumUpdatePeriod,B=void 0===L?0:L,U=i.timeShiftBufferDepth,j=void 0===U?1/0:U,V=Aw(i.endNumber),z=(a+s)/1e3,$=o+C,Y=z+B-$,Z=Math.ceil(Y*_/x),ee=Math.floor((z-$-j)*_/x),ie=Math.floor((z-$)*_/x);return{start:Math.max(0,ee),end:"number"==typeof V?V:Math.min(Z,ie)}},"dynamic")},Ew=/* @__PURE__ */__name(function toSegments2(i){return function(a){var s=i.duration,o=i.timescale,u=void 0===o?1:o,_=i.periodStart,x=i.startNumber;return{number:(void 0===x?1:x)+a,duration:s/u,timeline:_,time:a*s}}},"toSegments"),Mw=/* @__PURE__ */__name(function parseByDuration2(i){var a=i.type,s=i.duration,o=i.timescale,u=void 0===o?1:o,_=i.periodDuration,x=i.sourceDuration,w=Cw[a](i),C=w.start,L=w.end,B=dw(C,L).map(Ew(i));if("static"===a){var U=B.length-1,j="number"==typeof _?_:x;B[U].duration=j-s/u*U}return B},"parseByDuration"),kw=/* @__PURE__ */__name(function segmentsFromBase2(i){var a=i.baseUrl,s=i.initialization,o=void 0===s?{}:s,u=i.sourceDuration,_=i.indexRange,x=void 0===_?"":_,w=i.periodStart,C=i.presentationTime,L=i.number,B=void 0===L?0:L,U=i.duration;if(!a)throw new Error(bw);var j=xw({baseUrl:a,source:o.sourceURL,range:o.range}),V=xw({baseUrl:a,source:a,indexRange:x});if(V.map=j,U){var z=Mw(i);z.length&&(V.duration=z[0].duration,V.timeline=z[0].timeline)}else u&&(V.duration=u,V.timeline=w);return V.presentationTime=C||w,V.number=B,[V]},"segmentsFromBase"),Pw=/* @__PURE__ */__name(function addSidxSegmentsToPlaylist2(i,a,s){var o,u=i.sidx.map?i.sidx.map:null,_=i.sidx.duration,x=i.timeline||0,w=i.sidx.byterange,C=w.offset+w.length,L=a.timescale,B=a.references.filter(function(i){return 1!==i.referenceType}),U=[],j=i.endList?"static":"dynamic",V=i.sidx.timeline,z=V,$=i.mediaSequence||0;o="bigint"==typeof a.firstOffset?Tn.BigInt(C)+a.firstOffset:C+a.firstOffset;for(var Y=0;Y<B.length;Y++){var Z=a.references[Y],ee=Z.referencedSize,ie=Z.subsegmentDuration,ae=void 0;ae="bigint"==typeof o?o+Tn.BigInt(ee)-Tn.BigInt(1):o+ee-1;var le=kw({baseUrl:s,timescale:L,timeline:x,periodStart:V,presentationTime:z,number:$,duration:ie,sourceDuration:_,indexRange:o+"-"+ae,type:j})[0];u&&(le.map=u),U.push(le),o+="bigint"==typeof o?Tn.BigInt(ee):ee,z+=ie/L,$++}return i.segments=U,i},"addSidxSegmentsToPlaylist"),Iw=["AUDIO","SUBTITLES"],Lw=1/60,Dw=/* @__PURE__ */__name(function getUniqueTimelineStarts2(i){return gw(i,function(i){return i.timeline}).sort(function(i,a){return i.timeline>a.timeline?1:-1})},"getUniqueTimelineStarts"),Rw=/* @__PURE__ */__name(function findPlaylistWithName2(i,a){for(var s=0;s<i.length;s++)if(i[s].attributes.NAME===a)return i[s];return null},"findPlaylistWithName"),Ow=/* @__PURE__ */__name(function getMediaGroupPlaylists2(i){var a=[];return ow(i,Iw,function(i,s,o,u){a=a.concat(i.playlists||[])}),a},"getMediaGroupPlaylists"),Nw=/* @__PURE__ */__name(function updateMediaSequenceForPlaylist2(i){var a=i.playlist,s=i.mediaSequence;a.mediaSequence=s,a.segments.forEach(function(i,s){i.number=a.mediaSequence+s})},"updateMediaSequenceForPlaylist"),Bw=/* @__PURE__ */__name(function updateSequenceNumbers2(i){var a=i.oldPlaylists,s=i.newPlaylists,o=i.timelineStarts;s.forEach(function(i){i.discontinuitySequence=fw(o,function(a){return a.timeline===i.timeline});var s=Rw(a,i.attributes.NAME);if(s&&!i.sidx){var u=i.segments[0],_=fw(s.segments,function(i){return Math.abs(i.presentationTime-u.presentationTime)<Lw});if(-1===_)return Nw({playlist:i,mediaSequence:s.mediaSequence+s.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),void((!s.segments.length&&i.timeline>s.timeline||s.segments.length&&i.timeline>s.segments[s.segments.length-1].timeline)&&i.discontinuitySequence--);s.segments[_].discontinuity&&!u.discontinuity&&(u.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),Nw({playlist:i,mediaSequence:s.segments[_].number})}})},"updateSequenceNumbers"),Fw=/* @__PURE__ */__name(function positionManifestOnTimeline2(i){var a=i.oldManifest,s=i.newManifest,o=a.playlists.concat(Ow(a)),u=s.playlists.concat(Ow(s));return s.timelineStarts=Dw([a.timelineStarts,s.timelineStarts]),Bw({oldPlaylists:o,newPlaylists:u,timelineStarts:s.timelineStarts}),s},"positionManifestOnTimeline"),Uw=/* @__PURE__ */__name(function generateSidxKey2(i){return i&&i.uri+"-"+ww(i.byterange)},"generateSidxKey"),jw=/* @__PURE__ */__name(function mergeDiscontiguousPlaylists2(i){return uw(i.reduce(function(i,a){var s=a.attributes.id+(a.attributes.lang||"");if(i[s]){var o;if(a.segments)a.segments[0]&&(a.segments[0].discontinuity=!0),(o=i[s].segments).push.apply(o,a.segments);a.attributes.contentProtection&&(i[s].attributes.contentProtection=a.attributes.contentProtection)}else i[s]=a,i[s].attributes.timelineStarts=[];return i[s].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),i},{})).map(function(i){return i.discontinuityStarts=mw(i.segments||[],"discontinuity"),i})},"mergeDiscontiguousPlaylists"),Vw=/* @__PURE__ */__name(function addSidxSegmentsToPlaylist2(i,a){var s=Uw(i.sidx),o=s&&a[s]&&a[s].sidx;return o&&Pw(i,o,i.sidx.resolvedUri),i},"addSidxSegmentsToPlaylist"),zw=/* @__PURE__ */__name(function addSidxSegmentsToPlaylists2(i,a){if(void 0===a&&(a={}),!Object.keys(a).length)return i;for(var s in i)i[s]=Vw(i[s],a);return i},"addSidxSegmentsToPlaylists"),Hw=/* @__PURE__ */__name(function formatAudioPlaylist2(i,a){var s,o=i.attributes,u=i.segments,_=i.sidx,x=i.mediaSequence,w=i.discontinuitySequence,C=i.discontinuityStarts,L={attributes:(s={NAME:o.id,BANDWIDTH:o.bandwidth,CODECS:o.codecs},s["PROGRAM-ID"]=1,s),uri:"",endList:"static"===o.type,timeline:o.periodStart,resolvedUri:"",targetDuration:o.duration,discontinuitySequence:w,discontinuityStarts:C,timelineStarts:o.timelineStarts,mediaSequence:x,segments:u};return o.contentProtection&&(L.contentProtection=o.contentProtection),_&&(L.sidx=_),a&&(L.attributes.AUDIO="audio",L.attributes.SUBTITLES="subs"),L},"formatAudioPlaylist"),$w=/* @__PURE__ */__name(function formatVttPlaylist2(i){var a,s=i.attributes,o=i.segments,u=i.mediaSequence,_=i.discontinuityStarts,x=i.discontinuitySequence;void 0===o&&(o=[{uri:s.baseUrl,timeline:s.periodStart,resolvedUri:s.baseUrl||"",duration:s.sourceDuration,number:0}],s.duration=s.sourceDuration);var w=((a={NAME:s.id,BANDWIDTH:s.bandwidth})["PROGRAM-ID"]=1,a);return s.codecs&&(w.CODECS=s.codecs),{attributes:w,uri:"",endList:"static"===s.type,timeline:s.periodStart,resolvedUri:s.baseUrl||"",targetDuration:s.duration,timelineStarts:s.timelineStarts,discontinuityStarts:_,discontinuitySequence:x,mediaSequence:u,segments:o}},"formatVttPlaylist"),Gw=/* @__PURE__ */__name(function organizeAudioPlaylists2(i,a,s){var o;void 0===a&&(a={}),void 0===s&&(s=!1);var u=i.reduce(function(i,u){var _=u.attributes.role&&u.attributes.role.value||"",x=u.attributes.lang||"",w=u.attributes.label||"main";if(x&&!u.attributes.label){var C=_?" ("+_+")":"";w=""+u.attributes.lang+C}i[w]||(i[w]={language:x,autoselect:!0,default:"main"===_,playlists:[],uri:""});var L=Vw(Hw(u,s),a);return i[w].playlists.push(L),void 0===o&&"main"===_&&((o=u).default=!0),i},{});o||(u[Object.keys(u)[0]].default=!0);return u},"organizeAudioPlaylists"),Ww=/* @__PURE__ */__name(function organizeVttPlaylists2(i,a){return void 0===a&&(a={}),i.reduce(function(i,s){var o=s.attributes.lang||"text";return i[o]||(i[o]={language:o,default:!1,autoselect:!1,playlists:[],uri:""}),i[o].playlists.push(Vw($w(s),a)),i},{})},"organizeVttPlaylists"),qw=/* @__PURE__ */__name(function organizeCaptionServices2(i){return i.reduce(function(i,a){return a?(a.forEach(function(a){var s=a.channel,o=a.language;i[o]={autoselect:!1,default:!1,instreamId:s,language:o},a.hasOwnProperty("aspectRatio")&&(i[o].aspectRatio=a.aspectRatio),a.hasOwnProperty("easyReader")&&(i[o].easyReader=a.easyReader),a.hasOwnProperty("3D")&&(i[o]["3D"]=a["3D"])}),i):i},{})},"organizeCaptionServices"),Xw=/* @__PURE__ */__name(function formatVideoPlaylist2(i){var a,s=i.attributes,o=i.segments,u=i.sidx,_=i.discontinuityStarts,x={attributes:(a={NAME:s.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:s.width,height:s.height},CODECS:s.codecs,BANDWIDTH:s.bandwidth},a["PROGRAM-ID"]=1,a),uri:"",endList:"static"===s.type,timeline:s.periodStart,resolvedUri:"",targetDuration:s.duration,discontinuityStarts:_,timelineStarts:s.timelineStarts,segments:o};return s.frameRate&&(x.attributes["FRAME-RATE"]=s.frameRate),s.contentProtection&&(x.contentProtection=s.contentProtection),u&&(x.sidx=u),x},"formatVideoPlaylist"),Qw=/* @__PURE__ */__name(function videoOnly2(i){var a=i.attributes;return"video/mp4"===a.mimeType||"video/webm"===a.mimeType||"video"===a.contentType},"videoOnly"),Kw=/* @__PURE__ */__name(function audioOnly2(i){var a=i.attributes;return"audio/mp4"===a.mimeType||"audio/webm"===a.mimeType||"audio"===a.contentType},"audioOnly"),Yw=/* @__PURE__ */__name(function vttOnly2(i){var a=i.attributes;return"text/vtt"===a.mimeType||"text"===a.contentType},"vttOnly"),Jw=/* @__PURE__ */__name(function addMediaSequenceValues2(i,a){i.forEach(function(i){i.mediaSequence=0,i.discontinuitySequence=fw(a,function(a){return a.timeline===i.timeline}),i.segments&&i.segments.forEach(function(i,a){i.number=a})})},"addMediaSequenceValues"),Zw=/* @__PURE__ */__name(function flattenMediaGroupPlaylists2(i){return i?Object.keys(i).reduce(function(a,s){var o=i[s];return a.concat(o.playlists)},[]):[]},"flattenMediaGroupPlaylists"),eA=/* @__PURE__ */__name(function toM3u82(i){var a,s=i.dashPlaylists,o=i.locations,u=i.sidxMapping,_=void 0===u?{}:u,x=i.previousManifest;if(!s.length)return{};var w=s[0].attributes,C=w.sourceDuration,L=w.type,B=w.suggestedPresentationDelay,U=w.minimumUpdatePeriod,j=jw(s.filter(Qw)).map(Xw),V=jw(s.filter(Kw)),z=jw(s.filter(Yw)),$=s.map(function(i){return i.attributes.captionServices}).filter(Boolean),Y={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(a={AUDIO:{},VIDEO:{}},a["CLOSED-CAPTIONS"]={},a.SUBTITLES={},a),uri:"",duration:C,playlists:zw(j,_)};U>=0&&(Y.minimumUpdatePeriod=1e3*U),o&&(Y.locations=o),"dynamic"===L&&(Y.suggestedPresentationDelay=B);var Z=0===Y.playlists.length,ee=V.length?Gw(V,_,Z):null,ie=z.length?Ww(z,_):null,ae=j.concat(Zw(ee),Zw(ie)),le=ae.map(function(i){return i.timelineStarts});return Y.timelineStarts=Dw(le),Jw(ae,Y.timelineStarts),ee&&(Y.mediaGroups.AUDIO.audio=ee),ie&&(Y.mediaGroups.SUBTITLES.subs=ie),$.length&&(Y.mediaGroups["CLOSED-CAPTIONS"].cc=qw($)),x?Fw({oldManifest:x,newManifest:Y}):Y},"toM3u8"),tA=/* @__PURE__ */__name(function getLiveRValue2(i,a,s){var o=i.NOW,u=i.clientOffset,_=i.availabilityStartTime,x=i.timescale,w=void 0===x?1:x,C=i.periodStart,L=void 0===C?0:C,B=i.minimumUpdatePeriod,U=(o+u)/1e3+(void 0===B?0:B)-(_+L);return Math.ceil((U*w-a)/s)},"getLiveRValue"),nA=/* @__PURE__ */__name(function parseByTimeline2(i,a){for(var s=i.type,o=i.minimumUpdatePeriod,u=void 0===o?0:o,_=i.media,x=void 0===_?"":_,w=i.sourceDuration,C=i.timescale,L=void 0===C?1:C,B=i.startNumber,U=void 0===B?1:B,j=i.periodStart,V=[],z=-1,$=0;$<a.length;$++){var Y=a[$],Z=Y.d,ee=Y.r||0,ie=Y.t||0;z<0&&(z=ie),ie&&ie>z&&(z=ie);var ae=void 0;if(ee<0){var le=$+1;ae=le===a.length?"dynamic"===s&&u>0&&x.indexOf("$Number$")>0?tA(i,z,Z):(w*L-z)/Z:(a[le].t-z)/Z}else ae=ee+1;for(var ce=U+V.length+ae,de=U+V.length;de<ce;)V.push({number:de,duration:Z/L,time:z,timeline:j}),z+=Z,de++}return V},"parseByTimeline"),iA=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,rA=/* @__PURE__ */__name(function identifierReplacement2(i){return function(a,s,o,u){if("$$"===a)return"$";if(void 0===i[s])return a;var _=""+i[s];return"RepresentationID"===s?_:(u=o?parseInt(u,10):1,_.length>=u?_:""+new Array(u-_.length+1).join("0")+_)}},"identifierReplacement"),aA=/* @__PURE__ */__name(function constructTemplateUrl2(i,a){return i.replace(iA,rA(a))},"constructTemplateUrl"),sA=/* @__PURE__ */__name(function parseTemplateInfo2(i,a){return i.duration||a?i.duration?Mw(i):nA(i,a):[{number:i.startNumber||1,duration:i.sourceDuration,time:0,timeline:i.periodStart}]},"parseTemplateInfo"),oA=/* @__PURE__ */__name(function segmentsFromTemplate2(i,a){var s={RepresentationID:i.id,Bandwidth:i.bandwidth||0},o=i.initialization,u=void 0===o?{sourceURL:"",range:""}:o,_=xw({baseUrl:i.baseUrl,source:aA(u.sourceURL,s),range:u.range});return sA(i,a).map(function(a){s.Number=a.number,s.Time=a.time;var o=aA(i.media||"",s),u=i.timescale||1,x=i.presentationTimeOffset||0,w=i.periodStart+(a.time-x)/u;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:_x(i.baseUrl||"",o),map:_,number:a.number,presentationTime:w}})},"segmentsFromTemplate"),lA=/* @__PURE__ */__name(function SegmentURLToSegmentObject2(i,a){var s=i.baseUrl,o=i.initialization,u=void 0===o?{}:o,_=xw({baseUrl:s,source:u.sourceURL,range:u.range}),x=xw({baseUrl:s,source:a.media,range:a.mediaRange});return x.map=_,x},"SegmentURLToSegmentObject"),cA=/* @__PURE__ */__name(function segmentsFromList2(i,a){var s=i.duration,o=i.segmentUrls,u=void 0===o?[]:o,_=i.periodStart;if(!s&&!a||s&&a)throw new Error(Tw);var x,w=u.map(function(a){return lA(i,a)});return s&&(x=Mw(i)),a&&(x=nA(i,a)),x.map(function(a,s){if(w[s]){var o=w[s],u=i.timescale||1,x=i.presentationTimeOffset||0;return o.timeline=a.timeline,o.duration=a.duration,o.number=a.number,o.presentationTime=_+(a.time-x)/u,o}}).filter(function(i){return i})},"segmentsFromList"),uA=/* @__PURE__ */__name(function generateSegments2(i){var a,s,o=i.attributes,u=i.segmentInfo;u.template?(s=oA,a=cw(o,u.template)):u.base?(s=kw,a=cw(o,u.base)):u.list&&(s=cA,a=cw(o,u.list));var _={attributes:o};if(!s)return _;var x=s(a,u.segmentTimeline);if(a.duration){var w=a,C=w.duration,L=w.timescale,B=void 0===L?1:L;a.duration=C/B}else x.length?a.duration=x.reduce(function(i,a){return Math.max(i,Math.ceil(a.duration))},0):a.duration=0;return _.attributes=a,_.segments=x,u.base&&a.indexRange&&(_.sidx=x[0],_.segments=[]),_},"generateSegments"),dA=/* @__PURE__ */__name(function toPlaylists2(i){return i.map(uA)},"toPlaylists"),hA=/* @__PURE__ */__name(function findChildren2(i,a){return pw(i.childNodes).filter(function(i){return i.tagName===a})},"findChildren"),pA=/* @__PURE__ */__name(function getContent2(i){return i.textContent.trim()},"getContent"),mA=/* @__PURE__ */__name(function parseDivisionValue2(i){return parseFloat(i.split("/").reduce(function(i,a){return i/a}))},"parseDivisionValue"),fA=/* @__PURE__ */__name(function parseDuration2(i){var a=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(i);if(!a)return 0;var s=a.slice(1),o=s[0],u=s[1],_=s[2],x=s[3],w=s[4],C=s[5];return 31536e3*parseFloat(o||0)+2592e3*parseFloat(u||0)+86400*parseFloat(_||0)+3600*parseFloat(x||0)+60*parseFloat(w||0)+parseFloat(C||0)},"parseDuration"),gA=/* @__PURE__ */__name(function parseDate2(i){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(i)&&(i+="Z"),Date.parse(i)},"parseDate"),_A={mediaPresentationDuration:/* @__PURE__ */__name(function mediaPresentationDuration(i){return fA(i)},"mediaPresentationDuration"),availabilityStartTime:/* @__PURE__ */__name(function availabilityStartTime(i){return gA(i)/1e3},"availabilityStartTime"),minimumUpdatePeriod:/* @__PURE__ */__name(function minimumUpdatePeriod(i){return fA(i)},"minimumUpdatePeriod"),suggestedPresentationDelay:/* @__PURE__ */__name(function suggestedPresentationDelay(i){return fA(i)},"suggestedPresentationDelay"),type:/* @__PURE__ */__name(function type(i){return i},"type"),timeShiftBufferDepth:/* @__PURE__ */__name(function timeShiftBufferDepth(i){return fA(i)},"timeShiftBufferDepth"),start:/* @__PURE__ */__name(function start(i){return fA(i)},"start"),width:/* @__PURE__ */__name(function width(i){return parseInt(i,10)},"width"),height:/* @__PURE__ */__name(function height(i){return parseInt(i,10)},"height"),bandwidth:/* @__PURE__ */__name(function bandwidth(i){return parseInt(i,10)},"bandwidth"),frameRate:/* @__PURE__ */__name(function frameRate(i){return mA(i)},"frameRate"),startNumber:/* @__PURE__ */__name(function startNumber(i){return parseInt(i,10)},"startNumber"),timescale:/* @__PURE__ */__name(function timescale(i){return parseInt(i,10)},"timescale"),presentationTimeOffset:/* @__PURE__ */__name(function presentationTimeOffset(i){return parseInt(i,10)},"presentationTimeOffset"),duration:/* @__PURE__ */__name(function duration2(i){var a=parseInt(i,10);return isNaN(a)?fA(i):a},"duration"),d:/* @__PURE__ */__name(function d(i){return parseInt(i,10)},"d"),t:/* @__PURE__ */__name(function t(i){return parseInt(i,10)},"t"),r:/* @__PURE__ */__name(function r(i){return parseInt(i,10)},"r"),DEFAULT:/* @__PURE__ */__name(function DEFAULT(i){return i},"DEFAULT")},yA=/* @__PURE__ */__name(function parseAttributes2(i){return i&&i.attributes?pw(i.attributes).reduce(function(i,a){var s=_A[a.name]||_A.DEFAULT;return i[a.name]=s(a.value),i},{}):{}},"parseAttributes"),vA={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},bA=/* @__PURE__ */__name(function buildBaseUrls2(i,a){return a.length?hw(i.map(function(i){return a.map(function(a){return _x(i,pA(a))})})):i},"buildBaseUrls"),TA=/* @__PURE__ */__name(function getSegmentInformation2(i){var a=hA(i,"SegmentTemplate")[0],s=hA(i,"SegmentList")[0],o=s&&hA(s,"SegmentURL").map(function(i){return cw({tag:"SegmentURL"},yA(i))}),u=hA(i,"SegmentBase")[0],_=s||a,x=_&&hA(_,"SegmentTimeline")[0],w=s||u||a,C=w&&hA(w,"Initialization")[0],L=a&&yA(a);L&&C?L.initialization=C&&yA(C):L&&L.initialization&&(L.initialization={sourceURL:L.initialization});var B={template:L,segmentTimeline:x&&hA(x,"S").map(function(i){return yA(i)}),list:s&&cw(yA(s),{segmentUrls:o,initialization:yA(C)}),base:u&&cw(yA(u),{initialization:yA(C)})};return Object.keys(B).forEach(function(i){B[i]||delete B[i]}),B},"getSegmentInformation"),SA=/* @__PURE__ */__name(function inheritBaseUrls2(i,a,s){return function(o){var u=hA(o,"BaseURL"),_=bA(a,u),x=cw(i,yA(o)),w=TA(o);return _.map(function(i){return{segmentInfo:cw(s,w),attributes:cw(x,{baseUrl:i})}})}},"inheritBaseUrls"),xA=/* @__PURE__ */__name(function generateKeySystemInformation2(i){return i.reduce(function(i,a){var s=yA(a);s.schemeIdUri&&(s.schemeIdUri=s.schemeIdUri.toLowerCase());var o=vA[s.schemeIdUri];if(o){i[o]={attributes:s};var u=hA(a,"cenc:pssh")[0];if(u){var _=pA(u);i[o].pssh=_&&decodeB64ToUint8Array(_)}}return i},{})},"generateKeySystemInformation"),wA=/* @__PURE__ */__name(function parseCaptionServiceMetadata2(i){return"urn:scte:dash:cc:cea-608:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map(function(i){var a,s;if(s=i,/^CC\d=/.test(i)){var o=i.split("=");a=o[0],s=o[1]}else/^CC\d$/.test(i)&&(a=i);return{channel:a,language:s}}):"urn:scte:dash:cc:cea-708:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map(function(i){var a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(i)){var s=i.split("="),o=s[0],u=s[1],_=void 0===u?"":u;a.channel=o,a.language=i,_.split(",").forEach(function(i){var s=i.split(":"),o=s[0],u=s[1];"lang"===o?a.language=u:"er"===o?a.easyReader=Number(u):"war"===o?a.aspectRatio=Number(u):"3D"===o&&(a["3D"]=Number(u))})}else a.language=i;return a.channel&&(a.channel="SERVICE"+a.channel),a}):void 0},"parseCaptionServiceMetadata"),AA=/* @__PURE__ */__name(function toRepresentations2(i,a,s){return function(o){var u=yA(o),_=bA(a,hA(o,"BaseURL")),x=hA(o,"Role")[0],w={role:yA(x)},C=cw(i,u,w),L=hA(o,"Accessibility")[0],B=wA(yA(L));B&&(C=cw(C,{captionServices:B}));var U=hA(o,"Label")[0];if(U&&U.childNodes.length){var j=U.childNodes[0].nodeValue.trim();C=cw(C,{label:j})}var V=xA(hA(o,"ContentProtection"));Object.keys(V).length&&(C=cw(C,{contentProtection:V}));var z=TA(o),$=hA(o,"Representation"),Y=cw(s,z);return hw($.map(SA(C,_,Y)))}},"toRepresentations"),CA=/* @__PURE__ */__name(function toAdaptationSets2(i,a){return function(s,o){var u=bA(a,hA(s.node,"BaseURL")),_=cw(i,{periodStart:s.attributes.start});"number"==typeof s.attributes.duration&&(_.periodDuration=s.attributes.duration);var x=hA(s.node,"AdaptationSet"),w=TA(s.node);return hw(x.map(AA(_,u,w)))}},"toAdaptationSets"),EA=/* @__PURE__ */__name(function getPeriodStart2(i){var a=i.attributes,s=i.priorPeriodAttributes,o=i.mpdType;return"number"==typeof a.start?a.start:s&&"number"==typeof s.start&&"number"==typeof s.duration?s.start+s.duration:s||"static"!==o?null:0},"getPeriodStart"),MA=/* @__PURE__ */__name(function inheritAttributes2(i,a){void 0===a&&(a={});var s=a,o=s.manifestUri,u=void 0===o?"":o,_=s.NOW,x=void 0===_?Date.now():_,w=s.clientOffset,C=void 0===w?0:w,L=hA(i,"Period");if(!L.length)throw new Error(_w);var B=hA(i,"Location"),U=yA(i),j=bA([u],hA(i,"BaseURL"));U.type=U.type||"static",U.sourceDuration=U.mediaPresentationDuration||0,U.NOW=x,U.clientOffset=C,B.length&&(U.locations=B.map(pA));var V=[];return L.forEach(function(i,a){var s=yA(i),o=V[a-1];s.start=EA({attributes:s,priorPeriodAttributes:o?o.attributes:null,mpdType:U.type}),V.push({node:i,attributes:s})}),{locations:U.locations,representationInfo:hw(V.map(CA(U,j)))}},"inheritAttributes"),kA=/* @__PURE__ */__name(function stringToMpdXml2(i){if(""===i)throw new Error(yw);var a,s,o=new $r.DOMParser;try{s=(a=o.parseFromString(i,"application/xml"))&&"MPD"===a.documentElement.tagName?a.documentElement:null}catch(u){}if(!s||s&&s.getElementsByTagName("parsererror").length>0)throw new Error(vw);return s},"stringToMpdXml"),PA=/* @__PURE__ */__name(function parseUTCTimingScheme2(i){var a=hA(i,"UTCTiming")[0];if(!a)return null;var s=yA(a);switch(s.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":s.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":s.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":s.method="DIRECT",s.value=Date.parse(s.value);break;default:throw new Error(Sw)}return s},"parseUTCTimingScheme"),IA=/* @__PURE__ */__name(function parse2(i,a){void 0===a&&(a={});var s=MA(kA(i),a),o=dA(s.representationInfo);return eA({dashPlaylists:o,locations:s.locations,sidxMapping:a.sidxMapping,previousManifest:a.previousManifest})},"parse"),LA=/* @__PURE__ */__name(function parseUTCTiming2(i){return PA(kA(i))},"parseUTCTiming");function requireNumbers(){if(Zx)return Jx;Zx=1;var i=Math.pow(2,32);return Jx={getUint64:/* @__PURE__ */__name(function(a){var s,o=new DataView(a.buffer,a.byteOffset,a.byteLength);return o.getBigUint64?(s=o.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(s):s:o.getUint32(0)*i+o.getUint32(4)},"getUint64"),MAX_UINT32:i}}function requireParseSidx(){if(tw)return ew;tw=1;var i=requireNumbers().getUint64;return ew=/* @__PURE__ */__name(function(a){var s=new DataView(a.buffer,a.byteOffset,a.byteLength),o={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:s.getUint32(4),timescale:s.getUint32(8)},u=12;0===o.version?(o.earliestPresentationTime=s.getUint32(u),o.firstOffset=s.getUint32(u+4),u+=8):(o.earliestPresentationTime=i(a.subarray(u)),o.firstOffset=i(a.subarray(u+8)),u+=16),u+=2;var _=s.getUint16(u);for(u+=2;_>0;u+=12,_--)o.references.push({referenceType:(128&a[u])>>>7,referencedSize:2147483647&s.getUint32(u),subsegmentDuration:s.getUint32(u+4),startsWithSap:!!(128&a[u+8]),sapType:(112&a[u+8])>>>4,sapDeltaTime:268435455&s.getUint32(u+8)});return o},"parseSidx")}__name(requireNumbers,"requireNumbers"),__name(requireParseSidx,"requireParseSidx");const DA=/* @__PURE__ */getDefaultExportFromCjs(requireParseSidx());var RA=Qx([73,68,51]),OA=/* @__PURE__ */__name(function getId3Size2(i,a){void 0===a&&(a=0);var s=(i=Qx(i))[a+5],o=i[a+6]<<21|i[a+7]<<14|i[a+8]<<7|i[a+9];return(16&s)>>4?o+20:o+10},"getId3Size"),NA=/* @__PURE__ */__name(function getId3Offset2(i,a){return void 0===a&&(a=0),(i=Qx(i)).length-a<10||!sw(i,RA,{offset:a})?a:getId3Offset2(i,a+=OA(i,a))},"getId3Offset"),BA=/* @__PURE__ */__name(function normalizePath2(i){return"string"==typeof i?rw(i):i},"normalizePath"),FA=/* @__PURE__ */__name(function normalizePaths2(i){return Array.isArray(i)?i.map(function(i){return BA(i)}):[BA(i)]},"normalizePaths"),UA=/* @__PURE__ */__name(function findBox2(i,a,s){void 0===s&&(s=!1),a=FA(a),i=Qx(i);var o=[];if(!a.length)return o;for(var u=0;u<i.length;){var _=(i[u]<<24|i[u+1]<<16|i[u+2]<<8|i[u+3])>>>0,x=i.subarray(u+4,u+8);if(0===_)break;var w=u+_;if(w>i.length){if(s)break;w=i.length}var C=i.subarray(u+8,w);sw(x,a[0])&&(1===a.length?o.push(C):o.push.apply(o,findBox2(C,a.slice(1),s))),u=w}return o},"findBox"),jA={EBML:Qx([26,69,223,163]),DocType:Qx([66,130]),Segment:Qx([24,83,128,103]),SegmentInfo:Qx([21,73,169,102]),Tracks:Qx([22,84,174,107]),Track:Qx([174]),TrackNumber:Qx([215]),DefaultDuration:Qx([35,227,131]),TrackEntry:Qx([174]),TrackType:Qx([131]),FlagDefault:Qx([136]),CodecID:Qx([134]),CodecPrivate:Qx([99,162]),VideoTrack:Qx([224]),AudioTrack:Qx([225]),Cluster:Qx([31,67,182,117]),Timestamp:Qx([231]),TimestampScale:Qx([42,215,177]),BlockGroup:Qx([160]),BlockDuration:Qx([155]),Block:Qx([161]),SimpleBlock:Qx([163])},VA=[128,64,32,16,8,4,2,1],zA=/* @__PURE__ */__name(function getLength2(i){for(var a=1,s=0;s<VA.length&&!(i&VA[s]);s++)a++;return a},"getLength"),HA=/* @__PURE__ */__name(function getvint2(i,a,s,o){void 0===s&&(s=!0),void 0===o&&(o=!1);var u=zA(i[a]),_=i.subarray(a,a+u);return s&&((_=Array.prototype.slice.call(i,a,a+u))[0]^=VA[u-1]),{length:u,value:nw(_,{signed:o}),bytes:_}},"getvint"),$A=/* @__PURE__ */__name(function normalizePath2(i){return"string"==typeof i?i.match(/.{1,2}/g).map(function(i){return normalizePath2(i)}):"number"==typeof i?iw(i):i},"normalizePath"),GA=/* @__PURE__ */__name(function normalizePaths2(i){return Array.isArray(i)?i.map(function(i){return $A(i)}):[$A(i)]},"normalizePaths"),WA=/* @__PURE__ */__name(function getInfinityDataSize2(i,a,s){if(s>=a.length)return a.length;var o=HA(a,s,!1);if(sw(i.bytes,o.bytes))return s;var u=HA(a,s+o.length);return getInfinityDataSize2(i,a,s+u.length+u.value+o.length)},"getInfinityDataSize"),qA=/* @__PURE__ */__name(function findEbml2(i,a){a=GA(a),i=Qx(i);var s=[];if(!a.length)return s;for(var o=0;o<i.length;){var u=HA(i,o,!1),_=HA(i,o+u.length),x=o+u.length+_.length;127===_.value&&(_.value=WA(u,i,x),_.value!==i.length&&(_.value-=x));var w=x+_.value>i.length?i.length:x+_.value,C=i.subarray(x,w);sw(a[0],u.bytes)&&(1===a.length?s.push(C):s=s.concat(findEbml2(C,a.slice(1)))),o+=u.length+_.length+C.length}return s},"findEbml"),XA=Qx([0,0,0,1]),QA=Qx([0,0,1]),KA=Qx([0,0,3]),YA=/* @__PURE__ */__name(function discardEmulationPreventionBytes2(i){for(var a=[],s=1;s<i.length-2;)sw(i.subarray(s,s+3),KA)&&(a.push(s+2),s++),s++;if(0===a.length)return i;var o=i.length-a.length,u=new Uint8Array(o),_=0;for(s=0;s<o;_++,s++)_===a[0]&&(_++,a.shift()),u[s]=i[_];return u},"discardEmulationPreventionBytes"),JA=/* @__PURE__ */__name(function findNal2(i,a,s,o){i=Qx(i),s=[].concat(s);for(var u,_=0,x=0;_<i.length&&(x<o||u);){var w=void 0;if(sw(i.subarray(_),XA)?w=4:sw(i.subarray(_),QA)&&(w=3),w){if(x++,u)return YA(i.subarray(u,_));var C=void 0;"h264"===a?C=31&i[_+w]:"h265"===a&&(C=i[_+w]>>1&63),-1!==s.indexOf(C)&&(u=_+w),_+=w+("h264"===a?1:2)}else _++}return i.subarray(0,0)},"findNal"),ZA=/* @__PURE__ */__name(function findH264Nal2(i,a,s){return JA(i,"h264",a,s)},"findH264Nal"),eC=/* @__PURE__ */__name(function findH265Nal2(i,a,s){return JA(i,"h265",a,s)},"findH265Nal"),tC={webm:Qx([119,101,98,109]),matroska:Qx([109,97,116,114,111,115,107,97]),flac:Qx([102,76,97,67]),ogg:Qx([79,103,103,83]),ac3:Qx([11,119]),riff:Qx([82,73,70,70]),avi:Qx([65,86,73]),wav:Qx([87,65,86,69]),"3gp":Qx([102,116,121,112,51,103]),mp4:Qx([102,116,121,112]),fmp4:Qx([115,116,121,112]),mov:Qx([102,116,121,112,113,116]),moov:Qx([109,111,111,118]),moof:Qx([109,111,111,102])},nC={aac:/* @__PURE__ */__name(function aac(i){var a=NA(i);return sw(i,[255,16],{offset:a,mask:[255,22]})},"aac"),mp3:/* @__PURE__ */__name(function mp3(i){var a=NA(i);return sw(i,[255,2],{offset:a,mask:[255,6]})},"mp3"),webm:/* @__PURE__ */__name(function webm(i){var a=qA(i,[jA.EBML,jA.DocType])[0];return sw(a,tC.webm)},"webm"),mkv:/* @__PURE__ */__name(function mkv(i){var a=qA(i,[jA.EBML,jA.DocType])[0];return sw(a,tC.matroska)},"mkv"),mp4:/* @__PURE__ */__name(function mp4(i){return!nC["3gp"](i)&&!nC.mov(i)&&(!(!sw(i,tC.mp4,{offset:4})&&!sw(i,tC.fmp4,{offset:4}))||(!(!sw(i,tC.moof,{offset:4})&&!sw(i,tC.moov,{offset:4}))||void 0))},"mp4"),mov:/* @__PURE__ */__name(function mov(i){return sw(i,tC.mov,{offset:4})},"mov"),"3gp":/* @__PURE__ */__name(function gp(i){return sw(i,tC["3gp"],{offset:4})},"gp"),ac3:/* @__PURE__ */__name(function ac3(i){var a=NA(i);return sw(i,tC.ac3,{offset:a})},"ac3"),ts:/* @__PURE__ */__name(function ts(i){if(i.length<189&&i.length>=1)return 71===i[0];for(var a=0;a+188<i.length&&a<188;){if(71===i[a]&&71===i[a+188])return!0;a+=1}return!1},"ts"),flac:/* @__PURE__ */__name(function flac(i){var a=NA(i);return sw(i,tC.flac,{offset:a})},"flac"),ogg:/* @__PURE__ */__name(function ogg(i){return sw(i,tC.ogg)},"ogg"),avi:/* @__PURE__ */__name(function avi(i){return sw(i,tC.riff)&&sw(i,tC.avi,{offset:8})},"avi"),wav:/* @__PURE__ */__name(function wav(i){return sw(i,tC.riff)&&sw(i,tC.wav,{offset:8})},"wav"),h264:/* @__PURE__ */__name(function h264(i){return ZA(i,7,3).length},"h264"),h265:/* @__PURE__ */__name(function h265(i){return eC(i,[32,33],3).length},"h265")},iC=Object.keys(nC).filter(function(i){return"ts"!==i&&"h264"!==i&&"h265"!==i}).concat(["ts","h264","h265"]);iC.forEach(function(i){var a=nC[i];nC[i]=function(i){return a(Qx(i))}});var rC,aC,sC=nC,oC=/* @__PURE__ */__name(function detectContainerForBytes2(i){i=Qx(i);for(var a=0;a<iC.length;a++){var s=iC[a];if(sC[s](i))return s}return""},"detectContainerForBytes"),lC=/* @__PURE__ */__name(function isLikelyFmp4MediaSegment2(i){return UA(i,["moof"]).length>0},"isLikelyFmp4MediaSegment");function requireClock(){if(aC)return rC;aC=1;var i,a,s,o,u,_,x,w=9e4;return i=/* @__PURE__ */__name(function(i){return i*w},"secondsToVideoTs"),a=/* @__PURE__ */__name(function(i,a){return i*a},"secondsToAudioTs"),s=/* @__PURE__ */__name(function(i){return i/w},"videoTsToSeconds"),o=/* @__PURE__ */__name(function(i,a){return i/a},"audioTsToSeconds"),u=/* @__PURE__ */__name(function(a,s){return i(o(a,s))},"audioTsToVideoTs"),_=/* @__PURE__ */__name(function(i,o){return a(s(i),o)},"videoTsToAudioTs"),x=/* @__PURE__ */__name(function(i,a,o){return s(o?i:i-a)},"metadataTsToSeconds"),rC={ONE_SECOND_IN_TS:w,secondsToVideoTs:i,secondsToAudioTs:a,videoTsToSeconds:s,audioTsToSeconds:o,audioTsToVideoTs:u,videoTsToAudioTs:_,metadataTsToSeconds:x}}__name(requireClock,"requireClock");var cC=requireClock();function _getPrototypeOf(i){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)})(i)}function _isNativeFunction(i){try{return-1!==Function.toString.call(i).indexOf("[native code]")}catch(a){return"function"==typeof i}}function _wrapNativeSuper(i){var a="function"==typeof Map?/* @__PURE__ */new Map:void 0;return _wrapNativeSuper=/* @__PURE__ */__name(function _wrapNativeSuper2(i){if(null===i||!_isNativeFunction(i))return i;if("function"!=typeof i)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(i))return a.get(i);a.set(i,Wrapper)}function Wrapper(){return _construct(i,arguments,_getPrototypeOf(this).constructor)}return __name(Wrapper,"Wrapper"),Wrapper.prototype=Object.create(i.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,i)},"_wrapNativeSuper"),_wrapNativeSuper(i)}__name(_getPrototypeOf,"_getPrototypeOf"),__name(_isNativeFunction,"_isNativeFunction"),__name(_wrapNativeSuper,"_wrapNativeSuper");for(var uC,dC="7.21.7",hC={},pC=/* @__PURE__ */__name(function hooks2(i,a){return hC[i]=hC[i]||[],a&&(hC[i]=hC[i].concat(a)),hC[i]},"hooks"),mC=/* @__PURE__ */__name(function hook2(i,a){pC(i,a)},"hook"),fC=/* @__PURE__ */__name(function removeHook2(i,a){var s=pC(i).indexOf(a);return!(s<=-1)&&(hC[i]=hC[i].slice(),hC[i].splice(s,1),!0)},"removeHook"),gC=/* @__PURE__ */__name(function hookOnce2(i,a){pC(i,[].concat(a).map(function(a){var s=/* @__PURE__ */__name(function wrapper2(){return fC(i,wrapper2),a.apply(void 0,arguments)},"wrapper");return s}))},"hookOnce"),_C={prefixed:!0},yC=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],vC=yC[0],bC=0;bC<yC.length;bC++)if(yC[bC][1]in An){uC=yC[bC];break}if(uC){for(var TC=0;TC<uC.length;TC++)_C[vC[TC]]=uC[TC];_C.prefixed=uC[0]!==vC[0]}var SC=[],xC=/* @__PURE__ */__name(function LogByTypeFactory2(i,a){return function(s,o,u){var _=a.levels[o],x=new RegExp("^("+_+")$");if("log"!==s&&u.unshift(s.toUpperCase()+":"),u.unshift(i+":"),SC){SC.push([].concat(u));var w=SC.length-1e3;SC.splice(0,w>0?w:0)}if(Tn.console){var C=Tn.console[s];C||"debug"!==s||(C=Tn.console.info||Tn.console.log),C&&_&&x.test(s)&&C[Array.isArray(u)?"apply":"call"](Tn.console,u)}}},"LogByTypeFactory");function createLogger$1(i){var a,s="info",o=/* @__PURE__ */__name(function log3(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];a("log",s,o)},"log");return a=xC(i,o),o.createLogger=function(a){return createLogger$1(i+": "+a)},o.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:s},o.level=function(i){if("string"==typeof i){if(!o.levels.hasOwnProperty(i))throw new Error('"'+i+'" in not a valid log level');s=i}return s},o.history=function(){return SC?[].concat(SC):[]},o.history.filter=function(i){return(SC||[]).filter(function(a){return new RegExp(".*"+i+".*").test(a[0])})},o.history.clear=function(){SC&&(SC.length=0)},o.history.disable=function(){null!==SC&&(SC.length=0,SC=null)},o.history.enable=function(){null===SC&&(SC=[])},o.error=function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return a("error",s,o)},o.warn=function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return a("warn",s,o)},o.debug=function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return a("debug",s,o)},o}__name(createLogger$1,"createLogger$1");var wC=createLogger$1("VIDEOJS"),AC=wC.createLogger,CC=Object.prototype.toString,EC=/* @__PURE__ */__name(function keys2(i){return isObject(i)?Object.keys(i):[]},"keys");function each(i,a){EC(i).forEach(function(s){return a(i[s],s)})}function reduce(i,a,s){return void 0===s&&(s=0),EC(i).reduce(function(s,o){return a(s,i[o],o)},s)}function assign(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return Object.assign?_extends.apply(void 0,[i].concat(s)):(s.forEach(function(a){a&&each(a,function(a,s){i[s]=a})}),i)}function isObject(i){return!!i&&"object"==typeof i}function isPlain(i){return isObject(i)&&"[object Object]"===CC.call(i)&&i.constructor===Object}function computedStyle(i,a){if(!i||!a)return"";if("function"==typeof Tn.getComputedStyle){var s;try{s=Tn.getComputedStyle(i)}catch(o){return""}return s?s.getPropertyValue(a)||s[a]:""}return""}__name(each,"each"),__name(reduce,"reduce"),__name(assign,"assign"),__name(isObject,"isObject"),__name(isPlain,"isPlain"),__name(computedStyle,"computedStyle");var MC,kC,PC,IC=Tn.navigator&&Tn.navigator.userAgent||"",LC=/AppleWebKit\/([\d.]+)/i.exec(IC),DC=LC?parseFloat(LC.pop()):null,RC=/iPod/i.test(IC),OC=(MC=IC.match(/OS (\d+)_/i))&&MC[1]?MC[1]:null,NC=/Android/i.test(IC),BC=function(){var i=IC.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!i)return null;var a=i[1]&&parseFloat(i[1]),s=i[2]&&parseFloat(i[2]);return a&&s?parseFloat(i[1]+"."+i[2]):a||null}(),FC=NC&&BC<5&&DC<537,UC=/Firefox/i.test(IC),jC=/Edg/i.test(IC),VC=!jC&&(/Chrome/i.test(IC)||/CriOS/i.test(IC)),zC=function(){var i=IC.match(/(Chrome|CriOS)\/(\d+)/);return i&&i[2]?parseFloat(i[2]):null}(),HC=(kC=/MSIE\s(\d+)\.\d/.exec(IC),!(PC=kC&&parseFloat(kC[1]))&&/Trident\/7.0/i.test(IC)&&/rv:11.0/.test(IC)&&(PC=11),PC),$C=/Safari/i.test(IC)&&!VC&&!NC&&!jC,GC=/Windows/i.test(IC),WC=Boolean(isReal()&&("ontouchstart"in Tn||Tn.navigator.maxTouchPoints||Tn.DocumentTouch&&Tn.document instanceof Tn.DocumentTouch)),qC=/iPad/i.test(IC)||$C&&WC&&!/iPhone/i.test(IC),XC=/iPhone/i.test(IC)&&!qC,QC=XC||qC||RC,KC=($C||QC)&&!VC,YC=/* @__PURE__ */Object.freeze({__proto__:null,IS_IPOD:RC,IOS_VERSION:OC,IS_ANDROID:NC,ANDROID_VERSION:BC,IS_NATIVE_ANDROID:FC,IS_FIREFOX:UC,IS_EDGE:jC,IS_CHROME:VC,CHROME_VERSION:zC,IE_VERSION:HC,IS_SAFARI:$C,IS_WINDOWS:GC,TOUCH_ENABLED:WC,IS_IPAD:qC,IS_IPHONE:XC,IS_IOS:QC,IS_ANY_SAFARI:KC});function isNonBlankString(i){return"string"==typeof i&&Boolean(i.trim())}function throwIfWhitespace(i){if(i.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function classRegExp(i){return new RegExp("(^|\\s)"+i+"($|\\s)")}function isReal(){return An===Tn.document}function isEl(i){return isObject(i)&&1===i.nodeType}function isInFrame(){try{return Tn.parent!==Tn.self}catch(i){return!0}}function createQuerier(i){return function(a,s){if(!isNonBlankString(a))return An[i](null);isNonBlankString(s)&&(s=An.querySelector(s));var o=isEl(s)?s:An;return o[i]&&o[i](a)}}function createEl(i,a,s,o){void 0===i&&(i="div"),void 0===a&&(a={}),void 0===s&&(s={});var u=An.createElement(i);return Object.getOwnPropertyNames(a).forEach(function(i){var s=a[i];-1!==i.indexOf("aria-")||"role"===i||"type"===i?(wC.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+i+" to "+s+"."),u.setAttribute(i,s)):"textContent"===i?textContent(u,s):u[i]===s&&"tabIndex"!==i||(u[i]=s)}),Object.getOwnPropertyNames(s).forEach(function(i){u.setAttribute(i,s[i])}),o&&appendContent(u,o),u}function textContent(i,a){return void 0===i.textContent?i.innerText=a:i.textContent=a,i}function prependTo(i,a){a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i)}function hasClass(i,a){return throwIfWhitespace(a),i.classList?i.classList.contains(a):classRegExp(a).test(i.className)}function addClass(i,a){return i.classList?i.classList.add(a):hasClass(i,a)||(i.className=(i.className+" "+a).trim()),i}function removeClass(i,a){return i?(i.classList?i.classList.remove(a):(throwIfWhitespace(a),i.className=i.className.split(/\s+/).filter(function(i){return i!==a}).join(" ")),i):(wC.warn("removeClass was called with an element that doesn't exist"),null)}function toggleClass(i,a,s){var o=hasClass(i,a);if("function"==typeof s&&(s=s(i,a)),"boolean"!=typeof s&&(s=!o),s!==o)return s?addClass(i,a):removeClass(i,a),i}function setAttributes(i,a){Object.getOwnPropertyNames(a).forEach(function(s){var o=a[s];null==o||!1===o?i.removeAttribute(s):i.setAttribute(s,!0===o?"":o)})}function getAttributes(i){var a={};if(i&&i.attributes&&i.attributes.length>0)for(var s=i.attributes,o=s.length-1;o>=0;o--){var u=s[o].name,_=s[o].value;"boolean"!=typeof i[u]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+u+",")||(_=null!==_),a[u]=_}return a}function getAttribute(i,a){return i.getAttribute(a)}function setAttribute(i,a,s){i.setAttribute(a,s)}function removeAttribute(i,a){i.removeAttribute(a)}function blockTextSelection(){An.body.focus(),An.onselectstart=function(){return!1}}function unblockTextSelection(){An.onselectstart=function(){return!0}}function getBoundingClientRect(i){if(i&&i.getBoundingClientRect&&i.parentNode){var a=i.getBoundingClientRect(),s={};return["bottom","height","left","right","top","width"].forEach(function(i){void 0!==a[i]&&(s[i]=a[i])}),s.height||(s.height=parseFloat(computedStyle(i,"height"))),s.width||(s.width=parseFloat(computedStyle(i,"width"))),s}}function findPosition(i){if(!i||i&&!i.offsetParent)return{left:0,top:0,width:0,height:0};for(var a=i.offsetWidth,s=i.offsetHeight,o=0,u=0;i.offsetParent&&i!==An[_C.fullscreenElement];)o+=i.offsetLeft,u+=i.offsetTop,i=i.offsetParent;return{left:o,top:u,width:a,height:s}}function getPointerPosition(i,a){var s={x:0,y:0};if(QC)for(var o=i;o&&"html"!==o.nodeName.toLowerCase();){var u=computedStyle(o,"transform");if(/^matrix/.test(u)){var _=u.slice(7,-1).split(/,\s/).map(Number);s.x+=_[4],s.y+=_[5]}else if(/^matrix3d/.test(u)){var x=u.slice(9,-1).split(/,\s/).map(Number);s.x+=x[12],s.y+=x[13]}o=o.parentNode}var w={},C=findPosition(a.target),L=findPosition(i),B=L.width,U=L.height,j=a.offsetY-(L.top-C.top),V=a.offsetX-(L.left-C.left);return a.changedTouches&&(V=a.changedTouches[0].pageX-L.left,j=a.changedTouches[0].pageY+L.top,QC&&(V-=s.x,j-=s.y)),w.y=1-Math.max(0,Math.min(1,j/U)),w.x=Math.max(0,Math.min(1,V/B)),w}function isTextNode(i){return isObject(i)&&3===i.nodeType}function emptyEl(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}function normalizeContent(i){return"function"==typeof i&&(i=i()),(Array.isArray(i)?i:[i]).map(function(i){return"function"==typeof i&&(i=i()),isEl(i)||isTextNode(i)?i:"string"==typeof i&&/\S/.test(i)?An.createTextNode(i):void 0}).filter(function(i){return i})}function appendContent(i,a){return normalizeContent(a).forEach(function(a){return i.appendChild(a)}),i}function insertContent(i,a){return appendContent(emptyEl(i),a)}function isSingleLeftClick(i){return void 0===i.button&&void 0===i.buttons||(0===i.button&&void 0===i.buttons||("mouseup"===i.type&&0===i.button&&0===i.buttons||0===i.button&&1===i.buttons))}__name(isNonBlankString,"isNonBlankString"),__name(throwIfWhitespace,"throwIfWhitespace"),__name(classRegExp,"classRegExp"),__name(isReal,"isReal"),__name(isEl,"isEl"),__name(isInFrame,"isInFrame"),__name(createQuerier,"createQuerier"),__name(createEl,"createEl"),__name(textContent,"textContent"),__name(prependTo,"prependTo"),__name(hasClass,"hasClass"),__name(addClass,"addClass"),__name(removeClass,"removeClass"),__name(toggleClass,"toggleClass"),__name(setAttributes,"setAttributes"),__name(getAttributes,"getAttributes"),__name(getAttribute,"getAttribute"),__name(setAttribute,"setAttribute"),__name(removeAttribute,"removeAttribute"),__name(blockTextSelection,"blockTextSelection"),__name(unblockTextSelection,"unblockTextSelection"),__name(getBoundingClientRect,"getBoundingClientRect"),__name(findPosition,"findPosition"),__name(getPointerPosition,"getPointerPosition"),__name(isTextNode,"isTextNode"),__name(emptyEl,"emptyEl"),__name(normalizeContent,"normalizeContent"),__name(appendContent,"appendContent"),__name(insertContent,"insertContent"),__name(isSingleLeftClick,"isSingleLeftClick");var JC,ZC=createQuerier("querySelector"),eE=createQuerier("querySelectorAll"),tE=/* @__PURE__ */Object.freeze({__proto__:null,isReal:isReal,isEl:isEl,isInFrame:isInFrame,createEl:createEl,textContent:textContent,prependTo:prependTo,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,setAttributes:setAttributes,getAttributes:getAttributes,getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,blockTextSelection:blockTextSelection,unblockTextSelection:unblockTextSelection,getBoundingClientRect:getBoundingClientRect,findPosition:findPosition,getPointerPosition:getPointerPosition,isTextNode:isTextNode,emptyEl:emptyEl,normalizeContent:normalizeContent,appendContent:appendContent,insertContent:insertContent,isSingleLeftClick:isSingleLeftClick,$:ZC,$$:eE}),nE=!1,iE=/* @__PURE__ */__name(function autoSetup2(){if(!1!==JC.options.autoSetup){var i=Array.prototype.slice.call(An.getElementsByTagName("video")),a=Array.prototype.slice.call(An.getElementsByTagName("audio")),s=Array.prototype.slice.call(An.getElementsByTagName("video-js")),o=i.concat(a,s);if(o&&o.length>0)for(var u=0,_=o.length;u<_;u++){var x=o[u];if(!x||!x.getAttribute){autoSetupTimeout(1);break}void 0===x.player&&null!==x.getAttribute("data-setup")&&JC(x)}else nE||autoSetupTimeout(1)}},"autoSetup");function autoSetupTimeout(i,a){isReal()&&(a&&(JC=a),Tn.setTimeout(iE,i))}function setWindowLoaded(){nE=!0,Tn.removeEventListener("load",setWindowLoaded)}__name(autoSetupTimeout,"autoSetupTimeout"),__name(setWindowLoaded,"setWindowLoaded"),isReal()&&("complete"===An.readyState?setWindowLoaded():Tn.addEventListener("load",setWindowLoaded));var rE,aE=/* @__PURE__ */__name(function createStyleElement2(i){var a=An.createElement("style");return a.className=i,a},"createStyleElement"),sE=/* @__PURE__ */__name(function setTextContent2(i,a){i.styleSheet?i.styleSheet.cssText=a:i.textContent=a},"setTextContent"),oE=3;function newGUID(){return oE++}__name(newGUID,"newGUID"),Tn.WeakMap||(rE=/* @__PURE__ */function(){function FakeWeakMap2(){this.vdata="vdata"+Math.floor(Tn.performance&&Tn.performance.now()||Date.now()),this.data={}}__name(FakeWeakMap2,"FakeWeakMap");var i=FakeWeakMap2.prototype;return i.set=/* @__PURE__ */__name(function set2(i,a){var s=i[this.vdata]||newGUID();return i[this.vdata]||(i[this.vdata]=s),this.data[s]=a,this},"set"),i.get=/* @__PURE__ */__name(function get2(i){var a=i[this.vdata];if(a)return this.data[a];wC("We have no data for this element",i)},"get"),i.has=/* @__PURE__ */__name(function has(i){return i[this.vdata]in this.data},"has"),i.delete=/* @__PURE__ */__name(function _delete(i){var a=i[this.vdata];a&&(delete this.data[a],delete i[this.vdata])},"_delete"),FakeWeakMap2}());var lE,cE=Tn.WeakMap?/* @__PURE__ */new WeakMap:new rE;function _cleanUpEvents(i,a){if(cE.has(i)){var s=cE.get(i);0===s.handlers[a].length&&(delete s.handlers[a],i.removeEventListener?i.removeEventListener(a,s.dispatcher,!1):i.detachEvent&&i.detachEvent("on"+a,s.dispatcher)),Object.getOwnPropertyNames(s.handlers).length<=0&&(delete s.handlers,delete s.dispatcher,delete s.disabled),0===Object.getOwnPropertyNames(s).length&&cE.delete(i)}}function _handleMultipleEvents(i,a,s,o){s.forEach(function(s){i(a,s,o)})}function fixEvent(i){if(i.fixed_)return i;function returnTrue(){return!0}function returnFalse(){return!1}if(__name(returnTrue,"returnTrue"),__name(returnFalse,"returnFalse"),!i||!i.isPropagationStopped||!i.isImmediatePropagationStopped){var a=i||Tn.event;for(var s in i={},a)"layerX"!==s&&"layerY"!==s&&"keyLocation"!==s&&"webkitMovementX"!==s&&"webkitMovementY"!==s&&"path"!==s&&("returnValue"===s&&a.preventDefault||(i[s]=a[s]));if(i.target||(i.target=i.srcElement||An),i.relatedTarget||(i.relatedTarget=i.fromElement===i.target?i.toElement:i.fromElement),i.preventDefault=function(){a.preventDefault&&a.preventDefault(),i.returnValue=!1,a.returnValue=!1,i.defaultPrevented=!0},i.defaultPrevented=!1,i.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),i.cancelBubble=!0,a.cancelBubble=!0,i.isPropagationStopped=returnTrue},i.isPropagationStopped=returnFalse,i.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),i.isImmediatePropagationStopped=returnTrue,i.stopPropagation()},i.isImmediatePropagationStopped=returnFalse,null!==i.clientX&&void 0!==i.clientX){var o=An.documentElement,u=An.body;i.pageX=i.clientX+(o&&o.scrollLeft||u&&u.scrollLeft||0)-(o&&o.clientLeft||u&&u.clientLeft||0),i.pageY=i.clientY+(o&&o.scrollTop||u&&u.scrollTop||0)-(o&&o.clientTop||u&&u.clientTop||0)}i.which=i.charCode||i.keyCode,null!==i.button&&void 0!==i.button&&(i.button=1&i.button?0:4&i.button?1:2&i.button?2:0)}return i.fixed_=!0,i}__name(_cleanUpEvents,"_cleanUpEvents"),__name(_handleMultipleEvents,"_handleMultipleEvents"),__name(fixEvent,"fixEvent");var uE=/* @__PURE__ */__name(function supportsPassive2(){if("boolean"!=typeof lE){lE=!1;try{var i=Object.defineProperty({},"passive",{get:/* @__PURE__ */__name(function get2(){lE=!0},"get")});Tn.addEventListener("test",null,i),Tn.removeEventListener("test",null,i)}catch(a){}}return lE},"supportsPassive"),dE=["touchstart","touchmove"];function on(i,a,s){if(Array.isArray(a))return _handleMultipleEvents(on,i,a,s);cE.has(i)||cE.set(i,{});var o=cE.get(i);if(o.handlers||(o.handlers={}),o.handlers[a]||(o.handlers[a]=[]),s.guid||(s.guid=newGUID()),o.handlers[a].push(s),o.dispatcher||(o.disabled=!1,o.dispatcher=function(a,s){if(!o.disabled){a=fixEvent(a);var u=o.handlers[a.type];if(u)for(var _=u.slice(0),x=0,w=_.length;x<w&&!a.isImmediatePropagationStopped();x++)try{_[x].call(i,a,s)}catch(C){wC.error(C)}}}),1===o.handlers[a].length)if(i.addEventListener){var u=!1;uE()&&dE.indexOf(a)>-1&&(u={passive:!0}),i.addEventListener(a,o.dispatcher,u)}else i.attachEvent&&i.attachEvent("on"+a,o.dispatcher)}function off(i,a,s){if(cE.has(i)){var o=cE.get(i);if(o.handlers){if(Array.isArray(a))return _handleMultipleEvents(off,i,a,s);var u=/* @__PURE__ */__name(function removeType2(i,a){o.handlers[a]=[],_cleanUpEvents(i,a)},"removeType");if(void 0!==a){var _=o.handlers[a];if(_)if(s){if(s.guid)for(var x=0;x<_.length;x++)_[x].guid===s.guid&&_.splice(x--,1);_cleanUpEvents(i,a)}else u(i,a)}else for(var w in o.handlers)Object.prototype.hasOwnProperty.call(o.handlers||{},w)&&u(i,w)}}}function trigger(i,a,s){var o=cE.has(i)?cE.get(i):{},u=i.parentNode||i.ownerDocument;if("string"==typeof a?a={type:a,target:i}:a.target||(a.target=i),a=fixEvent(a),o.dispatcher&&o.dispatcher.call(i,a,s),u&&!a.isPropagationStopped()&&!0===a.bubbles)trigger.call(null,u,a,s);else if(!u&&!a.defaultPrevented&&a.target&&a.target[a.type]){cE.has(a.target)||cE.set(a.target,{});var _=cE.get(a.target);a.target[a.type]&&(_.disabled=!0,"function"==typeof a.target[a.type]&&a.target[a.type](),_.disabled=!1)}return!a.defaultPrevented}function one(i,a,s){if(Array.isArray(a))return _handleMultipleEvents(one,i,a,s);var o=/* @__PURE__ */__name(function func2(){off(i,a,func2),s.apply(this,arguments)},"func");o.guid=s.guid=s.guid||newGUID(),on(i,a,o)}function any(i,a,s){var o=/* @__PURE__ */__name(function func2(){off(i,a,func2),s.apply(this,arguments)},"func");o.guid=s.guid=s.guid||newGUID(),on(i,a,o)}__name(on,"on"),__name(off,"off"),__name(trigger,"trigger"),__name(one,"one"),__name(any,"any");var hE,pE=/* @__PURE__ */Object.freeze({__proto__:null,fixEvent:fixEvent,on:on,off:off,trigger:trigger,one:one,any:any}),mE=30,fE=/* @__PURE__ */__name(function bind2(i,a,s){a.guid||(a.guid=newGUID());var o=a.bind(i);return o.guid=s?s+"_"+a.guid:a.guid,o},"bind"),gE=/* @__PURE__ */__name(function throttle2(i,a){var s=Tn.performance.now(),o=/* @__PURE__ */__name(function throttled2(){var o=Tn.performance.now();o-s>=a&&(i.apply(void 0,arguments),s=o)},"throttled");return o},"throttle"),_E=/* @__PURE__ */__name(function debounce2(i,a,s,o){var u;void 0===o&&(o=Tn);var _=/* @__PURE__ */__name(function cancel2(){o.clearTimeout(u),u=null},"cancel"),x=/* @__PURE__ */__name(function debounced2(){var s=this,_=arguments,x=/* @__PURE__ */__name(function later(){u=null,x=null,i.apply(s,_)},"later");o.clearTimeout(u),u=o.setTimeout(x,a)},"debounced");return x.cancel=_,x},"debounce"),yE=/* @__PURE__ */__name(function EventTarget2(){},"EventTarget");yE.prototype.allowedEvents_={},yE.prototype.on=function(i,a){var s=this.addEventListener;this.addEventListener=function(){},on(this,i,a),this.addEventListener=s},yE.prototype.addEventListener=yE.prototype.on,yE.prototype.off=function(i,a){off(this,i,a)},yE.prototype.removeEventListener=yE.prototype.off,yE.prototype.one=function(i,a){var s=this.addEventListener;this.addEventListener=function(){},one(this,i,a),this.addEventListener=s},yE.prototype.any=function(i,a){var s=this.addEventListener;this.addEventListener=function(){},any(this,i,a),this.addEventListener=s},yE.prototype.trigger=function(i){var a=i.type||i;"string"==typeof i&&(i={type:a}),i=fixEvent(i),this.allowedEvents_[a]&&this["on"+a]&&this["on"+a](i),trigger(this,i)},yE.prototype.dispatchEvent=yE.prototype.trigger,yE.prototype.queueTrigger=function(i){var a=this;hE||(hE=/* @__PURE__ */new Map);var s=i.type||i,o=hE.get(this);o||(o=/* @__PURE__ */new Map,hE.set(this,o));var u=o.get(s);o.delete(s),Tn.clearTimeout(u);var _=Tn.setTimeout(function(){o.delete(s),0===o.size&&(o=null,hE.delete(a)),a.trigger(i)},0);o.set(s,_)};var vE=/* @__PURE__ */__name(function objName2(i){return"function"==typeof i.name?i.name():"string"==typeof i.name?i.name:i.name_?i.name_:i.constructor&&i.constructor.name?i.constructor.name:typeof i},"objName"),bE=/* @__PURE__ */__name(function isEvented2(i){return i instanceof yE||!!i.eventBusEl_&&["on","one","off","trigger"].every(function(a){return"function"==typeof i[a]})},"isEvented"),TE=/* @__PURE__ */__name(function addEventedCallback2(i,a){bE(i)?a():(i.eventedCallbacks||(i.eventedCallbacks=[]),i.eventedCallbacks.push(a))},"addEventedCallback"),SE=/* @__PURE__ */__name(function isValidEventType2(i){return"string"==typeof i&&/\S/.test(i)||Array.isArray(i)&&!!i.length},"isValidEventType"),xE=/* @__PURE__ */__name(function validateTarget2(i,a,s){if(!i||!i.nodeName&&!bE(i))throw new Error("Invalid target for "+vE(a)+"#"+s+"; must be a DOM node or evented object.")},"validateTarget"),wE=/* @__PURE__ */__name(function validateEventType2(i,a,s){if(!SE(i))throw new Error("Invalid event type for "+vE(a)+"#"+s+"; must be a non-empty string or array.")},"validateEventType"),AE=/* @__PURE__ */__name(function validateListener2(i,a,s){if("function"!=typeof i)throw new Error("Invalid listener for "+vE(a)+"#"+s+"; must be a function.")},"validateListener"),CE=/* @__PURE__ */__name(function normalizeListenArgs2(i,a,s){var o,u,_,x=a.length<3||a[0]===i||a[0]===i.eventBusEl_;return x?(o=i.eventBusEl_,a.length>=3&&a.shift(),u=a[0],_=a[1]):(o=a[0],u=a[1],_=a[2]),xE(o,i,s),wE(u,i,s),AE(_,i,s),{isTargetingSelf:x,target:o,type:u,listener:_=fE(i,_)}},"normalizeListenArgs"),ME=/* @__PURE__ */__name(function listen2(i,a,s,o){xE(i,i,a),i.nodeName?pE[a](i,s,o):i[a](s,o)},"listen"),kE={on:/* @__PURE__ */__name(function on2(){for(var i=this,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var u=CE(this,s,"on"),_=u.isTargetingSelf,x=u.target,w=u.type,C=u.listener;if(ME(x,"on",w,C),!_){var L=/* @__PURE__ */__name(function removeListenerOnDispose2(){return i.off(x,w,C)},"removeListenerOnDispose");L.guid=C.guid;var B=/* @__PURE__ */__name(function removeRemoverOnTargetDispose2(){return i.off("dispose",L)},"removeRemoverOnTargetDispose");B.guid=C.guid,ME(this,"on","dispose",L),ME(x,"on","dispose",B)}},"on"),one:/* @__PURE__ */__name(function one2(){for(var i=this,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var u=CE(this,s,"one"),_=u.isTargetingSelf,x=u.target,w=u.type,C=u.listener;if(_)ME(x,"one",w,C);else{var L=/* @__PURE__ */__name(function wrapper2(){i.off(x,w,wrapper2);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];C.apply(null,s)},"wrapper");L.guid=C.guid,ME(x,"one",w,L)}},"one"),any:/* @__PURE__ */__name(function any2(){for(var i=this,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];var u=CE(this,s,"any"),_=u.isTargetingSelf,x=u.target,w=u.type,C=u.listener;if(_)ME(x,"any",w,C);else{var L=/* @__PURE__ */__name(function wrapper2(){i.off(x,w,wrapper2);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];C.apply(null,s)},"wrapper");L.guid=C.guid,ME(x,"any",w,L)}},"any"),off:/* @__PURE__ */__name(function off$12(i,a,s){if(!i||SE(i))off(this.eventBusEl_,i,a);else{var o=i,u=a;xE(o,this,"off"),wE(u,this,"off"),AE(s,this,"off"),s=fE(this,s),this.off("dispose",s),o.nodeName?(off(o,u,s),off(o,"dispose",s)):bE(o)&&(o.off(u,s),o.off("dispose",s))}},"off$1"),trigger:/* @__PURE__ */__name(function trigger$12(i,a){xE(this.eventBusEl_,this,"trigger");var s=i&&"string"!=typeof i?i.type:i;if(!SE(s)){var o="Invalid event type for "+vE(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!i)throw new Error(o);(this.log||wC).error(o)}return trigger(this.eventBusEl_,i,a)},"trigger$1")};function evented(i,a){void 0===a&&(a={});var s=a.eventBusKey;if(s){if(!i[s].nodeName)throw new Error('The eventBusKey "'+s+'" does not refer to an element.');i.eventBusEl_=i[s]}else i.eventBusEl_=createEl("span",{className:"vjs-event-bus"});return assign(i,kE),i.eventedCallbacks&&i.eventedCallbacks.forEach(function(i){i()}),i.on("dispose",function(){i.off(),[i,i.el_,i.eventBusEl_].forEach(function(i){i&&cE.has(i)&&cE.delete(i)}),Tn.setTimeout(function(){i.eventBusEl_=null},0)}),i}__name(evented,"evented");var PE={state:{},setState:/* @__PURE__ */__name(function setState(i){var a,s=this;return"function"==typeof i&&(i=i()),each(i,function(i,o){s.state[o]!==i&&((a=a||{})[o]={from:s.state[o],to:i}),s.state[o]=i}),a&&bE(this)&&this.trigger({changes:a,type:"statechanged"}),a},"setState")};function stateful(i,a){return assign(i,PE),i.state=assign({},i.state,a),"function"==typeof i.handleStateChanged&&bE(i)&&i.on("statechanged",i.handleStateChanged),i}__name(stateful,"stateful");var IE=/* @__PURE__ */__name(function toLowerCase2(i){return"string"!=typeof i?i:i.replace(/./,function(i){return i.toLowerCase()})},"toLowerCase"),LE=/* @__PURE__ */__name(function toTitleCase2(i){return"string"!=typeof i?i:i.replace(/./,function(i){return i.toUpperCase()})},"toTitleCase"),DE=/* @__PURE__ */__name(function titleCaseEquals2(i,a){return LE(i)===LE(a)},"titleCaseEquals");function mergeOptions$3(){for(var i={},a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return s.forEach(function(a){a&&each(a,function(a,s){isPlain(a)?(isPlain(i[s])||(i[s]={}),i[s]=mergeOptions$3(i[s],a)):i[s]=a})}),i}__name(mergeOptions$3,"mergeOptions$3");var RE=/* @__PURE__ */function(){function MapSham2(){this.map_={}}__name(MapSham2,"MapSham");var i=MapSham2.prototype;return i.has=/* @__PURE__ */__name(function has(i){return i in this.map_},"has"),i.delete=/* @__PURE__ */__name(function _delete(i){var a=this.has(i);return delete this.map_[i],a},"_delete"),i.set=/* @__PURE__ */__name(function set2(i,a){return this.map_[i]=a,this},"set"),i.forEach=/* @__PURE__ */__name(function forEach(i,a){for(var s in this.map_)i.call(a,this.map_[s],s,this)},"forEach"),MapSham2}(),OE=Tn.Map?Tn.Map:RE,NE=/* @__PURE__ */function(){function SetSham2(){this.set_={}}__name(SetSham2,"SetSham");var i=SetSham2.prototype;return i.has=/* @__PURE__ */__name(function has(i){return i in this.set_},"has"),i.delete=/* @__PURE__ */__name(function _delete(i){var a=this.has(i);return delete this.set_[i],a},"_delete"),i.add=/* @__PURE__ */__name(function add(i){return this.set_[i]=1,this},"add"),i.forEach=/* @__PURE__ */__name(function forEach(i,a){for(var s in this.set_)i.call(a,s,s,this)},"forEach"),SetSham2}(),BE=Tn.Set?Tn.Set:NE,FE=/* @__PURE__ */function(){function Component2(i,a,s){var o=this;if(!i&&this.play?this.player_=i=this:this.player_=i,this.isDisposed_=!1,this.parentComponent_=null,this.options_=mergeOptions$3({},this.options_),a=this.options_=mergeOptions$3(this.options_,a),this.id_=a.id||a.el&&a.el.id,!this.id_){var u=i&&i.id&&i.id()||"no_player";this.id_=u+"_component_"+newGUID()}this.name_=a.name||null,a.el?this.el_=a.el:!1!==a.createEl&&(this.el_=this.createEl()),a.className&&this.el_&&a.className.split(" ").forEach(function(i){return o.addClass(i)}),!1!==a.evented&&(evented(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),stateful(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new BE,this.setIntervalIds_=new BE,this.rafIds_=new BE,this.namedRafs_=new OE,this.clearingTimersOnDispose_=!1,!1!==a.initChildren&&this.initChildren(),this.ready(s),!1!==a.reportTouchActivity&&this.enableTouchActivity()}__name(Component2,"Component");var i=Component2.prototype;return i.dispose=/* @__PURE__ */__name(function dispose(i){if(void 0===i&&(i={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var a=this.children_.length-1;a>=0;a--)this.children_[a].dispose&&this.children_[a].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(i.restoreEl?this.el_.parentNode.replaceChild(i.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},"dispose"),i.isDisposed=/* @__PURE__ */__name(function isDisposed(){return Boolean(this.isDisposed_)},"isDisposed"),i.player=/* @__PURE__ */__name(function player(){return this.player_},"player"),i.options=/* @__PURE__ */__name(function options(i){return i?(this.options_=mergeOptions$3(this.options_,i),this.options_):this.options_},"options"),i.el=/* @__PURE__ */__name(function el(){return this.el_},"el"),i.createEl=/* @__PURE__ */__name(function createEl$12(i,a,s){return createEl(i,a,s)},"createEl$1"),i.localize=/* @__PURE__ */__name(function localize(i,a,s){void 0===s&&(s=i);var o=this.player_.language&&this.player_.language(),u=this.player_.languages&&this.player_.languages(),_=u&&u[o],x=o&&o.split("-")[0],w=u&&u[x],C=s;return _&&_[i]?C=_[i]:w&&w[i]&&(C=w[i]),a&&(C=C.replace(/\{(\d+)\}/g,function(i,s){var o=a[s-1],u=o;return void 0===o&&(u=i),u})),C},"localize"),i.handleLanguagechange=/* @__PURE__ */__name(function handleLanguagechange(){},"handleLanguagechange"),i.contentEl=/* @__PURE__ */__name(function contentEl(){return this.contentEl_||this.el_},"contentEl"),i.id=/* @__PURE__ */__name(function id(){return this.id_},"id"),i.name=/* @__PURE__ */__name(function name(){return this.name_},"name"),i.children=/* @__PURE__ */__name(function children(){return this.children_},"children"),i.getChildById=/* @__PURE__ */__name(function getChildById(i){return this.childIndex_[i]},"getChildById"),i.getChild=/* @__PURE__ */__name(function getChild(i){if(i)return this.childNameIndex_[i]},"getChild"),i.getDescendant=/* @__PURE__ */__name(function getDescendant(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];a=a.reduce(function(i,a){return i.concat(a)},[]);for(var o=this,u=0;u<a.length;u++)if(!(o=o.getChild(a[u]))||!o.getChild)return;return o},"getDescendant"),i.addChild=/* @__PURE__ */__name(function addChild(i,a,s){var o,u;if(void 0===a&&(a={}),void 0===s&&(s=this.children_.length),"string"==typeof i){u=LE(i);var _=a.componentClass||u;a.name=u;var x=Component2.getComponent(_);if(!x)throw new Error("Component "+_+" does not exist");if("function"!=typeof x)return null;o=new x(this.player_||this,a)}else o=i;if(o.parentComponent_&&o.parentComponent_.removeChild(o),this.children_.splice(s,0,o),o.parentComponent_=this,"function"==typeof o.id&&(this.childIndex_[o.id()]=o),(u=u||o.name&&LE(o.name()))&&(this.childNameIndex_[u]=o,this.childNameIndex_[IE(u)]=o),"function"==typeof o.el&&o.el()){var w=null;this.children_[s+1]&&(this.children_[s+1].el_?w=this.children_[s+1].el_:isEl(this.children_[s+1])&&(w=this.children_[s+1])),this.contentEl().insertBefore(o.el(),w)}return o},"addChild"),i.removeChild=/* @__PURE__ */__name(function removeChild(i){if("string"==typeof i&&(i=this.getChild(i)),i&&this.children_){for(var a=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===i){a=!0,this.children_.splice(s,1);break}if(a){i.parentComponent_=null,this.childIndex_[i.id()]=null,this.childNameIndex_[LE(i.name())]=null,this.childNameIndex_[IE(i.name())]=null;var o=i.el();o&&o.parentNode===this.contentEl()&&this.contentEl().removeChild(i.el())}}},"removeChild"),i.initChildren=/* @__PURE__ */__name(function initChildren(){var i=this,a=this.options_.children;if(a){var s,o=this.options_,u=/* @__PURE__ */__name(function handleAdd2(a){var s=a.name,u=a.opts;if(void 0!==o[s]&&(u=o[s]),!1!==u){!0===u&&(u={}),u.playerOptions=i.options_.playerOptions;var _=i.addChild(s,u);_&&(i[s]=_)}},"handleAdd"),_=Component2.getComponent("Tech");(s=Array.isArray(a)?a:Object.keys(a)).concat(Object.keys(this.options_).filter(function(i){return!s.some(function(a){return"string"==typeof a?i===a:i===a.name})})).map(function(s){var o,u;return"string"==typeof s?u=a[o=s]||i.options_[o]||{}:(o=s.name,u=s),{name:o,opts:u}}).filter(function(i){var a=Component2.getComponent(i.opts.componentClass||LE(i.name));return a&&!_.isTech(a)}).forEach(u)}},"initChildren"),i.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return""},"buildCSSClass"),i.ready=/* @__PURE__ */__name(function ready(i,a){if(void 0===a&&(a=!1),i)return this.isReady_?void(a?i.call(this):this.setTimeout(i,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(i))},"ready"),i.triggerReady=/* @__PURE__ */__name(function triggerReady(){this.isReady_=!0,this.setTimeout(function(){var i=this.readyQueue_;this.readyQueue_=[],i&&i.length>0&&i.forEach(function(i){i.call(this)},this),this.trigger("ready")},1)},"triggerReady"),i.$=/* @__PURE__ */__name(function $$12(i,a){return ZC(i,a||this.contentEl())},"$$1"),i.$$=/* @__PURE__ */__name(function $$$12(i,a){return eE(i,a||this.contentEl())},"$$$1"),i.hasClass=/* @__PURE__ */__name(function hasClass$12(i){return hasClass(this.el_,i)},"hasClass$1"),i.addClass=/* @__PURE__ */__name(function addClass$12(i){addClass(this.el_,i)},"addClass$1"),i.removeClass=/* @__PURE__ */__name(function removeClass$12(i){removeClass(this.el_,i)},"removeClass$1"),i.toggleClass=/* @__PURE__ */__name(function toggleClass$12(i,a){toggleClass(this.el_,i,a)},"toggleClass$1"),i.show=/* @__PURE__ */__name(function show(){this.removeClass("vjs-hidden")},"show"),i.hide=/* @__PURE__ */__name(function hide(){this.addClass("vjs-hidden")},"hide"),i.lockShowing=/* @__PURE__ */__name(function lockShowing(){this.addClass("vjs-lock-showing")},"lockShowing"),i.unlockShowing=/* @__PURE__ */__name(function unlockShowing(){this.removeClass("vjs-lock-showing")},"unlockShowing"),i.getAttribute=/* @__PURE__ */__name(function getAttribute$12(i){return getAttribute(this.el_,i)},"getAttribute$1"),i.setAttribute=/* @__PURE__ */__name(function setAttribute$12(i,a){setAttribute(this.el_,i,a)},"setAttribute$1"),i.removeAttribute=/* @__PURE__ */__name(function removeAttribute$12(i){removeAttribute(this.el_,i)},"removeAttribute$1"),i.width=/* @__PURE__ */__name(function width(i,a){return this.dimension("width",i,a)},"width"),i.height=/* @__PURE__ */__name(function height(i,a){return this.dimension("height",i,a)},"height"),i.dimensions=/* @__PURE__ */__name(function dimensions(i,a){this.width(i,!0),this.height(a)},"dimensions"),i.dimension=/* @__PURE__ */__name(function dimension(i,a,s){if(void 0!==a)return null!==a&&a==a||(a=0),-1!==(""+a).indexOf("%")||-1!==(""+a).indexOf("px")?this.el_.style[i]=a:this.el_.style[i]="auto"===a?"":a+"px",void(s||this.trigger("componentresize"));if(!this.el_)return 0;var o=this.el_.style[i],u=o.indexOf("px");return-1!==u?parseInt(o.slice(0,u),10):parseInt(this.el_["offset"+LE(i)],10)},"dimension"),i.currentDimension=/* @__PURE__ */__name(function currentDimension(i){var a=0;if("width"!==i&&"height"!==i)throw new Error("currentDimension only accepts width or height value");if(a=computedStyle(this.el_,i),0===(a=parseFloat(a))||isNaN(a)){var s="offset"+LE(i);a=this.el_[s]}return a},"currentDimension"),i.currentDimensions=/* @__PURE__ */__name(function currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},"currentDimensions"),i.currentWidth=/* @__PURE__ */__name(function currentWidth(){return this.currentDimension("width")},"currentWidth"),i.currentHeight=/* @__PURE__ */__name(function currentHeight(){return this.currentDimension("height")},"currentHeight"),i.focus=/* @__PURE__ */__name(function focus(){this.el_.focus()},"focus"),i.blur=/* @__PURE__ */__name(function blur(){this.el_.blur()},"blur"),i.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(i){this.player_&&(rx.isEventKey(i,"Tab")||i.stopPropagation(),this.player_.handleKeyDown(i))},"handleKeyDown"),i.handleKeyPress=/* @__PURE__ */__name(function handleKeyPress(i){this.handleKeyDown(i)},"handleKeyPress"),i.emitTapEvents=/* @__PURE__ */__name(function emitTapEvents(){var i,a=0,s=null;this.on("touchstart",function(o){1===o.touches.length&&(s={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},a=Tn.performance.now(),i=!0)}),this.on("touchmove",function(a){if(a.touches.length>1)i=!1;else if(s){var o=a.touches[0].pageX-s.pageX,u=a.touches[0].pageY-s.pageY;Math.sqrt(o*o+u*u)>10&&(i=!1)}});var o=/* @__PURE__ */__name(function noTap2(){i=!1},"noTap");this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(o){(s=null,!0===i)&&(Tn.performance.now()-a<200&&(o.preventDefault(),this.trigger("tap")))})},"emitTapEvents"),i.enableTouchActivity=/* @__PURE__ */__name(function enableTouchActivity(){if(this.player()&&this.player().reportUserActivity){var i,a=fE(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){a(),this.clearInterval(i),i=this.setInterval(a,250)});var s=/* @__PURE__ */__name(function touchEnd2(s){a(),this.clearInterval(i)},"touchEnd");this.on("touchmove",a),this.on("touchend",s),this.on("touchcancel",s)}},"enableTouchActivity"),i.setTimeout=/* @__PURE__ */__name(function setTimeout2(i,a){var s,o=this;return i=fE(this,i),this.clearTimersOnDispose_(),s=Tn.setTimeout(function(){o.setTimeoutIds_.has(s)&&o.setTimeoutIds_.delete(s),i()},a),this.setTimeoutIds_.add(s),s},"setTimeout"),i.clearTimeout=/* @__PURE__ */__name(function clearTimeout2(i){return this.setTimeoutIds_.has(i)&&(this.setTimeoutIds_.delete(i),Tn.clearTimeout(i)),i},"clearTimeout"),i.setInterval=/* @__PURE__ */__name(function setInterval(i,a){i=fE(this,i),this.clearTimersOnDispose_();var s=Tn.setInterval(i,a);return this.setIntervalIds_.add(s),s},"setInterval"),i.clearInterval=/* @__PURE__ */__name(function clearInterval2(i){return this.setIntervalIds_.has(i)&&(this.setIntervalIds_.delete(i),Tn.clearInterval(i)),i},"clearInterval"),i.requestAnimationFrame=/* @__PURE__ */__name(function requestAnimationFrame2(i){var a,s=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),i=fE(this,i),a=Tn.requestAnimationFrame(function(){s.rafIds_.has(a)&&s.rafIds_.delete(a),i()}),this.rafIds_.add(a),a):this.setTimeout(i,1e3/60)},"requestAnimationFrame"),i.requestNamedAnimationFrame=/* @__PURE__ */__name(function requestNamedAnimationFrame(i,a){var s=this;if(!this.namedRafs_.has(i)){this.clearTimersOnDispose_(),a=fE(this,a);var o=this.requestAnimationFrame(function(){a(),s.namedRafs_.has(i)&&s.namedRafs_.delete(i)});return this.namedRafs_.set(i,o),i}},"requestNamedAnimationFrame"),i.cancelNamedAnimationFrame=/* @__PURE__ */__name(function cancelNamedAnimationFrame(i){this.namedRafs_.has(i)&&(this.cancelAnimationFrame(this.namedRafs_.get(i)),this.namedRafs_.delete(i))},"cancelNamedAnimationFrame"),i.cancelAnimationFrame=/* @__PURE__ */__name(function cancelAnimationFrame2(i){return this.supportsRaf_?(this.rafIds_.has(i)&&(this.rafIds_.delete(i),Tn.cancelAnimationFrame(i)),i):this.clearTimeout(i)},"cancelAnimationFrame"),i.clearTimersOnDispose_=/* @__PURE__ */__name(function clearTimersOnDispose_(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(a){var s=a[0],o=a[1];i[s].forEach(function(a,s){return i[o](s)})}),i.clearingTimersOnDispose_=!1}))},"clearTimersOnDispose_"),Component2.registerComponent=/* @__PURE__ */__name(function registerComponent(i,a){if("string"!=typeof i||!i)throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.');var s,o=Component2.getComponent("Tech"),u=o&&o.isTech(a),_=Component2===a||Component2.prototype.isPrototypeOf(a.prototype);if(u||!_)throw s=u?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+i+'"; '+s+".");i=LE(i),Component2.components_||(Component2.components_={});var x=Component2.getComponent("Player");if("Player"===i&&x&&x.players){var w=x.players,C=Object.keys(w);if(w&&C.length>0&&C.map(function(i){return w[i]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Component2.components_[i]=a,Component2.components_[IE(i)]=a,a},"registerComponent"),Component2.getComponent=/* @__PURE__ */__name(function getComponent(i){if(i&&Component2.components_)return Component2.components_[i]},"getComponent"),Component2}();function rangeCheck(i,a,s){if("number"!=typeof a||a<0||a>s)throw new Error("Failed to execute '"+i+"' on 'TimeRanges': The index provided ("+a+") is non-numeric or out of bounds (0-"+s+").")}function getRange(i,a,s,o){return rangeCheck(i,o,s.length-1),s[o][a]}function createTimeRangesObj(i){var a;return a=void 0===i||0===i.length?{length:0,start:/* @__PURE__ */__name(function start(){throw new Error("This TimeRanges object is empty")},"start"),end:/* @__PURE__ */__name(function end(){throw new Error("This TimeRanges object is empty")},"end")}:{length:i.length,start:getRange.bind(null,"start",0,i),end:getRange.bind(null,"end",1,i)},Tn.Symbol&&Tn.Symbol.iterator&&(a[Tn.Symbol.iterator]=function(){return(i||[]).values()}),a}function createTimeRanges(i,a){return Array.isArray(i)?createTimeRangesObj(i):void 0===i||void 0===a?createTimeRangesObj():createTimeRangesObj([[i,a]])}function bufferedPercent(i,a){var s,o,u=0;if(!a)return 0;i&&i.length||(i=createTimeRanges(0,0));for(var _=0;_<i.length;_++)s=i.start(_),(o=i.end(_))>a&&(o=a),u+=o-s;return u/a}function MediaError(i){if(i instanceof MediaError)return i;"number"==typeof i?this.code=i:"string"==typeof i?this.message=i:isObject(i)&&("number"==typeof i.code&&(this.code=i.code),assign(this,i)),this.message||(this.message=MediaError.defaultMessages[this.code]||"")}FE.prototype.supportsRaf_="function"==typeof Tn.requestAnimationFrame&&"function"==typeof Tn.cancelAnimationFrame,FE.registerComponent("Component",FE),__name(rangeCheck,"rangeCheck"),__name(getRange,"getRange"),__name(createTimeRangesObj,"createTimeRangesObj"),__name(createTimeRanges,"createTimeRanges"),__name(bufferedPercent,"bufferedPercent"),__name(MediaError,"MediaError"),MediaError.prototype.code=0,MediaError.prototype.message="",MediaError.prototype.status=null,MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var UE=0;UE<MediaError.errorTypes.length;UE++)MediaError[MediaError.errorTypes[UE]]=UE,MediaError.prototype[MediaError.errorTypes[UE]]=UE;function isPromise(i){return null!=i&&"function"==typeof i.then}function silencePromise(i){isPromise(i)&&i.then(null,function(i){})}__name(isPromise,"isPromise"),__name(silencePromise,"silencePromise");var jE=/* @__PURE__ */__name(function trackToJson_2(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(a,s,o){return i[s]&&(a[s]=i[s]),a},{cues:i.cues&&Array.prototype.map.call(i.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})})},"trackToJson_"),VE={textTracksToJson:/* @__PURE__ */__name(function textTracksToJson2(i){var a=i.$$("track"),s=Array.prototype.map.call(a,function(i){return i.track});return Array.prototype.map.call(a,function(i){var a=jE(i.track);return i.src&&(a.src=i.src),a}).concat(Array.prototype.filter.call(i.textTracks(),function(i){return-1===s.indexOf(i)}).map(jE))},"textTracksToJson"),jsonToTextTracks:/* @__PURE__ */__name(function jsonToTextTracks2(i,a){return i.forEach(function(i){var s=a.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(function(i){return s.addCue(i)})}),a.textTracks()},"jsonToTextTracks"),trackToJson_:jE},zE="vjs-modal-dialog",HE=/* @__PURE__ */function(i){function ModalDialog2(a,s){var o;return(o=i.call(this,a,s)||this).handleKeyDown_=function(i){return o.handleKeyDown(i)},o.close_=function(i){return o.close(i)},o.opened_=o.hasBeenOpened_=o.hasBeenFilled_=!1,o.closeable(!o.options_.uncloseable),o.content(o.options_.content),o.contentEl_=createEl("div",{className:zE+"-content"},{role:"document"}),o.descEl_=createEl("p",{className:zE+"-description vjs-control-text",id:o.el().getAttribute("aria-describedby")}),textContent(o.descEl_,o.description()),o.el_.appendChild(o.descEl_),o.el_.appendChild(o.contentEl_),o}_inheritsLoose(ModalDialog2,i),__name(ModalDialog2,"ModalDialog");var a=ModalDialog2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},"createEl"),a.dispose=/* @__PURE__ */__name(function dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},"dispose"),a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return zE+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.label=/* @__PURE__ */__name(function label(){return this.localize(this.options_.label||"Modal Window")},"label"),a.description=/* @__PURE__ */__name(function description(){var i=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(i+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),i},"description"),a.open=/* @__PURE__ */__name(function open(){if(!this.opened_){var i=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!i.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&i.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=i.controls(),i.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},"open"),a.opened=/* @__PURE__ */__name(function opened(i){return"boolean"==typeof i&&this[i?"open":"close"](),this.opened_},"opened"),a.close=/* @__PURE__ */__name(function close(){if(this.opened_){var i=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&i.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&i.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},"close"),a.closeable=/* @__PURE__ */__name(function closeable(i){if("boolean"==typeof i){var a=this.closeable_=!!i,s=this.getChild("closeButton");if(a&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},"closeable"),a.fill=/* @__PURE__ */__name(function fill(){this.fillWith(this.content())},"fill"),a.fillWith=/* @__PURE__ */__name(function fillWith(i){var a=this.contentEl(),s=a.parentNode,o=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),insertContent(a,i),this.trigger("modalfill"),o?s.insertBefore(a,o):s.appendChild(a);var u=this.getChild("closeButton");u&&s.appendChild(u.el_)},"fillWith"),a.empty=/* @__PURE__ */__name(function empty(){this.trigger("beforemodalempty"),emptyEl(this.contentEl()),this.trigger("modalempty")},"empty"),a.content=/* @__PURE__ */__name(function content(i){return void 0!==i&&(this.content_=i),this.content_},"content"),a.conditionalFocus_=/* @__PURE__ */__name(function conditionalFocus_(){var i=An.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(i)||a===i)&&(this.previouslyActiveEl_=i,this.focus())},"conditionalFocus_"),a.conditionalBlur_=/* @__PURE__ */__name(function conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},"conditionalBlur_"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(i){if(i.stopPropagation(),rx.isEventKey(i,"Escape")&&this.closeable())return i.preventDefault(),void this.close();if(rx.isEventKey(i,"Tab")){for(var a,s=this.focusableEls_(),o=this.el_.querySelector(":focus"),u=0;u<s.length;u++)if(o===s[u]){a=u;break}An.activeElement===this.el_&&(a=0),i.shiftKey&&0===a?(s[s.length-1].focus(),i.preventDefault()):i.shiftKey||a!==s.length-1||(s[0].focus(),i.preventDefault())}},"handleKeyDown"),a.focusableEls_=/* @__PURE__ */__name(function focusableEls_(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(i){return(i instanceof Tn.HTMLAnchorElement||i instanceof Tn.HTMLAreaElement)&&i.hasAttribute("href")||(i instanceof Tn.HTMLInputElement||i instanceof Tn.HTMLSelectElement||i instanceof Tn.HTMLTextAreaElement||i instanceof Tn.HTMLButtonElement)&&!i.hasAttribute("disabled")||i instanceof Tn.HTMLIFrameElement||i instanceof Tn.HTMLObjectElement||i instanceof Tn.HTMLEmbedElement||i.hasAttribute("tabindex")&&-1!==i.getAttribute("tabindex")||i.hasAttribute("contenteditable")})},"focusableEls_"),ModalDialog2}(FE);HE.prototype.options_={pauseOnOpen:!0,temporary:!0},FE.registerComponent("ModalDialog",HE);var $E=/* @__PURE__ */function(i){function TrackList2(a){var s;void 0===a&&(a=[]),(s=i.call(this)||this).tracks_=[],Object.defineProperty(_assertThisInitialized(s),"length",{get:/* @__PURE__ */__name(function get2(){return this.tracks_.length},"get")});for(var o=0;o<a.length;o++)s.addTrack(a[o]);return s}_inheritsLoose(TrackList2,i),__name(TrackList2,"TrackList");var a=TrackList2.prototype;return a.addTrack=/* @__PURE__ */__name(function addTrack(i){var a=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:/* @__PURE__ */__name(function get2(){return this.tracks_[s]},"get")}),-1===this.tracks_.indexOf(i)&&(this.tracks_.push(i),this.trigger({track:i,type:"addtrack",target:this})),i.labelchange_=function(){a.trigger({track:i,type:"labelchange",target:a})},bE(i)&&i.addEventListener("labelchange",i.labelchange_)},"addTrack"),a.removeTrack=/* @__PURE__ */__name(function removeTrack(i){for(var a,s=0,o=this.length;s<o;s++)if(this[s]===i){(a=this[s]).off&&a.off(),this.tracks_.splice(s,1);break}a&&this.trigger({track:a,type:"removetrack",target:this})},"removeTrack"),a.getTrackById=/* @__PURE__ */__name(function getTrackById(i){for(var a=null,s=0,o=this.length;s<o;s++){var u=this[s];if(u.id===i){a=u;break}}return a},"getTrackById"),TrackList2}(yE);for(var GE in $E.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},$E.prototype.allowedEvents_)$E.prototype["on"+GE]=null;var WE=/* @__PURE__ */__name(function disableOthers2(i,a){for(var s=0;s<i.length;s++)Object.keys(i[s]).length&&a.id!==i[s].id&&(i[s].enabled=!1)},"disableOthers"),qE=/* @__PURE__ */function(i){function AudioTrackList2(a){var s;void 0===a&&(a=[]);for(var o=a.length-1;o>=0;o--)if(a[o].enabled){WE(a,a[o]);break}return(s=i.call(this,a)||this).changing_=!1,s}_inheritsLoose(AudioTrackList2,i),__name(AudioTrackList2,"AudioTrackList");var a=AudioTrackList2.prototype;return a.addTrack=/* @__PURE__ */__name(function addTrack(a){var s=this;a.enabled&&WE(this,a),i.prototype.addTrack.call(this,a),a.addEventListener&&(a.enabledChange_=function(){s.changing_||(s.changing_=!0,WE(s,a),s.changing_=!1,s.trigger("change"))},a.addEventListener("enabledchange",a.enabledChange_))},"addTrack"),a.removeTrack=/* @__PURE__ */__name(function removeTrack(a){i.prototype.removeTrack.call(this,a),a.removeEventListener&&a.enabledChange_&&(a.removeEventListener("enabledchange",a.enabledChange_),a.enabledChange_=null)},"removeTrack"),AudioTrackList2}($E),XE=/* @__PURE__ */__name(function disableOthers2(i,a){for(var s=0;s<i.length;s++)Object.keys(i[s]).length&&a.id!==i[s].id&&(i[s].selected=!1)},"disableOthers"),QE=/* @__PURE__ */function(i){function VideoTrackList2(a){var s;void 0===a&&(a=[]);for(var o=a.length-1;o>=0;o--)if(a[o].selected){XE(a,a[o]);break}return(s=i.call(this,a)||this).changing_=!1,Object.defineProperty(_assertThisInitialized(s),"selectedIndex",{get:/* @__PURE__ */__name(function get2(){for(var i=0;i<this.length;i++)if(this[i].selected)return i;return-1},"get"),set:/* @__PURE__ */__name(function set2(){},"set")}),s}_inheritsLoose(VideoTrackList2,i),__name(VideoTrackList2,"VideoTrackList");var a=VideoTrackList2.prototype;return a.addTrack=/* @__PURE__ */__name(function addTrack(a){var s=this;a.selected&&XE(this,a),i.prototype.addTrack.call(this,a),a.addEventListener&&(a.selectedChange_=function(){s.changing_||(s.changing_=!0,XE(s,a),s.changing_=!1,s.trigger("change"))},a.addEventListener("selectedchange",a.selectedChange_))},"addTrack"),a.removeTrack=/* @__PURE__ */__name(function removeTrack(a){i.prototype.removeTrack.call(this,a),a.removeEventListener&&a.selectedChange_&&(a.removeEventListener("selectedchange",a.selectedChange_),a.selectedChange_=null)},"removeTrack"),VideoTrackList2}($E),KE=/* @__PURE__ */function(i){function TextTrackList2(){return i.apply(this,arguments)||this}_inheritsLoose(TextTrackList2,i),__name(TextTrackList2,"TextTrackList");var a=TextTrackList2.prototype;return a.addTrack=/* @__PURE__ */__name(function addTrack(a){var s=this;i.prototype.addTrack.call(this,a),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),a.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(a.kind)&&a.addEventListener("modechange",this.triggerSelectedlanguagechange_)},"addTrack"),a.removeTrack=/* @__PURE__ */__name(function removeTrack(a){i.prototype.removeTrack.call(this,a),a.removeEventListener&&(this.queueChange_&&a.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&a.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},"removeTrack"),TextTrackList2}($E),YE=/* @__PURE__ */function(){function HtmlTrackElementList2(i){void 0===i&&(i=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:/* @__PURE__ */__name(function get2(){return this.trackElements_.length},"get")});for(var a=0,s=i.length;a<s;a++)this.addTrackElement_(i[a])}__name(HtmlTrackElementList2,"HtmlTrackElementList");var i=HtmlTrackElementList2.prototype;return i.addTrackElement_=/* @__PURE__ */__name(function addTrackElement_(i){var a=this.trackElements_.length;""+a in this||Object.defineProperty(this,a,{get:/* @__PURE__ */__name(function get2(){return this.trackElements_[a]},"get")}),-1===this.trackElements_.indexOf(i)&&this.trackElements_.push(i)},"addTrackElement_"),i.getTrackElementByTrack_=/* @__PURE__ */__name(function getTrackElementByTrack_(i){for(var a,s=0,o=this.trackElements_.length;s<o;s++)if(i===this.trackElements_[s].track){a=this.trackElements_[s];break}return a},"getTrackElementByTrack_"),i.removeTrackElement_=/* @__PURE__ */__name(function removeTrackElement_(i){for(var a=0,s=this.trackElements_.length;a<s;a++)if(i===this.trackElements_[a]){this.trackElements_[a].track&&"function"==typeof this.trackElements_[a].track.off&&this.trackElements_[a].track.off(),"function"==typeof this.trackElements_[a].off&&this.trackElements_[a].off(),this.trackElements_.splice(a,1);break}},"removeTrackElement_"),HtmlTrackElementList2}(),JE=/* @__PURE__ */function(){function TextTrackCueList2(i){TextTrackCueList2.prototype.setCues_.call(this,i),Object.defineProperty(this,"length",{get:/* @__PURE__ */__name(function get2(){return this.length_},"get")})}__name(TextTrackCueList2,"TextTrackCueList");var i=TextTrackCueList2.prototype;return i.setCues_=/* @__PURE__ */__name(function setCues_(i){var a=this.length||0,s=0,o=i.length;this.cues_=i,this.length_=i.length;var u=/* @__PURE__ */__name(function defineProp2(i){""+i in this||Object.defineProperty(this,""+i,{get:/* @__PURE__ */__name(function get2(){return this.cues_[i]},"get")})},"defineProp");if(a<o)for(s=a;s<o;s++)u.call(this,s)},"setCues_"),i.getCueById=/* @__PURE__ */__name(function getCueById(i){for(var a=null,s=0,o=this.length;s<o;s++){var u=this[s];if(u.id===i){a=u;break}}return a},"getCueById"),TextTrackCueList2}(),ZE={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},eM={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},tM={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},nM={disabled:"disabled",hidden:"hidden",showing:"showing"},iM=/* @__PURE__ */function(i){function Track2(a){var s;void 0===a&&(a={}),s=i.call(this)||this;var o={id:a.id||"vjs_track_"+newGUID(),kind:a.kind||"",language:a.language||""},u=a.label||"",_=/* @__PURE__ */__name(function _loop2(i){Object.defineProperty(_assertThisInitialized(s),i,{get:/* @__PURE__ */__name(function get2(){return o[i]},"get"),set:/* @__PURE__ */__name(function set2(){},"set")})},"_loop");for(var x in o)_(x);return Object.defineProperty(_assertThisInitialized(s),"label",{get:/* @__PURE__ */__name(function get2(){return u},"get"),set:/* @__PURE__ */__name(function set2(i){i!==u&&(u=i,this.trigger("labelchange"))},"set")}),s}return _inheritsLoose(Track2,i),__name(Track2,"Track"),Track2}(yE),rM=/* @__PURE__ */__name(function parseUrl2(i){var a=["protocol","hostname","port","pathname","search","hash","host"],s=An.createElement("a");s.href=i;for(var o={},u=0;u<a.length;u++)o[a[u]]=s[a[u]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),o.protocol||(o.protocol=Tn.location.protocol),o.host||(o.host=Tn.location.host),o},"parseUrl"),aM=/* @__PURE__ */__name(function getAbsoluteURL2(i){if(!i.match(/^https?:\/\//)){var a=An.createElement("a");a.href=i,i=a.href}return i},"getAbsoluteURL"),sM=/* @__PURE__ */__name(function getFileExtension2(i){if("string"==typeof i){var a=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(i);if(a)return a.pop().toLowerCase()}return""},"getFileExtension"),oM=/* @__PURE__ */__name(function isCrossOrigin2(i,a){void 0===a&&(a=Tn.location);var s=rM(i);return(":"===s.protocol?a.protocol:s.protocol)+s.host!==a.protocol+a.host},"isCrossOrigin"),lM=/* @__PURE__ */Object.freeze({__proto__:null,parseUrl:rM,getAbsoluteURL:aM,getFileExtension:sM,isCrossOrigin:oM}),cM=/* @__PURE__ */__name(function parseCues2(i,a){var s=new Tn.WebVTT.Parser(Tn,Tn.vttjs,Tn.WebVTT.StringDecoder()),o=[];s.oncue=function(i){a.addCue(i)},s.onparsingerror=function(i){o.push(i)},s.onflush=function(){a.trigger({type:"loadeddata",target:a})},s.parse(i),o.length>0&&(Tn.console&&Tn.console.groupCollapsed&&Tn.console.groupCollapsed("Text Track parsing errors for "+a.src),o.forEach(function(i){return wC.error(i)}),Tn.console&&Tn.console.groupEnd&&Tn.console.groupEnd()),s.flush()},"parseCues"),uM=/* @__PURE__ */__name(function loadTrack2(i,a){var s={uri:i},o=oM(i);o&&(s.cors=o);var u="use-credentials"===a.tech_.crossOrigin();u&&(s.withCredentials=u),hx(s,fE(this,function(i,s,o){if(i)return wC.error(i,s);a.loaded_=!0,"function"!=typeof Tn.WebVTT?a.tech_&&a.tech_.any(["vttjsloaded","vttjserror"],function(i){if("vttjserror"!==i.type)return cM(o,a);wC.error("vttjs failed to load, stopping trying to process "+a.src)}):cM(o,a)}))},"loadTrack"),dM=/* @__PURE__ */function(i){function TextTrack2(a){var s;if(void 0===a&&(a={}),!a.tech)throw new Error("A tech was not provided.");var o=mergeOptions$3(a,{kind:tM[a.kind]||"subtitles",language:a.language||a.srclang||""}),u=nM[o.mode]||"disabled",_=o.default;"metadata"!==o.kind&&"chapters"!==o.kind||(u="hidden"),(s=i.call(this,o)||this).tech_=o.tech,s.cues_=[],s.activeCues_=[],s.preload_=!1!==s.tech_.preloadTextTracks;var x=new JE(s.cues_),w=new JE(s.activeCues_),C=!1;s.timeupdateHandler=fE(_assertThisInitialized(s),function(i){void 0===i&&(i={}),this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,C&&(this.trigger("cuechange"),C=!1),"timeupdate"!==i.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==i.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))});var L=/* @__PURE__ */__name(function disposeHandler2(){s.stopTracking()},"disposeHandler");return s.tech_.one("dispose",L),"disabled"!==u&&s.startTracking(),Object.defineProperties(_assertThisInitialized(s),{default:{get:/* @__PURE__ */__name(function get2(){return _},"get"),set:/* @__PURE__ */__name(function set2(){},"set")},mode:{get:/* @__PURE__ */__name(function get2(){return u},"get"),set:/* @__PURE__ */__name(function set2(i){nM[i]&&u!==i&&(u=i,this.preload_||"disabled"===u||0!==this.cues.length||uM(this.src,this),this.stopTracking(),"disabled"!==u&&this.startTracking(),this.trigger("modechange"))},"set")},cues:{get:/* @__PURE__ */__name(function get2(){return this.loaded_?x:null},"get"),set:/* @__PURE__ */__name(function set2(){},"set")},activeCues:{get:/* @__PURE__ */__name(function get2(){if(!this.loaded_)return null;if(0===this.cues.length)return w;for(var i=this.tech_.currentTime(),a=[],s=0,o=this.cues.length;s<o;s++){var u=this.cues[s];(u.startTime<=i&&u.endTime>=i||u.startTime===u.endTime&&u.startTime<=i&&u.startTime+.5>=i)&&a.push(u)}if(C=!1,a.length!==this.activeCues_.length)C=!0;else for(var _=0;_<a.length;_++)-1===this.activeCues_.indexOf(a[_])&&(C=!0);return this.activeCues_=a,w.setCues_(this.activeCues_),w},"get"),set:/* @__PURE__ */__name(function set2(){},"set")}}),o.src?(s.src=o.src,s.preload_||(s.loaded_=!0),(s.preload_||"subtitles"!==o.kind&&"captions"!==o.kind)&&uM(s.src,_assertThisInitialized(s))):s.loaded_=!0,s}_inheritsLoose(TextTrack2,i),__name(TextTrack2,"TextTrack");var a=TextTrack2.prototype;return a.startTracking=/* @__PURE__ */__name(function startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},"startTracking"),a.stopTracking=/* @__PURE__ */__name(function stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},"stopTracking"),a.addCue=/* @__PURE__ */__name(function addCue(i){var a=i;if(!("getCueAsHTML"in a)){for(var s in a=new Tn.vttjs.VTTCue(i.startTime,i.endTime,i.text),i)s in a||(a[s]=i[s]);a.id=i.id,a.originalCue_=i}for(var o=this.tech_.textTracks(),u=0;u<o.length;u++)o[u]!==this&&o[u].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},"addCue"),a.removeCue=/* @__PURE__ */__name(function removeCue(i){for(var a=this.cues_.length;a--;){var s=this.cues_[a];if(s===i||s.originalCue_&&s.originalCue_===i){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},"removeCue"),TextTrack2}(iM);dM.prototype.allowedEvents_={cuechange:"cuechange"};var hM=/* @__PURE__ */function(i){function AudioTrack2(a){var s;void 0===a&&(a={});var o=mergeOptions$3(a,{kind:eM[a.kind]||""});s=i.call(this,o)||this;var u=!1;return Object.defineProperty(_assertThisInitialized(s),"enabled",{get:/* @__PURE__ */__name(function get2(){return u},"get"),set:/* @__PURE__ */__name(function set2(i){"boolean"==typeof i&&i!==u&&(u=i,this.trigger("enabledchange"))},"set")}),o.enabled&&(s.enabled=o.enabled),s.loaded_=!0,s}return _inheritsLoose(AudioTrack2,i),__name(AudioTrack2,"AudioTrack"),AudioTrack2}(iM),pM=/* @__PURE__ */function(i){function VideoTrack2(a){var s;void 0===a&&(a={});var o=mergeOptions$3(a,{kind:ZE[a.kind]||""});s=i.call(this,o)||this;var u=!1;return Object.defineProperty(_assertThisInitialized(s),"selected",{get:/* @__PURE__ */__name(function get2(){return u},"get"),set:/* @__PURE__ */__name(function set2(i){"boolean"==typeof i&&i!==u&&(u=i,this.trigger("selectedchange"))},"set")}),o.selected&&(s.selected=o.selected),s}return _inheritsLoose(VideoTrack2,i),__name(VideoTrack2,"VideoTrack"),VideoTrack2}(iM),mM=/* @__PURE__ */function(i){function HTMLTrackElement2(a){var s,o;void 0===a&&(a={}),s=i.call(this)||this;var u=new dM(a);return s.kind=u.kind,s.src=u.src,s.srclang=u.language,s.label=u.label,s.default=u.default,Object.defineProperties(_assertThisInitialized(s),{readyState:{get:/* @__PURE__ */__name(function get2(){return o},"get")},track:{get:/* @__PURE__ */__name(function get2(){return u},"get")}}),o=0,u.addEventListener("loadeddata",function(){o=2,s.trigger({type:"load",target:_assertThisInitialized(s)})}),s}return _inheritsLoose(HTMLTrackElement2,i),__name(HTMLTrackElement2,"HTMLTrackElement"),HTMLTrackElement2}(yE);mM.prototype.allowedEvents_={load:"load"},mM.NONE=0,mM.LOADING=1,mM.LOADED=2,mM.ERROR=3;var fM={audio:{ListClass:qE,TrackClass:hM,capitalName:"Audio"},video:{ListClass:QE,TrackClass:pM,capitalName:"Video"},text:{ListClass:KE,TrackClass:dM,capitalName:"Text"}};Object.keys(fM).forEach(function(i){fM[i].getterName=i+"Tracks",fM[i].privateName=i+"Tracks_"});var gM={remoteText:{ListClass:KE,TrackClass:dM,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:YE,TrackClass:mM,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},_M=_extends({},fM,gM);function createTrackHelper(i,a,s,o,u){void 0===u&&(u={});var _=i.textTracks();u.kind=a,s&&(u.label=s),o&&(u.language=o),u.tech=i;var x=new _M.text.TrackClass(u);return _.addTrack(x),x}gM.names=Object.keys(gM),fM.names=Object.keys(fM),_M.names=[].concat(gM.names).concat(fM.names),__name(createTrackHelper,"createTrackHelper");var yM=/* @__PURE__ */function(i){function Tech2(a,s){var o;return void 0===a&&(a={}),void 0===s&&(s=/* @__PURE__ */__name(function ready2(){},"ready")),a.reportTouchActivity=!1,(o=i.call(this,null,a,s)||this).onDurationChange_=function(i){return o.onDurationChange(i)},o.trackProgress_=function(i){return o.trackProgress(i)},o.trackCurrentTime_=function(i){return o.trackCurrentTime(i)},o.stopTrackingCurrentTime_=function(i){return o.stopTrackingCurrentTime(i)},o.disposeSourceHandler_=function(i){return o.disposeSourceHandler(i)},o.queuedHanders_=/* @__PURE__ */new Set,o.hasStarted_=!1,o.on("playing",function(){this.hasStarted_=!0}),o.on("loadstart",function(){this.hasStarted_=!1}),_M.names.forEach(function(i){var s=_M[i];a&&a[s.getterName]&&(o[s.privateName]=a[s.getterName])}),o.featuresProgressEvents||o.manualProgressOn(),o.featuresTimeupdateEvents||o.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(i){!1===a["native"+i+"Tracks"]&&(o["featuresNative"+i+"Tracks"]=!1)}),!1===a.nativeCaptions||!1===a.nativeTextTracks?o.featuresNativeTextTracks=!1:!0!==a.nativeCaptions&&!0!==a.nativeTextTracks||(o.featuresNativeTextTracks=!0),o.featuresNativeTextTracks||o.emulateTextTracks(),o.preloadTextTracks=!1!==a.preloadTextTracks,o.autoRemoteTextTracks_=new _M.text.ListClass,o.initTrackListeners(),a.nativeControlsForTouch||o.emitTapEvents(),o.constructor&&(o.name_=o.constructor.name||"Unknown Tech"),o}_inheritsLoose(Tech2,i),__name(Tech2,"Tech");var a=Tech2.prototype;return a.triggerSourceset=/* @__PURE__ */__name(function triggerSourceset(i){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(i)},1)}),this.trigger({src:i,type:"sourceset"})},"triggerSourceset"),a.manualProgressOn=/* @__PURE__ */__name(function manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},"manualProgressOn"),a.manualProgressOff=/* @__PURE__ */__name(function manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},"manualProgressOff"),a.trackProgress=/* @__PURE__ */__name(function trackProgress(i){this.stopTrackingProgress(),this.progressInterval=this.setInterval(fE(this,function(){var i=this.bufferedPercent();this.bufferedPercent_!==i&&this.trigger("progress"),this.bufferedPercent_=i,1===i&&this.stopTrackingProgress()}),500)},"trackProgress"),a.onDurationChange=/* @__PURE__ */__name(function onDurationChange(i){this.duration_=this.duration()},"onDurationChange"),a.buffered=/* @__PURE__ */__name(function buffered(){return createTimeRanges(0,0)},"buffered"),a.bufferedPercent=/* @__PURE__ */__name(function bufferedPercent$12(){return bufferedPercent(this.buffered(),this.duration_)},"bufferedPercent$1"),a.stopTrackingProgress=/* @__PURE__ */__name(function stopTrackingProgress(){this.clearInterval(this.progressInterval)},"stopTrackingProgress"),a.manualTimeUpdatesOn=/* @__PURE__ */__name(function manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},"manualTimeUpdatesOn"),a.manualTimeUpdatesOff=/* @__PURE__ */__name(function manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},"manualTimeUpdatesOff"),a.trackCurrentTime=/* @__PURE__ */__name(function trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},"trackCurrentTime"),a.stopTrackingCurrentTime=/* @__PURE__ */__name(function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},"stopTrackingCurrentTime"),a.dispose=/* @__PURE__ */__name(function dispose(){this.clearTracks(fM.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),i.prototype.dispose.call(this)},"dispose"),a.clearTracks=/* @__PURE__ */__name(function clearTracks2(i){var a=this;(i=[].concat(i)).forEach(function(i){for(var s=a[i+"Tracks"]()||[],o=s.length;o--;){var u=s[o];"text"===i&&a.removeRemoteTextTrack(u),s.removeTrack(u)}})},"clearTracks"),a.cleanupAutoTextTracks=/* @__PURE__ */__name(function cleanupAutoTextTracks(){for(var i=this.autoRemoteTextTracks_||[],a=i.length;a--;){var s=i[a];this.removeRemoteTextTrack(s)}},"cleanupAutoTextTracks"),a.reset=/* @__PURE__ */__name(function reset2(){},"reset"),a.crossOrigin=/* @__PURE__ */__name(function crossOrigin(){},"crossOrigin"),a.setCrossOrigin=/* @__PURE__ */__name(function setCrossOrigin(){},"setCrossOrigin"),a.error=/* @__PURE__ */__name(function error(i){return void 0!==i&&(this.error_=new MediaError(i),this.trigger("error")),this.error_},"error"),a.played=/* @__PURE__ */__name(function played(){return this.hasStarted_?createTimeRanges(0,0):createTimeRanges()},"played"),a.play=/* @__PURE__ */__name(function play(){},"play"),a.setScrubbing=/* @__PURE__ */__name(function setScrubbing(){},"setScrubbing"),a.scrubbing=/* @__PURE__ */__name(function scrubbing(){},"scrubbing"),a.setCurrentTime=/* @__PURE__ */__name(function setCurrentTime(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},"setCurrentTime"),a.initTrackListeners=/* @__PURE__ */__name(function initTrackListeners(){var i=this;fM.names.forEach(function(a){var s=fM[a],o=/* @__PURE__ */__name(function trackListChanges2(){i.trigger(a+"trackchange")},"trackListChanges"),u=i[s.getterName]();u.addEventListener("removetrack",o),u.addEventListener("addtrack",o),i.on("dispose",function(){u.removeEventListener("removetrack",o),u.removeEventListener("addtrack",o)})})},"initTrackListeners"),a.addWebVttScript_=/* @__PURE__ */__name(function addWebVttScript_(){var i=this;if(!Tn.WebVTT)if(An.body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(qn)&&Object.keys(qn).length>0)return void this.trigger("vttjsloaded");var a=An.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=function(){i.trigger("vttjsloaded")},a.onerror=function(){i.trigger("vttjserror")},this.on("dispose",function(){a.onload=null,a.onerror=null}),Tn.WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)},"addWebVttScript_"),a.emulateTextTracks=/* @__PURE__ */__name(function emulateTextTracks(){var i=this,a=this.textTracks(),s=this.remoteTextTracks(),o=/* @__PURE__ */__name(function handleAddTrack2(i){return a.addTrack(i.track)},"handleAddTrack"),u=/* @__PURE__ */__name(function handleRemoveTrack2(i){return a.removeTrack(i.track)},"handleRemoveTrack");s.on("addtrack",o),s.on("removetrack",u),this.addWebVttScript_();var _=/* @__PURE__ */__name(function updateDisplay2(){return i.trigger("texttrackchange")},"updateDisplay"),x=/* @__PURE__ */__name(function textTracksChanges2(){_();for(var i=0;i<a.length;i++){var s=a[i];s.removeEventListener("cuechange",_),"showing"===s.mode&&s.addEventListener("cuechange",_)}},"textTracksChanges");x(),a.addEventListener("change",x),a.addEventListener("addtrack",x),a.addEventListener("removetrack",x),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",u),a.removeEventListener("change",x),a.removeEventListener("addtrack",x),a.removeEventListener("removetrack",x);for(var i=0;i<a.length;i++){a[i].removeEventListener("cuechange",_)}})},"emulateTextTracks"),a.addTextTrack=/* @__PURE__ */__name(function addTextTrack(i,a,s){if(!i)throw new Error("TextTrack kind is required but was not provided");return createTrackHelper(this,i,a,s)},"addTextTrack"),a.createRemoteTextTrack=/* @__PURE__ */__name(function createRemoteTextTrack(i){var a=mergeOptions$3(i,{tech:this});return new gM.remoteTextEl.TrackClass(a)},"createRemoteTextTrack"),a.addRemoteTextTrack=/* @__PURE__ */__name(function addRemoteTextTrack(i,a){var s=this;void 0===i&&(i={});var o=this.createRemoteTextTrack(i);return!0!==a&&!1!==a&&(wC.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),!0!==a&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},"addRemoteTextTrack"),a.removeRemoteTextTrack=/* @__PURE__ */__name(function removeRemoteTextTrack(i){var a=this.remoteTextTrackEls().getTrackElementByTrack_(i);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(i),this.autoRemoteTextTracks_.removeTrack(i)},"removeRemoteTextTrack"),a.getVideoPlaybackQuality=/* @__PURE__ */__name(function getVideoPlaybackQuality(){return{}},"getVideoPlaybackQuality"),a.requestPictureInPicture=/* @__PURE__ */__name(function requestPictureInPicture(){var i=this.options_.Promise||Tn.Promise;if(i)return i.reject()},"requestPictureInPicture"),a.disablePictureInPicture=/* @__PURE__ */__name(function disablePictureInPicture(){return!0},"disablePictureInPicture"),a.setDisablePictureInPicture=/* @__PURE__ */__name(function setDisablePictureInPicture(){},"setDisablePictureInPicture"),a.requestVideoFrameCallback=/* @__PURE__ */__name(function requestVideoFrameCallback(i){var a=this,s=newGUID();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){a.queuedHanders_.has(s)&&(a.queuedHanders_.delete(s),i())})):this.requestNamedAnimationFrame(s,i),s},"requestVideoFrameCallback"),a.cancelVideoFrameCallback=/* @__PURE__ */__name(function cancelVideoFrameCallback(i){this.queuedHanders_.has(i)?this.queuedHanders_.delete(i):this.cancelNamedAnimationFrame(i)},"cancelVideoFrameCallback"),a.setPoster=/* @__PURE__ */__name(function setPoster(){},"setPoster"),a.playsinline=/* @__PURE__ */__name(function playsinline(){},"playsinline"),a.setPlaysinline=/* @__PURE__ */__name(function setPlaysinline(){},"setPlaysinline"),a.overrideNativeAudioTracks=/* @__PURE__ */__name(function overrideNativeAudioTracks(){},"overrideNativeAudioTracks"),a.overrideNativeVideoTracks=/* @__PURE__ */__name(function overrideNativeVideoTracks(){},"overrideNativeVideoTracks"),a.canPlayType=/* @__PURE__ */__name(function canPlayType2(){return""},"canPlayType"),Tech2.canPlayType=/* @__PURE__ */__name(function canPlayType2(){return""},"canPlayType"),Tech2.canPlaySource=/* @__PURE__ */__name(function canPlaySource(i,a){return Tech2.canPlayType(i.type)},"canPlaySource"),Tech2.isTech=/* @__PURE__ */__name(function isTech(i){return i.prototype instanceof Tech2||i instanceof Tech2||i===Tech2},"isTech"),Tech2.registerTech=/* @__PURE__ */__name(function registerTech(i,a){if(Tech2.techs_||(Tech2.techs_={}),!Tech2.isTech(a))throw new Error("Tech "+i+" must be a Tech");if(!Tech2.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Tech2.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return i=LE(i),Tech2.techs_[i]=a,Tech2.techs_[IE(i)]=a,"Tech"!==i&&Tech2.defaultTechOrder_.push(i),a},"registerTech"),Tech2.getTech=/* @__PURE__ */__name(function getTech(i){if(i)return Tech2.techs_&&Tech2.techs_[i]?Tech2.techs_[i]:(i=LE(i),Tn&&Tn.videojs&&Tn.videojs[i]?(wC.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Tn.videojs[i]):void 0)},"getTech"),Tech2}(FE);_M.names.forEach(function(i){var a=_M[i];yM.prototype[a.getterName]=function(){return this[a.privateName]=this[a.privateName]||new a.ListClass,this[a.privateName]}}),yM.prototype.featuresVolumeControl=!0,yM.prototype.featuresMuteControl=!0,yM.prototype.featuresFullscreenResize=!1,yM.prototype.featuresPlaybackRate=!1,yM.prototype.featuresProgressEvents=!1,yM.prototype.featuresSourceset=!1,yM.prototype.featuresTimeupdateEvents=!1,yM.prototype.featuresNativeTextTracks=!1,yM.prototype.featuresVideoFrameCallback=!1,yM.withSourceHandlers=function(i){i.registerSourceHandler=function(a,s){var o=i.sourceHandlers;o||(o=i.sourceHandlers=[]),void 0===s&&(s=o.length),o.splice(s,0,a)},i.canPlayType=function(a){for(var s,o=i.sourceHandlers||[],u=0;u<o.length;u++)if(s=o[u].canPlayType(a))return s;return""},i.selectSourceHandler=function(a,s){for(var o=i.sourceHandlers||[],u=0;u<o.length;u++)if(o[u].canHandleSource(a,s))return o[u];return null},i.canPlaySource=function(a,s){var o=i.selectSourceHandler(a,s);return o?o.canHandleSource(a,s):""};["seekable","seeking","duration"].forEach(function(i){var a=this[i];"function"==typeof a&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):a.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(a){var s=i.selectSourceHandler(a,this.options_);s||(i.nativeSourceHandler?s=i.nativeSourceHandler:wC.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),s!==i.nativeSourceHandler&&(this.currentSource_=a),this.sourceHandler_=s.handleSource(a,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},FE.registerComponent("Tech",yM),yM.registerTech("Tech",yM),yM.defaultTechOrder_=[];var vM={},bM={},TM={};function use(i,a){vM[i]=vM[i]||[],vM[i].push(a)}function setSource(i,a,s){i.setTimeout(function(){return setSourceHelper(a,vM[a.type],s,i)},1)}function setTech(i,a){i.forEach(function(i){return i.setTech&&i.setTech(a)})}function get(i,a,s){return i.reduceRight(middlewareIterator(s),a[s]())}function set(i,a,s,o){return a[s](i.reduce(middlewareIterator(s),o))}function mediate(i,a,s,o){void 0===o&&(o=null);var u="call"+LE(s),_=i.reduce(middlewareIterator(u),o),x=_===TM,w=x?null:a[s](_);return executeRight(i,s,w,x),w}__name(use,"use"),__name(setSource,"setSource"),__name(setTech,"setTech"),__name(get,"get"),__name(set,"set"),__name(mediate,"mediate");var SM={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},xM={setCurrentTime:1,setMuted:1,setVolume:1},wM={play:1,pause:1};function middlewareIterator(i){return function(a,s){return a===TM?TM:s[i]?s[i](a):a}}function executeRight(i,a,s,o){for(var u=i.length-1;u>=0;u--){var _=i[u];_[a]&&_[a](o,s)}}function clearCacheForPlayer(i){bM[i.id()]=null}function getOrCreateFactory(i,a){var s=bM[i.id()],o=null;if(null==s)return o=a(i),bM[i.id()]=[[a,o]],o;for(var u=0;u<s.length;u++){var _=s[u],x=_[0],w=_[1];x===a&&(o=w)}return null===o&&(o=a(i),s.push([a,o])),o}function setSourceHelper(i,a,s,o,u,_){void 0===i&&(i={}),void 0===a&&(a=[]),void 0===u&&(u=[]),void 0===_&&(_=!1);var x=a,w=x[0],C=x.slice(1);if("string"==typeof w)setSourceHelper(i,vM[w],s,o,u,_);else if(w){var L=getOrCreateFactory(o,w);if(!L.setSource)return u.push(L),setSourceHelper(i,C,s,o,u,_);L.setSource(assign({},i),function(a,x){if(a)return setSourceHelper(i,C,s,o,u,_);u.push(L),setSourceHelper(x,i.type===x.type?C:vM[x.type],s,o,u,_)})}else C.length?setSourceHelper(i,C,s,o,u,_):_?s(i,u):setSourceHelper(i,vM["*"],s,o,u,!0)}__name(middlewareIterator,"middlewareIterator"),__name(executeRight,"executeRight"),__name(clearCacheForPlayer,"clearCacheForPlayer"),__name(getOrCreateFactory,"getOrCreateFactory"),__name(setSourceHelper,"setSourceHelper");var AM={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},CM=/* @__PURE__ */__name(function getMimetype2(i){void 0===i&&(i="");var a=sM(i);return AM[a.toLowerCase()]||""},"getMimetype"),EM=/* @__PURE__ */__name(function findMimetype2(i,a){if(!a)return"";if(i.cache_.source.src===a&&i.cache_.source.type)return i.cache_.source.type;var s=i.cache_.sources.filter(function(i){return i.src===a});if(s.length)return s[0].type;for(var o=i.$$("source"),u=0;u<o.length;u++){var _=o[u];if(_.type&&_.src&&_.src===a)return _.type}return CM(a)},"findMimetype"),MM=/* @__PURE__ */__name(function filterSource2(i){if(Array.isArray(i)){var a=[];i.forEach(function(i){i=filterSource2(i),Array.isArray(i)?a=a.concat(i):isObject(i)&&a.push(i)}),i=a}else i="string"==typeof i&&i.trim()?[fixSource({src:i})]:isObject(i)&&"string"==typeof i.src&&i.src&&i.src.trim()?[fixSource(i)]:[];return i},"filterSource");function fixSource(i){if(!i.type){var a=CM(i.src);a&&(i.type=a)}return i}__name(fixSource,"fixSource");var kM=/* @__PURE__ */function(i){function MediaLoader2(a,s,o){var u,_=mergeOptions$3({createEl:!1},s);if(u=i.call(this,a,_,o)||this,s.playerOptions.sources&&0!==s.playerOptions.sources.length)a.src(s.playerOptions.sources);else for(var x=0,w=s.playerOptions.techOrder;x<w.length;x++){var C=LE(w[x]),L=yM.getTech(C);if(C||(L=FE.getComponent(C)),L&&L.isSupported()){a.loadTech_(C);break}}return u}return _inheritsLoose(MediaLoader2,i),__name(MediaLoader2,"MediaLoader"),MediaLoader2}(FE);FE.registerComponent("MediaLoader",kM);var PM=/* @__PURE__ */function(i){function ClickableComponent2(a,s){var o;return(o=i.call(this,a,s)||this).options_.controlText&&o.controlText(o.options_.controlText),o.handleMouseOver_=function(i){return o.handleMouseOver(i)},o.handleMouseOut_=function(i){return o.handleMouseOut(i)},o.handleClick_=function(i){return o.handleClick(i)},o.handleKeyDown_=function(i){return o.handleKeyDown(i)},o.emitTapEvents(),o.enable(),o}_inheritsLoose(ClickableComponent2,i),__name(ClickableComponent2,"ClickableComponent");var a=ClickableComponent2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl$12(i,a,s){void 0===i&&(i="div"),void 0===a&&(a={}),void 0===s&&(s={}),a=assign({className:this.buildCSSClass(),tabIndex:0},a),"button"===i&&wC.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead."),s=assign({role:"button"},s),this.tabIndex_=a.tabIndex;var o=createEl(i,a,s);return o.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},"createEl$1"),a.dispose=/* @__PURE__ */__name(function dispose(){this.controlTextEl_=null,i.prototype.dispose.call(this)},"dispose"),a.createControlTextEl=/* @__PURE__ */__name(function createControlTextEl(i){return this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"}),i&&i.appendChild(this.controlTextEl_),this.controlText(this.controlText_,i),this.controlTextEl_},"createControlTextEl"),a.controlText=/* @__PURE__ */__name(function controlText(i,a){if(void 0===a&&(a=this.el()),void 0===i)return this.controlText_||"Need Text";var s=this.localize(i);this.controlText_=i,textContent(this.controlTextEl_,s),this.nonIconControl||this.player_.options_.noUITitleAttributes||a.setAttribute("title",s)},"controlText"),a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-control vjs-button "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.enable=/* @__PURE__ */__name(function enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},"enable"),a.disable=/* @__PURE__ */__name(function disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},"disable"),a.handleLanguagechange=/* @__PURE__ */__name(function handleLanguagechange(){this.controlText(this.controlText_)},"handleLanguagechange"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},"handleClick"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(a){rx.isEventKey(a,"Space")||rx.isEventKey(a,"Enter")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,a)},"handleKeyDown"),ClickableComponent2}(FE);FE.registerComponent("ClickableComponent",PM);var IM=/* @__PURE__ */function(i){function PosterImage2(a,s){var o;return(o=i.call(this,a,s)||this).update(),o.update_=function(i){return o.update(i)},a.on("posterchange",o.update_),o}_inheritsLoose(PosterImage2,i),__name(PosterImage2,"PosterImage");var a=PosterImage2.prototype;return a.dispose=/* @__PURE__ */__name(function dispose(){this.player().off("posterchange",this.update_),i.prototype.dispose.call(this)},"dispose"),a.createEl=/* @__PURE__ */__name(function createEl$12(){return createEl("div",{className:"vjs-poster",tabIndex:-1})},"createEl$1"),a.update=/* @__PURE__ */__name(function update(i){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},"update"),a.setSrc=/* @__PURE__ */__name(function setSrc(i){var a="";i&&(a='url("'+i+'")'),this.el_.style.backgroundImage=a},"setSrc"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){if(this.player_.controls()){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(HC||jC)&&a||this.player_.tech(!0).focus(),this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()}},"handleClick"),PosterImage2}(PM);FE.registerComponent("PosterImage",IM);var LM="#222",DM={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(i,a){var s;if(4===i.length)s=i[1]+i[1]+i[2]+i[2]+i[3]+i[3];else{if(7!==i.length)throw new Error("Invalid color code provided, "+i+"; must be formatted as e.g. #f0e or #f604e2.");s=i.slice(1)}return"rgba("+parseInt(s.slice(0,2),16)+","+parseInt(s.slice(2,4),16)+","+parseInt(s.slice(4,6),16)+","+a+")"}function tryUpdateStyle(i,a,s){try{i.style[a]=s}catch(o){return}}__name(constructColor,"constructColor"),__name(tryUpdateStyle,"tryUpdateStyle");var RM=/* @__PURE__ */function(i){function TextTrackDisplay2(a,s,o){var u;u=i.call(this,a,s,o)||this;var _=/* @__PURE__ */__name(function updateDisplayHandler2(i){return u.updateDisplay(i)},"updateDisplayHandler");return a.on("loadstart",function(i){return u.toggleDisplay(i)}),a.on("texttrackchange",_),a.on("loadedmetadata",function(i){return u.preselectTrack(i)}),a.ready(fE(_assertThisInitialized(u),function(){if(a.tech_&&a.tech_.featuresNativeTextTracks)this.hide();else{a.on("fullscreenchange",_),a.on("playerresize",_),Tn.addEventListener("orientationchange",_),a.on("dispose",function(){return Tn.removeEventListener("orientationchange",_)});for(var i=this.options_.playerOptions.tracks||[],s=0;s<i.length;s++)this.player_.addRemoteTextTrack(i[s],!0);this.preselectTrack()}})),u}_inheritsLoose(TextTrackDisplay2,i),__name(TextTrackDisplay2,"TextTrackDisplay");var a=TextTrackDisplay2.prototype;return a.preselectTrack=/* @__PURE__ */__name(function preselectTrack(){for(var i,a,s,o={captions:1,subtitles:1},u=this.player_.textTracks(),_=this.player_.cache_.selectedLanguage,x=0;x<u.length;x++){var w=u[x];_&&_.enabled&&_.language&&_.language===w.language&&w.kind in o?w.kind===_.kind?s=w:s||(s=w):_&&!_.enabled?(s=null,i=null,a=null):w.default&&("descriptions"!==w.kind||i?w.kind in o&&!a&&(a=w):i=w)}s?s.mode="showing":a?a.mode="showing":i&&(i.mode="showing")},"preselectTrack"),a.toggleDisplay=/* @__PURE__ */__name(function toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},"toggleDisplay"),a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},"createEl"),a.clearDisplay=/* @__PURE__ */__name(function clearDisplay(){"function"==typeof Tn.WebVTT&&Tn.WebVTT.processCues(Tn,[],this.el_)},"clearDisplay"),a.updateDisplay=/* @__PURE__ */__name(function updateDisplay(){var i=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var s=[],o=0;o<i.length;++o){var u=i[o];"showing"===u.mode&&s.push(u)}this.updateForTrack(s)}else{for(var _=null,x=null,w=i.length;w--;){var C=i[w];"showing"===C.mode&&("descriptions"===C.kind?_=C:x=C)}x?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(x)):_&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(_))}},"updateDisplay"),a.updateDisplayState=/* @__PURE__ */__name(function updateDisplayState(i){for(var a=this.player_.textTrackSettings.getValues(),s=i.activeCues,o=s.length;o--;){var u=s[o];if(u){var _=u.displayState;if(a.color&&(_.firstChild.style.color=a.color),a.textOpacity&&tryUpdateStyle(_.firstChild,"color",constructColor(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(_.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&tryUpdateStyle(_.firstChild,"backgroundColor",constructColor(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?tryUpdateStyle(_,"backgroundColor",constructColor(a.windowColor,a.windowOpacity)):_.style.backgroundColor=a.windowColor),a.edgeStyle&&("dropshadow"===a.edgeStyle?_.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+LM:"raised"===a.edgeStyle?_.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+LM:"depressed"===a.edgeStyle?_.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+LM:"uniform"===a.edgeStyle&&(_.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+LM)),a.fontPercent&&1!==a.fontPercent){var x=Tn.parseFloat(_.style.fontSize);_.style.fontSize=x*a.fontPercent+"px",_.style.height="auto",_.style.top="auto"}a.fontFamily&&"default"!==a.fontFamily&&("small-caps"===a.fontFamily?_.firstChild.style.fontVariant="small-caps":_.firstChild.style.fontFamily=DM[a.fontFamily])}}},"updateDisplayState"),a.updateForTrack=/* @__PURE__ */__name(function updateForTrack(i){if(Array.isArray(i)||(i=[i]),"function"==typeof Tn.WebVTT&&!i.every(function(i){return!i.activeCues})){for(var a=[],s=0;s<i.length;++s)for(var o=i[s],u=0;u<o.activeCues.length;++u)a.push(o.activeCues[u]);Tn.WebVTT.processCues(Tn,a,this.el_);for(var _=0;_<i.length;++_){for(var x=i[_],w=0;w<x.activeCues.length;++w){var C=x.activeCues[w].displayState;addClass(C,"vjs-text-track-cue"),addClass(C,"vjs-text-track-cue-"+(x.language?x.language:_)),x.language&&setAttribute(C,"lang",x.language)}this.player_.textTrackSettings&&this.updateDisplayState(x)}}},"updateForTrack"),TextTrackDisplay2}(FE);FE.registerComponent("TextTrackDisplay",RM);var OM=/* @__PURE__ */function(i){function LoadingSpinner2(){return i.apply(this,arguments)||this}return _inheritsLoose(LoadingSpinner2,i),__name(LoadingSpinner2,"LoadingSpinner"),LoadingSpinner2.prototype.createEl=/* @__PURE__ */__name(function createEl$12(){var a=this.player_.isAudio(),s=this.localize(a?"Audio Player":"Video Player"),o=createEl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),u=i.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return u.appendChild(o),u},"createEl$1"),LoadingSpinner2}(FE);FE.registerComponent("LoadingSpinner",OM);var NM=/* @__PURE__ */function(i){function Button2(){return i.apply(this,arguments)||this}_inheritsLoose(Button2,i),__name(Button2,"Button");var a=Button2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl$12(i,a,s){void 0===a&&(a={}),void 0===s&&(s={});var o=createEl("button",a=assign({className:this.buildCSSClass()},a),s=assign({type:"button"},s));return o.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},"createEl$1"),a.addChild=/* @__PURE__ */__name(function addChild(i,a){void 0===a&&(a={});var s=this.constructor.name;return wC.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),FE.prototype.addChild.call(this,i,a)},"addChild"),a.enable=/* @__PURE__ */__name(function enable(){i.prototype.enable.call(this),this.el_.removeAttribute("disabled")},"enable"),a.disable=/* @__PURE__ */__name(function disable(){i.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},"disable"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(a){rx.isEventKey(a,"Space")||rx.isEventKey(a,"Enter")?a.stopPropagation():i.prototype.handleKeyDown.call(this,a)},"handleKeyDown"),Button2}(PM);FE.registerComponent("Button",NM);var BM=/* @__PURE__ */function(i){function BigPlayButton2(a,s){var o;return(o=i.call(this,a,s)||this).mouseused_=!1,o.on("mousedown",function(i){return o.handleMouseDown(i)}),o}_inheritsLoose(BigPlayButton2,i),__name(BigPlayButton2,"BigPlayButton");var a=BigPlayButton2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-big-play-button"},"buildCSSClass"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){var a=this.player_.play();if(this.mouseused_&&i.clientX&&i.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return silencePromise(a),void(!this.player_.tech(!0)||(HC||jC)&&s||this.player_.tech(!0).focus())}var o=this.player_.getChild("controlBar"),u=o&&o.getChild("playToggle");if(u){var _=/* @__PURE__ */__name(function playFocus2(){return u.focus()},"playFocus");isPromise(a)?a.then(_,function(){}):this.setTimeout(_,1)}else this.player_.tech(!0).focus()},"handleClick"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(a){this.mouseused_=!1,i.prototype.handleKeyDown.call(this,a)},"handleKeyDown"),a.handleMouseDown=/* @__PURE__ */__name(function handleMouseDown(i){this.mouseused_=!0},"handleMouseDown"),BigPlayButton2}(NM);BM.prototype.controlText_="Play Video",FE.registerComponent("BigPlayButton",BM);var FM=/* @__PURE__ */function(i){function CloseButton2(a,s){var o;return(o=i.call(this,a,s)||this).controlText(s&&s.controlText||o.localize("Close")),o}_inheritsLoose(CloseButton2,i),__name(CloseButton2,"CloseButton");var a=CloseButton2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){this.trigger({type:"close",bubbles:!1})},"handleClick"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(a){rx.isEventKey(a,"Esc")?(a.preventDefault(),a.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,a)},"handleKeyDown"),CloseButton2}(NM);FE.registerComponent("CloseButton",FM);var UM=/* @__PURE__ */function(i){function PlayToggle2(a,s){var o;return void 0===s&&(s={}),o=i.call(this,a,s)||this,s.replay=void 0===s.replay||s.replay,o.on(a,"play",function(i){return o.handlePlay(i)}),o.on(a,"pause",function(i){return o.handlePause(i)}),s.replay&&o.on(a,"ended",function(i){return o.handleEnded(i)}),o}_inheritsLoose(PlayToggle2,i),__name(PlayToggle2,"PlayToggle");var a=PlayToggle2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){this.player_.paused()?silencePromise(this.player_.play()):this.player_.pause()},"handleClick"),a.handleSeeked=/* @__PURE__ */__name(function handleSeeked(i){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(i):this.handlePlay(i)},"handleSeeked"),a.handlePlay=/* @__PURE__ */__name(function handlePlay(i){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},"handlePlay"),a.handlePause=/* @__PURE__ */__name(function handlePause(i){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},"handlePause"),a.handleEnded=/* @__PURE__ */__name(function handleEnded(i){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(i){return a.handleSeeked(i)})},"handleEnded"),PlayToggle2}(NM);UM.prototype.controlText_="Play",FE.registerComponent("PlayToggle",UM);var jM=/* @__PURE__ */__name(function defaultImplementation2(i,a){i=i<0?0:i;var s=Math.floor(i%60),o=Math.floor(i/60%60),u=Math.floor(i/3600),_=Math.floor(a/60%60),x=Math.floor(a/3600);return(isNaN(i)||i===1/0)&&(u=o=s="-"),(u=u>0||x>0?u+":":"")+(o=((u||_>=10)&&o<10?"0"+o:o)+":")+(s=s<10?"0"+s:s)},"defaultImplementation"),VM=jM;function setFormatTime(i){VM=i}function resetFormatTime(){VM=jM}function formatTime(i,a){return void 0===a&&(a=i),VM(i,a)}__name(setFormatTime,"setFormatTime"),__name(resetFormatTime,"resetFormatTime"),__name(formatTime,"formatTime");var zM=/* @__PURE__ */function(i){function TimeDisplay2(a,s){var o;return(o=i.call(this,a,s)||this).on(a,["timeupdate","ended"],function(i){return o.updateContent(i)}),o.updateTextNode_(),o}_inheritsLoose(TimeDisplay2,i),__name(TimeDisplay2,"TimeDisplay");var a=TimeDisplay2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl$12(){var a=this.buildCSSClass(),s=i.prototype.createEl.call(this,"div",{className:a+" vjs-time-control vjs-control"}),o=createEl("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+" "},{role:"presentation"});return s.appendChild(o),this.contentEl_=createEl("span",{className:a+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},"createEl$1"),a.dispose=/* @__PURE__ */__name(function dispose(){this.contentEl_=null,this.textNode_=null,i.prototype.dispose.call(this)},"dispose"),a.updateTextNode_=/* @__PURE__ */__name(function updateTextNode_(i){var a=this;void 0===i&&(i=0),i=formatTime(i),this.formattedTime_!==i&&(this.formattedTime_=i,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(a.contentEl_){var i=a.textNode_;i&&a.contentEl_.firstChild!==i&&(i=null,wC.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=An.createTextNode(a.formattedTime_),a.textNode_&&(i?a.contentEl_.replaceChild(a.textNode_,i):a.contentEl_.appendChild(a.textNode_))}}))},"updateTextNode_"),a.updateContent=/* @__PURE__ */__name(function updateContent(i){},"updateContent"),TimeDisplay2}(FE);zM.prototype.labelText_="Time",zM.prototype.controlText_="Time",FE.registerComponent("TimeDisplay",zM);var HM=/* @__PURE__ */function(i){function CurrentTimeDisplay2(){return i.apply(this,arguments)||this}_inheritsLoose(CurrentTimeDisplay2,i),__name(CurrentTimeDisplay2,"CurrentTimeDisplay");var a=CurrentTimeDisplay2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-current-time"},"buildCSSClass"),a.updateContent=/* @__PURE__ */__name(function updateContent(i){var a;a=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)},"updateContent"),CurrentTimeDisplay2}(zM);HM.prototype.labelText_="Current Time",HM.prototype.controlText_="Current Time",FE.registerComponent("CurrentTimeDisplay",HM);var $M=/* @__PURE__ */function(i){function DurationDisplay2(a,s){var o;o=i.call(this,a,s)||this;var u=/* @__PURE__ */__name(function updateContent2(i){return o.updateContent(i)},"updateContent");return o.on(a,"durationchange",u),o.on(a,"loadstart",u),o.on(a,"loadedmetadata",u),o}_inheritsLoose(DurationDisplay2,i),__name(DurationDisplay2,"DurationDisplay");var a=DurationDisplay2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-duration"},"buildCSSClass"),a.updateContent=/* @__PURE__ */__name(function updateContent(i){var a=this.player_.duration();this.updateTextNode_(a)},"updateContent"),DurationDisplay2}(zM);$M.prototype.labelText_="Duration",$M.prototype.controlText_="Duration",FE.registerComponent("DurationDisplay",$M);var GM=/* @__PURE__ */function(i){function TimeDivider2(){return i.apply(this,arguments)||this}return _inheritsLoose(TimeDivider2,i),__name(TimeDivider2,"TimeDivider"),TimeDivider2.prototype.createEl=/* @__PURE__ */__name(function createEl2(){var a=i.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=i.prototype.createEl.call(this,"div"),o=i.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(o),a.appendChild(s),a},"createEl"),TimeDivider2}(FE);FE.registerComponent("TimeDivider",GM);var WM=/* @__PURE__ */function(i){function RemainingTimeDisplay2(a,s){var o;return(o=i.call(this,a,s)||this).on(a,"durationchange",function(i){return o.updateContent(i)}),o}_inheritsLoose(RemainingTimeDisplay2,i),__name(RemainingTimeDisplay2,"RemainingTimeDisplay");var a=RemainingTimeDisplay2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-remaining-time"},"buildCSSClass"),a.createEl=/* @__PURE__ */__name(function createEl$12(){var a=i.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&a.insertBefore(createEl("span",{},{"aria-hidden":!0},"-"),this.contentEl_),a},"createEl$1"),a.updateContent=/* @__PURE__ */__name(function updateContent(i){var a;"number"==typeof this.player_.duration()&&(a=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(a))},"updateContent"),RemainingTimeDisplay2}(zM);WM.prototype.labelText_="Remaining Time",WM.prototype.controlText_="Remaining Time",FE.registerComponent("RemainingTimeDisplay",WM);var qM=/* @__PURE__ */function(i){function LiveDisplay2(a,s){var o;return(o=i.call(this,a,s)||this).updateShowing(),o.on(o.player(),"durationchange",function(i){return o.updateShowing(i)}),o}_inheritsLoose(LiveDisplay2,i),__name(LiveDisplay2,"LiveDisplay");var a=LiveDisplay2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl$12(){var a=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=createEl("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(createEl("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+" "})),this.contentEl_.appendChild(An.createTextNode(this.localize("LIVE"))),a.appendChild(this.contentEl_),a},"createEl$1"),a.dispose=/* @__PURE__ */__name(function dispose(){this.contentEl_=null,i.prototype.dispose.call(this)},"dispose"),a.updateShowing=/* @__PURE__ */__name(function updateShowing(i){this.player().duration()===1/0?this.show():this.hide()},"updateShowing"),LiveDisplay2}(FE);FE.registerComponent("LiveDisplay",qM);var XM=/* @__PURE__ */function(i){function SeekToLive2(a,s){var o;return(o=i.call(this,a,s)||this).updateLiveEdgeStatus(),o.player_.liveTracker&&(o.updateLiveEdgeStatusHandler_=function(i){return o.updateLiveEdgeStatus(i)},o.on(o.player_.liveTracker,"liveedgechange",o.updateLiveEdgeStatusHandler_)),o}_inheritsLoose(SeekToLive2,i),__name(SeekToLive2,"SeekToLive");var a=SeekToLive2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl$12(){var a=i.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),a.appendChild(this.textEl_),a},"createEl$1"),a.updateLiveEdgeStatus=/* @__PURE__ */__name(function updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},"updateLiveEdgeStatus"),a.handleClick=/* @__PURE__ */__name(function handleClick(){this.player_.liveTracker.seekToLiveEdge()},"handleClick"),a.dispose=/* @__PURE__ */__name(function dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,i.prototype.dispose.call(this)},"dispose"),SeekToLive2}(NM);XM.prototype.controlText_="Seek to live, currently playing live",FE.registerComponent("SeekToLive",XM);var QM=/* @__PURE__ */__name(function clamp2(i,a,s){return i=Number(i),Math.min(s,Math.max(a,isNaN(i)?a:i))},"clamp"),KM=/* @__PURE__ */function(i){function Slider2(a,s){var o;return(o=i.call(this,a,s)||this).handleMouseDown_=function(i){return o.handleMouseDown(i)},o.handleMouseUp_=function(i){return o.handleMouseUp(i)},o.handleKeyDown_=function(i){return o.handleKeyDown(i)},o.handleClick_=function(i){return o.handleClick(i)},o.handleMouseMove_=function(i){return o.handleMouseMove(i)},o.update_=function(i){return o.update(i)},o.bar=o.getChild(o.options_.barName),o.vertical(!!o.options_.vertical),o.enable(),o}_inheritsLoose(Slider2,i),__name(Slider2,"Slider");var a=Slider2.prototype;return a.enabled=/* @__PURE__ */__name(function enabled(){return this.enabled_},"enabled"),a.enable=/* @__PURE__ */__name(function enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},"enable"),a.disable=/* @__PURE__ */__name(function disable(){if(this.enabled()){var i=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},"disable"),a.createEl=/* @__PURE__ */__name(function createEl2(a,s,o){return void 0===s&&(s={}),void 0===o&&(o={}),s.className=s.className+" vjs-slider",s=assign({tabIndex:0},s),o=assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},o),i.prototype.createEl.call(this,a,s,o)},"createEl"),a.handleMouseDown=/* @__PURE__ */__name(function handleMouseDown(i){var a=this.bar.el_.ownerDocument;"mousedown"===i.type&&i.preventDefault(),"touchstart"!==i.type||VC||i.preventDefault(),blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(i,!0)},"handleMouseDown"),a.handleMouseMove=/* @__PURE__ */__name(function handleMouseMove(i){},"handleMouseMove"),a.handleMouseUp=/* @__PURE__ */__name(function handleMouseUp(){var i=this.bar.el_.ownerDocument;unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(i,"mousemove",this.handleMouseMove_),this.off(i,"mouseup",this.handleMouseUp_),this.off(i,"touchmove",this.handleMouseMove_),this.off(i,"touchend",this.handleMouseUp_),this.update()},"handleMouseUp"),a.update=/* @__PURE__ */__name(function update(){var i=this;if(this.el_&&this.bar){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var s=i.vertical()?"height":"width";i.bar.el().style[s]=(100*a).toFixed(2)+"%"})),a}},"update"),a.getProgress=/* @__PURE__ */__name(function getProgress(){return Number(QM(this.getPercent(),0,1).toFixed(4))},"getProgress"),a.calculateDistance=/* @__PURE__ */__name(function calculateDistance(i){var a=getPointerPosition(this.el_,i);return this.vertical()?a.y:a.x},"calculateDistance"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(a){rx.isEventKey(a,"Left")||rx.isEventKey(a,"Down")?(a.preventDefault(),a.stopPropagation(),this.stepBack()):rx.isEventKey(a,"Right")||rx.isEventKey(a,"Up")?(a.preventDefault(),a.stopPropagation(),this.stepForward()):i.prototype.handleKeyDown.call(this,a)},"handleKeyDown"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){i.stopPropagation(),i.preventDefault()},"handleClick"),a.vertical=/* @__PURE__ */__name(function vertical(i){if(void 0===i)return this.vertical_||!1;this.vertical_=!!i,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},"vertical"),Slider2}(FE);FE.registerComponent("Slider",KM);var YM=/* @__PURE__ */__name(function percentify2(i,a){return QM(i/a*100,0,100).toFixed(2)+"%"},"percentify"),JM=/* @__PURE__ */function(i){function LoadProgressBar2(a,s){var o;return(o=i.call(this,a,s)||this).partEls_=[],o.on(a,"progress",function(i){return o.update(i)}),o}_inheritsLoose(LoadProgressBar2,i),__name(LoadProgressBar2,"LoadProgressBar");var a=LoadProgressBar2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl$12(){var a=i.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=createEl("span",{className:"vjs-control-text"}),o=createEl("span",{textContent:this.localize("Loaded")}),u=An.createTextNode(": ");return this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),a.appendChild(s),s.appendChild(o),s.appendChild(u),s.appendChild(this.percentageEl_),a},"createEl$1"),a.dispose=/* @__PURE__ */__name(function dispose(){this.partEls_=null,this.percentageEl_=null,i.prototype.dispose.call(this)},"dispose"),a.update=/* @__PURE__ */__name(function update(i){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var i=a.player_.liveTracker,s=a.player_.buffered(),o=i&&i.isLive()?i.seekableEnd():a.player_.duration(),u=a.player_.bufferedEnd(),_=a.partEls_,x=YM(u,o);a.percent_!==x&&(a.el_.style.width=x,textContent(a.percentageEl_,x),a.percent_=x);for(var w=0;w<s.length;w++){var C=s.start(w),L=s.end(w),B=_[w];B||(B=a.el_.appendChild(createEl()),_[w]=B),B.dataset.start===C&&B.dataset.end===L||(B.dataset.start=C,B.dataset.end=L,B.style.left=YM(C,u),B.style.width=YM(L-C,u))}for(var U=_.length;U>s.length;U--)a.el_.removeChild(_[U-1]);_.length=s.length})},"update"),LoadProgressBar2}(FE);FE.registerComponent("LoadProgressBar",JM);var ZM=/* @__PURE__ */function(i){function TimeTooltip2(a,s){var o;return(o=i.call(this,a,s)||this).update=gE(fE(_assertThisInitialized(o),o.update),mE),o}_inheritsLoose(TimeTooltip2,i),__name(TimeTooltip2,"TimeTooltip");var a=TimeTooltip2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},"createEl"),a.update=/* @__PURE__ */__name(function update(i,a,s){var o=findPosition(this.el_),u=getBoundingClientRect(this.player_.el()),_=i.width*a;if(u&&o){var x=i.left-u.left+_,w=i.width-_+(u.right-i.right),C=o.width/2;x<C?C+=C-x:w<C&&(C=w),C<0?C=0:C>o.width&&(C=o.width),C=Math.round(C),this.el_.style.right="-"+C+"px",this.write(s)}},"update"),a.write=/* @__PURE__ */__name(function write(i){textContent(this.el_,i)},"write"),a.updateTime=/* @__PURE__ */__name(function updateTime(i,a,s,o){var u=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var _,x=u.player_.duration();if(u.player_.liveTracker&&u.player_.liveTracker.isLive()){var w=u.player_.liveTracker.liveWindow(),C=w-a*w;_=(C<1?"":"-")+formatTime(C,w)}else _=formatTime(s,x);u.update(i,a,_),o&&o()})},"updateTime"),TimeTooltip2}(FE);FE.registerComponent("TimeTooltip",ZM);var tk=/* @__PURE__ */function(i){function PlayProgressBar2(a,s){var o;return(o=i.call(this,a,s)||this).update=gE(fE(_assertThisInitialized(o),o.update),mE),o}_inheritsLoose(PlayProgressBar2,i),__name(PlayProgressBar2,"PlayProgressBar");var a=PlayProgressBar2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},"createEl"),a.update=/* @__PURE__ */__name(function update(i,a){var s=this.getChild("timeTooltip");if(s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(i,a,o)}},"update"),PlayProgressBar2}(FE);tk.prototype.options_={children:[]},QC||NC||tk.prototype.options_.children.push("timeTooltip"),FE.registerComponent("PlayProgressBar",tk);var nk=/* @__PURE__ */function(i){function MouseTimeDisplay2(a,s){var o;return(o=i.call(this,a,s)||this).update=gE(fE(_assertThisInitialized(o),o.update),mE),o}_inheritsLoose(MouseTimeDisplay2,i),__name(MouseTimeDisplay2,"MouseTimeDisplay");var a=MouseTimeDisplay2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},"createEl"),a.update=/* @__PURE__ */__name(function update(i,a){var s=this,o=a*this.player_.duration();this.getChild("timeTooltip").updateTime(i,a,o,function(){s.el_.style.left=i.width*a+"px"})},"update"),MouseTimeDisplay2}(FE);nk.prototype.options_={children:["timeTooltip"]},FE.registerComponent("MouseTimeDisplay",nk);var rk=/* @__PURE__ */function(i){function SeekBar2(a,s){var o;return(o=i.call(this,a,s)||this).setEventHandlers_(),o}_inheritsLoose(SeekBar2,i),__name(SeekBar2,"SeekBar");var a=SeekBar2.prototype;return a.setEventHandlers_=/* @__PURE__ */__name(function setEventHandlers_(){var i=this;this.update_=fE(this,this.update),this.update=gE(this.update_,mE),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return i.enableInterval_(a)},this.disableIntervalHandler_=function(a){return i.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in An&&"visibilityState"in An&&this.on(An,"visibilitychange",this.toggleVisibility_)},"setEventHandlers_"),a.toggleVisibility_=/* @__PURE__ */__name(function toggleVisibility_(i){"hidden"===An.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(i)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},"toggleVisibility_"),a.enableInterval_=/* @__PURE__ */__name(function enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,mE))},"enableInterval_"),a.disableInterval_=/* @__PURE__ */__name(function disableInterval_(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&i&&"ended"!==i.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},"disableInterval_"),a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},"createEl"),a.update=/* @__PURE__ */__name(function update(a){var s=this;if("hidden"!==An.visibilityState){var o=i.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var i=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),a=s.player_.liveTracker,u=s.player_.duration();a&&a.isLive()&&(u=s.player_.liveTracker.liveCurrentTime()),s.percent_!==o&&(s.el_.setAttribute("aria-valuenow",(100*o).toFixed(2)),s.percent_=o),s.currentTime_===i&&s.duration_===u||(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(i,u),formatTime(u,u)],"{1} of {2}")),s.currentTime_=i,s.duration_=u),s.bar&&s.bar.update(getBoundingClientRect(s.el()),s.getProgress())}),o}},"update"),a.userSeek_=/* @__PURE__ */__name(function userSeek_(i){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(i)},"userSeek_"),a.getCurrentTime_=/* @__PURE__ */__name(function getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},"getCurrentTime_"),a.getPercent=/* @__PURE__ */__name(function getPercent(){var i,a=this.getCurrentTime_(),s=this.player_.liveTracker;return s&&s.isLive()?(i=(a-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(i=1)):i=a/this.player_.duration(),i},"getPercent"),a.handleMouseDown=/* @__PURE__ */__name(function handleMouseDown(a){isSingleLeftClick(a)&&(a.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),i.prototype.handleMouseDown.call(this,a))},"handleMouseDown"),a.handleMouseMove=/* @__PURE__ */__name(function handleMouseMove(i,a){if(void 0===a&&(a=!1),isSingleLeftClick(i)){var s;a||this.player_.scrubbing()||this.player_.scrubbing(!0);var o=this.calculateDistance(i),u=this.player_.liveTracker;if(u&&u.isLive()){if(o>=.99)return void u.seekToLiveEdge();var _=u.seekableStart(),x=u.liveCurrentTime();if((s=_+o*u.liveWindow())>=x&&(s=x),s<=_&&(s=_+.1),s===1/0)return}else(s=o*this.player_.duration())===this.player_.duration()&&(s-=.1);this.userSeek_(s)}},"handleMouseMove"),a.enable=/* @__PURE__ */__name(function enable(){i.prototype.enable.call(this);var a=this.getChild("mouseTimeDisplay");a&&a.show()},"enable"),a.disable=/* @__PURE__ */__name(function disable(){i.prototype.disable.call(this);var a=this.getChild("mouseTimeDisplay");a&&a.hide()},"disable"),a.handleMouseUp=/* @__PURE__ */__name(function handleMouseUp(a){i.prototype.handleMouseUp.call(this,a),a&&a.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?silencePromise(this.player_.play()):this.update_()},"handleMouseUp"),a.stepForward=/* @__PURE__ */__name(function stepForward(){this.userSeek_(this.player_.currentTime()+5)},"stepForward"),a.stepBack=/* @__PURE__ */__name(function stepBack(){this.userSeek_(this.player_.currentTime()-5)},"stepBack"),a.handleAction=/* @__PURE__ */__name(function handleAction(i){this.player_.paused()?this.player_.play():this.player_.pause()},"handleAction"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(a){var s=this.player_.liveTracker;if(rx.isEventKey(a,"Space")||rx.isEventKey(a,"Enter"))a.preventDefault(),a.stopPropagation(),this.handleAction(a);else if(rx.isEventKey(a,"Home"))a.preventDefault(),a.stopPropagation(),this.userSeek_(0);else if(rx.isEventKey(a,"End"))a.preventDefault(),a.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(rx(a))){a.preventDefault(),a.stopPropagation();var o=10*(rx.codes[rx(a)]-rx.codes[0])/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*o):this.userSeek_(this.player_.duration()*o)}else rx.isEventKey(a,"PgDn")?(a.preventDefault(),a.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):rx.isEventKey(a,"PgUp")?(a.preventDefault(),a.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):i.prototype.handleKeyDown.call(this,a)},"handleKeyDown"),a.dispose=/* @__PURE__ */__name(function dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in An&&"visibilityState"in An&&this.off(An,"visibilitychange",this.toggleVisibility_),i.prototype.dispose.call(this)},"dispose"),SeekBar2}(KM);rk.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},QC||NC||rk.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),FE.registerComponent("SeekBar",rk);var sk=/* @__PURE__ */function(i){function ProgressControl2(a,s){var o;return(o=i.call(this,a,s)||this).handleMouseMove=gE(fE(_assertThisInitialized(o),o.handleMouseMove),mE),o.throttledHandleMouseSeek=gE(fE(_assertThisInitialized(o),o.handleMouseSeek),mE),o.handleMouseUpHandler_=function(i){return o.handleMouseUp(i)},o.handleMouseDownHandler_=function(i){return o.handleMouseDown(i)},o.enable(),o}_inheritsLoose(ProgressControl2,i),__name(ProgressControl2,"ProgressControl");var a=ProgressControl2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},"createEl"),a.handleMouseMove=/* @__PURE__ */__name(function handleMouseMove(i){var a=this.getChild("seekBar");if(a){var s=a.getChild("playProgressBar"),o=a.getChild("mouseTimeDisplay");if(s||o){var u=a.el(),_=findPosition(u),x=getPointerPosition(u,i).x;x=QM(x,0,1),o&&o.update(_,x),s&&s.update(_,a.getProgress())}}},"handleMouseMove"),a.handleMouseSeek=/* @__PURE__ */__name(function handleMouseSeek(i){var a=this.getChild("seekBar");a&&a.handleMouseMove(i)},"handleMouseSeek"),a.enabled=/* @__PURE__ */__name(function enabled(){return this.enabled_},"enabled"),a.disable=/* @__PURE__ */__name(function disable(){if(this.children().forEach(function(i){return i.disable&&i.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var i=this.getChild("seekBar");this.player_.scrubbing(!1),i.videoWasPlaying&&silencePromise(this.player_.play())}},"disable"),a.enable=/* @__PURE__ */__name(function enable(){this.children().forEach(function(i){return i.enable&&i.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},"enable"),a.removeListenersAddedOnMousedownAndTouchstart=/* @__PURE__ */__name(function removeListenersAddedOnMousedownAndTouchstart(){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseSeek),this.off(i,"touchmove",this.throttledHandleMouseSeek),this.off(i,"mouseup",this.handleMouseUpHandler_),this.off(i,"touchend",this.handleMouseUpHandler_)},"removeListenersAddedOnMousedownAndTouchstart"),a.handleMouseDown=/* @__PURE__ */__name(function handleMouseDown(i){var a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(i),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},"handleMouseDown"),a.handleMouseUp=/* @__PURE__ */__name(function handleMouseUp(i){var a=this.getChild("seekBar");a&&a.handleMouseUp(i),this.removeListenersAddedOnMousedownAndTouchstart()},"handleMouseUp"),ProgressControl2}(FE);sk.prototype.options_={children:["seekBar"]},FE.registerComponent("ProgressControl",sk);var ok=/* @__PURE__ */function(i){function PictureInPictureToggle2(a,s){var o;return(o=i.call(this,a,s)||this).on(a,["enterpictureinpicture","leavepictureinpicture"],function(i){return o.handlePictureInPictureChange(i)}),o.on(a,["disablepictureinpicturechanged","loadedmetadata"],function(i){return o.handlePictureInPictureEnabledChange(i)}),o.on(a,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){"audio"===a.currentType().substring(0,5)||a.audioPosterMode()||a.audioOnlyMode()?(a.isInPictureInPicture()&&a.exitPictureInPicture(),o.hide()):o.show()}),o.disable(),o}_inheritsLoose(PictureInPictureToggle2,i),__name(PictureInPictureToggle2,"PictureInPictureToggle");var a=PictureInPictureToggle2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-picture-in-picture-control "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.handlePictureInPictureEnabledChange=/* @__PURE__ */__name(function handlePictureInPictureEnabledChange(){An.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},"handlePictureInPictureEnabledChange"),a.handlePictureInPictureChange=/* @__PURE__ */__name(function handlePictureInPictureChange(i){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},"handlePictureInPictureChange"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},"handleClick"),PictureInPictureToggle2}(NM);ok.prototype.controlText_="Picture-in-Picture",FE.registerComponent("PictureInPictureToggle",ok);var lk=/* @__PURE__ */function(i){function FullscreenToggle2(a,s){var o;return(o=i.call(this,a,s)||this).on(a,"fullscreenchange",function(i){return o.handleFullscreenChange(i)}),!1===An[a.fsApi_.fullscreenEnabled]&&o.disable(),o}_inheritsLoose(FullscreenToggle2,i),__name(FullscreenToggle2,"FullscreenToggle");var a=FullscreenToggle2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.handleFullscreenChange=/* @__PURE__ */__name(function handleFullscreenChange(i){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},"handleFullscreenChange"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},"handleClick"),FullscreenToggle2}(NM);lk.prototype.controlText_="Fullscreen",FE.registerComponent("FullscreenToggle",lk);var uk=/* @__PURE__ */__name(function checkVolumeSupport2(i,a){a.tech_&&!a.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(a,"loadstart",function(){a.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})},"checkVolumeSupport"),pk=/* @__PURE__ */function(i){function VolumeLevel2(){return i.apply(this,arguments)||this}return _inheritsLoose(VolumeLevel2,i),__name(VolumeLevel2,"VolumeLevel"),VolumeLevel2.prototype.createEl=/* @__PURE__ */__name(function createEl2(){var a=i.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return a.appendChild(i.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),a},"createEl"),VolumeLevel2}(FE);FE.registerComponent("VolumeLevel",pk);var mk=/* @__PURE__ */function(i){function VolumeLevelTooltip2(a,s){var o;return(o=i.call(this,a,s)||this).update=gE(fE(_assertThisInitialized(o),o.update),mE),o}_inheritsLoose(VolumeLevelTooltip2,i),__name(VolumeLevelTooltip2,"VolumeLevelTooltip");var a=VolumeLevelTooltip2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},"createEl"),a.update=/* @__PURE__ */__name(function update(i,a,s,o){if(!s){var u=getBoundingClientRect(this.el_),_=getBoundingClientRect(this.player_.el()),x=i.width*a;if(!_||!u)return;var w=i.left-_.left+x,C=i.width-x+(_.right-i.right),L=u.width/2;w<L?L+=L-w:C<L&&(L=C),L<0?L=0:L>u.width&&(L=u.width),this.el_.style.right="-"+L+"px"}this.write(o+"%")},"update"),a.write=/* @__PURE__ */__name(function write(i){textContent(this.el_,i)},"write"),a.updateVolume=/* @__PURE__ */__name(function updateVolume(i,a,s,o,u){var _=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){_.update(i,a,s,o.toFixed(0)),u&&u()})},"updateVolume"),VolumeLevelTooltip2}(FE);FE.registerComponent("VolumeLevelTooltip",mk);var fk=/* @__PURE__ */function(i){function MouseVolumeLevelDisplay2(a,s){var o;return(o=i.call(this,a,s)||this).update=gE(fE(_assertThisInitialized(o),o.update),mE),o}_inheritsLoose(MouseVolumeLevelDisplay2,i),__name(MouseVolumeLevelDisplay2,"MouseVolumeLevelDisplay");var a=MouseVolumeLevelDisplay2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},"createEl"),a.update=/* @__PURE__ */__name(function update(i,a,s){var o=this,u=100*a;this.getChild("volumeLevelTooltip").updateVolume(i,a,s,u,function(){s?o.el_.style.bottom=i.height*a+"px":o.el_.style.left=i.width*a+"px"})},"update"),MouseVolumeLevelDisplay2}(FE);fk.prototype.options_={children:["volumeLevelTooltip"]},FE.registerComponent("MouseVolumeLevelDisplay",fk);var _k=/* @__PURE__ */function(i){function VolumeBar2(a,s){var o;return(o=i.call(this,a,s)||this).on("slideractive",function(i){return o.updateLastVolume_(i)}),o.on(a,"volumechange",function(i){return o.updateARIAAttributes(i)}),a.ready(function(){return o.updateARIAAttributes()}),o}_inheritsLoose(VolumeBar2,i),__name(VolumeBar2,"VolumeBar");var a=VolumeBar2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},"createEl"),a.handleMouseDown=/* @__PURE__ */__name(function handleMouseDown(a){isSingleLeftClick(a)&&i.prototype.handleMouseDown.call(this,a)},"handleMouseDown"),a.handleMouseMove=/* @__PURE__ */__name(function handleMouseMove(i){var a=this.getChild("mouseVolumeLevelDisplay");if(a){var s=this.el(),o=getBoundingClientRect(s),u=this.vertical(),_=getPointerPosition(s,i);_=u?_.y:_.x,_=QM(_,0,1),a.update(o,_,u)}isSingleLeftClick(i)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(i)))},"handleMouseMove"),a.checkMuted=/* @__PURE__ */__name(function checkMuted(){this.player_.muted()&&this.player_.muted(!1)},"checkMuted"),a.getPercent=/* @__PURE__ */__name(function getPercent(){return this.player_.muted()?0:this.player_.volume()},"getPercent"),a.stepForward=/* @__PURE__ */__name(function stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},"stepForward"),a.stepBack=/* @__PURE__ */__name(function stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},"stepBack"),a.updateARIAAttributes=/* @__PURE__ */__name(function updateARIAAttributes(i){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},"updateARIAAttributes"),a.volumeAsPercentage_=/* @__PURE__ */__name(function volumeAsPercentage_(){return Math.round(100*this.player_.volume())},"volumeAsPercentage_"),a.updateLastVolume_=/* @__PURE__ */__name(function updateLastVolume_(){var i=this,a=this.player_.volume();this.one("sliderinactive",function(){0===i.player_.volume()&&i.player_.lastVolume_(a)})},"updateLastVolume_"),VolumeBar2}(KM);_k.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},QC||NC||_k.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),_k.prototype.playerEvent="volumechange",FE.registerComponent("VolumeBar",_k);var yk=/* @__PURE__ */function(i){function VolumeControl2(a,s){var o;return void 0===s&&(s={}),s.vertical=s.vertical||!1,(void 0===s.volumeBar||isPlain(s.volumeBar))&&(s.volumeBar=s.volumeBar||{},s.volumeBar.vertical=s.vertical),o=i.call(this,a,s)||this,uk(_assertThisInitialized(o),a),o.throttledHandleMouseMove=gE(fE(_assertThisInitialized(o),o.handleMouseMove),mE),o.handleMouseUpHandler_=function(i){return o.handleMouseUp(i)},o.on("mousedown",function(i){return o.handleMouseDown(i)}),o.on("touchstart",function(i){return o.handleMouseDown(i)}),o.on("mousemove",function(i){return o.handleMouseMove(i)}),o.on(o.volumeBar,["focus","slideractive"],function(){o.volumeBar.addClass("vjs-slider-active"),o.addClass("vjs-slider-active"),o.trigger("slideractive")}),o.on(o.volumeBar,["blur","sliderinactive"],function(){o.volumeBar.removeClass("vjs-slider-active"),o.removeClass("vjs-slider-active"),o.trigger("sliderinactive")}),o}_inheritsLoose(VolumeControl2,i),__name(VolumeControl2,"VolumeControl");var a=VolumeControl2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){var a="vjs-volume-horizontal";return this.options_.vertical&&(a="vjs-volume-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+a})},"createEl"),a.handleMouseDown=/* @__PURE__ */__name(function handleMouseDown(i){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},"handleMouseDown"),a.handleMouseUp=/* @__PURE__ */__name(function handleMouseUp(i){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},"handleMouseUp"),a.handleMouseMove=/* @__PURE__ */__name(function handleMouseMove(i){this.volumeBar.handleMouseMove(i)},"handleMouseMove"),VolumeControl2}(FE);yk.prototype.options_={children:["volumeBar"]},FE.registerComponent("VolumeControl",yk);var vk=/* @__PURE__ */__name(function checkMuteSupport2(i,a){a.tech_&&!a.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(a,"loadstart",function(){a.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")})},"checkMuteSupport"),xk=/* @__PURE__ */function(i){function MuteToggle2(a,s){var o;return o=i.call(this,a,s)||this,vk(_assertThisInitialized(o),a),o.on(a,["loadstart","volumechange"],function(i){return o.update(i)}),o}_inheritsLoose(MuteToggle2,i),__name(MuteToggle2,"MuteToggle");var a=MuteToggle2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-mute-control "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){var a=this.player_.volume(),s=this.player_.lastVolume_();if(0===a){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},"handleClick"),a.update=/* @__PURE__ */__name(function update(i){this.updateIcon_(),this.updateControlText_()},"update"),a.updateIcon_=/* @__PURE__ */__name(function updateIcon_(){var i=this.player_.volume(),a=3;QC&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===i||this.player_.muted()?a=0:i<.33?a=1:i<.67&&(a=2);for(var s=0;s<4;s++)removeClass(this.el_,"vjs-vol-"+s);addClass(this.el_,"vjs-vol-"+a)},"updateIcon_"),a.updateControlText_=/* @__PURE__ */__name(function updateControlText_(){var i=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==i&&this.controlText(i)},"updateControlText_"),MuteToggle2}(NM);xk.prototype.controlText_="Mute",FE.registerComponent("MuteToggle",xk);var wk=/* @__PURE__ */function(i){function VolumePanel2(a,s){var o;return void 0===s&&(s={}),void 0!==s.inline?s.inline=s.inline:s.inline=!0,(void 0===s.volumeControl||isPlain(s.volumeControl))&&(s.volumeControl=s.volumeControl||{},s.volumeControl.vertical=!s.inline),(o=i.call(this,a,s)||this).handleKeyPressHandler_=function(i){return o.handleKeyPress(i)},o.on(a,["loadstart"],function(i){return o.volumePanelState_(i)}),o.on(o.muteToggle,"keyup",function(i){return o.handleKeyPress(i)}),o.on(o.volumeControl,"keyup",function(i){return o.handleVolumeControlKeyUp(i)}),o.on("keydown",function(i){return o.handleKeyPress(i)}),o.on("mouseover",function(i){return o.handleMouseOver(i)}),o.on("mouseout",function(i){return o.handleMouseOut(i)}),o.on(o.volumeControl,["slideractive"],o.sliderActive_),o.on(o.volumeControl,["sliderinactive"],o.sliderInactive_),o}_inheritsLoose(VolumePanel2,i),__name(VolumePanel2,"VolumePanel");var a=VolumePanel2.prototype;return a.sliderActive_=/* @__PURE__ */__name(function sliderActive_(){this.addClass("vjs-slider-active")},"sliderActive_"),a.sliderInactive_=/* @__PURE__ */__name(function sliderInactive_(){this.removeClass("vjs-slider-active")},"sliderInactive_"),a.volumePanelState_=/* @__PURE__ */__name(function volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},"volumePanelState_"),a.createEl=/* @__PURE__ */__name(function createEl2(){var a="vjs-volume-panel-horizontal";return this.options_.inline||(a="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+a})},"createEl"),a.dispose=/* @__PURE__ */__name(function dispose(){this.handleMouseOut(),i.prototype.dispose.call(this)},"dispose"),a.handleVolumeControlKeyUp=/* @__PURE__ */__name(function handleVolumeControlKeyUp(i){rx.isEventKey(i,"Esc")&&this.muteToggle.focus()},"handleVolumeControlKeyUp"),a.handleMouseOver=/* @__PURE__ */__name(function handleMouseOver(i){this.addClass("vjs-hover"),on(An,"keyup",this.handleKeyPressHandler_)},"handleMouseOver"),a.handleMouseOut=/* @__PURE__ */__name(function handleMouseOut(i){this.removeClass("vjs-hover"),off(An,"keyup",this.handleKeyPressHandler_)},"handleMouseOut"),a.handleKeyPress=/* @__PURE__ */__name(function handleKeyPress(i){rx.isEventKey(i,"Esc")&&this.handleMouseOut()},"handleKeyPress"),VolumePanel2}(FE);wk.prototype.options_={children:["muteToggle","volumeControl"]},FE.registerComponent("VolumePanel",wk);var Ak=/* @__PURE__ */function(i){function Menu2(a,s){var o;return o=i.call(this,a,s)||this,s&&(o.menuButton_=s.menuButton),o.focusedChild_=-1,o.on("keydown",function(i){return o.handleKeyDown(i)}),o.boundHandleBlur_=function(i){return o.handleBlur(i)},o.boundHandleTapClick_=function(i){return o.handleTapClick(i)},o}_inheritsLoose(Menu2,i),__name(Menu2,"Menu");var a=Menu2.prototype;return a.addEventListenerForItem=/* @__PURE__ */__name(function addEventListenerForItem(i){i instanceof FE&&(this.on(i,"blur",this.boundHandleBlur_),this.on(i,["tap","click"],this.boundHandleTapClick_))},"addEventListenerForItem"),a.removeEventListenerForItem=/* @__PURE__ */__name(function removeEventListenerForItem(i){i instanceof FE&&(this.off(i,"blur",this.boundHandleBlur_),this.off(i,["tap","click"],this.boundHandleTapClick_))},"removeEventListenerForItem"),a.removeChild=/* @__PURE__ */__name(function removeChild(a){"string"==typeof a&&(a=this.getChild(a)),this.removeEventListenerForItem(a),i.prototype.removeChild.call(this,a)},"removeChild"),a.addItem=/* @__PURE__ */__name(function addItem(i){var a=this.addChild(i);a&&this.addEventListenerForItem(a)},"addItem"),a.createEl=/* @__PURE__ */__name(function createEl$12(){var a=this.options_.contentElType||"ul";this.contentEl_=createEl(a,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),on(s,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),s},"createEl$1"),a.dispose=/* @__PURE__ */__name(function dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,i.prototype.dispose.call(this)},"dispose"),a.handleBlur=/* @__PURE__ */__name(function handleBlur(i){var a=i.relatedTarget||An.activeElement;if(!this.children().some(function(i){return i.el()===a})){var s=this.menuButton_;s&&s.buttonPressed_&&a!==s.el().firstChild&&s.unpressButton()}},"handleBlur"),a.handleTapClick=/* @__PURE__ */__name(function handleTapClick(i){if(this.menuButton_){this.menuButton_.unpressButton();var a=this.children();if(!Array.isArray(a))return;var s=a.filter(function(a){return a.el()===i.target})[0];if(!s)return;"CaptionSettingsMenuItem"!==s.name()&&this.menuButton_.focus()}},"handleTapClick"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(i){rx.isEventKey(i,"Left")||rx.isEventKey(i,"Down")?(i.preventDefault(),i.stopPropagation(),this.stepForward()):(rx.isEventKey(i,"Right")||rx.isEventKey(i,"Up"))&&(i.preventDefault(),i.stopPropagation(),this.stepBack())},"handleKeyDown"),a.stepForward=/* @__PURE__ */__name(function stepForward(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_+1),this.focus(i)},"stepForward"),a.stepBack=/* @__PURE__ */__name(function stepBack(){var i=0;void 0!==this.focusedChild_&&(i=this.focusedChild_-1),this.focus(i)},"stepBack"),a.focus=/* @__PURE__ */__name(function focus(i){void 0===i&&(i=0);var a=this.children().slice();a.length&&a[0].hasClass("vjs-menu-title")&&a.shift(),a.length>0&&(i<0?i=0:i>=a.length&&(i=a.length-1),this.focusedChild_=i,a[i].el_.focus())},"focus"),Menu2}(FE);FE.registerComponent("Menu",Ak);var Bk=/* @__PURE__ */function(i){function MenuButton2(a,s){var o;void 0===s&&(s={}),(o=i.call(this,a,s)||this).menuButton_=new NM(a,s),o.menuButton_.controlText(o.controlText_),o.menuButton_.el_.setAttribute("aria-haspopup","true");var u=NM.prototype.buildCSSClass();o.menuButton_.el_.className=o.buildCSSClass()+" "+u,o.menuButton_.removeClass("vjs-control"),o.addChild(o.menuButton_),o.update(),o.enabled_=!0;var _=/* @__PURE__ */__name(function handleClick2(i){return o.handleClick(i)},"handleClick");return o.handleMenuKeyUp_=function(i){return o.handleMenuKeyUp(i)},o.on(o.menuButton_,"tap",_),o.on(o.menuButton_,"click",_),o.on(o.menuButton_,"keydown",function(i){return o.handleKeyDown(i)}),o.on(o.menuButton_,"mouseenter",function(){o.addClass("vjs-hover"),o.menu.show(),on(An,"keyup",o.handleMenuKeyUp_)}),o.on("mouseleave",function(i){return o.handleMouseLeave(i)}),o.on("keydown",function(i){return o.handleSubmenuKeyDown(i)}),o}_inheritsLoose(MenuButton2,i),__name(MenuButton2,"MenuButton");var a=MenuButton2.prototype;return a.update=/* @__PURE__ */__name(function update(){var i=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=i,this.addChild(i),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},"update"),a.createMenu=/* @__PURE__ */__name(function createMenu(){var i=new Ak(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var a=createEl("li",{className:"vjs-menu-title",textContent:LE(this.options_.title),tabIndex:-1}),s=new FE(this.player_,{el:a});i.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)i.addItem(this.items[o]);return i},"createMenu"),a.createItems=/* @__PURE__ */__name(function createItems(){},"createItems"),a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},"createEl"),a.buildWrapperCSSClass=/* @__PURE__ */__name(function buildWrapperCSSClass(){var a="vjs-menu-button";return!0===this.options_.inline?a+="-inline":a+="-popup","vjs-menu-button "+a+" "+NM.prototype.buildCSSClass()+" "+i.prototype.buildCSSClass.call(this)},"buildWrapperCSSClass"),a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){var a="vjs-menu-button";return!0===this.options_.inline?a+="-inline":a+="-popup","vjs-menu-button "+a+" "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.controlText=/* @__PURE__ */__name(function controlText(i,a){return void 0===a&&(a=this.menuButton_.el()),this.menuButton_.controlText(i,a)},"controlText"),a.dispose=/* @__PURE__ */__name(function dispose(){this.handleMouseLeave(),i.prototype.dispose.call(this)},"dispose"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){this.buttonPressed_?this.unpressButton():this.pressButton()},"handleClick"),a.handleMouseLeave=/* @__PURE__ */__name(function handleMouseLeave(i){this.removeClass("vjs-hover"),off(An,"keyup",this.handleMenuKeyUp_)},"handleMouseLeave"),a.focus=/* @__PURE__ */__name(function focus(){this.menuButton_.focus()},"focus"),a.blur=/* @__PURE__ */__name(function blur(){this.menuButton_.blur()},"blur"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(i){rx.isEventKey(i,"Esc")||rx.isEventKey(i,"Tab")?(this.buttonPressed_&&this.unpressButton(),rx.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus())):(rx.isEventKey(i,"Up")||rx.isEventKey(i,"Down"))&&(this.buttonPressed_||(i.preventDefault(),this.pressButton()))},"handleKeyDown"),a.handleMenuKeyUp=/* @__PURE__ */__name(function handleMenuKeyUp(i){(rx.isEventKey(i,"Esc")||rx.isEventKey(i,"Tab"))&&this.removeClass("vjs-hover")},"handleMenuKeyUp"),a.handleSubmenuKeyPress=/* @__PURE__ */__name(function handleSubmenuKeyPress(i){this.handleSubmenuKeyDown(i)},"handleSubmenuKeyPress"),a.handleSubmenuKeyDown=/* @__PURE__ */__name(function handleSubmenuKeyDown(i){(rx.isEventKey(i,"Esc")||rx.isEventKey(i,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),rx.isEventKey(i,"Tab")||(i.preventDefault(),this.menuButton_.focus()))},"handleSubmenuKeyDown"),a.pressButton=/* @__PURE__ */__name(function pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),QC&&isInFrame())return;this.menu.focus()}},"pressButton"),a.unpressButton=/* @__PURE__ */__name(function unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},"unpressButton"),a.disable=/* @__PURE__ */__name(function disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},"disable"),a.enable=/* @__PURE__ */__name(function enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},"enable"),MenuButton2}(FE);FE.registerComponent("MenuButton",Bk);var Vk=/* @__PURE__ */function(i){function TrackButton2(a,s){var o,u=s.tracks;if((o=i.call(this,a,s)||this).items.length<=1&&o.hide(),!u)return _assertThisInitialized(o);var _=fE(_assertThisInitialized(o),o.update);return u.addEventListener("removetrack",_),u.addEventListener("addtrack",_),u.addEventListener("labelchange",_),o.player_.on("ready",_),o.player_.on("dispose",function(){u.removeEventListener("removetrack",_),u.removeEventListener("addtrack",_),u.removeEventListener("labelchange",_)}),o}return _inheritsLoose(TrackButton2,i),__name(TrackButton2,"TrackButton"),TrackButton2}(Bk);FE.registerComponent("TrackButton",Vk);var zk=["Tab","Esc","Up","Down","Right","Left"],qk=/* @__PURE__ */function(i){function MenuItem2(a,s){var o;return(o=i.call(this,a,s)||this).selectable=s.selectable,o.isSelected_=s.selected||!1,o.multiSelectable=s.multiSelectable,o.selected(o.isSelected_),o.selectable?o.multiSelectable?o.el_.setAttribute("role","menuitemcheckbox"):o.el_.setAttribute("role","menuitemradio"):o.el_.setAttribute("role","menuitem"),o}_inheritsLoose(MenuItem2,i),__name(MenuItem2,"MenuItem");var a=MenuItem2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl$12(a,s,o){this.nonIconControl=!0;var u=i.prototype.createEl.call(this,"li",assign({className:"vjs-menu-item",tabIndex:-1},s),o);return u.replaceChild(createEl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),u.querySelector(".vjs-icon-placeholder")),u},"createEl$1"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(a){zk.some(function(i){return rx.isEventKey(a,i)})||i.prototype.handleKeyDown.call(this,a)},"handleKeyDown"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){this.selected(!0)},"handleClick"),a.selected=/* @__PURE__ */__name(function selected(i){this.selectable&&(i?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},"selected"),MenuItem2}(PM);FE.registerComponent("MenuItem",qk);var eP=/* @__PURE__ */function(i){function TextTrackMenuItem2(a,s){var o,u=s.track,_=a.textTracks();s.label=u.label||u.language||"Unknown",s.selected="showing"===u.mode,(o=i.call(this,a,s)||this).track=u,o.kinds=(s.kinds||[s.kind||o.track.kind]).filter(Boolean);var x,w=/* @__PURE__ */__name(function changeHandler2(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];o.handleTracksChange.apply(_assertThisInitialized(o),a)},"changeHandler"),C=/* @__PURE__ */__name(function selectedLanguageChangeHandler2(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];o.handleSelectedLanguageChange.apply(_assertThisInitialized(o),a)},"selectedLanguageChangeHandler");(a.on(["loadstart","texttrackchange"],w),_.addEventListener("change",w),_.addEventListener("selectedlanguagechange",C),o.on("dispose",function(){a.off(["loadstart","texttrackchange"],w),_.removeEventListener("change",w),_.removeEventListener("selectedlanguagechange",C)}),void 0===_.onchange)&&o.on(["tap","click"],function(){if("object"!=typeof Tn.Event)try{x=new Tn.Event("change")}catch(i){}x||(x=An.createEvent("Event")).initEvent("change",!0,!0),_.dispatchEvent(x)});return o.handleTracksChange(),o}_inheritsLoose(TextTrackMenuItem2,i),__name(TextTrackMenuItem2,"TextTrackMenuItem");var a=TextTrackMenuItem2.prototype;return a.handleClick=/* @__PURE__ */__name(function handleClick(a){var s=this.track,o=this.player_.textTracks();if(i.prototype.handleClick.call(this,a),o)for(var u=0;u<o.length;u++){var _=o[u];-1!==this.kinds.indexOf(_.kind)&&(_===s?"showing"!==_.mode&&(_.mode="showing"):"disabled"!==_.mode&&(_.mode="disabled"))}},"handleClick"),a.handleTracksChange=/* @__PURE__ */__name(function handleTracksChange(i){var a="showing"===this.track.mode;a!==this.isSelected_&&this.selected(a)},"handleTracksChange"),a.handleSelectedLanguageChange=/* @__PURE__ */__name(function handleSelectedLanguageChange(i){if("showing"===this.track.mode){var a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},"handleSelectedLanguageChange"),a.dispose=/* @__PURE__ */__name(function dispose(){this.track=null,i.prototype.dispose.call(this)},"dispose"),TextTrackMenuItem2}(qk);FE.registerComponent("TextTrackMenuItem",eP);var tP=/* @__PURE__ */function(i){function OffTextTrackMenuItem2(a,s){return s.track={player:a,kind:s.kind,kinds:s.kinds,default:!1,mode:"disabled"},s.kinds||(s.kinds=[s.kind]),s.label?s.track.label=s.label:s.track.label=s.kinds.join(" and ")+" off",s.selectable=!0,s.multiSelectable=!1,i.call(this,a,s)||this}_inheritsLoose(OffTextTrackMenuItem2,i),__name(OffTextTrackMenuItem2,"OffTextTrackMenuItem");var a=OffTextTrackMenuItem2.prototype;return a.handleTracksChange=/* @__PURE__ */__name(function handleTracksChange(i){for(var a=this.player().textTracks(),s=!0,o=0,u=a.length;o<u;o++){var _=a[o];if(this.options_.kinds.indexOf(_.kind)>-1&&"showing"===_.mode){s=!1;break}}s!==this.isSelected_&&this.selected(s)},"handleTracksChange"),a.handleSelectedLanguageChange=/* @__PURE__ */__name(function handleSelectedLanguageChange(i){for(var a=this.player().textTracks(),s=!0,o=0,u=a.length;o<u;o++){var _=a[o];if(["captions","descriptions","subtitles"].indexOf(_.kind)>-1&&"showing"===_.mode){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},"handleSelectedLanguageChange"),OffTextTrackMenuItem2}(eP);FE.registerComponent("OffTextTrackMenuItem",tP);var nP=/* @__PURE__ */function(i){function TextTrackButton2(a,s){return void 0===s&&(s={}),s.tracks=a.textTracks(),i.call(this,a,s)||this}return _inheritsLoose(TextTrackButton2,i),__name(TextTrackButton2,"TextTrackButton"),TextTrackButton2.prototype.createItems=/* @__PURE__ */__name(function createItems(i,a){var s;void 0===i&&(i=[]),void 0===a&&(a=eP),this.label_&&(s=this.label_+" off"),i.push(new tP(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var u=0;u<o.length;u++){var _=o[u];if(this.kinds_.indexOf(_.kind)>-1){var x=new a(this.player_,{track:_,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});x.addClass("vjs-"+_.kind+"-menu-item"),i.push(x)}}return i},"createItems"),TextTrackButton2}(Vk);FE.registerComponent("TextTrackButton",nP);var iP=/* @__PURE__ */function(i){function ChaptersTrackMenuItem2(a,s){var o,u=s.track,_=s.cue,x=a.currentTime();return s.selectable=!0,s.multiSelectable=!1,s.label=_.text,s.selected=_.startTime<=x&&x<_.endTime,(o=i.call(this,a,s)||this).track=u,o.cue=_,o}return _inheritsLoose(ChaptersTrackMenuItem2,i),__name(ChaptersTrackMenuItem2,"ChaptersTrackMenuItem"),ChaptersTrackMenuItem2.prototype.handleClick=/* @__PURE__ */__name(function handleClick(a){i.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},"handleClick"),ChaptersTrackMenuItem2}(qk);FE.registerComponent("ChaptersTrackMenuItem",iP);var rP=/* @__PURE__ */function(i){function ChaptersButton2(a,s,o){var u;return(u=i.call(this,a,s,o)||this).selectCurrentItem_=function(){u.items.forEach(function(i){i.selected(u.track_.activeCues[0]===i.cue)})},u}_inheritsLoose(ChaptersButton2,i),__name(ChaptersButton2,"ChaptersButton");var a=ChaptersButton2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.buildWrapperCSSClass=/* @__PURE__ */__name(function buildWrapperCSSClass(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},"buildWrapperCSSClass"),a.update=/* @__PURE__ */__name(function update(a){if(!a||!a.track||"chapters"===a.track.kind){var s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),i.prototype.update.call(this)):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&i.prototype.update.call(this)}},"update"),a.setTrack=/* @__PURE__ */__name(function setTrack(i){if(this.track_!==i){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=i,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},"setTrack"),a.findChaptersTrack=/* @__PURE__ */__name(function findChaptersTrack(){for(var i=this.player_.textTracks()||[],a=i.length-1;a>=0;a--){var s=i[a];if(s.kind===this.kind_)return s}},"findChaptersTrack"),a.getMenuCaption=/* @__PURE__ */__name(function getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(LE(this.kind_))},"getMenuCaption"),a.createMenu=/* @__PURE__ */__name(function createMenu(){return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},"createMenu"),a.createItems=/* @__PURE__ */__name(function createItems(){var i=[];if(!this.track_)return i;var a=this.track_.cues;if(!a)return i;for(var s=0,o=a.length;s<o;s++){var u=a[s],_=new iP(this.player_,{track:this.track_,cue:u});i.push(_)}return i},"createItems"),ChaptersButton2}(nP);rP.prototype.kind_="chapters",rP.prototype.controlText_="Chapters",FE.registerComponent("ChaptersButton",rP);var aP=/* @__PURE__ */function(i){function DescriptionsButton2(a,s,o){var u;u=i.call(this,a,s,o)||this;var _=a.textTracks(),x=fE(_assertThisInitialized(u),u.handleTracksChange);return _.addEventListener("change",x),u.on("dispose",function(){_.removeEventListener("change",x)}),u}_inheritsLoose(DescriptionsButton2,i),__name(DescriptionsButton2,"DescriptionsButton");var a=DescriptionsButton2.prototype;return a.handleTracksChange=/* @__PURE__ */__name(function handleTracksChange(i){for(var a=this.player().textTracks(),s=!1,o=0,u=a.length;o<u;o++){var _=a[o];if(_.kind!==this.kind_&&"showing"===_.mode){s=!0;break}}s?this.disable():this.enable()},"handleTracksChange"),a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-descriptions-button "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.buildWrapperCSSClass=/* @__PURE__ */__name(function buildWrapperCSSClass(){return"vjs-descriptions-button "+i.prototype.buildWrapperCSSClass.call(this)},"buildWrapperCSSClass"),DescriptionsButton2}(nP);aP.prototype.kind_="descriptions",aP.prototype.controlText_="Descriptions",FE.registerComponent("DescriptionsButton",aP);var sP=/* @__PURE__ */function(i){function SubtitlesButton2(a,s,o){return i.call(this,a,s,o)||this}_inheritsLoose(SubtitlesButton2,i),__name(SubtitlesButton2,"SubtitlesButton");var a=SubtitlesButton2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.buildWrapperCSSClass=/* @__PURE__ */__name(function buildWrapperCSSClass(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},"buildWrapperCSSClass"),SubtitlesButton2}(nP);sP.prototype.kind_="subtitles",sP.prototype.controlText_="Subtitles",FE.registerComponent("SubtitlesButton",sP);var oP=/* @__PURE__ */function(i){function CaptionSettingsMenuItem2(a,s){var o;return s.track={player:a,kind:s.kind,label:s.kind+" settings",selectable:!1,default:!1,mode:"disabled"},s.selectable=!1,s.name="CaptionSettingsMenuItem",(o=i.call(this,a,s)||this).addClass("vjs-texttrack-settings"),o.controlText(", opens "+s.kind+" settings dialog"),o}return _inheritsLoose(CaptionSettingsMenuItem2,i),__name(CaptionSettingsMenuItem2,"CaptionSettingsMenuItem"),CaptionSettingsMenuItem2.prototype.handleClick=/* @__PURE__ */__name(function handleClick(i){this.player().getChild("textTrackSettings").open()},"handleClick"),CaptionSettingsMenuItem2}(eP);FE.registerComponent("CaptionSettingsMenuItem",oP);var lP=/* @__PURE__ */function(i){function CaptionsButton2(a,s,o){return i.call(this,a,s,o)||this}_inheritsLoose(CaptionsButton2,i),__name(CaptionsButton2,"CaptionsButton");var a=CaptionsButton2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.buildWrapperCSSClass=/* @__PURE__ */__name(function buildWrapperCSSClass(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},"buildWrapperCSSClass"),a.createItems=/* @__PURE__ */__name(function createItems(){var a=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new oP(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,a)},"createItems"),CaptionsButton2}(nP);lP.prototype.kind_="captions",lP.prototype.controlText_="Captions",FE.registerComponent("CaptionsButton",lP);var cP=/* @__PURE__ */function(i){function SubsCapsMenuItem2(){return i.apply(this,arguments)||this}return _inheritsLoose(SubsCapsMenuItem2,i),__name(SubsCapsMenuItem2,"SubsCapsMenuItem"),SubsCapsMenuItem2.prototype.createEl=/* @__PURE__ */__name(function createEl$12(a,s,o){var u=i.prototype.createEl.call(this,a,s,o),_=u.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(_.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),_.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),u},"createEl$1"),SubsCapsMenuItem2}(eP);FE.registerComponent("SubsCapsMenuItem",cP);var uP=/* @__PURE__ */function(i){function SubsCapsButton2(a,s){var o;return void 0===s&&(s={}),(o=i.call(this,a,s)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(o.player_.language_)>-1&&(o.label_="captions"),o.menuButton_.controlText(LE(o.label_)),o}_inheritsLoose(SubsCapsButton2,i),__name(SubsCapsButton2,"SubsCapsButton");var a=SubsCapsButton2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.buildWrapperCSSClass=/* @__PURE__ */__name(function buildWrapperCSSClass(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},"buildWrapperCSSClass"),a.createItems=/* @__PURE__ */__name(function createItems(){var a=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(a.push(new oP(this.player_,{kind:this.label_})),this.hideThreshold_+=1),a=i.prototype.createItems.call(this,a,cP)},"createItems"),SubsCapsButton2}(nP);uP.prototype.kinds_=["captions","subtitles"],uP.prototype.controlText_="Subtitles",FE.registerComponent("SubsCapsButton",uP);var dP=/* @__PURE__ */function(i){function AudioTrackMenuItem2(a,s){var o,u=s.track,_=a.audioTracks();s.label=u.label||u.language||"Unknown",s.selected=u.enabled,(o=i.call(this,a,s)||this).track=u,o.addClass("vjs-"+u.kind+"-menu-item");var x=/* @__PURE__ */__name(function changeHandler2(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];o.handleTracksChange.apply(_assertThisInitialized(o),a)},"changeHandler");return _.addEventListener("change",x),o.on("dispose",function(){_.removeEventListener("change",x)}),o}_inheritsLoose(AudioTrackMenuItem2,i),__name(AudioTrackMenuItem2,"AudioTrackMenuItem");var a=AudioTrackMenuItem2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl$12(a,s,o){var u=i.prototype.createEl.call(this,a,s,o),_=u.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(_.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),_.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),u},"createEl$1"),a.handleClick=/* @__PURE__ */__name(function handleClick(a){if(i.prototype.handleClick.call(this,a),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var s=this.player_.audioTracks(),o=0;o<s.length;o++){var u=s[o];u!==this.track&&(u.enabled=u===this.track)}},"handleClick"),a.handleTracksChange=/* @__PURE__ */__name(function handleTracksChange(i){this.selected(this.track.enabled)},"handleTracksChange"),AudioTrackMenuItem2}(qk);FE.registerComponent("AudioTrackMenuItem",dP);var hP=/* @__PURE__ */function(i){function AudioTrackButton2(a,s){return void 0===s&&(s={}),s.tracks=a.audioTracks(),i.call(this,a,s)||this}_inheritsLoose(AudioTrackButton2,i),__name(AudioTrackButton2,"AudioTrackButton");var a=AudioTrackButton2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.buildWrapperCSSClass=/* @__PURE__ */__name(function buildWrapperCSSClass(){return"vjs-audio-button "+i.prototype.buildWrapperCSSClass.call(this)},"buildWrapperCSSClass"),a.createItems=/* @__PURE__ */__name(function createItems(i){void 0===i&&(i=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];i.push(new dP(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return i},"createItems"),AudioTrackButton2}(Vk);hP.prototype.controlText_="Audio Track",FE.registerComponent("AudioTrackButton",hP);var pP=/* @__PURE__ */function(i){function PlaybackRateMenuItem2(a,s){var o,u=s.rate,_=parseFloat(u,10);return s.label=u,s.selected=_===a.playbackRate(),s.selectable=!0,s.multiSelectable=!1,(o=i.call(this,a,s)||this).label=u,o.rate=_,o.on(a,"ratechange",function(i){return o.update(i)}),o}_inheritsLoose(PlaybackRateMenuItem2,i),__name(PlaybackRateMenuItem2,"PlaybackRateMenuItem");var a=PlaybackRateMenuItem2.prototype;return a.handleClick=/* @__PURE__ */__name(function handleClick(a){i.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},"handleClick"),a.update=/* @__PURE__ */__name(function update(i){this.selected(this.player().playbackRate()===this.rate)},"update"),PlaybackRateMenuItem2}(qk);pP.prototype.contentElType="button",FE.registerComponent("PlaybackRateMenuItem",pP);var mP=/* @__PURE__ */function(i){function PlaybackRateMenuButton2(a,s){var o;return(o=i.call(this,a,s)||this).menuButton_.el_.setAttribute("aria-describedby",o.labelElId_),o.updateVisibility(),o.updateLabel(),o.on(a,"loadstart",function(i){return o.updateVisibility(i)}),o.on(a,"ratechange",function(i){return o.updateLabel(i)}),o.on(a,"playbackrateschange",function(i){return o.handlePlaybackRateschange(i)}),o}_inheritsLoose(PlaybackRateMenuButton2,i),__name(PlaybackRateMenuButton2,"PlaybackRateMenuButton");var a=PlaybackRateMenuButton2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl$12(){var a=i.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),a.appendChild(this.labelEl_),a},"createEl$1"),a.dispose=/* @__PURE__ */__name(function dispose(){this.labelEl_=null,i.prototype.dispose.call(this)},"dispose"),a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.buildWrapperCSSClass=/* @__PURE__ */__name(function buildWrapperCSSClass(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},"buildWrapperCSSClass"),a.createItems=/* @__PURE__ */__name(function createItems(){for(var i=this.playbackRates(),a=[],s=i.length-1;s>=0;s--)a.push(new pP(this.player(),{rate:i[s]+"x"}));return a},"createItems"),a.updateARIAAttributes=/* @__PURE__ */__name(function updateARIAAttributes(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},"updateARIAAttributes"),a.handleClick=/* @__PURE__ */__name(function handleClick(i){var a=this.player().playbackRate(),s=this.playbackRates(),o=(s.indexOf(a)+1)%s.length;this.player().playbackRate(s[o])},"handleClick"),a.handlePlaybackRateschange=/* @__PURE__ */__name(function handlePlaybackRateschange(i){this.update()},"handlePlaybackRateschange"),a.playbackRates=/* @__PURE__ */__name(function playbackRates(){var i=this.player();return i.playbackRates&&i.playbackRates()||[]},"playbackRates"),a.playbackRateSupported=/* @__PURE__ */__name(function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},"playbackRateSupported"),a.updateVisibility=/* @__PURE__ */__name(function updateVisibility(i){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},"updateVisibility"),a.updateLabel=/* @__PURE__ */__name(function updateLabel(i){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},"updateLabel"),PlaybackRateMenuButton2}(Bk);mP.prototype.controlText_="Playback Rate",FE.registerComponent("PlaybackRateMenuButton",mP);var fP=/* @__PURE__ */function(i){function Spacer2(){return i.apply(this,arguments)||this}_inheritsLoose(Spacer2,i),__name(Spacer2,"Spacer");var a=Spacer2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-spacer "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.createEl=/* @__PURE__ */__name(function createEl2(a,s,o){return void 0===a&&(a="div"),void 0===s&&(s={}),void 0===o&&(o={}),s.className||(s.className=this.buildCSSClass()),i.prototype.createEl.call(this,a,s,o)},"createEl"),Spacer2}(FE);FE.registerComponent("Spacer",fP);var gP=/* @__PURE__ */function(i){function CustomControlSpacer2(){return i.apply(this,arguments)||this}_inheritsLoose(CustomControlSpacer2,i),__name(CustomControlSpacer2,"CustomControlSpacer");var a=CustomControlSpacer2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-custom-control-spacer "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:" "})},"createEl"),CustomControlSpacer2}(fP);FE.registerComponent("CustomControlSpacer",gP);var _P=/* @__PURE__ */function(i){function ControlBar2(){return i.apply(this,arguments)||this}return _inheritsLoose(ControlBar2,i),__name(ControlBar2,"ControlBar"),ControlBar2.prototype.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},"createEl"),ControlBar2}(FE);_P.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in An&&_P.prototype.options_.children.splice(_P.prototype.options_.children.length-1,0,"pictureInPictureToggle"),FE.registerComponent("ControlBar",_P);var yP=/* @__PURE__ */function(i){function ErrorDisplay2(a,s){var o;return(o=i.call(this,a,s)||this).on(a,"error",function(i){return o.open(i)}),o}_inheritsLoose(ErrorDisplay2,i),__name(ErrorDisplay2,"ErrorDisplay");var a=ErrorDisplay2.prototype;return a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},"buildCSSClass"),a.content=/* @__PURE__ */__name(function content(){var i=this.player().error();return i?this.localize(i.message):""},"content"),ErrorDisplay2}(HE);yP.prototype.options_=_extends({},HE.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),FE.registerComponent("ErrorDisplay",yP);var vP="vjs-text-track-settings",bP=["#000","Black"],TP=["#00F","Blue"],SP=["#0FF","Cyan"],xP=["#0F0","Green"],wP=["#F0F","Magenta"],AP=["#F00","Red"],CP=["#FFF","White"],EP=["#FF0","Yellow"],MP=["1","Opaque"],kP=["0.5","Semi-Transparent"],PP=["0","Transparent"],IP={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[bP,CP,AP,xP,TP,EP,wP,SP]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[MP,kP,PP]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[CP,bP,AP,xP,TP,EP,wP,SP]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:/* @__PURE__ */__name(function parser(i){return"1.00"===i?null:Number(i)},"parser")},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[MP,kP]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[PP,kP,MP]}};function parseOptionValue(i,a){if(a&&(i=a(i)),i&&"none"!==i)return i}function getSelectedOptionValue(i,a){return parseOptionValue(i.options[i.options.selectedIndex].value,a)}function setSelectedOption(i,a,s){if(a)for(var o=0;o<i.options.length;o++)if(parseOptionValue(i.options[o].value,s)===a){i.selectedIndex=o;break}}IP.windowColor.options=IP.backgroundColor.options,__name(parseOptionValue,"parseOptionValue"),__name(getSelectedOptionValue,"getSelectedOptionValue"),__name(setSelectedOption,"setSelectedOption");var LP=/* @__PURE__ */function(i){function TextTrackSettings2(a,s){var o;return s.temporary=!1,(o=i.call(this,a,s)||this).updateDisplay=o.updateDisplay.bind(_assertThisInitialized(o)),o.fill(),o.hasBeenOpened_=o.hasBeenFilled_=!0,o.endDialog=createEl("p",{className:"vjs-control-text",textContent:o.localize("End of dialog window.")}),o.el().appendChild(o.endDialog),o.setDefaults(),void 0===s.persistTextTrackSettings&&(o.options_.persistTextTrackSettings=o.options_.playerOptions.persistTextTrackSettings),o.on(o.$(".vjs-done-button"),"click",function(){o.saveSettings(),o.close()}),o.on(o.$(".vjs-default-button"),"click",function(){o.setDefaults(),o.updateDisplay()}),each(IP,function(i){o.on(o.$(i.selector),"change",o.updateDisplay)}),o.options_.persistTextTrackSettings&&o.restoreSettings(),o}_inheritsLoose(TextTrackSettings2,i),__name(TextTrackSettings2,"TextTrackSettings");var a=TextTrackSettings2.prototype;return a.dispose=/* @__PURE__ */__name(function dispose(){this.endDialog=null,i.prototype.dispose.call(this)},"dispose"),a.createElSelect_=/* @__PURE__ */__name(function createElSelect_(i,a,s){var o=this;void 0===a&&(a=""),void 0===s&&(s="label");var u=IP[i],_=u.id.replace("%s",this.id_),x=[a,_].join(" ").trim();return["<"+s+' id="'+_+'" class="'+("label"===s?"vjs-label":"")+'">',this.localize(u.label),"</"+s+">",'<select aria-labelledby="'+x+'">'].concat(u.options.map(function(i){var a=_+"-"+i[1].replace(/\W+/g,"");return['<option id="'+a+'" value="'+i[0]+'" ','aria-labelledby="'+x+" "+a+'">',o.localize(i[1]),"</option>"].join("")})).concat("</select>").join("")},"createElSelect_"),a.createElFgColor_=/* @__PURE__ */__name(function createElFgColor_(){var i="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",i),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",i),"</span>","</fieldset>"].join("")},"createElFgColor_"),a.createElBgColor_=/* @__PURE__ */__name(function createElBgColor_(){var i="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",i),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",i),"</span>","</fieldset>"].join("")},"createElBgColor_"),a.createElWinColor_=/* @__PURE__ */__name(function createElWinColor_(){var i="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+i+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",i),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",i),"</span>","</fieldset>"].join("")},"createElWinColor_"),a.createElColors_=/* @__PURE__ */__name(function createElColors_(){return createEl("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},"createElColors_"),a.createElFont_=/* @__PURE__ */__name(function createElFont_(){return createEl("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},"createElFont_"),a.createElControls_=/* @__PURE__ */__name(function createElControls_(){var i=this.localize("restore all settings to the default values");return createEl("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+i+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+i+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},"createElControls_"),a.content=/* @__PURE__ */__name(function content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},"content"),a.label=/* @__PURE__ */__name(function label(){return this.localize("Caption Settings Dialog")},"label"),a.description=/* @__PURE__ */__name(function description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},"description"),a.buildCSSClass=/* @__PURE__ */__name(function buildCSSClass(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},"buildCSSClass"),a.getValues=/* @__PURE__ */__name(function getValues(){var i=this;return reduce(IP,function(a,s,o){var u=getSelectedOptionValue(i.$(s.selector),s.parser);return void 0!==u&&(a[o]=u),a},{})},"getValues"),a.setValues=/* @__PURE__ */__name(function setValues(i){var a=this;each(IP,function(s,o){setSelectedOption(a.$(s.selector),i[o],s.parser)})},"setValues"),a.setDefaults=/* @__PURE__ */__name(function setDefaults(){var i=this;each(IP,function(a){var s=a.hasOwnProperty("default")?a.default:0;i.$(a.selector).selectedIndex=s})},"setDefaults"),a.restoreSettings=/* @__PURE__ */__name(function restoreSettings(){var i;try{i=JSON.parse(Tn.localStorage.getItem(vP))}catch(a){wC.warn(a)}i&&this.setValues(i)},"restoreSettings"),a.saveSettings=/* @__PURE__ */__name(function saveSettings(){if(this.options_.persistTextTrackSettings){var i=this.getValues();try{Object.keys(i).length?Tn.localStorage.setItem(vP,JSON.stringify(i)):Tn.localStorage.removeItem(vP)}catch(a){wC.warn(a)}}},"saveSettings"),a.updateDisplay=/* @__PURE__ */__name(function updateDisplay(){var i=this.player_.getChild("textTrackDisplay");i&&i.updateDisplay()},"updateDisplay"),a.conditionalBlur_=/* @__PURE__ */__name(function conditionalBlur_(){this.previouslyActiveEl_=null;var i=this.player_.controlBar,a=i&&i.subsCapsButton,s=i&&i.captionsButton;a?a.focus():s&&s.focus()},"conditionalBlur_"),TextTrackSettings2}(HE);FE.registerComponent("TextTrackSettings",LP);var DP=/* @__PURE__ */function(i){function ResizeManager2(a,s){var o,u=s.ResizeObserver||Tn.ResizeObserver;null===s.ResizeObserver&&(u=!1);var _=mergeOptions$3({createEl:!u,reportTouchActivity:!1},s);return(o=i.call(this,a,_)||this).ResizeObserver=s.ResizeObserver||Tn.ResizeObserver,o.loadListener_=null,o.resizeObserver_=null,o.debouncedHandler_=_E(function(){o.resizeHandler()},100,!1,_assertThisInitialized(o)),u?(o.resizeObserver_=new o.ResizeObserver(o.debouncedHandler_),o.resizeObserver_.observe(a.el())):(o.loadListener_=function(){if(o.el_&&o.el_.contentWindow){var i=o.debouncedHandler_,a=o.unloadListener_=function(){off(this,"resize",i),off(this,"unload",a),a=null};on(o.el_.contentWindow,"unload",a),on(o.el_.contentWindow,"resize",i)}},o.one("load",o.loadListener_)),o}_inheritsLoose(ResizeManager2,i),__name(ResizeManager2,"ResizeManager");var a=ResizeManager2.prototype;return a.createEl=/* @__PURE__ */__name(function createEl2(){return i.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},"createEl"),a.resizeHandler=/* @__PURE__ */__name(function resizeHandler(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},"resizeHandler"),a.dispose=/* @__PURE__ */__name(function dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,i.prototype.dispose.call(this)},"dispose"),ResizeManager2}(FE);FE.registerComponent("ResizeManager",DP);var RP={trackingThreshold:20,liveTolerance:15},OP=/* @__PURE__ */function(i){function LiveTracker2(a,s){var o,u=mergeOptions$3(RP,s,{createEl:!1});return(o=i.call(this,a,u)||this).handleVisibilityChange_=function(i){return o.handleVisibilityChange(i)},o.trackLiveHandler_=function(){return o.trackLive_()},o.handlePlay_=function(i){return o.handlePlay(i)},o.handleFirstTimeupdate_=function(i){return o.handleFirstTimeupdate(i)},o.handleSeeked_=function(i){return o.handleSeeked(i)},o.seekToLiveEdge_=function(i){return o.seekToLiveEdge(i)},o.reset_(),o.on(o.player_,"durationchange",function(i){return o.handleDurationchange(i)}),o.on(o.player_,"canplay",function(){return o.toggleTracking()}),HC&&"hidden"in An&&"visibilityState"in An&&o.on(An,"visibilitychange",o.handleVisibilityChange_),o}_inheritsLoose(LiveTracker2,i),__name(LiveTracker2,"LiveTracker");var a=LiveTracker2.prototype;return a.handleVisibilityChange=/* @__PURE__ */__name(function handleVisibilityChange(){this.player_.duration()===1/0&&(An.hidden?this.stopTracking():this.startTracking())},"handleVisibilityChange"),a.trackLive_=/* @__PURE__ */__name(function trackLive_(){var i=this.player_.seekable();if(i&&i.length){var a=Number(Tn.performance.now().toFixed(4)),s=-1===this.lastTime_?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),u=this.player_.currentTime(),_=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-u)>this.options_.liveTolerance;this.timeupdateSeen_&&o!==1/0||(_=!1),_!==this.behindLiveEdge_&&(this.behindLiveEdge_=_,this.trigger("liveedgechange"))}},"trackLive_"),a.handleDurationchange=/* @__PURE__ */__name(function handleDurationchange(){this.toggleTracking()},"handleDurationchange"),a.toggleTracking=/* @__PURE__ */__name(function toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},"toggleTracking"),a.startTracking=/* @__PURE__ */__name(function startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,mE),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},"startTracking"),a.handleFirstTimeupdate=/* @__PURE__ */__name(function handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},"handleFirstTimeupdate"),a.handleSeeked=/* @__PURE__ */__name(function handleSeeked(){var i=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&i>2,this.nextSeekedFromUser_=!1,this.trackLive_()},"handleSeeked"),a.handlePlay=/* @__PURE__ */__name(function handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},"handlePlay"),a.reset_=/* @__PURE__ */__name(function reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},"reset_"),a.nextSeekedFromUser=/* @__PURE__ */__name(function nextSeekedFromUser(){this.nextSeekedFromUser_=!0},"nextSeekedFromUser"),a.stopTracking=/* @__PURE__ */__name(function stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},"stopTracking"),a.seekableEnd=/* @__PURE__ */__name(function seekableEnd(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.end(s));return a.length?a.sort()[a.length-1]:1/0},"seekableEnd"),a.seekableStart=/* @__PURE__ */__name(function seekableStart(){for(var i=this.player_.seekable(),a=[],s=i?i.length:0;s--;)a.push(i.start(s));return a.length?a.sort()[0]:0},"seekableStart"),a.liveWindow=/* @__PURE__ */__name(function liveWindow(){var i=this.liveCurrentTime();return i===1/0?0:i-this.seekableStart()},"liveWindow"),a.isLive=/* @__PURE__ */__name(function isLive(){return this.isTracking()},"isLive"),a.atLiveEdge=/* @__PURE__ */__name(function atLiveEdge(){return!this.behindLiveEdge()},"atLiveEdge"),a.liveCurrentTime=/* @__PURE__ */__name(function liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()},"liveCurrentTime"),a.pastSeekEnd=/* @__PURE__ */__name(function pastSeekEnd(){var i=this.seekableEnd();return-1!==this.lastSeekEnd_&&i!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=i,this.pastSeekEnd_},"pastSeekEnd"),a.behindLiveEdge=/* @__PURE__ */__name(function behindLiveEdge(){return this.behindLiveEdge_},"behindLiveEdge"),a.isTracking=/* @__PURE__ */__name(function isTracking(){return"number"==typeof this.trackingInterval_},"isTracking"),a.seekToLiveEdge=/* @__PURE__ */__name(function seekToLiveEdge(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},"seekToLiveEdge"),a.dispose=/* @__PURE__ */__name(function dispose(){this.off(An,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),i.prototype.dispose.call(this)},"dispose"),LiveTracker2}(FE);FE.registerComponent("LiveTracker",OP);var NP,BP=/* @__PURE__ */__name(function sourcesetLoad2(i){var a=i.el();if(a.hasAttribute("src"))return i.triggerSourceset(a.src),!0;var s=i.$$("source"),o=[],u="";if(!s.length)return!1;for(var _=0;_<s.length;_++){var x=s[_].src;x&&-1===o.indexOf(x)&&o.push(x)}return!!o.length&&(1===o.length&&(u=o[0]),i.triggerSourceset(u),!0)},"sourcesetLoad"),FP=Object.defineProperty({},"innerHTML",{get:/* @__PURE__ */__name(function get2(){return this.cloneNode(!0).innerHTML},"get"),set:/* @__PURE__ */__name(function set2(i){var a=An.createElement(this.nodeName.toLowerCase());a.innerHTML=i;for(var s=An.createDocumentFragment();a.childNodes.length;)s.appendChild(a.childNodes[0]);return this.innerText="",Tn.Element.prototype.appendChild.call(this,s),this.innerHTML},"set")}),UP=/* @__PURE__ */__name(function getDescriptor2(i,a){for(var s={},o=0;o<i.length&&!((s=Object.getOwnPropertyDescriptor(i[o],a))&&s.set&&s.get);o++);return s.enumerable=!0,s.configurable=!0,s},"getDescriptor"),jP=/* @__PURE__ */__name(function getInnerHTMLDescriptor2(i){return UP([i.el(),Tn.HTMLMediaElement.prototype,Tn.Element.prototype,FP],"innerHTML")},"getInnerHTMLDescriptor"),VP=/* @__PURE__ */__name(function firstSourceWatch2(i){var a=i.el();if(!a.resetSourceWatch_){var s={},o=jP(i),u=/* @__PURE__ */__name(function appendWrapper2(s){return function(){for(var o=arguments.length,u=new Array(o),_=0;_<o;_++)u[_]=arguments[_];var x=s.apply(a,u);return BP(i),x}},"appendWrapper");["append","appendChild","insertAdjacentHTML"].forEach(function(i){a[i]&&(s[i]=a[i],a[i]=u(s[i]))}),Object.defineProperty(a,"innerHTML",mergeOptions$3(o,{set:u(o.set)})),a.resetSourceWatch_=function(){a.resetSourceWatch_=null,Object.keys(s).forEach(function(i){a[i]=s[i]}),Object.defineProperty(a,"innerHTML",o)},i.one("sourceset",a.resetSourceWatch_)}},"firstSourceWatch"),zP=Object.defineProperty({},"src",{get:/* @__PURE__ */__name(function get2(){return this.hasAttribute("src")?aM(Tn.Element.prototype.getAttribute.call(this,"src")):""},"get"),set:/* @__PURE__ */__name(function set2(i){return Tn.Element.prototype.setAttribute.call(this,"src",i),i},"set")}),HP=/* @__PURE__ */__name(function getSrcDescriptor2(i){return UP([i.el(),Tn.HTMLMediaElement.prototype,zP],"src")},"getSrcDescriptor"),$P=/* @__PURE__ */__name(function setupSourceset2(i){if(i.featuresSourceset){var a=i.el();if(!a.resetSourceset_){var s=HP(i),o=a.setAttribute,u=a.load;Object.defineProperty(a,"src",mergeOptions$3(s,{set:/* @__PURE__ */__name(function set2(o){var u=s.set.call(a,o);return i.triggerSourceset(a.src),u},"set")})),a.setAttribute=function(s,u){var _=o.call(a,s,u);return/src/i.test(s)&&i.triggerSourceset(a.src),_},a.load=function(){var s=u.call(a);return BP(i)||(i.triggerSourceset(""),VP(i)),s},a.currentSrc?i.triggerSourceset(a.currentSrc):BP(i)||VP(i),a.resetSourceset_=function(){a.resetSourceset_=null,a.load=u,a.setAttribute=o,Object.defineProperty(a,"src",s),a.resetSourceWatch_&&a.resetSourceWatch_()}}}},"setupSourceset"),GP=/* @__PURE__ */__name(function defineLazyProperty2(i,a,s,o){void 0===o&&(o=!0);var u=/* @__PURE__ */__name(function set3(s){return Object.defineProperty(i,a,{value:s,enumerable:!0,writable:!0})},"set"),_={configurable:!0,enumerable:!0,get:/* @__PURE__ */__name(function get2(){var i=s();return u(i),i},"get")};return o&&(_.set=u),Object.defineProperty(i,a,_)},"defineLazyProperty"),WP=/* @__PURE__ */function(i){function Html52(a,s){var o;o=i.call(this,a,s)||this;var u=a.source,_=!1;if(o.featuresVideoFrameCallback=o.featuresVideoFrameCallback&&"VIDEO"===o.el_.tagName,u&&(o.el_.currentSrc!==u.src||a.tag&&3===a.tag.initNetworkState_)?o.setSource(u):o.handleLateInit_(o.el_),a.enableSourceset&&o.setupSourcesetHandling_(),o.isScrubbing_=!1,o.el_.hasChildNodes()){for(var x=o.el_.childNodes,w=x.length,C=[];w--;){var L=x[w];"track"===L.nodeName.toLowerCase()&&(o.featuresNativeTextTracks?(o.remoteTextTrackEls().addTrackElement_(L),o.remoteTextTracks().addTrack(L.track),o.textTracks().addTrack(L.track),_||o.el_.hasAttribute("crossorigin")||!oM(L.src)||(_=!0)):C.push(L))}for(var B=0;B<C.length;B++)o.el_.removeChild(C[B])}return o.proxyNativeTracks_(),o.featuresNativeTextTracks&&_&&wC.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),o.restoreMetadataTracksInIOSNativePlayer_(),(WC||XC||FC)&&!0===a.nativeControlsForTouch&&o.setControls(!0),o.proxyWebkitFullscreen_(),o.triggerReady(),o}_inheritsLoose(Html52,i),__name(Html52,"Html5");var a=Html52.prototype;return a.dispose=/* @__PURE__ */__name(function dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),Html52.disposeMediaElement(this.el_),this.options_=null,i.prototype.dispose.call(this)},"dispose"),a.setupSourcesetHandling_=/* @__PURE__ */__name(function setupSourcesetHandling_(){$P(this)},"setupSourcesetHandling_"),a.restoreMetadataTracksInIOSNativePlayer_=/* @__PURE__ */__name(function restoreMetadataTracksInIOSNativePlayer_(){var i,a=this.textTracks(),s=/* @__PURE__ */__name(function takeMetadataTrackSnapshot2(){i=[];for(var s=0;s<a.length;s++){var o=a[s];"metadata"===o.kind&&i.push({track:o,storedMode:o.mode})}},"takeMetadataTrackSnapshot");s(),a.addEventListener("change",s),this.on("dispose",function(){return a.removeEventListener("change",s)});var o=/* @__PURE__ */__name(function restoreTrackMode2(){for(var s=0;s<i.length;s++){var o=i[s];"disabled"===o.track.mode&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}a.removeEventListener("change",restoreTrackMode2)},"restoreTrackMode");this.on("webkitbeginfullscreen",function(){a.removeEventListener("change",s),a.removeEventListener("change",o),a.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){a.removeEventListener("change",s),a.addEventListener("change",s),a.removeEventListener("change",o)})},"restoreMetadataTracksInIOSNativePlayer_"),a.overrideNative_=/* @__PURE__ */__name(function overrideNative_(i,a){var s=this;if(a===this["featuresNative"+i+"Tracks"]){var o=i.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(i){s.el()[o+"Tracks"].removeEventListener(i,s[o+"TracksListeners_"][i])}),this["featuresNative"+i+"Tracks"]=!a,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},"overrideNative_"),a.overrideNativeAudioTracks=/* @__PURE__ */__name(function overrideNativeAudioTracks(i){this.overrideNative_("Audio",i)},"overrideNativeAudioTracks"),a.overrideNativeVideoTracks=/* @__PURE__ */__name(function overrideNativeVideoTracks(i){this.overrideNative_("Video",i)},"overrideNativeVideoTracks"),a.proxyNativeTracksForType_=/* @__PURE__ */__name(function proxyNativeTracksForType_(i){var a=this,s=fM[i],o=this.el()[s.getterName],u=this[s.getterName]();if(this["featuresNative"+s.capitalName+"Tracks"]&&o&&o.addEventListener){var _={change:/* @__PURE__ */__name(function change(s){var o={type:"change",target:u,currentTarget:u,srcElement:u};u.trigger(o),"text"===i&&a[gM.remoteText.getterName]().trigger(o)},"change"),addtrack:/* @__PURE__ */__name(function addtrack(i){u.addTrack(i.track)},"addtrack"),removetrack:/* @__PURE__ */__name(function removetrack(i){u.removeTrack(i.track)},"removetrack")},x=/* @__PURE__ */__name(function removeOldTracks2(){for(var i=[],a=0;a<u.length;a++){for(var s=!1,_=0;_<o.length;_++)if(o[_]===u[a]){s=!0;break}s||i.push(u[a])}for(;i.length;)u.removeTrack(i.shift())},"removeOldTracks");this[s.getterName+"Listeners_"]=_,Object.keys(_).forEach(function(i){var s=_[i];o.addEventListener(i,s),a.on("dispose",function(a){return o.removeEventListener(i,s)})}),this.on("loadstart",x),this.on("dispose",function(i){return a.off("loadstart",x)})}},"proxyNativeTracksForType_"),a.proxyNativeTracks_=/* @__PURE__ */__name(function proxyNativeTracks_(){var i=this;fM.names.forEach(function(a){i.proxyNativeTracksForType_(a)})},"proxyNativeTracks_"),a.createEl=/* @__PURE__ */__name(function createEl2(){var i=this.options_.tag;if(!i||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(i){var a=i.cloneNode(!0);i.parentNode&&i.parentNode.insertBefore(a,i),Html52.disposeMediaElement(i),i=a}else{i=An.createElement("video");var s=mergeOptions$3({},this.options_.tag&&getAttributes(this.options_.tag));WC&&!0===this.options_.nativeControlsForTouch||delete s.controls,setAttributes(i,assign(s,{id:this.options_.techId,class:"vjs-tech"}))}i.playerId=this.options_.playerId}void 0!==this.options_.preload&&setAttribute(i,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var o=["loop","muted","playsinline","autoplay"],u=0;u<o.length;u++){var _=o[u],x=this.options_[_];void 0!==x&&(x?setAttribute(i,_,_):removeAttribute(i,_),i[_]=x)}return i},"createEl"),a.handleLateInit_=/* @__PURE__ */__name(function handleLateInit_(i){if(0!==i.networkState&&3!==i.networkState){if(0===i.readyState){var a=!1,s=/* @__PURE__ */__name(function setLoadstartFired2(){a=!0},"setLoadstartFired");this.on("loadstart",s);var o=/* @__PURE__ */__name(function triggerLoadstart2(){a||this.trigger("loadstart")},"triggerLoadstart");return this.on("loadedmetadata",o),void this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),a||this.trigger("loadstart")})}var u=["loadstart"];u.push("loadedmetadata"),i.readyState>=2&&u.push("loadeddata"),i.readyState>=3&&u.push("canplay"),i.readyState>=4&&u.push("canplaythrough"),this.ready(function(){u.forEach(function(i){this.trigger(i)},this)})}},"handleLateInit_"),a.setScrubbing=/* @__PURE__ */__name(function setScrubbing(i){this.isScrubbing_=i},"setScrubbing"),a.scrubbing=/* @__PURE__ */__name(function scrubbing(){return this.isScrubbing_},"scrubbing"),a.setCurrentTime=/* @__PURE__ */__name(function setCurrentTime(i){try{this.isScrubbing_&&this.el_.fastSeek&&KC?this.el_.fastSeek(i):this.el_.currentTime=i}catch(a){wC(a,"Video is not ready. (Video.js)")}},"setCurrentTime"),a.duration=/* @__PURE__ */__name(function duration2(){var i=this;if(this.el_.duration===1/0&&NC&&VC&&0===this.el_.currentTime){var a=/* @__PURE__ */__name(function checkProgress2(){i.el_.currentTime>0&&(i.el_.duration===1/0&&i.trigger("durationchange"),i.off("timeupdate",checkProgress2))},"checkProgress");return this.on("timeupdate",a),NaN}return this.el_.duration||NaN},"duration"),a.width=/* @__PURE__ */__name(function width(){return this.el_.offsetWidth},"width"),a.height=/* @__PURE__ */__name(function height(){return this.el_.offsetHeight},"height"),a.proxyWebkitFullscreen_=/* @__PURE__ */__name(function proxyWebkitFullscreen_(){var i=this;if("webkitDisplayingFullscreen"in this.el_){var a=/* @__PURE__ */__name(function endFn2(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},"endFn"),s=/* @__PURE__ */__name(function beginFn2(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))},"beginFn");this.on("webkitbeginfullscreen",s),this.on("dispose",function(){i.off("webkitbeginfullscreen",s),i.off("webkitendfullscreen",a)})}},"proxyWebkitFullscreen_"),a.supportsFullScreen=/* @__PURE__ */__name(function supportsFullScreen(){if("function"==typeof this.el_.webkitEnterFullScreen){var i=Tn.navigator&&Tn.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i))return!0}return!1},"supportsFullScreen"),a.enterFullScreen=/* @__PURE__ */__name(function enterFullScreen(){var i=this.el_;if(i.paused&&i.networkState<=i.HAVE_METADATA)silencePromise(this.el_.play()),this.setTimeout(function(){i.pause();try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{i.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},"enterFullScreen"),a.exitFullScreen=/* @__PURE__ */__name(function exitFullScreen(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},"exitFullScreen"),a.requestPictureInPicture=/* @__PURE__ */__name(function requestPictureInPicture(){return this.el_.requestPictureInPicture()},"requestPictureInPicture"),a.requestVideoFrameCallback=/* @__PURE__ */__name(function requestVideoFrameCallback(a){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(a):i.prototype.requestVideoFrameCallback.call(this,a)},"requestVideoFrameCallback"),a.cancelVideoFrameCallback=/* @__PURE__ */__name(function cancelVideoFrameCallback(a){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(a):i.prototype.cancelVideoFrameCallback.call(this,a)},"cancelVideoFrameCallback"),a.src=/* @__PURE__ */__name(function src2(i){if(void 0===i)return this.el_.src;this.setSrc(i)},"src"),a.reset=/* @__PURE__ */__name(function reset2(){Html52.resetMediaElement(this.el_)},"reset"),a.currentSrc=/* @__PURE__ */__name(function currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},"currentSrc"),a.setControls=/* @__PURE__ */__name(function setControls(i){this.el_.controls=!!i},"setControls"),a.addTextTrack=/* @__PURE__ */__name(function addTextTrack(a,s,o){return this.featuresNativeTextTracks?this.el_.addTextTrack(a,s,o):i.prototype.addTextTrack.call(this,a,s,o)},"addTextTrack"),a.createRemoteTextTrack=/* @__PURE__ */__name(function createRemoteTextTrack(a){if(!this.featuresNativeTextTracks)return i.prototype.createRemoteTextTrack.call(this,a);var s=An.createElement("track");return a.kind&&(s.kind=a.kind),a.label&&(s.label=a.label),(a.language||a.srclang)&&(s.srclang=a.language||a.srclang),a.default&&(s.default=a.default),a.id&&(s.id=a.id),a.src&&(s.src=a.src),s},"createRemoteTextTrack"),a.addRemoteTextTrack=/* @__PURE__ */__name(function addRemoteTextTrack(a,s){var o=i.prototype.addRemoteTextTrack.call(this,a,s);return this.featuresNativeTextTracks&&this.el().appendChild(o),o},"addRemoteTextTrack"),a.removeRemoteTextTrack=/* @__PURE__ */__name(function removeRemoteTextTrack(a){if(i.prototype.removeRemoteTextTrack.call(this,a),this.featuresNativeTextTracks)for(var s=this.$$("track"),o=s.length;o--;)a!==s[o]&&a!==s[o].track||this.el().removeChild(s[o])},"removeRemoteTextTrack"),a.getVideoPlaybackQuality=/* @__PURE__ */__name(function getVideoPlaybackQuality(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var i={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(i.droppedVideoFrames=this.el().webkitDroppedFrameCount,i.totalVideoFrames=this.el().webkitDecodedFrameCount),Tn.performance&&"function"==typeof Tn.performance.now?i.creationTime=Tn.performance.now():Tn.performance&&Tn.performance.timing&&"number"==typeof Tn.performance.timing.navigationStart&&(i.creationTime=Tn.Date.now()-Tn.performance.timing.navigationStart),i},"getVideoPlaybackQuality"),Html52}(yM);GP(WP,"TEST_VID",function(){if(isReal()){var i=An.createElement("video"),a=An.createElement("track");return a.kind="captions",a.srclang="en",a.label="English",i.appendChild(a),i}}),WP.isSupported=function(){try{WP.TEST_VID.volume=.5}catch(i){return!1}return!(!WP.TEST_VID||!WP.TEST_VID.canPlayType)},WP.canPlayType=function(i){return WP.TEST_VID.canPlayType(i)},WP.canPlaySource=function(i,a){return WP.canPlayType(i.type)},WP.canControlVolume=function(){try{var i=WP.TEST_VID.volume;WP.TEST_VID.volume=i/2+.1;var a=i!==WP.TEST_VID.volume;return a&&QC?(Tn.setTimeout(function(){WP&&WP.prototype&&(WP.prototype.featuresVolumeControl=i!==WP.TEST_VID.volume)}),!1):a}catch(s){return!1}},WP.canMuteVolume=function(){try{var i=WP.TEST_VID.muted;return WP.TEST_VID.muted=!i,WP.TEST_VID.muted?setAttribute(WP.TEST_VID,"muted","muted"):removeAttribute(WP.TEST_VID,"muted"),i!==WP.TEST_VID.muted}catch(a){return!1}},WP.canControlPlaybackRate=function(){if(NC&&VC&&zC<58)return!1;try{var i=WP.TEST_VID.playbackRate;return WP.TEST_VID.playbackRate=i/2+.1,i!==WP.TEST_VID.playbackRate}catch(a){return!1}},WP.canOverrideAttributes=function(){try{var i=/* @__PURE__ */__name(function noop3(){},"noop");Object.defineProperty(An.createElement("video"),"src",{get:i,set:i}),Object.defineProperty(An.createElement("audio"),"src",{get:i,set:i}),Object.defineProperty(An.createElement("video"),"innerHTML",{get:i,set:i}),Object.defineProperty(An.createElement("audio"),"innerHTML",{get:i,set:i})}catch(a){return!1}return!0},WP.supportsNativeTextTracks=function(){return KC||QC&&VC},WP.supportsNativeVideoTracks=function(){return!(!WP.TEST_VID||!WP.TEST_VID.videoTracks)},WP.supportsNativeAudioTracks=function(){return!(!WP.TEST_VID||!WP.TEST_VID.audioTracks)},WP.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(i){var a=i[0],s=i[1];GP(WP.prototype,a,function(){return WP[s]()},!0)}),WP.prototype.featuresVolumeControl=WP.canControlVolume(),WP.prototype.movingMediaElementInDOM=!QC,WP.prototype.featuresFullscreenResize=!0,WP.prototype.featuresProgressEvents=!0,WP.prototype.featuresTimeupdateEvents=!0,WP.prototype.featuresVideoFrameCallback=!(!WP.TEST_VID||!WP.TEST_VID.requestVideoFrameCallback),WP.patchCanPlayType=function(){BC>=4&&!UC&&!VC&&(NP=WP.TEST_VID&&WP.TEST_VID.constructor.prototype.canPlayType,WP.TEST_VID.constructor.prototype.canPlayType=function(i){return i&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(i)?"maybe":NP.call(this,i)})},WP.unpatchCanPlayType=function(){var i=WP.TEST_VID.constructor.prototype.canPlayType;return NP&&(WP.TEST_VID.constructor.prototype.canPlayType=NP),i},WP.patchCanPlayType(),WP.disposeMediaElement=function(i){if(i){for(i.parentNode&&i.parentNode.removeChild(i);i.hasChildNodes();)i.removeChild(i.firstChild);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch(a){}}()}},WP.resetMediaElement=function(i){if(i){for(var a=i.querySelectorAll("source"),s=a.length;s--;)i.removeChild(a[s]);i.removeAttribute("src"),"function"==typeof i.load&&function(){try{i.load()}catch(a){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(i){WP.prototype[i]=function(){return this.el_[i]||this.el_.hasAttribute(i)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(i){WP.prototype["set"+LE(i)]=function(a){this.el_[i]=a,a?this.el_.setAttribute(i,i):this.el_.removeAttribute(i)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(i){WP.prototype[i]=function(){return this.el_[i]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(i){WP.prototype["set"+LE(i)]=function(a){this.el_[i]=a}}),["pause","load","play"].forEach(function(i){WP.prototype[i]=function(){return this.el_[i]()}}),yM.withSourceHandlers(WP),WP.nativeSourceHandler={},WP.nativeSourceHandler.canPlayType=function(i){try{return WP.TEST_VID.canPlayType(i)}catch(a){return""}},WP.nativeSourceHandler.canHandleSource=function(i,a){if(i.type)return WP.nativeSourceHandler.canPlayType(i.type);if(i.src){var s=sM(i.src);return WP.nativeSourceHandler.canPlayType("video/"+s)}return""},WP.nativeSourceHandler.handleSource=function(i,a,s){a.setSrc(i.src)},WP.nativeSourceHandler.dispose=function(){},WP.registerSourceHandler(WP.nativeSourceHandler),yM.registerTech("Html5",WP);var qP=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],XP={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},QP=["tiny","xsmall","small","medium","large","xlarge","huge"],KP={};QP.forEach(function(i){var a="x"===i.charAt(0)?"x-"+i.substring(1):i;KP[i]="vjs-layout-"+a});var YP={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},JP=/* @__PURE__ */function(i){function Player2(a,s,o){var u;if(a.id=a.id||s.id||"vjs_video_"+newGUID(),(s=assign(Player2.getTagSettings(a),s)).initChildren=!1,s.createEl=!1,s.evented=!1,s.reportTouchActivity=!1,!s.language)if("function"==typeof a.closest){var _=a.closest("[lang]");_&&_.getAttribute&&(s.language=_.getAttribute("lang"))}else for(var x=a;x&&1===x.nodeType;){if(getAttributes(x).hasOwnProperty("lang")){s.language=x.getAttribute("lang");break}x=x.parentNode}if((u=i.call(this,null,s,o)||this).boundDocumentFullscreenChange_=function(i){return u.documentFullscreenChange_(i)},u.boundFullWindowOnEscKey_=function(i){return u.fullWindowOnEscKey(i)},u.boundUpdateStyleEl_=function(i){return u.updateStyleEl_(i)},u.boundApplyInitTime_=function(i){return u.applyInitTime_(i)},u.boundUpdateCurrentBreakpoint_=function(i){return u.updateCurrentBreakpoint_(i)},u.boundHandleTechClick_=function(i){return u.handleTechClick_(i)},u.boundHandleTechDoubleClick_=function(i){return u.handleTechDoubleClick_(i)},u.boundHandleTechTouchStart_=function(i){return u.handleTechTouchStart_(i)},u.boundHandleTechTouchMove_=function(i){return u.handleTechTouchMove_(i)},u.boundHandleTechTouchEnd_=function(i){return u.handleTechTouchEnd_(i)},u.boundHandleTechTap_=function(i){return u.handleTechTap_(i)},u.isFullscreen_=!1,u.log=AC(u.id_),u.fsApi_=_C,u.isPosterFromTech_=!1,u.queuedCallbacks_=[],u.isReady_=!1,u.hasStarted_=!1,u.userActive_=!1,u.debugEnabled_=!1,u.audioOnlyMode_=!1,u.audioPosterMode_=!1,u.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!u.options_||!u.options_.techOrder||!u.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(u.tag=a,u.tagAttributes=a&&getAttributes(a),u.language(u.options_.language),s.languages){var w={};Object.getOwnPropertyNames(s.languages).forEach(function(i){w[i.toLowerCase()]=s.languages[i]}),u.languages_=w}else u.languages_=Player2.prototype.options_.languages;u.resetCache_(),u.poster_=s.poster||"",u.controls_=!!s.controls,a.controls=!1,a.removeAttribute("controls"),u.changingSrc_=!1,u.playCallbacks_=[],u.playTerminatedQueue_=[],a.hasAttribute("autoplay")?u.autoplay(!0):u.autoplay(u.options_.autoplay),s.plugins&&Object.keys(s.plugins).forEach(function(i){if("function"!=typeof u[i])throw new Error('plugin "'+i+'" does not exist')}),u.scrubbing_=!1,u.el_=u.createEl(),evented(_assertThisInitialized(u),{eventBusKey:"el_"}),u.fsApi_.requestFullscreen&&(on(An,u.fsApi_.fullscreenchange,u.boundDocumentFullscreenChange_),u.on(u.fsApi_.fullscreenchange,u.boundDocumentFullscreenChange_)),u.fluid_&&u.on(["playerreset","resize"],u.boundUpdateStyleEl_);var C=mergeOptions$3(u.options_);s.plugins&&Object.keys(s.plugins).forEach(function(i){u[i](s.plugins[i])}),s.debug&&u.debug(!0),u.options_.playerOptions=C,u.middleware_=[],u.playbackRates(s.playbackRates),u.initChildren(),u.isAudio("audio"===a.nodeName.toLowerCase()),u.controls()?u.addClass("vjs-controls-enabled"):u.addClass("vjs-controls-disabled"),u.el_.setAttribute("role","region"),u.isAudio()?u.el_.setAttribute("aria-label",u.localize("Audio Player")):u.el_.setAttribute("aria-label",u.localize("Video Player")),u.isAudio()&&u.addClass("vjs-audio"),u.flexNotSupported_()&&u.addClass("vjs-no-flex"),WC&&u.addClass("vjs-touch-enabled"),QC||u.addClass("vjs-workinghover"),Player2.players[u.id_]=_assertThisInitialized(u);var L=dC.split(".")[0];return u.addClass("vjs-v"+L),u.userActive(!0),u.reportUserActivity(),u.one("play",function(i){return u.listenForUserActivity_(i)}),u.on("stageclick",function(i){return u.handleStageClick_(i)}),u.on("keydown",function(i){return u.handleKeyDown(i)}),u.on("languagechange",function(i){return u.handleLanguagechange(i)}),u.breakpoints(u.options_.breakpoints),u.responsive(u.options_.responsive),u.on("ready",function(){u.audioPosterMode(u.options_.audioPosterMode),u.audioOnlyMode(u.options_.audioOnlyMode)}),u}_inheritsLoose(Player2,i),__name(Player2,"Player");var a=Player2.prototype;return a.dispose=/* @__PURE__ */__name(function dispose(){var a=this;this.trigger("dispose"),this.off("dispose"),off(An,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),off(An,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Player2.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),clearCacheForPlayer(this),_M.names.forEach(function(i){var s=_M[i],o=a[s.getterName]();o&&o.off&&o.off()}),i.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},"dispose"),a.createEl=/* @__PURE__ */__name(function createEl2(){var a,s=this.tag,o=this.playerElIngest_=s.parentNode&&s.parentNode.hasAttribute&&s.parentNode.hasAttribute("data-vjs-player"),u="video-js"===this.tag.tagName.toLowerCase();o?a=this.el_=s.parentNode:u||(a=this.el_=i.prototype.createEl.call(this,"div"));var _=getAttributes(s);if(u){for(a=this.el_=s,s=this.tag=An.createElement("video");a.children.length;)s.appendChild(a.firstChild);hasClass(a,"video-js")||addClass(a,"video-js"),a.appendChild(s),o=this.playerElIngest_=a,Object.keys(a).forEach(function(i){try{s[i]=a[i]}catch(o){}})}if(s.setAttribute("tabindex","-1"),_.tabindex="-1",(HC||VC&&GC)&&(s.setAttribute("role","application"),_.role="application"),s.removeAttribute("width"),s.removeAttribute("height"),"width"in _&&delete _.width,"height"in _&&delete _.height,Object.getOwnPropertyNames(_).forEach(function(i){u&&"class"===i||a.setAttribute(i,_[i]),u&&s.setAttribute(i,_[i])}),s.playerId=s.id,s.id+="_html5_api",s.className="vjs-tech",s.player=a.player=this,this.addClass("vjs-paused"),!0!==Tn.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=aE("vjs-styles-dimensions");var x=ZC(".vjs-styles-defaults"),w=ZC("head");w.insertBefore(this.styleEl_,x?x.nextSibling:w.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var C=s.getElementsByTagName("a"),L=0;L<C.length;L++){var B=C.item(L);addClass(B,"vjs-hidden"),B.setAttribute("hidden","hidden")}return s.initNetworkState_=s.networkState,s.parentNode&&!o&&s.parentNode.insertBefore(a,s),prependTo(s,a),this.children_.unshift(s),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a},"createEl"),a.crossOrigin=/* @__PURE__ */__name(function crossOrigin(i){if(!i)return this.techGet_("crossOrigin");"anonymous"===i||"use-credentials"===i?this.techCall_("setCrossOrigin",i):wC.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+i+'"')},"crossOrigin"),a.width=/* @__PURE__ */__name(function width(i){return this.dimension("width",i)},"width"),a.height=/* @__PURE__ */__name(function height(i){return this.dimension("height",i)},"height"),a.dimension=/* @__PURE__ */__name(function dimension(i,a){var s=i+"_";if(void 0===a)return this[s]||0;if(""===a||"auto"===a)return this[s]=void 0,void this.updateStyleEl_();var o=parseFloat(a);isNaN(o)?wC.error('Improper value "'+a+'" supplied for for '+i):(this[s]=o,this.updateStyleEl_())},"dimension"),a.fluid=/* @__PURE__ */__name(function fluid(i){var a=this;if(void 0===i)return!!this.fluid_;this.fluid_=!!i,bE(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),i?(this.addClass("vjs-fluid"),this.fill(!1),TE(this,function(){a.on(["playerreset","resize"],a.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},"fluid"),a.fill=/* @__PURE__ */__name(function fill(i){if(void 0===i)return!!this.fill_;this.fill_=!!i,i?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},"fill"),a.aspectRatio=/* @__PURE__ */__name(function aspectRatio(i){if(void 0===i)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(i))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=i,this.fluid(!0),this.updateStyleEl_()},"aspectRatio"),a.updateStyleEl_=/* @__PURE__ */__name(function updateStyleEl_(){if(!0!==Tn.VIDEOJS_NO_DYNAMIC_STYLE){var i,a,s,o=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),u=o[1]/o[0];i=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/u:this.videoWidth()||300,a=void 0!==this.height_?this.height_:i*u,s=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(s),sE(this.styleEl_,"\n      ."+s+" {\n        width: "+i+"px;\n        height: "+a+"px;\n      }\n\n      ."+s+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*u+"%;\n      }\n    ")}else{var _="number"==typeof this.width_?this.width_:this.options_.width,x="number"==typeof this.height_?this.height_:this.options_.height,w=this.tech_&&this.tech_.el();w&&(_>=0&&(w.width=_),x>=0&&(w.height=x))}},"updateStyleEl_"),a.loadTech_=/* @__PURE__ */__name(function loadTech_(i,a){var s=this;this.tech_&&this.unloadTech_();var o=LE(i),u=i.charAt(0).toLowerCase()+i.slice(1);"Html5"!==o&&this.tag&&(yM.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var _=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(_=!1);var x={source:a,autoplay:_,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+u+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};_M.names.forEach(function(i){var a=_M[i];x[a.getterName]=s[a.privateName]}),assign(x,this.options_[o]),assign(x,this.options_[u]),assign(x,this.options_[i.toLowerCase()]),this.tag&&(x.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(x.startTime=this.cache_.currentTime);var w=yM.getTech(i);if(!w)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new w(x),this.tech_.ready(fE(this,this.handleTechReady_),!0),VE.jsonToTextTracks(this.textTracksJson_||[],this.tech_),qP.forEach(function(i){s.on(s.tech_,i,function(a){return s["handleTech"+LE(i)+"_"](a)})}),Object.keys(XP).forEach(function(i){s.on(s.tech_,i,function(a){0===s.tech_.playbackRate()&&s.tech_.seeking()?s.queuedCallbacks_.push({callback:s["handleTech"+XP[i]+"_"].bind(s),event:a}):s["handleTech"+XP[i]+"_"](a)})}),this.on(this.tech_,"loadstart",function(i){return s.handleTechLoadStart_(i)}),this.on(this.tech_,"sourceset",function(i){return s.handleTechSourceset_(i)}),this.on(this.tech_,"waiting",function(i){return s.handleTechWaiting_(i)}),this.on(this.tech_,"ended",function(i){return s.handleTechEnded_(i)}),this.on(this.tech_,"seeking",function(i){return s.handleTechSeeking_(i)}),this.on(this.tech_,"play",function(i){return s.handleTechPlay_(i)}),this.on(this.tech_,"firstplay",function(i){return s.handleTechFirstPlay_(i)}),this.on(this.tech_,"pause",function(i){return s.handleTechPause_(i)}),this.on(this.tech_,"durationchange",function(i){return s.handleTechDurationChange_(i)}),this.on(this.tech_,"fullscreenchange",function(i,a){return s.handleTechFullscreenChange_(i,a)}),this.on(this.tech_,"fullscreenerror",function(i,a){return s.handleTechFullscreenError_(i,a)}),this.on(this.tech_,"enterpictureinpicture",function(i){return s.handleTechEnterPictureInPicture_(i)}),this.on(this.tech_,"leavepictureinpicture",function(i){return s.handleTechLeavePictureInPicture_(i)}),this.on(this.tech_,"error",function(i){return s.handleTechError_(i)}),this.on(this.tech_,"posterchange",function(i){return s.handleTechPosterChange_(i)}),this.on(this.tech_,"textdata",function(i){return s.handleTechTextData_(i)}),this.on(this.tech_,"ratechange",function(i){return s.handleTechRateChange_(i)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===o&&this.tag||prependTo(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},"loadTech_"),a.unloadTech_=/* @__PURE__ */__name(function unloadTech_(){var i=this;_M.names.forEach(function(a){var s=_M[a];i[s.privateName]=i[s.getterName]()}),this.textTracksJson_=VE.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},"unloadTech_"),a.tech=/* @__PURE__ */__name(function tech(i){return void 0===i&&wC.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},"tech"),a.addTechControlsListeners_=/* @__PURE__ */__name(function addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},"addTechControlsListeners_"),a.removeTechControlsListeners_=/* @__PURE__ */__name(function removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},"removeTechControlsListeners_"),a.handleTechReady_=/* @__PURE__ */__name(function handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},"handleTechReady_"),a.handleTechLoadStart_=/* @__PURE__ */__name(function handleTechLoadStart_(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},"handleTechLoadStart_"),a.manualAutoplay_=/* @__PURE__ */__name(function manualAutoplay_(i){var a=this;if(this.tech_&&"string"==typeof i){var s,o=/* @__PURE__ */__name(function resolveMuted2(){var i=a.muted();a.muted(!0);var s=/* @__PURE__ */__name(function restoreMuted2(){a.muted(i)},"restoreMuted");a.playTerminatedQueue_.push(s);var o=a.play();if(isPromise(o))return o.catch(function(i){throw s(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(i||""))})},"resolveMuted");if("any"!==i||this.muted()?s="muted"!==i||this.muted()?this.play():o():isPromise(s=this.play())&&(s=s.catch(o)),isPromise(s))return s.then(function(){a.trigger({type:"autoplay-success",autoplay:i})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:i})})}},"manualAutoplay_"),a.updateSourceCaches_=/* @__PURE__ */__name(function updateSourceCaches_(i){void 0===i&&(i="");var a=i,s="";"string"!=typeof a&&(a=i.src,s=i.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=EM(this,a)),this.cache_.source=mergeOptions$3({},i,{src:a,type:s});for(var o=this.cache_.sources.filter(function(i){return i.src&&i.src===a}),u=[],_=this.$$("source"),x=[],w=0;w<_.length;w++){var C=getAttributes(_[w]);u.push(C),C.src&&C.src===a&&x.push(C.src)}x.length&&!o.length?this.cache_.sources=u:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},"updateSourceCaches_"),a.handleTechSourceset_=/* @__PURE__ */__name(function handleTechSourceset_(i){var a=this;if(!this.changingSrc_){var s=/* @__PURE__ */__name(function updateSourceCaches2(i){return a.updateSourceCaches_(i)},"updateSourceCaches"),o=this.currentSource().src,u=i.src;o&&!/^blob:/.test(o)&&/^blob:/.test(u)&&(!this.lastSource_||this.lastSource_.tech!==u&&this.lastSource_.player!==o)&&(s=/* @__PURE__ */__name(function updateSourceCaches2(){},"updateSourceCaches")),s(u),i.src||this.tech_.any(["sourceset","loadstart"],function(i){if("sourceset"!==i.type){var s=a.techGet("currentSrc");a.lastSource_.tech=s,a.updateSourceCaches_(s)}})}this.lastSource_={player:this.currentSource().src,tech:i.src},this.trigger({src:i.src,type:"sourceset"})},"handleTechSourceset_"),a.hasStarted=/* @__PURE__ */__name(function hasStarted(i){if(void 0===i)return this.hasStarted_;i!==this.hasStarted_&&(this.hasStarted_=i,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},"hasStarted"),a.handleTechPlay_=/* @__PURE__ */__name(function handleTechPlay_(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},"handleTechPlay_"),a.handleTechRateChange_=/* @__PURE__ */__name(function handleTechRateChange_(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(i){return i.callback(i.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},"handleTechRateChange_"),a.handleTechWaiting_=/* @__PURE__ */__name(function handleTechWaiting_(){var i=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime(),s=/* @__PURE__ */__name(function timeUpdateListener2(){a!==i.currentTime()&&(i.removeClass("vjs-waiting"),i.off("timeupdate",timeUpdateListener2))},"timeUpdateListener");this.on("timeupdate",s)},"handleTechWaiting_"),a.handleTechCanPlay_=/* @__PURE__ */__name(function handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")},"handleTechCanPlay_"),a.handleTechCanPlayThrough_=/* @__PURE__ */__name(function handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},"handleTechCanPlayThrough_"),a.handleTechPlaying_=/* @__PURE__ */__name(function handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")},"handleTechPlaying_"),a.handleTechSeeking_=/* @__PURE__ */__name(function handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")},"handleTechSeeking_"),a.handleTechSeeked_=/* @__PURE__ */__name(function handleTechSeeked_(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},"handleTechSeeked_"),a.handleTechFirstPlay_=/* @__PURE__ */__name(function handleTechFirstPlay_(){this.options_.starttime&&(wC.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},"handleTechFirstPlay_"),a.handleTechPause_=/* @__PURE__ */__name(function handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},"handleTechPause_"),a.handleTechEnded_=/* @__PURE__ */__name(function handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},"handleTechEnded_"),a.handleTechDurationChange_=/* @__PURE__ */__name(function handleTechDurationChange_(){this.duration(this.techGet_("duration"))},"handleTechDurationChange_"),a.handleTechClick_=/* @__PURE__ */__name(function handleTechClick_(i){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,i):this.paused()?silencePromise(this.play()):this.pause()))},"handleTechClick_"),a.handleTechDoubleClick_=/* @__PURE__ */__name(function handleTechDoubleClick_(i){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(i.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,i):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},"handleTechDoubleClick_"),a.handleTechTap_=/* @__PURE__ */__name(function handleTechTap_(){this.userActive(!this.userActive())},"handleTechTap_"),a.handleTechTouchStart_=/* @__PURE__ */__name(function handleTechTouchStart_(){this.userWasActive=this.userActive()},"handleTechTouchStart_"),a.handleTechTouchMove_=/* @__PURE__ */__name(function handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()},"handleTechTouchMove_"),a.handleTechTouchEnd_=/* @__PURE__ */__name(function handleTechTouchEnd_(i){i.cancelable&&i.preventDefault()},"handleTechTouchEnd_"),a.handleStageClick_=/* @__PURE__ */__name(function handleStageClick_(){this.reportUserActivity()},"handleStageClick_"),a.toggleFullscreenClass_=/* @__PURE__ */__name(function toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},"toggleFullscreenClass_"),a.documentFullscreenChange_=/* @__PURE__ */__name(function documentFullscreenChange_(i){var a=i.target.player;if(!a||a===this){var s=this.el(),o=An[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},"documentFullscreenChange_"),a.handleTechFullscreenChange_=/* @__PURE__ */__name(function handleTechFullscreenChange_(i,a){var s=this;a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))},"handleTechFullscreenChange_"),a.handleTechFullscreenError_=/* @__PURE__ */__name(function handleTechFullscreenError_(i,a){this.trigger("fullscreenerror",a)},"handleTechFullscreenError_"),a.togglePictureInPictureClass_=/* @__PURE__ */__name(function togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},"togglePictureInPictureClass_"),a.handleTechEnterPictureInPicture_=/* @__PURE__ */__name(function handleTechEnterPictureInPicture_(i){this.isInPictureInPicture(!0)},"handleTechEnterPictureInPicture_"),a.handleTechLeavePictureInPicture_=/* @__PURE__ */__name(function handleTechLeavePictureInPicture_(i){this.isInPictureInPicture(!1)},"handleTechLeavePictureInPicture_"),a.handleTechError_=/* @__PURE__ */__name(function handleTechError_(){var i=this.tech_.error();this.error(i)},"handleTechError_"),a.handleTechTextData_=/* @__PURE__ */__name(function handleTechTextData_(){var i=null;arguments.length>1&&(i=arguments[1]),this.trigger("textdata",i)},"handleTechTextData_"),a.getCache=/* @__PURE__ */__name(function getCache(){return this.cache_},"getCache"),a.resetCache_=/* @__PURE__ */__name(function resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},"resetCache_"),a.techCall_=/* @__PURE__ */__name(function techCall_(i,a){this.ready(function(){if(i in xM)return set(this.middleware_,this.tech_,i,a);if(i in wM)return mediate(this.middleware_,this.tech_,i,a);try{this.tech_&&this.tech_[i](a)}catch(s){throw wC(s),s}},!0)},"techCall_"),a.techGet_=/* @__PURE__ */__name(function techGet_(i){if(this.tech_&&this.tech_.isReady_){if(i in SM)return get(this.middleware_,this.tech_,i);if(i in wM)return mediate(this.middleware_,this.tech_,i);try{return this.tech_[i]()}catch(a){if(void 0===this.tech_[i])throw wC("Video.js: "+i+" method not defined for "+this.techName_+" playback technology.",a),a;if("TypeError"===a.name)throw wC("Video.js: "+i+" unavailable on "+this.techName_+" playback technology element.",a),this.tech_.isReady_=!1,a;throw wC(a),a}}},"techGet_"),a.play=/* @__PURE__ */__name(function play(){var i=this,a=this.options_.Promise||Tn.Promise;return a?new a(function(a){i.play_(a)}):this.play_()},"play"),a.play_=/* @__PURE__ */__name(function play_(i){var a=this;void 0===i&&(i=silencePromise),this.playCallbacks_.push(i);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),o=Boolean(KC||QC);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s)return this.waitToPlay_=function(i){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!s&&o&&this.load());var u=this.techGet_("play");o&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===u?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(u)},"play_"),a.runPlayTerminatedQueue_=/* @__PURE__ */__name(function runPlayTerminatedQueue_(){var i=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],i.forEach(function(i){i()})},"runPlayTerminatedQueue_"),a.runPlayCallbacks_=/* @__PURE__ */__name(function runPlayCallbacks_(i){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(a){a(i)})},"runPlayCallbacks_"),a.pause=/* @__PURE__ */__name(function pause(){this.techCall_("pause")},"pause"),a.paused=/* @__PURE__ */__name(function paused(){return!1!==this.techGet_("paused")},"paused"),a.played=/* @__PURE__ */__name(function played(){return this.techGet_("played")||createTimeRanges(0,0)},"played"),a.scrubbing=/* @__PURE__ */__name(function scrubbing(i){if(void 0===i)return this.scrubbing_;this.scrubbing_=!!i,this.techCall_("setScrubbing",this.scrubbing_),i?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},"scrubbing"),a.currentTime=/* @__PURE__ */__name(function currentTime(i){return void 0!==i?(i<0&&(i=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",i),void(this.cache_.initTime=0)):(this.cache_.initTime=i,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},"currentTime"),a.applyInitTime_=/* @__PURE__ */__name(function applyInitTime_(){this.currentTime(this.cache_.initTime)},"applyInitTime_"),a.duration=/* @__PURE__ */__name(function duration2(i){if(void 0===i)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(i=parseFloat(i))<0&&(i=1/0),i!==this.cache_.duration&&(this.cache_.duration=i,i===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(i)||this.trigger("durationchange"))},"duration"),a.remainingTime=/* @__PURE__ */__name(function remainingTime(){return this.duration()-this.currentTime()},"remainingTime"),a.remainingTimeDisplay=/* @__PURE__ */__name(function remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())},"remainingTimeDisplay"),a.buffered=/* @__PURE__ */__name(function buffered(){var i=this.techGet_("buffered");return i&&i.length||(i=createTimeRanges(0,0)),i},"buffered"),a.bufferedPercent=/* @__PURE__ */__name(function bufferedPercent$12(){return bufferedPercent(this.buffered(),this.duration())},"bufferedPercent$1"),a.bufferedEnd=/* @__PURE__ */__name(function bufferedEnd(){var i=this.buffered(),a=this.duration(),s=i.end(i.length-1);return s>a&&(s=a),s},"bufferedEnd"),a.volume=/* @__PURE__ */__name(function volume(i){var a;return void 0!==i?(a=Math.max(0,Math.min(1,parseFloat(i))),this.cache_.volume=a,this.techCall_("setVolume",a),void(a>0&&this.lastVolume_(a))):(a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a)},"volume"),a.muted=/* @__PURE__ */__name(function muted(i){if(void 0===i)return this.techGet_("muted")||!1;this.techCall_("setMuted",i)},"muted"),a.defaultMuted=/* @__PURE__ */__name(function defaultMuted(i){return void 0!==i?this.techCall_("setDefaultMuted",i):this.techGet_("defaultMuted")||!1},"defaultMuted"),a.lastVolume_=/* @__PURE__ */__name(function lastVolume_(i){if(void 0===i||0===i)return this.cache_.lastVolume;this.cache_.lastVolume=i},"lastVolume_"),a.supportsFullScreen=/* @__PURE__ */__name(function supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1},"supportsFullScreen"),a.isFullscreen=/* @__PURE__ */__name(function isFullscreen(i){if(void 0!==i){var a=this.isFullscreen_;return this.isFullscreen_=Boolean(i),this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},"isFullscreen"),a.requestFullscreen=/* @__PURE__ */__name(function requestFullscreen(i){var a=this.options_.Promise||Tn.Promise;if(a){var s=this;return new a(function(a,o){function offHandler(){s.off("fullscreenerror",errorHandler),s.off("fullscreenchange",changeHandler)}function changeHandler(){offHandler(),a()}function errorHandler(i,a){offHandler(),o(a)}__name(offHandler,"offHandler"),__name(changeHandler,"changeHandler"),__name(errorHandler,"errorHandler"),s.one("fullscreenchange",changeHandler),s.one("fullscreenerror",errorHandler);var u=s.requestFullscreenHelper_(i);u&&(u.then(offHandler,offHandler),u.then(a,o))})}return this.requestFullscreenHelper_()},"requestFullscreen"),a.requestFullscreenHelper_=/* @__PURE__ */__name(function requestFullscreenHelper_(i){var a,s=this;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==i&&(a=i)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](a);return o&&o.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),o}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},"requestFullscreenHelper_"),a.exitFullscreen=/* @__PURE__ */__name(function exitFullscreen(){var i=this.options_.Promise||Tn.Promise;if(i){var a=this;return new i(function(i,s){function offHandler(){a.off("fullscreenerror",errorHandler),a.off("fullscreenchange",changeHandler)}function changeHandler(){offHandler(),i()}function errorHandler(i,a){offHandler(),s(a)}__name(offHandler,"offHandler"),__name(changeHandler,"changeHandler"),__name(errorHandler,"errorHandler"),a.one("fullscreenchange",changeHandler),a.one("fullscreenerror",errorHandler);var o=a.exitFullscreenHelper_();o&&(o.then(offHandler,offHandler),o.then(i,s))})}return this.exitFullscreenHelper_()},"exitFullscreen"),a.exitFullscreenHelper_=/* @__PURE__ */__name(function exitFullscreenHelper_(){var i=this;if(this.fsApi_.requestFullscreen){var a=An[this.fsApi_.exitFullscreen]();return a&&silencePromise(a.then(function(){return i.isFullscreen(!1)})),a}this.tech_.supportsFullScreen()&&!0==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},"exitFullscreenHelper_"),a.enterFullWindow=/* @__PURE__ */__name(function enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=An.documentElement.style.overflow,on(An,"keydown",this.boundFullWindowOnEscKey_),An.documentElement.style.overflow="hidden",addClass(An.body,"vjs-full-window"),this.trigger("enterFullWindow")},"enterFullWindow"),a.fullWindowOnEscKey=/* @__PURE__ */__name(function fullWindowOnEscKey(i){rx.isEventKey(i,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},"fullWindowOnEscKey"),a.exitFullWindow=/* @__PURE__ */__name(function exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,off(An,"keydown",this.boundFullWindowOnEscKey_),An.documentElement.style.overflow=this.docOrigOverflow,removeClass(An.body,"vjs-full-window"),this.trigger("exitFullWindow")},"exitFullWindow"),a.disablePictureInPicture=/* @__PURE__ */__name(function disablePictureInPicture(i){if(void 0===i)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",i),this.options_.disablePictureInPicture=i,this.trigger("disablepictureinpicturechanged")},"disablePictureInPicture"),a.isInPictureInPicture=/* @__PURE__ */__name(function isInPictureInPicture(i){return void 0!==i?(this.isInPictureInPicture_=!!i,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},"isInPictureInPicture"),a.requestPictureInPicture=/* @__PURE__ */__name(function requestPictureInPicture(){if("pictureInPictureEnabled"in An&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},"requestPictureInPicture"),a.exitPictureInPicture=/* @__PURE__ */__name(function exitPictureInPicture(){if("pictureInPictureEnabled"in An)return An.exitPictureInPicture()},"exitPictureInPicture"),a.handleKeyDown=/* @__PURE__ */__name(function handleKeyDown(i){var a=this.options_.userActions;a&&a.hotkeys&&(/* @__PURE__ */__name(function excludeElement2(i){var a=i.tagName.toLowerCase();if(i.isContentEditable)return!0;if("input"===a)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(i.type);return-1!==["textarea"].indexOf(a)},"excludeElement")(this.el_.ownerDocument.activeElement)||("function"==typeof a.hotkeys?a.hotkeys.call(this,i):this.handleHotkeys(i)))},"handleKeyDown"),a.handleHotkeys=/* @__PURE__ */__name(function handleHotkeys(i){var a=this.options_.userActions?this.options_.userActions.hotkeys:{},s=a.fullscreenKey,o=void 0===s?function(i){return rx.isEventKey(i,"f")}:s,u=a.muteKey,_=void 0===u?function(i){return rx.isEventKey(i,"m")}:u,x=a.playPauseKey,w=void 0===x?function(i){return rx.isEventKey(i,"k")||rx.isEventKey(i,"Space")}:x;if(o.call(this,i)){i.preventDefault(),i.stopPropagation();var C=FE.getComponent("FullscreenToggle");!1!==An[this.fsApi_.fullscreenEnabled]&&C.prototype.handleClick.call(this,i)}else if(_.call(this,i)){i.preventDefault(),i.stopPropagation(),FE.getComponent("MuteToggle").prototype.handleClick.call(this,i)}else if(w.call(this,i)){i.preventDefault(),i.stopPropagation(),FE.getComponent("PlayToggle").prototype.handleClick.call(this,i)}},"handleHotkeys"),a.canPlayType=/* @__PURE__ */__name(function canPlayType2(i){for(var a,s=0,o=this.options_.techOrder;s<o.length;s++){var u=o[s],_=yM.getTech(u);if(_||(_=FE.getComponent(u)),_){if(_.isSupported()&&(a=_.canPlayType(i)))return a}else wC.error('The "'+u+'" tech is undefined. Skipped browser support check for that tech.')}return""},"canPlayType"),a.selectSource=/* @__PURE__ */__name(function selectSource(i){var a=this,s=this.options_.techOrder.map(function(i){return[i,yM.getTech(i)]}).filter(function(i){var a=i[0],s=i[1];return s?s.isSupported():(wC.error('The "'+a+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=/* @__PURE__ */__name(function findFirstPassingTechSourcePair2(i,a,s){var o;return i.some(function(i){return a.some(function(a){if(o=s(i,a))return!0})}),o},"findFirstPassingTechSourcePair"),u=/* @__PURE__ */__name(function flip2(i){return function(a,s){return i(s,a)}},"flip"),_=/* @__PURE__ */__name(function finder2(i,s){var o=i[0];if(i[1].canPlaySource(s,a.options_[o.toLowerCase()]))return{source:s,tech:o}},"finder");return(this.options_.sourceOrder?o(i,s,u(_)):o(s,i,_))||!1},"selectSource"),a.handleSrc_=/* @__PURE__ */__name(function handleSrc_(i,a){var s=this;if(void 0===i)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=MM(i);if(o.length){if(this.changingSrc_=!0,a||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),setSource(this,o[0],function(i,u){if(s.middleware_=u,a||(s.cache_.sources=o),s.updateSourceCaches_(i),s.src_(i))return o.length>1?s.handleSrc_(o.slice(1)):(s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),void s.triggerReady());setTech(u,s.tech_)}),this.options_.retryOnError&&o.length>1){var u=/* @__PURE__ */__name(function retry3(){s.error(null),s.handleSrc_(o.slice(1),!0)},"retry"),_=/* @__PURE__ */__name(function stopListeningForErrors2(){s.off("error",u)},"stopListeningForErrors");this.one("error",u),this.one("playing",_),this.resetRetryOnError_=function(){s.off("error",u),s.off("playing",_)}}}else this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0)},"handleSrc_"),a.src=/* @__PURE__ */__name(function src2(i){return this.handleSrc_(i,!1)},"src"),a.src_=/* @__PURE__ */__name(function src_(i){var a=this,s=this.selectSource([i]);return!s||(DE(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",i):this.techCall_("src",i.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){a.changingSrc_=!1}),!1))},"src_"),a.load=/* @__PURE__ */__name(function load(){this.techCall_("load")},"load"),a.reset=/* @__PURE__ */__name(function reset2(){var i=this,a=this.options_.Promise||Tn.Promise;this.paused()||!a?this.doReset_():silencePromise(this.play().then(function(){return i.doReset_()}))},"reset"),a.doReset_=/* @__PURE__ */__name(function doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),bE(this)&&this.trigger("playerreset")},"doReset_"),a.resetControlBarUI_=/* @__PURE__ */__name(function resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},"resetControlBarUI_"),a.resetProgressBar_=/* @__PURE__ */__name(function resetProgressBar_(){this.currentTime(0);var i=this.controlBar||{},a=i.durationDisplay,s=i.remainingTimeDisplay;a&&a.updateContent(),s&&s.updateContent()},"resetProgressBar_"),a.resetPlaybackRate_=/* @__PURE__ */__name(function resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},"resetPlaybackRate_"),a.resetVolumeBar_=/* @__PURE__ */__name(function resetVolumeBar_(){this.volume(1),this.trigger("volumechange")},"resetVolumeBar_"),a.currentSources=/* @__PURE__ */__name(function currentSources(){var i=this.currentSource(),a=[];return 0!==Object.keys(i).length&&a.push(i),this.cache_.sources||a},"currentSources"),a.currentSource=/* @__PURE__ */__name(function currentSource(){return this.cache_.source||{}},"currentSource"),a.currentSrc=/* @__PURE__ */__name(function currentSrc(){return this.currentSource()&&this.currentSource().src||""},"currentSrc"),a.currentType=/* @__PURE__ */__name(function currentType(){return this.currentSource()&&this.currentSource().type||""},"currentType"),a.preload=/* @__PURE__ */__name(function preload(i){return void 0!==i?(this.techCall_("setPreload",i),void(this.options_.preload=i)):this.techGet_("preload")},"preload"),a.autoplay=/* @__PURE__ */__name(function autoplay(i){if(void 0===i)return this.options_.autoplay||!1;var a;"string"==typeof i&&/(any|play|muted)/.test(i)||!0===i&&this.options_.normalizeAutoplay?(this.options_.autoplay=i,this.manualAutoplay_("string"==typeof i?i:"play"),a=!1):this.options_.autoplay=!!i,a=void 0===a?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},"autoplay"),a.playsinline=/* @__PURE__ */__name(function playsinline(i){return void 0!==i?(this.techCall_("setPlaysinline",i),this.options_.playsinline=i,this):this.techGet_("playsinline")},"playsinline"),a.loop=/* @__PURE__ */__name(function loop(i){return void 0!==i?(this.techCall_("setLoop",i),void(this.options_.loop=i)):this.techGet_("loop")},"loop"),a.poster=/* @__PURE__ */__name(function poster(i){if(void 0===i)return this.poster_;i||(i=""),i!==this.poster_&&(this.poster_=i,this.techCall_("setPoster",i),this.isPosterFromTech_=!1,this.trigger("posterchange"))},"poster"),a.handleTechPosterChange_=/* @__PURE__ */__name(function handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var i=this.tech_.poster()||"";i!==this.poster_&&(this.poster_=i,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},"handleTechPosterChange_"),a.controls=/* @__PURE__ */__name(function controls(i){if(void 0===i)return!!this.controls_;i=!!i,this.controls_!==i&&(this.controls_=i,this.usingNativeControls()&&this.techCall_("setControls",i),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},"controls"),a.usingNativeControls=/* @__PURE__ */__name(function usingNativeControls(i){if(void 0===i)return!!this.usingNativeControls_;i=!!i,this.usingNativeControls_!==i&&(this.usingNativeControls_=i,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},"usingNativeControls"),a.error=/* @__PURE__ */__name(function error(i){var a=this;if(void 0===i)return this.error_||null;if(pC("beforeerror").forEach(function(s){var o=s(a,i);isObject(o)&&!Array.isArray(o)||"string"==typeof o||"number"==typeof o||null===o?i=o:a.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&i&&4===i.code){var s=/* @__PURE__ */__name(function triggerSuppressedError2(){this.error(i)},"triggerSuppressedError");return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),void this.one("loadstart",function(){this.off(["click","touchstart"],s)})}if(null===i)return this.error_=i,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new MediaError(i),this.addClass("vjs-error"),wC.error("(CODE:"+this.error_.code+" "+MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),pC("error").forEach(function(i){return i(a,a.error_)})},"error"),a.reportUserActivity=/* @__PURE__ */__name(function reportUserActivity(i){this.userActivity_=!0},"reportUserActivity"),a.userActive=/* @__PURE__ */__name(function userActive(i){if(void 0===i)return this.userActive_;if((i=!!i)!==this.userActive_){if(this.userActive_=i,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(i){i.stopPropagation(),i.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},"userActive"),a.listenForUserActivity_=/* @__PURE__ */__name(function listenForUserActivity_(){var i,a,s,o=fE(this,this.reportUserActivity),u=/* @__PURE__ */__name(function handleMouseMove2(i){i.screenX===a&&i.screenY===s||(a=i.screenX,s=i.screenY,o())},"handleMouseMove"),_=/* @__PURE__ */__name(function handleMouseDown2(){o(),this.clearInterval(i),i=this.setInterval(o,250)},"handleMouseDown"),x=/* @__PURE__ */__name(function handleMouseUpAndMouseLeave2(a){o(),this.clearInterval(i)},"handleMouseUpAndMouseLeave");this.on("mousedown",_),this.on("mousemove",u),this.on("mouseup",x),this.on("mouseleave",x);var w,C=this.getChild("controlBar");!C||QC||NC||(C.on("mouseenter",function(i){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),C.on("mouseleave",function(i){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(w);var i=this.options_.inactivityTimeout;i<=0||(w=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},i))}},250)},"listenForUserActivity_"),a.playbackRate=/* @__PURE__ */__name(function playbackRate(i){if(void 0===i)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",i)},"playbackRate"),a.defaultPlaybackRate=/* @__PURE__ */__name(function defaultPlaybackRate(i){return void 0!==i?this.techCall_("setDefaultPlaybackRate",i):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},"defaultPlaybackRate"),a.isAudio=/* @__PURE__ */__name(function isAudio(i){if(void 0===i)return!!this.isAudio_;this.isAudio_=!!i},"isAudio"),a.enableAudioOnlyUI_=/* @__PURE__ */__name(function enableAudioOnlyUI_(){var i=this;this.addClass("vjs-audio-only-mode");var a=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();a.forEach(function(a){a!==s&&a.el_&&!a.hasClass("vjs-hidden")&&(a.hide(),i.audioOnlyCache_.hiddenChildren.push(a))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},"enableAudioOnlyUI_"),a.disableAudioOnlyUI_=/* @__PURE__ */__name(function disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(i){return i.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},"disableAudioOnlyUI_"),a.audioOnlyMode=/* @__PURE__ */__name(function audioOnlyMode(i){var a=this;if("boolean"!=typeof i||i===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=i;var s=this.options_.Promise||Tn.Promise;if(s){if(i){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return a.enableAudioOnlyUI_()})}return s.resolve().then(function(){return a.disableAudioOnlyUI_()})}i?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},"audioOnlyMode"),a.enablePosterModeUI_=/* @__PURE__ */__name(function enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},"enablePosterModeUI_"),a.disablePosterModeUI_=/* @__PURE__ */__name(function disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},"disablePosterModeUI_"),a.audioPosterMode=/* @__PURE__ */__name(function audioPosterMode(i){var a=this;if("boolean"!=typeof i||i===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=i;var s=this.options_.Promise||Tn.Promise;return s?i?this.audioOnlyMode()?this.audioOnlyMode(!1).then(function(){a.enablePosterModeUI_()}):s.resolve().then(function(){a.enablePosterModeUI_()}):s.resolve().then(function(){a.disablePosterModeUI_()}):i?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},"audioPosterMode"),a.addTextTrack=/* @__PURE__ */__name(function addTextTrack(i,a,s){if(this.tech_)return this.tech_.addTextTrack(i,a,s)},"addTextTrack"),a.addRemoteTextTrack=/* @__PURE__ */__name(function addRemoteTextTrack(i,a){if(this.tech_)return this.tech_.addRemoteTextTrack(i,a)},"addRemoteTextTrack"),a.removeRemoteTextTrack=/* @__PURE__ */__name(function removeRemoteTextTrack(i){void 0===i&&(i={});var a=i.track;if(a||(a=i),this.tech_)return this.tech_.removeRemoteTextTrack(a)},"removeRemoteTextTrack"),a.getVideoPlaybackQuality=/* @__PURE__ */__name(function getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")},"getVideoPlaybackQuality"),a.videoWidth=/* @__PURE__ */__name(function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},"videoWidth"),a.videoHeight=/* @__PURE__ */__name(function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},"videoHeight"),a.language=/* @__PURE__ */__name(function language(i){if(void 0===i)return this.language_;this.language_!==String(i).toLowerCase()&&(this.language_=String(i).toLowerCase(),bE(this)&&this.trigger("languagechange"))},"language"),a.languages=/* @__PURE__ */__name(function languages(){return mergeOptions$3(Player2.prototype.options_.languages,this.languages_)},"languages"),a.toJSON=/* @__PURE__ */__name(function toJSON(){var i=mergeOptions$3(this.options_),a=i.tracks;i.tracks=[];for(var s=0;s<a.length;s++){var o=a[s];(o=mergeOptions$3(o)).player=void 0,i.tracks[s]=o}return i},"toJSON"),a.createModal=/* @__PURE__ */__name(function createModal(i,a){var s=this;(a=a||{}).content=i||"";var o=new HE(this,a);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},"createModal"),a.updateCurrentBreakpoint_=/* @__PURE__ */__name(function updateCurrentBreakpoint_(){if(this.responsive())for(var i=this.currentBreakpoint(),a=this.currentWidth(),s=0;s<QP.length;s++){var o=QP[s];if(a<=this.breakpoints_[o]){if(i===o)return;i&&this.removeClass(KP[i]),this.addClass(KP[o]),this.breakpoint_=o;break}}},"updateCurrentBreakpoint_"),a.removeCurrentBreakpoint_=/* @__PURE__ */__name(function removeCurrentBreakpoint_(){var i=this.currentBreakpointClass();this.breakpoint_="",i&&this.removeClass(i)},"removeCurrentBreakpoint_"),a.breakpoints=/* @__PURE__ */__name(function breakpoints(i){return void 0===i||(this.breakpoint_="",this.breakpoints_=assign({},YP,i),this.updateCurrentBreakpoint_()),assign(this.breakpoints_)},"breakpoints"),a.responsive=/* @__PURE__ */__name(function responsive(i){return void 0===i?this.responsive_:(i=Boolean(i))!==this.responsive_?(this.responsive_=i,i?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),i):void 0},"responsive"),a.currentBreakpoint=/* @__PURE__ */__name(function currentBreakpoint(){return this.breakpoint_},"currentBreakpoint"),a.currentBreakpointClass=/* @__PURE__ */__name(function currentBreakpointClass(){return KP[this.breakpoint_]||""},"currentBreakpointClass"),a.loadMedia=/* @__PURE__ */__name(function loadMedia(i,a){var s=this;if(i&&"object"==typeof i){this.reset(),this.cache_.media=mergeOptions$3(i);var o=this.cache_.media,u=o.artwork,_=o.poster,x=o.src,w=o.textTracks;!u&&_&&(this.cache_.media.artwork=[{src:_,type:CM(_)}]),x&&this.src(x),_&&this.poster(_),Array.isArray(w)&&w.forEach(function(i){return s.addRemoteTextTrack(i,!1)}),this.ready(a)}},"loadMedia"),a.getMedia=/* @__PURE__ */__name(function getMedia(){if(!this.cache_.media){var i=this.poster(),a={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(i){return{kind:i.kind,label:i.label,language:i.language,src:i.src}})};return i&&(a.poster=i,a.artwork=[{src:a.poster,type:CM(a.poster)}]),a}return mergeOptions$3(this.cache_.media)},"getMedia"),Player2.getTagSettings=/* @__PURE__ */__name(function getTagSettings(i){var a={sources:[],tracks:[]},s=getAttributes(i),o=s["data-setup"];if(hasClass(i,"vjs-fill")&&(s.fill=!0),hasClass(i,"vjs-fluid")&&(s.fluid=!0),null!==o){var u=ox(o||"{}"),_=u[0],x=u[1];_&&wC.error(_),assign(s,x)}if(assign(a,s),i.hasChildNodes())for(var w=i.childNodes,C=0,L=w.length;C<L;C++){var B=w[C],U=B.nodeName.toLowerCase();"source"===U?a.sources.push(getAttributes(B)):"track"===U&&a.tracks.push(getAttributes(B))}return a},"getTagSettings"),a.flexNotSupported_=/* @__PURE__ */__name(function flexNotSupported_(){var i=An.createElement("i");return!("flexBasis"in i.style||"webkitFlexBasis"in i.style||"mozFlexBasis"in i.style||"msFlexBasis"in i.style||"msFlexOrder"in i.style)},"flexNotSupported_"),a.debug=/* @__PURE__ */__name(function debug(i){if(void 0===i)return this.debugEnabled_;i?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},"debug"),a.playbackRates=/* @__PURE__ */__name(function playbackRates(i){if(void 0===i)return this.cache_.playbackRates;Array.isArray(i)&&i.every(function(i){return"number"==typeof i})&&(this.cache_.playbackRates=i,this.trigger("playbackrateschange"))},"playbackRates"),Player2}(FE);_M.names.forEach(function(i){var a=_M[i];JP.prototype[a.getterName]=function(){return this.tech_?this.tech_[a.getterName]():(this[a.privateName]=this[a.privateName]||new a.ListClass,this[a.privateName])}}),JP.prototype.crossorigin=JP.prototype.crossOrigin,JP.players={};var ZP=Tn.navigator;JP.prototype.options_={techOrder:yM.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ZP&&(ZP.languages&&ZP.languages[0]||ZP.userLanguage||ZP.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(i){JP.prototype[i]=function(){return this.techGet_(i)}}),qP.forEach(function(i){JP.prototype["handleTech"+LE(i)+"_"]=function(){return this.trigger(i)}}),FE.registerComponent("Player",JP);var eI="plugin",tI="activePlugins_",nI={},iI=/* @__PURE__ */__name(function pluginExists2(i){return nI.hasOwnProperty(i)},"pluginExists"),rI=/* @__PURE__ */__name(function getPlugin2(i){return iI(i)?nI[i]:void 0},"getPlugin"),aI=/* @__PURE__ */__name(function markPluginAsActive2(i,a){i[tI]=i[tI]||{},i[tI][a]=!0},"markPluginAsActive"),sI=/* @__PURE__ */__name(function triggerSetupEvent2(i,a,s){var o=(s?"before":"")+"pluginsetup";i.trigger(o,a),i.trigger(o+":"+a.name,a)},"triggerSetupEvent"),oI=/* @__PURE__ */__name(function createBasicPlugin2(i,a){var s=/* @__PURE__ */__name(function basicPluginWrapper2(){sI(this,{name:i,plugin:a,instance:null},!0);var s=a.apply(this,arguments);return aI(this,i),sI(this,{name:i,plugin:a,instance:s}),s},"basicPluginWrapper");return Object.keys(a).forEach(function(i){s[i]=a[i]}),s},"createBasicPlugin"),lI=/* @__PURE__ */__name(function createPluginFactory2(i,a){return a.prototype.name=i,function(){sI(this,{name:i,plugin:a,instance:null},!0);for(var s=arguments.length,o=new Array(s),u=0;u<s;u++)o[u]=arguments[u];var _=_construct(a,[this].concat(o));return this[i]=function(){return _},sI(this,_.getEventHash()),_}},"createPluginFactory"),cI=/* @__PURE__ */function(){function Plugin2(i){if(this.constructor===Plugin2)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=i,this.log||(this.log=this.player.log.createLogger(this.name)),evented(this),delete this.trigger,stateful(this,this.constructor.defaultState),aI(i,this.name),this.dispose=this.dispose.bind(this),i.on("dispose",this.dispose)}__name(Plugin2,"Plugin");var i=Plugin2.prototype;return i.version=/* @__PURE__ */__name(function version2(){return this.constructor.VERSION},"version"),i.getEventHash=/* @__PURE__ */__name(function getEventHash(i){return void 0===i&&(i={}),i.name=this.name,i.plugin=this.constructor,i.instance=this,i},"getEventHash"),i.trigger=/* @__PURE__ */__name(function trigger$12(i,a){return void 0===a&&(a={}),trigger(this.eventBusEl_,i,this.getEventHash(a))},"trigger$1"),i.handleStateChanged=/* @__PURE__ */__name(function handleStateChanged(i){},"handleStateChanged"),i.dispose=/* @__PURE__ */__name(function dispose(){var i=this.name,a=this.player;this.trigger("dispose"),this.off(),a.off("dispose",this.dispose),a[tI][i]=!1,this.player=this.state=null,a[i]=lI(i,nI[i])},"dispose"),Plugin2.isBasic=/* @__PURE__ */__name(function isBasic(i){var a="string"==typeof i?rI(i):i;return"function"==typeof a&&!Plugin2.prototype.isPrototypeOf(a.prototype)},"isBasic"),Plugin2.registerPlugin=/* @__PURE__ */__name(function registerPlugin2(i,a){if("string"!=typeof i)throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(iI(i))wC.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(JP.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if("function"!=typeof a)throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof a+".");return nI[i]=a,i!==eI&&(Plugin2.isBasic(a)?JP.prototype[i]=oI(i,a):JP.prototype[i]=lI(i,a)),a},"registerPlugin"),Plugin2.deregisterPlugin=/* @__PURE__ */__name(function deregisterPlugin(i){if(i===eI)throw new Error("Cannot de-register base plugin.");iI(i)&&(delete nI[i],delete JP.prototype[i])},"deregisterPlugin"),Plugin2.getPlugins=/* @__PURE__ */__name(function getPlugins(i){var a;return void 0===i&&(i=Object.keys(nI)),i.forEach(function(i){var s=rI(i);s&&((a=a||{})[i]=s)}),a},"getPlugins"),Plugin2.getPluginVersion=/* @__PURE__ */__name(function getPluginVersion(i){var a=rI(i);return a&&a.VERSION||""},"getPluginVersion"),Plugin2}();cI.getPlugin=rI,cI.BASE_PLUGIN_NAME=eI,cI.registerPlugin(eI,cI),JP.prototype.usingPlugin=function(i){return!!this[tI]&&!0===this[tI][i]},JP.prototype.hasPlugin=function(i){return!!iI(i)};var uI=!1,dI=/* @__PURE__ */__name(function extend2(i,a){void 0===a&&(a={}),uI||(wC.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),uI=!0);var s=/* @__PURE__ */__name(function subClass2(){i.apply(this,arguments)},"subClass"),o={};for(var u in"object"==typeof a?(a.constructor!==Object.prototype.constructor&&(s=a.constructor),o=a):"function"==typeof a&&(s=a),_inherits(s,i),i&&(s.super_=i),o)o.hasOwnProperty(u)&&(s.prototype[u]=o[u]);return s},"extend"),hI=/* @__PURE__ */__name(function normalizeId2(i){return 0===i.indexOf("#")?i.slice(1):i},"normalizeId");function videojs(i,a,s){var o=videojs.getPlayer(i);if(o)return a&&wC.warn('Player "'+i+'" is already initialised. Options will not be applied.'),s&&o.ready(s),o;var u="string"==typeof i?ZC("#"+hI(i)):i;if(!isEl(u))throw new TypeError("The element or ID supplied is not valid. (videojs)");u.ownerDocument.defaultView&&u.ownerDocument.body.contains(u)||wC.warn("The element supplied is not included in the DOM"),!0===(a=a||{}).restoreEl&&(a.restoreEl=(u.parentNode&&u.parentNode.hasAttribute("data-vjs-player")?u.parentNode:u).cloneNode(!0)),pC("beforesetup").forEach(function(i){var s=i(u,mergeOptions$3(a));isObject(s)&&!Array.isArray(s)?a=mergeOptions$3(a,s):wC.error("please return an object in beforesetup hooks")});var _=FE.getComponent("Player");return o=new _(u,a,s),pC("setup").forEach(function(i){return i(o)}),o}if(__name(videojs,"videojs"),videojs.hooks_=hC,videojs.hooks=pC,videojs.hook=mC,videojs.hookOnce=gC,videojs.removeHook=fC,!0!==Tn.VIDEOJS_NO_DYNAMIC_STYLE&&isReal()){var pI=ZC(".vjs-styles-defaults");if(!pI){pI=aE("vjs-styles-defaults");var mI=ZC("head");mI&&mI.insertBefore(pI,mI.firstChild),sE(pI,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}autoSetupTimeout(1,videojs),videojs.VERSION=dC,videojs.options=JP.prototype.options_,videojs.getPlayers=function(){return JP.players},videojs.getPlayer=function(i){var a,s=JP.players;if("string"==typeof i){var o=hI(i),u=s[o];if(u)return u;a=ZC("#"+o)}else a=i;if(isEl(a)){var _=a,x=_.player,w=_.playerId;if(x||s[w])return x||s[w]}},videojs.getAllPlayers=function(){return Object.keys(JP.players).map(function(i){return JP.players[i]}).filter(Boolean)},videojs.players=JP.players,videojs.getComponent=FE.getComponent,videojs.registerComponent=function(i,a){yM.isTech(a)&&wC.warn("The "+i+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),FE.registerComponent.call(FE,i,a)},videojs.getTech=yM.getTech,videojs.registerTech=yM.registerTech,videojs.use=use,Object.defineProperty(videojs,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(videojs.middleware,"TERMINATOR",{value:TM,writeable:!1,enumerable:!0}),videojs.browser=YC,videojs.TOUCH_ENABLED=WC,videojs.extend=dI,videojs.mergeOptions=mergeOptions$3,videojs.bind=fE,videojs.registerPlugin=cI.registerPlugin,videojs.deregisterPlugin=cI.deregisterPlugin,videojs.plugin=function(i,a){return wC.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),cI.registerPlugin(i,a)},videojs.getPlugins=cI.getPlugins,videojs.getPlugin=cI.getPlugin,videojs.getPluginVersion=cI.getPluginVersion,videojs.addLanguage=function(i,a){var s;return i=(""+i).toLowerCase(),videojs.options.languages=mergeOptions$3(videojs.options.languages,((s={})[i]=a,s)),videojs.options.languages[i]},videojs.log=wC,videojs.createLogger=AC,videojs.createTimeRange=videojs.createTimeRanges=createTimeRanges,videojs.formatTime=formatTime,videojs.setFormatTime=setFormatTime,videojs.resetFormatTime=resetFormatTime,videojs.parseUrl=rM,videojs.isCrossOrigin=oM,videojs.EventTarget=yE,videojs.on=on,videojs.one=one,videojs.off=off,videojs.trigger=trigger,videojs.xhr=hx,videojs.TextTrack=dM,videojs.AudioTrack=hM,videojs.VideoTrack=pM,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(i){videojs[i]=function(){return wC.warn("videojs."+i+"() is deprecated; use videojs.dom."+i+"() instead"),tE[i].apply(null,arguments)}}),videojs.computedStyle=computedStyle,videojs.dom=tE,videojs.url=lM,videojs.defineLazyProperty=GP,videojs.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var fI=_x,gI=/* @__PURE__ */__name(function resolveManifestRedirect2(i,a,s){return i&&s&&s.responseURL&&a!==s.responseURL?s.responseURL:a},"resolveManifestRedirect"),_I=/* @__PURE__ */__name(function logger2(i){return videojs.log.debug?videojs.log.debug.bind(videojs,"VHS:",i+" >"):function(){}},"logger"),yI=1/30,vI=.1,bI=/* @__PURE__ */__name(function filterRanges2(i,a){var s,o=[];if(i&&i.length)for(s=0;s<i.length;s++)a(i.start(s),i.end(s))&&o.push([i.start(s),i.end(s)]);return videojs.createTimeRanges(o)},"filterRanges"),TI=/* @__PURE__ */__name(function findRange2(i,a){return bI(i,function(i,s){return i-vI<=a&&s+vI>=a})},"findRange"),SI=/* @__PURE__ */__name(function findNextRange2(i,a){return bI(i,function(i){return i-yI>=a})},"findNextRange"),xI=/* @__PURE__ */__name(function findGaps2(i){if(i.length<2)return videojs.createTimeRanges();for(var a=[],s=1;s<i.length;s++){var o=i.end(s-1),u=i.start(s);a.push([o,u])}return videojs.createTimeRanges(a)},"findGaps"),wI=/* @__PURE__ */__name(function bufferIntersection2(i,a){var s=null,o=null,u=0,_=[],x=[];if(!(i&&i.length&&a&&a.length))return videojs.createTimeRange();for(var w=i.length;w--;)_.push({time:i.start(w),type:"start"}),_.push({time:i.end(w),type:"end"});for(w=a.length;w--;)_.push({time:a.start(w),type:"start"}),_.push({time:a.end(w),type:"end"});for(_.sort(function(i,a){return i.time-a.time}),w=0;w<_.length;w++)"start"===_[w].type?2===++u&&(s=_[w].time):"end"===_[w].type&&1===--u&&(o=_[w].time),null!==s&&null!==o&&(x.push([s,o]),s=null,o=null);return videojs.createTimeRanges(x)},"bufferIntersection"),AI=/* @__PURE__ */__name(function printableRange2(i){var a=[];if(!i||!i.length)return"";for(var s=0;s<i.length;s++)a.push(i.start(s)+" => "+i.end(s));return a.join(", ")},"printableRange"),CI=/* @__PURE__ */__name(function timeUntilRebuffer2(i,a,s){return void 0===s&&(s=1),((i.length?i.end(i.length-1):0)-a)/s},"timeUntilRebuffer"),EI=/* @__PURE__ */__name(function timeRangesToArray2(i){for(var a=[],s=0;s<i.length;s++)a.push({start:i.start(s),end:i.end(s)});return a},"timeRangesToArray"),MI=/* @__PURE__ */__name(function isRangeDifferent2(i,a){if(i===a)return!1;if(!i&&a||!a&&i)return!0;if(i.length!==a.length)return!0;for(var s=0;s<i.length;s++)if(i.start(s)!==a.start(s)||i.end(s)!==a.end(s))return!0;return!1},"isRangeDifferent"),kI=/* @__PURE__ */__name(function lastBufferedEnd2(i){if(i&&i.length&&i.end)return i.end(i.length-1)},"lastBufferedEnd"),PI=/* @__PURE__ */__name(function timeAheadOf2(i,a){var s=0;if(!i||!i.length)return s;for(var o=0;o<i.length;o++){var u=i.start(o),_=i.end(o);a>_||(s+=a>u&&a<=_?_-a:_-u)}return s},"timeAheadOf"),II=videojs.createTimeRange,LI=/* @__PURE__ */__name(function segmentDurationWithParts2(i,a){if(!a.preload)return a.duration;var s=0;return(a.parts||[]).forEach(function(i){s+=i.duration}),(a.preloadHints||[]).forEach(function(a){"PART"===a.type&&(s+=i.partTargetDuration)}),s},"segmentDurationWithParts"),DI=/* @__PURE__ */__name(function getPartsAndSegments2(i){return(i.segments||[]).reduce(function(i,a,s){return a.parts?a.parts.forEach(function(o,u){i.push({duration:o.duration,segmentIndex:s,partIndex:u,part:o,segment:a})}):i.push({duration:a.duration,segmentIndex:s,partIndex:null,segment:a,part:null}),i},[])},"getPartsAndSegments"),RI=/* @__PURE__ */__name(function getLastParts2(i){var a=i.segments&&i.segments.length&&i.segments[i.segments.length-1];return a&&a.parts||[]},"getLastParts"),OI=/* @__PURE__ */__name(function getKnownPartCount2(i){var a=i.preloadSegment;if(a){var s=a.parts,o=(a.preloadHints||[]).reduce(function(i,a){return i+("PART"===a.type?1:0)},0);return o+=s&&s.length?s.length:0}},"getKnownPartCount"),NI=/* @__PURE__ */__name(function liveEdgeDelay2(i,a){if(a.endList)return 0;if(i&&i.suggestedPresentationDelay)return i.suggestedPresentationDelay;var s=RI(a).length>0;return s&&a.serverControl&&a.serverControl.partHoldBack?a.serverControl.partHoldBack:s&&a.partTargetDuration?3*a.partTargetDuration:a.serverControl&&a.serverControl.holdBack?a.serverControl.holdBack:a.targetDuration?3*a.targetDuration:0},"liveEdgeDelay"),BI=/* @__PURE__ */__name(function backwardDuration2(i,a){var s=0,o=a-i.mediaSequence,u=i.segments[o];if(u){if(void 0!==u.start)return{result:u.start,precise:!0};if(void 0!==u.end)return{result:u.end-u.duration,precise:!0}}for(;o--;){if(void 0!==(u=i.segments[o]).end)return{result:s+u.end,precise:!0};if(s+=LI(i,u),void 0!==u.start)return{result:s+u.start,precise:!0}}return{result:s,precise:!1}},"backwardDuration"),FI=/* @__PURE__ */__name(function forwardDuration2(i,a){for(var s,o=0,u=a-i.mediaSequence;u<i.segments.length;u++){if(void 0!==(s=i.segments[u]).start)return{result:s.start-o,precise:!0};if(o+=LI(i,s),void 0!==s.end)return{result:s.end-o,precise:!0}}return{result:-1,precise:!1}},"forwardDuration"),UI=/* @__PURE__ */__name(function intervalDuration2(i,a,s){if(void 0===a&&(a=i.mediaSequence+i.segments.length),a<i.mediaSequence)return 0;var o=BI(i,a);if(o.precise)return o.result;var u=FI(i,a);return u.precise?u.result:o.result+s},"intervalDuration"),jI=/* @__PURE__ */__name(function duration2(i,a,s){if(!i)return 0;if("number"!=typeof s&&(s=0),void 0===a){if(i.totalDuration)return i.totalDuration;if(!i.endList)return Tn.Infinity}return UI(i,a,s)},"duration"),VI=/* @__PURE__ */__name(function sumDurations2(i){var a=i.defaultDuration,s=i.durationList,o=i.startIndex,u=i.endIndex,_=0;if(o>u){var x=[u,o];o=x[0],u=x[1]}if(o<0){for(var w=o;w<Math.min(0,u);w++)_+=a;o=0}for(var C=o;C<u;C++)_+=s[C].duration;return _},"sumDurations"),zI=/* @__PURE__ */__name(function playlistEnd2(i,a,s,o){if(!i||!i.segments)return null;if(i.endList)return jI(i);if(null===a)return null;a=a||0;var u=UI(i,i.mediaSequence+i.segments.length,a);return s&&(u-=o="number"==typeof o?o:NI(null,i)),Math.max(0,u)},"playlistEnd"),HI=/* @__PURE__ */__name(function seekable2(i,a,s){var o=a||0,u=zI(i,a,!0,s);return null===u?II():II(o,u)},"seekable"),$I=/* @__PURE__ */__name(function getMediaInfoForTime2(i){for(var a=i.playlist,s=i.currentTime,o=i.startingSegmentIndex,u=i.startingPartIndex,_=i.startTime,x=i.experimentalExactManifestTimings,w=s-_,C=DI(a),L=0,B=0;B<C.length;B++){var U=C[B];if(o===U.segmentIndex&&("number"!=typeof u||"number"!=typeof U.partIndex||u===U.partIndex)){L=B;break}}if(w<0){if(L>0)for(var j=L-1;j>=0;j--){var V=C[j];if(w+=V.duration,x){if(w<0)continue}else if(w+yI<=0)continue;return{partIndex:V.partIndex,segmentIndex:V.segmentIndex,startTime:_-VI({defaultDuration:a.targetDuration,durationList:C,startIndex:L,endIndex:j})}}return{partIndex:C[0]&&C[0].partIndex||null,segmentIndex:C[0]&&C[0].segmentIndex||0,startTime:s}}if(L<0){for(var z=L;z<0;z++)if((w-=a.targetDuration)<0)return{partIndex:C[0]&&C[0].partIndex||null,segmentIndex:C[0]&&C[0].segmentIndex||0,startTime:s};L=0}for(var $=L;$<C.length;$++){var Y=C[$];if(w-=Y.duration,x){if(w>0)continue}else if(w-yI>=0)continue;return{partIndex:Y.partIndex,segmentIndex:Y.segmentIndex,startTime:_+VI({defaultDuration:a.targetDuration,durationList:C,startIndex:L,endIndex:$})}}return{segmentIndex:C[C.length-1].segmentIndex,partIndex:C[C.length-1].partIndex,startTime:s}},"getMediaInfoForTime"),GI=/* @__PURE__ */__name(function isBlacklisted2(i){return i.excludeUntil&&i.excludeUntil>Date.now()},"isBlacklisted"),WI=/* @__PURE__ */__name(function isIncompatible2(i){return i.excludeUntil&&i.excludeUntil===1/0},"isIncompatible"),qI=/* @__PURE__ */__name(function isEnabled2(i){var a=GI(i);return!i.disabled&&!a},"isEnabled"),XI=/* @__PURE__ */__name(function isDisabled2(i){return i.disabled},"isDisabled"),QI=/* @__PURE__ */__name(function isAes2(i){for(var a=0;a<i.segments.length;a++)if(i.segments[a].key)return!0;return!1},"isAes"),KI=/* @__PURE__ */__name(function hasAttribute2(i,a){return a.attributes&&a.attributes[i]},"hasAttribute"),YI=/* @__PURE__ */__name(function estimateSegmentRequestTime2(i,a,s,o){return void 0===o&&(o=0),KI("BANDWIDTH",s)?(i*s.attributes.BANDWIDTH-8*o)/a:NaN},"estimateSegmentRequestTime"),JI=/* @__PURE__ */__name(function isLowestEnabledRendition2(i,a){if(1===i.playlists.length)return!0;var s=a.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===i.playlists.filter(function(i){return!!qI(i)&&(i.attributes.BANDWIDTH||0)<s}).length},"isLowestEnabledRendition"),ZI=/* @__PURE__ */__name(function playlistMatch2(i,a){return!(!i&&!a||!i&&a||i&&!a)&&(i===a||(!(!i.id||!a.id||i.id!==a.id)||(!(!i.resolvedUri||!a.resolvedUri||i.resolvedUri!==a.resolvedUri)||!(!i.uri||!a.uri||i.uri!==a.uri))))},"playlistMatch"),eL=/* @__PURE__ */__name(function someAudioVariant2(i,a){var s=i&&i.mediaGroups&&i.mediaGroups.AUDIO||{},o=!1;for(var u in s){for(var _ in s[u])if(o=a(s[u][_]))break;if(o)break}return!!o},"someAudioVariant"),tL=/* @__PURE__ */__name(function isAudioOnly2(i){if(!i||!i.playlists||!i.playlists.length)return eL(i,function(i){return i.playlists&&i.playlists.length||i.uri});for(var a=/* @__PURE__ */__name(function _loop2(a){var s=i.playlists[a],o=s.attributes&&s.attributes.CODECS;return o&&o.split(",").every(function(i){return Nx(i)})||eL(i,function(i){return ZI(s,i)})?"continue":{v:!1}},"_loop"),s=0;s<i.playlists.length;s++){var o=a(s);if("continue"!==o&&"object"==typeof o)return o.v}return!0},"isAudioOnly"),nL={liveEdgeDelay:NI,duration:jI,seekable:HI,getMediaInfoForTime:$I,isEnabled:qI,isDisabled:XI,isBlacklisted:GI,isIncompatible:WI,playlistEnd:zI,isAes:QI,hasAttribute:KI,estimateSegmentRequestTime:YI,isLowestEnabledRendition:JI,isAudioOnly:tL,playlistMatch:ZI,segmentDurationWithParts:LI},iL=videojs.log,rL=/* @__PURE__ */__name(function createPlaylistID2(i,a){return i+"-"+a},"createPlaylistID"),aL=/* @__PURE__ */__name(function groupID2(i,a,s){return"placeholder-uri-"+i+"-"+a+"-"+s},"groupID"),sL=/* @__PURE__ */__name(function parseManifest2(i){var a=i.onwarn,s=i.oninfo,o=i.manifestString,u=i.customTagParsers,_=void 0===u?[]:u,x=i.customTagMappers,w=void 0===x?[]:x,C=i.experimentalLLHLS,L=new kx;a&&L.on("warn",a),s&&L.on("info",s),_.forEach(function(i){return L.addParser(i)}),w.forEach(function(i){return L.addTagMapper(i)}),L.push(o),L.end();var B=L.manifest;if(C||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(i){B.hasOwnProperty(i)&&delete B[i]}),B.segments&&B.segments.forEach(function(i){["parts","preloadHints"].forEach(function(a){i.hasOwnProperty(a)&&delete i[a]})})),!B.targetDuration){var U=10;B.segments&&B.segments.length&&(U=B.segments.reduce(function(i,a){return Math.max(i,a.duration)},0)),a&&a("manifest has no targetDuration defaulting to "+U),B.targetDuration=U}var j=RI(B);if(j.length&&!B.partTargetDuration){var V=j.reduce(function(i,a){return Math.max(i,a.duration)},0);a&&(a("manifest has no partTargetDuration defaulting to "+V),iL.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),B.partTargetDuration=V}return B},"parseManifest"),oL=/* @__PURE__ */__name(function forEachMediaGroup2(i,a){i.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(s){if(i.mediaGroups[s])for(var o in i.mediaGroups[s])for(var u in i.mediaGroups[s][o]){var _=i.mediaGroups[s][o][u];a(_,s,o,u)}})},"forEachMediaGroup"),lL=/* @__PURE__ */__name(function setupMediaPlaylist2(i){var a=i.playlist,s=i.uri,o=i.id;a.id=o,a.playlistErrors_=0,s&&(a.uri=s),a.attributes=a.attributes||{}},"setupMediaPlaylist"),cL=/* @__PURE__ */__name(function setupMediaPlaylists2(i){for(var a=i.playlists.length;a--;){var s=i.playlists[a];lL({playlist:s,id:rL(a,s.uri)}),s.resolvedUri=fI(i.uri,s.uri),i.playlists[s.id]=s,i.playlists[s.uri]=s,s.attributes.BANDWIDTH||iL.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},"setupMediaPlaylists"),uL=/* @__PURE__ */__name(function resolveMediaGroupUris2(i){oL(i,function(a){a.uri&&(a.resolvedUri=fI(i.uri,a.uri))})},"resolveMediaGroupUris"),dL=/* @__PURE__ */__name(function masterForMedia2(i,a){var s=rL(0,a),o={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Tn.location.href,resolvedUri:Tn.location.href,playlists:[{uri:a,id:s,resolvedUri:a,attributes:{}}]};return o.playlists[s]=o.playlists[0],o.playlists[a]=o.playlists[0],o},"masterForMedia"),hL=/* @__PURE__ */__name(function addPropertiesToMaster2(i,a,s){void 0===s&&(s=aL),i.uri=a;for(var o=0;o<i.playlists.length;o++)if(!i.playlists[o].uri){var u="placeholder-uri-"+o;i.playlists[o].uri=u}var _=tL(i);oL(i,function(a,o,u,x){if(!a.playlists||!a.playlists.length){if(_&&"AUDIO"===o&&!a.uri)for(var w=0;w<i.playlists.length;w++){var C=i.playlists[w];if(C.attributes&&C.attributes.AUDIO&&C.attributes.AUDIO===u)return}a.playlists=[_extends({},a)]}a.playlists.forEach(function(a,_){var w=s(o,u,x,a),C=rL(_,w);a.uri?a.resolvedUri=a.resolvedUri||fI(i.uri,a.uri):(a.uri=0===_?w:C,a.resolvedUri=a.uri),a.id=a.id||C,a.attributes=a.attributes||{},i.playlists[a.id]=a,i.playlists[a.uri]=a})}),cL(i),uL(i)},"addPropertiesToMaster"),pL=videojs.mergeOptions,mL=videojs.EventTarget,fL=/* @__PURE__ */__name(function addLLHLSQueryDirectives2(i,a){if(a.endList||!a.serverControl)return i;var s={};if(a.serverControl.canBlockReload){var o=a.preloadSegment,u=a.mediaSequence+a.segments.length;if(o){var _=o.parts||[],x=OI(a)-1;x>-1&&x!==_.length-1&&(s._HLS_part=x),(x>-1||_.length)&&u--}s._HLS_msn=u}if(a.serverControl&&a.serverControl.canSkipUntil&&(s._HLS_skip=a.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(s).length){var w=new Tn.URL(i);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(i){s.hasOwnProperty(i)&&w.searchParams.set(i,s[i])}),i=w.toString()}return i},"addLLHLSQueryDirectives"),gL=/* @__PURE__ */__name(function updateSegment2(i,a){if(!i)return a;var s=pL(i,a);if(i.preloadHints&&!a.preloadHints&&delete s.preloadHints,i.parts&&!a.parts)delete s.parts;else if(i.parts&&a.parts)for(var o=0;o<a.parts.length;o++)i.parts&&i.parts[o]&&(s.parts[o]=pL(i.parts[o],a.parts[o]));return!i.skipped&&a.skipped&&(s.skipped=!1),i.preload&&!a.preload&&(s.preload=!1),s},"updateSegment"),_L=/* @__PURE__ */__name(function updateSegments2(i,a,s){var o=i.slice(),u=a.slice();s=s||0;for(var _,x=[],w=0;w<u.length;w++){var C=o[w+s],L=u[w];C?(_=C.map||_,x.push(gL(C,L))):(_&&!L.map&&(L.map=_),x.push(L))}return x},"updateSegments"),yL=/* @__PURE__ */__name(function resolveSegmentUris2(i,a){!i.resolvedUri&&i.uri&&(i.resolvedUri=fI(a,i.uri)),i.key&&!i.key.resolvedUri&&(i.key.resolvedUri=fI(a,i.key.uri)),i.map&&!i.map.resolvedUri&&(i.map.resolvedUri=fI(a,i.map.uri)),i.map&&i.map.key&&!i.map.key.resolvedUri&&(i.map.key.resolvedUri=fI(a,i.map.key.uri)),i.parts&&i.parts.length&&i.parts.forEach(function(i){i.resolvedUri||(i.resolvedUri=fI(a,i.uri))}),i.preloadHints&&i.preloadHints.length&&i.preloadHints.forEach(function(i){i.resolvedUri||(i.resolvedUri=fI(a,i.uri))})},"resolveSegmentUris"),vL=/* @__PURE__ */__name(function getAllSegments2(i){var a=i.segments||[],s=i.preloadSegment;if(s&&s.parts&&s.parts.length){if(s.preloadHints)for(var o=0;o<s.preloadHints.length;o++)if("MAP"===s.preloadHints[o].type)return a;s.duration=i.targetDuration,s.preload=!0,a.push(s)}return a},"getAllSegments"),bL=/* @__PURE__ */__name(function isPlaylistUnchanged2(i,a){return i===a||i.segments&&a.segments&&i.segments.length===a.segments.length&&i.endList===a.endList&&i.mediaSequence===a.mediaSequence&&i.preloadSegment===a.preloadSegment},"isPlaylistUnchanged"),TL=/* @__PURE__ */__name(function updateMaster2(i,a,s){void 0===s&&(s=bL);var o=pL(i,{}),u=o.playlists[a.id];if(!u)return null;if(s(u,a))return null;a.segments=vL(a);var _=pL(u,a);if(_.preloadSegment&&!a.preloadSegment&&delete _.preloadSegment,u.segments){if(a.skip){a.segments=a.segments||[];for(var x=0;x<a.skip.skippedSegments;x++)a.segments.unshift({skipped:!0})}_.segments=_L(u.segments,a.segments,a.mediaSequence-u.mediaSequence)}_.segments.forEach(function(i){yL(i,_.resolvedUri)});for(var w=0;w<o.playlists.length;w++)o.playlists[w].id===a.id&&(o.playlists[w]=_);return o.playlists[a.id]=_,o.playlists[a.uri]=_,oL(i,function(i,s,o,u){if(i.playlists)for(var x=0;x<i.playlists.length;x++)a.id===i.playlists[x].id&&(i.playlists[x]=_)}),o},"updateMaster"),SL=/* @__PURE__ */__name(function refreshDelay2(i,a){var s=i.segments||[],o=s[s.length-1],u=o&&o.parts&&o.parts[o.parts.length-1],_=u&&u.duration||o&&o.duration;return a&&_?1e3*_:500*(i.partTargetDuration||i.targetDuration||10)},"refreshDelay"),xL=/* @__PURE__ */function(i){function PlaylistLoader2(a,s,o){var u;if(void 0===o&&(o={}),u=i.call(this)||this,!a)throw new Error("A non-empty playlist URL or object is required");u.logger_=_I("PlaylistLoader");var _=o,x=_.withCredentials,w=void 0!==x&&x,C=_.handleManifestRedirects,L=void 0!==C&&C;u.src=a,u.vhs_=s,u.withCredentials=w,u.handleManifestRedirects=L;var B=s.options_;return u.customTagParsers=B&&B.customTagParsers||[],u.customTagMappers=B&&B.customTagMappers||[],u.experimentalLLHLS=B&&B.experimentalLLHLS||!1,videojs.browser.IE_VERSION&&(u.experimentalLLHLS=!1),u.state="HAVE_NOTHING",u.handleMediaupdatetimeout_=u.handleMediaupdatetimeout_.bind(_assertThisInitialized(u)),u.on("mediaupdatetimeout",u.handleMediaupdatetimeout_),u}_inheritsLoose(PlaylistLoader2,i),__name(PlaylistLoader2,"PlaylistLoader");var a=PlaylistLoader2.prototype;return a.handleMediaupdatetimeout_=/* @__PURE__ */__name(function handleMediaupdatetimeout_(){var i=this;if("HAVE_METADATA"===this.state){var a=this.media(),s=fI(this.master.uri,a.uri);this.experimentalLLHLS&&(s=fL(s,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(a,s){if(i.request)return a?i.playlistRequestError(i.request,i.media(),"HAVE_METADATA"):void i.haveMetadata({playlistString:i.request.responseText,url:i.media().uri,id:i.media().id})})}},"handleMediaupdatetimeout_"),a.playlistRequestError=/* @__PURE__ */__name(function playlistRequestError(i,a,s){var o=a.uri,u=a.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[u],status:i.status,message:"HLS playlist request error at URL: "+o+".",responseText:i.responseText,code:i.status>=500?4:2},this.trigger("error")},"playlistRequestError"),a.parseManifest_=/* @__PURE__ */__name(function parseManifest_(i){var a=this,s=i.url,o=i.manifestString;return sL({onwarn:/* @__PURE__ */__name(function onwarn(i){var o=i.message;return a.logger_("m3u8-parser warn for "+s+": "+o)},"onwarn"),oninfo:/* @__PURE__ */__name(function oninfo(i){var o=i.message;return a.logger_("m3u8-parser info for "+s+": "+o)},"oninfo"),manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},"parseManifest_"),a.haveMetadata=/* @__PURE__ */__name(function haveMetadata(i){var a=i.playlistString,s=i.playlistObject,o=i.url,u=i.id;this.request=null,this.state="HAVE_METADATA";var _=s||this.parseManifest_({url:o,manifestString:a});_.lastRequest=Date.now(),lL({playlist:_,uri:o,id:u});var x=TL(this.master,_);this.targetDuration=_.partTargetDuration||_.targetDuration,this.pendingMedia_=null,x?(this.master=x,this.media_=this.master.playlists[u]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(SL(this.media(),!!x)),this.trigger("loadedplaylist")},"haveMetadata"),a.dispose=/* @__PURE__ */__name(function dispose(){this.trigger("dispose"),this.stopRequest(),Tn.clearTimeout(this.mediaUpdateTimeout),Tn.clearTimeout(this.finalRenditionTimeout),this.off()},"dispose"),a.stopRequest=/* @__PURE__ */__name(function stopRequest(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},"stopRequest"),a.media=/* @__PURE__ */__name(function media(i,a){var s=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof i){if(!this.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.master.playlists[i]}if(Tn.clearTimeout(this.finalRenditionTimeout),a){var o=(i.partTargetDuration||i.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Tn.setTimeout(this.media.bind(this,i,!1),o)}else{var u=this.state,_=!this.media_||i.id!==this.media_.id,x=this.master.playlists[i.id];if(x&&x.endList||i.endList&&i.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=i,void(_&&(this.trigger("mediachanging"),"HAVE_MASTER"===u?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(SL(i,!0)),_){if(this.state="SWITCHING_MEDIA",this.request){if(i.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=i,this.request=this.vhs_.xhr({uri:i.resolvedUri,withCredentials:this.withCredentials},function(a,o){if(s.request){if(i.lastRequest=Date.now(),i.resolvedUri=gI(s.handleManifestRedirects,i.resolvedUri,o),a)return s.playlistRequestError(s.request,i,u);s.haveMetadata({playlistString:o.responseText,url:i.uri,id:i.id}),"HAVE_MASTER"===u?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}}},"media"),a.pause=/* @__PURE__ */__name(function pause(){this.mediaUpdateTimeout&&(Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},"pause"),a.load=/* @__PURE__ */__name(function load(i){var a=this;this.mediaUpdateTimeout&&(Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(i){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Tn.setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},o)}else this.started?s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},"load"),a.updateMediaUpdateTimeout_=/* @__PURE__ */__name(function updateMediaUpdateTimeout_(i){var a=this;this.mediaUpdateTimeout&&(Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Tn.setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(i)},i))},"updateMediaUpdateTimeout_"),a.start=/* @__PURE__ */__name(function start(){var i=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Tn.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){i.setupInitialPlaylist(i.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,s){if(i.request){if(i.request=null,a)return i.error={status:s.status,message:"HLS playlist request error at URL: "+i.src+".",responseText:s.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");i.src=gI(i.handleManifestRedirects,i.src,s);var o=i.parseManifest_({manifestString:s.responseText,url:i.src});i.setupInitialPlaylist(o)}})},"start"),a.srcUri=/* @__PURE__ */__name(function srcUri(){return"string"==typeof this.src?this.src:this.src.uri},"srcUri"),a.setupInitialPlaylist=/* @__PURE__ */__name(function setupInitialPlaylist(i){if(this.state="HAVE_MASTER",i.playlists)return this.master=i,hL(this.master,this.srcUri()),i.playlists.forEach(function(i){i.segments=vL(i),i.segments.forEach(function(a){yL(a,i.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var a=this.srcUri()||Tn.location.href;this.master=dL(i,a),this.haveMetadata({playlistObject:i,url:a,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},"setupInitialPlaylist"),PlaylistLoader2}(mL),wL=videojs.xhr,AL=videojs.mergeOptions,CL=/* @__PURE__ */__name(function callbackWrapper2(i,a,s,o){var u="arraybuffer"===i.responseType?i.response:i.responseText;!a&&u&&(i.responseTime=Date.now(),i.roundTripTime=i.responseTime-i.requestTime,i.bytesReceived=u.byteLength||u.length,i.bandwidth||(i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3))),s.headers&&(i.responseHeaders=s.headers),a&&"ETIMEDOUT"===a.code&&(i.timedout=!0),a||i.aborted||200===s.statusCode||206===s.statusCode||0===s.statusCode||(a=new Error("XHR Failed with a response of: "+(i&&(u||i.responseText)))),o(a,i)},"callbackWrapper"),EL=/* @__PURE__ */__name(function xhrFactory2(){var i=/* @__PURE__ */__name(function XhrFunction(i,a){i=AL({timeout:45e3},i);var s=XhrFunction.beforeRequest||videojs.Vhs.xhr.beforeRequest;if(s&&"function"==typeof s){var o=s(i);o&&(i=o)}var u=(!0===videojs.Vhs.xhr.original?wL:videojs.Vhs.xhr)(i,function(i,s){return CL(u,i,s,a)}),_=u.abort;return u.abort=function(){return u.aborted=!0,_.apply(u,arguments)},u.uri=i.uri,u.requestTime=Date.now(),u},"XhrFunction");return i.original=!0,i},"xhrFactory"),ML=/* @__PURE__ */__name(function byterangeStr2(i){return"bytes="+i.offset+"-"+("bigint"==typeof i.offset||"bigint"==typeof i.length?Tn.BigInt(i.offset)+Tn.BigInt(i.length)-Tn.BigInt(1):i.offset+i.length-1)},"byterangeStr"),kL=/* @__PURE__ */__name(function segmentXhrHeaders2(i){var a={};return i.byterange&&(a.Range=ML(i.byterange)),a},"segmentXhrHeaders"),PL=/* @__PURE__ */__name(function textRange2(i,a){return i.start(a)+"-"+i.end(a)},"textRange"),IL=/* @__PURE__ */__name(function formatHexString2(i,a){var s=i.toString(16);return"00".substring(0,2-s.length)+s+(a%2?" ":"")},"formatHexString"),LL=/* @__PURE__ */__name(function formatAsciiString2(i){return i>=32&&i<126?String.fromCharCode(i):"."},"formatAsciiString"),DL=/* @__PURE__ */__name(function createTransferableMessage2(i){var a={};return Object.keys(i).forEach(function(s){var o=i[s];qx(o)?a[s]={bytes:o.buffer,byteOffset:o.byteOffset,byteLength:o.byteLength}:a[s]=o}),a},"createTransferableMessage"),RL=/* @__PURE__ */__name(function initSegmentId2(i){var a=i.byterange||{length:1/0,offset:0};return[a.length,a.offset,i.resolvedUri].join(",")},"initSegmentId"),OL=/* @__PURE__ */__name(function segmentKeyId2(i){return i.resolvedUri},"segmentKeyId"),NL=/* @__PURE__ */__name(function hexDump2(i){for(var a=Array.prototype.slice.call(i),s=16,o="",u=0;u<a.length/s;u++)o+=a.slice(u*s,u*s+s).map(IL).join("")+" "+a.slice(u*s,u*s+s).map(LL).join("")+"\n";return o},"hexDump"),BL=/* @__PURE__ */__name(function tagDump2(i){var a=i.bytes;return NL(a)},"tagDump"),FL=/* @__PURE__ */__name(function textRanges2(i){var a,s="";for(a=0;a<i.length;a++)s+=PL(i,a)+" ";return s},"textRanges"),UL=/* @__PURE__ */Object.freeze({__proto__:null,createTransferableMessage:DL,initSegmentId:RL,segmentKeyId:OL,hexDump:NL,tagDump:BL,textRanges:FL}),jL=/* @__PURE__ */__name(function playerTimeToProgramTime2(i,a){if(!a.dateTimeObject)return null;var s=a.videoTimingInfo.transmuxerPrependedSeconds,o=i-(a.videoTimingInfo.transmuxedPresentationStart+s);return new Date(a.dateTimeObject.getTime()+1e3*o)},"playerTimeToProgramTime"),VL=/* @__PURE__ */__name(function originalSegmentVideoDuration2(i){return i.transmuxedPresentationEnd-i.transmuxedPresentationStart-i.transmuxerPrependedSeconds},"originalSegmentVideoDuration"),zL=/* @__PURE__ */__name(function findSegmentForProgramTime2(i,a){var s;try{s=new Date(i)}catch(C){return null}if(!a||!a.segments||0===a.segments.length)return null;var o=a.segments[0];if(s<o.dateTimeObject)return null;for(var u=0;u<a.segments.length-1;u++){if(o=a.segments[u],s<a.segments[u+1].dateTimeObject)break}var _=a.segments[a.segments.length-1],x=_.dateTimeObject,w=_.videoTimingInfo?VL(_.videoTimingInfo):_.duration+.25*_.duration;return s>new Date(x.getTime()+1e3*w)?null:(s>x&&(o=_),{segment:o,estimatedStart:o.videoTimingInfo?o.videoTimingInfo.transmuxedPresentationStart:nL.duration(a,a.mediaSequence+a.segments.indexOf(o)),type:o.videoTimingInfo?"accurate":"estimate"})},"findSegmentForProgramTime"),HL=/* @__PURE__ */__name(function findSegmentForPlayerTime2(i,a){if(!a||!a.segments||0===a.segments.length)return null;for(var s,o=0,u=0;u<a.segments.length&&!(i<=(o=(s=a.segments[u]).videoTimingInfo?s.videoTimingInfo.transmuxedPresentationEnd:o+s.duration));u++);var _=a.segments[a.segments.length-1];if(_.videoTimingInfo&&_.videoTimingInfo.transmuxedPresentationEnd<i)return null;if(i>o){if(i>o+.25*_.duration)return null;s=_}return{segment:s,estimatedStart:s.videoTimingInfo?s.videoTimingInfo.transmuxedPresentationStart:o-s.duration,type:s.videoTimingInfo?"accurate":"estimate"}},"findSegmentForPlayerTime"),$L=/* @__PURE__ */__name(function getOffsetFromTimestamp2(i,a){var s,o;try{s=new Date(i),o=new Date(a)}catch(_){}var u=s.getTime();return(o.getTime()-u)/1e3},"getOffsetFromTimestamp"),GL=/* @__PURE__ */__name(function verifyProgramDateTimeTags2(i){if(!i.segments||0===i.segments.length)return!1;for(var a=0;a<i.segments.length;a++){if(!i.segments[a].dateTimeObject)return!1}return!0},"verifyProgramDateTimeTags"),WL=/* @__PURE__ */__name(function getProgramTime2(i){var a=i.playlist,s=i.time,o=void 0===s?void 0:s,u=i.callback;if(!u)throw new Error("getProgramTime: callback must be provided");if(!a||void 0===o)return u({message:"getProgramTime: playlist and time must be provided"});var _=HL(o,a);if(!_)return u({message:"valid programTime was not found"});if("estimate"===_.type)return u({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:_.estimatedStart});var x={mediaSeconds:o},w=jL(o,_.segment);return w&&(x.programDateTime=w.toISOString()),u(null,x)},"getProgramTime"),qL=/* @__PURE__ */__name(function seekToProgramTime2(i){var a=i.programTime,s=i.playlist,o=i.retryCount,u=void 0===o?2:o,_=i.seekTo,x=i.pauseAfterSeek,w=void 0===x||x,C=i.tech,L=i.callback;if(!L)throw new Error("seekToProgramTime: callback must be provided");if(void 0===a||!s||!_)return L({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!s.endList&&!C.hasStarted_)return L({message:"player must be playing a live stream to start buffering"});if(!GL(s))return L({message:"programDateTime tags must be provided in the manifest "+s.resolvedUri});var B=zL(a,s);if(!B)return L({message:a+" was not found in the stream"});var U=B.segment,j=$L(U.dateTimeObject,a);if("estimate"===B.type)return 0===u?L({message:a+" is not buffered yet. Try again"}):(_(B.estimatedStart+j),void C.one("seeked",function(){seekToProgramTime2({programTime:a,playlist:s,retryCount:u-1,seekTo:_,pauseAfterSeek:w,tech:C,callback:L})}));var V=U.start+j,z=/* @__PURE__ */__name(function seekedCallback2(){return L(null,C.currentTime())},"seekedCallback");C.one("seeked",z),w&&C.pause(),_(V)},"seekToProgramTime"),XL=/* @__PURE__ */__name(function callbackOnCompleted2(i,a){if(4===i.readyState)return a()},"callbackOnCompleted"),QL=/* @__PURE__ */__name(function containerRequest2(i,a,s){var o,u=[],_=!1,x=/* @__PURE__ */__name(function endRequestAndCallback2(i,a,o,u){return a.abort(),_=!0,s(i,a,o,u)},"endRequestAndCallback"),w=/* @__PURE__ */__name(function progressListener2(i,a){if(!_){if(i)return x(i,a,"",u);var s=a.responseText.substring(u&&u.byteLength||0,a.responseText.length);if(u=aw(u,rw(s,!0)),o=o||NA(u),u.length<10||o&&u.length<o+2)return XL(a,function(){return x(i,a,"",u)});var w=oC(u);return"ts"===w&&u.length<188||!w&&u.length<376?XL(a,function(){return x(i,a,"",u)}):x(null,a,w,u)}},"progressListener"),C=a({uri:i,beforeSend:/* @__PURE__ */__name(function beforeSend(i){i.overrideMimeType("text/plain; charset=x-user-defined"),i.addEventListener("progress",function(a){return a.total,a.loaded,CL(i,null,{statusCode:i.status},w)})},"beforeSend")},function(i,a){return CL(C,i,a,w)});return C},"containerRequest"),EventTarget=videojs.EventTarget,KL=videojs.mergeOptions,YL=/* @__PURE__ */__name(function dashPlaylistUnchanged2(i,a){if(!bL(i,a))return!1;if(i.sidx&&a.sidx&&(i.sidx.offset!==a.sidx.offset||i.sidx.length!==a.sidx.length))return!1;if(!i.sidx&&a.sidx||i.sidx&&!a.sidx)return!1;if(i.segments&&!a.segments||!i.segments&&a.segments)return!1;if(!i.segments&&!a.segments)return!0;for(var s=0;s<i.segments.length;s++){var o=i.segments[s],u=a.segments[s];if(o.uri!==u.uri)return!1;if(o.byterange||u.byterange){var _=o.byterange,x=u.byterange;if(_&&!x||!_&&x)return!1;if(_.offset!==x.offset||_.length!==x.length)return!1}}return!0},"dashPlaylistUnchanged"),JL=/* @__PURE__ */__name(function dashGroupId2(i,a,s,o){return"placeholder-uri-"+i+"-"+a+"-"+(o.attributes.NAME||s)},"dashGroupId"),ZL=/* @__PURE__ */__name(function parseMasterXml2(i){var a=i.masterXml,s=i.srcUrl,o=i.clientOffset,u=i.sidxMapping,_=i.previousManifest,x=IA(a,{manifestUri:s,clientOffset:o,sidxMapping:u,previousManifest:_});return hL(x,s,JL),x},"parseMasterXml"),eD=/* @__PURE__ */__name(function removeOldMediaGroupLabels2(i,a){oL(i,function(s,o,u,_){_ in a.mediaGroups[o][u]||delete i.mediaGroups[o][u][_]})},"removeOldMediaGroupLabels"),tD=/* @__PURE__ */__name(function updateMaster2(i,a,s){for(var o=!0,u=KL(i,{duration:a.duration,minimumUpdatePeriod:a.minimumUpdatePeriod,timelineStarts:a.timelineStarts}),_=0;_<a.playlists.length;_++){var x=a.playlists[_];if(x.sidx){var w=Uw(x.sidx);s&&s[w]&&s[w].sidx&&Pw(x,s[w].sidx,x.sidx.resolvedUri)}var C=TL(u,x,YL);C&&(u=C,o=!1)}return oL(a,function(i,a,s,_){if(i.playlists&&i.playlists.length){var x=i.playlists[0].id,w=TL(u,i.playlists[0],YL);w&&(_ in(u=w).mediaGroups[a][s]||(u.mediaGroups[a][s][_]=i),u.mediaGroups[a][s][_].playlists[0]=u.playlists[x],o=!1)}}),eD(u,a),a.minimumUpdatePeriod!==i.minimumUpdatePeriod&&(o=!1),o?null:u},"updateMaster"),nD=/* @__PURE__ */__name(function equivalentSidx2(i,a){return(Boolean(!i.map&&!a.map)||Boolean(i.map&&a.map&&i.map.byterange.offset===a.map.byterange.offset&&i.map.byterange.length===a.map.byterange.length))&&i.uri===a.uri&&i.byterange.offset===a.byterange.offset&&i.byterange.length===a.byterange.length},"equivalentSidx"),iD=/* @__PURE__ */__name(function compareSidxEntry2(i,a){var s={};for(var o in i){var u=i[o].sidx;if(u){var _=Uw(u);if(!a[_])break;var x=a[_].sidxInfo;nD(x,u)&&(s[_]=a[_])}}return s},"compareSidxEntry"),rD=/* @__PURE__ */__name(function filterChangedSidxMappings2(i,a){var s=iD(i.playlists,a);return oL(i,function(i,o,u,_){if(i.playlists&&i.playlists.length){var x=i.playlists;s=KL(s,iD(x,a))}}),s},"filterChangedSidxMappings"),aD=/* @__PURE__ */function(i){function DashPlaylistLoader2(a,s,o,u){var _;void 0===o&&(o={}),(_=i.call(this)||this).masterPlaylistLoader_=u||_assertThisInitialized(_),u||(_.isMaster_=!0);var x=o,w=x.withCredentials,C=void 0!==w&&w,L=x.handleManifestRedirects,B=void 0!==L&&L;if(_.vhs_=s,_.withCredentials=C,_.handleManifestRedirects=B,!a)throw new Error("A non-empty playlist URL or object is required");return _.on("minimumUpdatePeriod",function(){_.refreshXml_()}),_.on("mediaupdatetimeout",function(){_.refreshMedia_(_.media().id)}),_.state="HAVE_NOTHING",_.loadedPlaylists_={},_.logger_=_I("DashPlaylistLoader"),_.isMaster_?(_.masterPlaylistLoader_.srcUrl=a,_.masterPlaylistLoader_.sidxMapping_={}):_.childPlaylist_=a,_}_inheritsLoose(DashPlaylistLoader2,i),__name(DashPlaylistLoader2,"DashPlaylistLoader");var a=DashPlaylistLoader2.prototype;return a.requestErrored_=/* @__PURE__ */__name(function requestErrored_(i,a,s){return!this.request||(this.request=null,i?(this.error="object"!=typeof i||i instanceof Error?{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2}:i,s&&(this.state=s),this.trigger("error"),!0):void 0)},"requestErrored_"),a.addSidxSegments_=/* @__PURE__ */__name(function addSidxSegments_(i,a,s){var o=this,u=i.sidx&&Uw(i.sidx);if(i.sidx&&u&&!this.masterPlaylistLoader_.sidxMapping_[u]){var _=gI(this.handleManifestRedirects,i.sidx.resolvedUri),x=/* @__PURE__ */__name(function fin2(_,x){if(!o.requestErrored_(_,x,a)){var w,C=o.masterPlaylistLoader_.sidxMapping_;try{w=DA(Qx(x.response).subarray(8))}catch(L){return void o.requestErrored_(L,x,a)}return C[u]={sidxInfo:i.sidx,sidx:w},Pw(i,w,i.sidx.resolvedUri),s(!0)}},"fin");this.request=QL(_,this.vhs_.xhr,function(a,s,u,w){if(a)return x(a,s);if(!u||"mp4"!==u)return x({status:s.status,message:"Unsupported "+(u||"unknown")+" container type for sidx segment at URL: "+_,response:"",playlist:i,internal:!0,blacklistDuration:1/0,code:2},s);var C=i.sidx.byterange,L=C.offset,B=C.length;if(w.length>=B+L)return x(a,{response:w.subarray(L,L+B),status:s.status,uri:s.uri});o.request=o.vhs_.xhr({uri:_,responseType:"arraybuffer",headers:kL({byterange:i.sidx.byterange})},x)})}else this.mediaRequest_=Tn.setTimeout(function(){return s(!1)},0)},"addSidxSegments_"),a.dispose=/* @__PURE__ */__name(function dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Tn.clearTimeout(this.minimumUpdatePeriodTimeout_),Tn.clearTimeout(this.mediaRequest_),Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},"dispose"),a.hasPendingRequest=/* @__PURE__ */__name(function hasPendingRequest(){return this.request||this.mediaRequest_},"hasPendingRequest"),a.stopRequest=/* @__PURE__ */__name(function stopRequest(){if(this.request){var i=this.request;this.request=null,i.onreadystatechange=null,i.abort()}},"stopRequest"),a.media=/* @__PURE__ */__name(function media(i){var a=this;if(!i)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if("string"==typeof i){if(!this.masterPlaylistLoader_.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=this.masterPlaylistLoader_.master.playlists[i]}var o=!this.media_||i.id!==this.media_.id;if(o&&this.loadedPlaylists_[i.id]&&this.loadedPlaylists_[i.id].endList)return this.state="HAVE_METADATA",this.media_=i,void(o&&(this.trigger("mediachanging"),this.trigger("mediachange")));o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(i,s,function(o){a.haveMetadata({startingState:s,playlist:i})}))},"media"),a.haveMetadata=/* @__PURE__ */__name(function haveMetadata(i){var a=i.startingState,s=i.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),"HAVE_MASTER"===a?this.trigger("loadedmetadata"):this.trigger("mediachange")},"haveMetadata"),a.pause=/* @__PURE__ */__name(function pause(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Tn.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},"pause"),a.load=/* @__PURE__ */__name(function load(i){var a=this;Tn.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(i){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Tn.setTimeout(function(){return a.load()},o)}else this.started?s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},"load"),a.start=/* @__PURE__ */__name(function start(){var i=this;this.started=!0,this.isMaster_?this.requestMaster_(function(a,s){i.haveMaster_(),i.hasPendingRequest()||i.media_||i.media(i.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=Tn.setTimeout(function(){return i.haveMaster_()},0)},"start"),a.requestMaster_=/* @__PURE__ */__name(function requestMaster_(i){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(!a.requestErrored_(s,o)){var u=o.responseText!==a.masterPlaylistLoader_.masterXml_;return a.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?a.masterLoaded_=Date.parse(o.responseHeaders.date):a.masterLoaded_=Date.now(),a.masterPlaylistLoader_.srcUrl=gI(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,o),u?(a.handleMaster_(),void a.syncClientServerClock_(function(){return i(o,u)})):i(o,u)}"HAVE_NOTHING"===a.state&&(a.started=!1)})},"requestMaster_"),a.syncClientServerClock_=/* @__PURE__ */__name(function syncClientServerClock_(i){var a=this,s=LA(this.masterPlaylistLoader_.masterXml_);return null===s?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===s.method?(this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),i()):void(this.request=this.vhs_.xhr({uri:fI(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,u){if(a.request){if(o)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),i();var _;_="HEAD"===s.method?u.responseHeaders&&u.responseHeaders.date?Date.parse(u.responseHeaders.date):a.masterLoaded_:Date.parse(u.responseText),a.masterPlaylistLoader_.clientOffset_=_-Date.now(),i()}}))},"syncClientServerClock_"),a.haveMaster_=/* @__PURE__ */__name(function haveMaster_(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},"haveMaster_"),a.handleMaster_=/* @__PURE__ */__name(function handleMaster_(){this.mediaRequest_=null;var i=this.masterPlaylistLoader_.master,a=ZL({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i});i&&(a=tD(i,a,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=a||i;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!i||a&&a.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(a)},"handleMaster_"),a.updateMinimumUpdatePeriodTimeout_=/* @__PURE__ */__name(function updateMinimumUpdatePeriodTimeout_(){var i=this.masterPlaylistLoader_;i.createMupOnMedia_&&(i.off("loadedmetadata",i.createMupOnMedia_),i.createMupOnMedia_=null),i.minimumUpdatePeriodTimeout_&&(Tn.clearTimeout(i.minimumUpdatePeriodTimeout_),i.minimumUpdatePeriodTimeout_=null);var a=i.master&&i.master.minimumUpdatePeriod;0===a&&(i.media()?a=1e3*i.media().targetDuration:(i.createMupOnMedia_=i.updateMinimumUpdatePeriodTimeout_,i.one("loadedmetadata",i.createMupOnMedia_))),"number"!=typeof a||a<=0?a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout"):this.createMUPTimeout_(a)},"updateMinimumUpdatePeriodTimeout_"),a.createMUPTimeout_=/* @__PURE__ */__name(function createMUPTimeout_(i){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=Tn.setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(i)},i)},"createMUPTimeout_"),a.refreshXml_=/* @__PURE__ */__name(function refreshXml_(){var i=this;this.requestMaster_(function(a,s){s&&(i.media_&&(i.media_=i.masterPlaylistLoader_.master.playlists[i.media_.id]),i.masterPlaylistLoader_.sidxMapping_=rD(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.sidxMapping_),i.addSidxSegments_(i.media(),i.state,function(a){i.refreshMedia_(i.media().id)}))})},"refreshXml_"),a.refreshMedia_=/* @__PURE__ */__name(function refreshMedia_(i){var a=this;if(!i)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[i];(o?this.media_=s[i]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout)||/* @__PURE__ */__name(function createMediaUpdateTimeout2(){a.media().endList||(a.mediaUpdateTimeout=Tn.setTimeout(function(){a.trigger("mediaupdatetimeout"),createMediaUpdateTimeout2()},SL(a.media(),Boolean(o))))},"createMediaUpdateTimeout")();this.trigger("loadedplaylist")},"refreshMedia_"),DashPlaylistLoader2}(EventTarget),sD={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},oD=/* @__PURE__ */__name(function stringToArrayBuffer2(i){for(var a=new Uint8Array(new ArrayBuffer(i.length)),s=0;s<i.length;s++)a[s]=i.charCodeAt(s);return a.buffer},"stringToArrayBuffer"),lD=/* @__PURE__ */__name(function browserWorkerPolyFill2(i){return i.on=i.addEventListener,i.off=i.removeEventListener,i},"browserWorkerPolyFill"),cD=/* @__PURE__ */__name(function createObjectURL2(i){try{return URL.createObjectURL(new Blob([i],{type:"application/javascript"}))}catch(s){var a=new BlobBuilder;return a.append(i),URL.createObjectURL(a.getBlob())}},"createObjectURL"),uD=/* @__PURE__ */__name(function factory2(i){return function(){var a=cD(i),s=lD(new Worker(a));s.objURL=a;var o=s.terminate;return s.on=s.addEventListener,s.off=s.removeEventListener,s.terminate=function(){return URL.revokeObjectURL(a),o.call(this)},s}},"factory"),dD=/* @__PURE__ */__name(function transform2(i){return"var browserWorkerPolyFill = "+lD.toString()+";\nbrowserWorkerPolyFill(self);\n"+i},"transform"),hD=/* @__PURE__ */__name(function getWorkerString2(i){return i.toString().replace(/^function.+?{/,"").slice(0,-1)},"getWorkerString"),pD=dD(hD(function(){var i=/* @__PURE__ */__name(function Stream3(){this.init=function(){var i={};this.on=function(a,s){i[a]||(i[a]=[]),i[a]=i[a].concat(s)},this.off=function(a,s){var o;return!!i[a]&&(o=i[a].indexOf(s),i[a]=i[a].slice(),i[a].splice(o,1),o>-1)},this.trigger=function(a){var s,o,u,_;if(s=i[a])if(2===arguments.length)for(u=s.length,o=0;o<u;++o)s[o].call(this,arguments[1]);else{for(_=[],o=arguments.length,o=1;o<arguments.length;++o)_.push(arguments[o]);for(u=s.length,o=0;o<u;++o)s[o].apply(this,_)}},this.dispose=function(){i={}}}},"Stream");i.prototype.pipe=function(i){return this.on("data",function(a){i.push(a)}),this.on("done",function(a){i.flush(a)}),this.on("partialdone",function(a){i.partialFlush(a)}),this.on("endedtimeline",function(a){i.endTimeline(a)}),this.on("reset",function(a){i.reset(a)}),i},i.prototype.push=function(i){this.trigger("data",i)},i.prototype.flush=function(i){this.trigger("done",i)},i.prototype.partialFlush=function(i){this.trigger("partialdone",i)},i.prototype.endTimeline=function(i){this.trigger("endedtimeline",i)},i.prototype.reset=function(i){this.trigger("reset",i)};var a,s,o,u,_,x,w,C,L,B,U,j,V,z,$,Y,Z,ee,ie,ae,le,ce,de,pe,fe,_e,ye,be,Te,Se,xe,we,Pe,Re,ze,He,$e,We,qe,Xe,Qe,Ye=i,et=Math.pow(2,32),tt={getUint64:/* @__PURE__ */__name(function getUint642(i){var a,s=new DataView(i.buffer,i.byteOffset,i.byteLength);return s.getBigUint64?(a=s.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(a):a:s.getUint32(0)*et+s.getUint32(4)},"getUint64"),MAX_UINT32:et},nt=tt.MAX_UINT32;!function(){var i;if(de={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(i in de)de.hasOwnProperty(i)&&(de[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)]);pe=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),_e=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),fe=new Uint8Array([0,0,0,1]),ye=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),be=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Te={video:ye,audio:be},we=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),xe=new Uint8Array([0,0,0,0,0,0,0,0]),Pe=new Uint8Array([0,0,0,0,0,0,0,0]),Re=Pe,ze=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),He=Pe,Se=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),a=/* @__PURE__ */__name(function box2(i){var a,s,o=[],u=0;for(a=1;a<arguments.length;a++)o.push(arguments[a]);for(a=o.length;a--;)u+=o[a].byteLength;for(s=new Uint8Array(u+8),new DataView(s.buffer,s.byteOffset,s.byteLength).setUint32(0,s.byteLength),s.set(i,4),a=0,u=8;a<o.length;a++)s.set(o[a],u),u+=o[a].byteLength;return s},"box"),s=/* @__PURE__ */__name(function dinf2(){return a(de.dinf,a(de.dref,we))},"dinf"),o=/* @__PURE__ */__name(function esds2(i){return a(de.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,i.audioobjecttype<<3|i.samplingfrequencyindex>>>1,i.samplingfrequencyindex<<7|i.channelcount<<3,6,1,2]))},"esds"),u=/* @__PURE__ */__name(function ftyp2(){return a(de.ftyp,pe,fe,pe,_e)},"ftyp"),Y=/* @__PURE__ */__name(function hdlr2(i){return a(de.hdlr,Te[i])},"hdlr"),_=/* @__PURE__ */__name(function mdat2(i){return a(de.mdat,i)},"mdat"),$=/* @__PURE__ */__name(function mdhd2(i){var s=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,i.duration>>>24&255,i.duration>>>16&255,i.duration>>>8&255,255&i.duration,85,196,0,0]);return i.samplerate&&(s[12]=i.samplerate>>>24&255,s[13]=i.samplerate>>>16&255,s[14]=i.samplerate>>>8&255,s[15]=255&i.samplerate),a(de.mdhd,s)},"mdhd"),z=/* @__PURE__ */__name(function mdia2(i){return a(de.mdia,$(i),Y(i.type),w(i))},"mdia"),x=/* @__PURE__ */__name(function mfhd2(i){return a(de.mfhd,new Uint8Array([0,0,0,0,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))},"mfhd"),w=/* @__PURE__ */__name(function minf2(i){return a(de.minf,"video"===i.type?a(de.vmhd,Se):a(de.smhd,xe),s(),ee(i))},"minf"),C=/* @__PURE__ */__name(function moof2(i,s){for(var o=[],u=s.length;u--;)o[u]=ae(s[u]);return a.apply(null,[de.moof,x(i)].concat(o))},"moof"),L=/* @__PURE__ */__name(function moov2(i){for(var s=i.length,o=[];s--;)o[s]=j(i[s]);return a.apply(null,[de.moov,U(4294967295)].concat(o).concat(B(i)))},"moov"),B=/* @__PURE__ */__name(function mvex2(i){for(var s=i.length,o=[];s--;)o[s]=le(i[s]);return a.apply(null,[de.mvex].concat(o))},"mvex"),U=/* @__PURE__ */__name(function mvhd2(i){var s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(de.mvhd,s)},"mvhd"),Z=/* @__PURE__ */__name(function sdtp2(i){var s,o,u=i.samples||[],_=new Uint8Array(4+u.length);for(o=0;o<u.length;o++)s=u[o].flags,_[o+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return a(de.sdtp,_)},"sdtp"),ee=/* @__PURE__ */__name(function stbl2(i){return a(de.stbl,ie(i),a(de.stts,He),a(de.stsc,Re),a(de.stsz,ze),a(de.stco,Pe))},"stbl"),ie=/* @__PURE__ */__name(function stsd2(i){return a(de.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===i.type?$e(i):We(i))},"stsd"),$e=/* @__PURE__ */__name(function videoSample2(i){var s,o,u=i.sps||[],_=i.pps||[],x=[],w=[];for(s=0;s<u.length;s++)x.push((65280&u[s].byteLength)>>>8),x.push(255&u[s].byteLength),x=x.concat(Array.prototype.slice.call(u[s]));for(s=0;s<_.length;s++)w.push((65280&_[s].byteLength)>>>8),w.push(255&_[s].byteLength),w=w.concat(Array.prototype.slice.call(_[s]));if(o=[de.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&i.width)>>8,255&i.width,(65280&i.height)>>8,255&i.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(de.avcC,new Uint8Array([1,i.profileIdc,i.profileCompatibility,i.levelIdc,255].concat([u.length],x,[_.length],w))),a(de.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],i.sarRatio){var C=i.sarRatio[0],L=i.sarRatio[1];o.push(a(de.pasp,new Uint8Array([(4278190080&C)>>24,(16711680&C)>>16,(65280&C)>>8,255&C,(4278190080&L)>>24,(16711680&L)>>16,(65280&L)>>8,255&L])))}return a.apply(null,o)},"videoSample"),We=/* @__PURE__ */__name(function audioSample2(i){return a(de.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&i.channelcount)>>8,255&i.channelcount,(65280&i.samplesize)>>8,255&i.samplesize,0,0,0,0,(65280&i.samplerate)>>8,255&i.samplerate,0,0]),o(i))},"audioSample"),V=/* @__PURE__ */__name(function tkhd2(i){var s=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,0,(4278190080&i.duration)>>24,(16711680&i.duration)>>16,(65280&i.duration)>>8,255&i.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&i.width)>>8,255&i.width,0,0,(65280&i.height)>>8,255&i.height,0,0]);return a(de.tkhd,s)},"tkhd"),ae=/* @__PURE__ */__name(function traf2(i){var s,o,u,_,x,w;return s=a(de.tfhd,new Uint8Array([0,0,0,58,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),x=Math.floor(i.baseMediaDecodeTime/nt),w=Math.floor(i.baseMediaDecodeTime%nt),o=a(de.tfdt,new Uint8Array([1,0,0,0,x>>>24&255,x>>>16&255,x>>>8&255,255&x,w>>>24&255,w>>>16&255,w>>>8&255,255&w])),"audio"===i.type?(u=ce(i,92),a(de.traf,s,o,u)):(_=Z(i),u=ce(i,_.length+92),a(de.traf,s,o,u,_))},"traf"),j=/* @__PURE__ */__name(function trak2(i){return i.duration=i.duration||4294967295,a(de.trak,V(i),z(i))},"trak"),le=/* @__PURE__ */__name(function trex2(i){var s=new Uint8Array([0,0,0,0,(4278190080&i.id)>>24,(16711680&i.id)>>16,(65280&i.id)>>8,255&i.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==i.type&&(s[s.length-1]=0),a(de.trex,s)},"trex"),Qe=/* @__PURE__ */__name(function trunHeader2(i,a){var s=0,o=0,u=0,_=0;return i.length&&(void 0!==i[0].duration&&(s=1),void 0!==i[0].size&&(o=2),void 0!==i[0].flags&&(u=4),void 0!==i[0].compositionTimeOffset&&(_=8)),[0,0,s|o|u|_,1,(4278190080&i.length)>>>24,(16711680&i.length)>>>16,(65280&i.length)>>>8,255&i.length,(4278190080&a)>>>24,(16711680&a)>>>16,(65280&a)>>>8,255&a]},"trunHeader"),Xe=/* @__PURE__ */__name(function videoTrun2(i,s){var o,u,_,x,w,C;for(s+=20+16*(x=i.samples||[]).length,_=Qe(x,s),(u=new Uint8Array(_.length+16*x.length)).set(_),o=_.length,C=0;C<x.length;C++)w=x[C],u[o++]=(4278190080&w.duration)>>>24,u[o++]=(16711680&w.duration)>>>16,u[o++]=(65280&w.duration)>>>8,u[o++]=255&w.duration,u[o++]=(4278190080&w.size)>>>24,u[o++]=(16711680&w.size)>>>16,u[o++]=(65280&w.size)>>>8,u[o++]=255&w.size,u[o++]=w.flags.isLeading<<2|w.flags.dependsOn,u[o++]=w.flags.isDependedOn<<6|w.flags.hasRedundancy<<4|w.flags.paddingValue<<1|w.flags.isNonSyncSample,u[o++]=61440&w.flags.degradationPriority,u[o++]=15&w.flags.degradationPriority,u[o++]=(4278190080&w.compositionTimeOffset)>>>24,u[o++]=(16711680&w.compositionTimeOffset)>>>16,u[o++]=(65280&w.compositionTimeOffset)>>>8,u[o++]=255&w.compositionTimeOffset;return a(de.trun,u)},"videoTrun"),qe=/* @__PURE__ */__name(function audioTrun2(i,s){var o,u,_,x,w,C;for(s+=20+8*(x=i.samples||[]).length,_=Qe(x,s),(o=new Uint8Array(_.length+8*x.length)).set(_),u=_.length,C=0;C<x.length;C++)w=x[C],o[u++]=(4278190080&w.duration)>>>24,o[u++]=(16711680&w.duration)>>>16,o[u++]=(65280&w.duration)>>>8,o[u++]=255&w.duration,o[u++]=(4278190080&w.size)>>>24,o[u++]=(16711680&w.size)>>>16,o[u++]=(65280&w.size)>>>8,o[u++]=255&w.size;return a(de.trun,o)},"audioTrun"),ce=/* @__PURE__ */__name(function trun2(i,a){return"audio"===i.type?qe(i,a):Xe(i,a)},"trun");var it,rt,at,st,ot,lt,ct,ut,dt={ftyp:u,mdat:_,moof:C,moov:L,initSegment:/* @__PURE__ */__name(function initSegment(i){var a,s=u(),o=L(i);return(a=new Uint8Array(s.byteLength+o.byteLength)).set(s),a.set(o,s.byteLength),a},"initSegment")},ht=/* @__PURE__ */__name(function groupNalsIntoFrames2(i){var a,s,o=[],u=[];for(u.byteLength=0,u.nalCount=0,u.duration=0,o.byteLength=0,a=0;a<i.length;a++)"access_unit_delimiter_rbsp"===(s=i[a]).nalUnitType?(o.length&&(o.duration=s.dts-o.dts,u.byteLength+=o.byteLength,u.nalCount+=o.length,u.duration+=o.duration,u.push(o)),(o=[s]).byteLength=s.data.byteLength,o.pts=s.pts,o.dts=s.dts):("slice_layer_without_partitioning_rbsp_idr"===s.nalUnitType&&(o.keyFrame=!0),o.duration=s.dts-o.dts,o.byteLength+=s.data.byteLength,o.push(s));return u.length&&(!o.duration||o.duration<=0)&&(o.duration=u[u.length-1].duration),u.byteLength+=o.byteLength,u.nalCount+=o.length,u.duration+=o.duration,u.push(o),u},"groupNalsIntoFrames"),pt=/* @__PURE__ */__name(function groupFramesIntoGops2(i){var a,s,o=[],u=[];for(o.byteLength=0,o.nalCount=0,o.duration=0,o.pts=i[0].pts,o.dts=i[0].dts,u.byteLength=0,u.nalCount=0,u.duration=0,u.pts=i[0].pts,u.dts=i[0].dts,a=0;a<i.length;a++)(s=i[a]).keyFrame?(o.length&&(u.push(o),u.byteLength+=o.byteLength,u.nalCount+=o.nalCount,u.duration+=o.duration),(o=[s]).nalCount=s.length,o.byteLength=s.byteLength,o.pts=s.pts,o.dts=s.dts,o.duration=s.duration):(o.duration+=s.duration,o.nalCount+=s.length,o.byteLength+=s.byteLength,o.push(s));return u.length&&o.duration<=0&&(o.duration=u[u.length-1].duration),u.byteLength+=o.byteLength,u.nalCount+=o.nalCount,u.duration+=o.duration,u.push(o),u},"groupFramesIntoGops"),mt=/* @__PURE__ */__name(function extendFirstKeyFrame2(i){var a;return!i[0][0].keyFrame&&i.length>1&&(a=i.shift(),i.byteLength-=a.byteLength,i.nalCount-=a.nalCount,i[0][0].dts=a.dts,i[0][0].pts=a.pts,i[0][0].duration+=a.duration),i},"extendFirstKeyFrame"),ft=/* @__PURE__ */__name(function createDefaultSample2(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},"createDefaultSample"),gt=/* @__PURE__ */__name(function sampleForFrame2(i,a){var s=ft();return s.dataOffset=a,s.compositionTimeOffset=i.pts-i.dts,s.duration=i.duration,s.size=4*i.length,s.size+=i.byteLength,i.keyFrame&&(s.flags.dependsOn=2,s.flags.isNonSyncSample=0),s},"sampleForFrame"),_t={groupNalsIntoFrames:ht,groupFramesIntoGops:pt,extendFirstKeyFrame:mt,generateSampleTable:/* @__PURE__ */__name(function generateSampleTable2(i,a){var s,o,u,_,x,w=a||0,C=[];for(s=0;s<i.length;s++)for(_=i[s],o=0;o<_.length;o++)x=_[o],w+=(u=gt(x,w)).size,C.push(u);return C},"generateSampleTable"),concatenateNalData:/* @__PURE__ */__name(function concatenateNalData2(i){var a,s,o,u,_,x,w=0,C=i.byteLength,L=i.nalCount,B=new Uint8Array(C+4*L),U=new DataView(B.buffer);for(a=0;a<i.length;a++)for(u=i[a],s=0;s<u.length;s++)for(_=u[s],o=0;o<_.length;o++)x=_[o],U.setUint32(w,x.data.byteLength),w+=4,B.set(x.data,w),w+=x.data.byteLength;return B},"concatenateNalData"),generateSampleTableForFrame:/* @__PURE__ */__name(function generateSampleTableForFrame2(i,a){var s,o=[];return s=gt(i,a||0),o.push(s),o},"generateSampleTableForFrame"),concatenateNalDataForFrame:/* @__PURE__ */__name(function concatenateNalDataForFrame2(i){var a,s,o=0,u=i.byteLength,_=i.length,x=new Uint8Array(u+4*_),w=new DataView(x.buffer);for(a=0;a<i.length;a++)s=i[a],w.setUint32(o,s.data.byteLength),o+=4,x.set(s.data,o),o+=s.data.byteLength;return x},"concatenateNalDataForFrame")},yt=[33,16,5,32,164,27],vt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],bt=/* @__PURE__ */__name(function zeroFill2(i){for(var a=[];i--;)a.push(0);return a},"zeroFill"),Tt=/* @__PURE__ */__name(function makeTable2(i){return Object.keys(i).reduce(function(a,s){return a[s]=new Uint8Array(i[s].reduce(function(i,a){return i.concat(a)},[])),a},{})},"makeTable"),St=/* @__PURE__ */__name(function silence_12(){if(!it){var i={96e3:[yt,[227,64],bt(154),[56]],88200:[yt,[231],bt(170),[56]],64e3:[yt,[248,192],bt(240),[56]],48e3:[yt,[255,192],bt(268),[55,148,128],bt(54),[112]],44100:[yt,[255,192],bt(268),[55,163,128],bt(84),[112]],32e3:[yt,[255,192],bt(268),[55,234],bt(226),[112]],24e3:[yt,[255,192],bt(268),[55,255,128],bt(268),[111,112],bt(126),[224]],16e3:[yt,[255,192],bt(268),[55,255,128],bt(268),[111,255],bt(269),[223,108],bt(195),[1,192]],12e3:[vt,bt(268),[3,127,248],bt(268),[6,255,240],bt(268),[13,255,224],bt(268),[27,253,128],bt(259),[56]],11025:[vt,bt(268),[3,127,248],bt(268),[6,255,240],bt(268),[13,255,224],bt(268),[27,255,192],bt(268),[55,175,128],bt(108),[112]],8e3:[vt,bt(268),[3,121,16],bt(47),[7]]};it=Tt(i)}return it},"silence_1"),xt=9e4;rt=/* @__PURE__ */__name(function secondsToVideoTs2(i){return i*xt},"secondsToVideoTs"),at=/* @__PURE__ */__name(function secondsToAudioTs2(i,a){return i*a},"secondsToAudioTs"),st=/* @__PURE__ */__name(function videoTsToSeconds2(i){return i/xt},"videoTsToSeconds"),ot=/* @__PURE__ */__name(function audioTsToSeconds2(i,a){return i/a},"audioTsToSeconds"),lt=/* @__PURE__ */__name(function audioTsToVideoTs2(i,a){return rt(ot(i,a))},"audioTsToVideoTs"),ct=/* @__PURE__ */__name(function videoTsToAudioTs2(i,a){return at(st(i),a)},"videoTsToAudioTs"),ut=/* @__PURE__ */__name(function metadataTsToSeconds2(i,a,s){return st(s?i:i-a)},"metadataTsToSeconds");var wt={ONE_SECOND_IN_TS:xt,secondsToVideoTs:rt,secondsToAudioTs:at,videoTsToSeconds:st,audioTsToSeconds:ot,audioTsToVideoTs:lt,videoTsToAudioTs:ct,metadataTsToSeconds:ut},At=/* @__PURE__ */__name(function sumFrameByteLengths2(i){var a,s=0;for(a=0;a<i.length;a++)s+=i[a].data.byteLength;return s},"sumFrameByteLengths"),Ct={prefixWithSilence:/* @__PURE__ */__name(function prefixWithSilence2(i,a,s,o){var u,_,x,w,C,L=0,B=0,U=0;if(a.length&&(u=wt.audioTsToVideoTs(i.baseMediaDecodeTime,i.samplerate),_=Math.ceil(wt.ONE_SECOND_IN_TS/(i.samplerate/1024)),s&&o&&(L=u-Math.max(s,o),U=(B=Math.floor(L/_))*_),!(B<1||U>wt.ONE_SECOND_IN_TS/2))){for((x=St()[i.samplerate])||(x=a[0].data),w=0;w<B;w++)C=a[0],a.splice(0,0,{data:x,dts:C.dts-_,pts:C.pts-_});return i.baseMediaDecodeTime-=Math.floor(wt.videoTsToAudioTs(U,i.samplerate)),U}},"prefixWithSilence"),trimAdtsFramesByEarliestDts:/* @__PURE__ */__name(function trimAdtsFramesByEarliestDts2(i,a,s){return a.minSegmentDts>=s?i:(a.minSegmentDts=1/0,i.filter(function(i){return i.dts>=s&&(a.minSegmentDts=Math.min(a.minSegmentDts,i.dts),a.minSegmentPts=a.minSegmentDts,!0)}))},"trimAdtsFramesByEarliestDts"),generateSampleTable:/* @__PURE__ */__name(function generateSampleTable2(i){var a,s,o=[];for(a=0;a<i.length;a++)s=i[a],o.push({size:s.data.byteLength,duration:1024});return o},"generateSampleTable"),concatenateFrameData:/* @__PURE__ */__name(function concatenateFrameData2(i){var a,s,o=0,u=new Uint8Array(At(i));for(a=0;a<i.length;a++)s=i[a],u.set(s.data,o),o+=s.data.byteLength;return u},"concatenateFrameData")},Et=wt.ONE_SECOND_IN_TS,Mt=/* @__PURE__ */__name(function collectDtsInfo2(i,a){"number"==typeof a.pts&&(void 0===i.timelineStartInfo.pts&&(i.timelineStartInfo.pts=a.pts),void 0===i.minSegmentPts?i.minSegmentPts=a.pts:i.minSegmentPts=Math.min(i.minSegmentPts,a.pts),void 0===i.maxSegmentPts?i.maxSegmentPts=a.pts:i.maxSegmentPts=Math.max(i.maxSegmentPts,a.pts)),"number"==typeof a.dts&&(void 0===i.timelineStartInfo.dts&&(i.timelineStartInfo.dts=a.dts),void 0===i.minSegmentDts?i.minSegmentDts=a.dts:i.minSegmentDts=Math.min(i.minSegmentDts,a.dts),void 0===i.maxSegmentDts?i.maxSegmentDts=a.dts:i.maxSegmentDts=Math.max(i.maxSegmentDts,a.dts))},"collectDtsInfo"),kt={clearDtsInfo:/* @__PURE__ */__name(function clearDtsInfo2(i){delete i.minSegmentDts,delete i.maxSegmentDts,delete i.minSegmentPts,delete i.maxSegmentPts},"clearDtsInfo"),calculateTrackBaseMediaDecodeTime:/* @__PURE__ */__name(function calculateTrackBaseMediaDecodeTime2(i,a){var s,o=i.minSegmentDts;return a||(o-=i.timelineStartInfo.dts),s=i.timelineStartInfo.baseMediaDecodeTime,s+=o,s=Math.max(0,s),"audio"===i.type&&(s*=i.samplerate/Et,s=Math.floor(s)),s},"calculateTrackBaseMediaDecodeTime"),collectDtsInfo:Mt},Pt=/* @__PURE__ */__name(function parseSei2(i){for(var a=0,s={payloadType:-1,payloadSize:0},o=0,u=0;a<i.byteLength&&128!==i[a];){for(;255===i[a];)o+=255,a++;for(o+=i[a++];255===i[a];)u+=255,a++;if(u+=i[a++],!s.payload&&4===o){if("GA94"===String.fromCharCode(i[a+3],i[a+4],i[a+5],i[a+6])){s.payloadType=o,s.payloadSize=u,s.payload=i.subarray(a,a+u);break}s.payload=void 0}a+=u,o=0,u=0}return s},"parseSei"),It={parseSei:Pt,parseUserData:/* @__PURE__ */__name(function parseUserData2(i){return 181!==i.payload[0]||49!=(i.payload[1]<<8|i.payload[2])||"GA94"!==String.fromCharCode(i.payload[3],i.payload[4],i.payload[5],i.payload[6])||3!==i.payload[7]?null:i.payload.subarray(8,i.payload.length-1)},"parseUserData"),parseCaptionPackets:/* @__PURE__ */__name(function parseCaptionPackets2(i,a){var s,o,u,_,x=[];if(!(64&a[0]))return x;for(o=31&a[0],s=0;s<o;s++)_={type:3&a[(u=3*s)+2],pts:i},4&a[u+2]&&(_.ccData=a[u+3]<<8|a[u+4],x.push(_));return x},"parseCaptionPackets"),discardEmulationPreventionBytes:/* @__PURE__ */__name(function discardEmulationPreventionBytes3(i){for(var a,s,o=i.byteLength,u=[],_=1;_<o-2;)0===i[_]&&0===i[_+1]&&3===i[_+2]?(u.push(_+2),_+=2):_++;if(0===u.length)return i;a=o-u.length,s=new Uint8Array(a);var x=0;for(_=0;_<a;x++,_++)x===u[0]&&(x++,u.shift()),s[_]=i[x];return s},"discardEmulationPreventionBytes"),USER_DATA_REGISTERED_ITU_T_T35:4},Lt=/* @__PURE__ */__name(function CaptionStream2(i){i=i||{},CaptionStream2.prototype.init.call(this),this.parse708captions_="boolean"!=typeof i.parse708captions||i.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ht(0,0),new Ht(0,1),new Ht(1,0),new Ht(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ft({captionServices:i.captionServices})),this.reset(),this.ccStreams_.forEach(function(i){i.on("data",this.trigger.bind(this,"data")),i.on("partialdone",this.trigger.bind(this,"partialdone")),i.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))},"CaptionStream");Lt.prototype=new Ye,Lt.prototype.push=function(i){var a,s,o;if("sei_rbsp"===i.nalUnitType&&(a=It.parseSei(i.escapedRBSP)).payload&&a.payloadType===It.USER_DATA_REGISTERED_ITU_T_T35&&(s=It.parseUserData(a)))if(i.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(i.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));o=It.parseCaptionPackets(i.pts,s),this.captionPackets_=this.captionPackets_.concat(o),this.latestDts_!==i.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=i.dts}},Lt.prototype.flushCCStreams=function(i){this.ccStreams_.forEach(function(a){return"flush"===i?a.flush():a.partialFlush()},this)},Lt.prototype.flushStream=function(i){this.captionPackets_.length?(this.captionPackets_.forEach(function(i,a){i.presortIndex=a}),this.captionPackets_.sort(function(i,a){return i.pts===a.pts?i.presortIndex-a.presortIndex:i.pts-a.pts}),this.captionPackets_.forEach(function(i){i.type<2?this.dispatchCea608Packet(i):this.dispatchCea708Packet(i)},this),this.captionPackets_.length=0,this.flushCCStreams(i)):this.flushCCStreams(i)},Lt.prototype.flush=function(){return this.flushStream("flush")},Lt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Lt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(i){i.reset()})},Lt.prototype.dispatchCea608Packet=function(i){this.setsTextOrXDSActive(i)?this.activeCea608Channel_[i.type]=null:this.setsChannel1Active(i)?this.activeCea608Channel_[i.type]=0:this.setsChannel2Active(i)&&(this.activeCea608Channel_[i.type]=1),null!==this.activeCea608Channel_[i.type]&&this.ccStreams_[(i.type<<1)+this.activeCea608Channel_[i.type]].push(i)},Lt.prototype.setsChannel1Active=function(i){return 4096==(30720&i.ccData)},Lt.prototype.setsChannel2Active=function(i){return 6144==(30720&i.ccData)},Lt.prototype.setsTextOrXDSActive=function(i){return 256==(28928&i.ccData)||4138==(30974&i.ccData)||6186==(30974&i.ccData)},Lt.prototype.dispatchCea708Packet=function(i){this.parse708captions_&&this.cc708Stream_.push(i)};var Dt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Rt=/* @__PURE__ */__name(function get708CharFromCode2(i){var a=Dt[i]||i;return 4096&i&&i===a?"":String.fromCharCode(a)},"get708CharFromCode"),Ot=/* @__PURE__ */__name(function within708TextBlock2(i){return 32<=i&&i<=127||160<=i&&i<=255},"within708TextBlock"),Nt=/* @__PURE__ */__name(function Cea708Window2(i){this.windowNum=i,this.reset()},"Cea708Window");Nt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Nt.prototype.getText=function(){return this.rows.join("\n")},Nt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Nt.prototype.newLine=function(i){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(i),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Nt.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Nt.prototype.addText=function(i){this.rows[this.rowIdx]+=i},Nt.prototype.backspace=function(){if(!this.isEmpty()){var i=this.rows[this.rowIdx];this.rows[this.rowIdx]=i.substr(0,i.length-1)}};var Bt=/* @__PURE__ */__name(function Cea708Service2(i,a,s){this.serviceNum=i,this.text="",this.currentWindow=new Nt(-1),this.windows=[],this.stream=s,"string"==typeof a&&this.createTextDecoder(a)},"Cea708Service");Bt.prototype.init=function(i,a){this.startPts=i;for(var s=0;s<8;s++)this.windows[s]=new Nt(s),"function"==typeof a&&(this.windows[s].beforeRowOverflow=a)},Bt.prototype.setCurrentWindow=function(i){this.currentWindow=this.windows[i]},Bt.prototype.createTextDecoder=function(i){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(i)}catch(a){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+i+" encoding. "+a})}};var Ft=/* @__PURE__ */__name(function Cea708Stream2(i){i=i||{},Cea708Stream2.prototype.init.call(this);var a,s=this,o=i.captionServices||{},u={};Object.keys(o).forEach(function(i){a=o[i],/^SERVICE/.test(i)&&(u[i]=a.encoding)}),this.serviceEncodings=u,this.current708Packet=null,this.services={},this.push=function(i){3===i.type?(s.new708Packet(),s.add708Bytes(i)):(null===s.current708Packet&&s.new708Packet(),s.add708Bytes(i))}},"Cea708Stream");Ft.prototype=new Ye,Ft.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ft.prototype.add708Bytes=function(i){var a=i.ccData,s=a>>>8,o=255&a;this.current708Packet.ptsVals.push(i.pts),this.current708Packet.data.push(s),this.current708Packet.data.push(o)},Ft.prototype.push708Packet=function(){var i=this.current708Packet,a=i.data,s=null,o=null,u=0,_=a[u++];for(i.seq=_>>6,i.sizeCode=63&_;u<a.length;u++)o=31&(_=a[u++]),7===(s=_>>5)&&o>0&&(s=_=a[u++]),this.pushServiceBlock(s,u,o),o>0&&(u+=o-1)},Ft.prototype.pushServiceBlock=function(i,a,s){var o,u=a,_=this.current708Packet.data,x=this.services[i];for(x||(x=this.initService(i,u));u<a+s&&u<_.length;u++)o=_[u],Ot(o)?u=this.handleText(u,x):24===o?u=this.multiByteCharacter(u,x):16===o?u=this.extendedCommands(u,x):128<=o&&o<=135?u=this.setCurrentWindow(u,x):152<=o&&o<=159?u=this.defineWindow(u,x):136===o?u=this.clearWindows(u,x):140===o?u=this.deleteWindows(u,x):137===o?u=this.displayWindows(u,x):138===o?u=this.hideWindows(u,x):139===o?u=this.toggleWindows(u,x):151===o?u=this.setWindowAttributes(u,x):144===o?u=this.setPenAttributes(u,x):145===o?u=this.setPenColor(u,x):146===o?u=this.setPenLocation(u,x):143===o?x=this.reset(u,x):8===o?x.currentWindow.backspace():12===o?x.currentWindow.clearText():13===o?x.currentWindow.pendingNewLine=!0:14===o?x.currentWindow.clearText():141===o&&u++},Ft.prototype.extendedCommands=function(i,a){var s=this.current708Packet.data[++i];return Ot(s)&&(i=this.handleText(i,a,{isExtended:!0})),i},Ft.prototype.getPts=function(i){return this.current708Packet.ptsVals[Math.floor(i/2)]},Ft.prototype.initService=function(i,a){var s,o,u=this;return(s="SERVICE"+i)in this.serviceEncodings&&(o=this.serviceEncodings[s]),this.services[i]=new Bt(i,o,u),this.services[i].init(this.getPts(a),function(a){u.flushDisplayed(a,u.services[i])}),this.services[i]},Ft.prototype.handleText=function(i,a,s){var o,u,_=s&&s.isExtended,x=s&&s.isMultiByte,w=this.current708Packet.data,C=_?4096:0,L=w[i],B=w[i+1],U=a.currentWindow;return a.textDecoder_&&!_?(x?(u=[L,B],i++):u=[L],o=a.textDecoder_.decode(new Uint8Array(u))):o=Rt(C|L),U.pendingNewLine&&!U.isEmpty()&&U.newLine(this.getPts(i)),U.pendingNewLine=!1,U.addText(o),i},Ft.prototype.multiByteCharacter=function(i,a){var s=this.current708Packet.data,o=s[i+1],u=s[i+2];return Ot(o)&&Ot(u)&&(i=this.handleText(++i,a,{isMultiByte:!0})),i},Ft.prototype.setCurrentWindow=function(i,a){var s=7&this.current708Packet.data[i];return a.setCurrentWindow(s),i},Ft.prototype.defineWindow=function(i,a){var s=this.current708Packet.data,o=s[i],u=7&o;a.setCurrentWindow(u);var _=a.currentWindow;return o=s[++i],_.visible=(32&o)>>5,_.rowLock=(16&o)>>4,_.columnLock=(8&o)>>3,_.priority=7&o,o=s[++i],_.relativePositioning=(128&o)>>7,_.anchorVertical=127&o,o=s[++i],_.anchorHorizontal=o,o=s[++i],_.anchorPoint=(240&o)>>4,_.rowCount=15&o,o=s[++i],_.columnCount=63&o,o=s[++i],_.windowStyle=(56&o)>>3,_.penStyle=7&o,_.virtualRowCount=_.rowCount+1,i},Ft.prototype.setWindowAttributes=function(i,a){var s=this.current708Packet.data,o=s[i],u=a.currentWindow.winAttr;return o=s[++i],u.fillOpacity=(192&o)>>6,u.fillRed=(48&o)>>4,u.fillGreen=(12&o)>>2,u.fillBlue=3&o,o=s[++i],u.borderType=(192&o)>>6,u.borderRed=(48&o)>>4,u.borderGreen=(12&o)>>2,u.borderBlue=3&o,o=s[++i],u.borderType+=(128&o)>>5,u.wordWrap=(64&o)>>6,u.printDirection=(48&o)>>4,u.scrollDirection=(12&o)>>2,u.justify=3&o,o=s[++i],u.effectSpeed=(240&o)>>4,u.effectDirection=(12&o)>>2,u.displayEffect=3&o,i},Ft.prototype.flushDisplayed=function(i,a){for(var s=[],o=0;o<8;o++)a.windows[o].visible&&!a.windows[o].isEmpty()&&s.push(a.windows[o].getText());a.endPts=i,a.text=s.join("\n\n"),this.pushCaption(a),a.startPts=i},Ft.prototype.pushCaption=function(i){""!==i.text&&(this.trigger("data",{startPts:i.startPts,endPts:i.endPts,text:i.text,stream:"cc708_"+i.serviceNum}),i.text="",i.startPts=i.endPts)},Ft.prototype.displayWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&(a.windows[u].visible=1);return i},Ft.prototype.hideWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&(a.windows[u].visible=0);return i},Ft.prototype.toggleWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&(a.windows[u].visible^=1);return i},Ft.prototype.clearWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&a.windows[u].clearText();return i},Ft.prototype.deleteWindows=function(i,a){var s=this.current708Packet.data[++i],o=this.getPts(i);this.flushDisplayed(o,a);for(var u=0;u<8;u++)s&1<<u&&a.windows[u].reset();return i},Ft.prototype.setPenAttributes=function(i,a){var s=this.current708Packet.data,o=s[i],u=a.currentWindow.penAttr;return o=s[++i],u.textTag=(240&o)>>4,u.offset=(12&o)>>2,u.penSize=3&o,o=s[++i],u.italics=(128&o)>>7,u.underline=(64&o)>>6,u.edgeType=(56&o)>>3,u.fontStyle=7&o,i},Ft.prototype.setPenColor=function(i,a){var s=this.current708Packet.data,o=s[i],u=a.currentWindow.penColor;return o=s[++i],u.fgOpacity=(192&o)>>6,u.fgRed=(48&o)>>4,u.fgGreen=(12&o)>>2,u.fgBlue=3&o,o=s[++i],u.bgOpacity=(192&o)>>6,u.bgRed=(48&o)>>4,u.bgGreen=(12&o)>>2,u.bgBlue=3&o,o=s[++i],u.edgeRed=(48&o)>>4,u.edgeGreen=(12&o)>>2,u.edgeBlue=3&o,i},Ft.prototype.setPenLocation=function(i,a){var s=this.current708Packet.data,o=s[i],u=a.currentWindow.penLoc;return a.currentWindow.pendingNewLine=!0,o=s[++i],u.row=15&o,o=s[++i],u.column=63&o,i},Ft.prototype.reset=function(i,a){var s=this.getPts(i);return this.flushDisplayed(s,a),this.initService(a.serviceNum,i)};var Ut={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},jt=/* @__PURE__ */__name(function getCharFromCode2(i){return null===i?"":(i=Ut[i]||i,String.fromCharCode(i))},"getCharFromCode"),Vt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],zt=/* @__PURE__ */__name(function createDisplayBuffer2(){for(var i=[],a=15;a--;)i.push("");return i},"createDisplayBuffer"),Ht=/* @__PURE__ */__name(function Cea608Stream2(i,a){Cea608Stream2.prototype.init.call(this),this.field_=i||0,this.dataChannel_=a||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(i){var a,s,o,u,_;if((a=32639&i.ccData)!==this.lastControlCode_){if(4096==(61440&a)?this.lastControlCode_=a:a!==this.PADDING_&&(this.lastControlCode_=null),o=a>>>8,u=255&a,a!==this.PADDING_)if(a===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(a===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(i.pts),this.flushDisplayed(i.pts),s=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=s,this.startPts_=i.pts;else if(a===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(i.pts);else if(a===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(i.pts);else if(a===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(i.pts);else if(a===this.CARRIAGE_RETURN_)this.clearFormatting(i.pts),this.flushDisplayed(i.pts),this.shiftRowsUp_(),this.startPts_=i.pts;else if(a===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(a===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(i.pts),this.displayed_=zt();else if(a===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=zt();else if(a===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(i.pts),this.displayed_=zt()),this.mode_="paintOn",this.startPts_=i.pts;else if(this.isSpecialCharacter(o,u))_=jt((o=(3&o)<<8)|u),this[this.mode_](i.pts,_),this.column_++;else if(this.isExtCharacter(o,u))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),_=jt((o=(3&o)<<8)|u),this[this.mode_](i.pts,_),this.column_++;else if(this.isMidRowCode(o,u))this.clearFormatting(i.pts),this[this.mode_](i.pts," "),this.column_++,14&~u||this.addFormatting(i.pts,["i"]),1&~u||this.addFormatting(i.pts,["u"]);else if(this.isOffsetControlCode(o,u))this.column_+=3&u;else if(this.isPAC(o,u)){var x=Vt.indexOf(7968&a);"rollUp"===this.mode_&&(x-this.rollUpRows_+1<0&&(x=this.rollUpRows_-1),this.setRollUp(i.pts,x)),x!==this.row_&&(this.clearFormatting(i.pts),this.row_=x),1&u&&-1===this.formatting_.indexOf("u")&&this.addFormatting(i.pts,["u"]),16&~a||(this.column_=4*((14&a)>>1)),this.isColorPAC(u)&&(14&~u||this.addFormatting(i.pts,["i"]))}else this.isNormalChar(o)&&(0===u&&(u=null),_=jt(o),_+=jt(u),this[this.mode_](i.pts,_),this.column_+=_.length)}else this.lastControlCode_=null}},"Cea608Stream");Ht.prototype=new Ye,Ht.prototype.flushDisplayed=function(i){var a=this.displayed_.map(function(i,a){try{return i.trim()}catch(s){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+a+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");a.length&&this.trigger("data",{startPts:this.startPts_,endPts:i,text:a,stream:this.name_})},Ht.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=zt(),this.nonDisplayed_=zt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ht.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ht.prototype.isSpecialCharacter=function(i,a){return i===this.EXT_&&a>=48&&a<=63},Ht.prototype.isExtCharacter=function(i,a){return(i===this.EXT_+1||i===this.EXT_+2)&&a>=32&&a<=63},Ht.prototype.isMidRowCode=function(i,a){return i===this.EXT_&&a>=32&&a<=47},Ht.prototype.isOffsetControlCode=function(i,a){return i===this.OFFSET_&&a>=33&&a<=35},Ht.prototype.isPAC=function(i,a){return i>=this.BASE_&&i<this.BASE_+8&&a>=64&&a<=127},Ht.prototype.isColorPAC=function(i){return i>=64&&i<=79||i>=96&&i<=127},Ht.prototype.isNormalChar=function(i){return i>=32&&i<=127},Ht.prototype.setRollUp=function(i,a){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(i),this.nonDisplayed_=zt(),this.displayed_=zt()),void 0!==a&&a!==this.row_)for(var s=0;s<this.rollUpRows_;s++)this.displayed_[a-s]=this.displayed_[this.row_-s],this.displayed_[this.row_-s]="";void 0===a&&(a=this.row_),this.topRow_=a-this.rollUpRows_+1},Ht.prototype.addFormatting=function(i,a){this.formatting_=this.formatting_.concat(a);var s=a.reduce(function(i,a){return i+"<"+a+">"},"");this[this.mode_](i,s)},Ht.prototype.clearFormatting=function(i){if(this.formatting_.length){var a=this.formatting_.reverse().reduce(function(i,a){return i+"</"+a+">"},"");this.formatting_=[],this[this.mode_](i,a)}},Ht.prototype.popOn=function(i,a){var s=this.nonDisplayed_[this.row_];s+=a,this.nonDisplayed_[this.row_]=s},Ht.prototype.rollUp=function(i,a){var s=this.displayed_[this.row_];s+=a,this.displayed_[this.row_]=s},Ht.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++)this.displayed_[i]="";for(i=this.row_+1;i<15;i++)this.displayed_[i]="";for(i=this.topRow_;i<this.row_;i++)this.displayed_[i]=this.displayed_[i+1];this.displayed_[this.row_]=""},Ht.prototype.paintOn=function(i,a){var s=this.displayed_[this.row_];s+=a,this.displayed_[this.row_]=s};var $t={CaptionStream:Lt,Cea608Stream:Ht,Cea708Stream:Ft},Gt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Wt="shared",qt=/* @__PURE__ */__name(function handleRollover2(i,a){var s=1;for(i>a&&(s=-1);Math.abs(a-i)>4294967296;)i+=8589934592*s;return i},"handleRollover"),Xt=/* @__PURE__ */__name(function TimestampRolloverStream2(i){var a,s;TimestampRolloverStream2.prototype.init.call(this),this.type_=i||Wt,this.push=function(i){this.type_!==Wt&&i.type!==this.type_||(void 0===s&&(s=i.dts),i.dts=qt(i.dts,s),i.pts=qt(i.pts,s),a=i.dts,this.trigger("data",i))},this.flush=function(){s=a,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){s=void 0,a=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}},"TimestampRolloverStream");Xt.prototype=new Ye;var Qt,Kt={TimestampRolloverStream:Xt,handleRollover:qt},Yt=/* @__PURE__ */__name(function percentEncode2(i,a,s){var o,u="";for(o=a;o<s;o++)u+="%"+("00"+i[o].toString(16)).slice(-2);return u},"percentEncode"),Jt=/* @__PURE__ */__name(function parseUtf82(i,a,s){return decodeURIComponent(Yt(i,a,s))},"parseUtf8"),Zt=/* @__PURE__ */__name(function parseIso885912(i,a,s){return unescape(Yt(i,a,s))},"parseIso88591"),en=/* @__PURE__ */__name(function parseSyncSafeInteger2(i){return i[0]<<21|i[1]<<14|i[2]<<7|i[3]},"parseSyncSafeInteger"),tn={TXXX:/* @__PURE__ */__name(function TXXX(i){var a;if(3===i.data[0]){for(a=1;a<i.data.length;a++)if(0===i.data[a]){i.description=Jt(i.data,1,a),i.value=Jt(i.data,a+1,i.data.length).replace(/\0*$/,"");break}i.data=i.value}},"TXXX"),WXXX:/* @__PURE__ */__name(function WXXX(i){var a;if(3===i.data[0])for(a=1;a<i.data.length;a++)if(0===i.data[a]){i.description=Jt(i.data,1,a),i.url=Jt(i.data,a+1,i.data.length);break}},"WXXX"),PRIV:/* @__PURE__ */__name(function PRIV(i){var a;for(a=0;a<i.data.length;a++)if(0===i.data[a]){i.owner=Zt(i.data,0,a);break}i.privateData=i.data.subarray(a+1),i.data=i.privateData},"PRIV")};(Qt=/* @__PURE__ */__name(function MetadataStream(i){var a,s={descriptor:i&&i.descriptor},o=0,u=[],_=0;if(Qt.prototype.init.call(this),this.dispatchType=Gt.METADATA_STREAM_TYPE.toString(16),s.descriptor)for(a=0;a<s.descriptor.length;a++)this.dispatchType+=("00"+s.descriptor[a].toString(16)).slice(-2);this.push=function(i){var a,s,x,w,C;if("timed-metadata"===i.type)if(i.dataAlignmentIndicator&&(_=0,u.length=0),0===u.length&&(i.data.length<10||i.data[0]!=="I".charCodeAt(0)||i.data[1]!=="D".charCodeAt(0)||i.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(u.push(i),_+=i.data.byteLength,1===u.length&&(o=en(i.data.subarray(6,10)),o+=10),!(_<o)){for(a={data:new Uint8Array(o),frames:[],pts:u[0].pts,dts:u[0].dts},C=0;C<o;)a.data.set(u[0].data.subarray(0,o-C),C),C+=u[0].data.byteLength,_-=u[0].data.byteLength,u.shift();s=10,64&a.data[5]&&(s+=4,s+=en(a.data.subarray(10,14)),o-=en(a.data.subarray(16,20)));do{if((x=en(a.data.subarray(s+4,s+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((w={id:String.fromCharCode(a.data[s],a.data[s+1],a.data[s+2],a.data[s+3]),data:a.data.subarray(s+10,s+x+10)}).key=w.id,tn[w.id]&&(tn[w.id](w),"com.apple.streaming.transportStreamTimestamp"===w.owner)){var L=w.data,B=(1&L[3])<<30|L[4]<<22|L[5]<<14|L[6]<<6|L[7]>>>2;B*=4,B+=3&L[7],w.timeStamp=B,void 0===a.pts&&void 0===a.dts&&(a.pts=w.timeStamp,a.dts=w.timeStamp),this.trigger("timestamp",w)}a.frames.push(w),s+=10,s+=x}while(s<o);this.trigger("data",a)}}},"MetadataStream")).prototype=new Ye;var nn,rn,an,sn=Qt,ln=Kt.TimestampRolloverStream,cn=188;(nn=/* @__PURE__ */__name(function TransportPacketStream(){var i=new Uint8Array(cn),a=0;nn.prototype.init.call(this),this.push=function(s){var o,u=0,_=cn;for(a?((o=new Uint8Array(s.byteLength+a)).set(i.subarray(0,a)),o.set(s,a),a=0):o=s;_<o.byteLength;)71!==o[u]||71!==o[_]?(u++,_++):(this.trigger("data",o.subarray(u,_)),u+=cn,_+=cn);u<o.byteLength&&(i.set(o.subarray(u),0),a=o.byteLength-u)},this.flush=function(){a===cn&&71===i[0]&&(this.trigger("data",i),a=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){a=0,this.trigger("reset")}},"TransportPacketStream")).prototype=new Ye,rn=/* @__PURE__ */__name(function TransportParseStream(){var i,a,s,o;rn.prototype.init.call(this),o=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,i=/* @__PURE__ */__name(function parsePsi2(i,o){var u=0;o.payloadUnitStartIndicator&&(u+=i[u]+1),"pat"===o.type?a(i.subarray(u),o):s(i.subarray(u),o)},"parsePsi"),a=/* @__PURE__ */__name(function parsePat3(i,a){a.section_number=i[7],a.last_section_number=i[8],o.pmtPid=(31&i[10])<<8|i[11],a.pmtPid=o.pmtPid},"parsePat"),s=/* @__PURE__ */__name(function parsePmt3(i,a){var s,u;if(1&i[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},s=3+((15&i[1])<<8|i[2])-4,u=12+((15&i[10])<<8|i[11]);u<s;){var _=i[u],x=(31&i[u+1])<<8|i[u+2];_===Gt.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=x:_===Gt.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=x:_===Gt.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][x]=_),u+=5+((15&i[u+3])<<8|i[u+4])}a.programMapTable=o.programMapTable}},"parsePmt"),this.push=function(a){var s={},o=4;if(s.payloadUnitStartIndicator=!!(64&a[1]),s.pid=31&a[1],s.pid<<=8,s.pid|=a[2],(48&a[3])>>>4>1&&(o+=a[o]+1),0===s.pid)s.type="pat",i(a.subarray(o),s),this.trigger("data",s);else if(s.pid===this.pmtPid)for(s.type="pmt",i(a.subarray(o),s),this.trigger("data",s);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,o,s]):this.processPes_(a,o,s)},this.processPes_=function(i,a,s){s.pid===this.programMapTable.video?s.streamType=Gt.H264_STREAM_TYPE:s.pid===this.programMapTable.audio?s.streamType=Gt.ADTS_STREAM_TYPE:s.streamType=this.programMapTable["timed-metadata"][s.pid],s.type="pes",s.data=i.subarray(a),this.trigger("data",s)}},"TransportParseStream"),rn.prototype=new Ye,rn.STREAM_TYPES={h264:27,adts:15},(an=/* @__PURE__ */__name(function ElementaryStream(){var i,a=this,s=!1,o={data:[],size:0},u={data:[],size:0},_={data:[],size:0},x=/* @__PURE__ */__name(function parsePes2(i,a){var s,o=i[0]<<16|i[1]<<8|i[2];a.data=new Uint8Array,1===o&&(a.packetLength=6+(i[4]<<8|i[5]),a.dataAlignmentIndicator=!!(4&i[6]),192&(s=i[7])&&(a.pts=(14&i[9])<<27|(255&i[10])<<20|(254&i[11])<<12|(255&i[12])<<5|(254&i[13])>>>3,a.pts*=4,a.pts+=(6&i[13])>>>1,a.dts=a.pts,64&s&&(a.dts=(14&i[14])<<27|(255&i[15])<<20|(254&i[16])<<12|(255&i[17])<<5|(254&i[18])>>>3,a.dts*=4,a.dts+=(6&i[18])>>>1)),a.data=i.subarray(9+i[8]))},"parsePes"),w=/* @__PURE__ */__name(function flushStream2(i,s,o){var u,_,w=new Uint8Array(i.size),C={type:s},L=0,B=0;if(i.data.length&&!(i.size<9)){for(C.trackId=i.data[0].pid,L=0;L<i.data.length;L++)_=i.data[L],w.set(_.data,B),B+=_.data.byteLength;x(w,C),u="video"===s||C.packetLength<=i.size,(o||u)&&(i.size=0,i.data.length=0),u&&a.trigger("data",C)}},"flushStream");an.prototype.init.call(this),this.push=function(x){({pat:/* @__PURE__ */__name(function pat(){},"pat"),pes:/* @__PURE__ */__name(function pes(){var i,a;switch(x.streamType){case Gt.H264_STREAM_TYPE:i=o,a="video";break;case Gt.ADTS_STREAM_TYPE:i=u,a="audio";break;case Gt.METADATA_STREAM_TYPE:i=_,a="timed-metadata";break;default:return}x.payloadUnitStartIndicator&&w(i,a,!0),i.data.push(x),i.size+=x.data.byteLength},"pes"),pmt:/* @__PURE__ */__name(function pmt(){var o={type:"metadata",tracks:[]};null!==(i=x.programMapTable).video&&o.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&o.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),s=!0,a.trigger("data",o)},"pmt")})[x.type]()},this.reset=function(){o.size=0,o.data.length=0,u.size=0,u.data.length=0,this.trigger("reset")},this.flushStreams_=function(){w(o,"video"),w(u,"audio"),w(_,"timed-metadata")},this.flush=function(){if(!s&&i){var o={type:"metadata",tracks:[]};null!==i.video&&o.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.video,codec:"avc",type:"video"}),null!==i.audio&&o.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+i.audio,codec:"adts",type:"audio"}),a.trigger("data",o)}s=!1,this.flushStreams_(),this.trigger("done")}},"ElementaryStream")).prototype=new Ye;var un={PAT_PID:0,MP2T_PACKET_LENGTH:cn,TransportPacketStream:nn,TransportParseStream:rn,ElementaryStream:an,TimestampRolloverStream:ln,CaptionStream:$t.CaptionStream,Cea608Stream:$t.Cea608Stream,Cea708Stream:$t.Cea708Stream,MetadataStream:sn};for(var dn in Gt)Gt.hasOwnProperty(dn)&&(un[dn]=Gt[dn]);var hn,pn=un,mn=wt.ONE_SECOND_IN_TS,fn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(hn=/* @__PURE__ */__name(function AdtsStream(i){var a,s=0;hn.prototype.init.call(this),this.skipWarn_=function(i,a){this.trigger("log",{level:"warn",message:"adts skiping bytes "+i+" to "+a+" in frame "+s+" outside syncword"})},this.push=function(o){var u,_,x,w,C,L=0;if(i||(s=0),"audio"===o.type){var B;for(a&&a.length?(x=a,(a=new Uint8Array(x.byteLength+o.data.byteLength)).set(x),a.set(o.data,x.byteLength)):a=o.data;L+7<a.length;)if(255===a[L]&&240==(246&a[L+1])){if("number"==typeof B&&(this.skipWarn_(B,L),B=null),_=2*(1&~a[L+1]),u=(3&a[L+3])<<11|a[L+4]<<3|(224&a[L+5])>>5,C=(w=1024*(1+(3&a[L+6])))*mn/fn[(60&a[L+2])>>>2],a.byteLength-L<u)break;this.trigger("data",{pts:o.pts+s*C,dts:o.dts+s*C,sampleCount:w,audioobjecttype:1+(a[L+2]>>>6&3),channelcount:(1&a[L+2])<<2|(192&a[L+3])>>>6,samplerate:fn[(60&a[L+2])>>>2],samplingfrequencyindex:(60&a[L+2])>>>2,samplesize:16,data:a.subarray(L+7+_,L+u)}),s++,L+=u}else"number"!=typeof B&&(B=L),L++;"number"==typeof B&&(this.skipWarn_(B,L),B=null),a=a.subarray(L)}},this.flush=function(){s=0,this.trigger("done")},this.reset=function(){a=void 0,this.trigger("reset")},this.endTimeline=function(){a=void 0,this.trigger("endedtimeline")}},"AdtsStream")).prototype=new Ye;var gn,_n,yn,vn=hn,bn=/* @__PURE__ */__name(function ExpGolomb2(i){var a=i.byteLength,s=0,o=0;this.length=function(){return 8*a},this.bitsAvailable=function(){return 8*a+o},this.loadWord=function(){var u=i.byteLength-a,_=new Uint8Array(4),x=Math.min(4,a);if(0===x)throw new Error("no bytes available");_.set(i.subarray(u,u+x)),s=new DataView(_.buffer).getUint32(0),o=8*x,a-=x},this.skipBits=function(i){var u;o>i?(s<<=i,o-=i):(i-=o,i-=8*(u=Math.floor(i/8)),a-=u,this.loadWord(),s<<=i,o-=i)},this.readBits=function(i){var u=Math.min(o,i),_=s>>>32-u;return(o-=u)>0?s<<=u:a>0&&this.loadWord(),(u=i-u)>0?_<<u|this.readBits(u):_},this.skipLeadingZeros=function(){var i;for(i=0;i<o;++i)if(s&2147483648>>>i)return s<<=i,o-=i,i;return this.loadWord(),i+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var i=this.skipLeadingZeros();return this.readBits(i+1)-1},this.readExpGolomb=function(){var i=this.readUnsignedExpGolomb();return 1&i?1+i>>>1:-1*(i>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},"ExpGolomb");(_n=/* @__PURE__ */__name(function NalByteStream(){var i,a,s=0;_n.prototype.init.call(this),this.push=function(o){var u;a?((u=new Uint8Array(a.byteLength+o.data.byteLength)).set(a),u.set(o.data,a.byteLength),a=u):a=o.data;for(var _=a.byteLength;s<_-3;s++)if(1===a[s+2]){i=s+5;break}for(;i<_;)switch(a[i]){case 0:if(0!==a[i-1]){i+=2;break}if(0!==a[i-2]){i++;break}s+3!==i-2&&this.trigger("data",a.subarray(s+3,i-2));do{i++}while(1!==a[i]&&i<_);s=i-2,i+=3;break;case 1:if(0!==a[i-1]||0!==a[i-2]){i+=3;break}this.trigger("data",a.subarray(s+3,i-2)),s=i-2,i+=3;break;default:i+=3}a=a.subarray(s),i-=s,s=0},this.reset=function(){a=null,s=0,this.trigger("reset")},this.flush=function(){a&&a.byteLength>3&&this.trigger("data",a.subarray(s+3)),a=null,s=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},"NalByteStream")).prototype=new Ye,yn={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(gn=/* @__PURE__ */__name(function H264Stream2(){var i,a,s,o,u,_,x,w=new _n;gn.prototype.init.call(this),i=this,this.push=function(i){"video"===i.type&&(a=i.trackId,s=i.pts,o=i.dts,w.push(i))},w.on("data",function(x){var w={trackId:a,pts:s,dts:o,data:x,nalUnitTypeCode:31&x[0]};switch(w.nalUnitTypeCode){case 5:w.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:w.nalUnitType="sei_rbsp",w.escapedRBSP=u(x.subarray(1));break;case 7:w.nalUnitType="seq_parameter_set_rbsp",w.escapedRBSP=u(x.subarray(1)),w.config=_(w.escapedRBSP);break;case 8:w.nalUnitType="pic_parameter_set_rbsp";break;case 9:w.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",w)}),w.on("done",function(){i.trigger("done")}),w.on("partialdone",function(){i.trigger("partialdone")}),w.on("reset",function(){i.trigger("reset")}),w.on("endedtimeline",function(){i.trigger("endedtimeline")}),this.flush=function(){w.flush()},this.partialFlush=function(){w.partialFlush()},this.reset=function(){w.reset()},this.endTimeline=function(){w.endTimeline()},x=/* @__PURE__ */__name(function skipScalingList2(i,a){var s,o=8,u=8;for(s=0;s<i;s++)0!==u&&(u=(o+a.readExpGolomb()+256)%256),o=0===u?o:u},"skipScalingList"),u=/* @__PURE__ */__name(function discardEmulationPreventionBytes4(i){for(var a,s,o=i.byteLength,u=[],_=1;_<o-2;)0===i[_]&&0===i[_+1]&&3===i[_+2]?(u.push(_+2),_+=2):_++;if(0===u.length)return i;a=o-u.length,s=new Uint8Array(a);var x=0;for(_=0;_<a;x++,_++)x===u[0]&&(x++,u.shift()),s[_]=i[x];return s},"discardEmulationPreventionBytes"),_=/* @__PURE__ */__name(function readSequenceParameterSet2(i){var a,s,o,u,_,w,C,L,B,U,j,V,z=0,$=0,Y=0,Z=0,ee=[1,1];if(s=(a=new bn(i)).readUnsignedByte(),u=a.readUnsignedByte(),o=a.readUnsignedByte(),a.skipUnsignedExpGolomb(),yn[s]&&(3===(_=a.readUnsignedExpGolomb())&&a.skipBits(1),a.skipUnsignedExpGolomb(),a.skipUnsignedExpGolomb(),a.skipBits(1),a.readBoolean()))for(j=3!==_?8:12,V=0;V<j;V++)a.readBoolean()&&x(V<6?16:64,a);if(a.skipUnsignedExpGolomb(),0===(w=a.readUnsignedExpGolomb()))a.readUnsignedExpGolomb();else if(1===w)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),C=a.readUnsignedExpGolomb(),V=0;V<C;V++)a.skipExpGolomb();if(a.skipUnsignedExpGolomb(),a.skipBits(1),L=a.readUnsignedExpGolomb(),B=a.readUnsignedExpGolomb(),0===(U=a.readBits(1))&&a.skipBits(1),a.skipBits(1),a.readBoolean()&&(z=a.readUnsignedExpGolomb(),$=a.readUnsignedExpGolomb(),Y=a.readUnsignedExpGolomb(),Z=a.readUnsignedExpGolomb()),a.readBoolean()&&a.readBoolean()){switch(a.readUnsignedByte()){case 1:ee=[1,1];break;case 2:ee=[12,11];break;case 3:ee=[10,11];break;case 4:ee=[16,11];break;case 5:ee=[40,33];break;case 6:ee=[24,11];break;case 7:ee=[20,11];break;case 8:ee=[32,11];break;case 9:ee=[80,33];break;case 10:ee=[18,11];break;case 11:ee=[15,11];break;case 12:ee=[64,33];break;case 13:ee=[160,99];break;case 14:ee=[4,3];break;case 15:ee=[3,2];break;case 16:ee=[2,1];break;case 255:ee=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}ee&&(ee[0],ee[1])}return{profileIdc:s,levelIdc:o,profileCompatibility:u,width:16*(L+1)-2*z-2*$,height:(2-U)*(B+1)*16-2*Y-2*Z,sarRatio:ee}},"readSequenceParameterSet")},"H264Stream")).prototype=new Ye;var Tn,Sn={H264Stream:gn},xn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],wn=/* @__PURE__ */__name(function parseId3TagSize2(i,a){var s=i[a+6]<<21|i[a+7]<<14|i[a+8]<<7|i[a+9];return s=s>=0?s:0,(16&i[a+5])>>4?s+20:s+10},"parseId3TagSize"),An=/* @__PURE__ */__name(function getId3Offset3(i,a){return i.length-a<10||i[a]!=="I".charCodeAt(0)||i[a+1]!=="D".charCodeAt(0)||i[a+2]!=="3".charCodeAt(0)?a:getId3Offset3(i,a+=wn(i,a))},"getId3Offset"),Cn=/* @__PURE__ */__name(function isLikelyAacData2(i){var a=An(i,0);return i.length>=a+2&&!(255&~i[a])&&!(240&~i[a+1])&&16==(22&i[a+1])},"isLikelyAacData"),En=/* @__PURE__ */__name(function parseSyncSafeInteger2(i){return i[0]<<21|i[1]<<14|i[2]<<7|i[3]},"parseSyncSafeInteger"),Mn=/* @__PURE__ */__name(function percentEncode2(i,a,s){var o,u="";for(o=a;o<s;o++)u+="%"+("00"+i[o].toString(16)).slice(-2);return u},"percentEncode"),kn=/* @__PURE__ */__name(function parseIso885912(i,a,s){return unescape(Mn(i,a,s))},"parseIso88591"),Pn={isLikelyAacData:Cn,parseId3TagSize:wn,parseAdtsSize:/* @__PURE__ */__name(function parseAdtsSize2(i,a){var s=(224&i[a+5])>>5,o=i[a+4]<<3;return 6144&i[a+3]|o|s},"parseAdtsSize"),parseType:/* @__PURE__ */__name(function parseType2(i,a){return i[a]==="I".charCodeAt(0)&&i[a+1]==="D".charCodeAt(0)&&i[a+2]==="3".charCodeAt(0)?"timed-metadata":!0&i[a]&&!(240&~i[a+1])?"audio":null},"parseType"),parseSampleRate:/* @__PURE__ */__name(function parseSampleRate2(i){for(var a=0;a+5<i.length;){if(255===i[a]&&240==(246&i[a+1]))return xn[(60&i[a+2])>>>2];a++}return null},"parseSampleRate"),parseAacTimestamp:/* @__PURE__ */__name(function parseAacTimestamp2(i){var a,s,o;a=10,64&i[5]&&(a+=4,a+=En(i.subarray(10,14)));do{if((s=En(i.subarray(a+4,a+8)))<1)return null;if("PRIV"===String.fromCharCode(i[a],i[a+1],i[a+2],i[a+3])){o=i.subarray(a+10,a+s+10);for(var u=0;u<o.byteLength;u++)if(0===o[u]){if("com.apple.streaming.transportStreamTimestamp"===kn(o,0,u)){var _=o.subarray(u+1),x=(1&_[3])<<30|_[4]<<22|_[5]<<14|_[6]<<6|_[7]>>>2;return x*=4,x+=3&_[7]}break}}a+=10,a+=s}while(a<i.byteLength);return null},"parseAacTimestamp")};(Tn=/* @__PURE__ */__name(function AacStream(){var i=new Uint8Array,a=0;Tn.prototype.init.call(this),this.setTimestamp=function(i){a=i},this.push=function(s){var o,u,_,x,w=0,C=0;for(i.length?(x=i.length,(i=new Uint8Array(s.byteLength+x)).set(i.subarray(0,x)),i.set(s,x)):i=s;i.length-C>=3;)if(i[C]!=="I".charCodeAt(0)||i[C+1]!=="D".charCodeAt(0)||i[C+2]!=="3".charCodeAt(0))if(255&~i[C]||240&~i[C+1])C++;else{if(i.length-C<7)break;if(C+(w=Pn.parseAdtsSize(i,C))>i.length)break;_={type:"audio",data:i.subarray(C,C+w),pts:a,dts:a},this.trigger("data",_),C+=w}else{if(i.length-C<10)break;if(C+(w=Pn.parseId3TagSize(i,C))>i.length)break;u={type:"timed-metadata",data:i.subarray(C,C+w)},this.trigger("data",u),C+=w}o=i.length-C,i=o>0?i.subarray(C):new Uint8Array},this.reset=function(){i=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){i=new Uint8Array,this.trigger("endedtimeline")}},"AacStream")).prototype=new Ye;var In,Ln,Dn,Rn,On=Tn,Nn=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Bn=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Fn=Sn.H264Stream,Un=Pn.isLikelyAacData,jn=wt.ONE_SECOND_IN_TS,Vn=/* @__PURE__ */__name(function retriggerForStream2(i,a){a.stream=i,this.trigger("log",a)},"retriggerForStream"),zn=/* @__PURE__ */__name(function addPipelineLogRetriggers2(i,a){for(var s=Object.keys(a),o=0;o<s.length;o++){var u=s[o];"headOfPipeline"!==u&&a[u].on&&a[u].on("log",Vn.bind(i,u))}},"addPipelineLogRetriggers"),Hn=/* @__PURE__ */__name(function arrayEquals2(i,a){var s;if(i.length!==a.length)return!1;for(s=0;s<i.length;s++)if(i[s]!==a[s])return!1;return!0},"arrayEquals"),$n=/* @__PURE__ */__name(function generateSegmentTimingInfo2(i,a,s,o,u,_){return{start:{dts:i,pts:i+(s-a)},end:{dts:i+(o-a),pts:i+(u-s)},prependedContentDuration:_,baseMediaDecodeTime:i}},"generateSegmentTimingInfo");(Ln=/* @__PURE__ */__name(function AudioSegmentStream(i,a){var s,o=[],u=0,_=0,x=1/0;s=(a=a||{}).firstSequenceNumber||0,Ln.prototype.init.call(this),this.push=function(a){kt.collectDtsInfo(i,a),i&&Nn.forEach(function(s){i[s]=a[s]}),o.push(a)},this.setEarliestDts=function(i){u=i},this.setVideoBaseMediaDecodeTime=function(i){x=i},this.setAudioAppendStart=function(i){_=i},this.flush=function(){var w,C,L,B,U,j,V;0!==o.length?(w=Ct.trimAdtsFramesByEarliestDts(o,i,u),i.baseMediaDecodeTime=kt.calculateTrackBaseMediaDecodeTime(i,a.keepOriginalTimestamps),V=Ct.prefixWithSilence(i,w,_,x),i.samples=Ct.generateSampleTable(w),L=dt.mdat(Ct.concatenateFrameData(w)),o=[],C=dt.moof(s,[i]),B=new Uint8Array(C.byteLength+L.byteLength),s++,B.set(C),B.set(L,C.byteLength),kt.clearDtsInfo(i),U=Math.ceil(1024*jn/i.samplerate),w.length&&(j=w.length*U,this.trigger("segmentTimingInfo",$n(wt.audioTsToVideoTs(i.baseMediaDecodeTime,i.samplerate),w[0].dts,w[0].pts,w[0].dts+j,w[0].pts+j,V||0)),this.trigger("timingInfo",{start:w[0].pts,end:w[0].pts+j})),this.trigger("data",{track:i,boxes:B}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){kt.clearDtsInfo(i),o=[],this.trigger("reset")}},"AudioSegmentStream")).prototype=new Ye,(In=/* @__PURE__ */__name(function VideoSegmentStream(i,a){var s,o,u,_=[],x=[];s=(a=a||{}).firstSequenceNumber||0,In.prototype.init.call(this),delete i.minPTS,this.gopCache_=[],this.push=function(a){kt.collectDtsInfo(i,a),"seq_parameter_set_rbsp"!==a.nalUnitType||o||(o=a.config,i.sps=[a.data],Bn.forEach(function(a){i[a]=o[a]},this)),"pic_parameter_set_rbsp"!==a.nalUnitType||u||(u=a.data,i.pps=[a.data]),_.push(a)},this.flush=function(){for(var o,u,w,C,L,B,U,j,V=0;_.length&&"access_unit_delimiter_rbsp"!==_[0].nalUnitType;)_.shift();if(0===_.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(o=_t.groupNalsIntoFrames(_),(w=_t.groupFramesIntoGops(o))[0][0].keyFrame||((u=this.getGopForFusion_(_[0],i))?(V=u.duration,w.unshift(u),w.byteLength+=u.byteLength,w.nalCount+=u.nalCount,w.pts=u.pts,w.dts=u.dts,w.duration+=u.duration):w=_t.extendFirstKeyFrame(w)),x.length){var z;if(!(z=a.alignGopsAtEnd?this.alignGopsAtEnd_(w):this.alignGopsAtStart_(w)))return this.gopCache_.unshift({gop:w.pop(),pps:i.pps,sps:i.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");kt.clearDtsInfo(i),w=z}kt.collectDtsInfo(i,w),i.samples=_t.generateSampleTable(w),L=dt.mdat(_t.concatenateNalData(w)),i.baseMediaDecodeTime=kt.calculateTrackBaseMediaDecodeTime(i,a.keepOriginalTimestamps),this.trigger("processedGopsInfo",w.map(function(i){return{pts:i.pts,dts:i.dts,byteLength:i.byteLength}})),U=w[0],j=w[w.length-1],this.trigger("segmentTimingInfo",$n(i.baseMediaDecodeTime,U.dts,U.pts,j.dts+j.duration,j.pts+j.duration,V)),this.trigger("timingInfo",{start:w[0].pts,end:w[w.length-1].pts+w[w.length-1].duration}),this.gopCache_.unshift({gop:w.pop(),pps:i.pps,sps:i.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),_=[],this.trigger("baseMediaDecodeTime",i.baseMediaDecodeTime),this.trigger("timelineStartInfo",i.timelineStartInfo),C=dt.moof(s,[i]),B=new Uint8Array(C.byteLength+L.byteLength),s++,B.set(C),B.set(L,C.byteLength),this.trigger("data",{track:i,boxes:B}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),_=[],this.gopCache_.length=0,x.length=0,this.trigger("reset")},this.resetStream_=function(){kt.clearDtsInfo(i),o=void 0,u=void 0},this.getGopForFusion_=function(a){var s,o,u,_,x,w=1/0;for(x=0;x<this.gopCache_.length;x++)u=(_=this.gopCache_[x]).gop,i.pps&&Hn(i.pps[0],_.pps[0])&&i.sps&&Hn(i.sps[0],_.sps[0])&&(u.dts<i.timelineStartInfo.dts||(s=a.dts-u.dts-u.duration)>=-1e4&&s<=45e3&&(!o||w>s)&&(o=_,w=s));return o?o.gop:null},this.alignGopsAtStart_=function(i){var a,s,o,u,_,w,C,L;for(_=i.byteLength,w=i.nalCount,C=i.duration,a=s=0;a<x.length&&s<i.length&&(o=x[a],u=i[s],o.pts!==u.pts);)u.pts>o.pts?a++:(s++,_-=u.byteLength,w-=u.nalCount,C-=u.duration);return 0===s?i:s===i.length?null:((L=i.slice(s)).byteLength=_,L.duration=C,L.nalCount=w,L.pts=L[0].pts,L.dts=L[0].dts,L)},this.alignGopsAtEnd_=function(i){var a,s,o,u,_,w,C;for(a=x.length-1,s=i.length-1,_=null,w=!1;a>=0&&s>=0;){if(o=x[a],u=i[s],o.pts===u.pts){w=!0;break}o.pts>u.pts?a--:(a===x.length-1&&(_=s),s--)}if(!w&&null===_)return null;if(0===(C=w?s:_))return i;var L=i.slice(C),B=L.reduce(function(i,a){return i.byteLength+=a.byteLength,i.duration+=a.duration,i.nalCount+=a.nalCount,i},{byteLength:0,duration:0,nalCount:0});return L.byteLength=B.byteLength,L.duration=B.duration,L.nalCount=B.nalCount,L.pts=L[0].pts,L.dts=L[0].dts,L},this.alignGopsWith=function(i){x=i}},"VideoSegmentStream")).prototype=new Ye,(Rn=/* @__PURE__ */__name(function CoalesceStream(i,a){this.numberOfTracks=0,this.metadataStream=a,void 0!==(i=i||{}).remux?this.remuxTracks=!!i.remux:this.remuxTracks=!0,"boolean"==typeof i.keepOriginalTimestamps?this.keepOriginalTimestamps=i.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Rn.prototype.init.call(this),this.push=function(i){return i.text?this.pendingCaptions.push(i):i.frames?this.pendingMetadata.push(i):(this.pendingTracks.push(i.track),this.pendingBytes+=i.boxes.byteLength,"video"===i.track.type&&(this.videoTrack=i.track,this.pendingBoxes.push(i.boxes)),void("audio"===i.track.type&&(this.audioTrack=i.track,this.pendingBoxes.unshift(i.boxes))))}},"CoalesceStream")).prototype=new Ye,Rn.prototype.flush=function(i){var a,s,o,u,_=0,x={captions:[],captionStreams:{},metadata:[],info:{}},w=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==i&&"AudioSegmentStream"!==i)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(w=this.videoTrack.timelineStartInfo.pts,Bn.forEach(function(i){x.info[i]=this.videoTrack[i]},this)):this.audioTrack&&(w=this.audioTrack.timelineStartInfo.pts,Nn.forEach(function(i){x.info[i]=this.audioTrack[i]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?x.type=this.pendingTracks[0].type:x.type="combined",this.emittedTracks+=this.pendingTracks.length,o=dt.initSegment(this.pendingTracks),x.initSegment=new Uint8Array(o.byteLength),x.initSegment.set(o),x.data=new Uint8Array(this.pendingBytes),u=0;u<this.pendingBoxes.length;u++)x.data.set(this.pendingBoxes[u],_),_+=this.pendingBoxes[u].byteLength;for(u=0;u<this.pendingCaptions.length;u++)(a=this.pendingCaptions[u]).startTime=wt.metadataTsToSeconds(a.startPts,w,this.keepOriginalTimestamps),a.endTime=wt.metadataTsToSeconds(a.endPts,w,this.keepOriginalTimestamps),x.captionStreams[a.stream]=!0,x.captions.push(a);for(u=0;u<this.pendingMetadata.length;u++)(s=this.pendingMetadata[u]).cueTime=wt.metadataTsToSeconds(s.pts,w,this.keepOriginalTimestamps),x.metadata.push(s);for(x.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",x),u=0;u<x.captions.length;u++)a=x.captions[u],this.trigger("caption",a);for(u=0;u<x.metadata.length;u++)s=x.metadata[u],this.trigger("id3Frame",s)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Rn.prototype.setRemux=function(i){this.remuxTracks=i},(Dn=/* @__PURE__ */__name(function Transmuxer(i){var a,s,o=this,u=!0;Dn.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var u={};this.transmuxPipeline_=u,u.type="aac",u.metadataStream=new pn.MetadataStream,u.aacStream=new On,u.audioTimestampRolloverStream=new pn.TimestampRolloverStream("audio"),u.timedMetadataTimestampRolloverStream=new pn.TimestampRolloverStream("timed-metadata"),u.adtsStream=new vn,u.coalesceStream=new Rn(i,u.metadataStream),u.headOfPipeline=u.aacStream,u.aacStream.pipe(u.audioTimestampRolloverStream).pipe(u.adtsStream),u.aacStream.pipe(u.timedMetadataTimestampRolloverStream).pipe(u.metadataStream).pipe(u.coalesceStream),u.metadataStream.on("timestamp",function(i){u.aacStream.setTimestamp(i.timeStamp)}),u.aacStream.on("data",function(_){"timed-metadata"!==_.type&&"audio"!==_.type||u.audioSegmentStream||(s=s||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},u.coalesceStream.numberOfTracks++,u.audioSegmentStream=new Ln(s,i),u.audioSegmentStream.on("log",o.getLogTrigger_("audioSegmentStream")),u.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),u.adtsStream.pipe(u.audioSegmentStream).pipe(u.coalesceStream),o.trigger("trackinfo",{hasAudio:!!s,hasVideo:!!a}))}),u.coalesceStream.on("data",this.trigger.bind(this,"data")),u.coalesceStream.on("done",this.trigger.bind(this,"done")),zn(this,u)},this.setupTsPipeline=function(){var u={};this.transmuxPipeline_=u,u.type="ts",u.metadataStream=new pn.MetadataStream,u.packetStream=new pn.TransportPacketStream,u.parseStream=new pn.TransportParseStream,u.elementaryStream=new pn.ElementaryStream,u.timestampRolloverStream=new pn.TimestampRolloverStream,u.adtsStream=new vn,u.h264Stream=new Fn,u.captionStream=new pn.CaptionStream(i),u.coalesceStream=new Rn(i,u.metadataStream),u.headOfPipeline=u.packetStream,u.packetStream.pipe(u.parseStream).pipe(u.elementaryStream).pipe(u.timestampRolloverStream),u.timestampRolloverStream.pipe(u.h264Stream),u.timestampRolloverStream.pipe(u.adtsStream),u.timestampRolloverStream.pipe(u.metadataStream).pipe(u.coalesceStream),u.h264Stream.pipe(u.captionStream).pipe(u.coalesceStream),u.elementaryStream.on("data",function(_){var x;if("metadata"===_.type){for(x=_.tracks.length;x--;)a||"video"!==_.tracks[x].type?s||"audio"!==_.tracks[x].type||((s=_.tracks[x]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(a=_.tracks[x]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;a&&!u.videoSegmentStream&&(u.coalesceStream.numberOfTracks++,u.videoSegmentStream=new In(a,i),u.videoSegmentStream.on("log",o.getLogTrigger_("videoSegmentStream")),u.videoSegmentStream.on("timelineStartInfo",function(a){s&&!i.keepOriginalTimestamps&&(s.timelineStartInfo=a,u.audioSegmentStream.setEarliestDts(a.dts-o.baseMediaDecodeTime))}),u.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),u.videoSegmentStream.on("segmentTimingInfo",o.trigger.bind(o,"videoSegmentTimingInfo")),u.videoSegmentStream.on("baseMediaDecodeTime",function(i){s&&u.audioSegmentStream.setVideoBaseMediaDecodeTime(i)}),u.videoSegmentStream.on("timingInfo",o.trigger.bind(o,"videoTimingInfo")),u.h264Stream.pipe(u.videoSegmentStream).pipe(u.coalesceStream)),s&&!u.audioSegmentStream&&(u.coalesceStream.numberOfTracks++,u.audioSegmentStream=new Ln(s,i),u.audioSegmentStream.on("log",o.getLogTrigger_("audioSegmentStream")),u.audioSegmentStream.on("timingInfo",o.trigger.bind(o,"audioTimingInfo")),u.audioSegmentStream.on("segmentTimingInfo",o.trigger.bind(o,"audioSegmentTimingInfo")),u.adtsStream.pipe(u.audioSegmentStream).pipe(u.coalesceStream)),o.trigger("trackinfo",{hasAudio:!!s,hasVideo:!!a})}}),u.coalesceStream.on("data",this.trigger.bind(this,"data")),u.coalesceStream.on("id3Frame",function(i){i.dispatchType=u.metadataStream.dispatchType,o.trigger("id3Frame",i)}),u.coalesceStream.on("caption",this.trigger.bind(this,"caption")),u.coalesceStream.on("done",this.trigger.bind(this,"done")),zn(this,u)},this.setBaseMediaDecodeTime=function(o){var u=this.transmuxPipeline_;i.keepOriginalTimestamps||(this.baseMediaDecodeTime=o),s&&(s.timelineStartInfo.dts=void 0,s.timelineStartInfo.pts=void 0,kt.clearDtsInfo(s),u.audioTimestampRolloverStream&&u.audioTimestampRolloverStream.discontinuity()),a&&(u.videoSegmentStream&&(u.videoSegmentStream.gopCache_=[]),a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,kt.clearDtsInfo(a),u.captionStream.reset()),u.timestampRolloverStream&&u.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(i){s&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(i)},this.setRemux=function(a){var s=this.transmuxPipeline_;i.remux=a,s&&s.coalesceStream&&s.coalesceStream.setRemux(a)},this.alignGopsWith=function(i){a&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(i)},this.getLogTrigger_=function(i){var a=this;return function(s){s.stream=i,a.trigger("log",s)}},this.push=function(i){if(u){var a=Un(i);a&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():a||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),u=!1}this.transmuxPipeline_.headOfPipeline.push(i)},this.flush=function(){u=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},"Transmuxer")).prototype=new Ye;var Gn,Wn,qn,Xn,Qn,Kn,Yn={Transmuxer:Dn},Jn={toUnsigned:/* @__PURE__ */__name(function toUnsigned2(i){return i>>>0},"toUnsigned"),toHexString:/* @__PURE__ */__name(function toHexString2(i){return("00"+i.toString(16)).slice(-2)},"toHexString")},Zn=/* @__PURE__ */__name(function parseType2(i){var a="";return a+=String.fromCharCode(i[0]),a+=String.fromCharCode(i[1]),a+=String.fromCharCode(i[2]),a+=String.fromCharCode(i[3])},"parseType"),_i=Zn,Ei=Jn.toUnsigned,Mi=/* @__PURE__ */__name(function findBox3(i,a){var s,o,u,_,x,w=[];if(!a.length)return null;for(s=0;s<i.byteLength;)o=Ei(i[s]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3]),u=_i(i.subarray(s+4,s+8)),_=o>1?s+o:i.byteLength,u===a[0]&&(1===a.length?w.push(i.subarray(s+8,_)):(x=findBox3(i.subarray(s+8,_),a.slice(1))).length&&(w=w.concat(x))),s=_;return w},"findBox"),Pi=Jn.toUnsigned,Ri=tt.getUint64,Oi=/* @__PURE__ */__name(function tfdt2(i){var a={version:i[0],flags:new Uint8Array(i.subarray(1,4))};return 1===a.version?a.baseMediaDecodeTime=Ri(i.subarray(4)):a.baseMediaDecodeTime=Pi(i[4]<<24|i[5]<<16|i[6]<<8|i[7]),a},"tfdt"),Wi=Oi,er=/* @__PURE__ */__name(function parseSampleFlags2(i){return{isLeading:(12&i[0])>>>2,dependsOn:3&i[0],isDependedOn:(192&i[1])>>>6,hasRedundancy:(48&i[1])>>>4,paddingValue:(14&i[1])>>>1,isNonSyncSample:1&i[1],degradationPriority:i[2]<<8|i[3]}},"parseSampleFlags"),tr=/* @__PURE__ */__name(function trun2(i){var a,s={version:i[0],flags:new Uint8Array(i.subarray(1,4)),samples:[]},o=new DataView(i.buffer,i.byteOffset,i.byteLength),u=1&s.flags[2],_=4&s.flags[2],x=1&s.flags[1],w=2&s.flags[1],C=4&s.flags[1],L=8&s.flags[1],B=o.getUint32(4),U=8;for(u&&(s.dataOffset=o.getInt32(U),U+=4),_&&B&&(a={flags:er(i.subarray(U,U+4))},U+=4,x&&(a.duration=o.getUint32(U),U+=4),w&&(a.size=o.getUint32(U),U+=4),L&&(1===s.version?a.compositionTimeOffset=o.getInt32(U):a.compositionTimeOffset=o.getUint32(U),U+=4),s.samples.push(a),B--);B--;)a={},x&&(a.duration=o.getUint32(U),U+=4),w&&(a.size=o.getUint32(U),U+=4),C&&(a.flags=er(i.subarray(U,U+4)),U+=4),L&&(1===s.version?a.compositionTimeOffset=o.getInt32(U):a.compositionTimeOffset=o.getUint32(U),U+=4),s.samples.push(a);return s},"trun"),nr=tr,ir=/* @__PURE__ */__name(function tfhd2(i){var a,s=new DataView(i.buffer,i.byteOffset,i.byteLength),o={version:i[0],flags:new Uint8Array(i.subarray(1,4)),trackId:s.getUint32(4)},u=1&o.flags[2],_=2&o.flags[2],x=8&o.flags[2],w=16&o.flags[2],C=32&o.flags[2],L=65536&o.flags[0],B=131072&o.flags[0];return a=8,u&&(a+=4,o.baseDataOffset=s.getUint32(12),a+=4),_&&(o.sampleDescriptionIndex=s.getUint32(a),a+=4),x&&(o.defaultSampleDuration=s.getUint32(a),a+=4),w&&(o.defaultSampleSize=s.getUint32(a),a+=4),C&&(o.defaultSampleFlags=s.getUint32(a)),L&&(o.durationIsEmpty=!0),!u&&B&&(o.baseDataOffsetIsMoof=!0),o},"tfhd"),rr=ir,ar="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},sr="undefined"!=typeof window?window:void 0!==ar?ar:"undefined"!=typeof self?self:{},or=It.discardEmulationPreventionBytes,lr=$t.CaptionStream,cr=/* @__PURE__ */__name(function mapToSample2(i,a){for(var s=i,o=0;o<a.length;o++){var u=a[o];if(s<u.size)return u;s-=u.size}return null},"mapToSample"),ur=/* @__PURE__ */__name(function findSeiNals2(i,a,s){var o,u,_,x,w=new DataView(i.buffer,i.byteOffset,i.byteLength),C={logs:[],seiNals:[]};for(u=0;u+4<i.length;u+=_)if(_=w.getUint32(u),u+=4,!(_<=0))switch(31&i[u]){case 6:var L=i.subarray(u+1,u+1+_),B=cr(u,a);if(o={nalUnitType:"sei_rbsp",size:_,data:L,escapedRBSP:or(L),trackId:s},B)o.pts=B.pts,o.dts=B.dts,x=B;else{if(!x){C.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+u+" for trackId "+s+". See mux.js#223."});break}o.pts=x.pts,o.dts=x.dts}C.seiNals.push(o)}return C},"findSeiNals"),dr=/* @__PURE__ */__name(function parseSamples2(i,a,s){var o=a,u=s.defaultSampleDuration||0,_=s.defaultSampleSize||0,x=s.trackId,w=[];return i.forEach(function(i){var a=nr(i).samples;a.forEach(function(i){void 0===i.duration&&(i.duration=u),void 0===i.size&&(i.size=_),i.trackId=x,i.dts=o,void 0===i.compositionTimeOffset&&(i.compositionTimeOffset=0),"bigint"==typeof o?(i.pts=o+sr.BigInt(i.compositionTimeOffset),o+=sr.BigInt(i.duration)):(i.pts=o+i.compositionTimeOffset,o+=i.duration)}),w=w.concat(a)}),w},"parseSamples"),hr=/* @__PURE__ */__name(function parseCaptionNals2(i,a){var s=Mi(i,["moof","traf"]),o=Mi(i,["mdat"]),u={},_=[];return o.forEach(function(i,a){var o=s[a];_.push({mdat:i,traf:o})}),_.forEach(function(i){var s,o,_=i.mdat,x=i.traf,w=Mi(x,["tfhd"]),C=rr(w[0]),L=C.trackId,B=Mi(x,["tfdt"]),U=B.length>0?Wi(B[0]).baseMediaDecodeTime:0,j=Mi(x,["trun"]);a===L&&j.length>0&&(s=dr(j,U,C),o=ur(_,s,L),u[L]||(u[L]={seiNals:[],logs:[]}),u[L].seiNals=u[L].seiNals.concat(o.seiNals),u[L].logs=u[L].logs.concat(o.logs))}),u},"parseCaptionNals"),pr=/* @__PURE__ */__name(function parseEmbeddedCaptions2(i,a,s){if(null===a)return null;var o=hr(i,a)[a]||{};return{seiNals:o.seiNals,logs:o.logs,timescale:s}},"parseEmbeddedCaptions"),mr=/* @__PURE__ */__name(function CaptionParser2(){var i,a,s,o,u,_,x=!1;this.isInitialized=function(){return x},this.init=function(a){i=new lr,x=!0,_=!!a&&a.isPartial,i.on("data",function(i){i.startTime=i.startPts/o,i.endTime=i.endPts/o,u.captions.push(i),u.captionStreams[i.stream]=!0}),i.on("log",function(i){u.logs.push(i)})},this.isNewInit=function(i,a){return!(i&&0===i.length||a&&"object"==typeof a&&0===Object.keys(a).length)&&(s!==i[0]||o!==a[s])},this.parse=function(i,_,x){var w;if(!this.isInitialized())return null;if(!_||!x)return null;if(this.isNewInit(_,x))s=_[0],o=x[s];else if(null===s||!o)return a.push(i),null;for(;a.length>0;){var C=a.shift();this.parse(C,_,x)}return(w=pr(i,s,o))&&w.logs&&(u.logs=u.logs.concat(w.logs)),null!==w&&w.seiNals?(this.pushNals(w.seiNals),this.flushStream(),u):u.logs.length?{logs:u.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(a){if(!this.isInitialized()||!a||0===a.length)return null;a.forEach(function(a){i.push(a)})},this.flushStream=function(){if(!this.isInitialized())return null;_?i.partialFlush():i.flush()},this.clearParsedCaptions=function(){u.captions=[],u.captionStreams={},u.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;i.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){a=[],s=null,o=null,u?this.clearParsedCaptions():u={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},"CaptionParser"),fr=Jn.toUnsigned,gr=Jn.toHexString,_r=tt.getUint64;Gn=/* @__PURE__ */__name(function timescale2(i){return Mi(i,["moov","trak"]).reduce(function(i,a){var s,o,u,_,x;return(s=Mi(a,["tkhd"])[0])?(o=s[0],_=fr(s[u=0===o?12:20]<<24|s[u+1]<<16|s[u+2]<<8|s[u+3]),(x=Mi(a,["mdia","mdhd"])[0])?(u=0===(o=x[0])?12:20,i[_]=fr(x[u]<<24|x[u+1]<<16|x[u+2]<<8|x[u+3]),i):null):null},{})},"timescale"),Wn=/* @__PURE__ */__name(function startTime2(i,a){var s=Mi(a,["moof","traf"]).reduce(function(a,s){var o,u,_=Mi(s,["tfhd"])[0],x=fr(_[4]<<24|_[5]<<16|_[6]<<8|_[7]),w=i[x]||9e4,C=Mi(s,["tfdt"])[0],L=new DataView(C.buffer,C.byteOffset,C.byteLength);return"bigint"==typeof(o=1===C[0]?_r(C.subarray(4,12)):L.getUint32(4))?u=o/sr.BigInt(w):"number"!=typeof o||isNaN(o)||(u=o/w),u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),u<a&&(a=u),a},1/0);return"bigint"==typeof s||isFinite(s)?s:0},"startTime"),qn=/* @__PURE__ */__name(function compositionStartTime2(i,a){var s,o=Mi(a,["moof","traf"]),u=0,_=0;if(o&&o.length){var x=Mi(o[0],["tfhd"])[0],w=Mi(o[0],["trun"])[0],C=Mi(o[0],["tfdt"])[0];if(x)s=rr(x).trackId;if(C)u=Wi(C).baseMediaDecodeTime;if(w){var L=nr(w);L.samples&&L.samples.length&&(_=L.samples[0].compositionTimeOffset||0)}}var B=i[s]||9e4;"bigint"==typeof u&&(_=sr.BigInt(_),B=sr.BigInt(B));var U=(u+_)/B;return"bigint"==typeof U&&U<Number.MAX_SAFE_INTEGER&&(U=Number(U)),U},"compositionStartTime"),Xn=/* @__PURE__ */__name(function getVideoTrackIds2(i){var a=Mi(i,["moov","trak"]),s=[];return a.forEach(function(i){var a=Mi(i,["mdia","hdlr"]),o=Mi(i,["tkhd"]);a.forEach(function(i,a){var u,_,x=_i(i.subarray(8,12)),w=o[a];"vide"===x&&(_=0===(u=new DataView(w.buffer,w.byteOffset,w.byteLength)).getUint8(0)?u.getUint32(12):u.getUint32(20),s.push(_))})}),s},"getVideoTrackIds"),Kn=/* @__PURE__ */__name(function getTimescaleFromMediaHeader2(i){var a=0===i[0]?12:20;return fr(i[a]<<24|i[a+1]<<16|i[a+2]<<8|i[a+3])},"getTimescaleFromMediaHeader"),Qn=/* @__PURE__ */__name(function getTracks2(i){var a=Mi(i,["moov","trak"]),s=[];return a.forEach(function(i){var a,o,u={},_=Mi(i,["tkhd"])[0];_&&(o=(a=new DataView(_.buffer,_.byteOffset,_.byteLength)).getUint8(0),u.id=0===o?a.getUint32(12):a.getUint32(20));var x=Mi(i,["mdia","hdlr"])[0];if(x){var w=_i(x.subarray(8,12));u.type="vide"===w?"video":"soun"===w?"audio":w}var C=Mi(i,["mdia","minf","stbl","stsd"])[0];if(C){var L=C.subarray(8);u.codec=_i(L.subarray(4,8));var B,U=Mi(L,[u.codec])[0];U&&(/^[asm]vc[1-9]$/i.test(u.codec)?(B=U.subarray(78),"avcC"===_i(B.subarray(4,8))&&B.length>11?(u.codec+=".",u.codec+=gr(B[9]),u.codec+=gr(B[10]),u.codec+=gr(B[11])):u.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(u.codec)?(B=U.subarray(28),"esds"===_i(B.subarray(4,8))&&B.length>20&&0!==B[19]?(u.codec+="."+gr(B[19]),u.codec+="."+gr(B[20]>>>2&63).replace(/^0/,"")):u.codec="mp4a.40.2"):u.codec=u.codec.toLowerCase())}var j=Mi(i,["mdia","mdhd"])[0];j&&(u.timescale=Kn(j)),s.push(u)}),s},"getTracks");var yr={findBox:Mi,parseType:_i,timescale:Gn,startTime:Wn,compositionStartTime:qn,videoTrackIds:Xn,tracks:Qn,getTimescaleFromMediaHeader:Kn},vr=/* @__PURE__ */__name(function parsePid2(i){var a=31&i[1];return a<<=8,a|=i[2]},"parsePid"),br=/* @__PURE__ */__name(function parsePayloadUnitStartIndicator2(i){return!!(64&i[1])},"parsePayloadUnitStartIndicator"),Tr=/* @__PURE__ */__name(function parseAdaptionField2(i){var a=0;return(48&i[3])>>>4>1&&(a+=i[4]+1),a},"parseAdaptionField"),Sr=/* @__PURE__ */__name(function parseType2(i,a){var s=vr(i);return 0===s?"pat":s===a?"pmt":a?"pes":null},"parseType"),xr=/* @__PURE__ */__name(function parsePat2(i){var a=br(i),s=4+Tr(i);return a&&(s+=i[s]+1),(31&i[s+10])<<8|i[s+11]},"parsePat"),wr=/* @__PURE__ */__name(function parsePmt2(i){var a={},s=br(i),o=4+Tr(i);if(s&&(o+=i[o]+1),1&i[o+5]){var u;u=3+((15&i[o+1])<<8|i[o+2])-4;for(var _=12+((15&i[o+10])<<8|i[o+11]);_<u;){var x=o+_;a[(31&i[x+1])<<8|i[x+2]]=i[x],_+=5+((15&i[x+3])<<8|i[x+4])}return a}},"parsePmt"),Ar=/* @__PURE__ */__name(function parsePesType2(i,a){switch(a[vr(i)]){case Gt.H264_STREAM_TYPE:return"video";case Gt.ADTS_STREAM_TYPE:return"audio";case Gt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},"parsePesType"),Cr=/* @__PURE__ */__name(function parsePesTime2(i){if(!br(i))return null;var a=4+Tr(i);if(a>=i.byteLength)return null;var s,o=null;return 192&(s=i[a+7])&&((o={}).pts=(14&i[a+9])<<27|(255&i[a+10])<<20|(254&i[a+11])<<12|(255&i[a+12])<<5|(254&i[a+13])>>>3,o.pts*=4,o.pts+=(6&i[a+13])>>>1,o.dts=o.pts,64&s&&(o.dts=(14&i[a+14])<<27|(255&i[a+15])<<20|(254&i[a+16])<<12|(255&i[a+17])<<5|(254&i[a+18])>>>3,o.dts*=4,o.dts+=(6&i[a+18])>>>1)),o},"parsePesTime"),Er=/* @__PURE__ */__name(function parseNalUnitType2(i){switch(i){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},"parseNalUnitType"),Mr={parseType:Sr,parsePat:xr,parsePmt:wr,parsePayloadUnitStartIndicator:br,parsePesType:Ar,parsePesTime:Cr,videoPacketContainsKeyFrame:/* @__PURE__ */__name(function videoPacketContainsKeyFrame2(i){for(var a=4+Tr(i),s=i.subarray(a),o=0,u=0,_=!1;u<s.byteLength-3;u++)if(1===s[u+2]){o=u+5;break}for(;o<s.byteLength;)switch(s[o]){case 0:if(0!==s[o-1]){o+=2;break}if(0!==s[o-2]){o++;break}u+3!==o-2&&"slice_layer_without_partitioning_rbsp_idr"===Er(31&s[u+3])&&(_=!0);do{o++}while(1!==s[o]&&o<s.length);u=o-2,o+=3;break;case 1:if(0!==s[o-1]||0!==s[o-2]){o+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Er(31&s[u+3])&&(_=!0),u=o-2,o+=3;break;default:o+=3}return s=s.subarray(u),o-=u,u=0,s&&s.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Er(31&s[u+3])&&(_=!0),_},"videoPacketContainsKeyFrame")},kr=Kt.handleRollover,Pr={};Pr.ts=Mr,Pr.aac=Pn;var Ir=wt.ONE_SECOND_IN_TS,Lr=188,Dr=71,Rr=/* @__PURE__ */__name(function parsePsi_2(i,a){for(var s,o=0,u=Lr;u<i.byteLength;)if(i[o]!==Dr||i[u]!==Dr)o++,u++;else{switch(s=i.subarray(o,u),Pr.ts.parseType(s,a.pid)){case"pat":a.pid=Pr.ts.parsePat(s);break;case"pmt":var _=Pr.ts.parsePmt(s);a.table=a.table||{},Object.keys(_).forEach(function(i){a.table[i]=_[i]})}o+=Lr,u+=Lr}},"parsePsi_"),Or=/* @__PURE__ */__name(function parseAudioPes_2(i,a,s){for(var o,u,_,x,w=0,C=Lr,L=!1;C<=i.byteLength;)if(i[w]!==Dr||i[C]!==Dr&&C!==i.byteLength)w++,C++;else{if(o=i.subarray(w,C),"pes"===Pr.ts.parseType(o,a.pid))u=Pr.ts.parsePesType(o,a.table),_=Pr.ts.parsePayloadUnitStartIndicator(o),"audio"===u&&_&&(x=Pr.ts.parsePesTime(o))&&(x.type="audio",s.audio.push(x),L=!0);if(L)break;w+=Lr,C+=Lr}for(w=(C=i.byteLength)-Lr,L=!1;w>=0;)if(i[w]!==Dr||i[C]!==Dr&&C!==i.byteLength)w--,C--;else{if(o=i.subarray(w,C),"pes"===Pr.ts.parseType(o,a.pid))u=Pr.ts.parsePesType(o,a.table),_=Pr.ts.parsePayloadUnitStartIndicator(o),"audio"===u&&_&&(x=Pr.ts.parsePesTime(o))&&(x.type="audio",s.audio.push(x),L=!0);if(L)break;w-=Lr,C-=Lr}},"parseAudioPes_"),Nr=/* @__PURE__ */__name(function parseVideoPes_2(i,a,s){for(var o,u,_,x,w,C,L,B=0,U=Lr,j=!1,V={data:[],size:0};U<i.byteLength;)if(i[B]!==Dr||i[U]!==Dr)B++,U++;else{if(o=i.subarray(B,U),"pes"===Pr.ts.parseType(o,a.pid))if(u=Pr.ts.parsePesType(o,a.table),_=Pr.ts.parsePayloadUnitStartIndicator(o),"video"===u&&(_&&!j&&(x=Pr.ts.parsePesTime(o))&&(x.type="video",s.video.push(x),j=!0),!s.firstKeyFrame)){if(_&&0!==V.size){for(w=new Uint8Array(V.size),C=0;V.data.length;)L=V.data.shift(),w.set(L,C),C+=L.byteLength;if(Pr.ts.videoPacketContainsKeyFrame(w)){var z=Pr.ts.parsePesTime(w);z?(s.firstKeyFrame=z,s.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}V.size=0}V.data.push(o),V.size+=o.byteLength}if(j&&s.firstKeyFrame)break;B+=Lr,U+=Lr}for(B=(U=i.byteLength)-Lr,j=!1;B>=0;)if(i[B]!==Dr||i[U]!==Dr)B--,U--;else{if(o=i.subarray(B,U),"pes"===Pr.ts.parseType(o,a.pid))u=Pr.ts.parsePesType(o,a.table),_=Pr.ts.parsePayloadUnitStartIndicator(o),"video"===u&&_&&(x=Pr.ts.parsePesTime(o))&&(x.type="video",s.video.push(x),j=!0);if(j)break;B-=Lr,U-=Lr}},"parseVideoPes_"),Br=/* @__PURE__ */__name(function adjustTimestamp_2(i,a){if(i.audio&&i.audio.length){var s=a;(void 0===s||isNaN(s))&&(s=i.audio[0].dts),i.audio.forEach(function(i){i.dts=kr(i.dts,s),i.pts=kr(i.pts,s),i.dtsTime=i.dts/Ir,i.ptsTime=i.pts/Ir})}if(i.video&&i.video.length){var o=a;if((void 0===o||isNaN(o))&&(o=i.video[0].dts),i.video.forEach(function(i){i.dts=kr(i.dts,o),i.pts=kr(i.pts,o),i.dtsTime=i.dts/Ir,i.ptsTime=i.pts/Ir}),i.firstKeyFrame){var u=i.firstKeyFrame;u.dts=kr(u.dts,o),u.pts=kr(u.pts,o),u.dtsTime=u.dts/Ir,u.ptsTime=u.pts/Ir}}},"adjustTimestamp_"),Fr=/* @__PURE__ */__name(function inspectAac_2(i){for(var a,s=!1,o=0,u=null,_=null,x=0,w=0;i.length-w>=3;){switch(Pr.aac.parseType(i,w)){case"timed-metadata":if(i.length-w<10){s=!0;break}if((x=Pr.aac.parseId3TagSize(i,w))>i.length){s=!0;break}null===_&&(a=i.subarray(w,w+x),_=Pr.aac.parseAacTimestamp(a)),w+=x;break;case"audio":if(i.length-w<7){s=!0;break}if((x=Pr.aac.parseAdtsSize(i,w))>i.length){s=!0;break}null===u&&(a=i.subarray(w,w+x),u=Pr.aac.parseSampleRate(a)),o++,w+=x;break;default:w++}if(s)return null}if(null===u||null===_)return null;var C=Ir/u;return{audio:[{type:"audio",dts:_,pts:_},{type:"audio",dts:_+1024*o*C,pts:_+1024*o*C}]}},"inspectAac_"),Ur=/* @__PURE__ */__name(function inspectTs_2(i){var a={pid:null,table:null},s={};for(var o in Rr(i,a),a.table){if(a.table.hasOwnProperty(o))switch(a.table[o]){case Gt.H264_STREAM_TYPE:s.video=[],Nr(i,a,s),0===s.video.length&&delete s.video;break;case Gt.ADTS_STREAM_TYPE:s.audio=[],Or(i,a,s),0===s.audio.length&&delete s.audio}}return s},"inspectTs_"),jr=/* @__PURE__ */__name(function inspect2(i,a){var s;return(s=Pr.aac.isLikelyAacData(i)?Fr(i):Ur(i))&&(s.audio||s.video)?(Br(s,a),s):null},"inspect"),Vr={inspect:jr,parseAudioPes_:Or},zr=/* @__PURE__ */__name(function wireTransmuxerEvents2(i,a){a.on("data",function(a){var s=a.initSegment;a.initSegment={data:s.buffer,byteOffset:s.byteOffset,byteLength:s.byteLength};var o=a.data;a.data=o.buffer,i.postMessage({action:"data",segment:a,byteOffset:o.byteOffset,byteLength:o.byteLength},[a.data])}),a.on("done",function(a){i.postMessage({action:"done"})}),a.on("gopInfo",function(a){i.postMessage({action:"gopInfo",gopInfo:a})}),a.on("videoSegmentTimingInfo",function(a){var s={start:{decode:wt.videoTsToSeconds(a.start.dts),presentation:wt.videoTsToSeconds(a.start.pts)},end:{decode:wt.videoTsToSeconds(a.end.dts),presentation:wt.videoTsToSeconds(a.end.pts)},baseMediaDecodeTime:wt.videoTsToSeconds(a.baseMediaDecodeTime)};a.prependedContentDuration&&(s.prependedContentDuration=wt.videoTsToSeconds(a.prependedContentDuration)),i.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:s})}),a.on("audioSegmentTimingInfo",function(a){var s={start:{decode:wt.videoTsToSeconds(a.start.dts),presentation:wt.videoTsToSeconds(a.start.pts)},end:{decode:wt.videoTsToSeconds(a.end.dts),presentation:wt.videoTsToSeconds(a.end.pts)},baseMediaDecodeTime:wt.videoTsToSeconds(a.baseMediaDecodeTime)};a.prependedContentDuration&&(s.prependedContentDuration=wt.videoTsToSeconds(a.prependedContentDuration)),i.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:s})}),a.on("id3Frame",function(a){i.postMessage({action:"id3Frame",id3Frame:a})}),a.on("caption",function(a){i.postMessage({action:"caption",caption:a})}),a.on("trackinfo",function(a){i.postMessage({action:"trackinfo",trackInfo:a})}),a.on("audioTimingInfo",function(a){i.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:wt.videoTsToSeconds(a.start),end:wt.videoTsToSeconds(a.end)}})}),a.on("videoTimingInfo",function(a){i.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:wt.videoTsToSeconds(a.start),end:wt.videoTsToSeconds(a.end)}})}),a.on("log",function(a){i.postMessage({action:"log",log:a})})},"wireTransmuxerEvents"),Hr=/* @__PURE__ */function(){function MessageHandlers2(i,a){this.options=a||{},this.self=i,this.init()}__name(MessageHandlers2,"MessageHandlers");var i=MessageHandlers2.prototype;return i.init=/* @__PURE__ */__name(function init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Yn.Transmuxer(this.options),zr(this.self,this.transmuxer)},"init"),i.pushMp4Captions=/* @__PURE__ */__name(function pushMp4Captions(i){this.captionParser||(this.captionParser=new mr,this.captionParser.init());var a=new Uint8Array(i.data,i.byteOffset,i.byteLength),s=this.captionParser.parse(a,i.trackIds,i.timescales);this.self.postMessage({action:"mp4Captions",captions:s&&s.captions||[],logs:s&&s.logs||[],data:a.buffer},[a.buffer])},"pushMp4Captions"),i.probeMp4StartTime=/* @__PURE__ */__name(function probeMp4StartTime(i){var a=i.timescales,s=i.data,o=yr.startTime(a,s);this.self.postMessage({action:"probeMp4StartTime",startTime:o,data:s},[s.buffer])},"probeMp4StartTime"),i.probeMp4Tracks=/* @__PURE__ */__name(function probeMp4Tracks(i){var a=i.data,s=yr.tracks(a);this.self.postMessage({action:"probeMp4Tracks",tracks:s,data:a},[a.buffer])},"probeMp4Tracks"),i.probeTs=/* @__PURE__ */__name(function probeTs(i){var a=i.data,s=i.baseStartTime,o="number"!=typeof s||isNaN(s)?void 0:s*wt.ONE_SECOND_IN_TS,u=Vr.inspect(a,o),_=null;u&&((_={hasVideo:u.video&&2===u.video.length||!1,hasAudio:u.audio&&2===u.audio.length||!1}).hasVideo&&(_.videoStart=u.video[0].ptsTime),_.hasAudio&&(_.audioStart=u.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:_,data:a},[a.buffer])},"probeTs"),i.clearAllMp4Captions=/* @__PURE__ */__name(function clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()},"clearAllMp4Captions"),i.clearParsedMp4Captions=/* @__PURE__ */__name(function clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()},"clearParsedMp4Captions"),i.push=/* @__PURE__ */__name(function push(i){var a=new Uint8Array(i.data,i.byteOffset,i.byteLength);this.transmuxer.push(a)},"push"),i.reset=/* @__PURE__ */__name(function reset2(){this.transmuxer.reset()},"reset"),i.setTimestampOffset=/* @__PURE__ */__name(function setTimestampOffset(i){var a=i.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(wt.secondsToVideoTs(a)))},"setTimestampOffset"),i.setAudioAppendStart=/* @__PURE__ */__name(function setAudioAppendStart(i){this.transmuxer.setAudioAppendStart(Math.ceil(wt.secondsToVideoTs(i.appendStart)))},"setAudioAppendStart"),i.setRemux=/* @__PURE__ */__name(function setRemux(i){this.transmuxer.setRemux(i.remux)},"setRemux"),i.flush=/* @__PURE__ */__name(function flush(i){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},"flush"),i.endTimeline=/* @__PURE__ */__name(function endTimeline2(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},"endTimeline"),i.alignGopsWith=/* @__PURE__ */__name(function alignGopsWith(i){this.transmuxer.alignGopsWith(i.gopsToAlignWith.slice())},"alignGopsWith"),MessageHandlers2}();self.onmessage=function(i){"init"===i.data.action&&i.data.options?this.messageHandlers=new Hr(self,i.data.options):(this.messageHandlers||(this.messageHandlers=new Hr(self)),i.data&&i.data.action&&"init"!==i.data.action&&this.messageHandlers[i.data.action]&&this.messageHandlers[i.data.action](i.data))}})),mD=uD(pD),fD=/* @__PURE__ */__name(function handleData_2(i,a,s){var o=i.data.segment,u=o.type,_=o.initSegment,x=o.captions,w=o.captionStreams,C=o.metadata,L=o.videoFrameDtsTime,B=o.videoFramePtsTime;a.buffer.push({captions:x,captionStreams:w,metadata:C});var U=i.data.segment.boxes||{data:i.data.segment.data},j={type:u,data:new Uint8Array(U.data,U.data.byteOffset,U.data.byteLength),initSegment:new Uint8Array(_.data,_.byteOffset,_.byteLength)};void 0!==L&&(j.videoFrameDtsTime=L),void 0!==B&&(j.videoFramePtsTime=B),s(j)},"handleData_"),gD=/* @__PURE__ */__name(function handleDone_2(i){var a=i.transmuxedData,s=i.callback;a.buffer=[],s(a)},"handleDone_"),_D=/* @__PURE__ */__name(function handleGopInfo_2(i,a){a.gopInfo=i.data.gopInfo},"handleGopInfo_"),yD=/* @__PURE__ */__name(function processTransmux2(i){var a=i.transmuxer,s=i.bytes,o=i.audioAppendStart,u=i.gopsToAlignWith,_=i.remux,x=i.onData,w=i.onTrackInfo,C=i.onAudioTimingInfo,L=i.onVideoTimingInfo,B=i.onVideoSegmentTimingInfo,U=i.onAudioSegmentTimingInfo,j=i.onId3,V=i.onCaptions,z=i.onDone,$=i.onEndedTimeline,Y=i.onTransmuxerLog,Z=i.isEndOfTimeline,ee={buffer:[]},ie=Z,ae=/* @__PURE__ */__name(function handleMessage2(s){a.currentTransmux===i&&("data"===s.data.action&&fD(s,ee,x),"trackinfo"===s.data.action&&w(s.data.trackInfo),"gopInfo"===s.data.action&&_D(s,ee),"audioTimingInfo"===s.data.action&&C(s.data.audioTimingInfo),"videoTimingInfo"===s.data.action&&L(s.data.videoTimingInfo),"videoSegmentTimingInfo"===s.data.action&&B(s.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===s.data.action&&U(s.data.audioSegmentTimingInfo),"id3Frame"===s.data.action&&j([s.data.id3Frame],s.data.id3Frame.dispatchType),"caption"===s.data.action&&V(s.data.caption),"endedtimeline"===s.data.action&&(ie=!1,$()),"log"===s.data.action&&Y(s.data.log),"transmuxed"===s.data.type&&(ie||(a.onmessage=null,gD({transmuxedData:ee,callback:z}),vD(a))))},"handleMessage");if(a.onmessage=ae,o&&a.postMessage({action:"setAudioAppendStart",appendStart:o}),Array.isArray(u)&&a.postMessage({action:"alignGopsWith",gopsToAlignWith:u}),void 0!==_&&a.postMessage({action:"setRemux",remux:_}),s.byteLength){var le=s instanceof ArrayBuffer?s:s.buffer,ce=s instanceof ArrayBuffer?0:s.byteOffset;a.postMessage({action:"push",data:le,byteOffset:ce,byteLength:s.byteLength},[le])}Z&&a.postMessage({action:"endTimeline"}),a.postMessage({action:"flush"})},"processTransmux"),vD=/* @__PURE__ */__name(function dequeue2(i){i.currentTransmux=null,i.transmuxQueue.length&&(i.currentTransmux=i.transmuxQueue.shift(),"function"==typeof i.currentTransmux?i.currentTransmux():yD(i.currentTransmux))},"dequeue"),bD=/* @__PURE__ */__name(function processAction2(i,a){i.postMessage({action:a}),vD(i)},"processAction"),TD=/* @__PURE__ */__name(function enqueueAction2(i,a){if(!a.currentTransmux)return a.currentTransmux=i,void bD(a,i);a.transmuxQueue.push(bD.bind(null,a,i))},"enqueueAction"),SD=/* @__PURE__ */__name(function reset2(i){TD("reset",i)},"reset"),xD=/* @__PURE__ */__name(function endTimeline2(i){TD("endTimeline",i)},"endTimeline"),wD=/* @__PURE__ */__name(function transmux2(i){if(!i.transmuxer.currentTransmux)return i.transmuxer.currentTransmux=i,void yD(i);i.transmuxer.transmuxQueue.push(i)},"transmux"),AD={reset:SD,endTimeline:xD,transmux:wD,createTransmuxer:/* @__PURE__ */__name(function createTransmuxer2(i){var a=new mD;a.currentTransmux=null,a.transmuxQueue=[];var s=a.terminate;return a.terminate=function(){return a.currentTransmux=null,a.transmuxQueue.length=0,s.call(a)},a.postMessage({action:"init",options:i}),a},"createTransmuxer")},CD=/* @__PURE__ */__name(function workerCallback2(i){var a=i.transmuxer,s=i.endAction||i.action,o=i.callback,u=_extends({},i,{endAction:null,transmuxer:null,callback:null}),_=/* @__PURE__ */__name(function listenForEndEvent2(u){u.data.action===s&&(a.removeEventListener("message",listenForEndEvent2),u.data.data&&(u.data.data=new Uint8Array(u.data.data,i.byteOffset||0,i.byteLength||u.data.data.byteLength),i.data&&(i.data=u.data.data)),o(u.data))},"listenForEndEvent");if(a.addEventListener("message",_),i.data){var x=i.data instanceof ArrayBuffer;u.byteOffset=x?0:i.data.byteOffset,u.byteLength=i.data.byteLength;var w=[x?i.data:i.data.buffer];a.postMessage(u,w)}else a.postMessage(u)},"workerCallback"),ED=2,MD=-101,kD=-102,PD=/* @__PURE__ */__name(function abortAll2(i){i.forEach(function(i){i.abort()})},"abortAll"),ID=/* @__PURE__ */__name(function getRequestStats2(i){return{bandwidth:i.bandwidth,bytesReceived:i.bytesReceived||0,roundTripTime:i.roundTripTime||0}},"getRequestStats"),LD=/* @__PURE__ */__name(function getProgressStats2(i){var a=i.target,s={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-a.requestTime||0};return s.bytesReceived=i.loaded,s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3),s},"getProgressStats"),DD=/* @__PURE__ */__name(function handleErrors2(i,a){return a.timedout?{status:a.status,message:"HLS request timed-out at URL: "+a.uri,code:MD,xhr:a}:a.aborted?{status:a.status,message:"HLS request aborted at URL: "+a.uri,code:kD,xhr:a}:i?{status:a.status,message:"HLS request errored at URL: "+a.uri,code:ED,xhr:a}:"arraybuffer"===a.responseType&&0===a.response.byteLength?{status:a.status,message:"Empty HLS response at URL: "+a.uri,code:ED,xhr:a}:null},"handleErrors"),RD=/* @__PURE__ */__name(function handleKeyResponse2(i,a,s){return function(o,u){var _=u.response,x=DD(o,u);if(x)return s(x,i);if(16!==_.byteLength)return s({status:u.status,message:"Invalid HLS key at URL: "+u.uri,code:ED,xhr:u},i);for(var w=new DataView(_),C=new Uint32Array([w.getUint32(0),w.getUint32(4),w.getUint32(8),w.getUint32(12)]),L=0;L<a.length;L++)a[L].bytes=C;return s(null,i)}},"handleKeyResponse"),OD=/* @__PURE__ */__name(function parseInitSegment2(i,a){var s=oC(i.map.bytes);if("mp4"!==s){var o=i.map.resolvedUri||i.map.uri;return a({internal:!0,message:"Found unsupported "+(s||"unknown")+" container for initialization segment at URL: "+o,code:ED})}CD({action:"probeMp4Tracks",data:i.map.bytes,transmuxer:i.transmuxer,callback:/* @__PURE__ */__name(function callback(s){var o=s.tracks,u=s.data;return i.map.bytes=u,o.forEach(function(a){i.map.tracks=i.map.tracks||{},i.map.tracks[a.type]||(i.map.tracks[a.type]=a,"number"==typeof a.id&&a.timescale&&(i.map.timescales=i.map.timescales||{},i.map.timescales[a.id]=a.timescale))}),a(null)},"callback")})},"parseInitSegment"),ND=/* @__PURE__ */__name(function handleInitSegmentResponse2(i){var a=i.segment,s=i.finishProcessingFn;return function(i,o){var u=DD(i,o);if(u)return s(u,a);var _=new Uint8Array(o.response);if(a.map.key)return a.map.encryptedBytes=_,s(null,a);a.map.bytes=_,OD(a,function(i){if(i)return i.xhr=o,i.status=o.status,s(i,a);s(null,a)})}},"handleInitSegmentResponse"),BD=/* @__PURE__ */__name(function handleSegmentResponse2(i){var a=i.segment,s=i.finishProcessingFn,o=i.responseType;return function(i,u){var _=DD(i,u);if(_)return s(_,a);var x="arraybuffer"!==o&&u.responseText?oD(u.responseText.substring(a.lastReachedChar||0)):u.response;return a.stats=ID(u),a.key?a.encryptedBytes=new Uint8Array(x):a.bytes=new Uint8Array(x),s(null,a)}},"handleSegmentResponse"),FD=/* @__PURE__ */__name(function transmuxAndNotify2(i){var a=i.segment,s=i.bytes,o=i.trackInfoFn,u=i.timingInfoFn,_=i.videoSegmentTimingInfoFn,x=i.audioSegmentTimingInfoFn,w=i.id3Fn,C=i.captionsFn,L=i.isEndOfTimeline,B=i.endedTimelineFn,U=i.dataFn,j=i.doneFn,V=i.onTransmuxerLog,z=a.map&&a.map.tracks||{},$=Boolean(z.audio&&z.video),Y=u.bind(null,a,"audio","start"),Z=u.bind(null,a,"audio","end"),ee=u.bind(null,a,"video","start"),ie=u.bind(null,a,"video","end"),ae=/* @__PURE__ */__name(function finish2(){return wD({bytes:s,transmuxer:a.transmuxer,audioAppendStart:a.audioAppendStart,gopsToAlignWith:a.gopsToAlignWith,remux:$,onData:/* @__PURE__ */__name(function onData(i){i.type="combined"===i.type?"video":i.type,U(a,i)},"onData"),onTrackInfo:/* @__PURE__ */__name(function onTrackInfo(i){o&&($&&(i.isMuxed=!0),o(a,i))},"onTrackInfo"),onAudioTimingInfo:/* @__PURE__ */__name(function onAudioTimingInfo(i){Y&&void 0!==i.start&&(Y(i.start),Y=null),Z&&void 0!==i.end&&Z(i.end)},"onAudioTimingInfo"),onVideoTimingInfo:/* @__PURE__ */__name(function onVideoTimingInfo(i){ee&&void 0!==i.start&&(ee(i.start),ee=null),ie&&void 0!==i.end&&ie(i.end)},"onVideoTimingInfo"),onVideoSegmentTimingInfo:/* @__PURE__ */__name(function onVideoSegmentTimingInfo(i){_(i)},"onVideoSegmentTimingInfo"),onAudioSegmentTimingInfo:/* @__PURE__ */__name(function onAudioSegmentTimingInfo(i){x(i)},"onAudioSegmentTimingInfo"),onId3:/* @__PURE__ */__name(function onId3(i,s){w(a,i,s)},"onId3"),onCaptions:/* @__PURE__ */__name(function onCaptions(i){C(a,[i])},"onCaptions"),isEndOfTimeline:L,onEndedTimeline:/* @__PURE__ */__name(function onEndedTimeline(){B()},"onEndedTimeline"),onTransmuxerLog:V,onDone:/* @__PURE__ */__name(function onDone(i){j&&(i.type="combined"===i.type?"video":i.type,j(null,a,i))},"onDone")})},"finish");CD({action:"probeTs",transmuxer:a.transmuxer,data:s,baseStartTime:a.baseStartTime,callback:/* @__PURE__ */__name(function callback(i){a.bytes=s=i.data;var u=i.result;u&&(o(a,{hasAudio:u.hasAudio,hasVideo:u.hasVideo,isMuxed:$}),o=null,u.hasAudio&&!$&&Y(u.audioStart),u.hasVideo&&ee(u.videoStart),Y=null,ee=null),ae()},"callback")})},"transmuxAndNotify"),UD=/* @__PURE__ */__name(function handleSegmentBytes2(i){var a=i.segment,s=i.bytes,o=i.trackInfoFn,u=i.timingInfoFn,_=i.videoSegmentTimingInfoFn,x=i.audioSegmentTimingInfoFn,w=i.id3Fn,C=i.captionsFn,L=i.isEndOfTimeline,B=i.endedTimelineFn,U=i.dataFn,j=i.doneFn,V=i.onTransmuxerLog,z=new Uint8Array(s);if(lC(z)){a.isFmp4=!0;var $=a.map.tracks,Y={isFmp4:!0,hasVideo:!!$.video,hasAudio:!!$.audio};$.audio&&$.audio.codec&&"enca"!==$.audio.codec&&(Y.audioCodec=$.audio.codec),$.video&&$.video.codec&&"encv"!==$.video.codec&&(Y.videoCodec=$.video.codec),$.video&&$.audio&&(Y.isMuxed=!0),o(a,Y);var Z=/* @__PURE__ */__name(function finishLoading2(i){U(a,{data:z,type:Y.hasAudio&&!Y.isMuxed?"audio":"video"}),i&&i.length&&C(a,i),j(null,a,{})},"finishLoading");CD({action:"probeMp4StartTime",timescales:a.map.timescales,data:z,transmuxer:a.transmuxer,callback:/* @__PURE__ */__name(function callback(i){var o=i.data,_=i.startTime;s=o.buffer,a.bytes=z=o,Y.hasAudio&&!Y.isMuxed&&u(a,"audio","start",_),Y.hasVideo&&u(a,"video","start",_),$.video&&o.byteLength&&a.transmuxer?CD({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:a.transmuxer,data:z,timescales:a.map.timescales,trackIds:[$.video.id],callback:/* @__PURE__ */__name(function callback2(i){s=i.data.buffer,a.bytes=z=i.data,i.logs.forEach(function(i){V(videojs.mergeOptions(i,{stream:"mp4CaptionParser"}))}),Z(i.captions)},"callback")}):Z()},"callback")})}else if(a.transmuxer){if(void 0===a.container&&(a.container=oC(z)),"ts"!==a.container&&"aac"!==a.container)return o(a,{hasAudio:!1,hasVideo:!1}),void j(null,a,{});FD({segment:a,bytes:s,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:_,audioSegmentTimingInfoFn:x,id3Fn:w,captionsFn:C,isEndOfTimeline:L,endedTimelineFn:B,dataFn:U,doneFn:j,onTransmuxerLog:V})}else j(null,a,{})},"handleSegmentBytes"),jD=/* @__PURE__ */__name(function decrypt2(i,a){var s,o=i.id,u=i.key,_=i.encryptedBytes,x=i.decryptionWorker,w=/* @__PURE__ */__name(function decryptionHandler2(i){if(i.data.source===o){x.removeEventListener("message",decryptionHandler2);var s=i.data.decrypted;a(new Uint8Array(s.bytes,s.byteOffset,s.byteLength))}},"decryptionHandler");x.addEventListener("message",w),s=u.bytes.slice?u.bytes.slice():new Uint32Array(Array.prototype.slice.call(u.bytes)),x.postMessage(DL({source:o,encrypted:_,key:s,iv:u.iv}),[_.buffer,s.buffer])},"decrypt"),VD=/* @__PURE__ */__name(function decryptSegment2(i){var a=i.decryptionWorker,s=i.segment,o=i.trackInfoFn,u=i.timingInfoFn,_=i.videoSegmentTimingInfoFn,x=i.audioSegmentTimingInfoFn,w=i.id3Fn,C=i.captionsFn,L=i.isEndOfTimeline,B=i.endedTimelineFn,U=i.dataFn,j=i.doneFn,V=i.onTransmuxerLog;jD({id:s.requestId,key:s.key,encryptedBytes:s.encryptedBytes,decryptionWorker:a},function(i){s.bytes=i,UD({segment:s,bytes:s.bytes,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:_,audioSegmentTimingInfoFn:x,id3Fn:w,captionsFn:C,isEndOfTimeline:L,endedTimelineFn:B,dataFn:U,doneFn:j,onTransmuxerLog:V})})},"decryptSegment"),zD=/* @__PURE__ */__name(function waitForCompletion2(i){var a=i.activeXhrs,s=i.decryptionWorker,o=i.trackInfoFn,u=i.timingInfoFn,_=i.videoSegmentTimingInfoFn,x=i.audioSegmentTimingInfoFn,w=i.id3Fn,C=i.captionsFn,L=i.isEndOfTimeline,B=i.endedTimelineFn,U=i.dataFn,j=i.doneFn,V=i.onTransmuxerLog,z=0,$=!1;return function(i,Y){if(!$){if(i)return $=!0,PD(a),j(i,Y);if((z+=1)===a.length){var Z=/* @__PURE__ */__name(function segmentFinish2(){if(Y.encryptedBytes)return VD({decryptionWorker:s,segment:Y,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:_,audioSegmentTimingInfoFn:x,id3Fn:w,captionsFn:C,isEndOfTimeline:L,endedTimelineFn:B,dataFn:U,doneFn:j,onTransmuxerLog:V});UD({segment:Y,bytes:Y.bytes,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:_,audioSegmentTimingInfoFn:x,id3Fn:w,captionsFn:C,isEndOfTimeline:L,endedTimelineFn:B,dataFn:U,doneFn:j,onTransmuxerLog:V})},"segmentFinish");if(Y.endOfAllRequests=Date.now(),Y.map&&Y.map.encryptedBytes&&!Y.map.bytes)return jD({decryptionWorker:s,id:Y.requestId+"-init",encryptedBytes:Y.map.encryptedBytes,key:Y.map.key},function(i){Y.map.bytes=i,OD(Y,function(i){if(i)return PD(a),j(i,Y);Z()})});Z()}}}},"waitForCompletion"),HD=/* @__PURE__ */__name(function handleLoadEnd2(i){var a=i.loadendState,s=i.abortFn;return function(i){i.target.aborted&&s&&!a.calledAbortFn&&(s(),a.calledAbortFn=!0)}},"handleLoadEnd"),$D=/* @__PURE__ */__name(function handleProgress2(i){var a=i.segment,s=i.progressFn;return function(i){if(!i.target.aborted)return a.stats=videojs.mergeOptions(a.stats,LD(i)),!a.stats.firstBytesReceivedAt&&a.stats.bytesReceived&&(a.stats.firstBytesReceivedAt=Date.now()),s(i,a)}},"handleProgress"),GD=/* @__PURE__ */__name(function mediaSegmentRequest2(i){var a=i.xhr,s=i.xhrOptions,o=i.decryptionWorker,u=i.segment,_=i.abortFn,x=i.progressFn,w=i.trackInfoFn,C=i.timingInfoFn,L=i.videoSegmentTimingInfoFn,B=i.audioSegmentTimingInfoFn,U=i.id3Fn,j=i.captionsFn,V=i.isEndOfTimeline,z=i.endedTimelineFn,$=i.dataFn,Y=i.doneFn,Z=i.onTransmuxerLog,ee=[],ie=zD({activeXhrs:ee,decryptionWorker:o,trackInfoFn:w,timingInfoFn:C,videoSegmentTimingInfoFn:L,audioSegmentTimingInfoFn:B,id3Fn:U,captionsFn:j,isEndOfTimeline:V,endedTimelineFn:z,dataFn:$,doneFn:Y,onTransmuxerLog:Z});if(u.key&&!u.key.bytes){var ae=[u.key];u.map&&!u.map.bytes&&u.map.key&&u.map.key.resolvedUri===u.key.resolvedUri&&ae.push(u.map.key);var le=a(videojs.mergeOptions(s,{uri:u.key.resolvedUri,responseType:"arraybuffer"}),RD(u,ae,ie));ee.push(le)}if(u.map&&!u.map.bytes){if(u.map.key&&(!u.key||u.key.resolvedUri!==u.map.key.resolvedUri)){var ce=a(videojs.mergeOptions(s,{uri:u.map.key.resolvedUri,responseType:"arraybuffer"}),RD(u,[u.map.key],ie));ee.push(ce)}var de=a(videojs.mergeOptions(s,{uri:u.map.resolvedUri,responseType:"arraybuffer",headers:kL(u.map)}),ND({segment:u,finishProcessingFn:ie}));ee.push(de)}var pe=videojs.mergeOptions(s,{uri:u.part&&u.part.resolvedUri||u.resolvedUri,responseType:"arraybuffer",headers:kL(u)}),fe=a(pe,BD({segment:u,finishProcessingFn:ie,responseType:pe.responseType}));fe.addEventListener("progress",$D({segment:u,progressFn:x})),ee.push(fe);var _e={};return ee.forEach(function(i){i.addEventListener("loadend",HD({loadendState:_e,abortFn:_}))}),function(){return PD(ee)}},"mediaSegmentRequest"),WD=_I("CodecUtils"),qD=/* @__PURE__ */__name(function getCodecs2(i){var a=i.attributes||{};if(a.CODECS)return Rx(a.CODECS)},"getCodecs"),XD=/* @__PURE__ */__name(function isMaat2(i,a){var s=a.attributes||{};return i&&i.mediaGroups&&i.mediaGroups.AUDIO&&s.AUDIO&&i.mediaGroups.AUDIO[s.AUDIO]},"isMaat"),QD=/* @__PURE__ */__name(function isMuxed2(i,a){if(!XD(i,a))return!0;var s=a.attributes||{},o=i.mediaGroups.AUDIO[s.AUDIO];for(var u in o)if(!o[u].uri&&!o[u].playlists)return!0;return!1},"isMuxed"),KD=/* @__PURE__ */__name(function unwrapCodecList2(i){var a={};return i.forEach(function(i){var s=i.mediaType,o=i.type,u=i.details;a[s]=a[s]||[],a[s].push(Dx(""+o+u))}),Object.keys(a).forEach(function(i){if(a[i].length>1)return WD("multiple "+i+" codecs found as attributes: "+a[i].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(a[i]=null);a[i]=a[i][0]}),a},"unwrapCodecList"),YD=/* @__PURE__ */__name(function codecCount2(i){var a=0;return i.audio&&a++,i.video&&a++,a},"codecCount"),JD=/* @__PURE__ */__name(function codecsForPlaylist2(i,a){var s=a.attributes||{},o=KD(qD(a)||[]);if(XD(i,a)&&!o.audio&&!QD(i,a)){var u=KD(Ox(i,s.AUDIO)||[]);u.audio&&(o.audio=u.audio)}return o},"codecsForPlaylist"),ZD=_I("PlaylistSelector"),eR=/* @__PURE__ */__name(function representationToString2(i){if(i&&i.playlist){var a=i.playlist;return JSON.stringify({id:a.id,bandwidth:i.bandwidth,width:i.width,height:i.height,codecs:a.attributes&&a.attributes.CODECS||""})}},"representationToString"),tR=/* @__PURE__ */__name(function safeGetComputedStyle2(i,a){if(!i)return"";var s=Tn.getComputedStyle(i);return s?s[a]:""},"safeGetComputedStyle"),nR=/* @__PURE__ */__name(function stableSort2(i,a){var s=i.slice();i.sort(function(i,o){var u=a(i,o);return 0===u?s.indexOf(i)-s.indexOf(o):u})},"stableSort"),iR=/* @__PURE__ */__name(function comparePlaylistBandwidth2(i,a){var s,o;return i.attributes.BANDWIDTH&&(s=i.attributes.BANDWIDTH),s=s||Tn.Number.MAX_VALUE,a.attributes.BANDWIDTH&&(o=a.attributes.BANDWIDTH),s-(o=o||Tn.Number.MAX_VALUE)},"comparePlaylistBandwidth"),rR=/* @__PURE__ */__name(function comparePlaylistResolution2(i,a){var s,o;return i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(s=i.attributes.RESOLUTION.width),s=s||Tn.Number.MAX_VALUE,a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(o=a.attributes.RESOLUTION.width),s===(o=o||Tn.Number.MAX_VALUE)&&i.attributes.BANDWIDTH&&a.attributes.BANDWIDTH?i.attributes.BANDWIDTH-a.attributes.BANDWIDTH:s-o},"comparePlaylistResolution"),aR=/* @__PURE__ */__name(function simpleSelector2(i,a,s,o,u,_){if(i){var x={bandwidth:a,width:s,height:o,limitRenditionByPlayerDimensions:u},w=i.playlists;nL.isAudioOnly(i)&&(w=_.getAudioTrackPlaylists_(),x.audioOnly=!0);var C=w.map(function(i){var a=i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width,s=i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height;return{bandwidth:i.attributes&&i.attributes.BANDWIDTH||Tn.Number.MAX_VALUE,width:a,height:s,playlist:i}});nR(C,function(i,a){return i.bandwidth-a.bandwidth});var L=(C=C.filter(function(i){return!nL.isIncompatible(i.playlist)})).filter(function(i){return nL.isEnabled(i.playlist)});L.length||(L=C.filter(function(i){return!nL.isDisabled(i.playlist)}));var B=L.filter(function(i){return i.bandwidth*sD.BANDWIDTH_VARIANCE<a}),U=B[B.length-1],j=B.filter(function(i){return i.bandwidth===U.bandwidth})[0];if(!1===u){var V=j||L[0]||C[0];if(V&&V.playlist){var z="sortedPlaylistReps";return j&&(z="bandwidthBestRep"),L[0]&&(z="enabledPlaylistReps"),ZD("choosing "+eR(V)+" using "+z+" with options",x),V.playlist}return ZD("could not choose a playlist with options",x),null}var $=B.filter(function(i){return i.width&&i.height});nR($,function(i,a){return i.width-a.width});var Y=$.filter(function(i){return i.width===s&&i.height===o});U=Y[Y.length-1];var Z,ee,ie,ae,le=Y.filter(function(i){return i.bandwidth===U.bandwidth})[0];if(le||(ee=(Z=$.filter(function(i){return i.width>s||i.height>o})).filter(function(i){return i.width===Z[0].width&&i.height===Z[0].height}),U=ee[ee.length-1],ie=ee.filter(function(i){return i.bandwidth===U.bandwidth})[0]),_.experimentalLeastPixelDiffSelector){var ce=$.map(function(i){return i.pixelDiff=Math.abs(i.width-s)+Math.abs(i.height-o),i});nR(ce,function(i,a){return i.pixelDiff===a.pixelDiff?a.bandwidth-i.bandwidth:i.pixelDiff-a.pixelDiff}),ae=ce[0]}var de=ae||ie||le||j||L[0]||C[0];if(de&&de.playlist){var pe="sortedPlaylistReps";return ae?pe="leastPixelDiffRep":ie?pe="resolutionPlusOneRep":le?pe="resolutionBestRep":j?pe="bandwidthBestRep":L[0]&&(pe="enabledPlaylistReps"),ZD("choosing "+eR(de)+" using "+pe+" with options",x),de.playlist}return ZD("could not choose a playlist with options",x),null}},"simpleSelector"),sR=/* @__PURE__ */__name(function lastBandwidthSelector2(){var i=this.useDevicePixelRatio&&Tn.devicePixelRatio||1;return aR(this.playlists.master,this.systemBandwidth,parseInt(tR(this.tech_.el(),"width"),10)*i,parseInt(tR(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},"lastBandwidthSelector"),oR=/* @__PURE__ */__name(function movingAverageBandwidthSelector2(i){var a=-1,s=-1;if(i<0||i>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var o=this.useDevicePixelRatio&&Tn.devicePixelRatio||1;return a<0&&(a=this.systemBandwidth,s=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==s&&(a=i*this.systemBandwidth+(1-i)*a,s=this.systemBandwidth),aR(this.playlists.master,a,parseInt(tR(this.tech_.el(),"width"),10)*o,parseInt(tR(this.tech_.el(),"height"),10)*o,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},"movingAverageBandwidthSelector"),lR=/* @__PURE__ */__name(function minRebufferMaxBandwidthSelector2(i){var a=i.master,s=i.currentTime,o=i.bandwidth,u=i.duration,_=i.segmentDuration,x=i.timeUntilRebuffer,w=i.currentTimeline,C=i.syncController,L=a.playlists.filter(function(i){return!nL.isIncompatible(i)}),B=L.filter(nL.isEnabled);B.length||(B=L.filter(function(i){return!nL.isDisabled(i)}));var U=B.filter(nL.hasAttribute.bind(null,"BANDWIDTH")).map(function(i){var a=C.getSyncPoint(i,u,w,s)?1:2;return{playlist:i,rebufferingImpact:nL.estimateSegmentRequestTime(_,o,i)*a-x}}),j=U.filter(function(i){return i.rebufferingImpact<=0});return nR(j,function(i,a){return iR(a.playlist,i.playlist)}),j.length?j[0]:(nR(U,function(i,a){return i.rebufferingImpact-a.rebufferingImpact}),U[0]||null)},"minRebufferMaxBandwidthSelector"),cR=/* @__PURE__ */__name(function lowestBitrateCompatibleVariantSelector2(){var i=this,a=this.playlists.master.playlists.filter(nL.isEnabled);return nR(a,function(i,a){return iR(i,a)}),a.filter(function(a){return!!JD(i.playlists.master,a).video})[0]||null},"lowestBitrateCompatibleVariantSelector"),uR=/* @__PURE__ */__name(function concatSegments2(i){var a,s=0;return i.bytes&&(a=new Uint8Array(i.bytes),i.segments.forEach(function(i){a.set(i,s),s+=i.byteLength})),a},"concatSegments"),dR=/* @__PURE__ */__name(function createCaptionsTrackIfNotExists2(i,a,s){if(!i[s]){a.trigger({type:"usage",name:"vhs-608"}),a.trigger({type:"usage",name:"hls-608"});var o=s;/^cc708_/.test(s)&&(o="SERVICE"+s.split("_")[1]);var u=a.textTracks().getTrackById(o);if(u)i[s]=u;else{var _=s,x=s,w=!1,C=(a.options_.vhs&&a.options_.vhs.captionServices||{})[o];C&&(_=C.label,x=C.language,w=C.default),i[s]=a.addRemoteTextTrack({kind:"captions",id:o,default:w,label:_,language:x},!1).track}}},"createCaptionsTrackIfNotExists"),hR=/* @__PURE__ */__name(function addCaptionData2(i){var a=i.inbandTextTracks,s=i.captionArray,o=i.timestampOffset;if(s){var u=Tn.WebKitDataCue||Tn.VTTCue;s.forEach(function(i){var s=i.stream;a[s].addCue(new u(i.startTime+o,i.endTime+o,i.text))})}},"addCaptionData"),pR=/* @__PURE__ */__name(function deprecateOldCue2(i){Object.defineProperties(i.frame,{id:{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),i.value.key},"get")},value:{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),i.value.data},"get")},privateData:{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),i.value.data},"get")}})},"deprecateOldCue"),mR=/* @__PURE__ */__name(function addMetadata2(i){var a=i.inbandTextTracks,s=i.metadataArray,o=i.timestampOffset,u=i.videoDuration;if(s){var _=Tn.WebKitDataCue||Tn.VTTCue,x=a.metadataTrack_;if(x&&(s.forEach(function(i){var a=i.cueTime+o;!("number"!=typeof a||Tn.isNaN(a)||a<0)&&a<1/0&&i.frames.forEach(function(i){var s=new _(a,a,i.value||i.url||i.data||"");s.frame=i,s.value=i,pR(s),x.addCue(s)})}),x.cues&&x.cues.length)){for(var w=x.cues,C=[],L=0;L<w.length;L++)w[L]&&C.push(w[L]);var B=C.reduce(function(i,a){var s=i[a.startTime]||[];return s.push(a),i[a.startTime]=s,i},{}),U=Object.keys(B).sort(function(i,a){return Number(i)-Number(a)});U.forEach(function(i,a){var s=B[i],o=Number(U[a+1])||u;s.forEach(function(i){i.endTime=o})})}}},"addMetadata"),fR=/* @__PURE__ */__name(function createMetadataTrackIfNotExists2(i,a,s){i.metadataTrack_||(i.metadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,i.metadataTrack_.inBandMetadataTrackDispatchType=a)},"createMetadataTrackIfNotExists"),gR=/* @__PURE__ */__name(function removeCuesFromTrack2(i,a,s){var o,u;if(s&&s.cues)for(o=s.cues.length;o--;)(u=s.cues[o]).startTime>=i&&u.endTime<=a&&s.removeCue(u)},"removeCuesFromTrack"),_R=/* @__PURE__ */__name(function removeDuplicateCuesFromTrack2(i){var a=i.cues;if(a)for(var s=0;s<a.length;s++){for(var o=[],u=0,_=0;_<a.length;_++)a[s].startTime===a[_].startTime&&a[s].endTime===a[_].endTime&&a[s].text===a[_].text&&++u>1&&o.push(a[_]);o.length&&o.forEach(function(a){return i.removeCue(a)})}},"removeDuplicateCuesFromTrack"),yR=/* @__PURE__ */__name(function gopsSafeToAlignWith2(i,a,s){if(null==a||!i.length)return[];var o,u=Math.ceil((a-s+3)*cC.ONE_SECOND_IN_TS);for(o=0;o<i.length&&!(i[o].pts>u);o++);return i.slice(o)},"gopsSafeToAlignWith"),vR=/* @__PURE__ */__name(function updateGopBuffer2(i,a,s){if(!a.length)return i;if(s)return a.slice();for(var o=a[0].pts,u=0;u<i.length&&!(i[u].pts>=o);u++);return i.slice(0,u).concat(a)},"updateGopBuffer"),bR=/* @__PURE__ */__name(function removeGopBuffer2(i,a,s,o){for(var u=Math.ceil((a-o)*cC.ONE_SECOND_IN_TS),_=Math.ceil((s-o)*cC.ONE_SECOND_IN_TS),x=i.slice(),w=i.length;w--&&!(i[w].pts<=_););if(-1===w)return x;for(var C=w+1;C--&&!(i[C].pts<=u););return C=Math.max(C,0),x.splice(C,w-C+1),x},"removeGopBuffer"),TR=/* @__PURE__ */__name(function shallowEqual2(i,a){if(!i&&!a||!i&&a||i&&!a)return!1;if(i===a)return!0;var s=Object.keys(i).sort(),o=Object.keys(a).sort();if(s.length!==o.length)return!1;for(var u=0;u<s.length;u++){var _=s[u];if(_!==o[u])return!1;if(i[_]!==a[_])return!1}return!0},"shallowEqual"),SR=/* @__PURE__ */__name(function getSyncSegmentCandidate2(i,a,s){a=a||[];for(var o=[],u=0,_=0;_<a.length;_++){var x=a[_];if(i===x.timeline&&(o.push(_),(u+=x.duration)>s))return _}return 0===o.length?0:o[o.length-1]},"getSyncSegmentCandidate"),xR=/* @__PURE__ */__name(function finite2(i){return"number"==typeof i&&isFinite(i)},"finite"),wR=1/60,AR=/* @__PURE__ */__name(function illegalMediaSwitch2(i,a,s){return"main"===i&&a&&s?s.hasAudio||s.hasVideo?a.hasVideo&&!s.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.hasVideo&&s.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},"illegalMediaSwitch"),CR=/* @__PURE__ */__name(function safeBackBufferTrimTime2(i,a,s){var o=a-sD.BACK_BUFFER_LENGTH;i.length&&(o=Math.max(o,i.start(0)));var u=a-s;return Math.min(u,o)},"safeBackBufferTrimTime"),ER=/* @__PURE__ */__name(function segmentInfoString2(i){var a=i.startOfSegment,s=i.duration,o=i.segment,u=i.part,_=i.playlist,x=_.mediaSequence,w=_.id,C=_.segments,L=void 0===C?[]:C,B=i.mediaIndex,U=i.partIndex,j=i.timeline,V=L.length-1,z="mediaIndex/partIndex increment";i.getMediaInfoForTime?z="getMediaInfoForTime ("+i.getMediaInfoForTime+")":i.isSyncRequest&&(z="getSyncSegmentCandidate (isSyncRequest)"),i.independent&&(z+=" with independent "+i.independent);var $="number"==typeof U,Y=i.segment.uri?"segment":"pre-segment",Z=$?OI({preloadSegment:o})-1:0;return Y+" ["+(x+B)+"/"+(x+V)+"]"+($?" part ["+U+"/"+Z+"]":"")+" segment start/end ["+o.start+" => "+o.end+"]"+($?" part start/end ["+u.start+" => "+u.end+"]":"")+" startOfSegment ["+a+"] duration ["+s+"] timeline ["+j+"] selected by ["+z+"] playlist ["+w+"]"},"segmentInfoString"),MR=/* @__PURE__ */__name(function timingInfoPropertyForMedia2(i){return i+"TimingInfo"},"timingInfoPropertyForMedia"),kR=/* @__PURE__ */__name(function timestampOffsetForSegment2(i){var a=i.segmentTimeline,s=i.currentTimeline,o=i.startOfSegment,u=i.buffered;return i.overrideCheck||a!==s?a<s?o:u.length?u.end(u.length-1):o:null},"timestampOffsetForSegment"),PR=/* @__PURE__ */__name(function shouldWaitForTimelineChange2(i){var a=i.timelineChangeController,s=i.currentTimeline,o=i.segmentTimeline,u=i.loaderType,_=i.audioDisabled;if(s===o)return!1;if("audio"===u){var x=a.lastTimelineChange({type:"main"});return!x||x.to!==o}if("main"===u&&_){var w=a.pendingTimelineChange({type:"audio"});return!w||w.to!==o}return!1},"shouldWaitForTimelineChange"),IR=/* @__PURE__ */__name(function mediaDuration2(i){var a=0;return["video","audio"].forEach(function(s){var o=i[s+"TimingInfo"];if(o){var u,_=o.start,x=o.end;"bigint"==typeof _||"bigint"==typeof x?u=Tn.BigInt(x)-Tn.BigInt(_):"number"==typeof _&&"number"==typeof x&&(u=x-_),void 0!==u&&u>a&&(a=u)}}),"bigint"==typeof a&&a<Number.MAX_SAFE_INTEGER&&(a=Number(a)),a},"mediaDuration"),LR=/* @__PURE__ */__name(function segmentTooLong2(i){var a=i.segmentDuration,s=i.maxDuration;return!!a&&Math.round(a)>s+yI},"segmentTooLong"),DR=/* @__PURE__ */__name(function getTroublesomeSegmentDurationMessage2(i,a){if("hls"!==a)return null;var s=IR({audioTimingInfo:i.audioTimingInfo,videoTimingInfo:i.videoTimingInfo});if(!s)return null;var o=i.playlist.targetDuration,u=LR({segmentDuration:s,maxDuration:2*o}),_=LR({segmentDuration:s,maxDuration:o}),x="Segment with index "+i.mediaIndex+" from playlist "+i.playlist.id+" has a duration of "+s+" when the reported duration is "+i.duration+" and the target duration is "+o+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return u||_?{severity:u?"warn":"info",message:x}:null},"getTroublesomeSegmentDurationMessage"),RR=/* @__PURE__ */function(i){function SegmentLoader2(a,s){var o;if(o=i.call(this)||this,!a)throw new TypeError("Initialization settings are required");if("function"!=typeof a.currentTime)throw new TypeError("No currentTime getter specified");if(!a.mediaSource)throw new TypeError("No MediaSource specified");return o.bandwidth=a.bandwidth,o.throughput={rate:0,count:0},o.roundTrip=NaN,o.resetStats_(),o.mediaIndex=null,o.partIndex=null,o.hasPlayed_=a.hasPlayed,o.currentTime_=a.currentTime,o.seekable_=a.seekable,o.seeking_=a.seeking,o.duration_=a.duration,o.mediaSource_=a.mediaSource,o.vhs_=a.vhs,o.loaderType_=a.loaderType,o.currentMediaInfo_=void 0,o.startingMediaInfo_=void 0,o.segmentMetadataTrack_=a.segmentMetadataTrack,o.goalBufferLength_=a.goalBufferLength,o.sourceType_=a.sourceType,o.sourceUpdater_=a.sourceUpdater,o.inbandTextTracks_=a.inbandTextTracks,o.state_="INIT",o.timelineChangeController_=a.timelineChangeController,o.shouldSaveSegmentTimingInfo_=!0,o.parse708captions_=a.parse708captions,o.useDtsForTimestampOffset_=a.useDtsForTimestampOffset,o.captionServices_=a.captionServices,o.experimentalExactManifestTimings=a.experimentalExactManifestTimings,o.checkBufferTimeout_=null,o.error_=void 0,o.currentTimeline_=-1,o.pendingSegment_=null,o.xhrOptions_=null,o.pendingSegments_=[],o.audioDisabled_=!1,o.isPendingTimestampOffset_=!1,o.gopBuffer_=[],o.timeMapping_=0,o.safeAppend_=videojs.browser.IE_VERSION>=11,o.appendInitSegment_={audio:!0,video:!0},o.playlistOfLastInitSegment_={audio:null,video:null},o.callQueue_=[],o.loadQueue_=[],o.metadataQueue_={id3:[],caption:[]},o.waitingOnRemove_=!1,o.quotaExceededErrorRetryTimeout_=null,o.activeInitSegmentId_=null,o.initSegments_={},o.cacheEncryptionKeys_=a.cacheEncryptionKeys,o.keyCache_={},o.decrypter_=a.decrypter,o.syncController_=a.syncController,o.syncPoint_={segmentIndex:0,time:0},o.transmuxer_=o.createTransmuxer_(),o.triggerSyncInfoUpdate_=function(){return o.trigger("syncinfoupdate")},o.syncController_.on("syncinfoupdate",o.triggerSyncInfoUpdate_),o.mediaSource_.addEventListener("sourceopen",function(){o.isEndOfStream_()||(o.ended_=!1)}),o.fetchAtBuffer_=!1,o.logger_=_I("SegmentLoader["+o.loaderType_+"]"),Object.defineProperty(_assertThisInitialized(o),"state",{get:/* @__PURE__ */__name(function get2(){return this.state_},"get"),set:/* @__PURE__ */__name(function set2(i){i!==this.state_&&(this.logger_(this.state_+" -> "+i),this.state_=i,this.trigger("statechange"))},"set")}),o.sourceUpdater_.on("ready",function(){o.hasEnoughInfoToAppend_()&&o.processCallQueue_()}),"main"===o.loaderType_&&o.timelineChangeController_.on("pendingtimelinechange",function(){o.hasEnoughInfoToAppend_()&&o.processCallQueue_()}),"audio"===o.loaderType_&&o.timelineChangeController_.on("timelinechange",function(){o.hasEnoughInfoToLoad_()&&o.processLoadQueue_(),o.hasEnoughInfoToAppend_()&&o.processCallQueue_()}),o}_inheritsLoose(SegmentLoader2,i),__name(SegmentLoader2,"SegmentLoader");var a=SegmentLoader2.prototype;return a.createTransmuxer_=/* @__PURE__ */__name(function createTransmuxer_(){return AD.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},"createTransmuxer_"),a.resetStats_=/* @__PURE__ */__name(function resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},"resetStats_"),a.dispose=/* @__PURE__ */__name(function dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Tn.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},"dispose"),a.setAudio=/* @__PURE__ */__name(function setAudio(i){this.audioDisabled_=!i,i?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},"setAudio"),a.abort=/* @__PURE__ */__name(function abort(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},"abort"),a.abort_=/* @__PURE__ */__name(function abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Tn.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},"abort_"),a.checkForAbort_=/* @__PURE__ */__name(function checkForAbort_(i){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==i:(this.state="READY",!0)},"checkForAbort_"),a.error=/* @__PURE__ */__name(function error(i){return void 0!==i&&(this.logger_("error occurred:",i),this.error_=i),this.pendingSegment_=null,this.error_},"error"),a.endOfStream=/* @__PURE__ */__name(function endOfStream(){this.ended_=!0,this.transmuxer_&&AD.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},"endOfStream"),a.buffered_=/* @__PURE__ */__name(function buffered_(){var i=this.getMediaInfo_();if(!this.sourceUpdater_||!i)return videojs.createTimeRanges();if("main"===this.loaderType_){var a=i.hasAudio,s=i.hasVideo,o=i.isMuxed;if(s&&a&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},"buffered_"),a.initSegmentForMap=/* @__PURE__ */__name(function initSegmentForMap(i,a){if(void 0===a&&(a=!1),!i)return null;var s=RL(i),o=this.initSegments_[s];return a&&!o&&i.bytes&&(this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:i.bytes,tracks:i.tracks,timescales:i.timescales}),o||i},"initSegmentForMap"),a.segmentKey=/* @__PURE__ */__name(function segmentKey(i,a){if(void 0===a&&(a=!1),!i)return null;var s=OL(i),o=this.keyCache_[s];this.cacheEncryptionKeys_&&a&&!o&&i.bytes&&(this.keyCache_[s]=o={resolvedUri:i.resolvedUri,bytes:i.bytes});var u={resolvedUri:(o||i).resolvedUri};return o&&(u.bytes=o.bytes),u},"segmentKey"),a.couldBeginLoading_=/* @__PURE__ */__name(function couldBeginLoading_(){return this.playlist_&&!this.paused()},"couldBeginLoading_"),a.load=/* @__PURE__ */__name(function load(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},"load"),a.init_=/* @__PURE__ */__name(function init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},"init_"),a.playlist=/* @__PURE__ */__name(function playlist(i,a){if(void 0===a&&(a={}),i){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=i,this.xhrOptions_=a,"INIT"===this.state&&(i.syncInfo={mediaSequence:i.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(i));var u=null;if(s&&(s.id?u=s.id:s.uri&&(u=s.uri)),this.logger_("playlist update ["+u+" => "+(i.id||i.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==i.uri)return null!==this.mediaIndex&&(i.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var _=i.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+_+"]"),null!==this.mediaIndex)if(this.mediaIndex-=_,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var x=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!x.parts||!x.parts.length||!x.parts[this.partIndex])){var w=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=w}}o&&(o.mediaIndex-=_,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=i.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,i)}},"playlist"),a.pause=/* @__PURE__ */__name(function pause(){this.checkBufferTimeout_&&(Tn.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},"pause"),a.paused=/* @__PURE__ */__name(function paused(){return null===this.checkBufferTimeout_},"paused"),a.resetEverything=/* @__PURE__ */__name(function resetEverything(i){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,i),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},"resetEverything"),a.resetLoader=/* @__PURE__ */__name(function resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()},"resetLoader"),a.resyncLoader=/* @__PURE__ */__name(function resyncLoader(){this.transmuxer_&&AD.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},"resyncLoader"),a.remove=/* @__PURE__ */__name(function remove(i,a,s,o){if(void 0===s&&(s=/* @__PURE__ */__name(function done2(){},"done")),void 0===o&&(o=!1),a===1/0&&(a=this.duration_()),a<=i)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var u=1,_=/* @__PURE__ */__name(function removeFinished2(){0===--u&&s()},"removeFinished");for(var x in!o&&this.audioDisabled_||(u++,this.sourceUpdater_.removeAudio(i,a,_)),(o||"main"===this.loaderType_)&&(this.gopBuffer_=bR(this.gopBuffer_,i,a,this.timeMapping_),u++,this.sourceUpdater_.removeVideo(i,a,_)),this.inbandTextTracks_)gR(i,a,this.inbandTextTracks_[x]);gR(i,a,this.segmentMetadataTrack_),_()}else this.logger_("skipping remove because no source updater or starting media info")},"remove"),a.monitorBuffer_=/* @__PURE__ */__name(function monitorBuffer_(){this.checkBufferTimeout_&&Tn.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Tn.setTimeout(this.monitorBufferTick_.bind(this),1)},"monitorBuffer_"),a.monitorBufferTick_=/* @__PURE__ */__name(function monitorBufferTick_(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Tn.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Tn.setTimeout(this.monitorBufferTick_.bind(this),500)},"monitorBufferTick_"),a.fillBuffer_=/* @__PURE__ */__name(function fillBuffer_(){if(!this.sourceUpdater_.updating()){var i=this.chooseNextRequest_();i&&("number"==typeof i.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})),this.loadSegment_(i))}},"fillBuffer_"),a.isEndOfStream_=/* @__PURE__ */__name(function isEndOfStream_(i,a,s){if(void 0===i&&(i=this.mediaIndex),void 0===a&&(a=this.playlist_),void 0===s&&(s=this.partIndex),!a||!this.mediaSource_)return!1;var o="number"==typeof i&&a.segments[i],u=i+1===a.segments.length,_=!o||!o.parts||s+1===o.parts.length;return a.endList&&"open"===this.mediaSource_.readyState&&u&&_},"isEndOfStream_"),a.chooseNextRequest_=/* @__PURE__ */__name(function chooseNextRequest_(){var i=this.buffered_(),a=kI(i)||0,s=PI(i,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,u=s>=this.goalBufferLength_(),_=this.playlist_.segments;if(!_.length||o||u)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var x={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(x.isSyncRequest)x.mediaIndex=SR(this.currentTimeline_,_,a);else if(null!==this.mediaIndex){var w=_[this.mediaIndex],C="number"==typeof this.partIndex?this.partIndex:-1;x.startOfSegment=w.end?w.end:a,w.parts&&w.parts[C+1]?(x.mediaIndex=this.mediaIndex,x.partIndex=C+1):x.mediaIndex=this.mediaIndex+1}else{var L=nL.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),B=L.segmentIndex,U=L.startTime,j=L.partIndex;x.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+a:"currentTime "+this.currentTime_(),x.mediaIndex=B,x.startOfSegment=U,x.partIndex=j}var V=_[x.mediaIndex],z=V&&"number"==typeof x.partIndex&&V.parts&&V.parts[x.partIndex];if(!V||"number"==typeof x.partIndex&&!z)return null;if("number"!=typeof x.partIndex&&V.parts&&(x.partIndex=0,z=V.parts[0]),!s&&z&&!z.independent)if(0===x.partIndex){var $=_[x.mediaIndex-1],Y=$.parts&&$.parts.length&&$.parts[$.parts.length-1];Y&&Y.independent&&(x.mediaIndex-=1,x.partIndex=$.parts.length-1,x.independent="previous segment")}else V.parts[x.partIndex-1].independent&&(x.partIndex-=1,x.independent="previous part");var Z=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return x.mediaIndex>=_.length-1&&Z&&!this.seeking_()?null:this.generateSegmentInfo_(x)},"chooseNextRequest_"),a.generateSegmentInfo_=/* @__PURE__ */__name(function generateSegmentInfo_(i){var a=i.independent,s=i.playlist,o=i.mediaIndex,u=i.startOfSegment,_=i.isSyncRequest,x=i.partIndex,w=i.forceTimestampOffset,C=i.getMediaInfoForTime,L=s.segments[o],B="number"==typeof x&&L.parts[x],U={requestId:"segment-loader-"+Math.random(),uri:B&&B.resolvedUri||L.resolvedUri,mediaIndex:o,partIndex:B?x:null,isSyncRequest:_,startOfSegment:u,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:L.timeline,duration:B&&B.duration||L.duration,segment:L,part:B,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:C,independent:a},j=void 0!==w?w:this.isPendingTimestampOffset_;U.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:L.timeline,currentTimeline:this.currentTimeline_,startOfSegment:u,buffered:this.buffered_(),overrideCheck:j});var V=kI(this.sourceUpdater_.audioBuffered());return"number"==typeof V&&(U.audioAppendStart=V-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(U.gopsToAlignWith=yR(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),U},"generateSegmentInfo_"),a.timestampOffsetForSegment_=/* @__PURE__ */__name(function timestampOffsetForSegment_(i){return kR(i)},"timestampOffsetForSegment_"),a.earlyAbortWhenNeeded_=/* @__PURE__ */__name(function earlyAbortWhenNeeded_(i){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(i.firstBytesReceivedAt||Date.now())<1e3)){var a=this.currentTime_(),s=i.bandwidth,o=this.pendingSegment_.duration,u=nL.estimateSegmentRequestTime(o,s,this.playlist_,i.bytesReceived),_=CI(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(!(u<=_)){var x=lR({master:this.vhs_.playlists.master,currentTime:a,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:_,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(x){var w=u-_-x.rebufferingImpact,C=.5;_<=yI&&(C=1),!x.playlist||x.playlist.uri===this.playlist_.uri||w<C||(this.bandwidth=x.playlist.attributes.BANDWIDTH*sD.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},"earlyAbortWhenNeeded_"),a.handleAbort_=/* @__PURE__ */__name(function handleAbort_(i){this.logger_("Aborting "+ER(i)),this.mediaRequestsAborted+=1},"handleAbort_"),a.handleProgress_=/* @__PURE__ */__name(function handleProgress_(i,a){this.earlyAbortWhenNeeded_(a.stats),this.checkForAbort_(a.requestId)||this.trigger("progress")},"handleProgress_"),a.handleTrackInfo_=/* @__PURE__ */__name(function handleTrackInfo_(i,a){this.earlyAbortWhenNeeded_(i.stats),this.checkForAbort_(i.requestId)||this.checkForIllegalMediaSwitch(a)||(a=a||{},TR(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),this.checkForAbort_(i.requestId)||(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},"handleTrackInfo_"),a.handleTimingInfo_=/* @__PURE__ */__name(function handleTimingInfo_(i,a,s,o){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId)){var u=this.pendingSegment_,_=MR(a);u[_]=u[_]||{},u[_][s]=o,this.logger_("timinginfo: "+a+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},"handleTimingInfo_"),a.handleCaptions_=/* @__PURE__ */__name(function handleCaptions_(i,a){var s=this;if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId))if(0!==a.length)if(this.pendingSegment_.hasAppendedData_){var o=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),u={};a.forEach(function(i){u[i.stream]=u[i.stream]||{startTime:1/0,captions:[],endTime:0};var a=u[i.stream];a.startTime=Math.min(a.startTime,i.startTime+o),a.endTime=Math.max(a.endTime,i.endTime+o),a.captions.push(i)}),Object.keys(u).forEach(function(i){var a=u[i],_=a.startTime,x=a.endTime,w=a.captions,C=s.inbandTextTracks_;s.logger_("adding cues from "+_+" -> "+x+" for "+i),dR(C,s.vhs_.tech_,i),gR(_,x,C[i]),hR({captionArray:w,inbandTextTracks:C,timestampOffset:o})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,i,a));else this.logger_("SegmentLoader received no captions from a caption event")},"handleCaptions_"),a.handleId3_=/* @__PURE__ */__name(function handleId3_(i,a,s){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId))if(this.pendingSegment_.hasAppendedData_){var o=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();fR(this.inbandTextTracks_,s,this.vhs_.tech_),mR({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:o,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,i,a,s))},"handleId3_"),a.processMetadataQueue_=/* @__PURE__ */__name(function processMetadataQueue_(){this.metadataQueue_.id3.forEach(function(i){return i()}),this.metadataQueue_.caption.forEach(function(i){return i()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},"processMetadataQueue_"),a.processCallQueue_=/* @__PURE__ */__name(function processCallQueue_(){var i=this.callQueue_;this.callQueue_=[],i.forEach(function(i){return i()})},"processCallQueue_"),a.processLoadQueue_=/* @__PURE__ */__name(function processLoadQueue_(){var i=this.loadQueue_;this.loadQueue_=[],i.forEach(function(i){return i()})},"processLoadQueue_"),a.hasEnoughInfoToLoad_=/* @__PURE__ */__name(function hasEnoughInfoToLoad_(){if("audio"!==this.loaderType_)return!0;var i=this.pendingSegment_;return!!i&&(!this.getCurrentMediaInfo_()||!PR({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},"hasEnoughInfoToLoad_"),a.getCurrentMediaInfo_=/* @__PURE__ */__name(function getCurrentMediaInfo_(i){return void 0===i&&(i=this.pendingSegment_),i&&i.trackInfo||this.currentMediaInfo_},"getCurrentMediaInfo_"),a.getMediaInfo_=/* @__PURE__ */__name(function getMediaInfo_(i){return void 0===i&&(i=this.pendingSegment_),this.getCurrentMediaInfo_(i)||this.startingMediaInfo_},"getMediaInfo_"),a.getPendingSegmentPlaylist=/* @__PURE__ */__name(function getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null},"getPendingSegmentPlaylist"),a.hasEnoughInfoToAppend_=/* @__PURE__ */__name(function hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var i=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!i||!a)return!1;var s=a.hasAudio,o=a.hasVideo,u=a.isMuxed;return!(o&&!i.videoTimingInfo)&&(!(s&&!this.audioDisabled_&&!u&&!i.audioTimingInfo)&&!PR({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:i.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},"hasEnoughInfoToAppend_"),a.handleData_=/* @__PURE__ */__name(function handleData_2(i,a){if(this.earlyAbortWhenNeeded_(i.stats),!this.checkForAbort_(i.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),"closed"!==this.mediaSource_.readyState){if(i.map&&(i.map=this.initSegmentForMap(i.map,!0),s.segment.map=i.map),i.key&&this.segmentKey(i.key,!0),s.isFmp4=i.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[MR(a.type)].start;else{var o,u=this.getCurrentMediaInfo_(),_="main"===this.loaderType_&&u&&u.hasVideo;_&&(o=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:_,firstVideoFrameTimeForData:o,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,a.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:"main"===this.loaderType_});var x=this.chooseNextRequest_();if(x.mediaIndex!==s.mediaIndex||x.partIndex!==s.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,a)}}else this.callQueue_.push(this.handleData_.bind(this,i,a))},"handleData_"),a.updateAppendInitSegmentStatus=/* @__PURE__ */__name(function updateAppendInitSegmentStatus(i,a){"main"!==this.loaderType_||"number"!=typeof i.timestampOffset||i.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==i.playlist&&(this.appendInitSegment_[a]=!0)},"updateAppendInitSegmentStatus"),a.getInitSegmentAndUpdateState_=/* @__PURE__ */__name(function getInitSegmentAndUpdateState_(i){var a=i.type,s=i.initSegment,o=i.map,u=i.playlist;if(o){var _=RL(o);if(this.activeInitSegmentId_===_)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=_}return s&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=u,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,s):null},"getInitSegmentAndUpdateState_"),a.handleQuotaExceededError_=/* @__PURE__ */__name(function handleQuotaExceededError_(i,a){var s=this,o=i.segmentInfo,u=i.type,_=i.bytes,x=this.sourceUpdater_.audioBuffered(),w=this.sourceUpdater_.videoBuffered();x.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+EI(x).join(", ")),w.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+EI(w).join(", "));var C=x.length?x.start(0):0,L=x.length?x.end(x.length-1):0,B=w.length?w.start(0):0,U=w.length?w.end(w.length-1):0;if(L-C<=1&&U-B<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+_.byteLength+", audio buffer: "+EI(x).join(", ")+", video buffer: "+EI(w).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:u,bytes:_}));var j=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+j),this.remove(0,j,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=Tn.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},1e3)},!0)},"handleQuotaExceededError_"),a.handleAppendError_=/* @__PURE__ */__name(function handleAppendError_(i,a){var s=i.segmentInfo,o=i.type,u=i.bytes;a&&(22!==a.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(o+" append of "+u.length+"b failed for segment #"+s.mediaIndex+" in playlist "+s.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:u}))},"handleAppendError_"),a.appendToSourceBuffer_=/* @__PURE__ */__name(function appendToSourceBuffer_(i){var a=i.segmentInfo,s=i.type,o=i.initSegment,u=i.data,_=i.bytes;if(!_){var x=[u],w=u.byteLength;o&&(x.unshift(o),w+=o.byteLength),_=uR({bytes:w,segments:x})}this.sourceUpdater_.appendBuffer({segmentInfo:a,type:s,bytes:_},this.handleAppendError_.bind(this,{segmentInfo:a,type:s,bytes:_}))},"appendToSourceBuffer_"),a.handleSegmentTimingInfo_=/* @__PURE__ */__name(function handleSegmentTimingInfo_(i,a,s){if(this.pendingSegment_&&a===this.pendingSegment_.requestId){var o=this.pendingSegment_.segment,u=i+"TimingInfo";o[u]||(o[u]={}),o[u].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[u].transmuxedPresentationStart=s.start.presentation,o[u].transmuxedDecodeStart=s.start.decode,o[u].transmuxedPresentationEnd=s.end.presentation,o[u].transmuxedDecodeEnd=s.end.decode,o[u].baseMediaDecodeTime=s.baseMediaDecodeTime}},"handleSegmentTimingInfo_"),a.appendData_=/* @__PURE__ */__name(function appendData_(i,a){var s=a.type,o=a.data;if(o&&o.byteLength&&("audio"!==s||!this.audioDisabled_)){var u=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:i.playlist,map:i.isFmp4?i.segment.map:null});this.appendToSourceBuffer_({segmentInfo:i,type:s,initSegment:u,data:o})}},"appendData_"),a.loadSegment_=/* @__PURE__ */__name(function loadSegment_(i){var a=this;this.state="WAITING",this.pendingSegment_=i,this.trimBackBuffer_(i),"number"==typeof i.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(i):this.loadQueue_.push(function(){var s=_extends({},i,{forceTimestampOffset:!0});_extends(i,a.generateSegmentInfo_(s)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(i)})},"loadSegment_"),a.updateTransmuxerAndRequestSegment_=/* @__PURE__ */__name(function updateTransmuxerAndRequestSegment_(i){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(i.timestampOffset)&&(this.gopBuffer_.length=0,i.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:i.timestampOffset}));var s=this.createSimplifiedSegmentObj_(i),o=this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex),u=null!==this.mediaIndex,_=i.timeline!==this.currentTimeline_&&i.timeline>0,x=o||u&&_;this.logger_("Requesting "+ER(i)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),i.abortRequests=GD({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,i),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",i.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",i.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:x,endedTimelineFn:/* @__PURE__ */__name(function endedTimelineFn(){a.logger_("received endedtimeline callback")},"endedTimelineFn"),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:/* @__PURE__ */__name(function onTransmuxerLog(s){var o=s.message,u=s.level,_=s.stream;a.logger_(ER(i)+" logged from transmuxer stream "+_+" as a "+u+": "+o)},"onTransmuxerLog")})},"updateTransmuxerAndRequestSegment_"),a.trimBackBuffer_=/* @__PURE__ */__name(function trimBackBuffer_(i){var a=CR(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)},"trimBackBuffer_"),a.createSimplifiedSegmentObj_=/* @__PURE__ */__name(function createSimplifiedSegmentObj_(i){var a=i.segment,s=i.part,o={resolvedUri:s?s.resolvedUri:a.resolvedUri,byterange:s?s.byterange:a.byterange,requestId:i.requestId,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,part:i.part},u=i.playlist.segments[i.mediaIndex-1];if(u&&u.timeline===a.timeline&&(u.videoTimingInfo?o.baseStartTime=u.videoTimingInfo.transmuxedDecodeEnd:u.audioTimingInfo&&(o.baseStartTime=u.audioTimingInfo.transmuxedDecodeEnd)),a.key){var _=a.key.iv||new Uint32Array([0,0,0,i.mediaIndex+i.playlist.mediaSequence]);o.key=this.segmentKey(a.key),o.key.iv=_}return a.map&&(o.map=this.initSegmentForMap(a.map)),o},"createSimplifiedSegmentObj_"),a.saveTransferStats_=/* @__PURE__ */__name(function saveTransferStats_(i){this.mediaRequests+=1,i&&(this.mediaBytesTransferred+=i.bytesReceived,this.mediaTransferDuration+=i.roundTripTime)},"saveTransferStats_"),a.saveBandwidthRelatedStats_=/* @__PURE__ */__name(function saveBandwidthRelatedStats_(i,a){this.pendingSegment_.byteLength=a.bytesReceived,i<wR?this.logger_("Ignoring segment's bandwidth because its duration of "+i+" is less than the min to record "+wR):(this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime)},"saveBandwidthRelatedStats_"),a.handleTimeout_=/* @__PURE__ */__name(function handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},"handleTimeout_"),a.segmentRequestFinished_=/* @__PURE__ */__name(function segmentRequestFinished_(i,a,s){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,i,a,s));else if(this.saveTransferStats_(a.stats),this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(i){if(this.pendingSegment_=null,this.state="READY",i.code===kD)return;return this.pause(),i.code===MD?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(i),void this.trigger("error"))}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,a.stats),o.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=vR(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},"segmentRequestFinished_"),a.setTimeMapping_=/* @__PURE__ */__name(function setTimeMapping_(i){var a=this.syncController_.mappingForTimeline(i);null!==a&&(this.timeMapping_=a)},"setTimeMapping_"),a.updateMediaSecondsLoaded_=/* @__PURE__ */__name(function updateMediaSecondsLoaded_(i){"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration},"updateMediaSecondsLoaded_"),a.shouldUpdateTransmuxerTimestampOffset_=/* @__PURE__ */__name(function shouldUpdateTransmuxerTimestampOffset_(i){return null!==i&&("main"===this.loaderType_&&i!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&i!==this.sourceUpdater_.audioTimestampOffset())},"shouldUpdateTransmuxerTimestampOffset_"),a.trueSegmentStart_=/* @__PURE__ */__name(function trueSegmentStart_(i){var a=i.currentStart,s=i.playlist,o=i.mediaIndex,u=i.firstVideoFrameTimeForData,_=i.currentVideoTimestampOffset,x=i.useVideoTimingInfo,w=i.videoTimingInfo,C=i.audioTimingInfo;if(void 0!==a)return a;if(!x)return C.start;var L=s.segments[o-1];return 0!==o&&L&&void 0!==L.start&&L.end===u+_?w.start:u},"trueSegmentStart_"),a.waitForAppendsToComplete_=/* @__PURE__ */__name(function waitForAppendsToComplete_(i){var a=this.getCurrentMediaInfo_(i);if(!a)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var s=a.hasAudio,o=a.hasVideo,u=a.isMuxed,_="main"===this.loaderType_&&o,x=!this.audioDisabled_&&s&&!u;if(i.waitingOnAppends=0,!i.hasAppendedData_)return i.timingInfo||"number"!=typeof i.timestampOffset||(this.isPendingTimestampOffset_=!0),i.timingInfo={start:0},i.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(i),this.processMetadataQueue_()),void this.checkAppendsDone_(i);_&&i.waitingOnAppends++,x&&i.waitingOnAppends++,_&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,i)),x&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,i))},"waitForAppendsToComplete_"),a.checkAppendsDone_=/* @__PURE__ */__name(function checkAppendsDone_(i){this.checkForAbort_(i.requestId)||(i.waitingOnAppends--,0===i.waitingOnAppends&&this.handleAppendsDone_())},"checkAppendsDone_"),a.checkForIllegalMediaSwitch=/* @__PURE__ */__name(function checkForIllegalMediaSwitch(i){var a=AR(this.loaderType_,this.getCurrentMediaInfo_(),i);return!!a&&(this.error({message:a,blacklistDuration:1/0}),this.trigger("error"),!0)},"checkForIllegalMediaSwitch"),a.updateSourceBufferTimestampOffset_=/* @__PURE__ */__name(function updateSourceBufferTimestampOffset_(i){if(null!==i.timestampOffset&&"number"==typeof i.timingInfo.start&&!i.changedTimestampOffset&&"main"===this.loaderType_){var a=!1;i.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:i.segment.videoTimingInfo,audioTimingInfo:i.segment.audioTimingInfo,timingInfo:i.timingInfo}),i.changedTimestampOffset=!0,i.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(i.timestampOffset),a=!0),i.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(i.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}},"updateSourceBufferTimestampOffset_"),a.getSegmentStartTimeForTimestampOffsetCalculation_=/* @__PURE__ */__name(function getSegmentStartTimeForTimestampOffsetCalculation_(i){var a=i.videoTimingInfo,s=i.audioTimingInfo,o=i.timingInfo;return this.useDtsForTimestampOffset_?a&&"number"==typeof a.transmuxedDecodeStart?a.transmuxedDecodeStart:s&&"number"==typeof s.transmuxedDecodeStart?s.transmuxedDecodeStart:o.start:o.start},"getSegmentStartTimeForTimestampOffsetCalculation_"),a.updateTimingInfoEnd_=/* @__PURE__ */__name(function updateTimingInfoEnd_(i){i.timingInfo=i.timingInfo||{};var a=this.getMediaInfo_(),s="main"===this.loaderType_&&a&&a.hasVideo&&i.videoTimingInfo?i.videoTimingInfo:i.audioTimingInfo;s&&(i.timingInfo.end="number"==typeof s.end?s.end:s.start+i.duration)},"updateTimingInfoEnd_"),a.handleAppendsDone_=/* @__PURE__ */__name(function handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var i=this.pendingSegment_;this.updateTimingInfoEnd_(i),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});var a=DR(i,this.sourceType_);if(a&&("warn"===a.severity?videojs.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(i),this.pendingSegment_=null,this.state="READY",!i.isSyncRequest||(this.trigger("syncinfoupdate"),i.hasAppendedData_)){this.logger_("Appended "+ER(i)),this.addSegmentMetadataCue_(i),this.fetchAtBuffer_=!0,this.currentTimeline_!==i.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:i.timeline})),this.currentTimeline_=i.timeline,this.trigger("syncinfoupdate");var s=i.segment,o=i.part,u=s.end&&this.currentTime_()-s.end>3*i.playlist.targetDuration,_=o&&o.end&&this.currentTime_()-o.end>3*i.playlist.partTargetDuration;if(u||_)return this.logger_("bad "+(u?"segment":"part")+" "+ER(i)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=i.mediaIndex,this.partIndex=i.partIndex,this.isEndOfStream_(i.mediaIndex,i.playlist,i.partIndex)&&this.endOfStream(),this.trigger("appended"),i.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+ER(i))},"handleAppendsDone_"),a.recordThroughput_=/* @__PURE__ */__name(function recordThroughput_(i){if(i.duration<wR)this.logger_("Ignoring segment's throughput because its duration of "+i.duration+" is less than the min to record "+wR);else{var a=this.throughput.rate,s=Date.now()-i.endOfAllRequests+1,o=Math.floor(i.byteLength/s*8*1e3);this.throughput.rate+=(o-a)/++this.throughput.count}},"recordThroughput_"),a.addSegmentMetadataCue_=/* @__PURE__ */__name(function addSegmentMetadataCue_(i){if(this.segmentMetadataTrack_){var a=i.segment,s=a.start,o=a.end;if(xR(s)&&xR(o)){gR(s,o,this.segmentMetadataTrack_);var u=Tn.WebKitDataCue||Tn.VTTCue,_={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:i.playlist.attributes.BANDWIDTH,resolution:i.playlist.attributes.RESOLUTION,codecs:i.playlist.attributes.CODECS,byteLength:i.byteLength,uri:i.uri,timeline:i.timeline,playlist:i.playlist.id,start:s,end:o},x=new u(s,o,JSON.stringify(_));x.value=_,this.segmentMetadataTrack_.addCue(x)}}},"addSegmentMetadataCue_"),SegmentLoader2}(videojs.EventTarget);function noop(){}__name(noop,"noop");var OR,NR=/* @__PURE__ */__name(function toTitleCase2(i){return"string"!=typeof i?i:i.replace(/./,function(i){return i.toUpperCase()})},"toTitleCase"),BR=["video","audio"],FR=/* @__PURE__ */__name(function updating2(i,a){var s=a[i+"Buffer"];return s&&s.updating||a.queuePending[i]},"updating"),UR=/* @__PURE__ */__name(function nextQueueIndexOfType2(i,a){for(var s=0;s<a.length;s++){var o=a[s];if("mediaSource"===o.type)return null;if(o.type===i)return s}return null},"nextQueueIndexOfType"),jR=/* @__PURE__ */__name(function shiftQueue2(i,a){if(0!==a.queue.length){var s=0,o=a.queue[s];if("mediaSource"!==o.type){if("mediaSource"!==i&&a.ready()&&"closed"!==a.mediaSource.readyState&&!FR(i,a)){if(o.type!==i){if(null===(s=UR(i,a.queue)))return;o=a.queue[s]}return a.queue.splice(s,1),a.queuePending[i]=o,o.action(i,a),o.doneFn?void 0:(a.queuePending[i]=null,void shiftQueue2(i,a))}}else a.updating()||"closed"===a.mediaSource.readyState||(a.queue.shift(),o.action(a),o.doneFn&&o.doneFn(),shiftQueue2("audio",a),shiftQueue2("video",a))}},"shiftQueue"),VR=/* @__PURE__ */__name(function cleanupBuffer2(i,a){var s=a[i+"Buffer"],o=NR(i);s&&(s.removeEventListener("updateend",a["on"+o+"UpdateEnd_"]),s.removeEventListener("error",a["on"+o+"Error_"]),a.codecs[i]=null,a[i+"Buffer"]=null)},"cleanupBuffer"),zR=/* @__PURE__ */__name(function inSourceBuffers2(i,a){return i&&a&&-1!==Array.prototype.indexOf.call(i.sourceBuffers,a)},"inSourceBuffers"),HR={appendBuffer:/* @__PURE__ */__name(function appendBuffer(i,a,s){return function(o,u){var _=u[o+"Buffer"];if(zR(u.mediaSource,_)){u.logger_("Appending segment "+a.mediaIndex+"'s "+i.length+" bytes to "+o+"Buffer");try{_.appendBuffer(i)}catch(x){u.logger_("Error with code "+x.code+" "+(22===x.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+a.mediaIndex+" to "+o+"Buffer"),u.queuePending[o]=null,s(x)}}}},"appendBuffer"),remove:/* @__PURE__ */__name(function remove(i,a){return function(s,o){var u=o[s+"Buffer"];if(zR(o.mediaSource,u)){o.logger_("Removing "+i+" to "+a+" from "+s+"Buffer");try{u.remove(i,a)}catch(_){o.logger_("Remove "+i+" to "+a+" from "+s+"Buffer failed")}}}},"remove"),timestampOffset:/* @__PURE__ */__name(function timestampOffset(i){return function(a,s){var o=s[a+"Buffer"];zR(s.mediaSource,o)&&(s.logger_("Setting "+a+"timestampOffset to "+i),o.timestampOffset=i)}},"timestampOffset"),callback:/* @__PURE__ */__name(function callback(i){return function(a,s){i()}},"callback"),endOfStream:/* @__PURE__ */__name(function endOfStream(i){return function(a){if("open"===a.mediaSource.readyState){a.logger_("Calling mediaSource endOfStream("+(i||"")+")");try{a.mediaSource.endOfStream(i)}catch(s){videojs.log.warn("Failed to call media source endOfStream",s)}}}},"endOfStream"),duration:/* @__PURE__ */__name(function duration2(i){return function(a){a.logger_("Setting mediaSource duration to "+i);try{a.mediaSource.duration=i}catch(s){videojs.log.warn("Failed to set media source duration",s)}}},"duration"),abort:/* @__PURE__ */__name(function abort(){return function(i,a){if("open"===a.mediaSource.readyState){var s=a[i+"Buffer"];if(zR(a.mediaSource,s)){a.logger_("calling abort on "+i+"Buffer");try{s.abort()}catch(o){videojs.log.warn("Failed to abort on "+i+"Buffer",o)}}}}},"abort"),addSourceBuffer:/* @__PURE__ */__name(function addSourceBuffer(i,a){return function(s){var o=NR(i),u=Fx(a);s.logger_("Adding "+i+"Buffer with codec "+a+" to mediaSource");var _=s.mediaSource.addSourceBuffer(u);_.addEventListener("updateend",s["on"+o+"UpdateEnd_"]),_.addEventListener("error",s["on"+o+"Error_"]),s.codecs[i]=a,s[i+"Buffer"]=_}},"addSourceBuffer"),removeSourceBuffer:/* @__PURE__ */__name(function removeSourceBuffer(i){return function(a){var s=a[i+"Buffer"];if(VR(i,a),zR(a.mediaSource,s)){a.logger_("Removing "+i+"Buffer with codec "+a.codecs[i]+" from mediaSource");try{a.mediaSource.removeSourceBuffer(s)}catch(o){videojs.log.warn("Failed to removeSourceBuffer "+i+"Buffer",o)}}}},"removeSourceBuffer"),changeType:/* @__PURE__ */__name(function changeType(i){return function(a,s){var o=s[a+"Buffer"],u=Fx(i);if(zR(s.mediaSource,o)&&s.codecs[a]!==i){s.logger_("changing "+a+"Buffer codec from "+s.codecs[a]+" to "+i);try{o.changeType(u),s.codecs[a]=i}catch(_){videojs.log.warn("Failed to changeType on "+a+"Buffer",_)}}}},"changeType")},$R=/* @__PURE__ */__name(function pushQueue2(i){var a=i.type,s=i.sourceUpdater,o=i.action,u=i.doneFn,_=i.name;s.queue.push({type:a,action:o,doneFn:u,name:_}),jR(a,s)},"pushQueue"),GR=/* @__PURE__ */__name(function onUpdateend2(i,a){return function(s){if(a.queuePending[i]){var o=a.queuePending[i].doneFn;a.queuePending[i]=null,o&&o(a[i+"Error_"])}jR(i,a)}},"onUpdateend"),WR=/* @__PURE__ */function(i){function SourceUpdater2(a){var s;return(s=i.call(this)||this).mediaSource=a,s.sourceopenListener_=function(){return jR("mediaSource",_assertThisInitialized(s))},s.mediaSource.addEventListener("sourceopen",s.sourceopenListener_),s.logger_=_I("SourceUpdater"),s.audioTimestampOffset_=0,s.videoTimestampOffset_=0,s.queue=[],s.queuePending={audio:null,video:null},s.delayedAudioAppendQueue_=[],s.videoAppendQueued_=!1,s.codecs={},s.onVideoUpdateEnd_=GR("video",_assertThisInitialized(s)),s.onAudioUpdateEnd_=GR("audio",_assertThisInitialized(s)),s.onVideoError_=function(i){s.videoError_=i},s.onAudioError_=function(i){s.audioError_=i},s.createdSourceBuffers_=!1,s.initializedEme_=!1,s.triggeredReady_=!1,s}_inheritsLoose(SourceUpdater2,i),__name(SourceUpdater2,"SourceUpdater");var a=SourceUpdater2.prototype;return a.initializedEme=/* @__PURE__ */__name(function initializedEme(){this.initializedEme_=!0,this.triggerReady()},"initializedEme"),a.hasCreatedSourceBuffers=/* @__PURE__ */__name(function hasCreatedSourceBuffers(){return this.createdSourceBuffers_},"hasCreatedSourceBuffers"),a.hasInitializedAnyEme=/* @__PURE__ */__name(function hasInitializedAnyEme(){return this.initializedEme_},"hasInitializedAnyEme"),a.ready=/* @__PURE__ */__name(function ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},"ready"),a.createSourceBuffers=/* @__PURE__ */__name(function createSourceBuffers(i){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(i),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},"createSourceBuffers"),a.triggerReady=/* @__PURE__ */__name(function triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},"triggerReady"),a.addSourceBuffer=/* @__PURE__ */__name(function addSourceBuffer(i,a){$R({type:"mediaSource",sourceUpdater:this,action:HR.addSourceBuffer(i,a),name:"addSourceBuffer"})},"addSourceBuffer"),a.abort=/* @__PURE__ */__name(function abort(i){$R({type:i,sourceUpdater:this,action:HR.abort(i),name:"abort"})},"abort"),a.removeSourceBuffer=/* @__PURE__ */__name(function removeSourceBuffer(i){this.canRemoveSourceBuffer()?$R({type:"mediaSource",sourceUpdater:this,action:HR.removeSourceBuffer(i),name:"removeSourceBuffer"}):videojs.log.error("removeSourceBuffer is not supported!")},"removeSourceBuffer"),a.canRemoveSourceBuffer=/* @__PURE__ */__name(function canRemoveSourceBuffer(){return!videojs.browser.IE_VERSION&&!videojs.browser.IS_FIREFOX&&Tn.MediaSource&&Tn.MediaSource.prototype&&"function"==typeof Tn.MediaSource.prototype.removeSourceBuffer},"canRemoveSourceBuffer"),SourceUpdater2.canChangeType=/* @__PURE__ */__name(function canChangeType(){return Tn.SourceBuffer&&Tn.SourceBuffer.prototype&&"function"==typeof Tn.SourceBuffer.prototype.changeType},"canChangeType"),a.canChangeType=/* @__PURE__ */__name(function canChangeType(){return this.constructor.canChangeType()},"canChangeType"),a.changeType=/* @__PURE__ */__name(function changeType(i,a){this.canChangeType()?$R({type:i,sourceUpdater:this,action:HR.changeType(a),name:"changeType"}):videojs.log.error("changeType is not supported!")},"changeType"),a.addOrChangeSourceBuffers=/* @__PURE__ */__name(function addOrChangeSourceBuffers(i){var a=this;if(!i||"object"!=typeof i||0===Object.keys(i).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(i).forEach(function(s){var o=i[s];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(s,o);a.canChangeType()&&a.changeType(s,o)})},"addOrChangeSourceBuffers"),a.appendBuffer=/* @__PURE__ */__name(function appendBuffer(i,a){var s=this,o=i.segmentInfo,u=i.type,_=i.bytes;if(this.processedAppend_=!0,"audio"===u&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([i,a]),void this.logger_("delayed audio append of "+_.length+" until video append");var x=a;if($R({type:u,sourceUpdater:this,action:HR.appendBuffer(_,o||{mediaIndex:-1},x),doneFn:a,name:"appendBuffer"}),"video"===u){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var w=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+w.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,w.forEach(function(i){s.appendBuffer.apply(s,i)})}},"appendBuffer"),a.audioBuffered=/* @__PURE__ */__name(function audioBuffered(){return zR(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:videojs.createTimeRange()},"audioBuffered"),a.videoBuffered=/* @__PURE__ */__name(function videoBuffered(){return zR(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:videojs.createTimeRange()},"videoBuffered"),a.buffered=/* @__PURE__ */__name(function buffered(){var i=zR(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=zR(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!i?this.audioBuffered():i&&!a?this.videoBuffered():wI(this.audioBuffered(),this.videoBuffered())},"buffered"),a.setDuration=/* @__PURE__ */__name(function setDuration(i,a){void 0===a&&(a=noop),$R({type:"mediaSource",sourceUpdater:this,action:HR.duration(i),name:"duration",doneFn:a})},"setDuration"),a.endOfStream=/* @__PURE__ */__name(function endOfStream(i,a){void 0===i&&(i=null),void 0===a&&(a=noop),"string"!=typeof i&&(i=void 0),$R({type:"mediaSource",sourceUpdater:this,action:HR.endOfStream(i),name:"endOfStream",doneFn:a})},"endOfStream"),a.removeAudio=/* @__PURE__ */__name(function removeAudio(i,a,s){void 0===s&&(s=noop),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?$R({type:"audio",sourceUpdater:this,action:HR.remove(i,a),doneFn:s,name:"remove"}):s()},"removeAudio"),a.removeVideo=/* @__PURE__ */__name(function removeVideo(i,a,s){void 0===s&&(s=noop),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?$R({type:"video",sourceUpdater:this,action:HR.remove(i,a),doneFn:s,name:"remove"}):s()},"removeVideo"),a.updating=/* @__PURE__ */__name(function updating2(){return!(!FR("audio",this)&&!FR("video",this))},"updating"),a.audioTimestampOffset=/* @__PURE__ */__name(function audioTimestampOffset(i){return void 0!==i&&this.audioBuffer&&this.audioTimestampOffset_!==i&&($R({type:"audio",sourceUpdater:this,action:HR.timestampOffset(i),name:"timestampOffset"}),this.audioTimestampOffset_=i),this.audioTimestampOffset_},"audioTimestampOffset"),a.videoTimestampOffset=/* @__PURE__ */__name(function videoTimestampOffset(i){return void 0!==i&&this.videoBuffer&&this.videoTimestampOffset!==i&&($R({type:"video",sourceUpdater:this,action:HR.timestampOffset(i),name:"timestampOffset"}),this.videoTimestampOffset_=i),this.videoTimestampOffset_},"videoTimestampOffset"),a.audioQueueCallback=/* @__PURE__ */__name(function audioQueueCallback(i){this.audioBuffer&&$R({type:"audio",sourceUpdater:this,action:HR.callback(i),name:"callback"})},"audioQueueCallback"),a.videoQueueCallback=/* @__PURE__ */__name(function videoQueueCallback(i){this.videoBuffer&&$R({type:"video",sourceUpdater:this,action:HR.callback(i),name:"callback"})},"videoQueueCallback"),a.dispose=/* @__PURE__ */__name(function dispose(){var i=this;this.trigger("dispose"),BR.forEach(function(a){i.abort(a),i.canRemoveSourceBuffer()?i.removeSourceBuffer(a):i[a+"QueueCallback"](function(){return VR(a,i)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},"dispose"),SourceUpdater2}(videojs.EventTarget),qR=/* @__PURE__ */__name(function uint8ToUtf82(i){return decodeURIComponent(escape(String.fromCharCode.apply(null,i)))},"uint8ToUtf8"),XR=new Uint8Array("\n\n".split("").map(function(i){return i.charCodeAt(0)})),QR=/* @__PURE__ */function(i){function NoVttJsError2(){return i.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return _inheritsLoose(NoVttJsError2,i),__name(NoVttJsError2,"NoVttJsError"),NoVttJsError2}(/* @__PURE__ */_wrapNativeSuper(Error)),KR=/* @__PURE__ */function(i){function VTTSegmentLoader2(a,s){var o;return void 0===s&&(s={}),(o=i.call(this,a,s)||this).mediaSource_=null,o.subtitlesTrack_=null,o.loaderType_="subtitle",o.featuresNativeTextTracks_=a.featuresNativeTextTracks,o.loadVttJs=a.loadVttJs,o.shouldSaveSegmentTimingInfo_=!1,o}_inheritsLoose(VTTSegmentLoader2,i),__name(VTTSegmentLoader2,"VTTSegmentLoader");var a=VTTSegmentLoader2.prototype;return a.createTransmuxer_=/* @__PURE__ */__name(function createTransmuxer_(){return null},"createTransmuxer_"),a.buffered_=/* @__PURE__ */__name(function buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return videojs.createTimeRanges();var i=this.subtitlesTrack_.cues,a=i[0].startTime,s=i[i.length-1].startTime;return videojs.createTimeRanges([[a,s]])},"buffered_"),a.initSegmentForMap=/* @__PURE__ */__name(function initSegmentForMap(i,a){if(void 0===a&&(a=!1),!i)return null;var s=RL(i),o=this.initSegments_[s];if(a&&!o&&i.bytes){var u=XR.byteLength+i.bytes.byteLength,_=new Uint8Array(u);_.set(i.bytes),_.set(XR,i.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:i.resolvedUri,byterange:i.byterange,bytes:_}}return o||i},"initSegmentForMap"),a.couldBeginLoading_=/* @__PURE__ */__name(function couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},"couldBeginLoading_"),a.init_=/* @__PURE__ */__name(function init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},"init_"),a.track=/* @__PURE__ */__name(function track(i){return void 0===i||(this.subtitlesTrack_=i,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},"track"),a.remove=/* @__PURE__ */__name(function remove(i,a){gR(i,a,this.subtitlesTrack_)},"remove"),a.fillBuffer_=/* @__PURE__ */__name(function fillBuffer_(){var i=this,a=this.chooseNextRequest_();if(a){if(null===this.syncController_.timestampOffsetForTimeline(a.timeline)){var s=/* @__PURE__ */__name(function checkTimestampOffset2(){i.state="READY",i.paused()||i.monitorBuffer_()},"checkTimestampOffset");return this.syncController_.one("timestampoffset",s),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(a)}},"fillBuffer_"),a.timestampOffsetForSegment_=/* @__PURE__ */__name(function timestampOffsetForSegment_(){return null},"timestampOffsetForSegment_"),a.chooseNextRequest_=/* @__PURE__ */__name(function chooseNextRequest_(){return this.skipEmptySegments_(i.prototype.chooseNextRequest_.call(this))},"chooseNextRequest_"),a.skipEmptySegments_=/* @__PURE__ */__name(function skipEmptySegments_(i){for(;i&&i.segment.empty;){if(i.mediaIndex+1>=i.playlist.segments.length){i=null;break}i=this.generateSegmentInfo_({playlist:i.playlist,mediaIndex:i.mediaIndex+1,startOfSegment:i.startOfSegment+i.duration,isSyncRequest:i.isSyncRequest})}return i},"skipEmptySegments_"),a.stopForError=/* @__PURE__ */__name(function stopForError(i){this.error(i),this.state="READY",this.pause(),this.trigger("error")},"stopForError"),a.segmentRequestFinished_=/* @__PURE__ */__name(function segmentRequestFinished_(i,a,s){var o=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(a.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(i)return i.code===MD&&this.handleTimeout_(),i.code===kD?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(i);var u=this.pendingSegment_;this.saveBandwidthRelatedStats_(u.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");var _=u.segment;if(_.map&&(_.map.bytes=a.map.bytes),u.bytes=a.bytes,"function"!=typeof Tn.WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then(function(){return o.segmentRequestFinished_(i,a,s)},function(){return o.stopForError({message:"Error loading vtt.js"})});_.requested=!0;try{this.parseVTTCues_(u)}catch(x){return void this.stopForError({message:x.message})}if(this.updateTimeMapping_(u,this.syncController_.timelines[u.timeline],this.playlist_),u.cues.length?u.timingInfo={start:u.cues[0].startTime,end:u.cues[u.cues.length-1].endTime}:u.timingInfo={start:u.startOfSegment,end:u.startOfSegment+u.duration},u.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");u.byteLength=u.bytes.byteLength,this.mediaSecondsLoaded+=_.duration,u.cues.forEach(function(i){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new Tn.VTTCue(i.startTime,i.endTime,i.text):i)}),_R(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},"segmentRequestFinished_"),a.handleData_=/* @__PURE__ */__name(function handleData_2(){},"handleData_"),a.updateTimingInfoEnd_=/* @__PURE__ */__name(function updateTimingInfoEnd_(){},"updateTimingInfoEnd_"),a.parseVTTCues_=/* @__PURE__ */__name(function parseVTTCues_(i){var a,s=!1;if("function"!=typeof Tn.WebVTT)throw new QR;"function"==typeof Tn.TextDecoder?a=new Tn.TextDecoder("utf8"):(a=Tn.WebVTT.StringDecoder(),s=!0);var o=new Tn.WebVTT.Parser(Tn,Tn.vttjs,a);if(i.cues=[],i.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=i.cues.push.bind(i.cues),o.ontimestampmap=function(a){i.timestampmap=a},o.onparsingerror=function(i){videojs.log.warn("Error encountered when parsing cues: "+i.message)},i.segment.map){var u=i.segment.map.bytes;s&&(u=qR(u)),o.parse(u)}var _=i.bytes;s&&(_=qR(_)),o.parse(_),o.flush()},"parseVTTCues_"),a.updateTimeMapping_=/* @__PURE__ */__name(function updateTimeMapping_(i,a,s){var o=i.segment;if(a)if(i.cues.length){var u=i.timestampmap,_=u.MPEGTS/cC.ONE_SECOND_IN_TS-u.LOCAL+a.mapping;if(i.cues.forEach(function(i){i.startTime+=_,i.endTime+=_}),!s.syncInfo){var x=i.cues[0].startTime,w=i.cues[i.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+i.mediaIndex,time:Math.min(x,w-o.duration)}}}else o.empty=!0},"updateTimeMapping_"),VTTSegmentLoader2}(RR),YR=/* @__PURE__ */__name(function findAdCue2(i,a){for(var s=i.cues,o=0;o<s.length;o++){var u=s[o];if(a>=u.adStartTime&&a<=u.adEndTime)return u}return null},"findAdCue"),JR=/* @__PURE__ */__name(function updateAdCues2(i,a,s){if(void 0===s&&(s=0),i.segments)for(var o,u=s,_=0;_<i.segments.length;_++){var x=i.segments[_];if(o||(o=YR(a,u+x.duration/2)),o){if("cueIn"in x){o.endTime=u,o.adEndTime=u,u+=x.duration,o=null;continue}if(u<o.endTime){u+=x.duration;continue}o.endTime+=x.duration}else if("cueOut"in x&&((o=new Tn.VTTCue(u,u+x.duration,x.cueOut)).adStartTime=u,o.adEndTime=u+parseFloat(x.cueOut),a.addCue(o)),"cueOutCont"in x){var w=x.cueOutCont.split("/").map(parseFloat),C=w[0],L=w[1];(o=new Tn.VTTCue(u,u+x.duration,"")).adStartTime=u-C,o.adEndTime=o.adStartTime+L,a.addCue(o)}u+=x.duration}},"updateAdCues"),ZR=[{name:"VOD",run:/* @__PURE__ */__name(function run(i,a,s,o,u){if(s!==1/0){return{time:0,segmentIndex:0,partIndex:null}}return null},"run")},{name:"ProgramDateTime",run:/* @__PURE__ */__name(function run(i,a,s,o,u){if(!Object.keys(i.timelineToDatetimeMappings).length)return null;var _=null,x=null,w=DI(a);u=u||0;for(var C=0;C<w.length;C++){var L=w[a.endList||0===u?C:w.length-(C+1)],B=L.segment,U=i.timelineToDatetimeMappings[B.timeline];if(U&&B.dateTimeObject){var j=B.dateTimeObject.getTime()/1e3+U;if(B.parts&&"number"==typeof L.partIndex)for(var V=0;V<L.partIndex;V++)j+=B.parts[V].duration;var z=Math.abs(u-j);if(null!==x&&(0===z||x<z))break;x=z,_={time:j,segmentIndex:L.segmentIndex,partIndex:L.partIndex}}}return _},"run")},{name:"Segment",run:/* @__PURE__ */__name(function run(i,a,s,o,u){var _=null,x=null;u=u||0;for(var w=DI(a),C=0;C<w.length;C++){var L=w[a.endList||0===u?C:w.length-(C+1)],B=L.segment,U=L.part&&L.part.start||B&&B.start;if(B.timeline===o&&void 0!==U){var j=Math.abs(u-U);if(null!==x&&x<j)break;(!_||null===x||x>=j)&&(x=j,_={time:U,segmentIndex:L.segmentIndex,partIndex:L.partIndex})}}return _},"run")},{name:"Discontinuity",run:/* @__PURE__ */__name(function run(i,a,s,o,u){var _=null;if(u=u||0,a.discontinuityStarts&&a.discontinuityStarts.length)for(var x=null,w=0;w<a.discontinuityStarts.length;w++){var C=a.discontinuityStarts[w],L=a.discontinuitySequence+w+1,B=i.discontinuities[L];if(B){var U=Math.abs(u-B.time);if(null!==x&&x<U)break;(!_||null===x||x>=U)&&(x=U,_={time:B.time,segmentIndex:C,partIndex:null})}}return _},"run")},{name:"Playlist",run:/* @__PURE__ */__name(function run(i,a,s,o,u){return a.syncInfo?{time:a.syncInfo.time,segmentIndex:a.syncInfo.mediaSequence-a.mediaSequence,partIndex:null}:null},"run")}],eO=/* @__PURE__ */function(i){function SyncController2(a){var s;return(s=i.call(this)||this).timelines=[],s.discontinuities=[],s.timelineToDatetimeMappings={},s.logger_=_I("SyncController"),s}_inheritsLoose(SyncController2,i),__name(SyncController2,"SyncController");var a=SyncController2.prototype;return a.getSyncPoint=/* @__PURE__ */__name(function getSyncPoint(i,a,s,o){var u=this.runStrategies_(i,a,s,o);return u.length?this.selectSyncPoint_(u,{key:"time",value:o}):null},"getSyncPoint"),a.getExpiredTime=/* @__PURE__ */__name(function getExpiredTime(i,a){if(!i||!i.segments)return null;var s=this.runStrategies_(i,a,i.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+VI({defaultDuration:i.targetDuration,durationList:i.segments,startIndex:o.segmentIndex,endIndex:0}))},"getExpiredTime"),a.runStrategies_=/* @__PURE__ */__name(function runStrategies_(i,a,s,o){for(var u=[],_=0;_<ZR.length;_++){var x=ZR[_],w=x.run(this,i,a,s,o);w&&(w.strategy=x.name,u.push({strategy:x.name,syncPoint:w}))}return u},"runStrategies_"),a.selectSyncPoint_=/* @__PURE__ */__name(function selectSyncPoint_(i,a){for(var s=i[0].syncPoint,o=Math.abs(i[0].syncPoint[a.key]-a.value),u=i[0].strategy,_=1;_<i.length;_++){var x=Math.abs(i[_].syncPoint[a.key]-a.value);x<o&&(o=x,s=i[_].syncPoint,u=i[_].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy ["+u+"]: [time:"+s.time+", segmentIndex:"+s.segmentIndex+("number"==typeof s.partIndex?",partIndex:"+s.partIndex:"")+"]"),s},"selectSyncPoint_"),a.saveExpiredSegmentInfo=/* @__PURE__ */__name(function saveExpiredSegmentInfo(i,a){var s=a.mediaSequence-i.mediaSequence;if(s>86400)videojs.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");else for(var o=s-1;o>=0;o--){var u=i.segments[o];if(u&&void 0!==u.start){a.syncInfo={mediaSequence:i.mediaSequence+o,time:u.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+", mediaSequence: "+a.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},"saveExpiredSegmentInfo"),a.setDateTimeMappingForStart=/* @__PURE__ */__name(function setDateTimeMappingForStart(i){if(this.timelineToDatetimeMappings={},i.segments&&i.segments.length&&i.segments[0].dateTimeObject){var a=i.segments[0],s=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-s}},"setDateTimeMappingForStart"),a.saveSegmentTimingInfo=/* @__PURE__ */__name(function saveSegmentTimingInfo(i){var a=i.segmentInfo,s=i.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(a,a.timingInfo,s),u=a.segment;o&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:u.start}));var _=u.dateTimeObject;u.discontinuity&&s&&_&&(this.timelineToDatetimeMappings[u.timeline]=-_.getTime()/1e3)},"saveSegmentTimingInfo"),a.timestampOffsetForTimeline=/* @__PURE__ */__name(function timestampOffsetForTimeline(i){return void 0===this.timelines[i]?null:this.timelines[i].time},"timestampOffsetForTimeline"),a.mappingForTimeline=/* @__PURE__ */__name(function mappingForTimeline(i){return void 0===this.timelines[i]?null:this.timelines[i].mapping},"mappingForTimeline"),a.calculateSegmentTimeMapping_=/* @__PURE__ */__name(function calculateSegmentTimeMapping_(i,a,s){var o,u,_=i.segment,x=i.part,w=this.timelines[i.timeline];if("number"==typeof i.timestampOffset)w={time:i.startOfSegment,mapping:i.startOfSegment-a.start},s&&(this.timelines[i.timeline]=w,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+i.timeline+": [time: "+w.time+"] [mapping: "+w.mapping+"]")),o=i.startOfSegment,u=a.end+w.mapping;else{if(!w)return!1;o=a.start+w.mapping,u=a.end+w.mapping}return x&&(x.start=o,x.end=u),(!_.start||o<_.start)&&(_.start=o),_.end=u,!0},"calculateSegmentTimeMapping_"),a.saveDiscontinuitySyncInfo_=/* @__PURE__ */__name(function saveDiscontinuitySyncInfo_(i){var a=i.playlist,s=i.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var o=0;o<a.discontinuityStarts.length;o++){var u=a.discontinuityStarts[o],_=a.discontinuitySequence+o+1,x=u-i.mediaIndex,w=Math.abs(x);if(!this.discontinuities[_]||this.discontinuities[_].accuracy>w){var C=void 0;C=x<0?s.start-VI({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex,endIndex:u}):s.end+VI({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:i.mediaIndex+1,endIndex:u}),this.discontinuities[_]={time:C,accuracy:w}}}},"saveDiscontinuitySyncInfo_"),a.dispose=/* @__PURE__ */__name(function dispose(){this.trigger("dispose"),this.off()},"dispose"),SyncController2}(videojs.EventTarget),tO=/* @__PURE__ */function(i){function TimelineChangeController2(){var a;return(a=i.call(this)||this).pendingTimelineChanges_={},a.lastTimelineChanges_={},a}_inheritsLoose(TimelineChangeController2,i),__name(TimelineChangeController2,"TimelineChangeController");var a=TimelineChangeController2.prototype;return a.clearPendingTimelineChange=/* @__PURE__ */__name(function clearPendingTimelineChange(i){this.pendingTimelineChanges_[i]=null,this.trigger("pendingtimelinechange")},"clearPendingTimelineChange"),a.pendingTimelineChange=/* @__PURE__ */__name(function pendingTimelineChange(i){var a=i.type,s=i.from,o=i.to;return"number"==typeof s&&"number"==typeof o&&(this.pendingTimelineChanges_[a]={type:a,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},"pendingTimelineChange"),a.lastTimelineChange=/* @__PURE__ */__name(function lastTimelineChange(i){var a=i.type,s=i.from,o=i.to;return"number"==typeof s&&"number"==typeof o&&(this.lastTimelineChanges_[a]={type:a,from:s,to:o},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},"lastTimelineChange"),a.dispose=/* @__PURE__ */__name(function dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},"dispose"),TimelineChangeController2}(videojs.EventTarget),nO=dD(hD(function(){var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(i,a,s){return i(s={path:a,exports:{},require:/* @__PURE__ */__name(function require2(i,a){return commonjsRequire(null==a&&s.path)},"require")},s.exports),s.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}__name(createCommonjsModule,"createCommonjsModule"),__name(commonjsRequire,"commonjsRequire");var a=createCommonjsModule(function(i){function _defineProperties(i,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}function _createClass(i,a,s){return a&&_defineProperties(i.prototype,a),s&&_defineProperties(i,s),i}__name(_defineProperties,"_defineProperties"),__name(_createClass,"_createClass"),i.exports=_createClass,i.exports.default=i.exports,i.exports.__esModule=!0}),s=createCommonjsModule(function(i){function _setPrototypeOf2(a,s){return i.exports=_setPrototypeOf2=Object.setPrototypeOf||/* @__PURE__ */__name(function _setPrototypeOf3(i,a){return i.__proto__=a,i},"_setPrototypeOf"),i.exports.default=i.exports,i.exports.__esModule=!0,_setPrototypeOf2(a,s)}__name(_setPrototypeOf2,"_setPrototypeOf"),i.exports=_setPrototypeOf2,i.exports.default=i.exports,i.exports.__esModule=!0}),o=createCommonjsModule(function(i){function _inheritsLoose2(i,a){i.prototype=Object.create(a.prototype),i.prototype.constructor=i,s(i,a)}__name(_inheritsLoose2,"_inheritsLoose"),i.exports=_inheritsLoose2,i.exports.default=i.exports,i.exports.__esModule=!0}),u=/* @__PURE__ */function(){function Stream3(){this.listeners={}}__name(Stream3,"Stream");var i=Stream3.prototype;return i.on=/* @__PURE__ */__name(function on2(i,a){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(a)},"on"),i.off=/* @__PURE__ */__name(function off2(i,a){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(a);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},"off"),i.trigger=/* @__PURE__ */__name(function trigger2(i){var a=this.listeners[i];if(a)if(2===arguments.length)for(var s=a.length,o=0;o<s;++o)a[o].call(this,arguments[1]);else for(var u=Array.prototype.slice.call(arguments,1),_=a.length,x=0;x<_;++x)a[x].apply(this,u)},"trigger"),i.dispose=/* @__PURE__ */__name(function dispose(){this.listeners={}},"dispose"),i.pipe=/* @__PURE__ */__name(function pipe(i){this.on("data",function(a){i.push(a)})},"pipe"),Stream3}();function unpad(i){return i.subarray(0,i.byteLength-i[i.byteLength-1])}__name(unpad,"unpad");var _=/* @__PURE__ */__name(function precompute2(){var i,a,s,o,u,_,x,w,C=[[[],[],[],[],[]],[[],[],[],[],[]]],L=C[0],B=C[1],U=L[4],j=B[4],V=[],z=[];for(i=0;i<256;i++)z[(V[i]=i<<1^283*(i>>7))^i]=i;for(a=s=0;!U[a];a^=o||1,s=z[s]||1)for(_=(_=s^s<<1^s<<2^s<<3^s<<4)>>8^255&_^99,U[a]=_,j[_]=a,w=16843009*V[u=V[o=V[a]]]^65537*u^257*o^16843008*a,x=257*V[_]^16843008*_,i=0;i<4;i++)L[i][a]=x=x<<24^x>>>8,B[i][_]=w=w<<24^w>>>8;for(i=0;i<5;i++)L[i]=L[i].slice(0),B[i]=B[i].slice(0);return C},"precompute"),x=null,w=/* @__PURE__ */function(){function AES2(i){var a,s,o;x||(x=_()),this._tables=[[x[0][0].slice(),x[0][1].slice(),x[0][2].slice(),x[0][3].slice(),x[0][4].slice()],[x[1][0].slice(),x[1][1].slice(),x[1][2].slice(),x[1][3].slice(),x[1][4].slice()]];var u=this._tables[0][4],w=this._tables[1],C=i.length,L=1;if(4!==C&&6!==C&&8!==C)throw new Error("Invalid aes key size");var B=i.slice(0),U=[];for(this._key=[B,U],a=C;a<4*C+28;a++)o=B[a-1],(a%C===0||8===C&&a%C===4)&&(o=u[o>>>24]<<24^u[o>>16&255]<<16^u[o>>8&255]<<8^u[255&o],a%C===0&&(o=o<<8^o>>>24^L<<24,L=L<<1^283*(L>>7))),B[a]=B[a-C]^o;for(s=0;a;s++,a--)o=B[3&s?a:a-4],U[s]=a<=4||s<4?o:w[0][u[o>>>24]]^w[1][u[o>>16&255]]^w[2][u[o>>8&255]]^w[3][u[255&o]]}return __name(AES2,"AES"),AES2.prototype.decrypt=/* @__PURE__ */__name(function decrypt3(i,a,s,o,u,_){var x,w,C,L,B=this._key[1],U=i^B[0],j=o^B[1],V=s^B[2],z=a^B[3],$=B.length/4-2,Y=4,Z=this._tables[1],ee=Z[0],ie=Z[1],ae=Z[2],le=Z[3],ce=Z[4];for(L=0;L<$;L++)x=ee[U>>>24]^ie[j>>16&255]^ae[V>>8&255]^le[255&z]^B[Y],w=ee[j>>>24]^ie[V>>16&255]^ae[z>>8&255]^le[255&U]^B[Y+1],C=ee[V>>>24]^ie[z>>16&255]^ae[U>>8&255]^le[255&j]^B[Y+2],z=ee[z>>>24]^ie[U>>16&255]^ae[j>>8&255]^le[255&V]^B[Y+3],Y+=4,U=x,j=w,V=C;for(L=0;L<4;L++)u[(3&-L)+_]=ce[U>>>24]<<24^ce[j>>16&255]<<16^ce[V>>8&255]<<8^ce[255&z]^B[Y++],x=U,U=j,j=V,V=z,z=x},"decrypt"),AES2}(),C=/* @__PURE__ */function(i){function AsyncStream2(){var a;return(a=i.call(this,u)||this).jobs=[],a.delay=1,a.timeout_=null,a}o(AsyncStream2,i),__name(AsyncStream2,"AsyncStream");var a=AsyncStream2.prototype;return a.processJob_=/* @__PURE__ */__name(function processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},"processJob_"),a.push=/* @__PURE__ */__name(function push(i){this.jobs.push(i),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},"push"),AsyncStream2}(u),L=/* @__PURE__ */__name(function ntoh2(i){return i<<24|(65280&i)<<8|(16711680&i)>>8|i>>>24},"ntoh"),B=/* @__PURE__ */__name(function decrypt3(i,a,s){var o,u,_,x,C,B,U,j,V,z=new Int32Array(i.buffer,i.byteOffset,i.byteLength>>2),$=new w(Array.prototype.slice.call(a)),Y=new Uint8Array(i.byteLength),Z=new Int32Array(Y.buffer);for(o=s[0],u=s[1],_=s[2],x=s[3],V=0;V<z.length;V+=4)C=L(z[V]),B=L(z[V+1]),U=L(z[V+2]),j=L(z[V+3]),$.decrypt(C,B,U,j,Z,V),Z[V]=L(Z[V]^o),Z[V+1]=L(Z[V+1]^u),Z[V+2]=L(Z[V+2]^_),Z[V+3]=L(Z[V+3]^x),o=C,u=B,_=U,x=j;return Y},"decrypt"),U=/* @__PURE__ */function(){function Decrypter3(i,a,s,o){var u=Decrypter3.STEP,_=new Int32Array(i.buffer),x=new Uint8Array(i.byteLength),w=0;for(this.asyncStream_=new C,this.asyncStream_.push(this.decryptChunk_(_.subarray(w,w+u),a,s,x)),w=u;w<_.length;w+=u)s=new Uint32Array([L(_[w-4]),L(_[w-3]),L(_[w-2]),L(_[w-1])]),this.asyncStream_.push(this.decryptChunk_(_.subarray(w,w+u),a,s,x));this.asyncStream_.push(function(){o(null,unpad(x))})}return __name(Decrypter3,"Decrypter"),Decrypter3.prototype.decryptChunk_=/* @__PURE__ */__name(function decryptChunk_(i,a,s,o){return function(){var u=B(i,a,s);o.set(u,i.byteOffset)}},"decryptChunk_"),a(Decrypter3,null,[{key:"STEP",get:/* @__PURE__ */__name(function get2(){return 32e3},"get")}]),Decrypter3}(),j="undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:{},V=/* @__PURE__ */__name(function isArrayBufferView3(i){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer},"isArrayBufferView"),z=j.BigInt||Number;z("0x1"),z("0x100"),z("0x10000"),z("0x1000000"),z("0x100000000"),z("0x10000000000"),z("0x1000000000000"),z("0x100000000000000"),z("0x10000000000000000");var $=/* @__PURE__ */__name(function createTransferableMessage3(i){var a={};return Object.keys(i).forEach(function(s){var o=i[s];V(o)?a[s]={bytes:o.buffer,byteOffset:o.byteOffset,byteLength:o.byteLength}:a[s]=o}),a},"createTransferableMessage");self.onmessage=function(i){var a=i.data,s=new Uint8Array(a.encrypted.bytes,a.encrypted.byteOffset,a.encrypted.byteLength),o=new Uint32Array(a.key.bytes,a.key.byteOffset,a.key.byteLength/4),u=new Uint32Array(a.iv.bytes,a.iv.byteOffset,a.iv.byteLength/4);new U(s,o,u,function(i,s){self.postMessage($({source:a.source,decrypted:s}),[s.buffer])})}})),iO=uD(nO),rO=/* @__PURE__ */__name(function audioTrackKind_2(i){var a=i.default?"main":"alternative";return i.characteristics&&i.characteristics.indexOf("public.accessibility.describes-video")>=0&&(a="main-desc"),a},"audioTrackKind_"),aO=/* @__PURE__ */__name(function stopLoaders2(i,a){i.abort(),i.pause(),a&&a.activePlaylistLoader&&(a.activePlaylistLoader.pause(),a.activePlaylistLoader=null)},"stopLoaders"),sO=/* @__PURE__ */__name(function startLoaders2(i,a){a.activePlaylistLoader=i,i.load()},"startLoaders"),oO=/* @__PURE__ */__name(function onGroupChanged2(i,a){return function(){var s=a.segmentLoaders,o=s[i],u=s.main,_=a.mediaTypes[i],x=_.activeTrack(),w=_.getActiveGroup(),C=_.activePlaylistLoader,L=_.lastGroup_;w&&L&&w.id===L.id||(_.lastGroup_=w,_.lastTrack_=x,aO(o,_),w&&!w.isMasterPlaylist&&(w.playlistLoader?(o.resyncLoader(),sO(w.playlistLoader,_)):C&&u.resetEverything()))}},"onGroupChanged"),lO=/* @__PURE__ */__name(function onGroupChanging2(i,a){return function(){var s=a.segmentLoaders[i];a.mediaTypes[i].lastGroup_=null,s.abort(),s.pause()}},"onGroupChanging"),cO=/* @__PURE__ */__name(function onTrackChanged2(i,a){return function(){var s=a.masterPlaylistLoader,o=a.segmentLoaders,u=o[i],_=o.main,x=a.mediaTypes[i],w=x.activeTrack(),C=x.getActiveGroup(),L=x.activePlaylistLoader,B=x.lastTrack_;if((!B||!w||B.id!==w.id)&&(x.lastGroup_=C,x.lastTrack_=w,aO(u,x),C)){if(C.isMasterPlaylist){if(!w||!B||w.id===B.id)return;var U=a.vhs.masterPlaylistController_,j=U.selectPlaylist();if(U.media()===j)return;return x.logger_("track change. Switching master audio from "+B.id+" to "+w.id),s.pause(),_.resetEverything(),void U.fastQualityChange_(j)}if("AUDIO"===i){if(!C.playlistLoader)return _.setAudio(!0),void _.resetEverything();u.setAudio(!0),_.setAudio(!1)}L!==C.playlistLoader?(u.track&&u.track(w),u.resetEverything(),sO(C.playlistLoader,x)):sO(C.playlistLoader,x)}}},"onTrackChanged"),uO={AUDIO:/* @__PURE__ */__name(function AUDIO(i,a){return function(){var s=a.segmentLoaders[i],o=a.mediaTypes[i],u=a.blacklistCurrentPlaylist;aO(s,o);var _=o.activeTrack(),x=o.activeGroup(),w=(x.filter(function(i){return i.default})[0]||x[0]).id,C=o.tracks[w];if(_!==C){for(var L in videojs.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),o.tracks)o.tracks[L].enabled=o.tracks[L]===C;o.onTrackChanged()}else u({message:"Problem encountered loading the default audio track."})}},"AUDIO"),SUBTITLES:/* @__PURE__ */__name(function SUBTITLES(i,a){return function(){var s=a.segmentLoaders[i],o=a.mediaTypes[i];videojs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),aO(s,o);var u=o.activeTrack();u&&(u.mode="disabled"),o.onTrackChanged()}},"SUBTITLES")},dO={AUDIO:/* @__PURE__ */__name(function AUDIO(i,a,s){if(a){var o=s.tech,u=s.requestOptions,_=s.segmentLoaders[i];a.on("loadedmetadata",function(){var i=a.media();_.playlist(i,u),(!o.paused()||i.endList&&"none"!==o.preload())&&_.load()}),a.on("loadedplaylist",function(){_.playlist(a.media(),u),o.paused()||_.load()}),a.on("error",uO[i](i,s))}},"AUDIO"),SUBTITLES:/* @__PURE__ */__name(function SUBTITLES(i,a,s){var o=s.tech,u=s.requestOptions,_=s.segmentLoaders[i],x=s.mediaTypes[i];a.on("loadedmetadata",function(){var i=a.media();_.playlist(i,u),_.track(x.activeTrack()),(!o.paused()||i.endList&&"none"!==o.preload())&&_.load()}),a.on("loadedplaylist",function(){_.playlist(a.media(),u),o.paused()||_.load()}),a.on("error",uO[i](i,s))},"SUBTITLES")},hO={AUDIO:/* @__PURE__ */__name(function AUDIO(i,a){var s=a.vhs,o=a.sourceType,u=a.segmentLoaders[i],_=a.requestOptions,x=a.master.mediaGroups,w=a.mediaTypes[i],C=w.groups,L=w.tracks,B=w.logger_,U=a.masterPlaylistLoader,j=tL(U.master);for(var V in x[i]&&0!==Object.keys(x[i]).length||(x[i]={main:{default:{default:!0}}},j&&(x[i].main.default.playlists=U.master.playlists)),x[i])for(var z in C[V]||(C[V]=[]),x[i][V]){var $=x[i][V][z],Y=void 0;if(j?(B("AUDIO group '"+V+"' label '"+z+"' is a master playlist"),$.isMasterPlaylist=!0,Y=null):Y="vhs-json"===o&&$.playlists?new xL($.playlists[0],s,_):$.resolvedUri?new xL($.resolvedUri,s,_):$.playlists&&"dash"===o?new aD($.playlists[0],s,_,U):null,$=videojs.mergeOptions({id:z,playlistLoader:Y},$),dO[i](i,$.playlistLoader,a),C[V].push($),void 0===L[z]){var Z=new videojs.AudioTrack({id:z,kind:rO($),enabled:!1,language:$.language,default:$.default,label:z});L[z]=Z}}u.on("error",uO[i](i,a))},"AUDIO"),SUBTITLES:/* @__PURE__ */__name(function SUBTITLES(i,a){var s=a.tech,o=a.vhs,u=a.sourceType,_=a.segmentLoaders[i],x=a.requestOptions,w=a.master.mediaGroups,C=a.mediaTypes[i],L=C.groups,B=C.tracks,U=a.masterPlaylistLoader;for(var j in w[i])for(var V in L[j]||(L[j]=[]),w[i][j])if(!w[i][j][V].forced){var z=w[i][j][V],$=void 0;if("hls"===u)$=new xL(z.resolvedUri,o,x);else if("dash"===u){if(!z.playlists.filter(function(i){return i.excludeUntil!==1/0}).length)return;$=new aD(z.playlists[0],o,x,U)}else"vhs-json"===u&&($=new xL(z.playlists?z.playlists[0]:z.resolvedUri,o,x));if(z=videojs.mergeOptions({id:V,playlistLoader:$},z),dO[i](i,z.playlistLoader,a),L[j].push(z),void 0===B[V]){var Y=s.addRemoteTextTrack({id:V,kind:"subtitles",default:z.default&&z.autoselect,language:z.language,label:V},!1).track;B[V]=Y}}_.on("error",uO[i](i,a))},"SUBTITLES"),"CLOSED-CAPTIONS":/* @__PURE__ */__name(function CLOSEDCAPTIONS(i,a){var s=a.tech,o=a.master.mediaGroups,u=a.mediaTypes[i],_=u.groups,x=u.tracks;for(var w in o[i])for(var C in _[w]||(_[w]=[]),o[i][w]){var L=o[i][w][C];if(/^(?:CC|SERVICE)/.test(L.instreamId)){var B=s.options_.vhs&&s.options_.vhs.captionServices||{},U={label:C,language:L.language,instreamId:L.instreamId,default:L.default&&L.autoselect};if(B[U.instreamId]&&(U=videojs.mergeOptions(U,B[U.instreamId])),void 0===U.default&&delete U.default,_[w].push(videojs.mergeOptions({id:C},L)),void 0===x[C]){var j=s.addRemoteTextTrack({id:U.instreamId,kind:"captions",default:U.default,language:U.language,label:U.label},!1).track;x[C]=j}}}},"CLOSEDCAPTIONS")},pO=/* @__PURE__ */__name(function groupMatch2(i,a){for(var s=0;s<i.length;s++){if(ZI(a,i[s]))return!0;if(i[s].playlists&&groupMatch2(i[s].playlists,a))return!0}return!1},"groupMatch"),mO=/* @__PURE__ */__name(function activeGroup2(i,a){return function(s){var o=a.masterPlaylistLoader,u=a.mediaTypes[i].groups,_=o.media();if(!_)return null;var x=null;_.attributes[i]&&(x=u[_.attributes[i]]);var w=Object.keys(u);if(!x)if("AUDIO"===i&&w.length>1&&tL(a.master))for(var C=0;C<w.length;C++){var L=u[w[C]];if(pO(L,_)){x=L;break}}else u.main?x=u.main:1===w.length&&(x=u[w[0]]);return void 0===s?x:null!==s&&x&&x.filter(function(i){return i.id===s.id})[0]||null}},"activeGroup"),fO={AUDIO:/* @__PURE__ */__name(function AUDIO(i,a){return function(){var s=a.mediaTypes[i].tracks;for(var o in s)if(s[o].enabled)return s[o];return null}},"AUDIO"),SUBTITLES:/* @__PURE__ */__name(function SUBTITLES(i,a){return function(){var s=a.mediaTypes[i].tracks;for(var o in s)if("showing"===s[o].mode||"hidden"===s[o].mode)return s[o];return null}},"SUBTITLES")},gO=/* @__PURE__ */__name(function getActiveGroup2(i,a){var s=a.mediaTypes;return function(){var a=s[i].activeTrack();return a?s[i].activeGroup(a):null}},"getActiveGroup"),_O=/* @__PURE__ */__name(function setupMediaGroups2(i){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){hO[a](a,i)});var a=i.mediaTypes,s=i.masterPlaylistLoader,o=i.tech,u=i.vhs,_=i.segmentLoaders,x=_.AUDIO,w=_.main;["AUDIO","SUBTITLES"].forEach(function(s){a[s].activeGroup=mO(s,i),a[s].activeTrack=fO[s](s,i),a[s].onGroupChanged=oO(s,i),a[s].onGroupChanging=lO(s,i),a[s].onTrackChanged=cO(s,i),a[s].getActiveGroup=gO(s,i)});var C=a.AUDIO.activeGroup();if(C){var L=(C.filter(function(i){return i.default})[0]||C[0]).id;a.AUDIO.tracks[L].enabled=!0,a.AUDIO.onGroupChanged(),a.AUDIO.onTrackChanged(),a.AUDIO.getActiveGroup().playlistLoader?(w.setAudio(!1),x.setAudio(!0)):w.setAudio(!0)}s.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(i){return a[i].onGroupChanged()})}),s.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(i){return a[i].onGroupChanging()})});var B=/* @__PURE__ */__name(function onAudioTrackChanged2(){a.AUDIO.onTrackChanged(),o.trigger({type:"usage",name:"vhs-audio-change"}),o.trigger({type:"usage",name:"hls-audio-change"})},"onAudioTrackChanged");for(var U in o.audioTracks().addEventListener("change",B),o.remoteTextTracks().addEventListener("change",a.SUBTITLES.onTrackChanged),u.on("dispose",function(){o.audioTracks().removeEventListener("change",B),o.remoteTextTracks().removeEventListener("change",a.SUBTITLES.onTrackChanged)}),o.clearTracks("audio"),a.AUDIO.tracks)o.audioTracks().addTrack(a.AUDIO.tracks[U])},"setupMediaGroups"),yO=/* @__PURE__ */__name(function createMediaTypes2(){var i={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){i[a]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,getActiveGroup:noop,onGroupChanged:noop,onTrackChanged:noop,lastTrack_:null,logger_:_I("MediaGroups["+a+"]")}}),i},"createMediaTypes"),vO=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],bO=/* @__PURE__ */__name(function sumLoaderStat2(i){return this.audioSegmentLoader_[i]+this.mainSegmentLoader_[i]},"sumLoaderStat"),TO=/* @__PURE__ */__name(function shouldSwitchToMedia2(i){var a=i.currentPlaylist,s=i.buffered,o=i.currentTime,u=i.nextPlaylist,_=i.bufferLowWaterLine,x=i.bufferHighWaterLine,w=i.duration,C=i.experimentalBufferBasedABR,L=i.log;if(!u)return videojs.log.warn("We received no playlist to switch to. Please check your stream."),!1;var B="allowing switch "+(a&&a.id||"null")+" -> "+u.id;if(!a)return L(B+" as current playlist is not set"),!0;if(u.id===a.id)return!1;var U=Boolean(TI(s,o).length);if(!a.endList)return U||"number"!=typeof a.partTargetDuration?(L(B+" as current playlist is live"),!0):(L("not "+B+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var j=PI(s,o),V=C?sD.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:sD.MAX_BUFFER_LOW_WATER_LINE;if(w<V)return L(B+" as duration < max low water line ("+w+" < "+V+")"),!0;var z=u.attributes.BANDWIDTH,$=a.attributes.BANDWIDTH;if(z<$&&(!C||j<x)){var Y=B+" as next bandwidth < current bandwidth ("+z+" < "+$+")";return C&&(Y+=" and forwardBuffer < bufferHighWaterLine ("+j+" < "+x+")"),L(Y),!0}if((!C||z>$)&&j>=_){var Z=B+" as forwardBuffer >= bufferLowWaterLine ("+j+" >= "+_+")";return C&&(Z+=" and next bandwidth > current bandwidth ("+z+" > "+$+")"),L(Z),!0}return L("not "+B+" as no switching criteria met"),!1},"shouldSwitchToMedia"),SO=/* @__PURE__ */function(i){function MasterPlaylistController2(a){var s;s=i.call(this)||this;var o=a.src,u=a.handleManifestRedirects,_=a.withCredentials,x=a.tech,w=a.bandwidth,C=a.externVhs,L=a.useCueTags,B=a.blacklistDuration,U=a.enableLowInitialPlaylist,j=a.sourceType,V=a.cacheEncryptionKeys,z=a.experimentalBufferBasedABR,$=a.experimentalLeastPixelDiffSelector,Y=a.captionServices;if(!o)throw new Error("A non-empty playlist URL or JSON manifest string is required");var Z=a.maxPlaylistRetries;null==Z&&(Z=1/0),OR=C,s.experimentalBufferBasedABR=Boolean(z),s.experimentalLeastPixelDiffSelector=Boolean($),s.withCredentials=_,s.tech_=x,s.vhs_=x.vhs,s.sourceType_=j,s.useCueTags_=L,s.blacklistDuration=B,s.maxPlaylistRetries=Z,s.enableLowInitialPlaylist=U,s.useCueTags_&&(s.cueTagsTrack_=s.tech_.addTextTrack("metadata","ad-cues"),s.cueTagsTrack_.inBandMetadataTrackDispatchType=""),s.requestOptions_={withCredentials:_,handleManifestRedirects:u,maxPlaylistRetries:Z,timeout:null},s.on("error",s.pauseLoading),s.mediaTypes_=yO(),s.mediaSource=new Tn.MediaSource,s.handleDurationChange_=s.handleDurationChange_.bind(_assertThisInitialized(s)),s.handleSourceOpen_=s.handleSourceOpen_.bind(_assertThisInitialized(s)),s.handleSourceEnded_=s.handleSourceEnded_.bind(_assertThisInitialized(s)),s.mediaSource.addEventListener("durationchange",s.handleDurationChange_),s.mediaSource.addEventListener("sourceopen",s.handleSourceOpen_),s.mediaSource.addEventListener("sourceended",s.handleSourceEnded_),s.seekable_=videojs.createTimeRanges(),s.hasPlayed_=!1,s.syncController_=new eO(a),s.segmentMetadataTrack_=x.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,s.decrypter_=new iO,s.sourceUpdater_=new WR(s.mediaSource),s.inbandTextTracks_={},s.timelineChangeController_=new tO;var ee={vhs:s.vhs_,parse708captions:a.parse708captions,useDtsForTimestampOffset:a.useDtsForTimestampOffset,captionServices:Y,mediaSource:s.mediaSource,currentTime:s.tech_.currentTime.bind(s.tech_),seekable:/* @__PURE__ */__name(function seekable2(){return s.seekable()},"seekable"),seeking:/* @__PURE__ */__name(function seeking(){return s.tech_.seeking()},"seeking"),duration:/* @__PURE__ */__name(function duration2(){return s.duration()},"duration"),hasPlayed:/* @__PURE__ */__name(function hasPlayed(){return s.hasPlayed_},"hasPlayed"),goalBufferLength:/* @__PURE__ */__name(function goalBufferLength(){return s.goalBufferLength()},"goalBufferLength"),bandwidth:w,syncController:s.syncController_,decrypter:s.decrypter_,sourceType:s.sourceType_,inbandTextTracks:s.inbandTextTracks_,cacheEncryptionKeys:V,sourceUpdater:s.sourceUpdater_,timelineChangeController:s.timelineChangeController_,experimentalExactManifestTimings:a.experimentalExactManifestTimings};s.masterPlaylistLoader_="dash"===s.sourceType_?new aD(o,s.vhs_,s.requestOptions_):new xL(o,s.vhs_,s.requestOptions_),s.setupMasterPlaylistLoaderListeners_(),s.mainSegmentLoader_=new RR(videojs.mergeOptions(ee,{segmentMetadataTrack:s.segmentMetadataTrack_,loaderType:"main"}),a),s.audioSegmentLoader_=new RR(videojs.mergeOptions(ee,{loaderType:"audio"}),a),s.subtitleSegmentLoader_=new KR(videojs.mergeOptions(ee,{loaderType:"vtt",featuresNativeTextTracks:s.tech_.featuresNativeTextTracks,loadVttJs:/* @__PURE__ */__name(function loadVttJs(){return new Promise(function(i,a){function onLoad(){x.off("vttjserror",onError2),i()}function onError2(){x.off("vttjsloaded",onLoad),a()}__name(onLoad,"onLoad"),__name(onError2,"onError"),x.one("vttjsloaded",onLoad),x.one("vttjserror",onError2),x.addWebVttScript_()})},"loadVttJs")}),a),s.setupSegmentLoaderListeners_(),s.experimentalBufferBasedABR&&(s.masterPlaylistLoader_.one("loadedplaylist",function(){return s.startABRTimer_()}),s.tech_.on("pause",function(){return s.stopABRTimer_()}),s.tech_.on("play",function(){return s.startABRTimer_()})),vO.forEach(function(i){s[i+"_"]=bO.bind(_assertThisInitialized(s),i)}),s.logger_=_I("MPC"),s.triggeredFmp4Usage=!1,"none"===s.tech_.preload()?(s.loadOnPlay_=function(){s.loadOnPlay_=null,s.masterPlaylistLoader_.load()},s.tech_.one("play",s.loadOnPlay_)):s.masterPlaylistLoader_.load(),s.timeToLoadedData__=-1,s.mainAppendsToLoadedData__=-1,s.audioAppendsToLoadedData__=-1;var ie="none"===s.tech_.preload()?"play":"loadstart";return s.tech_.one(ie,function(){var i=Date.now();s.tech_.one("loadeddata",function(){s.timeToLoadedData__=Date.now()-i,s.mainAppendsToLoadedData__=s.mainSegmentLoader_.mediaAppends,s.audioAppendsToLoadedData__=s.audioSegmentLoader_.mediaAppends})}),s}_inheritsLoose(MasterPlaylistController2,i),__name(MasterPlaylistController2,"MasterPlaylistController");var a=MasterPlaylistController2.prototype;return a.mainAppendsToLoadedData_=/* @__PURE__ */__name(function mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__},"mainAppendsToLoadedData_"),a.audioAppendsToLoadedData_=/* @__PURE__ */__name(function audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__},"audioAppendsToLoadedData_"),a.appendsToLoadedData_=/* @__PURE__ */__name(function appendsToLoadedData_(){var i=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return-1===i||-1===a?-1:i+a},"appendsToLoadedData_"),a.timeToLoadedData_=/* @__PURE__ */__name(function timeToLoadedData_(){return this.timeToLoadedData__},"timeToLoadedData_"),a.checkABR_=/* @__PURE__ */__name(function checkABR_(i){void 0===i&&(i="abr");var a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,i)},"checkABR_"),a.switchMedia_=/* @__PURE__ */__name(function switchMedia_(i,a,s){var o=this.media(),u=o&&(o.id||o.uri),_=i.id||i.uri;u&&u!==_&&(this.logger_("switch media "+u+" -> "+_+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(i,s)},"switchMedia_"),a.startABRTimer_=/* @__PURE__ */__name(function startABRTimer_(){var i=this;this.stopABRTimer_(),this.abrTimer_=Tn.setInterval(function(){return i.checkABR_()},250)},"startABRTimer_"),a.stopABRTimer_=/* @__PURE__ */__name(function stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Tn.clearInterval(this.abrTimer_),this.abrTimer_=null)},"stopABRTimer_"),a.getAudioTrackPlaylists_=/* @__PURE__ */__name(function getAudioTrackPlaylists_(){var i=this.master(),a=i&&i.playlists||[];if(!i||!i.mediaGroups||!i.mediaGroups.AUDIO)return a;var s,o=i.mediaGroups.AUDIO,u=Object.keys(o);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{var _=o.main||u.length&&o[u[0]];for(var x in _)if(_[x].default){s={label:x};break}}if(!s)return a;var w=[];for(var C in o)if(o[C][s.label]){var L=o[C][s.label];if(L.playlists&&L.playlists.length)w.push.apply(w,L.playlists);else if(L.uri)w.push(L);else if(i.playlists.length)for(var B=0;B<i.playlists.length;B++){var U=i.playlists[B];U.attributes&&U.attributes.AUDIO&&U.attributes.AUDIO===C&&w.push(U)}}return w.length?w:a},"getAudioTrackPlaylists_"),a.setupMasterPlaylistLoaderListeners_=/* @__PURE__ */__name(function setupMasterPlaylistLoaderListeners_(){var i=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=i.masterPlaylistLoader_.media(),s=1.5*a.targetDuration*1e3;JI(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,a.endList&&"none"!==i.tech_.preload()&&(i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load()),_O({sourceType:i.sourceType_,segmentLoaders:{AUDIO:i.audioSegmentLoader_,SUBTITLES:i.subtitleSegmentLoader_,main:i.mainSegmentLoader_},tech:i.tech_,requestOptions:i.requestOptions_,masterPlaylistLoader:i.masterPlaylistLoader_,vhs:i.vhs_,master:i.master(),mediaTypes:i.mediaTypes_,blacklistCurrentPlaylist:i.blacklistCurrentPlaylist.bind(i)}),i.triggerPresenceUsage_(i.master(),a),i.setupFirstPlay(),!i.mediaTypes_.AUDIO.activePlaylistLoader||i.mediaTypes_.AUDIO.activePlaylistLoader.media()?i.trigger("selectedinitialmedia"):i.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){i.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){i.loadOnPlay_&&i.tech_.off("play",i.loadOnPlay_);var a=i.masterPlaylistLoader_.media();if(!a){var s;if(i.excludeUnsupportedVariants_(),i.enableLowInitialPlaylist&&(s=i.selectInitialPlaylist()),s||(s=i.selectPlaylist()),!s||!i.shouldSwitchToMedia_(s))return;if(i.initialMedia_=s,i.switchMedia_(i.initialMedia_,"initial"),!("vhs-json"===i.sourceType_&&i.initialMedia_.segments))return;a=i.initialMedia_}i.handleUpdatedMediaPlaylist(a)}),this.masterPlaylistLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){i.mainSegmentLoader_.abort(),i.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=i.masterPlaylistLoader_.media(),s=1.5*a.targetDuration*1e3;JI(i.masterPlaylistLoader_.master,i.masterPlaylistLoader_.media())?i.requestOptions_.timeout=0:i.requestOptions_.timeout=s,i.masterPlaylistLoader_.load(),i.mainSegmentLoader_.playlist(a,i.requestOptions_),i.mainSegmentLoader_.load(),i.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=i.masterPlaylistLoader_.media();"playlist-unchanged"!==a.lastExcludeReason_&&(i.stuckAtPlaylistEnd_(a)&&(i.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),i.tech_.trigger("playliststuck")))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){i.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),i.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},"setupMasterPlaylistLoaderListeners_"),a.handleUpdatedMediaPlaylist=/* @__PURE__ */__name(function handleUpdatedMediaPlaylist(i){this.useCueTags_&&this.updateAdCues_(i),this.mainSegmentLoader_.playlist(i,this.requestOptions_),this.updateDuration(!i.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},"handleUpdatedMediaPlaylist"),a.triggerPresenceUsage_=/* @__PURE__ */__name(function triggerPresenceUsage_(i,a){var s=i.mediaGroups||{},o=!0,u=Object.keys(s.AUDIO);for(var _ in s.AUDIO)for(var x in s.AUDIO[_]){s.AUDIO[_][x].uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),OR.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),u.length&&Object.keys(s.AUDIO[u[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},"triggerPresenceUsage_"),a.shouldSwitchToMedia_=/* @__PURE__ */__name(function shouldSwitchToMedia_(i){var a=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),u=this.bufferHighWaterLine(),_=this.tech_.buffered();return TO({buffered:_,currentTime:s,currentPlaylist:a,nextPlaylist:i,bufferLowWaterLine:o,bufferHighWaterLine:u,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},"shouldSwitchToMedia_"),a.setupSegmentLoaderListeners_=/* @__PURE__ */__name(function setupSegmentLoaderListeners_(){var i=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){i.checkABR_("bandwidthupdate"),i.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){i.experimentalBufferBasedABR&&i.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){i.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){i.blacklistCurrentPlaylist(i.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){i.error=i.mainSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){i.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),i.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){i.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){i.error=i.audioSegmentLoader_.error_,i.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){i.logger_("main segment loader ended"),i.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(a){i.experimentalBufferBasedABR||(i.delegateLoaders_("all",["abort"]),i.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))});var a=/* @__PURE__ */__name(function updateCodecs2(){if(!i.sourceUpdater_.hasCreatedSourceBuffers())return i.tryToCreateSourceBuffers_();var a=i.getCodecsOrExclude_();a&&i.sourceUpdater_.addOrChangeSourceBuffers(a)},"updateCodecs");this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){i.triggeredFmp4Usage||(i.tech_.trigger({type:"usage",name:"vhs-fmp4"}),i.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){i.logger_("audioSegmentLoader ended"),i.onEndOfStream()})},"setupSegmentLoaderListeners_"),a.mediaSecondsLoaded_=/* @__PURE__ */__name(function mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},"mediaSecondsLoaded_"),a.load=/* @__PURE__ */__name(function load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},"load"),a.smoothQualityChange_=/* @__PURE__ */__name(function smoothQualityChange_(i){void 0===i&&(i=this.selectPlaylist()),this.fastQualityChange_(i)},"smoothQualityChange_"),a.fastQualityChange_=/* @__PURE__ */__name(function fastQualityChange_(i){var a=this;void 0===i&&(i=this.selectPlaylist()),i!==this.masterPlaylistLoader_.media()?(this.switchMedia_(i,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){videojs.browser.IE_VERSION||videojs.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},"fastQualityChange_"),a.play=/* @__PURE__ */__name(function play(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var i=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<i.start(0)?this.tech_.setCurrentTime(i.end(i.length-1)):void 0}},"play"),a.setupFirstPlay=/* @__PURE__ */__name(function setupFirstPlay(){var i=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var s=this.seekable();if(!s.length)return!1;if(videojs.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){i.trigger("firstplay"),i.tech_.setCurrentTime(s.end(0)),i.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},"setupFirstPlay"),a.handleSourceOpen_=/* @__PURE__ */__name(function handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var i=this.tech_.play();void 0!==i&&"function"==typeof i.then&&i.then(null,function(i){})}this.trigger("sourceopen")},"handleSourceOpen_"),a.handleSourceEnded_=/* @__PURE__ */__name(function handleSourceEnded_(){if(this.inbandTextTracks_.metadataTrack_){var i=this.inbandTextTracks_.metadataTrack_.cues;if(i&&i.length){var a=this.duration();i[i.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}}},"handleSourceEnded_"),a.handleDurationChange_=/* @__PURE__ */__name(function handleDurationChange_(){this.tech_.trigger("durationchange")},"handleDurationChange_"),a.onEndOfStream=/* @__PURE__ */__name(function onEndOfStream(){var i=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var a=this.mainSegmentLoader_.getCurrentMediaInfo_();i=!a||a.hasVideo?i&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}i&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},"onEndOfStream"),a.stuckAtPlaylistEnd_=/* @__PURE__ */__name(function stuckAtPlaylistEnd_(i){if(!this.seekable().length)return!1;var a=this.syncController_.getExpiredTime(i,this.duration());if(null===a)return!1;var s=OR.Playlist.playlistEnd(i,a),o=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return s-o<=vI;var _=u.end(u.length-1);return _-o<=vI&&s-_<=vI},"stuckAtPlaylistEnd_"),a.blacklistCurrentPlaylist=/* @__PURE__ */__name(function blacklistCurrentPlaylist(i,a){void 0===i&&(i={});var s=i.playlist||this.masterPlaylistLoader_.media();if(a=a||i.blacklistDuration||this.blacklistDuration,!s)return this.error=i,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));s.playlistErrors_++;var o,u=this.masterPlaylistLoader_.master.playlists,_=u.filter(qI),x=1===_.length&&_[0]===s;if(1===u.length&&a!==1/0)return videojs.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(x);if(x){var w=!1;u.forEach(function(i){if(i!==s){var a=i.excludeUntil;void 0!==a&&a!==1/0&&(w=!0,delete i.excludeUntil)}}),w&&(videojs.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}o=s.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*a,s.excludeUntil=o,i.reason&&(s.lastExcludeReason_=i.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var C=this.selectPlaylist();if(!C)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var L=i.internal?this.logger_:videojs.log.warn,B=i.message?" "+i.message:"";L((i.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+B+" Switching to playlist "+C.id+"."),C.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),C.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var U=C.targetDuration/2*1e3||5e3,j="number"==typeof C.lastRequest&&Date.now()-C.lastRequest<=U;return this.switchMedia_(C,"exclude",x||j)},"blacklistCurrentPlaylist"),a.pauseLoading=/* @__PURE__ */__name(function pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},"pauseLoading"),a.delegateLoaders_=/* @__PURE__ */__name(function delegateLoaders_(i,a){var s=this,o=[],u="all"===i;(u||"main"===i)&&o.push(this.masterPlaylistLoader_);var _=[];(u||"audio"===i)&&_.push("AUDIO"),(u||"subtitle"===i)&&(_.push("CLOSED-CAPTIONS"),_.push("SUBTITLES")),_.forEach(function(i){var a=s.mediaTypes_[i]&&s.mediaTypes_[i].activePlaylistLoader;a&&o.push(a)}),["main","audio","subtitle"].forEach(function(a){var u=s[a+"SegmentLoader_"];!u||i!==a&&"all"!==i||o.push(u)}),o.forEach(function(i){return a.forEach(function(a){"function"==typeof i[a]&&i[a]()})})},"delegateLoaders_"),a.setCurrentTime=/* @__PURE__ */__name(function setCurrentTime(i){var a=TI(this.tech_.buffered(),i);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?a&&a.length?i:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},"setCurrentTime"),a.duration=/* @__PURE__ */__name(function duration2(){if(!this.masterPlaylistLoader_)return 0;var i=this.masterPlaylistLoader_.media();return i?i.endList?this.mediaSource?this.mediaSource.duration:OR.Playlist.duration(i):1/0:0},"duration"),a.seekable=/* @__PURE__ */__name(function seekable2(){return this.seekable_},"seekable"),a.onSyncInfoUpdate_=/* @__PURE__ */__name(function onSyncInfoUpdate_(){var i;if(this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(a){var s=this.syncController_.getExpiredTime(a,this.duration());if(null!==s){var o=this.masterPlaylistLoader_.master,u=OR.Playlist.seekable(a,s,OR.Playlist.liveEdgeDelay(o,a));if(0!==u.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(s=this.syncController_.getExpiredTime(a,this.duration())))return;if(0===(i=OR.Playlist.seekable(a,s,OR.Playlist.liveEdgeDelay(o,a))).length)return}var _,x;this.seekable_&&this.seekable_.length&&(_=this.seekable_.end(0),x=this.seekable_.start(0)),i?i.start(0)>u.end(0)||u.start(0)>i.end(0)?this.seekable_=u:this.seekable_=videojs.createTimeRanges([[i.start(0)>u.start(0)?i.start(0):u.start(0),i.end(0)<u.end(0)?i.end(0):u.end(0)]]):this.seekable_=u,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===_&&this.seekable_.start(0)===x||(this.logger_("seekable updated ["+AI(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},"onSyncInfoUpdate_"),a.updateDuration=/* @__PURE__ */__name(function updateDuration(i){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,i),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(i){var a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1))}else{var s=this.tech_.buffered(),o=OR.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)}},"updateDuration"),a.dispose=/* @__PURE__ */__name(function dispose(){var i=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var s=i.mediaTypes_[a].groups;for(var o in s)s[o].forEach(function(i){i.playlistLoader&&i.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},"dispose"),a.master=/* @__PURE__ */__name(function master(){return this.masterPlaylistLoader_.master},"master"),a.media=/* @__PURE__ */__name(function media(){return this.masterPlaylistLoader_.media()||this.initialMedia_},"media"),a.areMediaTypesKnown_=/* @__PURE__ */__name(function areMediaTypesKnown_(){var i=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=!i||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!a||!s)},"areMediaTypesKnown_"),a.getCodecsOrExclude_=/* @__PURE__ */__name(function getCodecsOrExclude_(){var i=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();a.video=a.main;var o=JD(this.master(),s),u={},_=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(u.video=o.video||a.main.videoCodec||"avc1.4d400d"),a.main.isMuxed&&(u.video+=","+(o.audio||a.main.audioCodec||Vx)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||_)&&(u.audio=o.audio||a.main.audioCodec||a.audio.audioCodec||Vx,a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4),u.audio||u.video){var x,w=/* @__PURE__ */__name(function supportFunction2(i,a){return i?Ux(a):jx(a)},"supportFunction"),C={};if(["video","audio"].forEach(function(i){if(u.hasOwnProperty(i)&&!w(a[i].isFmp4,u[i])){var s=a[i].isFmp4?"browser":"muxer";C[s]=C[s]||[],C[s].push(u[i]),"audio"===i&&(x=s)}}),_&&x&&s.attributes.AUDIO){var L=s.attributes.AUDIO;this.master().playlists.forEach(function(i){(i.attributes&&i.attributes.AUDIO)===L&&i!==s&&(i.excludeUntil=1/0)}),this.logger_("excluding audio group "+L+" as "+x+' does not support codec(s): "'+u.audio+'"')}if(!Object.keys(C).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var B=[];if(["video","audio"].forEach(function(a){var s=(Rx(i.sourceUpdater_.codecs[a]||"")[0]||{}).type,o=(Rx(u[a]||"")[0]||{}).type;s&&o&&s.toLowerCase()!==o.toLowerCase()&&B.push('"'+i.sourceUpdater_.codecs[a]+'" -> "'+u[a]+'"')}),B.length)return void this.blacklistCurrentPlaylist({playlist:s,message:"Codec switching not supported: "+B.join(", ")+".",blacklistDuration:1/0,internal:!0})}return u}var U=Object.keys(C).reduce(function(i,a){return i&&(i+=", "),i+=a+' does not support codec(s): "'+C[a].join(",")+'"'},"")+".";this.blacklistCurrentPlaylist({playlist:s,internal:!0,message:U,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:s,message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},"getCodecsOrExclude_"),a.tryToCreateSourceBuffers_=/* @__PURE__ */__name(function tryToCreateSourceBuffers_(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var i=this.getCodecsOrExclude_();if(i){this.sourceUpdater_.createSourceBuffers(i);var a=[i.video,i.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}}},"tryToCreateSourceBuffers_"),a.excludeUnsupportedVariants_=/* @__PURE__ */__name(function excludeUnsupportedVariants_(){var i=this,a=this.master().playlists,s=[];Object.keys(a).forEach(function(o){var u=a[o];if(-1===s.indexOf(u.id)){s.push(u.id);var _=JD(i.master,u),x=[];!_.audio||jx(_.audio)||Ux(_.audio)||x.push("audio codec "+_.audio),!_.video||jx(_.video)||Ux(_.video)||x.push("video codec "+_.video),_.text&&"stpp.ttml.im1t"===_.text&&x.push("text codec "+_.text),x.length&&(u.excludeUntil=1/0,i.logger_("excluding "+u.id+" for unsupported: "+x.join(", ")))}})},"excludeUnsupportedVariants_"),a.excludeIncompatibleVariants_=/* @__PURE__ */__name(function excludeIncompatibleVariants_(i){var a=this,s=[],o=this.master().playlists,u=KD(Rx(i)),_=YD(u),x=u.video&&Rx(u.video)[0]||null,w=u.audio&&Rx(u.audio)[0]||null;Object.keys(o).forEach(function(i){var u=o[i];if(-1===s.indexOf(u.id)&&u.excludeUntil!==1/0){s.push(u.id);var C=[],L=JD(a.masterPlaylistLoader_.master,u),B=YD(L);if(L.audio||L.video){if(B!==_&&C.push('codec count "'+B+'" !== "'+_+'"'),!a.sourceUpdater_.canChangeType()){var U=L.video&&Rx(L.video)[0]||null,j=L.audio&&Rx(L.audio)[0]||null;U&&x&&U.type.toLowerCase()!==x.type.toLowerCase()&&C.push('video codec "'+U.type+'" !== "'+x.type+'"'),j&&w&&j.type.toLowerCase()!==w.type.toLowerCase()&&C.push('audio codec "'+j.type+'" !== "'+w.type+'"')}C.length&&(u.excludeUntil=1/0,a.logger_("blacklisting "+u.id+": "+C.join(" && ")))}}})},"excludeIncompatibleVariants_"),a.updateAdCues_=/* @__PURE__ */__name(function updateAdCues_(i){var a=0,s=this.seekable();s.length&&(a=s.start(0)),JR(i,this.cueTagsTrack_,a)},"updateAdCues_"),a.goalBufferLength=/* @__PURE__ */__name(function goalBufferLength(){var i=this.tech_.currentTime(),a=sD.GOAL_BUFFER_LENGTH,s=sD.GOAL_BUFFER_LENGTH_RATE,o=Math.max(a,sD.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+i*s,o)},"goalBufferLength"),a.bufferLowWaterLine=/* @__PURE__ */__name(function bufferLowWaterLine(){var i=this.tech_.currentTime(),a=sD.BUFFER_LOW_WATER_LINE,s=sD.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(a,sD.MAX_BUFFER_LOW_WATER_LINE),u=Math.max(a,sD.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+i*s,this.experimentalBufferBasedABR?u:o)},"bufferLowWaterLine"),a.bufferHighWaterLine=/* @__PURE__ */__name(function bufferHighWaterLine(){return sD.BUFFER_HIGH_WATER_LINE},"bufferHighWaterLine"),MasterPlaylistController2}(videojs.EventTarget),xO=/* @__PURE__ */__name(function enableFunction2(i,a,s){return function(o){var u=i.master.playlists[a],_=WI(u),x=qI(u);return void 0===o?x:(o?delete u.disabled:u.disabled=!0,o===x||_||(s(),o?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),o)}},"enableFunction"),wO=/* @__PURE__ */__name(function Representation2(i,a,s){var o=i.masterPlaylistController_,u=o[(i.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);if(a.attributes){var _=a.attributes.RESOLUTION;this.width=_&&_.width,this.height=_&&_.height,this.bandwidth=a.attributes.BANDWIDTH,this.frameRate=a.attributes["FRAME-RATE"]}this.codecs=JD(o.master(),a),this.playlist=a,this.id=s,this.enabled=xO(i.playlists,a.id,u)},"Representation"),AO=/* @__PURE__ */__name(function renditionSelectionMixin2(i){i.representations=function(){var a=i.masterPlaylistController_.master(),s=tL(a)?i.masterPlaylistController_.getAudioTrackPlaylists_():a.playlists;return s?s.filter(function(i){return!WI(i)}).map(function(a,s){return new wO(i,a,a.id)}):[]}},"renditionSelectionMixin"),CO=["seeking","seeked","pause","playing","error"],EO=/* @__PURE__ */function(){function PlaybackWatcher2(i){var a=this;this.masterPlaylistController_=i.masterPlaylistController,this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=i.liveRangeSafeTimeDelta,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=_I("PlaybackWatcher"),this.logger_("initialize");var s=/* @__PURE__ */__name(function playHandler2(){return a.monitorCurrentTime_()},"playHandler"),o=/* @__PURE__ */__name(function canPlayHandler2(){return a.monitorCurrentTime_()},"canPlayHandler"),u=/* @__PURE__ */__name(function waitingHandler2(){return a.techWaiting_()},"waitingHandler"),_=/* @__PURE__ */__name(function cancelTimerHandler2(){return a.cancelTimer_()},"cancelTimerHandler"),x=this.masterPlaylistController_,w=["main","subtitle","audio"],C={};w.forEach(function(i){C[i]={reset:/* @__PURE__ */__name(function reset2(){return a.resetSegmentDownloads_(i)},"reset"),updateend:/* @__PURE__ */__name(function updateend(){return a.checkSegmentDownloads_(i)},"updateend")},x[i+"SegmentLoader_"].on("appendsdone",C[i].updateend),x[i+"SegmentLoader_"].on("playlistupdate",C[i].reset),a.tech_.on(["seeked","seeking"],C[i].reset)});var L=/* @__PURE__ */__name(function setSeekingHandlers2(i){["main","audio"].forEach(function(s){x[s+"SegmentLoader_"][i]("appended",a.seekingAppendCheck_)})},"setSeekingHandlers");this.seekingAppendCheck_=function(){a.fixesBadSeeks_()&&(a.consecutiveUpdates=0,a.lastRecordedTime=a.tech_.currentTime(),L("off"))},this.clearSeekingAppendCheck_=function(){return L("off")},this.watchForBadSeeking_=function(){a.clearSeekingAppendCheck_(),L("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",u),this.tech_.on(CO,_),this.tech_.on("canplay",o),this.tech_.one("play",s),this.dispose=function(){a.clearSeekingAppendCheck_(),a.logger_("dispose"),a.tech_.off("waiting",u),a.tech_.off(CO,_),a.tech_.off("canplay",o),a.tech_.off("play",s),a.tech_.off("seeking",a.watchForBadSeeking_),a.tech_.off("seeked",a.clearSeekingAppendCheck_),w.forEach(function(i){x[i+"SegmentLoader_"].off("appendsdone",C[i].updateend),x[i+"SegmentLoader_"].off("playlistupdate",C[i].reset),a.tech_.off(["seeked","seeking"],C[i].reset)}),a.checkCurrentTimeTimeout_&&Tn.clearTimeout(a.checkCurrentTimeTimeout_),a.cancelTimer_()}}__name(PlaybackWatcher2,"PlaybackWatcher");var i=PlaybackWatcher2.prototype;return i.monitorCurrentTime_=/* @__PURE__ */__name(function monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Tn.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Tn.setTimeout(this.monitorCurrentTime_.bind(this),250)},"monitorCurrentTime_"),i.resetSegmentDownloads_=/* @__PURE__ */__name(function resetSegmentDownloads_(i){var a=this.masterPlaylistController_[i+"SegmentLoader_"];this[i+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+i+" loader"),this[i+"StalledDownloads_"]=0,this[i+"Buffered_"]=a.buffered_()},"resetSegmentDownloads_"),i.checkSegmentDownloads_=/* @__PURE__ */__name(function checkSegmentDownloads_(i){var a=this.masterPlaylistController_,s=a[i+"SegmentLoader_"],o=s.buffered_(),u=MI(this[i+"Buffered_"],o);this[i+"Buffered_"]=o,u?this.resetSegmentDownloads_(i):(this[i+"StalledDownloads_"]++,this.logger_("found #"+this[i+"StalledDownloads_"]+" "+i+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:EI(o)}),this[i+"StalledDownloads_"]<10||(this.logger_(i+" loader stalled download exclusion"),this.resetSegmentDownloads_(i),this.tech_.trigger({type:"usage",name:"vhs-"+i+"-download-exclusion"}),"subtitle"!==i&&a.blacklistCurrentPlaylist({message:"Excessive "+i+" segment downloading detected."},1/0)))},"checkSegmentDownloads_"),i.checkCurrentTime_=/* @__PURE__ */__name(function checkCurrentTime_(){if(!this.tech_.paused()&&!this.tech_.seeking()){var i=this.tech_.currentTime(),a=this.tech_.buffered();if(this.lastRecordedTime===i&&(!a.length||i+vI>=a.end(a.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&i===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):i===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=i)}},"checkCurrentTime_"),i.cancelTimer_=/* @__PURE__ */__name(function cancelTimer_(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},"cancelTimer_"),i.fixesBadSeeks_=/* @__PURE__ */__name(function fixesBadSeeks_(){if(!this.tech_.seeking())return!1;var i,a=this.seekable(),s=this.tech_.currentTime();this.afterSeekableWindow_(a,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(i=a.end(a.length-1));if(this.beforeSeekableWindow_(a,s)){var o=a.start(0);i=o+(o===a.end(0)?0:vI)}if(void 0!==i)return this.logger_("Trying to seek outside of seekable at time "+s+" with seekable range "+AI(a)+". Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0;for(var u=this.masterPlaylistController_.sourceUpdater_,_=this.tech_.buffered(),x=u.audioBuffer?u.audioBuffered():null,w=u.videoBuffer?u.videoBuffered():null,C=this.media(),L=C.partTargetDuration?C.partTargetDuration:2*(C.targetDuration-yI),B=[x,w],U=0;U<B.length;U++){if(B[U])if(PI(B[U],s)<L)return!1}var j=SI(_,s);return 0!==j.length&&(i=j.start(0)+vI,this.logger_("Buffered region starts ("+j.start(0)+")  just beyond seek point ("+s+"). Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0)},"fixesBadSeeks_"),i.waiting_=/* @__PURE__ */__name(function waiting_(){if(!this.techWaiting_()){var i=this.tech_.currentTime(),a=this.tech_.buffered(),s=TI(a,i);return s.length&&i+3<=s.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(i),this.logger_("Stopped at "+i+" while inside a buffered region ["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},"waiting_"),i.techWaiting_=/* @__PURE__ */__name(function techWaiting_(){var i=this.seekable(),a=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(i,a)){var s=i.end(i.length-1);return this.logger_("Fell out of live window at time "+a+". Seeking to live point (seekable end) "+s),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var o=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,u=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:o.audioBuffered(),videoBuffered:o.videoBuffered(),currentTime:a}))return this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var _=SI(u,a);if(_.length>0){var x=_.start(0)-a;return this.logger_("Stopped at "+a+", setting timer for "+x+", seeking to "+_.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*x,a),!0}return!1},"techWaiting_"),i.afterSeekableWindow_=/* @__PURE__ */__name(function afterSeekableWindow_(i,a,s,o){if(void 0===o&&(o=!1),!i.length)return!1;var u=i.end(i.length-1)+vI;return!s.endList&&o&&(u=i.end(i.length-1)+3*s.targetDuration),a>u},"afterSeekableWindow_"),i.beforeSeekableWindow_=/* @__PURE__ */__name(function beforeSeekableWindow_(i,a){return!!(i.length&&i.start(0)>0&&a<i.start(0)-this.liveRangeSafeTimeDelta)},"beforeSeekableWindow_"),i.videoUnderflow_=/* @__PURE__ */__name(function videoUnderflow_(i){var a=i.videoBuffered,s=i.audioBuffered,o=i.currentTime;if(a){var u;if(a.length&&s.length){var _=TI(a,o-3),x=TI(a,o),w=TI(s,o);w.length&&!x.length&&_.length&&(u={start:_.end(0),end:w.end(0)})}else{SI(a,o).length||(u=this.gapFromVideoUnderflow_(a,o))}return!!u&&(this.logger_("Encountered a gap in video from "+u.start+" to "+u.end+". Seeking to current time "+o),!0)}},"videoUnderflow_"),i.skipTheGap_=/* @__PURE__ */__name(function skipTheGap_(i){var a=this.tech_.buffered(),s=this.tech_.currentTime(),o=SI(a,s);this.cancelTimer_(),0!==o.length&&s===i&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",i,"nextRange start:",o.start(0)),this.tech_.setCurrentTime(o.start(0)+yI),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},"skipTheGap_"),i.gapFromVideoUnderflow_=/* @__PURE__ */__name(function gapFromVideoUnderflow_(i,a){for(var s=xI(i),o=0;o<s.length;o++){var u=s.start(o),_=s.end(o);if(a-u<4&&a-u>2)return{start:u,end:_}}return null},"gapFromVideoUnderflow_"),PlaybackWatcher2}(),MO={errorInterval:30,getSource:/* @__PURE__ */__name(function getSource(i){return i(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())},"getSource")},kO=/* @__PURE__ */__name(function initPlugin2(i,a){var s=0,o=0,u=videojs.mergeOptions(MO,a);i.ready(function(){i.trigger({type:"usage",name:"vhs-error-reload-initialized"}),i.trigger({type:"usage",name:"hls-error-reload-initialized"})});var _=/* @__PURE__ */__name(function loadedMetadataHandler2(){o&&i.currentTime(o)},"loadedMetadataHandler"),x=/* @__PURE__ */__name(function setSource3(a){null!=a&&(o=i.duration()!==1/0&&i.currentTime()||0,i.one("loadedmetadata",_),i.src(a),i.trigger({type:"usage",name:"vhs-error-reload"}),i.trigger({type:"usage",name:"hls-error-reload"}),i.play())},"setSource"),w=/* @__PURE__ */__name(function errorHandler2(){return Date.now()-s<1e3*u.errorInterval?(i.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void i.trigger({type:"usage",name:"hls-error-reload-canceled"})):u.getSource&&"function"==typeof u.getSource?(s=Date.now(),u.getSource.call(i,x)):void videojs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},"errorHandler"),C=/* @__PURE__ */__name(function cleanupEvents2(){i.off("loadedmetadata",_),i.off("error",w),i.off("dispose",cleanupEvents2)},"cleanupEvents"),L=/* @__PURE__ */__name(function reinitPlugin2(a){C(),initPlugin2(i,a)},"reinitPlugin");i.on("error",w),i.on("dispose",C),i.reloadSourceOnError=L},"initPlugin"),PO=/* @__PURE__ */__name(function reloadSourceOnError2(i){kO(this,i)},"reloadSourceOnError"),IO="2.16.3",LO={PlaylistLoader:xL,Playlist:nL,utils:UL,STANDARD_PLAYLIST_SELECTOR:sR,INITIAL_PLAYLIST_SELECTOR:cR,lastBandwidthSelector:sR,movingAverageBandwidthSelector:oR,comparePlaylistBandwidth:iR,comparePlaylistResolution:rR,xhr:EL()};Object.keys(sD).forEach(function(i){Object.defineProperty(LO,i,{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),sD[i]},"get"),set:/* @__PURE__ */__name(function set2(a){videojs.log.warn("using Vhs."+i+" is UNSAFE be sure you know what you are doing"),"number"!=typeof a||a<0?videojs.log.warn("value of Vhs."+i+" must be greater than or equal to 0"):sD[i]=a},"set")})});var DO="videojs-vhs",RO=/* @__PURE__ */__name(function handleVhsMediaChange2(i,a){for(var s=a.media(),o=-1,u=0;u<i.length;u++)if(i[u].id===s.id){o=u;break}i.selectedIndex_=o,i.trigger({selectedIndex:o,type:"change"})},"handleVhsMediaChange"),OO=/* @__PURE__ */__name(function handleVhsLoadedMetadata2(i,a){a.representations().forEach(function(a){i.addQualityLevel(a)}),RO(i,a.playlists)},"handleVhsLoadedMetadata");LO.canPlaySource=function(){return videojs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var NO=/* @__PURE__ */__name(function emeKeySystems2(i,a,s){if(!i)return i;var o={};a&&a.attributes&&a.attributes.CODECS&&(o=KD(Rx(a.attributes.CODECS))),s&&s.attributes&&s.attributes.CODECS&&(o.audio=s.attributes.CODECS);var u=Fx(o.video),_=Fx(o.audio),x={};for(var w in i)x[w]={},_&&(x[w].audioContentType=_),u&&(x[w].videoContentType=u),a.contentProtection&&a.contentProtection[w]&&a.contentProtection[w].pssh&&(x[w].pssh=a.contentProtection[w].pssh),"string"==typeof i[w]&&(x[w].url=i[w]);return videojs.mergeOptions(i,x)},"emeKeySystems"),BO=/* @__PURE__ */__name(function getAllPsshKeySystemsOptions2(i,a){return i.reduce(function(i,s){if(!s.contentProtection)return i;var o=a.reduce(function(i,a){var o=s.contentProtection[a];return o&&o.pssh&&(i[a]={pssh:o.pssh}),i},{});return Object.keys(o).length&&i.push(o),i},[])},"getAllPsshKeySystemsOptions"),FO=/* @__PURE__ */__name(function waitForKeySessionCreation2(i){var a=i.player,s=i.sourceKeySystems,o=i.audioMedia,u=i.mainPlaylists;if(!a.eme.initializeMediaKeys)return Promise.resolve();var _=o?u.concat([o]):u,x=BO(_,Object.keys(s)),w=[],C=[];return x.forEach(function(i){C.push(new Promise(function(i,s){a.tech_.one("keysessioncreated",i)})),w.push(new Promise(function(s,o){a.eme.initializeMediaKeys({keySystems:i},function(i){i?o(i):s()})}))}),Promise.race([Promise.all(w),Promise.race(C)])},"waitForKeySessionCreation"),UO=/* @__PURE__ */__name(function setupEmeOptions2(i){var a=i.player,s=i.sourceKeySystems,o=i.media,u=i.audioMedia,_=NO(s,o,u);return!!_&&(a.currentSource().keySystems=_,!(_&&!a.eme)||(videojs.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},"setupEmeOptions"),jO=/* @__PURE__ */__name(function getVhsLocalStorage2(){if(!Tn.localStorage)return null;var i=Tn.localStorage.getItem(DO);if(!i)return null;try{return JSON.parse(i)}catch(a){return null}},"getVhsLocalStorage"),VO=/* @__PURE__ */__name(function updateVhsLocalStorage2(i){if(!Tn.localStorage)return!1;var a=jO();a=a?videojs.mergeOptions(a,i):i;try{Tn.localStorage.setItem(DO,JSON.stringify(a))}catch(s){return!1}return a},"updateVhsLocalStorage"),zO=/* @__PURE__ */__name(function expandDataUri2(i){return 0===i.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i},"expandDataUri");LO.supportsNativeHls=function(){if(!An||!An.createElement)return!1;var i=An.createElement("video");if(!videojs.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(a){return/maybe|probably/i.test(i.canPlayType(a))})}(),LO.supportsNativeDash=!!(An&&An.createElement&&videojs.getTech("Html5").isSupported())&&/maybe|probably/i.test(An.createElement("video").canPlayType("application/dash+xml")),LO.supportsTypeNatively=function(i){return"hls"===i?LO.supportsNativeHls:"dash"===i&&LO.supportsNativeDash},LO.isSupported=function(){return videojs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var HO=/* @__PURE__ */function(i){function VhsHandler2(a,s,o){var u;if(u=i.call(this,s,videojs.mergeOptions(o.hls,o.vhs))||this,o.hls&&Object.keys(o.hls).length&&videojs.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof o.initialBandwidth&&(u.options_.bandwidth=o.initialBandwidth),u.logger_=_I("VhsHandler"),s.options_&&s.options_.playerId){var _=videojs(s.options_.playerId);_.hasOwnProperty("hls")||Object.defineProperty(_,"hls",{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),s.trigger({type:"usage",name:"hls-player-access"}),_assertThisInitialized(u)},"get"),configurable:!0}),_.hasOwnProperty("vhs")||Object.defineProperty(_,"vhs",{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),s.trigger({type:"usage",name:"vhs-player-access"}),_assertThisInitialized(u)},"get"),configurable:!0}),_.hasOwnProperty("dash")||Object.defineProperty(_,"dash",{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),_assertThisInitialized(u)},"get"),configurable:!0}),u.player_=_}if(u.tech_=s,u.source_=a,u.stats={},u.ignoreNextSeekingEvent_=!1,u.setOptions_(),u.options_.overrideNative&&s.overrideNativeAudioTracks&&s.overrideNativeVideoTracks)s.overrideNativeAudioTracks(!0),s.overrideNativeVideoTracks(!0);else if(u.options_.overrideNative&&(s.featuresNativeVideoTracks||s.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return u.on(An,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(i){var a=An.fullscreenElement||An.webkitFullscreenElement||An.mozFullScreenElement||An.msFullscreenElement;a&&a.contains(u.tech_.el())?u.masterPlaylistController_.fastQualityChange_():u.masterPlaylistController_.checkABR_()}),u.on(u.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),u.on(u.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),u.on(u.tech_,"play",u.play),u}_inheritsLoose(VhsHandler2,i),__name(VhsHandler2,"VhsHandler");var a=VhsHandler2.prototype;return a.setOptions_=/* @__PURE__ */__name(function setOptions_(){var i=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var a=jO();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=sD.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===sD.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(a){void 0!==i.source_[a]&&(i.options_[a]=i.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},"setOptions_"),a.src=/* @__PURE__ */__name(function src2(i,a){var s=this;if(i){this.setOptions_(),this.options_.src=zO(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=LO,this.options_.sourceType=$x(a),this.options_.seekTo=function(i){s.tech_.setCurrentTime(i)},this.options_.smoothQualityChange&&videojs.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new SO(this.options_);var o=videojs.mergeOptions({liveRangeSafeTimeDelta:vI},this.options_,{seekable:/* @__PURE__ */__name(function seekable2(){return s.seekable()},"seekable"),media:/* @__PURE__ */__name(function media(){return s.masterPlaylistController_.media()},"media"),masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new EO(o),this.masterPlaylistController_.on("error",function(){var i=videojs.players[s.tech_.options_.playerId],a=s.masterPlaylistController_.error;"object"!=typeof a||a.code?"string"==typeof a&&(a={message:a,code:3}):a.code=3,i.error(a)});var u=this.options_.experimentalBufferBasedABR?LO.movingAverageBandwidthSelector(.55):LO.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):u.bind(this),this.masterPlaylistController_.selectInitialPlaylist=LO.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:/* @__PURE__ */__name(function get2(){return this.masterPlaylistController_.selectPlaylist},"get"),set:/* @__PURE__ */__name(function set2(i){this.masterPlaylistController_.selectPlaylist=i.bind(this)},"set")},throughput:{get:/* @__PURE__ */__name(function get2(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},"get"),set:/* @__PURE__ */__name(function set2(i){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=i,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1},"set")},bandwidth:{get:/* @__PURE__ */__name(function get2(){var i=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,a=Tn.navigator.connection||Tn.navigator.mozConnection||Tn.navigator.webkitConnection,s=1e7;if(this.options_.useNetworkInformationApi&&a){var o=1e3*a.downlink*1e3;i=o>=s&&i>=s?Math.max(i,o):o}return i},"get"),set:/* @__PURE__ */__name(function set2(i){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=i,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}},"set")},systemBandwidth:{get:/* @__PURE__ */__name(function get2(){var i,a=1/(this.bandwidth||1);return i=this.throughput>0?1/this.throughput:0,Math.floor(1/(a+i))},"get"),set:/* @__PURE__ */__name(function set2(){videojs.log.error('The "systemBandwidth" property is read-only')},"set")}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:/* @__PURE__ */__name(function get2(){return s.bandwidth||0},"get"),enumerable:!0},mediaRequests:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.mediaRequests_()||0},"get"),enumerable:!0},mediaRequestsAborted:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},"get"),enumerable:!0},mediaRequestsTimedout:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},"get"),enumerable:!0},mediaRequestsErrored:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},"get"),enumerable:!0},mediaTransferDuration:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.mediaTransferDuration_()||0},"get"),enumerable:!0},mediaBytesTransferred:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},"get"),enumerable:!0},mediaSecondsLoaded:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},"get"),enumerable:!0},mediaAppends:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.mediaAppends_()||0},"get"),enumerable:!0},mainAppendsToLoadedData:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},"get"),enumerable:!0},audioAppendsToLoadedData:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},"get"),enumerable:!0},appendsToLoadedData:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.appendsToLoadedData_()||0},"get"),enumerable:!0},timeToLoadedData:{get:/* @__PURE__ */__name(function get2(){return s.masterPlaylistController_.timeToLoadedData_()||0},"get"),enumerable:!0},buffered:{get:/* @__PURE__ */__name(function get2(){return EI(s.tech_.buffered())},"get"),enumerable:!0},currentTime:{get:/* @__PURE__ */__name(function get2(){return s.tech_.currentTime()},"get"),enumerable:!0},currentSource:{get:/* @__PURE__ */__name(function get2(){return s.tech_.currentSource_},"get"),enumerable:!0},currentTech:{get:/* @__PURE__ */__name(function get2(){return s.tech_.name_},"get"),enumerable:!0},duration:{get:/* @__PURE__ */__name(function get2(){return s.tech_.duration()},"get"),enumerable:!0},master:{get:/* @__PURE__ */__name(function get2(){return s.playlists.master},"get"),enumerable:!0},playerDimensions:{get:/* @__PURE__ */__name(function get2(){return s.tech_.currentDimensions()},"get"),enumerable:!0},seekable:{get:/* @__PURE__ */__name(function get2(){return EI(s.tech_.seekable())},"get"),enumerable:!0},timestamp:{get:/* @__PURE__ */__name(function get2(){return Date.now()},"get"),enumerable:!0},videoPlaybackQuality:{get:/* @__PURE__ */__name(function get2(){return s.tech_.getVideoPlaybackQuality()},"get"),enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&VO({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){AO(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Tn.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},"src"),a.createKeySessions_=/* @__PURE__ */__name(function createKeySessions_(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),FO({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){i.logger_("created EME key session"),i.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(a){i.logger_("error while creating EME key session",a),i.player_.error({message:"Failed to initialize media keys for EME",code:3})})},"createKeySessions_"),a.handleWaitingForKey_=/* @__PURE__ */__name(function handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},"handleWaitingForKey_"),a.setupEme_=/* @__PURE__ */__name(function setupEme_(){var i=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=UO({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});this.player_.tech_.on("keystatuschange",function(a){if("output-restricted"===a.status){var s=i.masterPlaylistController_.master();if(s&&s.playlists){var o,u=[];if(s.playlists.forEach(function(i){i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height>=720&&(!i.excludeUntil||i.excludeUntil<1/0)&&(i.excludeUntil=1/0,u.push(i))}),u.length)(o=videojs.log).warn.apply(o,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(u)),i.masterPlaylistController_.fastQualityChange_()}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==videojs.browser.IE_VERSION&&s?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},"setupEme_"),a.setupQualityLevels_=/* @__PURE__ */__name(function setupQualityLevels_(){var i=this,a=videojs.players[this.tech_.options_.playerId];a&&a.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){OO(i.qualityLevels_,i)}),this.playlists.on("mediachange",function(){RO(i.qualityLevels_,i.playlists)}))},"setupQualityLevels_"),VhsHandler2.version=/* @__PURE__ */__name(function version$52(){return{"@videojs/http-streaming":IO,"mux.js":"6.0.1","mpd-parser":"0.22.1","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},"version$5"),a.version=/* @__PURE__ */__name(function version2(){return this.constructor.version()},"version"),a.canChangeType=/* @__PURE__ */__name(function canChangeType(){return WR.canChangeType()},"canChangeType"),a.play=/* @__PURE__ */__name(function play(){this.masterPlaylistController_.play()},"play"),a.setCurrentTime=/* @__PURE__ */__name(function setCurrentTime(i){this.masterPlaylistController_.setCurrentTime(i)},"setCurrentTime"),a.duration=/* @__PURE__ */__name(function duration2(){return this.masterPlaylistController_.duration()},"duration"),a.seekable=/* @__PURE__ */__name(function seekable2(){return this.masterPlaylistController_.seekable()},"seekable"),a.dispose=/* @__PURE__ */__name(function dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Tn.URL.revokeObjectURL&&(Tn.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),i.prototype.dispose.call(this)},"dispose"),a.convertToProgramTime=/* @__PURE__ */__name(function convertToProgramTime(i,a){return WL({playlist:this.masterPlaylistController_.media(),time:i,callback:a})},"convertToProgramTime"),a.seekToProgramTime=/* @__PURE__ */__name(function seekToProgramTime$12(i,a,s,o){return void 0===s&&(s=!0),void 0===o&&(o=2),qL({programTime:i,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},"seekToProgramTime$1"),VhsHandler2}(videojs.getComponent("Component")),$O={name:"videojs-http-streaming",VERSION:IO,canHandleSource:/* @__PURE__ */__name(function canHandleSource(i,a){void 0===a&&(a={});var s=videojs.mergeOptions(videojs.options,a);return $O.canPlayType(i.type,s)},"canHandleSource"),handleSource:/* @__PURE__ */__name(function handleSource(i,a,s){void 0===s&&(s={});var o=videojs.mergeOptions(videojs.options,s);return a.vhs=new HO(i,a,o),videojs.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),a.vhs},"get"),configurable:!0}),a.vhs.xhr=EL(),a.vhs.src(i.src,i.type),a.vhs},"handleSource"),canPlayType:/* @__PURE__ */__name(function canPlayType2(i,a){var s=$x(i);if(!s)return"";var o=$O.getOverrideNative(a);return!LO.supportsTypeNatively(s)||o?"maybe":""},"canPlayType"),getOverrideNative:/* @__PURE__ */__name(function getOverrideNative(i){void 0===i&&(i={});var a=i,s=a.vhs,o=void 0===s?{}:s,u=a.hls,_=void 0===u?{}:u,x=!(videojs.browser.IS_ANY_SAFARI||videojs.browser.IS_IOS),w=o.overrideNative,C=void 0===w?x:w,L=_.overrideNative;return void 0!==L&&L||C},"getOverrideNative")};(/* @__PURE__ */__name(function supportsNativeMediaSources2(){return Ux("avc1.4d400d,mp4a.40.2")},"supportsNativeMediaSources")()&&videojs.getTech("Html5").registerSourceHandler($O,0),videojs.VhsHandler=HO,Object.defineProperty(videojs,"HlsHandler",{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),HO},"get"),configurable:!0}),videojs.VhsSourceHandler=$O,Object.defineProperty(videojs,"HlsSourceHandler",{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),$O},"get"),configurable:!0}),videojs.Vhs=LO,Object.defineProperty(videojs,"Hls",{get:/* @__PURE__ */__name(function get2(){return videojs.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),LO},"get"),configurable:!0}),videojs.use||(videojs.registerComponent("Hls",LO),videojs.registerComponent("Vhs",LO)),videojs.options.vhs=videojs.options.vhs||{},videojs.options.hls=videojs.options.hls||{},videojs.getPlugin&&videojs.getPlugin("reloadSourceOnError"))||(videojs.registerPlugin||videojs.plugin)("reloadSourceOnError",PO);const GO=/* @__PURE__ */getAugmentedNamespace(/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,default:videojs},Symbol.toStringTag,{value:"Module"})));var WO;function requireVideojsVr(){return WO||(WO=1,nx.exports=function(i){function _interopDefaultLegacy(i){return i&&"object"==typeof i&&"default"in i?i:{default:i}}__name(_interopDefaultLegacy,"_interopDefaultLegacy");var a=/* @__PURE__ */_interopDefaultLegacy(i),s="2.0.0";const o=/* @__PURE__ */__name(function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},"isMobile"),u=/* @__PURE__ */__name(function(i,a){for(var s=0,o=i.length;s<o;s++)a[s]=i[s]},"copyArray$1"),_=/* @__PURE__ */__name(function(i,a){for(var s in a)a.hasOwnProperty(s)&&(i[s]=a[s]);return i},"extend");var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Xt?Xt:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs2(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}__name(getDefaultExportFromCjs2,"getDefaultExportFromCjs");var w,C={exports:{}};w=C,function(i,a){w.exports=a()}(0,function(){var i,a,s,o,u,_,w=/* @__PURE__ */__name(function(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")},"classCallCheck"),C=/* @__PURE__ */function(){function defineProperties(i,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return __name(defineProperties,"defineProperties"),function(i,a,s){return a&&defineProperties(i.prototype,a),s&&defineProperties(i,s),i}}(),L=/* @__PURE__ */function(){function sliceIterator(i,a){var s=[],o=!0,u=!1,_=void 0;try{for(var x,w=i[Symbol.iterator]();!(o=(x=w.next()).done)&&(s.push(x.value),!a||s.length!==a);o=!0);}catch(C){u=!0,_=C}finally{try{!o&&w.return&&w.return()}finally{if(u)throw _}}return s}return __name(sliceIterator,"sliceIterator"),function(i,a){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return sliceIterator(i,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),B=.001,U=1,j=/* @__PURE__ */__name(function dataUri2(i,a){return"data:"+i+","+encodeURIComponent(a)},"dataUri"),V=/* @__PURE__ */__name(function lerp2(i,a,s){return i+(a-i)*s},"lerp"),z=(i=/iPad|iPhone|iPod/.test(navigator.platform),function(){return i}),$=(a=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome"),function(){return a}),Y=(s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),function(){return s}),Z=(o=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android"),function(){return o}),ee=function(){var i=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),a=i?parseInt(i[1],10):null;return function(){return a}}(),ie=(u=!1,u=z()&&Y()&&-1!==navigator.userAgent.indexOf("13_4"),function(){return u}),ae=function(){var i=!1;if(65===ee()){var a=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(a){var s=a[1].split("."),o=L(s,4);o[0],o[1];var u=o[2],_=o[3];i=3325===parseInt(u,10)&&parseInt(_,10)<148}}return function(){return i}}(),le=(_=-1!==navigator.userAgent.indexOf("R7 Build"),function(){return _}),ce=/* @__PURE__ */__name(function isLandscapeMode2(){var i=90==window.orientation||-90==window.orientation;return le()?!i:i},"isLandscapeMode"),de=/* @__PURE__ */__name(function isTimestampDeltaValid2(i){return!(isNaN(i)||i<=B||i>U)},"isTimestampDeltaValid"),pe=/* @__PURE__ */__name(function getScreenWidth2(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},"getScreenWidth"),fe=/* @__PURE__ */__name(function getScreenHeight2(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},"getScreenHeight"),_e=/* @__PURE__ */__name(function requestFullscreen2(i){if($())return!1;if(i.requestFullscreen)i.requestFullscreen();else if(i.webkitRequestFullscreen)i.webkitRequestFullscreen();else if(i.mozRequestFullScreen)i.mozRequestFullScreen();else{if(!i.msRequestFullscreen)return!1;i.msRequestFullscreen()}return!0},"requestFullscreen"),ye=/* @__PURE__ */__name(function exitFullscreen2(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},"exitFullscreen"),be=/* @__PURE__ */__name(function getFullscreenElement2(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},"getFullscreenElement"),Te=/* @__PURE__ */__name(function linkProgram2(i,a,s,o){var u=i.createShader(i.VERTEX_SHADER);i.shaderSource(u,a),i.compileShader(u);var _=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(_,s),i.compileShader(_);var x=i.createProgram();for(var w in i.attachShader(x,u),i.attachShader(x,_),o)i.bindAttribLocation(x,o[w],w);return i.linkProgram(x),i.deleteShader(u),i.deleteShader(_),x},"linkProgram"),Se=/* @__PURE__ */__name(function getProgramUniforms2(i,a){for(var s={},o=i.getProgramParameter(a,i.ACTIVE_UNIFORMS),u="",_=0;_<o;_++)s[u=i.getActiveUniform(a,_).name.replace("[0]","")]=i.getUniformLocation(a,u);return s},"getProgramUniforms"),xe=/* @__PURE__ */__name(function orthoMatrix2(i,a,s,o,u,_,x){var w=1/(a-s),C=1/(o-u),L=1/(_-x);return i[0]=-2*w,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*C,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*L,i[11]=0,i[12]=(a+s)*w,i[13]=(u+o)*C,i[14]=(x+_)*L,i[15]=1,i},"orthoMatrix"),we=/* @__PURE__ */__name(function isMobile3(){var i=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(i=!0)}(navigator.userAgent||navigator.vendor||window.opera),i},"isMobile"),Pe=/* @__PURE__ */__name(function extend4(i,a){for(var s in a)a.hasOwnProperty(s)&&(i[s]=a[s]);return i},"extend"),Re=/* @__PURE__ */__name(function safariCssSizeWorkaround2(i){if(z()){var a=i.style.width,s=i.style.height;i.style.width=parseInt(a)+1+"px",i.style.height=parseInt(s)+"px",setTimeout(function(){i.style.width=a,i.style.height=s},100)}window.canvas=i},"safariCssSizeWorkaround"),ze=function(){var i=Math.PI/180,a=.25*Math.PI;function mat4_perspectiveFromFieldOfView(s,o,u,_){var x=Math.tan(o?o.upDegrees*i:a),w=Math.tan(o?o.downDegrees*i:a),C=Math.tan(o?o.leftDegrees*i:a),L=Math.tan(o?o.rightDegrees*i:a),B=2/(C+L),U=2/(x+w);return s[0]=B,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=U,s[6]=0,s[7]=0,s[8]=-(C-L)*B*.5,s[9]=(x-w)*U*.5,s[10]=_/(u-_),s[11]=-1,s[12]=0,s[13]=0,s[14]=_*u/(u-_),s[15]=0,s}function mat4_fromRotationTranslation(i,a,s){var o=a[0],u=a[1],_=a[2],x=a[3],w=o+o,C=u+u,L=_+_,B=o*w,U=o*C,j=o*L,V=u*C,z=u*L,$=_*L,Y=x*w,Z=x*C,ee=x*L;return i[0]=1-(V+$),i[1]=U+ee,i[2]=j-Z,i[3]=0,i[4]=U-ee,i[5]=1-(B+$),i[6]=z+Y,i[7]=0,i[8]=j+Z,i[9]=z-Y,i[10]=1-(B+V),i[11]=0,i[12]=s[0],i[13]=s[1],i[14]=s[2],i[15]=1,i}function mat4_translate(i,a,s){var o,u,_,x,w,C,L,B,U,j,V,z,$=s[0],Y=s[1],Z=s[2];return a===i?(i[12]=a[0]*$+a[4]*Y+a[8]*Z+a[12],i[13]=a[1]*$+a[5]*Y+a[9]*Z+a[13],i[14]=a[2]*$+a[6]*Y+a[10]*Z+a[14],i[15]=a[3]*$+a[7]*Y+a[11]*Z+a[15]):(o=a[0],u=a[1],_=a[2],x=a[3],w=a[4],C=a[5],L=a[6],B=a[7],U=a[8],j=a[9],V=a[10],z=a[11],i[0]=o,i[1]=u,i[2]=_,i[3]=x,i[4]=w,i[5]=C,i[6]=L,i[7]=B,i[8]=U,i[9]=j,i[10]=V,i[11]=z,i[12]=o*$+w*Y+U*Z+a[12],i[13]=u*$+C*Y+j*Z+a[13],i[14]=_*$+L*Y+V*Z+a[14],i[15]=x*$+B*Y+z*Z+a[15]),i}function mat4_invert(i,a){var s=a[0],o=a[1],u=a[2],_=a[3],x=a[4],w=a[5],C=a[6],L=a[7],B=a[8],U=a[9],j=a[10],V=a[11],z=a[12],$=a[13],Y=a[14],Z=a[15],ee=s*w-o*x,ie=s*C-u*x,ae=s*L-_*x,le=o*C-u*w,ce=o*L-_*w,de=u*L-_*C,pe=B*$-U*z,fe=B*Y-j*z,_e=B*Z-V*z,ye=U*Y-j*$,be=U*Z-V*$,Te=j*Z-V*Y,Se=ee*Te-ie*be+ae*ye+le*_e-ce*fe+de*pe;return Se?(Se=1/Se,i[0]=(w*Te-C*be+L*ye)*Se,i[1]=(u*be-o*Te-_*ye)*Se,i[2]=($*de-Y*ce+Z*le)*Se,i[3]=(j*ce-U*de-V*le)*Se,i[4]=(C*_e-x*Te-L*fe)*Se,i[5]=(s*Te-u*_e+_*fe)*Se,i[6]=(Y*ae-z*de-Z*ie)*Se,i[7]=(B*de-j*ae+V*ie)*Se,i[8]=(x*be-w*_e+L*pe)*Se,i[9]=(o*_e-s*be-_*pe)*Se,i[10]=(z*ce-$*ae+Z*ee)*Se,i[11]=(U*ae-B*ce-V*ee)*Se,i[12]=(w*fe-x*ye-C*pe)*Se,i[13]=(s*ye-o*fe+u*pe)*Se,i[14]=($*ie-z*le-Y*ee)*Se,i[15]=(B*le-U*ie+j*ee)*Se,i):null}__name(mat4_perspectiveFromFieldOfView,"mat4_perspectiveFromFieldOfView"),__name(mat4_fromRotationTranslation,"mat4_fromRotationTranslation"),__name(mat4_translate,"mat4_translate"),__name(mat4_invert,"mat4_invert");var s=new Float32Array([0,0,0,1]),o=new Float32Array([0,0,0]);function updateEyeMatrices(i,a,u,_,x,w){mat4_perspectiveFromFieldOfView(i,_||null,w.depthNear,w.depthFar),mat4_fromRotationTranslation(a,u.orientation||s,u.position||o),x&&mat4_translate(a,a,x),mat4_invert(a,a)}return __name(updateEyeMatrices,"updateEyeMatrices"),function(i,a,s){return!(!i||!a||(i.pose=a,i.timestamp=a.timestamp,updateEyeMatrices(i.leftProjectionMatrix,i.leftViewMatrix,a,s._getFieldOfView("left"),s._getEyeOffset("left"),s),updateEyeMatrices(i.rightProjectionMatrix,i.rightViewMatrix,a,s._getFieldOfView("right"),s._getEyeOffset("right"),s),0))}}(),He=/* @__PURE__ */__name(function isInsideCrossOriginIFrame2(){var i=window.self!==window.top,a=$e(document.referrer),s=$e(window.location.href);return i&&a!==s},"isInsideCrossOriginIFrame"),$e=/* @__PURE__ */__name(function getOriginFromUrl2(i){var a,s=i.indexOf("://");a=-1!==s?s+3:0;var o=i.indexOf("/",a);return-1===o&&(o=i.length),i.substring(0,o)},"getOriginFromUrl"),We=/* @__PURE__ */__name(function getQuaternionAngle2(i){return i.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(i.w)},"getQuaternionAngle"),qe=/* @__PURE__ */function(){var i={};return function(a,s){void 0===i[a]&&(console.warn("webvr-polyfill: "+s),i[a]=!0)}}(),Xe=/* @__PURE__ */__name(function deprecateWarning2(i,a){qe(i,i+" has been deprecated. This may not work on native WebVR displays. "+(a?"Please use "+a+" instead.":""))},"deprecateWarning");function WGLUPreserveGLState(i,a,s){if(a){for(var o=[],u=null,_=0;_<a.length;++_)switch(x=a[_]){case i.TEXTURE_BINDING_2D:case i.TEXTURE_BINDING_CUBE_MAP:if((C=a[++_])<i.TEXTURE0||C>i.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),o.push(null,null);break}u||(u=i.getParameter(i.ACTIVE_TEXTURE)),i.activeTexture(C),o.push(i.getParameter(x),null);break;case i.ACTIVE_TEXTURE:u=i.getParameter(i.ACTIVE_TEXTURE),o.push(null);break;default:o.push(i.getParameter(x))}for(s(i),_=0;_<a.length;++_){var x=a[_],w=o[_];switch(x){case i.ACTIVE_TEXTURE:break;case i.ARRAY_BUFFER_BINDING:i.bindBuffer(i.ARRAY_BUFFER,w);break;case i.COLOR_CLEAR_VALUE:i.clearColor(w[0],w[1],w[2],w[3]);break;case i.COLOR_WRITEMASK:i.colorMask(w[0],w[1],w[2],w[3]);break;case i.CURRENT_PROGRAM:i.useProgram(w);break;case i.ELEMENT_ARRAY_BUFFER_BINDING:i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,w);break;case i.FRAMEBUFFER_BINDING:i.bindFramebuffer(i.FRAMEBUFFER,w);break;case i.RENDERBUFFER_BINDING:i.bindRenderbuffer(i.RENDERBUFFER,w);break;case i.TEXTURE_BINDING_2D:if((C=a[++_])<i.TEXTURE0||C>i.TEXTURE31)break;i.activeTexture(C),i.bindTexture(i.TEXTURE_2D,w);break;case i.TEXTURE_BINDING_CUBE_MAP:var C;if((C=a[++_])<i.TEXTURE0||C>i.TEXTURE31)break;i.activeTexture(C),i.bindTexture(i.TEXTURE_CUBE_MAP,w);break;case i.VIEWPORT:i.viewport(w[0],w[1],w[2],w[3]);break;case i.BLEND:case i.CULL_FACE:case i.DEPTH_TEST:case i.SCISSOR_TEST:case i.STENCIL_TEST:w?i.enable(x):i.disable(x);break;default:console.log("No GL restore behavior for 0x"+x.toString(16))}u&&i.activeTexture(u)}}else s(i)}__name(WGLUPreserveGLState,"WGLUPreserveGLState");var Qe=WGLUPreserveGLState,Ye=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),et=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function CardboardDistorter(i,a,s,o){this.gl=i,this.cardboardUI=a,this.bufferScale=s,this.dirtySubmitFrameBindings=o,this.ctxAttribs=i.getContextAttributes(),this.instanceExt=i.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=i.drawingBufferWidth,this.bufferHeight=i.drawingBufferHeight,this.realBindFramebuffer=i.bindFramebuffer,this.realEnable=i.enable,this.realDisable=i.disable,this.realColorMask=i.colorMask,this.realClearColor=i.clearColor,this.realViewport=i.viewport,z()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(i.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(i.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=Te(i,Ye,et,this.attribs),this.uniforms=Se(i,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=i.createBuffer(),this.indexBuffer=i.createBuffer(),this.indexCount=0,this.renderTarget=i.createTexture(),this.framebuffer=i.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=i.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=i.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=i.createRenderbuffer()),this.patch(),this.onResize()}__name(CardboardDistorter,"CardboardDistorter"),CardboardDistorter.prototype.destroy=function(){var i=this.gl;this.unpatch(),i.deleteProgram(this.program),i.deleteBuffer(this.vertexBuffer),i.deleteBuffer(this.indexBuffer),i.deleteTexture(this.renderTarget),i.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&i.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&i.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&i.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},CardboardDistorter.prototype.onResize=function(){var i=this.gl,a=this,s=[i.RENDERBUFFER_BINDING,i.TEXTURE_BINDING_2D,i.TEXTURE0];Qe(i,s,function(i){a.realBindFramebuffer.call(i,i.FRAMEBUFFER,null),a.scissorTest&&a.realDisable.call(i,i.SCISSOR_TEST),a.realColorMask.call(i,!0,!0,!0,!0),a.realViewport.call(i,0,0,i.drawingBufferWidth,i.drawingBufferHeight),a.realClearColor.call(i,0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),a.realBindFramebuffer.call(i,i.FRAMEBUFFER,a.framebuffer),i.bindTexture(i.TEXTURE_2D,a.renderTarget),i.texImage2D(i.TEXTURE_2D,0,a.ctxAttribs.alpha?i.RGBA:i.RGB,a.bufferWidth,a.bufferHeight,0,a.ctxAttribs.alpha?i.RGBA:i.RGB,i.UNSIGNED_BYTE,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a.renderTarget,0),a.ctxAttribs.depth&&a.ctxAttribs.stencil?(i.bindRenderbuffer(i.RENDERBUFFER,a.depthStencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,a.bufferWidth,a.bufferHeight),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,a.depthStencilBuffer)):a.ctxAttribs.depth?(i.bindRenderbuffer(i.RENDERBUFFER,a.depthBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,a.bufferWidth,a.bufferHeight),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,a.depthBuffer)):a.ctxAttribs.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,a.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.STENCIL_INDEX8,a.bufferWidth,a.bufferHeight),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.STENCIL_ATTACHMENT,i.RENDERBUFFER,a.stencilBuffer)),!i.checkFramebufferStatus(i.FRAMEBUFFER)===i.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),a.realBindFramebuffer.call(i,i.FRAMEBUFFER,a.lastBoundFramebuffer),a.scissorTest&&a.realEnable.call(i,i.SCISSOR_TEST),a.realColorMask.apply(i,a.colorMask),a.realViewport.apply(i,a.viewport),a.realClearColor.apply(i,a.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},CardboardDistorter.prototype.patch=function(){if(!this.isPatched){var i=this,a=this.gl.canvas,s=this.gl;z()||(a.width=pe()*this.bufferScale,a.height=fe()*this.bufferScale,Object.defineProperty(a,"width",{configurable:!0,enumerable:!0,get:/* @__PURE__ */__name(function get2(){return i.bufferWidth},"get"),set:/* @__PURE__ */__name(function set2(s){i.bufferWidth=s,i.realCanvasWidth.set.call(a,s),i.onResize()},"set")}),Object.defineProperty(a,"height",{configurable:!0,enumerable:!0,get:/* @__PURE__ */__name(function get2(){return i.bufferHeight},"get"),set:/* @__PURE__ */__name(function set2(s){i.bufferHeight=s,i.realCanvasHeight.set.call(a,s),i.onResize()},"set")})),this.lastBoundFramebuffer=s.getParameter(s.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(s.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(a,o){i.lastBoundFramebuffer=o||i.framebuffer,i.realBindFramebuffer.call(s,a,i.lastBoundFramebuffer)},this.cullFace=s.getParameter(s.CULL_FACE),this.depthTest=s.getParameter(s.DEPTH_TEST),this.blend=s.getParameter(s.BLEND),this.scissorTest=s.getParameter(s.SCISSOR_TEST),this.stencilTest=s.getParameter(s.STENCIL_TEST),s.enable=function(a){switch(a){case s.CULL_FACE:i.cullFace=!0;break;case s.DEPTH_TEST:i.depthTest=!0;break;case s.BLEND:i.blend=!0;break;case s.SCISSOR_TEST:i.scissorTest=!0;break;case s.STENCIL_TEST:i.stencilTest=!0}i.realEnable.call(s,a)},s.disable=function(a){switch(a){case s.CULL_FACE:i.cullFace=!1;break;case s.DEPTH_TEST:i.depthTest=!1;break;case s.BLEND:i.blend=!1;break;case s.SCISSOR_TEST:i.scissorTest=!1;break;case s.STENCIL_TEST:i.stencilTest=!1}i.realDisable.call(s,a)},this.colorMask=s.getParameter(s.COLOR_WRITEMASK),s.colorMask=function(a,o,u,_){i.colorMask[0]=a,i.colorMask[1]=o,i.colorMask[2]=u,i.colorMask[3]=_,i.realColorMask.call(s,a,o,u,_)},this.clearColor=s.getParameter(s.COLOR_CLEAR_VALUE),s.clearColor=function(a,o,u,_){i.clearColor[0]=a,i.clearColor[1]=o,i.clearColor[2]=u,i.clearColor[3]=_,i.realClearColor.call(s,a,o,u,_)},this.viewport=s.getParameter(s.VIEWPORT),s.viewport=function(a,o,u,_){i.viewport[0]=a,i.viewport[1]=o,i.viewport[2]=u,i.viewport[3]=_,i.realViewport.call(s,a,o,u,_)},this.isPatched=!0,Re(a)}},CardboardDistorter.prototype.unpatch=function(){if(this.isPatched){var i=this.gl,a=this.gl.canvas;z()||(Object.defineProperty(a,"width",this.realCanvasWidth),Object.defineProperty(a,"height",this.realCanvasHeight)),a.width=this.bufferWidth,a.height=this.bufferHeight,i.bindFramebuffer=this.realBindFramebuffer,i.enable=this.realEnable,i.disable=this.realDisable,i.colorMask=this.realColorMask,i.clearColor=this.realClearColor,i.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&i.bindFramebuffer(i.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){Re(a)},1)}},CardboardDistorter.prototype.setTextureBounds=function(i,a){i||(i=[0,0,.5,1]),a||(a=[.5,0,.5,1]),this.viewportOffsetScale[0]=i[0],this.viewportOffsetScale[1]=i[1],this.viewportOffsetScale[2]=i[2],this.viewportOffsetScale[3]=i[3],this.viewportOffsetScale[4]=a[0],this.viewportOffsetScale[5]=a[1],this.viewportOffsetScale[6]=a[2],this.viewportOffsetScale[7]=a[3]},CardboardDistorter.prototype.submitFrame=function(){var i=this.gl,a=this,s=[];if(this.dirtySubmitFrameBindings||s.push(i.CURRENT_PROGRAM,i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING,i.TEXTURE_BINDING_2D,i.TEXTURE0),Qe(i,s,function(i){a.realBindFramebuffer.call(i,i.FRAMEBUFFER,null);var s=0,o=0;a.instanceExt&&(s=i.getVertexAttrib(a.attribs.position,a.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),o=i.getVertexAttrib(a.attribs.texCoord,a.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),a.cullFace&&a.realDisable.call(i,i.CULL_FACE),a.depthTest&&a.realDisable.call(i,i.DEPTH_TEST),a.blend&&a.realDisable.call(i,i.BLEND),a.scissorTest&&a.realDisable.call(i,i.SCISSOR_TEST),a.stencilTest&&a.realDisable.call(i,i.STENCIL_TEST),a.realColorMask.call(i,!0,!0,!0,!0),a.realViewport.call(i,0,0,i.drawingBufferWidth,i.drawingBufferHeight),(a.ctxAttribs.alpha||z())&&(a.realClearColor.call(i,0,0,0,1),i.clear(i.COLOR_BUFFER_BIT)),i.useProgram(a.program),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,a.indexBuffer),i.bindBuffer(i.ARRAY_BUFFER,a.vertexBuffer),i.enableVertexAttribArray(a.attribs.position),i.enableVertexAttribArray(a.attribs.texCoord),i.vertexAttribPointer(a.attribs.position,2,i.FLOAT,!1,20,0),i.vertexAttribPointer(a.attribs.texCoord,3,i.FLOAT,!1,20,8),a.instanceExt&&(0!=s&&a.instanceExt.vertexAttribDivisorANGLE(a.attribs.position,0),0!=o&&a.instanceExt.vertexAttribDivisorANGLE(a.attribs.texCoord,0)),i.activeTexture(i.TEXTURE0),i.uniform1i(a.uniforms.diffuse,0),i.bindTexture(i.TEXTURE_2D,a.renderTarget),i.uniform4fv(a.uniforms.viewportOffsetScale,a.viewportOffsetScale),i.drawElements(i.TRIANGLES,a.indexCount,i.UNSIGNED_SHORT,0),a.cardboardUI&&a.cardboardUI.renderNoState(),a.realBindFramebuffer.call(a.gl,i.FRAMEBUFFER,a.framebuffer),a.ctxAttribs.preserveDrawingBuffer||(a.realClearColor.call(i,0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),a.dirtySubmitFrameBindings||a.realBindFramebuffer.call(i,i.FRAMEBUFFER,a.lastBoundFramebuffer),a.cullFace&&a.realEnable.call(i,i.CULL_FACE),a.depthTest&&a.realEnable.call(i,i.DEPTH_TEST),a.blend&&a.realEnable.call(i,i.BLEND),a.scissorTest&&a.realEnable.call(i,i.SCISSOR_TEST),a.stencilTest&&a.realEnable.call(i,i.STENCIL_TEST),a.realColorMask.apply(i,a.colorMask),a.realViewport.apply(i,a.viewport),!a.ctxAttribs.alpha&&a.ctxAttribs.preserveDrawingBuffer||a.realClearColor.apply(i,a.clearColor),a.instanceExt&&(0!=s&&a.instanceExt.vertexAttribDivisorANGLE(a.attribs.position,s),0!=o&&a.instanceExt.vertexAttribDivisorANGLE(a.attribs.texCoord,o))}),z()){var o=i.canvas;o.width==a.bufferWidth&&o.height==a.bufferHeight||(a.bufferWidth=o.width,a.bufferHeight=o.height,a.onResize())}},CardboardDistorter.prototype.updateDeviceInfo=function(i){var a=this.gl,s=this,o=[a.ARRAY_BUFFER_BINDING,a.ELEMENT_ARRAY_BUFFER_BINDING];Qe(a,o,function(a){var o=s.computeMeshVertices_(s.meshWidth,s.meshHeight,i);if(a.bindBuffer(a.ARRAY_BUFFER,s.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW),!s.indexCount){var u=s.computeMeshIndices_(s.meshWidth,s.meshHeight);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,s.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,u,a.STATIC_DRAW),s.indexCount=u.length}})},CardboardDistorter.prototype.computeMeshVertices_=function(i,a,s){for(var o=new Float32Array(2*i*a*5),u=s.getLeftEyeVisibleTanAngles(),_=s.getLeftEyeNoLensTanAngles(),x=s.getLeftEyeVisibleScreenRect(_),w=0,C=0;C<2;C++){for(var L=0;L<a;L++)for(var B=0;B<i;B++,w++){var U=B/(i-1),j=L/(a-1),z=U,$=j,Y=V(u[0],u[2],U),Z=V(u[3],u[1],j),ee=Math.sqrt(Y*Y+Z*Z),ie=s.distortion.distortInverse(ee),ae=Z*ie/ee;U=(Y*ie/ee-_[0])/(_[2]-_[0]),j=(ae-_[3])/(_[1]-_[3]),U=2*(x.x+U*x.width-.5),j=2*(x.y+j*x.height-.5),o[5*w+0]=U,o[5*w+1]=j,o[5*w+2]=z,o[5*w+3]=$,o[5*w+4]=C}var le=u[2]-u[0];u[0]=-(le+u[0]),u[2]=le-u[2],le=_[2]-_[0],_[0]=-(le+_[0]),_[2]=le-_[2],x.x=1-(x.x+x.width)}return o},CardboardDistorter.prototype.computeMeshIndices_=function(i,a){for(var s=new Uint16Array(2*(i-1)*(a-1)*6),o=i/2,u=a/2,_=0,x=0,w=0;w<2;w++)for(var C=0;C<a;C++)for(var L=0;L<i;L++,_++)0!=L&&0!=C&&(L<=o==C<=u?(s[x++]=_,s[x++]=_-i-1,s[x++]=_-i,s[x++]=_-i-1,s[x++]=_,s[x++]=_-1):(s[x++]=_-1,s[x++]=_-i,s[x++]=_,s[x++]=_-i,s[x++]=_-1,s[x++]=_-i-1));return s},CardboardDistorter.prototype.getOwnPropertyDescriptor_=function(i,a){var s=Object.getOwnPropertyDescriptor(i,a);return void 0!==s.get&&void 0!==s.set||(s.configurable=!0,s.enumerable=!0,s.get=function(){return this.getAttribute(a)},s.set=function(i){this.setAttribute(a,i)}),s};var tt=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),nt=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),it=Math.PI/180,rt=60,at=12,st=20,ot=1,lt=.75,ct=.3125,ut=4,dt=28,ht=1.5;function CardboardUI(i){this.gl=i,this.attribs={position:0},this.program=Te(i,tt,nt,this.attribs),this.uniforms=Se(i,this.program),this.vertexBuffer=i.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function Distortion(i){this.coefficients=i}__name(CardboardUI,"CardboardUI"),CardboardUI.prototype.destroy=function(){var i=this.gl;this.listener&&i.canvas.removeEventListener("click",this.listener,!1),i.deleteProgram(this.program),i.deleteBuffer(this.vertexBuffer)},CardboardUI.prototype.listen=function(i,a){var s=this.gl.canvas;this.listener=function(o){var u=s.clientWidth/2,_=dt*ht;o.clientX>u-_&&o.clientX<u+_&&o.clientY>s.clientHeight-_?i(o):o.clientX<_&&o.clientY<_&&a(o)},s.addEventListener("click",this.listener,!1)},CardboardUI.prototype.onResize=function(){var i=this.gl,a=this,s=[i.ARRAY_BUFFER_BINDING];Qe(i,s,function(i){var s=[],o=i.drawingBufferWidth/2,u=Math.max(screen.width,screen.height)*window.devicePixelRatio,_=i.drawingBufferWidth/u*window.devicePixelRatio,x=ut*_/2,w=dt*ht*_,C=dt*_/2,L=(dt*ht-dt)*_;function addGearSegment(i,a){var u=(90-i)*it,_=Math.cos(u),x=Math.sin(u);s.push(ct*_*C+o,ct*x*C+C),s.push(a*_*C+o,a*x*C+C)}s.push(o-x,w),s.push(o-x,i.drawingBufferHeight),s.push(o+x,w),s.push(o+x,i.drawingBufferHeight),a.gearOffset=s.length/2,__name(addGearSegment,"addGearSegment");for(var B=0;B<=6;B++){var U=B*rt;addGearSegment(U,ot),addGearSegment(U+at,ot),addGearSegment(U+st,lt),addGearSegment(U+(rt-st),lt),addGearSegment(U+(rt-at),ot)}function addArrowVertex(a,o){s.push(L+a,i.drawingBufferHeight-L-o)}a.gearVertexCount=s.length/2-a.gearOffset,a.arrowOffset=s.length/2,__name(addArrowVertex,"addArrowVertex");var j=x/Math.sin(45*it);addArrowVertex(0,C),addArrowVertex(C,0),addArrowVertex(C+j,j),addArrowVertex(j,C+j),addArrowVertex(j,C-j),addArrowVertex(0,C),addArrowVertex(C,2*C),addArrowVertex(C+j,2*C-j),addArrowVertex(j,C-j),addArrowVertex(0,C),addArrowVertex(j,C-x),addArrowVertex(dt*_,C-x),addArrowVertex(j,C+x),addArrowVertex(dt*_,C+x),a.arrowVertexCount=s.length/2-a.arrowOffset,i.bindBuffer(i.ARRAY_BUFFER,a.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,new Float32Array(s),i.STATIC_DRAW)})},CardboardUI.prototype.render=function(){var i=this.gl,a=this,s=[i.CULL_FACE,i.DEPTH_TEST,i.BLEND,i.SCISSOR_TEST,i.STENCIL_TEST,i.COLOR_WRITEMASK,i.VIEWPORT,i.CURRENT_PROGRAM,i.ARRAY_BUFFER_BINDING];Qe(i,s,function(i){i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.BLEND),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.colorMask(!0,!0,!0,!0),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),a.renderNoState()})},CardboardUI.prototype.renderNoState=function(){var i=this.gl;i.useProgram(this.program),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer),i.enableVertexAttribArray(this.attribs.position),i.vertexAttribPointer(this.attribs.position,2,i.FLOAT,!1,8,0),i.uniform4f(this.uniforms.color,1,1,1,1),xe(this.projMat,0,i.drawingBufferWidth,0,i.drawingBufferHeight,.1,1024),i.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),i.drawArrays(i.TRIANGLE_STRIP,0,4),i.drawArrays(i.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),i.drawArrays(i.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},__name(Distortion,"Distortion"),Distortion.prototype.distortInverse=function(i){for(var a=0,s=1,o=i-this.distort(a);Math.abs(s-a)>1e-4;){var u=i-this.distort(s),_=s-u*((s-a)/(u-o));a=s,s=_,o=u}return s},Distortion.prototype.distort=function(i){for(var a=i*i,s=0,o=0;o<this.coefficients.length;o++)s=a*(s+this.coefficients[o]);return(s+1)*i};var pt=Math.PI/180,mt=180/Math.PI,ft=/* @__PURE__ */__name(function Vector33(i,a,s){this.x=i||0,this.y=a||0,this.z=s||0},"Vector3");ft.prototype={constructor:ft,set:/* @__PURE__ */__name(function set2(i,a,s){return this.x=i,this.y=a,this.z=s,this},"set"),copy:/* @__PURE__ */__name(function copy(i){return this.x=i.x,this.y=i.y,this.z=i.z,this},"copy"),length:/* @__PURE__ */__name(function length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},"length"),normalize:/* @__PURE__ */__name(function normalize(){var i=this.length();if(0!==i){var a=1/i;this.multiplyScalar(a)}else this.x=0,this.y=0,this.z=0;return this},"normalize"),multiplyScalar:/* @__PURE__ */__name(function multiplyScalar(i){this.x*=i,this.y*=i,this.z*=i},"multiplyScalar"),applyQuaternion:/* @__PURE__ */__name(function applyQuaternion(i){var a=this.x,s=this.y,o=this.z,u=i.x,_=i.y,x=i.z,w=i.w,C=w*a+_*o-x*s,L=w*s+x*a-u*o,B=w*o+u*s-_*a,U=-u*a-_*s-x*o;return this.x=C*w+U*-u+L*-x-B*-_,this.y=L*w+U*-_+B*-u-C*-x,this.z=B*w+U*-x+C*-_-L*-u,this},"applyQuaternion"),dot:/* @__PURE__ */__name(function dot(i){return this.x*i.x+this.y*i.y+this.z*i.z},"dot"),crossVectors:/* @__PURE__ */__name(function crossVectors(i,a){var s=i.x,o=i.y,u=i.z,_=a.x,x=a.y,w=a.z;return this.x=o*w-u*x,this.y=u*_-s*w,this.z=s*x-o*_,this},"crossVectors")};var gt=/* @__PURE__ */__name(function Quaternion3(i,a,s,o){this.x=i||0,this.y=a||0,this.z=s||0,this.w=void 0!==o?o:1},"Quaternion");function Device(i){this.width=i.width||pe(),this.height=i.height||fe(),this.widthMeters=i.widthMeters,this.heightMeters=i.heightMeters,this.bevelMeters=i.bevelMeters}gt.prototype={constructor:gt,set:/* @__PURE__ */__name(function set2(i,a,s,o){return this.x=i,this.y=a,this.z=s,this.w=o,this},"set"),copy:/* @__PURE__ */__name(function copy(i){return this.x=i.x,this.y=i.y,this.z=i.z,this.w=i.w,this},"copy"),setFromEulerXYZ:/* @__PURE__ */__name(function setFromEulerXYZ(i,a,s){var o=Math.cos(i/2),u=Math.cos(a/2),_=Math.cos(s/2),x=Math.sin(i/2),w=Math.sin(a/2),C=Math.sin(s/2);return this.x=x*u*_+o*w*C,this.y=o*w*_-x*u*C,this.z=o*u*C+x*w*_,this.w=o*u*_-x*w*C,this},"setFromEulerXYZ"),setFromEulerYXZ:/* @__PURE__ */__name(function setFromEulerYXZ(i,a,s){var o=Math.cos(i/2),u=Math.cos(a/2),_=Math.cos(s/2),x=Math.sin(i/2),w=Math.sin(a/2),C=Math.sin(s/2);return this.x=x*u*_+o*w*C,this.y=o*w*_-x*u*C,this.z=o*u*C-x*w*_,this.w=o*u*_+x*w*C,this},"setFromEulerYXZ"),setFromAxisAngle:/* @__PURE__ */__name(function setFromAxisAngle(i,a){var s=a/2,o=Math.sin(s);return this.x=i.x*o,this.y=i.y*o,this.z=i.z*o,this.w=Math.cos(s),this},"setFromAxisAngle"),multiply:/* @__PURE__ */__name(function multiply(i){return this.multiplyQuaternions(this,i)},"multiply"),multiplyQuaternions:/* @__PURE__ */__name(function multiplyQuaternions(i,a){var s=i.x,o=i.y,u=i.z,_=i.w,x=a.x,w=a.y,C=a.z,L=a.w;return this.x=s*L+_*x+o*C-u*w,this.y=o*L+_*w+u*x-s*C,this.z=u*L+_*C+s*w-o*x,this.w=_*L-s*x-o*w-u*C,this},"multiplyQuaternions"),inverse:/* @__PURE__ */__name(function inverse(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},"inverse"),normalize:/* @__PURE__ */__name(function normalize(){var i=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===i?(this.x=0,this.y=0,this.z=0,this.w=1):(i=1/i,this.x=this.x*i,this.y=this.y*i,this.z=this.z*i,this.w=this.w*i),this},"normalize"),slerp:/* @__PURE__ */__name(function slerp(i,a){if(0===a)return this;if(1===a)return this.copy(i);var s=this.x,o=this.y,u=this.z,_=this.w,x=_*i.w+s*i.x+o*i.y+u*i.z;if(x<0?(this.w=-i.w,this.x=-i.x,this.y=-i.y,this.z=-i.z,x=-x):this.copy(i),x>=1)return this.w=_,this.x=s,this.y=o,this.z=u,this;var w=Math.acos(x),C=Math.sqrt(1-x*x);if(Math.abs(C)<.001)return this.w=.5*(_+this.w),this.x=.5*(s+this.x),this.y=.5*(o+this.y),this.z=.5*(u+this.z),this;var L=Math.sin((1-a)*w)/C,B=Math.sin(a*w)/C;return this.w=_*L+this.w*B,this.x=s*L+this.x*B,this.y=o*L+this.y*B,this.z=u*L+this.z*B,this},"slerp"),setFromUnitVectors:/* @__PURE__ */function(){var i,a,s=1e-6;return function(o,u){return void 0===i&&(i=new ft),(a=o.dot(u)+1)<s?(a=0,Math.abs(o.x)>Math.abs(o.z)?i.set(-o.y,o.x,0):i.set(0,-o.z,o.y)):i.crossVectors(o,u),this.x=i.x,this.y=i.y,this.z=i.z,this.w=a,this.normalize(),this}}()},__name(Device,"Device");var _t=new Device({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),yt=new Device({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),vt={CardboardV1:new CardboardViewer({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new CardboardViewer({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function DeviceInfo(i,a){this.viewer=vt.CardboardV2,this.updateDeviceParams(i),this.distortion=new Distortion(this.viewer.distortionCoefficients);for(var s=0;s<a.length;s++){var o=a[s];vt[o.id]=new CardboardViewer(o)}}function CardboardViewer(i){this.id=i.id,this.label=i.label,this.fov=i.fov,this.interLensDistance=i.interLensDistance,this.baselineLensDistance=i.baselineLensDistance,this.screenLensDistance=i.screenLensDistance,this.distortionCoefficients=i.distortionCoefficients,this.inverseCoefficients=i.inverseCoefficients}__name(DeviceInfo,"DeviceInfo"),DeviceInfo.prototype.updateDeviceParams=function(i){this.device=this.determineDevice_(i)||this.device},DeviceInfo.prototype.getDevice=function(){return this.device},DeviceInfo.prototype.setViewer=function(i){this.viewer=i,this.distortion=new Distortion(this.viewer.distortionCoefficients)},DeviceInfo.prototype.determineDevice_=function(i){if(!i)return z()?(console.warn("Using fallback iOS device measurements."),yt):(console.warn("Using fallback Android device measurements."),_t);var a=.0254,s=a/i.xdpi,o=a/i.ydpi;return new Device({widthMeters:s*pe(),heightMeters:o*fe(),bevelMeters:.001*i.bevelMm})},DeviceInfo.prototype.getDistortedFieldOfViewLeftEye=function(){var i=this.viewer,a=this.device,s=this.distortion,o=i.screenLensDistance,u=(a.widthMeters-i.interLensDistance)/2,_=i.interLensDistance/2,x=i.baselineLensDistance-a.bevelMeters,w=a.heightMeters-x,C=mt*Math.atan(s.distort(u/o)),L=mt*Math.atan(s.distort(_/o)),B=mt*Math.atan(s.distort(x/o)),U=mt*Math.atan(s.distort(w/o));return{leftDegrees:Math.min(C,i.fov),rightDegrees:Math.min(L,i.fov),downDegrees:Math.min(B,i.fov),upDegrees:Math.min(U,i.fov)}},DeviceInfo.prototype.getLeftEyeVisibleTanAngles=function(){var i=this.viewer,a=this.device,s=this.distortion,o=Math.tan(-pt*i.fov),u=Math.tan(pt*i.fov),_=Math.tan(pt*i.fov),x=Math.tan(-pt*i.fov),w=a.widthMeters/4,C=a.heightMeters/2,L=i.baselineLensDistance-a.bevelMeters-C,B=i.interLensDistance/2-w,U=-L,j=i.screenLensDistance,V=s.distort((B-w)/j),z=s.distort((U+C)/j),$=s.distort((B+w)/j),Y=s.distort((U-C)/j),Z=new Float32Array(4);return Z[0]=Math.max(o,V),Z[1]=Math.min(u,z),Z[2]=Math.min(_,$),Z[3]=Math.max(x,Y),Z},DeviceInfo.prototype.getLeftEyeNoLensTanAngles=function(){var i=this.viewer,a=this.device,s=this.distortion,o=new Float32Array(4),u=s.distortInverse(Math.tan(-pt*i.fov)),_=s.distortInverse(Math.tan(pt*i.fov)),x=s.distortInverse(Math.tan(pt*i.fov)),w=s.distortInverse(Math.tan(-pt*i.fov)),C=a.widthMeters/4,L=a.heightMeters/2,B=i.baselineLensDistance-a.bevelMeters-L,U=i.interLensDistance/2-C,j=-B,V=i.screenLensDistance,z=(U-C)/V,$=(j+L)/V,Y=(U+C)/V,Z=(j-L)/V;return o[0]=Math.max(u,z),o[1]=Math.min(_,$),o[2]=Math.min(x,Y),o[3]=Math.max(w,Z),o},DeviceInfo.prototype.getLeftEyeVisibleScreenRect=function(i){var a=this.viewer,s=this.device,o=a.screenLensDistance,u=(s.widthMeters-a.interLensDistance)/2,_=a.baselineLensDistance-s.bevelMeters,x=(i[0]*o+u)/s.widthMeters,w=(i[1]*o+_)/s.heightMeters,C=(i[2]*o+u)/s.widthMeters,L=(i[3]*o+_)/s.heightMeters;return{x:x,y:L,width:C-x,height:w-L}},DeviceInfo.prototype.getFieldOfViewLeftEye=function(i){return i?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},DeviceInfo.prototype.getFieldOfViewRightEye=function(i){var a=this.getFieldOfViewLeftEye(i);return{leftDegrees:a.rightDegrees,rightDegrees:a.leftDegrees,upDegrees:a.upDegrees,downDegrees:a.downDegrees}},DeviceInfo.prototype.getUndistortedFieldOfViewLeftEye=function(){var i=this.getUndistortedParams_();return{leftDegrees:mt*Math.atan(i.outerDist),rightDegrees:mt*Math.atan(i.innerDist),downDegrees:mt*Math.atan(i.bottomDist),upDegrees:mt*Math.atan(i.topDist)}},DeviceInfo.prototype.getUndistortedViewportLeftEye=function(){var i=this.getUndistortedParams_(),a=this.viewer,s=this.device,o=a.screenLensDistance,u=s.widthMeters/o,_=s.heightMeters/o,x=s.width/u,w=s.height/_,C=Math.round((i.eyePosX-i.outerDist)*x),L=Math.round((i.eyePosY-i.bottomDist)*w);return{x:C,y:L,width:Math.round((i.eyePosX+i.innerDist)*x)-C,height:Math.round((i.eyePosY+i.topDist)*w)-L}},DeviceInfo.prototype.getUndistortedParams_=function(){var i=this.viewer,a=this.device,s=this.distortion,o=i.screenLensDistance,u=i.interLensDistance/2/o,_=a.widthMeters/o,x=a.heightMeters/o,w=_/2-u,C=(i.baselineLensDistance-a.bevelMeters)/o,L=i.fov,B=s.distortInverse(Math.tan(pt*L)),U=Math.min(w,B),j=Math.min(u,B),V=Math.min(C,B);return{outerDist:U,innerDist:j,topDist:Math.min(x-C,B),bottomDist:V,eyePosX:w,eyePosY:C}},__name(CardboardViewer,"CardboardViewer"),DeviceInfo.Viewers=vt;var bt={format:1,last_updated:"2019-11-09T17:36:14Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}]};function Dpdb(i,a){if(this.dpdb=bt,this.recalculateDeviceParams_(),i){this.onDeviceParamsUpdated=a;var s=new XMLHttpRequest,o=this;s.open("GET",i,!0),s.addEventListener("load",function(){o.loading=!1,s.status>=200&&s.status<=299?(o.dpdb=JSON.parse(s.response),o.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),s.send()}}function DeviceParams(i){this.xdpi=i.xdpi,this.ydpi=i.ydpi,this.bevelMm=i.bevelMm}function SensorSample(i,a){this.set(i,a)}function ComplementaryFilter(i,a){this.kFilter=i,this.isDebug=a,this.currentAccelMeasurement=new SensorSample,this.currentGyroMeasurement=new SensorSample,this.previousGyroMeasurement=new SensorSample,z()?this.filterQ=new gt(-1,0,0,1):this.filterQ=new gt(1,0,0,1),this.previousFilterQ=new gt,this.previousFilterQ.copy(this.filterQ),this.accelQ=new gt,this.isOrientationInitialized=!1,this.estimatedGravity=new ft,this.measuredGravity=new ft,this.gyroIntegralQ=new gt}function PosePredictor(i,a){this.predictionTimeS=i,this.isDebug=a,this.previousQ=new gt,this.previousTimestampS=null,this.deltaQ=new gt,this.outQ=new gt}function FusionPoseSensor(i,a,s,o){this.yawOnly=s,this.accelerometer=new ft,this.gyroscope=new ft,this.filter=new ComplementaryFilter(i,o),this.posePredictor=new PosePredictor(a,o),this.isFirefoxAndroid=Z(),this.isIOS=z();var u=ee();this.isDeviceMotionInRadians=!this.isIOS&&u&&u<66,this.isWithoutDeviceMotion=ae()||ie(),this.filterToWorldQ=new gt,z()?this.filterToWorldQ.setFromAxisAngle(new ft(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new ft(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new gt,this.worldToScreenQ=new gt,this.originalPoseAdjustQ=new gt,this.originalPoseAdjustQ.setFromAxisAngle(new ft(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),ce()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new gt,this.orientationOut_=new Float32Array(4),this.start()}__name(Dpdb,"Dpdb"),Dpdb.prototype.getDeviceParams=function(){return this.deviceParams},Dpdb.prototype.recalculateDeviceParams_=function(){var i=this.calcDeviceParams_();i?(this.deviceParams=i,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Dpdb.prototype.calcDeviceParams_=function(){var i=this.dpdb;if(!i)return console.error("DPDB not available."),null;if(1!=i.format)return console.error("DPDB has unexpected format version."),null;if(!i.devices||!i.devices.length)return console.error("DPDB does not have a devices section."),null;var a=navigator.userAgent||navigator.vendor||window.opera,s=pe(),o=fe();if(!i.devices)return console.error("DPDB has no devices section."),null;for(var u=0;u<i.devices.length;u++){var _=i.devices[u];if(_.rules)if("ios"==_.type||"android"==_.type){if(z()==("ios"==_.type)){for(var x=!1,w=0;w<_.rules.length;w++){var C=_.rules[w];if(this.ruleMatches_(C,a,s,o)){x=!0;break}}if(x)return new DeviceParams({xdpi:_.dpi[0]||_.dpi,ydpi:_.dpi[1]||_.dpi,bevelMm:_.bw})}}else console.warn("Device["+u+"] has invalid type.");else console.warn("Device["+u+"] has no rules section.")}return console.warn("No DPDB device match."),null},Dpdb.prototype.ruleMatches_=function(i,a,s,o){if(!i.ua&&!i.res)return!1;if(i.ua&&"SM"===i.ua.substring(0,2)&&(i.ua=i.ua.substring(0,7)),i.ua&&a.indexOf(i.ua)<0)return!1;if(i.res){if(!i.res[0]||!i.res[1])return!1;var u=i.res[0],_=i.res[1];if(Math.min(s,o)!=Math.min(u,_)||Math.max(s,o)!=Math.max(u,_))return!1}return!0},__name(DeviceParams,"DeviceParams"),__name(SensorSample,"SensorSample"),SensorSample.prototype.set=function(i,a){this.sample=i,this.timestampS=a},SensorSample.prototype.copy=function(i){this.set(i.sample,i.timestampS)},__name(ComplementaryFilter,"ComplementaryFilter"),ComplementaryFilter.prototype.addAccelMeasurement=function(i,a){this.currentAccelMeasurement.set(i,a)},ComplementaryFilter.prototype.addGyroMeasurement=function(i,a){this.currentGyroMeasurement.set(i,a);var s=a-this.previousGyroMeasurement.timestampS;de(s)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ComplementaryFilter.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var i=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,a=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,i);this.gyroIntegralQ.multiply(a),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(a);var s=new gt;s.copy(this.filterQ),s.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(s),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var o=new gt;o.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),o.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",mt*We(o),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var u=new gt;u.copy(this.filterQ),u.multiply(o),this.filterQ.slerp(u,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ComplementaryFilter.prototype.getOrientation=function(){return this.filterQ},ComplementaryFilter.prototype.accelToQuaternion_=function(i){var a=new ft;a.copy(i),a.normalize();var s=new gt;return s.setFromUnitVectors(new ft(0,0,-1),a),s.inverse(),s},ComplementaryFilter.prototype.gyroToQuaternionDelta_=function(i,a){var s=new gt,o=new ft;return o.copy(i),o.normalize(),s.setFromAxisAngle(o,i.length()*a),s},__name(PosePredictor,"PosePredictor"),PosePredictor.prototype.getPrediction=function(i,a,s){if(!this.previousTimestampS)return this.previousQ.copy(i),this.previousTimestampS=s,i;var o=new ft;o.copy(a),o.normalize();var u=a.length();if(u<20*pt)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(mt*u).toFixed(1)),this.outQ.copy(i),this.previousQ.copy(i),this.outQ;var _=u*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(o,_),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(i),this.previousTimestampS=s,this.outQ},__name(FusionPoseSensor,"FusionPoseSensor"),FusionPoseSensor.prototype.getPosition=function(){return null},FusionPoseSensor.prototype.getOrientation=function(){var i=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(s=(new gt).setFromAxisAngle(new ft(0,0,-1),0),o=new gt,-90===window.orientation?o.setFromAxisAngle(new ft(0,1,0),Math.PI/-2):o.setFromAxisAngle(new ft(0,1,0),Math.PI/2),s.multiply(o)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((a=new gt).setFromAxisAngle(new ft(1,0,0),-Math.PI/2),a),i=this._deviceOrientationQ,(u=new gt).copy(i),u.multiply(this.deviceOrientationFilterToWorldQ),u.multiply(this.resetQ),u.multiply(this.worldToScreenQ),u.multiplyQuaternions(this.deviceOrientationFixQ,u),this.yawOnly&&(u.x=0,u.z=0,u.normalize()),this.orientationOut_[0]=u.x,this.orientationOut_[1]=u.y,this.orientationOut_[2]=u.z,this.orientationOut_[3]=u.w,this.orientationOut_;var a,s,o,u,_=this.filter.getOrientation();return i=this.posePredictor.getPrediction(_,this.gyroscope,this.previousTimestampS),(u=new gt).copy(this.filterToWorldQ),u.multiply(this.resetQ),u.multiply(i),u.multiply(this.worldToScreenQ),this.yawOnly&&(u.x=0,u.z=0,u.normalize()),this.orientationOut_[0]=u.x,this.orientationOut_[1]=u.y,this.orientationOut_[2]=u.z,this.orientationOut_[3]=u.w,this.orientationOut_},FusionPoseSensor.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),ce()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},FusionPoseSensor.prototype.onDeviceOrientation_=function(i){this._deviceOrientationQ=this._deviceOrientationQ||new gt;var a=i.alpha,s=i.beta,o=i.gamma;a=(a||0)*Math.PI/180,s=(s||0)*Math.PI/180,o=(o||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(s,a,-o)},FusionPoseSensor.prototype.onDeviceMotion_=function(i){this.updateDeviceMotion_(i)},FusionPoseSensor.prototype.updateDeviceMotion_=function(i){var a=i.accelerationIncludingGravity,s=i.rotationRate,o=i.timeStamp/1e3,u=o-this.previousTimestampS;return u<0?(qe("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=o)):u<=B||u>U?(qe("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=o)):(this.accelerometer.set(-a.x,-a.y,-a.z),s&&(le()?this.gyroscope.set(-s.beta,s.alpha,s.gamma):this.gyroscope.set(s.alpha,s.beta,s.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,o)),this.filter.addAccelMeasurement(this.accelerometer,o),void(this.previousTimestampS=o))},FusionPoseSensor.prototype.onOrientationChange_=function(i){this.setScreenTransform_()},FusionPoseSensor.prototype.onMessage_=function(i){var a=i.data;a&&a.type&&"devicemotion"===a.type.toLowerCase()&&this.updateDeviceMotion_(a.deviceMotionEvent)},FusionPoseSensor.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new ft(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new ft(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},FusionPoseSensor.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),z()&&He()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},FusionPoseSensor.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var Tt=60,St=new ft(1,0,0),xt=new ft(0,0,1),wt=new gt;wt.setFromAxisAngle(St,-Math.PI/2),wt.multiply((new gt).setFromAxisAngle(xt,Math.PI/2));var At=function(){function PoseSensor2(i){w(this,PoseSensor2),this.config=i,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new gt,this._outQ=new gt,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return __name(PoseSensor2,"PoseSensor"),C(PoseSensor2,[{key:"init",value:/* @__PURE__ */__name(function init(){var i=null;try{(i=new RelativeOrientationSensor({frequency:Tt,referenceFrame:"screen"})).addEventListener("error",this._onSensorError)}catch(a){this.errors.push(a),"SecurityError"===a.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===a.name?this.useDeviceMotion():console.error(a)}i&&(this.api="sensor",this.sensor=i,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())},"init")},{key:"useDeviceMotion",value:/* @__PURE__ */__name(function useDeviceMotion(){this.api="devicemotion",this.fusionSensor=new FusionPoseSensor(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)},"useDeviceMotion")},{key:"getOrientation",value:/* @__PURE__ */__name(function getOrientation(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var i=this.sensor.quaternion;this._sensorQ.set(i[0],i[1],i[2],i[3]);var a=this._outQ;return a.copy(wt),a.multiply(this._sensorQ),this.config.YAW_ONLY&&(a.x=a.z=0,a.normalize()),this._out[0]=a.x,this._out[1]=a.y,this._out[2]=a.z,this._out[3]=a.w,this._out},"getOrientation")},{key:"_onSensorError",value:/* @__PURE__ */__name(function _onSensorError(i){this.errors.push(i.error),"NotAllowedError"===i.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===i.error.name?console.error("Sensor could not be read"):console.error(i.error),this.useDeviceMotion()},"_onSensorError")},{key:"_onSensorRead",value:/* @__PURE__ */__name(function _onSensorRead(){},"_onSensorRead")}]),PoseSensor2}(),Ct="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function RotateInstructions(){this.loadIcon_();var i=document.createElement("div");(_=i.style).position="fixed",_.top=0,_.right=0,_.bottom=0,_.left=0,_.backgroundColor="gray",_.fontFamily="sans-serif",_.zIndex=1e6;var a=document.createElement("img");a.src=this.icon,(_=a.style).marginLeft="25%",_.marginTop="25%",_.width="50%",i.appendChild(a);var s=document.createElement("div");(_=s.style).textAlign="center",_.fontSize="16px",_.lineHeight="24px",_.margin="24px 25%",_.width="50%",s.innerHTML="Place your phone into your Cardboard viewer.",i.appendChild(s);var o=document.createElement("div");(_=o.style).backgroundColor="#CFD8DC",_.position="fixed",_.bottom=0,_.width="100%",_.height="48px",_.padding="14px 24px",_.boxSizing="border-box",_.color="#656A6B",i.appendChild(o);var u=document.createElement("div");u.style.float="left",u.innerHTML="No Cardboard viewer?";var _,x=document.createElement("a");x.href="https://www.google.com/get/cardboard/get-cardboard/",x.innerHTML="get one",x.target="_blank",(_=x.style).float="right",_.fontWeight=600,_.textTransform="uppercase",_.borderLeft="1px solid gray",_.paddingLeft="24px",_.textDecoration="none",_.color="#656A6B",o.appendChild(u),o.appendChild(x),this.overlay=i,this.text=s,this.hide()}__name(RotateInstructions,"RotateInstructions"),RotateInstructions.prototype.show=function(i){i||this.overlay.parentElement?i&&(this.overlay.parentElement&&this.overlay.parentElement!=i&&this.overlay.parentElement.removeChild(this.overlay),i.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var a=this.overlay.querySelector("img").style;ce()?(a.width="20%",a.marginLeft="40%",a.marginTop="3%"):(a.width="50%",a.marginLeft="25%",a.marginTop="25%")},RotateInstructions.prototype.hide=function(){this.overlay.style.display="none"},RotateInstructions.prototype.showTemporarily=function(i,a){this.show(a),this.timer=setTimeout(this.hide.bind(this),i)},RotateInstructions.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},RotateInstructions.prototype.update=function(){this.disableShowTemporarily(),!ce()&&we()?this.show():this.hide()},RotateInstructions.prototype.loadIcon_=function(){this.icon=j("image/svg+xml",Ct)};var Et="CardboardV1",Mt="WEBVR_CARDBOARD_VIEWER",kt="webvr-polyfill-viewer-selector";function ViewerSelector(i){try{this.selectedKey=localStorage.getItem(Mt)}catch(a){console.error("Failed to load viewer profile: %s",a)}this.selectedKey||(this.selectedKey=i||Et),this.dialog=this.createDialog_(DeviceInfo.Viewers),this.root=null,this.onChangeCallbacks_=[]}__name(ViewerSelector,"ViewerSelector"),ViewerSelector.prototype.show=function(i){this.root=i,i.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},ViewerSelector.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},ViewerSelector.prototype.getCurrentViewer=function(){return DeviceInfo.Viewers[this.selectedKey]},ViewerSelector.prototype.getSelectedKey_=function(){var i=this.dialog.querySelector("input[name=field]:checked");return i?i.id:null},ViewerSelector.prototype.onChange=function(i){this.onChangeCallbacks_.push(i)},ViewerSelector.prototype.fireOnChange_=function(i){for(var a=0;a<this.onChangeCallbacks_.length;a++)this.onChangeCallbacks_[a](i)},ViewerSelector.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&DeviceInfo.Viewers[this.selectedKey]){this.fireOnChange_(DeviceInfo.Viewers[this.selectedKey]);try{localStorage.setItem(Mt,this.selectedKey)}catch(i){console.error("Failed to save viewer profile: %s",i)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},ViewerSelector.prototype.createDialog_=function(i){var a=document.createElement("div");a.classList.add(kt),a.style.display="none";var s=document.createElement("div");(_=s.style).position="fixed",_.left=0,_.top=0,_.width="100%",_.height="100%",_.background="rgba(0, 0, 0, 0.3)",s.addEventListener("click",this.hide.bind(this));var o=280,u=document.createElement("div"),_=u.style;for(var x in _.boxSizing="border-box",_.position="fixed",_.top="24px",_.left="50%",_.marginLeft=-o/2+"px",_.width=o+"px",_.padding="24px",_.overflow="hidden",_.background="#fafafa",_.fontFamily="'Roboto', sans-serif",_.boxShadow="0px 5px 20px #666",u.appendChild(this.createH1_("Select your viewer")),i)u.appendChild(this.createChoice_(x,i[x].label));return u.appendChild(this.createButton_("Save",this.onSave_.bind(this))),a.appendChild(s),a.appendChild(u),a},ViewerSelector.prototype.createH1_=function(i){var a=document.createElement("h1"),s=a.style;return s.color="black",s.fontSize="20px",s.fontWeight="bold",s.marginTop=0,s.marginBottom="24px",a.innerHTML=i,a},ViewerSelector.prototype.createChoice_=function(i,a){var s=document.createElement("div");s.style.marginTop="8px",s.style.color="black";var o=document.createElement("input");o.style.fontSize="30px",o.setAttribute("id",i),o.setAttribute("type","radio"),o.setAttribute("value",i),o.setAttribute("name","field");var u=document.createElement("label");return u.style.marginLeft="4px",u.setAttribute("for",i),u.innerHTML=a,s.appendChild(o),s.appendChild(u),s},ViewerSelector.prototype.createButton_=function(i,a){var s=document.createElement("button");s.innerHTML=i;var o=s.style;return o.float="right",o.textTransform="uppercase",o.color="#1094f7",o.fontSize="14px",o.letterSpacing=0,o.border=0,o.background="none",o.marginTop="16px",s.addEventListener("click",a),s};var Pt="undefined"!=typeof window?window:void 0!==x?x:"undefined"!=typeof self?self:{};function unwrapExports(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function createCommonjsModule(i,a){return i(a={exports:{}},a.exports),a.exports}__name(unwrapExports,"unwrapExports"),__name(createCommonjsModule,"createCommonjsModule");var It=createCommonjsModule(function(i,a){
/* @__PURE__ */__name(function webpackUniversalModuleDefinition(a,s){i.exports=s()},"webpackUniversalModuleDefinition")(Pt,function(){return function(i){var a={};function __webpack_require__(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return i[s].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}return __name(__webpack_require__,"__webpack_require__"),__webpack_require__.m=i,__webpack_require__.c=a,__webpack_require__.d=function(i,a,s){__webpack_require__.o(i,a)||Object.defineProperty(i,a,{configurable:!1,enumerable:!0,get:s})},__webpack_require__.n=function(i){var a=i&&i.__esModule?/* @__PURE__ */__name(function getDefault(){return i.default},"getDefault"):/* @__PURE__ */__name(function getModuleExports(){return i},"getModuleExports");return __webpack_require__.d(a,"a",a),a},__webpack_require__.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(i,a,s){var o=/* @__PURE__ */function(){function defineProperties(i,a){for(var s=0;s<a.length;s++){var o=a[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}return __name(defineProperties,"defineProperties"),function(i,a,s){return a&&defineProperties(i.prototype,a),s&&defineProperties(i,s),i}}();function _classCallCheck(i,a){if(!(i instanceof a))throw new TypeError("Cannot call a class as a function")}__name(_classCallCheck,"_classCallCheck");var u=s(1),_="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,x=function(){function NoSleep3(){_classCallCheck(this,NoSleep3),_?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",u),this.noSleepVideo.addEventListener("timeupdate",function(i){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return __name(NoSleep3,"NoSleep"),o(NoSleep3,[{key:"enable",value:/* @__PURE__ */__name(function enable(){_?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()},"enable")},{key:"disable",value:/* @__PURE__ */__name(function disable(){_?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()},"disable")}]),NoSleep3}();i.exports=x},function(i,a,s){i.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),Lt=unwrapExports(It),Dt=1e3,Rt=[0,0,.5,1],Ot=[.5,0,.5,1],Nt=window.requestAnimationFrame,Bt=window.cancelAnimationFrame;function VRFrameData2(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function VRDisplayCapabilities(i){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:i.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:i.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:i.canPresent},maxLayers:{writable:!1,enumerable:!0,value:i.maxLayers},hasOrientation:{enumerable:!0,get:/* @__PURE__ */__name(function get2(){return Xe("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),i.hasOrientation},"get")}})}function VRDisplay(i){var a=!("wakelock"in(i=i||{}))||i.wakelock;this.isPolyfilled=!0,this.displayId=Dt++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:/* @__PURE__ */__name(function get2(){return Xe("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1},"get")}),this.capabilities=new VRDisplayCapabilities({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,a&&we()&&(this.wakelock_=new Lt)}__name(VRFrameData2,"VRFrameData"),__name(VRDisplayCapabilities,"VRDisplayCapabilities"),__name(VRDisplay,"VRDisplay"),VRDisplay.prototype.getFrameData=function(i){return ze(i,this._getPose(),this)},VRDisplay.prototype.getPose=function(){return Xe("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},VRDisplay.prototype.resetPose=function(){return Xe("VRDisplay.prototype.resetPose"),this._resetPose()},VRDisplay.prototype.getImmediatePose=function(){return Xe("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},VRDisplay.prototype.requestAnimationFrame=function(i){return Nt(i)},VRDisplay.prototype.cancelAnimationFrame=function(i){return Bt(i)},VRDisplay.prototype.wrapForFullscreen=function(i){if(z())return i;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var a=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",a.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==i)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=i,this.originalParent_=i.parentElement,this.originalParent_||document.body.appendChild(i),!this.fullscreenWrapper_.parentElement){var s=this.fullscreenElement_.parentElement;s.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),s.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var o=this;function applyFullscreenElementStyle(){if(o.fullscreenElement_){var i=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];o.fullscreenElement_.setAttribute("style",i.join("; ")+";")}}return __name(applyFullscreenElementStyle,"applyFullscreenElementStyle"),applyFullscreenElementStyle(),this.fullscreenWrapper_},VRDisplay.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var i=this.fullscreenElement_;this.fullscreenElementCachedStyle_?i.setAttribute("style",this.fullscreenElementCachedStyle_):i.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var a=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(i),this.originalParent_===a?a.insertBefore(i,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(i),a.removeChild(this.fullscreenWrapper_),i}},VRDisplay.prototype.requestPresent=function(i){var a=this.isPresenting,s=this;return i instanceof Array||(Xe("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),i=[i]),new Promise(function(o,u){if(s.capabilities.canPresent)if(0==i.length||i.length>s.capabilities.maxLayers)u(new Error("Invalid number of layers."));else{var _=i[0];if(_.source){var x=_.leftBounds||Rt,w=_.rightBounds||Ot;if(a){var C=s.layer_;C.source!==_.source&&(C.source=_.source);for(var L=0;L<4;L++)C.leftBounds[L]=x[L],C.rightBounds[L]=w[L];return s.wrapForFullscreen(s.layer_.source),s.updatePresent_(),void o()}if(s.layer_={predistorted:_.predistorted,source:_.source,leftBounds:x.slice(0),rightBounds:w.slice(0)},s.waitingForPresent_=!1,s.layer_&&s.layer_.source){var B=s.wrapForFullscreen(s.layer_.source),U=/* @__PURE__ */__name(function onFullscreenChange2(){var i=be();s.isPresenting=B===i,s.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(i){console.error("screen.orientation.lock() failed due to",i.message)}),s.waitingForPresent_=!1,s.beginPresent_(),o()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),s.removeFullscreenWrapper(),s.disableWakeLock(),s.endPresent_(),s.removeFullscreenListeners_()),s.fireVRDisplayPresentChange_()},"onFullscreenChange"),j=/* @__PURE__ */__name(function onFullscreenError2(){s.waitingForPresent_&&(s.removeFullscreenWrapper(),s.removeFullscreenListeners_(),s.disableWakeLock(),s.waitingForPresent_=!1,s.isPresenting=!1,u(new Error("Unable to present.")))},"onFullscreenError");s.addFullscreenListeners_(B,U,j),_e(B)?(s.enableWakeLock(),s.waitingForPresent_=!0):(z()||$())&&(s.enableWakeLock(),s.isPresenting=!0,s.beginPresent_(),s.fireVRDisplayPresentChange_(),o())}s.waitingForPresent_||z()||(ye(),u(new Error("Unable to present.")))}else o()}else u(new Error("VRDisplay is not capable of presenting."))})},VRDisplay.prototype.exitPresent=function(){var i=this.isPresenting,a=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(s,o){i?(!ye()&&z()&&(a.endPresent_(),a.fireVRDisplayPresentChange_()),$()&&(a.removeFullscreenWrapper(),a.removeFullscreenListeners_(),a.endPresent_(),a.fireVRDisplayPresentChange_()),s()):o(new Error("Was not presenting to VRDisplay."))})},VRDisplay.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},VRDisplay.prototype.fireVRDisplayPresentChange_=function(){var i=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(i)},VRDisplay.prototype.fireVRDisplayConnect_=function(){var i=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(i)},VRDisplay.prototype.addFullscreenListeners_=function(i,a,s){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=i,this.fullscreenChangeHandler_=a,this.fullscreenErrorHandler_=s,a&&(document.fullscreenEnabled?i.addEventListener("fullscreenchange",a,!1):document.webkitFullscreenEnabled?i.addEventListener("webkitfullscreenchange",a,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",a,!1):document.msFullscreenEnabled&&i.addEventListener("msfullscreenchange",a,!1)),s&&(document.fullscreenEnabled?i.addEventListener("fullscreenerror",s,!1):document.webkitFullscreenEnabled?i.addEventListener("webkitfullscreenerror",s,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",s,!1):document.msFullscreenEnabled&&i.addEventListener("msfullscreenerror",s,!1))},VRDisplay.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var i=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var a=this.fullscreenChangeHandler_;i.removeEventListener("fullscreenchange",a,!1),i.removeEventListener("webkitfullscreenchange",a,!1),document.removeEventListener("mozfullscreenchange",a,!1),i.removeEventListener("msfullscreenchange",a,!1)}if(this.fullscreenErrorHandler_){var s=this.fullscreenErrorHandler_;i.removeEventListener("fullscreenerror",s,!1),i.removeEventListener("webkitfullscreenerror",s,!1),document.removeEventListener("mozfullscreenerror",s,!1),i.removeEventListener("msfullscreenerror",s,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},VRDisplay.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},VRDisplay.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},VRDisplay.prototype.beginPresent_=function(){},VRDisplay.prototype.endPresent_=function(){},VRDisplay.prototype.submitFrame=function(i){},VRDisplay.prototype.getEyeParameters=function(i){return null};var Ft={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},Ut={LEFT:"left",RIGHT:"right"};function CardboardVRDisplay2(i){var a=Pe({},Ft);i=Pe(a,i||{}),VRDisplay.call(this,{wakelock:i.MOBILE_WAKE_LOCK}),this.config=i,this.displayName="Cardboard VRDisplay",this.capabilities=new VRDisplayCapabilities({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new At(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Dpdb(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new DeviceInfo(this.dpdb_.getDeviceParams(),i.ADDITIONAL_VIEWERS),this.viewerSelector_=new ViewerSelector(i.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new RotateInstructions),z()&&window.addEventListener("resize",this.onResize_.bind(this))}return __name(CardboardVRDisplay2,"CardboardVRDisplay"),CardboardVRDisplay2.prototype=Object.create(VRDisplay.prototype),CardboardVRDisplay2.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},CardboardVRDisplay2.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},CardboardVRDisplay2.prototype._getFieldOfView=function(i){var a;if(i==Ut.LEFT)a=this.deviceInfo_.getFieldOfViewLeftEye();else{if(i!=Ut.RIGHT)return console.error("Invalid eye provided: %s",i),null;a=this.deviceInfo_.getFieldOfViewRightEye()}return a},CardboardVRDisplay2.prototype._getEyeOffset=function(i){var a;if(i==Ut.LEFT)a=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(i!=Ut.RIGHT)return console.error("Invalid eye provided: %s",i),null;a=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return a},CardboardVRDisplay2.prototype.getEyeParameters=function(i){var a=this._getEyeOffset(i),s=this._getFieldOfView(i),o={offset:a,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(o,"fieldOfView",{enumerable:!0,get:/* @__PURE__ */__name(function get2(){return Xe("VRFieldOfView","VRFrameData's projection matrices"),s},"get")}),o},CardboardVRDisplay2.prototype.onDeviceParamsUpdated_=function(i){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(i),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},CardboardVRDisplay2.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},CardboardVRDisplay2.prototype.beginPresent_=function(){var i=this.layer_.source.getContext("webgl");i||(i=this.layer_.source.getContext("experimental-webgl")),i||(i=this.layer_.source.getContext("webgl2")),i&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(i.canvas.width=pe()*this.bufferScale_,i.canvas.height=fe()*this.bufferScale_,this.cardboardUI_=new CardboardUI(i)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new CardboardUI(i)),this.distorter_=new CardboardDistorter(i,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(i){this.viewerSelector_.show(this.layer_.source.parentElement),i.stopPropagation(),i.preventDefault()}.bind(this),function(i){this.exitPresent(),i.stopPropagation(),i.preventDefault()}.bind(this)),this.rotateInstructions_&&(ce()&&we()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},CardboardVRDisplay2.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},CardboardVRDisplay2.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},CardboardVRDisplay2.prototype.submitFrame=function(i){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var a=this.layer_.source.getContext("webgl");a||(a=this.layer_.source.getContext("experimental-webgl")),a||(a=this.layer_.source.getContext("webgl2"));var s=a.canvas;s.width==this.lastWidth&&s.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=s.width,this.lastHeight=s.height,this.cardboardUI_.render()}},CardboardVRDisplay2.prototype.onOrientationChange_=function(i){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},CardboardVRDisplay2.prototype.onResize_=function(i){if(this.layer_){var a=this.layer_.source.getContext("webgl");a||(a=this.layer_.source.getContext("experimental-webgl")),a||(a=this.layer_.source.getContext("webgl2"));var s=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];a.canvas.setAttribute("style",s.join("; ")+";"),Re(a.canvas)}},CardboardVRDisplay2.prototype.onViewerChanged_=function(i){this.deviceInfo_.setViewer(i),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},CardboardVRDisplay2.prototype.fireVRDisplayDeviceParamsChange_=function(){var i=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(i)},CardboardVRDisplay2.VRFrameData=VRFrameData2,CardboardVRDisplay2.VRDisplay=VRDisplay,CardboardVRDisplay2});var L=/* @__PURE__ */getDefaultExportFromCjs2(C.exports),B="0.10.12",U={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function WebVRPolyfill(i){this.config=_(_({},U),i),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&o())&&(this.enable(),this.getVRDisplays().then(function(i){i&&i[0]&&i[0].fireVRDisplayConnect_&&i[0].fireVRDisplayConnect_()}))}function asyncGeneratorStep(i,a,s,o,u,_,x){try{var w=i[_](x),C=w.value}catch(L){return void s(L)}w.done?a(C):Promise.resolve(C).then(o,u)}function _asyncToGenerator(i){return function(){var a=this,s=arguments;return new Promise(function(o,u){var _=i.apply(a,s);function _next(i){asyncGeneratorStep(_,o,u,_next,_throw,"next",i)}function _throw(i){asyncGeneratorStep(_,o,u,_next,_throw,"throw",i)}__name(_next,"_next"),__name(_throw,"_throw"),_next(void 0)})}}function _extends2(){return _extends2=Object.assign?Object.assign.bind():function(i){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},_extends2.apply(this,arguments)}__name(WebVRPolyfill,"WebVRPolyfill"),WebVRPolyfill.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(o()){var i=new L({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(i)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},WebVRPolyfill.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var i=this.native.VRFrameData,a=new this.native.VRFrameData,s=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(o){o instanceof i?s.call(this,o):(s.call(this,a),o.pose=a.pose,u(a.leftProjectionMatrix,o.leftProjectionMatrix),u(a.rightProjectionMatrix,o.rightProjectionMatrix),u(a.leftViewMatrix,o.leftViewMatrix),u(a.rightViewMatrix,o.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=L.VRDisplay,window.VRFrameData=L.VRFrameData},WebVRPolyfill.prototype.getVRDisplays=function(){return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(i=>i.length>0?i:this.getPolyfillDisplays()):Promise.resolve(this.getPolyfillDisplays())},WebVRPolyfill.version=B,WebVRPolyfill.VRFrameData=L.VRFrameData,WebVRPolyfill.VRDisplay=L.VRDisplay,__name(asyncGeneratorStep,"asyncGeneratorStep"),__name(_asyncToGenerator,"_asyncToGenerator"),__name(_extends2,"_extends");const j="125",V={LEFT:0,MIDDLE:1,RIGHT:2},z=0,$=1,Y=2,Z=1,ee=2,ie=3,ae=0,le=1,ce=2,de=1,pe=0,fe=1,_e=2,ye=3,be=4,Te=5,Se=100,xe=101,we=102,Pe=103,Re=104,ze=200,He=201,$e=202,We=203,qe=204,Xe=205,Qe=206,Ye=207,et=208,tt=209,nt=210,it=0,rt=1,at=2,st=3,ot=4,lt=5,ct=6,ut=7,dt=0,ht=1,pt=2,mt=0,ft=1,gt=2,_t=3,yt=4,vt=5,bt=300,Tt=301,St=302,xt=303,wt=304,At=306,Ct=307,Et=1e3,Mt=1001,kt=1002,Pt=1003,It=1004,Lt=1005,Dt=1006,Rt=1007,Ot=1008,Nt=1009,Bt=1010,Ft=1011,Ut=1012,jt=1013,Vt=1014,zt=1015,Ht=1016,$t=1017,Gt=1018,Wt=1019,qt=1020,Qt=1021,Kt=1022,Yt=1023,Jt=1024,Zt=1025,en=1026,tn=1027,nn=1028,rn=1029,an=1030,sn=1031,ln=1032,cn=1033,un=33776,dn=33777,hn=33778,pn=33779,mn=35840,fn=35841,gn=35842,_n=35843,yn=36196,vn=37492,bn=37496,Tn=37808,Sn=37809,xn=37810,wn=37811,An=37812,Cn=37813,En=37814,Mn=37815,kn=37816,Pn=37817,In=37818,Ln=37819,Dn=37820,Rn=37821,On=36492,Nn=37840,Bn=37841,Fn=37842,Un=37843,jn=37844,Vn=37845,zn=37846,Hn=37847,$n=37848,Gn=37849,Wn=37850,qn=37851,Xn=37852,Qn=37853,Kn=2200,Yn=2201,Jn=2202,Zn=2300,_i=2301,Ei=2302,Mi=2400,Pi=2401,Ri=2402,Oi=2500,Wi=2501,er=0,tr=3e3,nr=3001,ir=3007,rr=3002,ar=3003,sr=3004,or=3005,lr=3006,cr=3200,ur=3201,dr=0,hr=1,pr=7680,mr=519,fr=35044,gr=35048,_r="300 es";function EventDispatcher(){}__name(EventDispatcher,"EventDispatcher"),_extends2(EventDispatcher.prototype,{addEventListener:/* @__PURE__ */__name(function(i,a){void 0===this._listeners&&(this._listeners={});const s=this._listeners;void 0===s[i]&&(s[i]=[]),-1===s[i].indexOf(a)&&s[i].push(a)},"addEventListener"),hasEventListener:/* @__PURE__ */__name(function(i,a){if(void 0===this._listeners)return!1;const s=this._listeners;return void 0!==s[i]&&-1!==s[i].indexOf(a)},"hasEventListener"),removeEventListener:/* @__PURE__ */__name(function(i,a){if(void 0===this._listeners)return;const s=this._listeners[i];if(void 0!==s){const i=s.indexOf(a);-1!==i&&s.splice(i,1)}},"removeEventListener"),dispatchEvent:/* @__PURE__ */__name(function(i){if(void 0===this._listeners)return;const a=this._listeners[i.type];if(void 0!==a){i.target=this;const s=a.slice(0);for(let a=0,o=s.length;a<o;a++)s[a].call(this,i)}},"dispatchEvent")});const yr=[];for(let Xt=0;Xt<256;Xt++)yr[Xt]=(Xt<16?"0":"")+Xt.toString(16);let vr=1234567;const br={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:/* @__PURE__ */__name(function(){const i=4294967295*Math.random()|0,a=4294967295*Math.random()|0,s=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return(yr[255&i]+yr[i>>8&255]+yr[i>>16&255]+yr[i>>24&255]+"-"+yr[255&a]+yr[a>>8&255]+"-"+yr[a>>16&15|64]+yr[a>>24&255]+"-"+yr[63&s|128]+yr[s>>8&255]+"-"+yr[s>>16&255]+yr[s>>24&255]+yr[255&o]+yr[o>>8&255]+yr[o>>16&255]+yr[o>>24&255]).toUpperCase()},"generateUUID"),clamp:/* @__PURE__ */__name(function(i,a,s){return Math.max(a,Math.min(s,i))},"clamp"),euclideanModulo:/* @__PURE__ */__name(function(i,a){return(i%a+a)%a},"euclideanModulo"),mapLinear:/* @__PURE__ */__name(function(i,a,s,o,u){return o+(i-a)*(u-o)/(s-a)},"mapLinear"),lerp:/* @__PURE__ */__name(function(i,a,s){return(1-s)*i+s*a},"lerp"),damp:/* @__PURE__ */__name(function(i,a,s,o){return br.lerp(i,a,1-Math.exp(-s*o))},"damp"),pingpong:/* @__PURE__ */__name(function(i,a=1){return a-Math.abs(br.euclideanModulo(i,2*a)-a)},"pingpong"),smoothstep:/* @__PURE__ */__name(function(i,a,s){return i<=a?0:i>=s?1:(i=(i-a)/(s-a))*i*(3-2*i)},"smoothstep"),smootherstep:/* @__PURE__ */__name(function(i,a,s){return i<=a?0:i>=s?1:(i=(i-a)/(s-a))*i*i*(i*(6*i-15)+10)},"smootherstep"),randInt:/* @__PURE__ */__name(function(i,a){return i+Math.floor(Math.random()*(a-i+1))},"randInt"),randFloat:/* @__PURE__ */__name(function(i,a){return i+Math.random()*(a-i)},"randFloat"),randFloatSpread:/* @__PURE__ */__name(function(i){return i*(.5-Math.random())},"randFloatSpread"),seededRandom:/* @__PURE__ */__name(function(i){return void 0!==i&&(vr=i%2147483647),vr=16807*vr%2147483647,(vr-1)/2147483646},"seededRandom"),degToRad:/* @__PURE__ */__name(function(i){return i*br.DEG2RAD},"degToRad"),radToDeg:/* @__PURE__ */__name(function(i){return i*br.RAD2DEG},"radToDeg"),isPowerOfTwo:/* @__PURE__ */__name(function(i){return!(i&i-1)&&0!==i},"isPowerOfTwo"),ceilPowerOfTwo:/* @__PURE__ */__name(function(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},"ceilPowerOfTwo"),floorPowerOfTwo:/* @__PURE__ */__name(function(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))},"floorPowerOfTwo"),setQuaternionFromProperEuler:/* @__PURE__ */__name(function(i,a,s,o,u){const _=Math.cos,x=Math.sin,w=_(s/2),C=x(s/2),L=_((a+o)/2),B=x((a+o)/2),U=_((a-o)/2),j=x((a-o)/2),V=_((o-a)/2),z=x((o-a)/2);switch(u){case"XYX":i.set(w*B,C*U,C*j,w*L);break;case"YZY":i.set(C*j,w*B,C*U,w*L);break;case"ZXZ":i.set(C*U,C*j,w*B,w*L);break;case"XZX":i.set(w*B,C*z,C*V,w*L);break;case"YXY":i.set(C*V,w*B,C*z,w*L);break;case"ZYZ":i.set(C*z,C*V,w*B,w*L);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+u)}},"setQuaternionFromProperEuler")},Tr=class _Vector2{constructor(i=0,a=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=i,this.y=a}get width(){return this.x}set width(i){this.x=i}get height(){return this.y}set height(i){this.y=i}set(i,a){return this.x=i,this.y=a,this}setScalar(i){return this.x=i,this.y=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setComponent(i,a){switch(i){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y)}copy(i){return this.x=i.x,this.y=i.y,this}add(i,a){return void 0!==a?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(i,a)):(this.x+=i.x,this.y+=i.y,this)}addScalar(i){return this.x+=i,this.y+=i,this}addVectors(i,a){return this.x=i.x+a.x,this.y=i.y+a.y,this}addScaledVector(i,a){return this.x+=i.x*a,this.y+=i.y*a,this}sub(i,a){return void 0!==a?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(i,a)):(this.x-=i.x,this.y-=i.y,this)}subScalar(i){return this.x-=i,this.y-=i,this}subVectors(i,a){return this.x=i.x-a.x,this.y=i.y-a.y,this}multiply(i){return this.x*=i.x,this.y*=i.y,this}multiplyScalar(i){return this.x*=i,this.y*=i,this}divide(i){return this.x/=i.x,this.y/=i.y,this}divideScalar(i){return this.multiplyScalar(1/i)}applyMatrix3(i){const a=this.x,s=this.y,o=i.elements;return this.x=o[0]*a+o[3]*s+o[6],this.y=o[1]*a+o[4]*s+o[7],this}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this}clamp(i,a){return this.x=Math.max(i.x,Math.min(a.x,this.x)),this.y=Math.max(i.y,Math.min(a.y,this.y)),this}clampScalar(i,a){return this.x=Math.max(i,Math.min(a,this.x)),this.y=Math.max(i,Math.min(a,this.y)),this}clampLength(i,a){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(i,Math.min(a,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(i){return this.x*i.x+this.y*i.y}cross(i){return this.x*i.y-this.y*i.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(i){return Math.sqrt(this.distanceToSquared(i))}distanceToSquared(i){const a=this.x-i.x,s=this.y-i.y;return a*a+s*s}manhattanDistanceTo(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,a){return this.x+=(i.x-this.x)*a,this.y+=(i.y-this.y)*a,this}lerpVectors(i,a,s){return this.x=i.x+(a.x-i.x)*s,this.y=i.y+(a.y-i.y)*s,this}equals(i){return i.x===this.x&&i.y===this.y}fromArray(i,a=0){return this.x=i[a],this.y=i[a+1],this}toArray(i=[],a=0){return i[a]=this.x,i[a+1]=this.y,i}fromBufferAttribute(i,a,s){return void 0!==s&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=i.getX(a),this.y=i.getY(a),this}rotateAround(i,a){const s=Math.cos(a),o=Math.sin(a),u=this.x-i.x,_=this.y-i.y;return this.x=u*s-_*o+i.x,this.y=u*o+_*s+i.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}};__name(Tr,"Vector2");let Sr=Tr;const xr=class _Matrix3{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(i,a,s,o,u,_,x,w,C){const L=this.elements;return L[0]=i,L[1]=o,L[2]=x,L[3]=a,L[4]=u,L[5]=w,L[6]=s,L[7]=_,L[8]=C,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(i){const a=this.elements,s=i.elements;return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[4]=s[4],a[5]=s[5],a[6]=s[6],a[7]=s[7],a[8]=s[8],this}extractBasis(i,a,s){return i.setFromMatrix3Column(this,0),a.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(i){const a=i.elements;return this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]),this}multiply(i){return this.multiplyMatrices(this,i)}premultiply(i){return this.multiplyMatrices(i,this)}multiplyMatrices(i,a){const s=i.elements,o=a.elements,u=this.elements,_=s[0],x=s[3],w=s[6],C=s[1],L=s[4],B=s[7],U=s[2],j=s[5],V=s[8],z=o[0],$=o[3],Y=o[6],Z=o[1],ee=o[4],ie=o[7],ae=o[2],le=o[5],ce=o[8];return u[0]=_*z+x*Z+w*ae,u[3]=_*$+x*ee+w*le,u[6]=_*Y+x*ie+w*ce,u[1]=C*z+L*Z+B*ae,u[4]=C*$+L*ee+B*le,u[7]=C*Y+L*ie+B*ce,u[2]=U*z+j*Z+V*ae,u[5]=U*$+j*ee+V*le,u[8]=U*Y+j*ie+V*ce,this}multiplyScalar(i){const a=this.elements;return a[0]*=i,a[3]*=i,a[6]*=i,a[1]*=i,a[4]*=i,a[7]*=i,a[2]*=i,a[5]*=i,a[8]*=i,this}determinant(){const i=this.elements,a=i[0],s=i[1],o=i[2],u=i[3],_=i[4],x=i[5],w=i[6],C=i[7],L=i[8];return a*_*L-a*x*C-s*u*L+s*x*w+o*u*C-o*_*w}invert(){const i=this.elements,a=i[0],s=i[1],o=i[2],u=i[3],_=i[4],x=i[5],w=i[6],C=i[7],L=i[8],B=L*_-x*C,U=x*w-L*u,j=C*u-_*w,V=a*B+s*U+o*j;if(0===V)return this.set(0,0,0,0,0,0,0,0,0);const z=1/V;return i[0]=B*z,i[1]=(o*C-L*s)*z,i[2]=(x*s-o*_)*z,i[3]=U*z,i[4]=(L*a-o*w)*z,i[5]=(o*u-x*a)*z,i[6]=j*z,i[7]=(s*w-C*a)*z,i[8]=(_*a-s*u)*z,this}transpose(){let i;const a=this.elements;return i=a[1],a[1]=a[3],a[3]=i,i=a[2],a[2]=a[6],a[6]=i,i=a[5],a[5]=a[7],a[7]=i,this}getNormalMatrix(i){return this.setFromMatrix4(i).copy(this).invert().transpose()}transposeIntoArray(i){const a=this.elements;return i[0]=a[0],i[1]=a[3],i[2]=a[6],i[3]=a[1],i[4]=a[4],i[5]=a[7],i[6]=a[2],i[7]=a[5],i[8]=a[8],this}setUvTransform(i,a,s,o,u,_,x){const w=Math.cos(u),C=Math.sin(u);return this.set(s*w,s*C,-s*(w*_+C*x)+_+i,-o*C,o*w,-o*(-C*_+w*x)+x+a,0,0,1),this}scale(i,a){const s=this.elements;return s[0]*=i,s[3]*=i,s[6]*=i,s[1]*=a,s[4]*=a,s[7]*=a,this}rotate(i){const a=Math.cos(i),s=Math.sin(i),o=this.elements,u=o[0],_=o[3],x=o[6],w=o[1],C=o[4],L=o[7];return o[0]=a*u+s*w,o[3]=a*_+s*C,o[6]=a*x+s*L,o[1]=-s*u+a*w,o[4]=-s*_+a*C,o[7]=-s*x+a*L,this}translate(i,a){const s=this.elements;return s[0]+=i*s[2],s[3]+=i*s[5],s[6]+=i*s[8],s[1]+=a*s[2],s[4]+=a*s[5],s[7]+=a*s[8],this}equals(i){const a=this.elements,s=i.elements;for(let o=0;o<9;o++)if(a[o]!==s[o])return!1;return!0}fromArray(i,a=0){for(let s=0;s<9;s++)this.elements[s]=i[s+a];return this}toArray(i=[],a=0){const s=this.elements;return i[a]=s[0],i[a+1]=s[1],i[a+2]=s[2],i[a+3]=s[3],i[a+4]=s[4],i[a+5]=s[5],i[a+6]=s[6],i[a+7]=s[7],i[a+8]=s[8],i}};__name(xr,"Matrix3");let wr,Ar=xr;const Cr={getDataURL:/* @__PURE__ */__name(function(i){if(/^data:/i.test(i.src))return i.src;if("undefined"==typeof HTMLCanvasElement)return i.src;let a;if(i instanceof HTMLCanvasElement)a=i;else{void 0===wr&&(wr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),wr.width=i.width,wr.height=i.height;const s=wr.getContext("2d");i instanceof ImageData?s.putImageData(i,0,0):s.drawImage(i,0,0,i.width,i.height),a=wr}return a.width>2048||a.height>2048?a.toDataURL("image/jpeg",.6):a.toDataURL("image/png")},"getDataURL")};let Er=0;function Texture(i=Texture.DEFAULT_IMAGE,a=Texture.DEFAULT_MAPPING,s=Mt,o=Mt,u=Dt,_=Ot,x=Yt,w=Nt,C=1,L=tr){Object.defineProperty(this,"id",{value:Er++}),this.uuid=br.generateUUID(),this.name="",this.image=i,this.mipmaps=[],this.mapping=a,this.wrapS=s,this.wrapT=o,this.magFilter=u,this.minFilter=_,this.anisotropy=C,this.format=x,this.internalFormat=null,this.type=w,this.offset=new Sr(0,0),this.repeat=new Sr(1,1),this.center=new Sr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ar,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=L,this.version=0,this.onUpdate=null}function serializeImage(i){return"undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap?Cr.getDataURL(i):i.data?{data:Array.prototype.slice.call(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}__name(Texture,"Texture"),Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=bt,Texture.prototype=_extends2(Object.create(EventDispatcher.prototype),{constructor:Texture,isTexture:!0,updateMatrix:/* @__PURE__ */__name(function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},"updateMatrix"),clone:/* @__PURE__ */__name(function(){return(new this.constructor).copy(this)},"clone"),copy:/* @__PURE__ */__name(function(i){return this.name=i.name,this.image=i.image,this.mipmaps=i.mipmaps.slice(0),this.mapping=i.mapping,this.wrapS=i.wrapS,this.wrapT=i.wrapT,this.magFilter=i.magFilter,this.minFilter=i.minFilter,this.anisotropy=i.anisotropy,this.format=i.format,this.internalFormat=i.internalFormat,this.type=i.type,this.offset.copy(i.offset),this.repeat.copy(i.repeat),this.center.copy(i.center),this.rotation=i.rotation,this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrix.copy(i.matrix),this.generateMipmaps=i.generateMipmaps,this.premultiplyAlpha=i.premultiplyAlpha,this.flipY=i.flipY,this.unpackAlignment=i.unpackAlignment,this.encoding=i.encoding,this},"copy"),toJSON:/* @__PURE__ */__name(function(i){const a=void 0===i||"string"==typeof i;if(!a&&void 0!==i.textures[this.uuid])return i.textures[this.uuid];const s={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const o=this.image;if(void 0===o.uuid&&(o.uuid=br.generateUUID()),!a&&void 0===i.images[o.uuid]){let a;if(Array.isArray(o)){a=[];for(let i=0,s=o.length;i<s;i++)o[i].isDataTexture?a.push(serializeImage(o[i].image)):a.push(serializeImage(o[i]))}else a=serializeImage(o);i.images[o.uuid]={uuid:o.uuid,url:a}}s.image=o.uuid}return a||(i.textures[this.uuid]=s),s},"toJSON"),dispose:/* @__PURE__ */__name(function(){this.dispatchEvent({type:"dispose"})},"dispose"),transformUv:/* @__PURE__ */__name(function(i){if(this.mapping!==bt)return i;if(i.applyMatrix3(this.matrix),i.x<0||i.x>1)switch(this.wrapS){case Et:i.x=i.x-Math.floor(i.x);break;case Mt:i.x=i.x<0?0:1;break;case kt:1===Math.abs(Math.floor(i.x)%2)?i.x=Math.ceil(i.x)-i.x:i.x=i.x-Math.floor(i.x)}if(i.y<0||i.y>1)switch(this.wrapT){case Et:i.y=i.y-Math.floor(i.y);break;case Mt:i.y=i.y<0?0:1;break;case kt:1===Math.abs(Math.floor(i.y)%2)?i.y=Math.ceil(i.y)-i.y:i.y=i.y-Math.floor(i.y)}return this.flipY&&(i.y=1-i.y),i},"transformUv")}),Object.defineProperty(Texture.prototype,"needsUpdate",{set:/* @__PURE__ */__name(function(i){!0===i&&this.version++},"set")}),__name(serializeImage,"serializeImage");const Mr=class _Vector4{constructor(i=0,a=0,s=0,o=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=i,this.y=a,this.z=s,this.w=o}get width(){return this.z}set width(i){this.z=i}get height(){return this.w}set height(i){this.w=i}set(i,a,s,o){return this.x=i,this.y=a,this.z=s,this.w=o,this}setScalar(i){return this.x=i,this.y=i,this.z=i,this.w=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setZ(i){return this.z=i,this}setW(i){return this.w=i,this}setComponent(i,a){switch(i){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(i){return this.x=i.x,this.y=i.y,this.z=i.z,this.w=void 0!==i.w?i.w:1,this}add(i,a){return void 0!==a?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(i,a)):(this.x+=i.x,this.y+=i.y,this.z+=i.z,this.w+=i.w,this)}addScalar(i){return this.x+=i,this.y+=i,this.z+=i,this.w+=i,this}addVectors(i,a){return this.x=i.x+a.x,this.y=i.y+a.y,this.z=i.z+a.z,this.w=i.w+a.w,this}addScaledVector(i,a){return this.x+=i.x*a,this.y+=i.y*a,this.z+=i.z*a,this.w+=i.w*a,this}sub(i,a){return void 0!==a?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(i,a)):(this.x-=i.x,this.y-=i.y,this.z-=i.z,this.w-=i.w,this)}subScalar(i){return this.x-=i,this.y-=i,this.z-=i,this.w-=i,this}subVectors(i,a){return this.x=i.x-a.x,this.y=i.y-a.y,this.z=i.z-a.z,this.w=i.w-a.w,this}multiply(i){return this.x*=i.x,this.y*=i.y,this.z*=i.z,this.w*=i.w,this}multiplyScalar(i){return this.x*=i,this.y*=i,this.z*=i,this.w*=i,this}applyMatrix4(i){const a=this.x,s=this.y,o=this.z,u=this.w,_=i.elements;return this.x=_[0]*a+_[4]*s+_[8]*o+_[12]*u,this.y=_[1]*a+_[5]*s+_[9]*o+_[13]*u,this.z=_[2]*a+_[6]*s+_[10]*o+_[14]*u,this.w=_[3]*a+_[7]*s+_[11]*o+_[15]*u,this}divideScalar(i){return this.multiplyScalar(1/i)}setAxisAngleFromQuaternion(i){this.w=2*Math.acos(i.w);const a=Math.sqrt(1-i.w*i.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=i.x/a,this.y=i.y/a,this.z=i.z/a),this}setAxisAngleFromRotationMatrix(i){let a,s,o,u;const _=.01,x=.1,w=i.elements,C=w[0],L=w[4],B=w[8],U=w[1],j=w[5],V=w[9],z=w[2],$=w[6],Y=w[10];if(Math.abs(L-U)<_&&Math.abs(B-z)<_&&Math.abs(V-$)<_){if(Math.abs(L+U)<x&&Math.abs(B+z)<x&&Math.abs(V+$)<x&&Math.abs(C+j+Y-3)<x)return this.set(1,0,0,0),this;a=Math.PI;const i=(C+1)/2,w=(j+1)/2,Z=(Y+1)/2,ee=(L+U)/4,ie=(B+z)/4,ae=(V+$)/4;return i>w&&i>Z?i<_?(s=0,o=.707106781,u=.707106781):(s=Math.sqrt(i),o=ee/s,u=ie/s):w>Z?w<_?(s=.707106781,o=0,u=.707106781):(o=Math.sqrt(w),s=ee/o,u=ae/o):Z<_?(s=.707106781,o=.707106781,u=0):(u=Math.sqrt(Z),s=ie/u,o=ae/u),this.set(s,o,u,a),this}let Z=Math.sqrt(($-V)*($-V)+(B-z)*(B-z)+(U-L)*(U-L));return Math.abs(Z)<.001&&(Z=1),this.x=($-V)/Z,this.y=(B-z)/Z,this.z=(U-L)/Z,this.w=Math.acos((C+j+Y-1)/2),this}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this.w=Math.min(this.w,i.w),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this.w=Math.max(this.w,i.w),this}clamp(i,a){return this.x=Math.max(i.x,Math.min(a.x,this.x)),this.y=Math.max(i.y,Math.min(a.y,this.y)),this.z=Math.max(i.z,Math.min(a.z,this.z)),this.w=Math.max(i.w,Math.min(a.w,this.w)),this}clampScalar(i,a){return this.x=Math.max(i,Math.min(a,this.x)),this.y=Math.max(i,Math.min(a,this.y)),this.z=Math.max(i,Math.min(a,this.z)),this.w=Math.max(i,Math.min(a,this.w)),this}clampLength(i,a){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(i,Math.min(a,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(i){return this.x*i.x+this.y*i.y+this.z*i.z+this.w*i.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,a){return this.x+=(i.x-this.x)*a,this.y+=(i.y-this.y)*a,this.z+=(i.z-this.z)*a,this.w+=(i.w-this.w)*a,this}lerpVectors(i,a,s){return this.x=i.x+(a.x-i.x)*s,this.y=i.y+(a.y-i.y)*s,this.z=i.z+(a.z-i.z)*s,this.w=i.w+(a.w-i.w)*s,this}equals(i){return i.x===this.x&&i.y===this.y&&i.z===this.z&&i.w===this.w}fromArray(i,a=0){return this.x=i[a],this.y=i[a+1],this.z=i[a+2],this.w=i[a+3],this}toArray(i=[],a=0){return i[a]=this.x,i[a+1]=this.y,i[a+2]=this.z,i[a+3]=this.w,i}fromBufferAttribute(i,a,s){return void 0!==s&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=i.getX(a),this.y=i.getY(a),this.z=i.getZ(a),this.w=i.getW(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}};__name(Mr,"Vector4");let kr=Mr;const Pr=class _WebGLRenderTarget extends EventDispatcher{constructor(i,a,s){super(),Object.defineProperty(this,"isWebGLRenderTarget",{value:!0}),this.width=i,this.height=a,this.scissor=new kr(0,0,i,a),this.scissorTest=!1,this.viewport=new kr(0,0,i,a),s=s||{},this.texture=new Texture(void 0,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.encoding),this.texture.image={},this.texture.image.width=i,this.texture.image.height=a,this.texture.generateMipmaps=void 0!==s.generateMipmaps&&s.generateMipmaps,this.texture.minFilter=void 0!==s.minFilter?s.minFilter:Dt,this.depthBuffer=void 0===s.depthBuffer||s.depthBuffer,this.stencilBuffer=void 0!==s.stencilBuffer&&s.stencilBuffer,this.depthTexture=void 0!==s.depthTexture?s.depthTexture:null}setSize(i,a){this.width===i&&this.height===a||(this.width=i,this.height=a,this.texture.image.width=i,this.texture.image.height=a,this.dispose()),this.viewport.set(0,0,i,a),this.scissor.set(0,0,i,a)}clone(){return(new this.constructor).copy(this)}copy(i){return this.width=i.width,this.height=i.height,this.viewport.copy(i.viewport),this.texture=i.texture.clone(),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}};__name(Pr,"WebGLRenderTarget");let Ir=Pr;const Lr=class _Quaternion{constructor(i=0,a=0,s=0,o=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=i,this._y=a,this._z=s,this._w=o}static slerp(i,a,s,o){return s.copy(i).slerp(a,o)}static slerpFlat(i,a,s,o,u,_,x){let w=s[o+0],C=s[o+1],L=s[o+2],B=s[o+3];const U=u[_+0],j=u[_+1],V=u[_+2],z=u[_+3];if(B!==z||w!==U||C!==j||L!==V){let i=1-x;const a=w*U+C*j+L*V+B*z,s=a>=0?1:-1,o=1-a*a;if(o>Number.EPSILON){const u=Math.sqrt(o),_=Math.atan2(u,a*s);i=Math.sin(i*_)/u,x=Math.sin(x*_)/u}const u=x*s;if(w=w*i+U*u,C=C*i+j*u,L=L*i+V*u,B=B*i+z*u,i===1-x){const i=1/Math.sqrt(w*w+C*C+L*L+B*B);w*=i,C*=i,L*=i,B*=i}}i[a]=w,i[a+1]=C,i[a+2]=L,i[a+3]=B}static multiplyQuaternionsFlat(i,a,s,o,u,_){const x=s[o],w=s[o+1],C=s[o+2],L=s[o+3],B=u[_],U=u[_+1],j=u[_+2],V=u[_+3];return i[a]=x*V+L*B+w*j-C*U,i[a+1]=w*V+L*U+C*B-x*j,i[a+2]=C*V+L*j+x*U-w*B,i[a+3]=L*V-x*B-w*U-C*j,i}get x(){return this._x}set x(i){this._x=i,this._onChangeCallback()}get y(){return this._y}set y(i){this._y=i,this._onChangeCallback()}get z(){return this._z}set z(i){this._z=i,this._onChangeCallback()}get w(){return this._w}set w(i){this._w=i,this._onChangeCallback()}set(i,a,s,o){return this._x=i,this._y=a,this._z=s,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(i){return this._x=i.x,this._y=i.y,this._z=i.z,this._w=i.w,this._onChangeCallback(),this}setFromEuler(i,a){if(!i||!i.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const s=i._x,o=i._y,u=i._z,_=i._order,x=Math.cos,w=Math.sin,C=x(s/2),L=x(o/2),B=x(u/2),U=w(s/2),j=w(o/2),V=w(u/2);switch(_){case"XYZ":this._x=U*L*B+C*j*V,this._y=C*j*B-U*L*V,this._z=C*L*V+U*j*B,this._w=C*L*B-U*j*V;break;case"YXZ":this._x=U*L*B+C*j*V,this._y=C*j*B-U*L*V,this._z=C*L*V-U*j*B,this._w=C*L*B+U*j*V;break;case"ZXY":this._x=U*L*B-C*j*V,this._y=C*j*B+U*L*V,this._z=C*L*V+U*j*B,this._w=C*L*B-U*j*V;break;case"ZYX":this._x=U*L*B-C*j*V,this._y=C*j*B+U*L*V,this._z=C*L*V-U*j*B,this._w=C*L*B+U*j*V;break;case"YZX":this._x=U*L*B+C*j*V,this._y=C*j*B+U*L*V,this._z=C*L*V-U*j*B,this._w=C*L*B-U*j*V;break;case"XZY":this._x=U*L*B-C*j*V,this._y=C*j*B-U*L*V,this._z=C*L*V+U*j*B,this._w=C*L*B+U*j*V;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+_)}return!1!==a&&this._onChangeCallback(),this}setFromAxisAngle(i,a){const s=a/2,o=Math.sin(s);return this._x=i.x*o,this._y=i.y*o,this._z=i.z*o,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(i){const a=i.elements,s=a[0],o=a[4],u=a[8],_=a[1],x=a[5],w=a[9],C=a[2],L=a[6],B=a[10],U=s+x+B;if(U>0){const i=.5/Math.sqrt(U+1);this._w=.25/i,this._x=(L-w)*i,this._y=(u-C)*i,this._z=(_-o)*i}else if(s>x&&s>B){const i=2*Math.sqrt(1+s-x-B);this._w=(L-w)/i,this._x=.25*i,this._y=(o+_)/i,this._z=(u+C)/i}else if(x>B){const i=2*Math.sqrt(1+x-s-B);this._w=(u-C)/i,this._x=(o+_)/i,this._y=.25*i,this._z=(w+L)/i}else{const i=2*Math.sqrt(1+B-s-x);this._w=(_-o)/i,this._x=(u+C)/i,this._y=(w+L)/i,this._z=.25*i}return this._onChangeCallback(),this}setFromUnitVectors(i,a){const s=1e-6;let o=i.dot(a)+1;return o<s?(o=0,Math.abs(i.x)>Math.abs(i.z)?(this._x=-i.y,this._y=i.x,this._z=0,this._w=o):(this._x=0,this._y=-i.z,this._z=i.y,this._w=o)):(this._x=i.y*a.z-i.z*a.y,this._y=i.z*a.x-i.x*a.z,this._z=i.x*a.y-i.y*a.x,this._w=o),this.normalize()}angleTo(i){return 2*Math.acos(Math.abs(br.clamp(this.dot(i),-1,1)))}rotateTowards(i,a){const s=this.angleTo(i);if(0===s)return this;const o=Math.min(1,a/s);return this.slerp(i,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(i){return this._x*i._x+this._y*i._y+this._z*i._z+this._w*i._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let i=this.length();return 0===i?(this._x=0,this._y=0,this._z=0,this._w=1):(i=1/i,this._x=this._x*i,this._y=this._y*i,this._z=this._z*i,this._w=this._w*i),this._onChangeCallback(),this}multiply(i,a){return void 0!==a?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(i,a)):this.multiplyQuaternions(this,i)}premultiply(i){return this.multiplyQuaternions(i,this)}multiplyQuaternions(i,a){const s=i._x,o=i._y,u=i._z,_=i._w,x=a._x,w=a._y,C=a._z,L=a._w;return this._x=s*L+_*x+o*C-u*w,this._y=o*L+_*w+u*x-s*C,this._z=u*L+_*C+s*w-o*x,this._w=_*L-s*x-o*w-u*C,this._onChangeCallback(),this}slerp(i,a){if(0===a)return this;if(1===a)return this.copy(i);const s=this._x,o=this._y,u=this._z,_=this._w;let x=_*i._w+s*i._x+o*i._y+u*i._z;if(x<0?(this._w=-i._w,this._x=-i._x,this._y=-i._y,this._z=-i._z,x=-x):this.copy(i),x>=1)return this._w=_,this._x=s,this._y=o,this._z=u,this;const w=1-x*x;if(w<=Number.EPSILON){const i=1-a;return this._w=i*_+a*this._w,this._x=i*s+a*this._x,this._y=i*o+a*this._y,this._z=i*u+a*this._z,this.normalize(),this._onChangeCallback(),this}const C=Math.sqrt(w),L=Math.atan2(C,x),B=Math.sin((1-a)*L)/C,U=Math.sin(a*L)/C;return this._w=_*B+this._w*U,this._x=s*B+this._x*U,this._y=o*B+this._y*U,this._z=u*B+this._z*U,this._onChangeCallback(),this}equals(i){return i._x===this._x&&i._y===this._y&&i._z===this._z&&i._w===this._w}fromArray(i,a=0){return this._x=i[a],this._y=i[a+1],this._z=i[a+2],this._w=i[a+3],this._onChangeCallback(),this}toArray(i=[],a=0){return i[a]=this._x,i[a+1]=this._y,i[a+2]=this._z,i[a+3]=this._w,i}fromBufferAttribute(i,a){return this._x=i.getX(a),this._y=i.getY(a),this._z=i.getZ(a),this._w=i.getW(a),this}_onChange(i){return this._onChangeCallback=i,this}_onChangeCallback(){}};__name(Lr,"Quaternion");let Dr=Lr;const Rr=class _Vector3{constructor(i=0,a=0,s=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=i,this.y=a,this.z=s}set(i,a,s){return void 0===s&&(s=this.z),this.x=i,this.y=a,this.z=s,this}setScalar(i){return this.x=i,this.y=i,this.z=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setZ(i){return this.z=i,this}setComponent(i,a){switch(i){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(i){return this.x=i.x,this.y=i.y,this.z=i.z,this}add(i,a){return void 0!==a?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(i,a)):(this.x+=i.x,this.y+=i.y,this.z+=i.z,this)}addScalar(i){return this.x+=i,this.y+=i,this.z+=i,this}addVectors(i,a){return this.x=i.x+a.x,this.y=i.y+a.y,this.z=i.z+a.z,this}addScaledVector(i,a){return this.x+=i.x*a,this.y+=i.y*a,this.z+=i.z*a,this}sub(i,a){return void 0!==a?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(i,a)):(this.x-=i.x,this.y-=i.y,this.z-=i.z,this)}subScalar(i){return this.x-=i,this.y-=i,this.z-=i,this}subVectors(i,a){return this.x=i.x-a.x,this.y=i.y-a.y,this.z=i.z-a.z,this}multiply(i,a){return void 0!==a?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(i,a)):(this.x*=i.x,this.y*=i.y,this.z*=i.z,this)}multiplyScalar(i){return this.x*=i,this.y*=i,this.z*=i,this}multiplyVectors(i,a){return this.x=i.x*a.x,this.y=i.y*a.y,this.z=i.z*a.z,this}applyEuler(i){return i&&i.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Br.setFromEuler(i))}applyAxisAngle(i,a){return this.applyQuaternion(Br.setFromAxisAngle(i,a))}applyMatrix3(i){const a=this.x,s=this.y,o=this.z,u=i.elements;return this.x=u[0]*a+u[3]*s+u[6]*o,this.y=u[1]*a+u[4]*s+u[7]*o,this.z=u[2]*a+u[5]*s+u[8]*o,this}applyNormalMatrix(i){return this.applyMatrix3(i).normalize()}applyMatrix4(i){const a=this.x,s=this.y,o=this.z,u=i.elements,_=1/(u[3]*a+u[7]*s+u[11]*o+u[15]);return this.x=(u[0]*a+u[4]*s+u[8]*o+u[12])*_,this.y=(u[1]*a+u[5]*s+u[9]*o+u[13])*_,this.z=(u[2]*a+u[6]*s+u[10]*o+u[14])*_,this}applyQuaternion(i){const a=this.x,s=this.y,o=this.z,u=i.x,_=i.y,x=i.z,w=i.w,C=w*a+_*o-x*s,L=w*s+x*a-u*o,B=w*o+u*s-_*a,U=-u*a-_*s-x*o;return this.x=C*w+U*-u+L*-x-B*-_,this.y=L*w+U*-_+B*-u-C*-x,this.z=B*w+U*-x+C*-_-L*-u,this}project(i){return this.applyMatrix4(i.matrixWorldInverse).applyMatrix4(i.projectionMatrix)}unproject(i){return this.applyMatrix4(i.projectionMatrixInverse).applyMatrix4(i.matrixWorld)}transformDirection(i){const a=this.x,s=this.y,o=this.z,u=i.elements;return this.x=u[0]*a+u[4]*s+u[8]*o,this.y=u[1]*a+u[5]*s+u[9]*o,this.z=u[2]*a+u[6]*s+u[10]*o,this.normalize()}divide(i){return this.x/=i.x,this.y/=i.y,this.z/=i.z,this}divideScalar(i){return this.multiplyScalar(1/i)}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this}clamp(i,a){return this.x=Math.max(i.x,Math.min(a.x,this.x)),this.y=Math.max(i.y,Math.min(a.y,this.y)),this.z=Math.max(i.z,Math.min(a.z,this.z)),this}clampScalar(i,a){return this.x=Math.max(i,Math.min(a,this.x)),this.y=Math.max(i,Math.min(a,this.y)),this.z=Math.max(i,Math.min(a,this.z)),this}clampLength(i,a){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(i,Math.min(a,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(i){return this.x*i.x+this.y*i.y+this.z*i.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,a){return this.x+=(i.x-this.x)*a,this.y+=(i.y-this.y)*a,this.z+=(i.z-this.z)*a,this}lerpVectors(i,a,s){return this.x=i.x+(a.x-i.x)*s,this.y=i.y+(a.y-i.y)*s,this.z=i.z+(a.z-i.z)*s,this}cross(i,a){return void 0!==a?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(i,a)):this.crossVectors(this,i)}crossVectors(i,a){const s=i.x,o=i.y,u=i.z,_=a.x,x=a.y,w=a.z;return this.x=o*w-u*x,this.y=u*_-s*w,this.z=s*x-o*_,this}projectOnVector(i){const a=i.lengthSq();if(0===a)return this.set(0,0,0);const s=i.dot(this)/a;return this.copy(i).multiplyScalar(s)}projectOnPlane(i){return Nr.copy(this).projectOnVector(i),this.sub(Nr)}reflect(i){return this.sub(Nr.copy(i).multiplyScalar(2*this.dot(i)))}angleTo(i){const a=Math.sqrt(this.lengthSq()*i.lengthSq());if(0===a)return Math.PI/2;const s=this.dot(i)/a;return Math.acos(br.clamp(s,-1,1))}distanceTo(i){return Math.sqrt(this.distanceToSquared(i))}distanceToSquared(i){const a=this.x-i.x,s=this.y-i.y,o=this.z-i.z;return a*a+s*s+o*o}manhattanDistanceTo(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)+Math.abs(this.z-i.z)}setFromSpherical(i){return this.setFromSphericalCoords(i.radius,i.phi,i.theta)}setFromSphericalCoords(i,a,s){const o=Math.sin(a)*i;return this.x=o*Math.sin(s),this.y=Math.cos(a)*i,this.z=o*Math.cos(s),this}setFromCylindrical(i){return this.setFromCylindricalCoords(i.radius,i.theta,i.y)}setFromCylindricalCoords(i,a,s){return this.x=i*Math.sin(a),this.y=s,this.z=i*Math.cos(a),this}setFromMatrixPosition(i){const a=i.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}setFromMatrixScale(i){const a=this.setFromMatrixColumn(i,0).length(),s=this.setFromMatrixColumn(i,1).length(),o=this.setFromMatrixColumn(i,2).length();return this.x=a,this.y=s,this.z=o,this}setFromMatrixColumn(i,a){return this.fromArray(i.elements,4*a)}setFromMatrix3Column(i,a){return this.fromArray(i.elements,3*a)}equals(i){return i.x===this.x&&i.y===this.y&&i.z===this.z}fromArray(i,a=0){return this.x=i[a],this.y=i[a+1],this.z=i[a+2],this}toArray(i=[],a=0){return i[a]=this.x,i[a+1]=this.y,i[a+2]=this.z,i}fromBufferAttribute(i,a,s){return void 0!==s&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=i.getX(a),this.y=i.getY(a),this.z=i.getZ(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}};__name(Rr,"Vector3");let Or=Rr;const Nr=/* @__PURE__ */new Or,Br=/* @__PURE__ */new Dr,Fr=class _Box3{constructor(i,a){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==i?i:new Or(1/0,1/0,1/0),this.max=void 0!==a?a:new Or(-1/0,-1/0,-1/0)}set(i,a){return this.min.copy(i),this.max.copy(a),this}setFromArray(i){let a=1/0,s=1/0,o=1/0,u=-1/0,_=-1/0,x=-1/0;for(let w=0,C=i.length;w<C;w+=3){const C=i[w],L=i[w+1],B=i[w+2];C<a&&(a=C),L<s&&(s=L),B<o&&(o=B),C>u&&(u=C),L>_&&(_=L),B>x&&(x=B)}return this.min.set(a,s,o),this.max.set(u,_,x),this}setFromBufferAttribute(i){let a=1/0,s=1/0,o=1/0,u=-1/0,_=-1/0,x=-1/0;for(let w=0,C=i.count;w<C;w++){const C=i.getX(w),L=i.getY(w),B=i.getZ(w);C<a&&(a=C),L<s&&(s=L),B<o&&(o=B),C>u&&(u=C),L>_&&(_=L),B>x&&(x=B)}return this.min.set(a,s,o),this.max.set(u,_,x),this}setFromPoints(i){this.makeEmpty();for(let a=0,s=i.length;a<s;a++)this.expandByPoint(i[a]);return this}setFromCenterAndSize(i,a){const s=Vr.copy(a).multiplyScalar(.5);return this.min.copy(i).sub(s),this.max.copy(i).add(s),this}setFromObject(i){return this.makeEmpty(),this.expandByObject(i)}clone(){return(new this.constructor).copy(this)}copy(i){return this.min.copy(i.min),this.max.copy(i.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(i){return void 0===i&&(console.warn("THREE.Box3: .getCenter() target is now required"),i=new Or),this.isEmpty()?i.set(0,0,0):i.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(i){return void 0===i&&(console.warn("THREE.Box3: .getSize() target is now required"),i=new Or),this.isEmpty()?i.set(0,0,0):i.subVectors(this.max,this.min)}expandByPoint(i){return this.min.min(i),this.max.max(i),this}expandByVector(i){return this.min.sub(i),this.max.add(i),this}expandByScalar(i){return this.min.addScalar(-i),this.max.addScalar(i),this}expandByObject(i){i.updateWorldMatrix(!1,!1);const a=i.geometry;void 0!==a&&(null===a.boundingBox&&a.computeBoundingBox(),zr.copy(a.boundingBox),zr.applyMatrix4(i.matrixWorld),this.union(zr));const s=i.children;for(let o=0,u=s.length;o<u;o++)this.expandByObject(s[o]);return this}containsPoint(i){return!(i.x<this.min.x||i.x>this.max.x||i.y<this.min.y||i.y>this.max.y||i.z<this.min.z||i.z>this.max.z)}containsBox(i){return this.min.x<=i.min.x&&i.max.x<=this.max.x&&this.min.y<=i.min.y&&i.max.y<=this.max.y&&this.min.z<=i.min.z&&i.max.z<=this.max.z}getParameter(i,a){return void 0===a&&(console.warn("THREE.Box3: .getParameter() target is now required"),a=new Or),a.set((i.x-this.min.x)/(this.max.x-this.min.x),(i.y-this.min.y)/(this.max.y-this.min.y),(i.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(i){return!(i.max.x<this.min.x||i.min.x>this.max.x||i.max.y<this.min.y||i.min.y>this.max.y||i.max.z<this.min.z||i.min.z>this.max.z)}intersectsSphere(i){return this.clampPoint(i.center,Vr),Vr.distanceToSquared(i.center)<=i.radius*i.radius}intersectsPlane(i){let a,s;return i.normal.x>0?(a=i.normal.x*this.min.x,s=i.normal.x*this.max.x):(a=i.normal.x*this.max.x,s=i.normal.x*this.min.x),i.normal.y>0?(a+=i.normal.y*this.min.y,s+=i.normal.y*this.max.y):(a+=i.normal.y*this.max.y,s+=i.normal.y*this.min.y),i.normal.z>0?(a+=i.normal.z*this.min.z,s+=i.normal.z*this.max.z):(a+=i.normal.z*this.max.z,s+=i.normal.z*this.min.z),a<=-i.constant&&s>=-i.constant}intersectsTriangle(i){if(this.isEmpty())return!1;this.getCenter(Qr),Kr.subVectors(this.max,Qr),Hr.subVectors(i.a,Qr),$r.subVectors(i.b,Qr),Gr.subVectors(i.c,Qr),Wr.subVectors($r,Hr),qr.subVectors(Gr,$r),Xr.subVectors(Hr,Gr);let a=[0,-Wr.z,Wr.y,0,-qr.z,qr.y,0,-Xr.z,Xr.y,Wr.z,0,-Wr.x,qr.z,0,-qr.x,Xr.z,0,-Xr.x,-Wr.y,Wr.x,0,-qr.y,qr.x,0,-Xr.y,Xr.x,0];return!!satForAxes(a,Hr,$r,Gr,Kr)&&(a=[1,0,0,0,1,0,0,0,1],!!satForAxes(a,Hr,$r,Gr,Kr)&&(Yr.crossVectors(Wr,qr),a=[Yr.x,Yr.y,Yr.z],satForAxes(a,Hr,$r,Gr,Kr)))}clampPoint(i,a){return void 0===a&&(console.warn("THREE.Box3: .clampPoint() target is now required"),a=new Or),a.copy(i).clamp(this.min,this.max)}distanceToPoint(i){return Vr.copy(i).clamp(this.min,this.max).sub(i).length()}getBoundingSphere(i){return void 0===i&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(i.center),i.radius=.5*this.getSize(Vr).length(),i}intersect(i){return this.min.max(i.min),this.max.min(i.max),this.isEmpty()&&this.makeEmpty(),this}union(i){return this.min.min(i.min),this.max.max(i.max),this}applyMatrix4(i){return this.isEmpty()||(jr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(i),jr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(i),jr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(i),jr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(i),jr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(i),jr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(i),jr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(i),jr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(i),this.setFromPoints(jr)),this}translate(i){return this.min.add(i),this.max.add(i),this}equals(i){return i.min.equals(this.min)&&i.max.equals(this.max)}};__name(Fr,"Box3");let Ur=Fr;function satForAxes(i,a,s,o,u){for(let _=0,x=i.length-3;_<=x;_+=3){Jr.fromArray(i,_);const x=u.x*Math.abs(Jr.x)+u.y*Math.abs(Jr.y)+u.z*Math.abs(Jr.z),w=a.dot(Jr),C=s.dot(Jr),L=o.dot(Jr);if(Math.max(-Math.max(w,C,L),Math.min(w,C,L))>x)return!1}return!0}__name(satForAxes,"satForAxes");const jr=[/* @__PURE__ */new Or,/* @__PURE__ */new Or,/* @__PURE__ */new Or,/* @__PURE__ */new Or,/* @__PURE__ */new Or,/* @__PURE__ */new Or,/* @__PURE__ */new Or,/* @__PURE__ */new Or],Vr=/* @__PURE__ */new Or,zr=/* @__PURE__ */new Ur,Hr=/* @__PURE__ */new Or,$r=/* @__PURE__ */new Or,Gr=/* @__PURE__ */new Or,Wr=/* @__PURE__ */new Or,qr=/* @__PURE__ */new Or,Xr=/* @__PURE__ */new Or,Qr=/* @__PURE__ */new Or,Kr=/* @__PURE__ */new Or,Yr=/* @__PURE__ */new Or,Jr=/* @__PURE__ */new Or,Zr=/* @__PURE__ */new Ur,ea=class _Sphere{constructor(i,a){this.center=void 0!==i?i:new Or,this.radius=void 0!==a?a:-1}set(i,a){return this.center.copy(i),this.radius=a,this}setFromPoints(i,a){const s=this.center;void 0!==a?s.copy(a):Zr.setFromPoints(i).getCenter(s);let o=0;for(let u=0,_=i.length;u<_;u++)o=Math.max(o,s.distanceToSquared(i[u]));return this.radius=Math.sqrt(o),this}clone(){return(new this.constructor).copy(this)}copy(i){return this.center.copy(i.center),this.radius=i.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(i){return i.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(i){return i.distanceTo(this.center)-this.radius}intersectsSphere(i){const a=this.radius+i.radius;return i.center.distanceToSquared(this.center)<=a*a}intersectsBox(i){return i.intersectsSphere(this)}intersectsPlane(i){return Math.abs(i.distanceToPoint(this.center))<=this.radius}clampPoint(i,a){const s=this.center.distanceToSquared(i);return void 0===a&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),a=new Or),a.copy(i),s>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a}getBoundingBox(i){return void 0===i&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),i=new Ur),this.isEmpty()?(i.makeEmpty(),i):(i.set(this.center,this.center),i.expandByScalar(this.radius),i)}applyMatrix4(i){return this.center.applyMatrix4(i),this.radius=this.radius*i.getMaxScaleOnAxis(),this}translate(i){return this.center.add(i),this}equals(i){return i.center.equals(this.center)&&i.radius===this.radius}};__name(ea,"Sphere");let na=ea;const ia=/* @__PURE__ */new Or,ra=/* @__PURE__ */new Or,aa=/* @__PURE__ */new Or,la=/* @__PURE__ */new Or,ca=/* @__PURE__ */new Or,ua=/* @__PURE__ */new Or,da=/* @__PURE__ */new Or,ma=class _Ray{constructor(i,a){this.origin=void 0!==i?i:new Or,this.direction=void 0!==a?a:new Or(0,0,-1)}set(i,a){return this.origin.copy(i),this.direction.copy(a),this}clone(){return(new this.constructor).copy(this)}copy(i){return this.origin.copy(i.origin),this.direction.copy(i.direction),this}at(i,a){return void 0===a&&(console.warn("THREE.Ray: .at() target is now required"),a=new Or),a.copy(this.direction).multiplyScalar(i).add(this.origin)}lookAt(i){return this.direction.copy(i).sub(this.origin).normalize(),this}recast(i){return this.origin.copy(this.at(i,ia)),this}closestPointToPoint(i,a){void 0===a&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),a=new Or),a.subVectors(i,this.origin);const s=a.dot(this.direction);return s<0?a.copy(this.origin):a.copy(this.direction).multiplyScalar(s).add(this.origin)}distanceToPoint(i){return Math.sqrt(this.distanceSqToPoint(i))}distanceSqToPoint(i){const a=ia.subVectors(i,this.origin).dot(this.direction);return a<0?this.origin.distanceToSquared(i):(ia.copy(this.direction).multiplyScalar(a).add(this.origin),ia.distanceToSquared(i))}distanceSqToSegment(i,a,s,o){ra.copy(i).add(a).multiplyScalar(.5),aa.copy(a).sub(i).normalize(),la.copy(this.origin).sub(ra);const u=.5*i.distanceTo(a),_=-this.direction.dot(aa),x=la.dot(this.direction),w=-la.dot(aa),C=la.lengthSq(),L=Math.abs(1-_*_);let B,U,j,V;if(L>0)if(B=_*w-x,U=_*x-w,V=u*L,B>=0)if(U>=-V)if(U<=V){const i=1/L;B*=i,U*=i,j=B*(B+_*U+2*x)+U*(_*B+U+2*w)+C}else U=u,B=Math.max(0,-(_*U+x)),j=-B*B+U*(U+2*w)+C;else U=-u,B=Math.max(0,-(_*U+x)),j=-B*B+U*(U+2*w)+C;else U<=-V?(B=Math.max(0,-(-_*u+x)),U=B>0?-u:Math.min(Math.max(-u,-w),u),j=-B*B+U*(U+2*w)+C):U<=V?(B=0,U=Math.min(Math.max(-u,-w),u),j=U*(U+2*w)+C):(B=Math.max(0,-(_*u+x)),U=B>0?u:Math.min(Math.max(-u,-w),u),j=-B*B+U*(U+2*w)+C);else U=_>0?-u:u,B=Math.max(0,-(_*U+x)),j=-B*B+U*(U+2*w)+C;return s&&s.copy(this.direction).multiplyScalar(B).add(this.origin),o&&o.copy(aa).multiplyScalar(U).add(ra),j}intersectSphere(i,a){ia.subVectors(i.center,this.origin);const s=ia.dot(this.direction),o=ia.dot(ia)-s*s,u=i.radius*i.radius;if(o>u)return null;const _=Math.sqrt(u-o),x=s-_,w=s+_;return x<0&&w<0?null:x<0?this.at(w,a):this.at(x,a)}intersectsSphere(i){return this.distanceSqToPoint(i.center)<=i.radius*i.radius}distanceToPlane(i){const a=i.normal.dot(this.direction);if(0===a)return 0===i.distanceToPoint(this.origin)?0:null;const s=-(this.origin.dot(i.normal)+i.constant)/a;return s>=0?s:null}intersectPlane(i,a){const s=this.distanceToPlane(i);return null===s?null:this.at(s,a)}intersectsPlane(i){const a=i.distanceToPoint(this.origin);return 0===a||i.normal.dot(this.direction)*a<0}intersectBox(i,a){let s,o,u,_,x,w;const C=1/this.direction.x,L=1/this.direction.y,B=1/this.direction.z,U=this.origin;return C>=0?(s=(i.min.x-U.x)*C,o=(i.max.x-U.x)*C):(s=(i.max.x-U.x)*C,o=(i.min.x-U.x)*C),L>=0?(u=(i.min.y-U.y)*L,_=(i.max.y-U.y)*L):(u=(i.max.y-U.y)*L,_=(i.min.y-U.y)*L),s>_||u>o?null:((u>s||s!=s)&&(s=u),(_<o||o!=o)&&(o=_),B>=0?(x=(i.min.z-U.z)*B,w=(i.max.z-U.z)*B):(x=(i.max.z-U.z)*B,w=(i.min.z-U.z)*B),s>w||x>o?null:((x>s||s!=s)&&(s=x),(w<o||o!=o)&&(o=w),o<0?null:this.at(s>=0?s:o,a)))}intersectsBox(i){return null!==this.intersectBox(i,ia)}intersectTriangle(i,a,s,o,u){ca.subVectors(a,i),ua.subVectors(s,i),da.crossVectors(ca,ua);let _,x=this.direction.dot(da);if(x>0){if(o)return null;_=1}else{if(!(x<0))return null;_=-1,x=-x}la.subVectors(this.origin,i);const w=_*this.direction.dot(ua.crossVectors(la,ua));if(w<0)return null;const C=_*this.direction.dot(ca.cross(la));if(C<0)return null;if(w+C>x)return null;const L=-_*la.dot(da);return L<0?null:this.at(L/x,u)}applyMatrix4(i){return this.origin.applyMatrix4(i),this.direction.transformDirection(i),this}equals(i){return i.origin.equals(this.origin)&&i.direction.equals(this.direction)}};__name(ma,"Ray");let ga=ma;const _a=class _Matrix4{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(i,a,s,o,u,_,x,w,C,L,B,U,j,V,z,$){const Y=this.elements;return Y[0]=i,Y[4]=a,Y[8]=s,Y[12]=o,Y[1]=u,Y[5]=_,Y[9]=x,Y[13]=w,Y[2]=C,Y[6]=L,Y[10]=B,Y[14]=U,Y[3]=j,Y[7]=V,Y[11]=z,Y[15]=$,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new _Matrix4).fromArray(this.elements)}copy(i){const a=this.elements,s=i.elements;return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[4]=s[4],a[5]=s[5],a[6]=s[6],a[7]=s[7],a[8]=s[8],a[9]=s[9],a[10]=s[10],a[11]=s[11],a[12]=s[12],a[13]=s[13],a[14]=s[14],a[15]=s[15],this}copyPosition(i){const a=this.elements,s=i.elements;return a[12]=s[12],a[13]=s[13],a[14]=s[14],this}setFromMatrix3(i){const a=i.elements;return this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1),this}extractBasis(i,a,s){return i.setFromMatrixColumn(this,0),a.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(i,a,s){return this.set(i.x,a.x,s.x,0,i.y,a.y,s.y,0,i.z,a.z,s.z,0,0,0,0,1),this}extractRotation(i){const a=this.elements,s=i.elements,o=1/va.setFromMatrixColumn(i,0).length(),u=1/va.setFromMatrixColumn(i,1).length(),_=1/va.setFromMatrixColumn(i,2).length();return a[0]=s[0]*o,a[1]=s[1]*o,a[2]=s[2]*o,a[3]=0,a[4]=s[4]*u,a[5]=s[5]*u,a[6]=s[6]*u,a[7]=0,a[8]=s[8]*_,a[9]=s[9]*_,a[10]=s[10]*_,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromEuler(i){i&&i.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const a=this.elements,s=i.x,o=i.y,u=i.z,_=Math.cos(s),x=Math.sin(s),w=Math.cos(o),C=Math.sin(o),L=Math.cos(u),B=Math.sin(u);if("XYZ"===i.order){const i=_*L,s=_*B,o=x*L,u=x*B;a[0]=w*L,a[4]=-w*B,a[8]=C,a[1]=s+o*C,a[5]=i-u*C,a[9]=-x*w,a[2]=u-i*C,a[6]=o+s*C,a[10]=_*w}else if("YXZ"===i.order){const i=w*L,s=w*B,o=C*L,u=C*B;a[0]=i+u*x,a[4]=o*x-s,a[8]=_*C,a[1]=_*B,a[5]=_*L,a[9]=-x,a[2]=s*x-o,a[6]=u+i*x,a[10]=_*w}else if("ZXY"===i.order){const i=w*L,s=w*B,o=C*L,u=C*B;a[0]=i-u*x,a[4]=-_*B,a[8]=o+s*x,a[1]=s+o*x,a[5]=_*L,a[9]=u-i*x,a[2]=-_*C,a[6]=x,a[10]=_*w}else if("ZYX"===i.order){const i=_*L,s=_*B,o=x*L,u=x*B;a[0]=w*L,a[4]=o*C-s,a[8]=i*C+u,a[1]=w*B,a[5]=u*C+i,a[9]=s*C-o,a[2]=-C,a[6]=x*w,a[10]=_*w}else if("YZX"===i.order){const i=_*w,s=_*C,o=x*w,u=x*C;a[0]=w*L,a[4]=u-i*B,a[8]=o*B+s,a[1]=B,a[5]=_*L,a[9]=-x*L,a[2]=-C*L,a[6]=s*B+o,a[10]=i-u*B}else if("XZY"===i.order){const i=_*w,s=_*C,o=x*w,u=x*C;a[0]=w*L,a[4]=-B,a[8]=C*L,a[1]=i*B+u,a[5]=_*L,a[9]=s*B-o,a[2]=o*B-s,a[6]=x*L,a[10]=u*B+i}return a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromQuaternion(i){return this.compose(xa,i,wa)}lookAt(i,a,s){const o=this.elements;return Ea.subVectors(i,a),0===Ea.lengthSq()&&(Ea.z=1),Ea.normalize(),Aa.crossVectors(s,Ea),0===Aa.lengthSq()&&(1===Math.abs(s.z)?Ea.x+=1e-4:Ea.z+=1e-4,Ea.normalize(),Aa.crossVectors(s,Ea)),Aa.normalize(),Ca.crossVectors(Ea,Aa),o[0]=Aa.x,o[4]=Ca.x,o[8]=Ea.x,o[1]=Aa.y,o[5]=Ca.y,o[9]=Ea.y,o[2]=Aa.z,o[6]=Ca.z,o[10]=Ea.z,this}multiply(i,a){return void 0!==a?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(i,a)):this.multiplyMatrices(this,i)}premultiply(i){return this.multiplyMatrices(i,this)}multiplyMatrices(i,a){const s=i.elements,o=a.elements,u=this.elements,_=s[0],x=s[4],w=s[8],C=s[12],L=s[1],B=s[5],U=s[9],j=s[13],V=s[2],z=s[6],$=s[10],Y=s[14],Z=s[3],ee=s[7],ie=s[11],ae=s[15],le=o[0],ce=o[4],de=o[8],pe=o[12],fe=o[1],_e=o[5],ye=o[9],be=o[13],Te=o[2],Se=o[6],xe=o[10],we=o[14],Pe=o[3],Re=o[7],ze=o[11],He=o[15];return u[0]=_*le+x*fe+w*Te+C*Pe,u[4]=_*ce+x*_e+w*Se+C*Re,u[8]=_*de+x*ye+w*xe+C*ze,u[12]=_*pe+x*be+w*we+C*He,u[1]=L*le+B*fe+U*Te+j*Pe,u[5]=L*ce+B*_e+U*Se+j*Re,u[9]=L*de+B*ye+U*xe+j*ze,u[13]=L*pe+B*be+U*we+j*He,u[2]=V*le+z*fe+$*Te+Y*Pe,u[6]=V*ce+z*_e+$*Se+Y*Re,u[10]=V*de+z*ye+$*xe+Y*ze,u[14]=V*pe+z*be+$*we+Y*He,u[3]=Z*le+ee*fe+ie*Te+ae*Pe,u[7]=Z*ce+ee*_e+ie*Se+ae*Re,u[11]=Z*de+ee*ye+ie*xe+ae*ze,u[15]=Z*pe+ee*be+ie*we+ae*He,this}multiplyScalar(i){const a=this.elements;return a[0]*=i,a[4]*=i,a[8]*=i,a[12]*=i,a[1]*=i,a[5]*=i,a[9]*=i,a[13]*=i,a[2]*=i,a[6]*=i,a[10]*=i,a[14]*=i,a[3]*=i,a[7]*=i,a[11]*=i,a[15]*=i,this}determinant(){const i=this.elements,a=i[0],s=i[4],o=i[8],u=i[12],_=i[1],x=i[5],w=i[9],C=i[13],L=i[2],B=i[6],U=i[10],j=i[14];return i[3]*(+u*w*B-o*C*B-u*x*U+s*C*U+o*x*j-s*w*j)+i[7]*(+a*w*j-a*C*U+u*_*U-o*_*j+o*C*L-u*w*L)+i[11]*(+a*C*B-a*x*j-u*_*B+s*_*j+u*x*L-s*C*L)+i[15]*(-o*x*L-a*w*B+a*x*U+o*_*B-s*_*U+s*w*L)}transpose(){const i=this.elements;let a;return a=i[1],i[1]=i[4],i[4]=a,a=i[2],i[2]=i[8],i[8]=a,a=i[6],i[6]=i[9],i[9]=a,a=i[3],i[3]=i[12],i[12]=a,a=i[7],i[7]=i[13],i[13]=a,a=i[11],i[11]=i[14],i[14]=a,this}setPosition(i,a,s){const o=this.elements;return i.isVector3?(o[12]=i.x,o[13]=i.y,o[14]=i.z):(o[12]=i,o[13]=a,o[14]=s),this}invert(){const i=this.elements,a=i[0],s=i[1],o=i[2],u=i[3],_=i[4],x=i[5],w=i[6],C=i[7],L=i[8],B=i[9],U=i[10],j=i[11],V=i[12],z=i[13],$=i[14],Y=i[15],Z=B*$*C-z*U*C+z*w*j-x*$*j-B*w*Y+x*U*Y,ee=V*U*C-L*$*C-V*w*j+_*$*j+L*w*Y-_*U*Y,ie=L*z*C-V*B*C+V*x*j-_*z*j-L*x*Y+_*B*Y,ae=V*B*w-L*z*w-V*x*U+_*z*U+L*x*$-_*B*$,le=a*Z+s*ee+o*ie+u*ae;if(0===le)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ce=1/le;return i[0]=Z*ce,i[1]=(z*U*u-B*$*u-z*o*j+s*$*j+B*o*Y-s*U*Y)*ce,i[2]=(x*$*u-z*w*u+z*o*C-s*$*C-x*o*Y+s*w*Y)*ce,i[3]=(B*w*u-x*U*u-B*o*C+s*U*C+x*o*j-s*w*j)*ce,i[4]=ee*ce,i[5]=(L*$*u-V*U*u+V*o*j-a*$*j-L*o*Y+a*U*Y)*ce,i[6]=(V*w*u-_*$*u-V*o*C+a*$*C+_*o*Y-a*w*Y)*ce,i[7]=(_*U*u-L*w*u+L*o*C-a*U*C-_*o*j+a*w*j)*ce,i[8]=ie*ce,i[9]=(V*B*u-L*z*u-V*s*j+a*z*j+L*s*Y-a*B*Y)*ce,i[10]=(_*z*u-V*x*u+V*s*C-a*z*C-_*s*Y+a*x*Y)*ce,i[11]=(L*x*u-_*B*u-L*s*C+a*B*C+_*s*j-a*x*j)*ce,i[12]=ae*ce,i[13]=(L*z*o-V*B*o+V*s*U-a*z*U-L*s*$+a*B*$)*ce,i[14]=(V*x*o-_*z*o-V*s*w+a*z*w+_*s*$-a*x*$)*ce,i[15]=(_*B*o-L*x*o+L*s*w-a*B*w-_*s*U+a*x*U)*ce,this}scale(i){const a=this.elements,s=i.x,o=i.y,u=i.z;return a[0]*=s,a[4]*=o,a[8]*=u,a[1]*=s,a[5]*=o,a[9]*=u,a[2]*=s,a[6]*=o,a[10]*=u,a[3]*=s,a[7]*=o,a[11]*=u,this}getMaxScaleOnAxis(){const i=this.elements,a=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],s=i[4]*i[4]+i[5]*i[5]+i[6]*i[6],o=i[8]*i[8]+i[9]*i[9]+i[10]*i[10];return Math.sqrt(Math.max(a,s,o))}makeTranslation(i,a,s){return this.set(1,0,0,i,0,1,0,a,0,0,1,s,0,0,0,1),this}makeRotationX(i){const a=Math.cos(i),s=Math.sin(i);return this.set(1,0,0,0,0,a,-s,0,0,s,a,0,0,0,0,1),this}makeRotationY(i){const a=Math.cos(i),s=Math.sin(i);return this.set(a,0,s,0,0,1,0,0,-s,0,a,0,0,0,0,1),this}makeRotationZ(i){const a=Math.cos(i),s=Math.sin(i);return this.set(a,-s,0,0,s,a,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(i,a){const s=Math.cos(a),o=Math.sin(a),u=1-s,_=i.x,x=i.y,w=i.z,C=u*_,L=u*x;return this.set(C*_+s,C*x-o*w,C*w+o*x,0,C*x+o*w,L*x+s,L*w-o*_,0,C*w-o*x,L*w+o*_,u*w*w+s,0,0,0,0,1),this}makeScale(i,a,s){return this.set(i,0,0,0,0,a,0,0,0,0,s,0,0,0,0,1),this}makeShear(i,a,s){return this.set(1,a,s,0,i,1,s,0,i,a,1,0,0,0,0,1),this}compose(i,a,s){const o=this.elements,u=a._x,_=a._y,x=a._z,w=a._w,C=u+u,L=_+_,B=x+x,U=u*C,j=u*L,V=u*B,z=_*L,$=_*B,Y=x*B,Z=w*C,ee=w*L,ie=w*B,ae=s.x,le=s.y,ce=s.z;return o[0]=(1-(z+Y))*ae,o[1]=(j+ie)*ae,o[2]=(V-ee)*ae,o[3]=0,o[4]=(j-ie)*le,o[5]=(1-(U+Y))*le,o[6]=($+Z)*le,o[7]=0,o[8]=(V+ee)*ce,o[9]=($-Z)*ce,o[10]=(1-(U+z))*ce,o[11]=0,o[12]=i.x,o[13]=i.y,o[14]=i.z,o[15]=1,this}decompose(i,a,s){const o=this.elements;let u=va.set(o[0],o[1],o[2]).length();const _=va.set(o[4],o[5],o[6]).length(),x=va.set(o[8],o[9],o[10]).length();this.determinant()<0&&(u=-u),i.x=o[12],i.y=o[13],i.z=o[14],ba.copy(this);const w=1/u,C=1/_,L=1/x;return ba.elements[0]*=w,ba.elements[1]*=w,ba.elements[2]*=w,ba.elements[4]*=C,ba.elements[5]*=C,ba.elements[6]*=C,ba.elements[8]*=L,ba.elements[9]*=L,ba.elements[10]*=L,a.setFromRotationMatrix(ba),s.x=u,s.y=_,s.z=x,this}makePerspective(i,a,s,o,u,_){void 0===_&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const x=this.elements,w=2*u/(a-i),C=2*u/(s-o),L=(a+i)/(a-i),B=(s+o)/(s-o),U=-(_+u)/(_-u),j=-2*_*u/(_-u);return x[0]=w,x[4]=0,x[8]=L,x[12]=0,x[1]=0,x[5]=C,x[9]=B,x[13]=0,x[2]=0,x[6]=0,x[10]=U,x[14]=j,x[3]=0,x[7]=0,x[11]=-1,x[15]=0,this}makeOrthographic(i,a,s,o,u,_){const x=this.elements,w=1/(a-i),C=1/(s-o),L=1/(_-u),B=(a+i)*w,U=(s+o)*C,j=(_+u)*L;return x[0]=2*w,x[4]=0,x[8]=0,x[12]=-B,x[1]=0,x[5]=2*C,x[9]=0,x[13]=-U,x[2]=0,x[6]=0,x[10]=-2*L,x[14]=-j,x[3]=0,x[7]=0,x[11]=0,x[15]=1,this}equals(i){const a=this.elements,s=i.elements;for(let o=0;o<16;o++)if(a[o]!==s[o])return!1;return!0}fromArray(i,a=0){for(let s=0;s<16;s++)this.elements[s]=i[s+a];return this}toArray(i=[],a=0){const s=this.elements;return i[a]=s[0],i[a+1]=s[1],i[a+2]=s[2],i[a+3]=s[3],i[a+4]=s[4],i[a+5]=s[5],i[a+6]=s[6],i[a+7]=s[7],i[a+8]=s[8],i[a+9]=s[9],i[a+10]=s[10],i[a+11]=s[11],i[a+12]=s[12],i[a+13]=s[13],i[a+14]=s[14],i[a+15]=s[15],i}};__name(_a,"Matrix4");let ya=_a;const va=/* @__PURE__ */new Or,ba=/* @__PURE__ */new ya,xa=/* @__PURE__ */new Or(0,0,0),wa=/* @__PURE__ */new Or(1,1,1),Aa=/* @__PURE__ */new Or,Ca=/* @__PURE__ */new Or,Ea=/* @__PURE__ */new Or,ka=class _Euler{constructor(i=0,a=0,s=0,o=_Euler.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=i,this._y=a,this._z=s,this._order=o}get x(){return this._x}set x(i){this._x=i,this._onChangeCallback()}get y(){return this._y}set y(i){this._y=i,this._onChangeCallback()}get z(){return this._z}set z(i){this._z=i,this._onChangeCallback()}get order(){return this._order}set order(i){this._order=i,this._onChangeCallback()}set(i,a,s,o){return this._x=i,this._y=a,this._z=s,this._order=o||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(i){return this._x=i._x,this._y=i._y,this._z=i._z,this._order=i._order,this._onChangeCallback(),this}setFromRotationMatrix(i,a,s){const o=br.clamp,u=i.elements,_=u[0],x=u[4],w=u[8],C=u[1],L=u[5],B=u[9],U=u[2],j=u[6],V=u[10];switch(a=a||this._order){case"XYZ":this._y=Math.asin(o(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(-B,V),this._z=Math.atan2(-x,_)):(this._x=Math.atan2(j,L),this._z=0);break;case"YXZ":this._x=Math.asin(-o(B,-1,1)),Math.abs(B)<.9999999?(this._y=Math.atan2(w,V),this._z=Math.atan2(C,L)):(this._y=Math.atan2(-U,_),this._z=0);break;case"ZXY":this._x=Math.asin(o(j,-1,1)),Math.abs(j)<.9999999?(this._y=Math.atan2(-U,V),this._z=Math.atan2(-x,L)):(this._y=0,this._z=Math.atan2(C,_));break;case"ZYX":this._y=Math.asin(-o(U,-1,1)),Math.abs(U)<.9999999?(this._x=Math.atan2(j,V),this._z=Math.atan2(C,_)):(this._x=0,this._z=Math.atan2(-x,L));break;case"YZX":this._z=Math.asin(o(C,-1,1)),Math.abs(C)<.9999999?(this._x=Math.atan2(-B,L),this._y=Math.atan2(-U,_)):(this._x=0,this._y=Math.atan2(w,V));break;case"XZY":this._z=Math.asin(-o(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(j,L),this._y=Math.atan2(w,_)):(this._x=Math.atan2(-B,V),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+a)}return this._order=a,!1!==s&&this._onChangeCallback(),this}setFromQuaternion(i,a,s){return La.makeRotationFromQuaternion(i),this.setFromRotationMatrix(La,a,s)}setFromVector3(i,a){return this.set(i.x,i.y,i.z,a||this._order)}reorder(i){return Da.setFromEuler(this),this.setFromQuaternion(Da,i)}equals(i){return i._x===this._x&&i._y===this._y&&i._z===this._z&&i._order===this._order}fromArray(i){return this._x=i[0],this._y=i[1],this._z=i[2],void 0!==i[3]&&(this._order=i[3]),this._onChangeCallback(),this}toArray(i=[],a=0){return i[a]=this._x,i[a+1]=this._y,i[a+2]=this._z,i[a+3]=this._order,i}toVector3(i){return i?i.set(this._x,this._y,this._z):new Or(this._x,this._y,this._z)}_onChange(i){return this._onChangeCallback=i,this}_onChangeCallback(){}};__name(ka,"Euler");let Ia=ka;Ia.DefaultOrder="XYZ",Ia.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const La=/* @__PURE__ */new ya,Da=/* @__PURE__ */new Dr,Na=class _Layers{constructor(){this.mask=1}set(i){this.mask=1<<i}enable(i){this.mask|=1<<i}enableAll(){this.mask=-1}toggle(i){this.mask^=1<<i}disable(i){this.mask&=~(1<<i)}disableAll(){this.mask=0}test(i){return 0!==(this.mask&i.mask)}};__name(Na,"Layers");let Ba=Na,Fa=0;const ja=new Or,za=new Dr,Ha=new ya,$a=new Or,Ga=new Or,Ja=new Or,es=new Dr,ns=new Or(1,0,0),is=new Or(0,1,0),rs=new Or(0,0,1),as={type:"added"},ss={type:"removed"};function Object3D(){Object.defineProperty(this,"id",{value:Fa++}),this.uuid=br.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const i=new Or,a=new Ia,s=new Dr,o=new Or(1,1,1);function onRotationChange(){s.setFromEuler(a,!1)}function onQuaternionChange(){a.setFromQuaternion(s,void 0,!1)}__name(onRotationChange,"onRotationChange"),__name(onQuaternionChange,"onQuaternionChange"),a._onChange(onRotationChange),s._onChange(onQuaternionChange),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new ya},normalMatrix:{value:new Ar}}),this.matrix=new ya,this.matrixWorld=new ya,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ba,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}__name(Object3D,"Object3D"),Object3D.DefaultUp=new Or(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.prototype=_extends2(Object.create(EventDispatcher.prototype),{constructor:Object3D,isObject3D:!0,onBeforeRender:/* @__PURE__ */__name(function(){},"onBeforeRender"),onAfterRender:/* @__PURE__ */__name(function(){},"onAfterRender"),applyMatrix4:/* @__PURE__ */__name(function(i){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(i),this.matrix.decompose(this.position,this.quaternion,this.scale)},"applyMatrix4"),applyQuaternion:/* @__PURE__ */__name(function(i){return this.quaternion.premultiply(i),this},"applyQuaternion"),setRotationFromAxisAngle:/* @__PURE__ */__name(function(i,a){this.quaternion.setFromAxisAngle(i,a)},"setRotationFromAxisAngle"),setRotationFromEuler:/* @__PURE__ */__name(function(i){this.quaternion.setFromEuler(i,!0)},"setRotationFromEuler"),setRotationFromMatrix:/* @__PURE__ */__name(function(i){this.quaternion.setFromRotationMatrix(i)},"setRotationFromMatrix"),setRotationFromQuaternion:/* @__PURE__ */__name(function(i){this.quaternion.copy(i)},"setRotationFromQuaternion"),rotateOnAxis:/* @__PURE__ */__name(function(i,a){return za.setFromAxisAngle(i,a),this.quaternion.multiply(za),this},"rotateOnAxis"),rotateOnWorldAxis:/* @__PURE__ */__name(function(i,a){return za.setFromAxisAngle(i,a),this.quaternion.premultiply(za),this},"rotateOnWorldAxis"),rotateX:/* @__PURE__ */__name(function(i){return this.rotateOnAxis(ns,i)},"rotateX"),rotateY:/* @__PURE__ */__name(function(i){return this.rotateOnAxis(is,i)},"rotateY"),rotateZ:/* @__PURE__ */__name(function(i){return this.rotateOnAxis(rs,i)},"rotateZ"),translateOnAxis:/* @__PURE__ */__name(function(i,a){return ja.copy(i).applyQuaternion(this.quaternion),this.position.add(ja.multiplyScalar(a)),this},"translateOnAxis"),translateX:/* @__PURE__ */__name(function(i){return this.translateOnAxis(ns,i)},"translateX"),translateY:/* @__PURE__ */__name(function(i){return this.translateOnAxis(is,i)},"translateY"),translateZ:/* @__PURE__ */__name(function(i){return this.translateOnAxis(rs,i)},"translateZ"),localToWorld:/* @__PURE__ */__name(function(i){return i.applyMatrix4(this.matrixWorld)},"localToWorld"),worldToLocal:/* @__PURE__ */__name(function(i){return i.applyMatrix4(Ha.copy(this.matrixWorld).invert())},"worldToLocal"),lookAt:/* @__PURE__ */__name(function(i,a,s){i.isVector3?$a.copy(i):$a.set(i,a,s);const o=this.parent;this.updateWorldMatrix(!0,!1),Ga.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ha.lookAt(Ga,$a,this.up):Ha.lookAt($a,Ga,this.up),this.quaternion.setFromRotationMatrix(Ha),o&&(Ha.extractRotation(o.matrixWorld),za.setFromRotationMatrix(Ha),this.quaternion.premultiply(za.invert()))},"lookAt"),add:/* @__PURE__ */__name(function(i){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return i===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",i),this):(i&&i.isObject3D?(null!==i.parent&&i.parent.remove(i),i.parent=this,this.children.push(i),i.dispatchEvent(as)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",i),this)},"add"),remove:/* @__PURE__ */__name(function(i){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const a=this.children.indexOf(i);return-1!==a&&(i.parent=null,this.children.splice(a,1),i.dispatchEvent(ss)),this},"remove"),clear:/* @__PURE__ */__name(function(){for(let i=0;i<this.children.length;i++){const a=this.children[i];a.parent=null,a.dispatchEvent(ss)}return this.children.length=0,this},"clear"),attach:/* @__PURE__ */__name(function(i){return this.updateWorldMatrix(!0,!1),Ha.copy(this.matrixWorld).invert(),null!==i.parent&&(i.parent.updateWorldMatrix(!0,!1),Ha.multiply(i.parent.matrixWorld)),i.applyMatrix4(Ha),i.updateWorldMatrix(!1,!1),this.add(i),this},"attach"),getObjectById:/* @__PURE__ */__name(function(i){return this.getObjectByProperty("id",i)},"getObjectById"),getObjectByName:/* @__PURE__ */__name(function(i){return this.getObjectByProperty("name",i)},"getObjectByName"),getObjectByProperty:/* @__PURE__ */__name(function(i,a){if(this[i]===a)return this;for(let s=0,o=this.children.length;s<o;s++){const o=this.children[s].getObjectByProperty(i,a);if(void 0!==o)return o}},"getObjectByProperty"),getWorldPosition:/* @__PURE__ */__name(function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),i=new Or),this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld)},"getWorldPosition"),getWorldQuaternion:/* @__PURE__ */__name(function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),i=new Dr),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ga,i,Ja),i},"getWorldQuaternion"),getWorldScale:/* @__PURE__ */__name(function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new Or),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ga,es,i),i},"getWorldScale"),getWorldDirection:/* @__PURE__ */__name(function(i){void 0===i&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),i=new Or),this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return i.set(a[8],a[9],a[10]).normalize()},"getWorldDirection"),raycast:/* @__PURE__ */__name(function(){},"raycast"),traverse:/* @__PURE__ */__name(function(i){i(this);const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].traverse(i)},"traverse"),traverseVisible:/* @__PURE__ */__name(function(i){if(!1===this.visible)return;i(this);const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].traverseVisible(i)},"traverseVisible"),traverseAncestors:/* @__PURE__ */__name(function(i){const a=this.parent;null!==a&&(i(a),a.traverseAncestors(i))},"traverseAncestors"),updateMatrix:/* @__PURE__ */__name(function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},"updateMatrix"),updateMatrixWorld:/* @__PURE__ */__name(function(i){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||i)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,i=!0);const a=this.children;for(let s=0,o=a.length;s<o;s++)a[s].updateMatrixWorld(i)},"updateMatrixWorld"),updateWorldMatrix:/* @__PURE__ */__name(function(i,a){const s=this.parent;if(!0===i&&null!==s&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===a){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}},"updateWorldMatrix"),toJSON:/* @__PURE__ */__name(function(i){const a=void 0===i||"string"==typeof i,s={};a&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},s.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const o={};function serialize2(a,s){return void 0===a[s.uuid]&&(a[s.uuid]=s.toJSON(i)),s.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON()),__name(serialize2,"serialize"),this.isMesh||this.isLine||this.isPoints){o.geometry=serialize2(i.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const s=a.shapes;if(Array.isArray(s))for(let a=0,o=s.length;a<o;a++){const o=s[a];serialize2(i.shapes,o)}else serialize2(i.shapes,s)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize2(i.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let s=0,o=this.material.length;s<o;s++)a.push(serialize2(i.materials,this.material[s]));o.material=a}else o.material=serialize2(i.materials,this.material);if(this.children.length>0){o.children=[];for(let a=0;a<this.children.length;a++)o.children.push(this.children[a].toJSON(i).object)}if(this.animations.length>0){o.animations=[];for(let a=0;a<this.animations.length;a++){const s=this.animations[a];o.animations.push(serialize2(i.animations,s))}}if(a){const a=extractFromCache(i.geometries),o=extractFromCache(i.materials),u=extractFromCache(i.textures),_=extractFromCache(i.images),x=extractFromCache(i.shapes),w=extractFromCache(i.skeletons),C=extractFromCache(i.animations);a.length>0&&(s.geometries=a),o.length>0&&(s.materials=o),u.length>0&&(s.textures=u),_.length>0&&(s.images=_),x.length>0&&(s.shapes=x),w.length>0&&(s.skeletons=w),C.length>0&&(s.animations=C)}return s.object=o,s;function extractFromCache(i){const a=[];for(const s in i){const o=i[s];delete o.metadata,a.push(o)}return a}},"toJSON"),clone:/* @__PURE__ */__name(function(i){return(new this.constructor).copy(this,i)},"clone"),copy:/* @__PURE__ */__name(function(i,a=!0){if(this.name=i.name,this.up.copy(i.up),this.position.copy(i.position),this.rotation.order=i.rotation.order,this.quaternion.copy(i.quaternion),this.scale.copy(i.scale),this.matrix.copy(i.matrix),this.matrixWorld.copy(i.matrixWorld),this.matrixAutoUpdate=i.matrixAutoUpdate,this.matrixWorldNeedsUpdate=i.matrixWorldNeedsUpdate,this.layers.mask=i.layers.mask,this.visible=i.visible,this.castShadow=i.castShadow,this.receiveShadow=i.receiveShadow,this.frustumCulled=i.frustumCulled,this.renderOrder=i.renderOrder,this.userData=JSON.parse(JSON.stringify(i.userData)),!0===a)for(let s=0;s<i.children.length;s++){const a=i.children[s];this.add(a.clone())}return this},"copy")});const os=/* @__PURE__ */new Or,ls=/* @__PURE__ */new Or,cs=/* @__PURE__ */new Ar,us=class _Plane{constructor(i,a){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==i?i:new Or(1,0,0),this.constant=void 0!==a?a:0}set(i,a){return this.normal.copy(i),this.constant=a,this}setComponents(i,a,s,o){return this.normal.set(i,a,s),this.constant=o,this}setFromNormalAndCoplanarPoint(i,a){return this.normal.copy(i),this.constant=-a.dot(this.normal),this}setFromCoplanarPoints(i,a,s){const o=os.subVectors(s,a).cross(ls.subVectors(i,a)).normalize();return this.setFromNormalAndCoplanarPoint(o,i),this}clone(){return(new this.constructor).copy(this)}copy(i){return this.normal.copy(i.normal),this.constant=i.constant,this}normalize(){const i=1/this.normal.length();return this.normal.multiplyScalar(i),this.constant*=i,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(i){return this.normal.dot(i)+this.constant}distanceToSphere(i){return this.distanceToPoint(i.center)-i.radius}projectPoint(i,a){return void 0===a&&(console.warn("THREE.Plane: .projectPoint() target is now required"),a=new Or),a.copy(this.normal).multiplyScalar(-this.distanceToPoint(i)).add(i)}intersectLine(i,a){void 0===a&&(console.warn("THREE.Plane: .intersectLine() target is now required"),a=new Or);const s=i.delta(os),o=this.normal.dot(s);if(0===o)return 0===this.distanceToPoint(i.start)?a.copy(i.start):void 0;const u=-(i.start.dot(this.normal)+this.constant)/o;return u<0||u>1?void 0:a.copy(s).multiplyScalar(u).add(i.start)}intersectsLine(i){const a=this.distanceToPoint(i.start),s=this.distanceToPoint(i.end);return a<0&&s>0||s<0&&a>0}intersectsBox(i){return i.intersectsPlane(this)}intersectsSphere(i){return i.intersectsPlane(this)}coplanarPoint(i){return void 0===i&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),i=new Or),i.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(i,a){const s=a||cs.getNormalMatrix(i),o=this.coplanarPoint(os).applyMatrix4(i),u=this.normal.applyMatrix3(s).normalize();return this.constant=-o.dot(u),this}translate(i){return this.constant-=i.dot(this.normal),this}equals(i){return i.normal.equals(this.normal)&&i.constant===this.constant}};__name(us,"Plane");let ds=us;const hs=/* @__PURE__ */new Or,ps=/* @__PURE__ */new Or,ms=/* @__PURE__ */new Or,fs=/* @__PURE__ */new Or,gs=/* @__PURE__ */new Or,_s=/* @__PURE__ */new Or,ys=/* @__PURE__ */new Or,vs=/* @__PURE__ */new Or,bs=/* @__PURE__ */new Or,Ts=/* @__PURE__ */new Or,Ss=class _Triangle{constructor(i,a,s){this.a=void 0!==i?i:new Or,this.b=void 0!==a?a:new Or,this.c=void 0!==s?s:new Or}static getNormal(i,a,s,o){void 0===o&&(console.warn("THREE.Triangle: .getNormal() target is now required"),o=new Or),o.subVectors(s,a),hs.subVectors(i,a),o.cross(hs);const u=o.lengthSq();return u>0?o.multiplyScalar(1/Math.sqrt(u)):o.set(0,0,0)}static getBarycoord(i,a,s,o,u){hs.subVectors(o,a),ps.subVectors(s,a),ms.subVectors(i,a);const _=hs.dot(hs),x=hs.dot(ps),w=hs.dot(ms),C=ps.dot(ps),L=ps.dot(ms),B=_*C-x*x;if(void 0===u&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),u=new Or),0===B)return u.set(-2,-1,-1);const U=1/B,j=(C*w-x*L)*U,V=(_*L-x*w)*U;return u.set(1-j-V,V,j)}static containsPoint(i,a,s,o){return this.getBarycoord(i,a,s,o,fs),fs.x>=0&&fs.y>=0&&fs.x+fs.y<=1}static getUV(i,a,s,o,u,_,x,w){return this.getBarycoord(i,a,s,o,fs),w.set(0,0),w.addScaledVector(u,fs.x),w.addScaledVector(_,fs.y),w.addScaledVector(x,fs.z),w}static isFrontFacing(i,a,s,o){return hs.subVectors(s,a),ps.subVectors(i,a),hs.cross(ps).dot(o)<0}set(i,a,s){return this.a.copy(i),this.b.copy(a),this.c.copy(s),this}setFromPointsAndIndices(i,a,s,o){return this.a.copy(i[a]),this.b.copy(i[s]),this.c.copy(i[o]),this}clone(){return(new this.constructor).copy(this)}copy(i){return this.a.copy(i.a),this.b.copy(i.b),this.c.copy(i.c),this}getArea(){return hs.subVectors(this.c,this.b),ps.subVectors(this.a,this.b),.5*hs.cross(ps).length()}getMidpoint(i){return void 0===i&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),i=new Or),i.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(i){return _Triangle.getNormal(this.a,this.b,this.c,i)}getPlane(i){return void 0===i&&(console.warn("THREE.Triangle: .getPlane() target is now required"),i=new ds),i.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(i,a){return _Triangle.getBarycoord(i,this.a,this.b,this.c,a)}getUV(i,a,s,o,u){return _Triangle.getUV(i,this.a,this.b,this.c,a,s,o,u)}containsPoint(i){return _Triangle.containsPoint(i,this.a,this.b,this.c)}isFrontFacing(i){return _Triangle.isFrontFacing(this.a,this.b,this.c,i)}intersectsBox(i){return i.intersectsTriangle(this)}closestPointToPoint(i,a){void 0===a&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),a=new Or);const s=this.a,o=this.b,u=this.c;let _,x;gs.subVectors(o,s),_s.subVectors(u,s),vs.subVectors(i,s);const w=gs.dot(vs),C=_s.dot(vs);if(w<=0&&C<=0)return a.copy(s);bs.subVectors(i,o);const L=gs.dot(bs),B=_s.dot(bs);if(L>=0&&B<=L)return a.copy(o);const U=w*B-L*C;if(U<=0&&w>=0&&L<=0)return _=w/(w-L),a.copy(s).addScaledVector(gs,_);Ts.subVectors(i,u);const j=gs.dot(Ts),V=_s.dot(Ts);if(V>=0&&j<=V)return a.copy(u);const z=j*C-w*V;if(z<=0&&C>=0&&V<=0)return x=C/(C-V),a.copy(s).addScaledVector(_s,x);const $=L*V-j*B;if($<=0&&B-L>=0&&j-V>=0)return ys.subVectors(u,o),x=(B-L)/(B-L+(j-V)),a.copy(o).addScaledVector(ys,x);const Y=1/($+z+U);return _=z*Y,x=U*Y,a.copy(s).addScaledVector(gs,_).addScaledVector(_s,x)}equals(i){return i.a.equals(this.a)&&i.b.equals(this.b)&&i.c.equals(this.c)}};__name(Ss,"Triangle");let xs=Ss;const ws={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},As={h:0,s:0,l:0},Cs={h:0,s:0,l:0};function hue2rgb(i,a,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?i+6*(a-i)*s:s<.5?a:s<2/3?i+6*(a-i)*(2/3-s):i}function SRGBToLinear(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function LinearToSRGB(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}__name(hue2rgb,"hue2rgb"),__name(SRGBToLinear,"SRGBToLinear"),__name(LinearToSRGB,"LinearToSRGB");const Es=class _Color{constructor(i,a,s){return Object.defineProperty(this,"isColor",{value:!0}),void 0===a&&void 0===s?this.set(i):this.setRGB(i,a,s)}set(i){return i&&i.isColor?this.copy(i):"number"==typeof i?this.setHex(i):"string"==typeof i&&this.setStyle(i),this}setScalar(i){return this.r=i,this.g=i,this.b=i,this}setHex(i){return i=Math.floor(i),this.r=(i>>16&255)/255,this.g=(i>>8&255)/255,this.b=(255&i)/255,this}setRGB(i,a,s){return this.r=i,this.g=a,this.b=s,this}setHSL(i,a,s){if(i=br.euclideanModulo(i,1),a=br.clamp(a,0,1),s=br.clamp(s,0,1),0===a)this.r=this.g=this.b=s;else{const o=s<=.5?s*(1+a):s+a-s*a,u=2*s-o;this.r=hue2rgb(u,o,i+1/3),this.g=hue2rgb(u,o,i),this.b=hue2rgb(u,o,i-1/3)}return this}setStyle(i){function handleAlpha(a){void 0!==a&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+i+" will be ignored.")}let a;if(__name(handleAlpha,"handleAlpha"),a=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(i)){let i;const s=a[1],o=a[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,handleAlpha(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,handleAlpha(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100;return handleAlpha(i[4]),this.setHSL(a,s,o)}}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(i)){const i=a[1],s=i.length;if(3===s)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===s)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return i&&i.length>0?this.setColorName(i):this}setColorName(i){const a=ws[i];return void 0!==a?this.setHex(a):console.warn("THREE.Color: Unknown color "+i),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(i){return this.r=i.r,this.g=i.g,this.b=i.b,this}copyGammaToLinear(i,a=2){return this.r=Math.pow(i.r,a),this.g=Math.pow(i.g,a),this.b=Math.pow(i.b,a),this}copyLinearToGamma(i,a=2){const s=a>0?1/a:1;return this.r=Math.pow(i.r,s),this.g=Math.pow(i.g,s),this.b=Math.pow(i.b,s),this}convertGammaToLinear(i){return this.copyGammaToLinear(this,i),this}convertLinearToGamma(i){return this.copyLinearToGamma(this,i),this}copySRGBToLinear(i){return this.r=SRGBToLinear(i.r),this.g=SRGBToLinear(i.g),this.b=SRGBToLinear(i.b),this}copyLinearToSRGB(i){return this.r=LinearToSRGB(i.r),this.g=LinearToSRGB(i.g),this.b=LinearToSRGB(i.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(i){void 0===i&&(console.warn("THREE.Color: .getHSL() target is now required"),i={h:0,s:0,l:0});const a=this.r,s=this.g,o=this.b,u=Math.max(a,s,o),_=Math.min(a,s,o);let x,w;const C=(_+u)/2;if(_===u)x=0,w=0;else{const i=u-_;switch(w=C<=.5?i/(u+_):i/(2-u-_),u){case a:x=(s-o)/i+(s<o?6:0);break;case s:x=(o-a)/i+2;break;case o:x=(a-s)/i+4}x/=6}return i.h=x,i.s=w,i.l=C,i}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(i,a,s){return this.getHSL(As),As.h+=i,As.s+=a,As.l+=s,this.setHSL(As.h,As.s,As.l),this}add(i){return this.r+=i.r,this.g+=i.g,this.b+=i.b,this}addColors(i,a){return this.r=i.r+a.r,this.g=i.g+a.g,this.b=i.b+a.b,this}addScalar(i){return this.r+=i,this.g+=i,this.b+=i,this}sub(i){return this.r=Math.max(0,this.r-i.r),this.g=Math.max(0,this.g-i.g),this.b=Math.max(0,this.b-i.b),this}multiply(i){return this.r*=i.r,this.g*=i.g,this.b*=i.b,this}multiplyScalar(i){return this.r*=i,this.g*=i,this.b*=i,this}lerp(i,a){return this.r+=(i.r-this.r)*a,this.g+=(i.g-this.g)*a,this.b+=(i.b-this.b)*a,this}lerpColors(i,a,s){return this.r=i.r+(a.r-i.r)*s,this.g=i.g+(a.g-i.g)*s,this.b=i.b+(a.b-i.b)*s,this}lerpHSL(i,a){this.getHSL(As),i.getHSL(Cs);const s=br.lerp(As.h,Cs.h,a),o=br.lerp(As.s,Cs.s,a),u=br.lerp(As.l,Cs.l,a);return this.setHSL(s,o,u),this}equals(i){return i.r===this.r&&i.g===this.g&&i.b===this.b}fromArray(i,a=0){return this.r=i[a],this.g=i[a+1],this.b=i[a+2],this}toArray(i=[],a=0){return i[a]=this.r,i[a+1]=this.g,i[a+2]=this.b,i}fromBufferAttribute(i,a){return this.r=i.getX(a),this.g=i.getY(a),this.b=i.getZ(a),!0===i.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}};__name(Es,"Color");let Ms=Es;Ms.NAMES=ws,Ms.prototype.r=1,Ms.prototype.g=1,Ms.prototype.b=1;const ks=class _Face3{constructor(i,a,s,o,u,_=0){this.a=i,this.b=a,this.c=s,this.normal=o&&o.isVector3?o:new Or,this.vertexNormals=Array.isArray(o)?o:[],this.color=u&&u.isColor?u:new Ms,this.vertexColors=Array.isArray(u)?u:[],this.materialIndex=_}clone(){return(new this.constructor).copy(this)}copy(i){this.a=i.a,this.b=i.b,this.c=i.c,this.normal.copy(i.normal),this.color.copy(i.color),this.materialIndex=i.materialIndex;for(let a=0,s=i.vertexNormals.length;a<s;a++)this.vertexNormals[a]=i.vertexNormals[a].clone();for(let a=0,s=i.vertexColors.length;a<s;a++)this.vertexColors[a]=i.vertexColors[a].clone();return this}};__name(ks,"Face3");let Ps=ks,Is=0;function Material(){Object.defineProperty(this,"id",{value:Is++}),this.uuid=br.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=fe,this.side=ae,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=qe,this.blendDst=Xe,this.blendEquation=Se,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=st,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=mr,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=pr,this.stencilZFail=pr,this.stencilZPass=pr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function MeshBasicMaterial(i){Material.call(this),this.type="MeshBasicMaterial",this.color=new Ms(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(i)}__name(Material,"Material"),Material.prototype=_extends2(Object.create(EventDispatcher.prototype),{constructor:Material,isMaterial:!0,onBeforeCompile:/* @__PURE__ */__name(function(){},"onBeforeCompile"),customProgramCacheKey:/* @__PURE__ */__name(function(){return this.onBeforeCompile.toString()},"customProgramCacheKey"),setValues:/* @__PURE__ */__name(function(i){if(void 0!==i)for(const a in i){const s=i[a];if(void 0===s){console.warn("THREE.Material: '"+a+"' parameter is undefined.");continue}if("shading"===a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=s===de;continue}const o=this[a];void 0!==o?o&&o.isColor?o.set(s):o&&o.isVector3&&s&&s.isVector3?o.copy(s):this[a]=s:console.warn("THREE."+this.type+": '"+a+"' is not a property of this material.")}},"setValues"),toJSON:/* @__PURE__ */__name(function(i){const a=void 0===i||"string"==typeof i;a&&(i={textures:{},images:{}});const s={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function extractFromCache(i){const a=[];for(const s in i){const o=i[s];delete o.metadata,a.push(o)}return a}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),void 0!==this.roughness&&(s.roughness=this.roughness),void 0!==this.metalness&&(s.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(s.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),void 0!==this.shininess&&(s.shininess=this.shininess),void 0!==this.clearcoat&&(s.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(i).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(i).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(i).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(i).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(i).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(i).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(i).uuid),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(i).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(i).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(i).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(i).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(i).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(i).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(i).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(i).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(i).uuid,s.reflectivity=this.reflectivity,s.refractionRatio=this.refractionRatio,void 0!==this.combine&&(s.combine=this.combine),void 0!==this.envMapIntensity&&(s.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(i).uuid),void 0!==this.size&&(s.size=this.size),void 0!==this.sizeAttenuation&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==fe&&(s.blending=this.blending),!0===this.flatShading&&(s.flatShading=this.flatShading),this.side!==ae&&(s.side=this.side),this.vertexColors&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),!0===this.transparent&&(s.transparent=this.transparent),s.depthFunc=this.depthFunc,s.depthTest=this.depthTest,s.depthWrite=this.depthWrite,s.stencilWrite=this.stencilWrite,s.stencilWriteMask=this.stencilWriteMask,s.stencilFunc=this.stencilFunc,s.stencilRef=this.stencilRef,s.stencilFuncMask=this.stencilFuncMask,s.stencilFail=this.stencilFail,s.stencilZFail=this.stencilZFail,s.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(s.rotation=this.rotation),!0===this.polygonOffset&&(s.polygonOffset=!0),0!==this.polygonOffsetFactor&&(s.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(s.linewidth=this.linewidth),void 0!==this.dashSize&&(s.dashSize=this.dashSize),void 0!==this.gapSize&&(s.gapSize=this.gapSize),void 0!==this.scale&&(s.scale=this.scale),!0===this.dithering&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(s.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(s.wireframe=this.wireframe),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(s.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(s.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(s.morphTargets=!0),!0===this.morphNormals&&(s.morphNormals=!0),!0===this.skinning&&(s.skinning=!0),!1===this.visible&&(s.visible=!1),!1===this.toneMapped&&(s.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),__name(extractFromCache,"extractFromCache"),a){const a=extractFromCache(i.textures),o=extractFromCache(i.images);a.length>0&&(s.textures=a),o.length>0&&(s.images=o)}return s},"toJSON"),clone:/* @__PURE__ */__name(function(){return(new this.constructor).copy(this)},"clone"),copy:/* @__PURE__ */__name(function(i){this.name=i.name,this.fog=i.fog,this.blending=i.blending,this.side=i.side,this.flatShading=i.flatShading,this.vertexColors=i.vertexColors,this.opacity=i.opacity,this.transparent=i.transparent,this.blendSrc=i.blendSrc,this.blendDst=i.blendDst,this.blendEquation=i.blendEquation,this.blendSrcAlpha=i.blendSrcAlpha,this.blendDstAlpha=i.blendDstAlpha,this.blendEquationAlpha=i.blendEquationAlpha,this.depthFunc=i.depthFunc,this.depthTest=i.depthTest,this.depthWrite=i.depthWrite,this.stencilWriteMask=i.stencilWriteMask,this.stencilFunc=i.stencilFunc,this.stencilRef=i.stencilRef,this.stencilFuncMask=i.stencilFuncMask,this.stencilFail=i.stencilFail,this.stencilZFail=i.stencilZFail,this.stencilZPass=i.stencilZPass,this.stencilWrite=i.stencilWrite;const a=i.clippingPlanes;let s=null;if(null!==a){const i=a.length;s=new Array(i);for(let o=0;o!==i;++o)s[o]=a[o].clone()}return this.clippingPlanes=s,this.clipIntersection=i.clipIntersection,this.clipShadows=i.clipShadows,this.shadowSide=i.shadowSide,this.colorWrite=i.colorWrite,this.precision=i.precision,this.polygonOffset=i.polygonOffset,this.polygonOffsetFactor=i.polygonOffsetFactor,this.polygonOffsetUnits=i.polygonOffsetUnits,this.dithering=i.dithering,this.alphaTest=i.alphaTest,this.premultipliedAlpha=i.premultipliedAlpha,this.visible=i.visible,this.toneMapped=i.toneMapped,this.userData=JSON.parse(JSON.stringify(i.userData)),this},"copy"),dispose:/* @__PURE__ */__name(function(){this.dispatchEvent({type:"dispose"})},"dispose")}),Object.defineProperty(Material.prototype,"needsUpdate",{set:/* @__PURE__ */__name(function(i){!0===i&&this.version++},"set")}),__name(MeshBasicMaterial,"MeshBasicMaterial"),MeshBasicMaterial.prototype=Object.create(Material.prototype),MeshBasicMaterial.prototype.constructor=MeshBasicMaterial,MeshBasicMaterial.prototype.isMeshBasicMaterial=!0,MeshBasicMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.color.copy(i.color),this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.specularMap=i.specularMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.combine=i.combine,this.reflectivity=i.reflectivity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this};const Ls=new Or,Ds=new Sr;function BufferAttribute(i,a,s){if(Array.isArray(i))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=i,this.itemSize=a,this.count=void 0!==i?i.length/a:0,this.normalized=!0===s,this.usage=fr,this.updateRange={offset:0,count:-1},this.version=0}function Int8BufferAttribute(i,a,s){BufferAttribute.call(this,new Int8Array(i),a,s)}function Uint8BufferAttribute(i,a,s){BufferAttribute.call(this,new Uint8Array(i),a,s)}function Uint8ClampedBufferAttribute(i,a,s){BufferAttribute.call(this,new Uint8ClampedArray(i),a,s)}function Int16BufferAttribute(i,a,s){BufferAttribute.call(this,new Int16Array(i),a,s)}function Uint16BufferAttribute(i,a,s){BufferAttribute.call(this,new Uint16Array(i),a,s)}function Int32BufferAttribute(i,a,s){BufferAttribute.call(this,new Int32Array(i),a,s)}function Uint32BufferAttribute(i,a,s){BufferAttribute.call(this,new Uint32Array(i),a,s)}function Float16BufferAttribute(i,a,s){BufferAttribute.call(this,new Uint16Array(i),a,s)}function Float32BufferAttribute(i,a,s){BufferAttribute.call(this,new Float32Array(i),a,s)}function Float64BufferAttribute(i,a,s){BufferAttribute.call(this,new Float64Array(i),a,s)}function arrayMax(i){if(0===i.length)return-1/0;let a=i[0];for(let s=1,o=i.length;s<o;++s)i[s]>a&&(a=i[s]);return a}__name(BufferAttribute,"BufferAttribute"),Object.defineProperty(BufferAttribute.prototype,"needsUpdate",{set:/* @__PURE__ */__name(function(i){!0===i&&this.version++},"set")}),_extends2(BufferAttribute.prototype,{isBufferAttribute:!0,onUploadCallback:/* @__PURE__ */__name(function(){},"onUploadCallback"),setUsage:/* @__PURE__ */__name(function(i){return this.usage=i,this},"setUsage"),copy:/* @__PURE__ */__name(function(i){return this.name=i.name,this.array=new i.array.constructor(i.array),this.itemSize=i.itemSize,this.count=i.count,this.normalized=i.normalized,this.usage=i.usage,this},"copy"),copyAt:/* @__PURE__ */__name(function(i,a,s){i*=this.itemSize,s*=a.itemSize;for(let o=0,u=this.itemSize;o<u;o++)this.array[i+o]=a.array[s+o];return this},"copyAt"),copyArray:/* @__PURE__ */__name(function(i){return this.array.set(i),this},"copyArray"),copyColorsArray:/* @__PURE__ */__name(function(i){const a=this.array;let s=0;for(let o=0,u=i.length;o<u;o++){let u=i[o];void 0===u&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",o),u=new Ms),a[s++]=u.r,a[s++]=u.g,a[s++]=u.b}return this},"copyColorsArray"),copyVector2sArray:/* @__PURE__ */__name(function(i){const a=this.array;let s=0;for(let o=0,u=i.length;o<u;o++){let u=i[o];void 0===u&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",o),u=new Sr),a[s++]=u.x,a[s++]=u.y}return this},"copyVector2sArray"),copyVector3sArray:/* @__PURE__ */__name(function(i){const a=this.array;let s=0;for(let o=0,u=i.length;o<u;o++){let u=i[o];void 0===u&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",o),u=new Or),a[s++]=u.x,a[s++]=u.y,a[s++]=u.z}return this},"copyVector3sArray"),copyVector4sArray:/* @__PURE__ */__name(function(i){const a=this.array;let s=0;for(let o=0,u=i.length;o<u;o++){let u=i[o];void 0===u&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",o),u=new kr),a[s++]=u.x,a[s++]=u.y,a[s++]=u.z,a[s++]=u.w}return this},"copyVector4sArray"),applyMatrix3:/* @__PURE__ */__name(function(i){if(2===this.itemSize)for(let a=0,s=this.count;a<s;a++)Ds.fromBufferAttribute(this,a),Ds.applyMatrix3(i),this.setXY(a,Ds.x,Ds.y);else if(3===this.itemSize)for(let a=0,s=this.count;a<s;a++)Ls.fromBufferAttribute(this,a),Ls.applyMatrix3(i),this.setXYZ(a,Ls.x,Ls.y,Ls.z);return this},"applyMatrix3"),applyMatrix4:/* @__PURE__ */__name(function(i){for(let a=0,s=this.count;a<s;a++)Ls.x=this.getX(a),Ls.y=this.getY(a),Ls.z=this.getZ(a),Ls.applyMatrix4(i),this.setXYZ(a,Ls.x,Ls.y,Ls.z);return this},"applyMatrix4"),applyNormalMatrix:/* @__PURE__ */__name(function(i){for(let a=0,s=this.count;a<s;a++)Ls.x=this.getX(a),Ls.y=this.getY(a),Ls.z=this.getZ(a),Ls.applyNormalMatrix(i),this.setXYZ(a,Ls.x,Ls.y,Ls.z);return this},"applyNormalMatrix"),transformDirection:/* @__PURE__ */__name(function(i){for(let a=0,s=this.count;a<s;a++)Ls.x=this.getX(a),Ls.y=this.getY(a),Ls.z=this.getZ(a),Ls.transformDirection(i),this.setXYZ(a,Ls.x,Ls.y,Ls.z);return this},"transformDirection"),set:/* @__PURE__ */__name(function(i,a=0){return this.array.set(i,a),this},"set"),getX:/* @__PURE__ */__name(function(i){return this.array[i*this.itemSize]},"getX"),setX:/* @__PURE__ */__name(function(i,a){return this.array[i*this.itemSize]=a,this},"setX"),getY:/* @__PURE__ */__name(function(i){return this.array[i*this.itemSize+1]},"getY"),setY:/* @__PURE__ */__name(function(i,a){return this.array[i*this.itemSize+1]=a,this},"setY"),getZ:/* @__PURE__ */__name(function(i){return this.array[i*this.itemSize+2]},"getZ"),setZ:/* @__PURE__ */__name(function(i,a){return this.array[i*this.itemSize+2]=a,this},"setZ"),getW:/* @__PURE__ */__name(function(i){return this.array[i*this.itemSize+3]},"getW"),setW:/* @__PURE__ */__name(function(i,a){return this.array[i*this.itemSize+3]=a,this},"setW"),setXY:/* @__PURE__ */__name(function(i,a,s){return i*=this.itemSize,this.array[i+0]=a,this.array[i+1]=s,this},"setXY"),setXYZ:/* @__PURE__ */__name(function(i,a,s,o){return i*=this.itemSize,this.array[i+0]=a,this.array[i+1]=s,this.array[i+2]=o,this},"setXYZ"),setXYZW:/* @__PURE__ */__name(function(i,a,s,o,u){return i*=this.itemSize,this.array[i+0]=a,this.array[i+1]=s,this.array[i+2]=o,this.array[i+3]=u,this},"setXYZW"),onUpload:/* @__PURE__ */__name(function(i){return this.onUploadCallback=i,this},"onUpload"),clone:/* @__PURE__ */__name(function(){return new this.constructor(this.array,this.itemSize).copy(this)},"clone"),toJSON:/* @__PURE__ */__name(function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}},"toJSON")}),__name(Int8BufferAttribute,"Int8BufferAttribute"),Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int8BufferAttribute.prototype.constructor=Int8BufferAttribute,__name(Uint8BufferAttribute,"Uint8BufferAttribute"),Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute,__name(Uint8ClampedBufferAttribute,"Uint8ClampedBufferAttribute"),Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute,__name(Int16BufferAttribute,"Int16BufferAttribute"),Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int16BufferAttribute.prototype.constructor=Int16BufferAttribute,__name(Uint16BufferAttribute,"Uint16BufferAttribute"),Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute,__name(Int32BufferAttribute,"Int32BufferAttribute"),Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int32BufferAttribute.prototype.constructor=Int32BufferAttribute,__name(Uint32BufferAttribute,"Uint32BufferAttribute"),Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute,__name(Float16BufferAttribute,"Float16BufferAttribute"),Float16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float16BufferAttribute.prototype.constructor=Float16BufferAttribute,Float16BufferAttribute.prototype.isFloat16BufferAttribute=!0,__name(Float32BufferAttribute,"Float32BufferAttribute"),Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float32BufferAttribute.prototype.constructor=Float32BufferAttribute,__name(Float64BufferAttribute,"Float64BufferAttribute"),Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float64BufferAttribute.prototype.constructor=Float64BufferAttribute,__name(arrayMax,"arrayMax");const Rs={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function getTypedArray(i,a){return new Rs[i](a)}__name(getTypedArray,"getTypedArray");let Os=0;const Ns=new ya,Bs=new Object3D,Fs=new Or,Us=new Ur,js=new Ur,Vs=new Or;function BufferGeometry(){Object.defineProperty(this,"id",{value:Os++}),this.uuid=br.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}__name(BufferGeometry,"BufferGeometry"),BufferGeometry.prototype=_extends2(Object.create(EventDispatcher.prototype),{constructor:BufferGeometry,isBufferGeometry:!0,getIndex:/* @__PURE__ */__name(function(){return this.index},"getIndex"),setIndex:/* @__PURE__ */__name(function(i){return Array.isArray(i)?this.index=new(arrayMax(i)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(i,1):this.index=i,this},"setIndex"),getAttribute:/* @__PURE__ */__name(function(i){return this.attributes[i]},"getAttribute"),setAttribute:/* @__PURE__ */__name(function(i,a){return this.attributes[i]=a,this},"setAttribute"),deleteAttribute:/* @__PURE__ */__name(function(i){return delete this.attributes[i],this},"deleteAttribute"),hasAttribute:/* @__PURE__ */__name(function(i){return void 0!==this.attributes[i]},"hasAttribute"),addGroup:/* @__PURE__ */__name(function(i,a,s=0){this.groups.push({start:i,count:a,materialIndex:s})},"addGroup"),clearGroups:/* @__PURE__ */__name(function(){this.groups=[]},"clearGroups"),setDrawRange:/* @__PURE__ */__name(function(i,a){this.drawRange.start=i,this.drawRange.count=a},"setDrawRange"),applyMatrix4:/* @__PURE__ */__name(function(i){const a=this.attributes.position;void 0!==a&&(a.applyMatrix4(i),a.needsUpdate=!0);const s=this.attributes.normal;if(void 0!==s){const a=(new Ar).getNormalMatrix(i);s.applyNormalMatrix(a),s.needsUpdate=!0}const o=this.attributes.tangent;return void 0!==o&&(o.transformDirection(i),o.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},"applyMatrix4"),rotateX:/* @__PURE__ */__name(function(i){return Ns.makeRotationX(i),this.applyMatrix4(Ns),this},"rotateX"),rotateY:/* @__PURE__ */__name(function(i){return Ns.makeRotationY(i),this.applyMatrix4(Ns),this},"rotateY"),rotateZ:/* @__PURE__ */__name(function(i){return Ns.makeRotationZ(i),this.applyMatrix4(Ns),this},"rotateZ"),translate:/* @__PURE__ */__name(function(i,a,s){return Ns.makeTranslation(i,a,s),this.applyMatrix4(Ns),this},"translate"),scale:/* @__PURE__ */__name(function(i,a,s){return Ns.makeScale(i,a,s),this.applyMatrix4(Ns),this},"scale"),lookAt:/* @__PURE__ */__name(function(i){return Bs.lookAt(i),Bs.updateMatrix(),this.applyMatrix4(Bs.matrix),this},"lookAt"),center:/* @__PURE__ */__name(function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fs).negate(),this.translate(Fs.x,Fs.y,Fs.z),this},"center"),setFromPoints:/* @__PURE__ */__name(function(i){const a=[];for(let s=0,o=i.length;s<o;s++){const o=i[s];a.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Float32BufferAttribute(a,3)),this},"setFromPoints"),computeBoundingBox:/* @__PURE__ */__name(function(){null===this.boundingBox&&(this.boundingBox=new Ur);const i=this.attributes.position,a=this.morphAttributes.position;if(i&&i.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Or(-1/0,-1/0,-1/0),new Or(1/0,1/0,1/0));if(void 0!==i){if(this.boundingBox.setFromBufferAttribute(i),a)for(let s=0,o=a.length;s<o;s++){const i=a[s];Us.setFromBufferAttribute(i),this.morphTargetsRelative?(Vs.addVectors(this.boundingBox.min,Us.min),this.boundingBox.expandByPoint(Vs),Vs.addVectors(this.boundingBox.max,Us.max),this.boundingBox.expandByPoint(Vs)):(this.boundingBox.expandByPoint(Us.min),this.boundingBox.expandByPoint(Us.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},"computeBoundingBox"),computeBoundingSphere:/* @__PURE__ */__name(function(){null===this.boundingSphere&&(this.boundingSphere=new na);const i=this.attributes.position,a=this.morphAttributes.position;if(i&&i.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Or,1/0);if(i){const s=this.boundingSphere.center;if(Us.setFromBufferAttribute(i),a)for(let i=0,u=a.length;i<u;i++){const s=a[i];js.setFromBufferAttribute(s),this.morphTargetsRelative?(Vs.addVectors(Us.min,js.min),Us.expandByPoint(Vs),Vs.addVectors(Us.max,js.max),Us.expandByPoint(Vs)):(Us.expandByPoint(js.min),Us.expandByPoint(js.max))}Us.getCenter(s);let o=0;for(let a=0,u=i.count;a<u;a++)Vs.fromBufferAttribute(i,a),o=Math.max(o,s.distanceToSquared(Vs));if(a)for(let u=0,_=a.length;u<_;u++){const _=a[u],x=this.morphTargetsRelative;for(let a=0,u=_.count;a<u;a++)Vs.fromBufferAttribute(_,a),x&&(Fs.fromBufferAttribute(i,a),Vs.add(Fs)),o=Math.max(o,s.distanceToSquared(Vs))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},"computeBoundingSphere"),computeFaceNormals:/* @__PURE__ */__name(function(){},"computeFaceNormals"),computeTangents:/* @__PURE__ */__name(function(){const i=this.index,a=this.attributes;if(null===i||void 0===a.position||void 0===a.normal||void 0===a.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const s=i.array,o=a.position.array,u=a.normal.array,_=a.uv.array,x=o.length/3;void 0===a.tangent&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*x),4));const w=a.tangent.array,C=[],L=[];for(let de=0;de<x;de++)C[de]=new Or,L[de]=new Or;const B=new Or,U=new Or,j=new Or,V=new Sr,z=new Sr,$=new Sr,Y=new Or,Z=new Or;function handleTriangle(i,a,s){B.fromArray(o,3*i),U.fromArray(o,3*a),j.fromArray(o,3*s),V.fromArray(_,2*i),z.fromArray(_,2*a),$.fromArray(_,2*s),U.sub(B),j.sub(B),z.sub(V),$.sub(V);const u=1/(z.x*$.y-$.x*z.y);isFinite(u)&&(Y.copy(U).multiplyScalar($.y).addScaledVector(j,-z.y).multiplyScalar(u),Z.copy(j).multiplyScalar(z.x).addScaledVector(U,-$.x).multiplyScalar(u),C[i].add(Y),C[a].add(Y),C[s].add(Y),L[i].add(Z),L[a].add(Z),L[s].add(Z))}__name(handleTriangle,"handleTriangle");let ee=this.groups;0===ee.length&&(ee=[{start:0,count:s.length}]);for(let de=0,pe=ee.length;de<pe;++de){const i=ee[de],a=i.start;for(let o=a,u=a+i.count;o<u;o+=3)handleTriangle(s[o+0],s[o+1],s[o+2])}const ie=new Or,ae=new Or,le=new Or,ce=new Or;function handleVertex(i){le.fromArray(u,3*i),ce.copy(le);const a=C[i];ie.copy(a),ie.sub(le.multiplyScalar(le.dot(a))).normalize(),ae.crossVectors(ce,a);const s=ae.dot(L[i])<0?-1:1;w[4*i]=ie.x,w[4*i+1]=ie.y,w[4*i+2]=ie.z,w[4*i+3]=s}__name(handleVertex,"handleVertex");for(let de=0,pe=ee.length;de<pe;++de){const i=ee[de],a=i.start;for(let o=a,u=a+i.count;o<u;o+=3)handleVertex(s[o+0]),handleVertex(s[o+1]),handleVertex(s[o+2])}},"computeTangents"),computeVertexNormals:/* @__PURE__ */__name(function(){const i=this.index,a=this.getAttribute("position");if(void 0!==a){let s=this.getAttribute("normal");if(void 0===s)s=new BufferAttribute(new Float32Array(3*a.count),3),this.setAttribute("normal",s);else for(let i=0,a=s.count;i<a;i++)s.setXYZ(i,0,0,0);const o=new Or,u=new Or,_=new Or,x=new Or,w=new Or,C=new Or,L=new Or,B=new Or;if(i)for(let U=0,j=i.count;U<j;U+=3){const j=i.getX(U+0),V=i.getX(U+1),z=i.getX(U+2);o.fromBufferAttribute(a,j),u.fromBufferAttribute(a,V),_.fromBufferAttribute(a,z),L.subVectors(_,u),B.subVectors(o,u),L.cross(B),x.fromBufferAttribute(s,j),w.fromBufferAttribute(s,V),C.fromBufferAttribute(s,z),x.add(L),w.add(L),C.add(L),s.setXYZ(j,x.x,x.y,x.z),s.setXYZ(V,w.x,w.y,w.z),s.setXYZ(z,C.x,C.y,C.z)}else for(let i=0,U=a.count;i<U;i+=3)o.fromBufferAttribute(a,i+0),u.fromBufferAttribute(a,i+1),_.fromBufferAttribute(a,i+2),L.subVectors(_,u),B.subVectors(o,u),L.cross(B),s.setXYZ(i+0,L.x,L.y,L.z),s.setXYZ(i+1,L.x,L.y,L.z),s.setXYZ(i+2,L.x,L.y,L.z);this.normalizeNormals(),s.needsUpdate=!0}},"computeVertexNormals"),merge:/* @__PURE__ */__name(function(i,a){if(!i||!i.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",i);void 0===a&&(a=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const s=this.attributes;for(const o in s){if(void 0===i.attributes[o])continue;const u=s[o].array,_=i.attributes[o],x=_.array,w=_.itemSize*a,C=Math.min(x.length,u.length-w);for(let i=0,a=w;i<C;i++,a++)u[a]=x[i]}return this},"merge"),normalizeNormals:/* @__PURE__ */__name(function(){const i=this.attributes.normal;for(let a=0,s=i.count;a<s;a++)Vs.fromBufferAttribute(i,a),Vs.normalize(),i.setXYZ(a,Vs.x,Vs.y,Vs.z)},"normalizeNormals"),toNonIndexed:/* @__PURE__ */__name(function(){function convertBufferAttribute(i,a){const s=i.array,o=i.itemSize,u=i.normalized,_=new s.constructor(a.length*o);let x=0,w=0;for(let C=0,L=a.length;C<L;C++){x=a[C]*o;for(let i=0;i<o;i++)_[w++]=s[x++]}return new BufferAttribute(_,o,u)}if(__name(convertBufferAttribute,"convertBufferAttribute"),null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new BufferGeometry,a=this.index.array,s=this.attributes;for(const _ in s){const o=convertBufferAttribute(s[_],a);i.setAttribute(_,o)}const o=this.morphAttributes;for(const _ in o){const s=[],u=o[_];for(let i=0,o=u.length;i<o;i++){const o=convertBufferAttribute(u[i],a);s.push(o)}i.morphAttributes[_]=s}i.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let _=0,x=u.length;_<x;_++){const a=u[_];i.addGroup(a.start,a.count,a.materialIndex)}return i},"toNonIndexed"),toJSON:/* @__PURE__ */__name(function(){const i={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),Object.keys(this.userData).length>0&&(i.userData=this.userData),void 0!==this.parameters){const a=this.parameters;for(const s in a)void 0!==a[s]&&(i[s]=a[s]);return i}i.data={attributes:{}};const a=this.index;null!==a&&(i.data.index={type:a.array.constructor.name,array:Array.prototype.slice.call(a.array)});const s=this.attributes;for(const w in s){const a=s[w],o=a.toJSON(i.data);""!==a.name&&(o.name=a.name),i.data.attributes[w]=o}const o={};let u=!1;for(const w in this.morphAttributes){const a=this.morphAttributes[w],s=[];for(let o=0,u=a.length;o<u;o++){const u=a[o],_=u.toJSON(i.data);""!==u.name&&(_.name=u.name),s.push(_)}s.length>0&&(o[w]=s,u=!0)}u&&(i.data.morphAttributes=o,i.data.morphTargetsRelative=this.morphTargetsRelative);const _=this.groups;_.length>0&&(i.data.groups=JSON.parse(JSON.stringify(_)));const x=this.boundingSphere;return null!==x&&(i.data.boundingSphere={center:x.center.toArray(),radius:x.radius}),i},"toJSON"),clone:/* @__PURE__ */__name(function(){return(new BufferGeometry).copy(this)},"clone"),copy:/* @__PURE__ */__name(function(i){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const a={};this.name=i.name;const s=i.index;null!==s&&this.setIndex(s.clone(a));const o=i.attributes;for(const C in o){const i=o[C];this.setAttribute(C,i.clone(a))}const u=i.morphAttributes;for(const C in u){const i=[],s=u[C];for(let o=0,u=s.length;o<u;o++)i.push(s[o].clone(a));this.morphAttributes[C]=i}this.morphTargetsRelative=i.morphTargetsRelative;const _=i.groups;for(let C=0,L=_.length;C<L;C++){const i=_[C];this.addGroup(i.start,i.count,i.materialIndex)}const x=i.boundingBox;null!==x&&(this.boundingBox=x.clone());const w=i.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.drawRange.start=i.drawRange.start,this.drawRange.count=i.drawRange.count,this.userData=i.userData,this},"copy"),dispose:/* @__PURE__ */__name(function(){this.dispatchEvent({type:"dispose"})},"dispose")});const zs=new ya,Hs=new ga,$s=new na,Gs=new Or,Ws=new Or,qs=new Or,Xs=new Or,Qs=new Or,Ks=new Or,Ys=new Or,Js=new Or,Zs=new Or,eo=new Sr,to=new Sr,no=new Sr,io=new Or,ro=new Or;function Mesh(i=new BufferGeometry,a=new MeshBasicMaterial){Object3D.call(this),this.type="Mesh",this.geometry=i,this.material=a,this.updateMorphTargets()}function checkIntersection(i,a,s,o,u,_,x,w){let C;if(C=a.side===le?o.intersectTriangle(x,_,u,!0,w):o.intersectTriangle(u,_,x,a.side!==ce,w),null===C)return null;ro.copy(w),ro.applyMatrix4(i.matrixWorld);const L=s.ray.origin.distanceTo(ro);return L<s.near||L>s.far?null:{distance:L,point:ro.clone(),object:i}}function checkBufferGeometryIntersection(i,a,s,o,u,_,x,w,C,L,B,U){Gs.fromBufferAttribute(u,L),Ws.fromBufferAttribute(u,B),qs.fromBufferAttribute(u,U);const j=i.morphTargetInfluences;if(a.morphTargets&&_&&j){Ys.set(0,0,0),Js.set(0,0,0),Zs.set(0,0,0);for(let i=0,a=_.length;i<a;i++){const a=j[i],s=_[i];0!==a&&(Xs.fromBufferAttribute(s,L),Qs.fromBufferAttribute(s,B),Ks.fromBufferAttribute(s,U),x?(Ys.addScaledVector(Xs,a),Js.addScaledVector(Qs,a),Zs.addScaledVector(Ks,a)):(Ys.addScaledVector(Xs.sub(Gs),a),Js.addScaledVector(Qs.sub(Ws),a),Zs.addScaledVector(Ks.sub(qs),a)))}Gs.add(Ys),Ws.add(Js),qs.add(Zs)}i.isSkinnedMesh&&(i.boneTransform(L,Gs),i.boneTransform(B,Ws),i.boneTransform(U,qs));const V=checkIntersection(i,a,s,o,Gs,Ws,qs,io);if(V){w&&(eo.fromBufferAttribute(w,L),to.fromBufferAttribute(w,B),no.fromBufferAttribute(w,U),V.uv=xs.getUV(io,Gs,Ws,qs,eo,to,no,new Sr)),C&&(eo.fromBufferAttribute(C,L),to.fromBufferAttribute(C,B),no.fromBufferAttribute(C,U),V.uv2=xs.getUV(io,Gs,Ws,qs,eo,to,no,new Sr));const i=new Ps(L,B,U);xs.getNormal(Gs,Ws,qs,i.normal),V.face=i}return V}__name(Mesh,"Mesh"),Mesh.prototype=_extends2(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,copy:/* @__PURE__ */__name(function(i){return Object3D.prototype.copy.call(this,i),void 0!==i.morphTargetInfluences&&(this.morphTargetInfluences=i.morphTargetInfluences.slice()),void 0!==i.morphTargetDictionary&&(this.morphTargetDictionary=_extends2({},i.morphTargetDictionary)),this.material=i.material,this.geometry=i.geometry,this},"copy"),updateMorphTargets:/* @__PURE__ */__name(function(){const i=this.geometry;if(i.isBufferGeometry){const a=i.morphAttributes,s=Object.keys(a);if(s.length>0){const i=a[s[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}else{const a=i.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},"updateMorphTargets"),raycast:/* @__PURE__ */__name(function(i,a){const s=this.geometry,o=this.material,u=this.matrixWorld;if(void 0===o)return;if(null===s.boundingSphere&&s.computeBoundingSphere(),$s.copy(s.boundingSphere),$s.applyMatrix4(u),!1===i.ray.intersectsSphere($s))return;if(zs.copy(u).invert(),Hs.copy(i.ray).applyMatrix4(zs),null!==s.boundingBox&&!1===Hs.intersectsBox(s.boundingBox))return;let _;if(s.isBufferGeometry){const u=s.index,x=s.attributes.position,w=s.morphAttributes.position,C=s.morphTargetsRelative,L=s.attributes.uv,B=s.attributes.uv2,U=s.groups,j=s.drawRange;if(null!==u)if(Array.isArray(o))for(let s=0,V=U.length;s<V;s++){const V=U[s],z=o[V.materialIndex];for(let s=Math.max(V.start,j.start),o=Math.min(V.start+V.count,j.start+j.count);s<o;s+=3){const o=u.getX(s),U=u.getX(s+1),j=u.getX(s+2);_=checkBufferGeometryIntersection(this,z,i,Hs,x,w,C,L,B,o,U,j),_&&(_.faceIndex=Math.floor(s/3),_.face.materialIndex=V.materialIndex,a.push(_))}}else for(let s=Math.max(0,j.start),V=Math.min(u.count,j.start+j.count);s<V;s+=3){const U=u.getX(s),j=u.getX(s+1),V=u.getX(s+2);_=checkBufferGeometryIntersection(this,o,i,Hs,x,w,C,L,B,U,j,V),_&&(_.faceIndex=Math.floor(s/3),a.push(_))}else if(void 0!==x)if(Array.isArray(o))for(let s=0,V=U.length;s<V;s++){const u=U[s],V=o[u.materialIndex];for(let s=Math.max(u.start,j.start),o=Math.min(u.start+u.count,j.start+j.count);s<o;s+=3)_=checkBufferGeometryIntersection(this,V,i,Hs,x,w,C,L,B,s,s+1,s+2),_&&(_.faceIndex=Math.floor(s/3),_.face.materialIndex=u.materialIndex,a.push(_))}else for(let s=Math.max(0,j.start),V=Math.min(x.count,j.start+j.count);s<V;s+=3)_=checkBufferGeometryIntersection(this,o,i,Hs,x,w,C,L,B,s,s+1,s+2),_&&(_.faceIndex=Math.floor(s/3),a.push(_))}else s.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},"raycast")}),__name(checkIntersection,"checkIntersection"),__name(checkBufferGeometryIntersection,"checkBufferGeometryIntersection");const ao=class _BoxGeometry extends BufferGeometry{constructor(i=1,a=1,s=1,o=1,u=1,_=1){super(),this.type="BoxGeometry",this.parameters={width:i,height:a,depth:s,widthSegments:o,heightSegments:u,depthSegments:_};const x=this;o=Math.floor(o),u=Math.floor(u),_=Math.floor(_);const w=[],C=[],L=[],B=[];let U=0,j=0;function buildPlane(i,a,s,o,u,_,V,z,$,Y,Z){const ee=_/$,ie=V/Y,ae=_/2,le=V/2,ce=z/2,de=$+1,pe=Y+1;let fe=0,_e=0;const ye=new Or;for(let x=0;x<pe;x++){const _=x*ie-le;for(let w=0;w<de;w++){const U=w*ee-ae;ye[i]=U*o,ye[a]=_*u,ye[s]=ce,C.push(ye.x,ye.y,ye.z),ye[i]=0,ye[a]=0,ye[s]=z>0?1:-1,L.push(ye.x,ye.y,ye.z),B.push(w/$),B.push(1-x/Y),fe+=1}}for(let x=0;x<Y;x++)for(let i=0;i<$;i++){const a=U+i+de*x,s=U+i+de*(x+1),o=U+(i+1)+de*(x+1),u=U+(i+1)+de*x;w.push(a,s,u),w.push(s,o,u),_e+=6}x.addGroup(j,_e,Z),j+=_e,U+=fe}buildPlane("z","y","x",-1,-1,s,a,i,_,u,0),buildPlane("z","y","x",1,-1,s,a,-i,_,u,1),buildPlane("x","z","y",1,1,i,s,a,o,_,2),buildPlane("x","z","y",1,-1,i,s,-a,o,_,3),buildPlane("x","y","z",1,-1,i,a,s,o,u,4),buildPlane("x","y","z",-1,-1,i,a,-s,o,u,5),this.setIndex(w),this.setAttribute("position",new Float32BufferAttribute(C,3)),this.setAttribute("normal",new Float32BufferAttribute(L,3)),this.setAttribute("uv",new Float32BufferAttribute(B,2)),__name(buildPlane,"buildPlane")}};__name(ao,"BoxGeometry");let so=ao;function cloneUniforms(i){const a={};for(const s in i){a[s]={};for(const o in i[s]){const u=i[s][o];u&&(u.isColor||u.isMatrix3||u.isMatrix4||u.isVector2||u.isVector3||u.isVector4||u.isTexture)?a[s][o]=u.clone():Array.isArray(u)?a[s][o]=u.slice():a[s][o]=u}}return a}function mergeUniforms(i){const a={};for(let s=0;s<i.length;s++){const o=cloneUniforms(i[s]);for(const i in o)a[i]=o[i]}return a}__name(cloneUniforms,"cloneUniforms"),__name(mergeUniforms,"mergeUniforms");const oo={clone:cloneUniforms,merge:mergeUniforms};var lo="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",co="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function ShaderMaterial(i){Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=lo,this.fragmentShader=co,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==i&&(void 0!==i.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(i))}function Camera(){Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new ya,this.projectionMatrix=new ya,this.projectionMatrixInverse=new ya}function PerspectiveCamera(i=50,a=1,s=.1,o=2e3){Camera.call(this),this.type="PerspectiveCamera",this.fov=i,this.zoom=1,this.near=s,this.far=o,this.focus=10,this.aspect=a,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}__name(ShaderMaterial,"ShaderMaterial"),ShaderMaterial.prototype=Object.create(Material.prototype),ShaderMaterial.prototype.constructor=ShaderMaterial,ShaderMaterial.prototype.isShaderMaterial=!0,ShaderMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.fragmentShader=i.fragmentShader,this.vertexShader=i.vertexShader,this.uniforms=cloneUniforms(i.uniforms),this.defines=_extends2({},i.defines),this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.lights=i.lights,this.clipping=i.clipping,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this.extensions=_extends2({},i.extensions),this.glslVersion=i.glslVersion,this},ShaderMaterial.prototype.toJSON=function(i){const a=Material.prototype.toJSON.call(this,i);a.glslVersion=this.glslVersion,a.uniforms={};for(const o in this.uniforms){const s=this.uniforms[o].value;s&&s.isTexture?a.uniforms[o]={type:"t",value:s.toJSON(i).uuid}:s&&s.isColor?a.uniforms[o]={type:"c",value:s.getHex()}:s&&s.isVector2?a.uniforms[o]={type:"v2",value:s.toArray()}:s&&s.isVector3?a.uniforms[o]={type:"v3",value:s.toArray()}:s&&s.isVector4?a.uniforms[o]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?a.uniforms[o]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?a.uniforms[o]={type:"m4",value:s.toArray()}:a.uniforms[o]={value:s}}Object.keys(this.defines).length>0&&(a.defines=this.defines),a.vertexShader=this.vertexShader,a.fragmentShader=this.fragmentShader;const s={};for(const o in this.extensions)!0===this.extensions[o]&&(s[o]=!0);return Object.keys(s).length>0&&(a.extensions=s),a},__name(Camera,"Camera"),Camera.prototype=_extends2(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:/* @__PURE__ */__name(function(i,a){return Object3D.prototype.copy.call(this,i,a),this.matrixWorldInverse.copy(i.matrixWorldInverse),this.projectionMatrix.copy(i.projectionMatrix),this.projectionMatrixInverse.copy(i.projectionMatrixInverse),this},"copy"),getWorldDirection:/* @__PURE__ */__name(function(i){void 0===i&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),i=new Or),this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return i.set(-a[8],-a[9],-a[10]).normalize()},"getWorldDirection"),updateMatrixWorld:/* @__PURE__ */__name(function(i){Object3D.prototype.updateMatrixWorld.call(this,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()},"updateMatrixWorld"),updateWorldMatrix:/* @__PURE__ */__name(function(i,a){Object3D.prototype.updateWorldMatrix.call(this,i,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()},"updateWorldMatrix"),clone:/* @__PURE__ */__name(function(){return(new this.constructor).copy(this)},"clone")}),__name(PerspectiveCamera,"PerspectiveCamera"),PerspectiveCamera.prototype=_extends2(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:/* @__PURE__ */__name(function(i,a){return Camera.prototype.copy.call(this,i,a),this.fov=i.fov,this.zoom=i.zoom,this.near=i.near,this.far=i.far,this.focus=i.focus,this.aspect=i.aspect,this.view=null===i.view?null:_extends2({},i.view),this.filmGauge=i.filmGauge,this.filmOffset=i.filmOffset,this},"copy"),setFocalLength:/* @__PURE__ */__name(function(i){const a=.5*this.getFilmHeight()/i;this.fov=2*br.RAD2DEG*Math.atan(a),this.updateProjectionMatrix()},"setFocalLength"),getFocalLength:/* @__PURE__ */__name(function(){const i=Math.tan(.5*br.DEG2RAD*this.fov);return.5*this.getFilmHeight()/i},"getFocalLength"),getEffectiveFOV:/* @__PURE__ */__name(function(){return 2*br.RAD2DEG*Math.atan(Math.tan(.5*br.DEG2RAD*this.fov)/this.zoom)},"getEffectiveFOV"),getFilmWidth:/* @__PURE__ */__name(function(){return this.filmGauge*Math.min(this.aspect,1)},"getFilmWidth"),getFilmHeight:/* @__PURE__ */__name(function(){return this.filmGauge/Math.max(this.aspect,1)},"getFilmHeight"),setViewOffset:/* @__PURE__ */__name(function(i,a,s,o,u,_){this.aspect=i/a,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=a,this.view.offsetX=s,this.view.offsetY=o,this.view.width=u,this.view.height=_,this.updateProjectionMatrix()},"setViewOffset"),clearViewOffset:/* @__PURE__ */__name(function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},"clearViewOffset"),updateProjectionMatrix:/* @__PURE__ */__name(function(){const i=this.near;let a=i*Math.tan(.5*br.DEG2RAD*this.fov)/this.zoom,s=2*a,o=this.aspect*s,u=-.5*o;const _=this.view;if(null!==this.view&&this.view.enabled){const i=_.fullWidth,x=_.fullHeight;u+=_.offsetX*o/i,a-=_.offsetY*s/x,o*=_.width/i,s*=_.height/x}const x=this.filmOffset;0!==x&&(u+=i*x/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+o,a,a-s,i,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},"updateProjectionMatrix"),toJSON:/* @__PURE__ */__name(function(i){const a=Object3D.prototype.toJSON.call(this,i);return a.object.fov=this.fov,a.object.zoom=this.zoom,a.object.near=this.near,a.object.far=this.far,a.object.focus=this.focus,a.object.aspect=this.aspect,null!==this.view&&(a.object.view=_extends2({},this.view)),a.object.filmGauge=this.filmGauge,a.object.filmOffset=this.filmOffset,a},"toJSON")});const uo=90,ho=1;function CubeCamera(i,a,s){if(Object3D.call(this),this.type="CubeCamera",!0!==s.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=s;const o=new PerspectiveCamera(uo,ho,i,a);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Or(1,0,0)),this.add(o);const u=new PerspectiveCamera(uo,ho,i,a);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Or(-1,0,0)),this.add(u);const _=new PerspectiveCamera(uo,ho,i,a);_.layers=this.layers,_.up.set(0,0,1),_.lookAt(new Or(0,1,0)),this.add(_);const x=new PerspectiveCamera(uo,ho,i,a);x.layers=this.layers,x.up.set(0,0,-1),x.lookAt(new Or(0,-1,0)),this.add(x);const w=new PerspectiveCamera(uo,ho,i,a);w.layers=this.layers,w.up.set(0,-1,0),w.lookAt(new Or(0,0,1)),this.add(w);const C=new PerspectiveCamera(uo,ho,i,a);C.layers=this.layers,C.up.set(0,-1,0),C.lookAt(new Or(0,0,-1)),this.add(C),this.update=function(i,a){null===this.parent&&this.updateMatrixWorld();const L=i.xr.enabled,B=i.getRenderTarget();i.xr.enabled=!1;const U=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,i.setRenderTarget(s,0),i.render(a,o),i.setRenderTarget(s,1),i.render(a,u),i.setRenderTarget(s,2),i.render(a,_),i.setRenderTarget(s,3),i.render(a,x),i.setRenderTarget(s,4),i.render(a,w),s.texture.generateMipmaps=U,i.setRenderTarget(s,5),i.render(a,C),i.setRenderTarget(B),i.xr.enabled=L}}function CubeTexture(i,a,s,o,u,_,x,w,C,L){i=void 0!==i?i:[],a=void 0!==a?a:Tt,x=void 0!==x?x:Kt,Texture.call(this,i,a,s,o,u,_,x,w,C,L),this.flipY=!1,this._needsFlipEnvMap=!0}__name(CubeCamera,"CubeCamera"),CubeCamera.prototype=Object.create(Object3D.prototype),CubeCamera.prototype.constructor=CubeCamera,__name(CubeTexture,"CubeTexture"),CubeTexture.prototype=Object.create(Texture.prototype),CubeTexture.prototype.constructor=CubeTexture,CubeTexture.prototype.isCubeTexture=!0,Object.defineProperty(CubeTexture.prototype,"images",{get:/* @__PURE__ */__name(function(){return this.image},"get"),set:/* @__PURE__ */__name(function(i){this.image=i},"set")});const po=class _WebGLCubeRenderTarget extends Ir{constructor(i,a,s){Number.isInteger(a)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),a=s),super(i,i,a),Object.defineProperty(this,"isWebGLCubeRenderTarget",{value:!0}),a=a||{},this.texture=new CubeTexture(void 0,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(i,a){this.texture.type=a.type,this.texture.format=Yt,this.texture.encoding=a.encoding,this.texture.generateMipmaps=a.generateMipmaps,this.texture.minFilter=a.minFilter,this.texture.magFilter=a.magFilter;const s={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},o=new so(5,5,5),u=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,side:le,blending:pe});u.uniforms.tEquirect.value=a;const _=new Mesh(o,u),x=a.minFilter;return a.minFilter===Ot&&(a.minFilter=Dt),new CubeCamera(1,10,this).update(i,_),a.minFilter=x,_.geometry.dispose(),_.material.dispose(),this}clear(i,a,s,o){const u=i.getRenderTarget();for(let _=0;_<6;_++)i.setRenderTarget(this,_),i.clear(a,s,o);i.setRenderTarget(u)}};__name(po,"WebGLCubeRenderTarget");let mo=po;function DataTexture(i,a,s,o,u,_,x,w,C,L,B,U){Texture.call(this,null,_,x,w,C,L,o,u,B,U),this.image={data:i||null,width:a||1,height:s||1},this.magFilter=void 0!==C?C:Pt,this.minFilter=void 0!==L?L:Pt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}__name(DataTexture,"DataTexture"),DataTexture.prototype=Object.create(Texture.prototype),DataTexture.prototype.constructor=DataTexture,DataTexture.prototype.isDataTexture=!0;const fo=/* @__PURE__ */new na,go=/* @__PURE__ */new Or,_o=class _Frustum{constructor(i,a,s,o,u,_){this.planes=[void 0!==i?i:new ds,void 0!==a?a:new ds,void 0!==s?s:new ds,void 0!==o?o:new ds,void 0!==u?u:new ds,void 0!==_?_:new ds]}set(i,a,s,o,u,_){const x=this.planes;return x[0].copy(i),x[1].copy(a),x[2].copy(s),x[3].copy(o),x[4].copy(u),x[5].copy(_),this}clone(){return(new this.constructor).copy(this)}copy(i){const a=this.planes;for(let s=0;s<6;s++)a[s].copy(i.planes[s]);return this}setFromProjectionMatrix(i){const a=this.planes,s=i.elements,o=s[0],u=s[1],_=s[2],x=s[3],w=s[4],C=s[5],L=s[6],B=s[7],U=s[8],j=s[9],V=s[10],z=s[11],$=s[12],Y=s[13],Z=s[14],ee=s[15];return a[0].setComponents(x-o,B-w,z-U,ee-$).normalize(),a[1].setComponents(x+o,B+w,z+U,ee+$).normalize(),a[2].setComponents(x+u,B+C,z+j,ee+Y).normalize(),a[3].setComponents(x-u,B-C,z-j,ee-Y).normalize(),a[4].setComponents(x-_,B-L,z-V,ee-Z).normalize(),a[5].setComponents(x+_,B+L,z+V,ee+Z).normalize(),this}intersectsObject(i){const a=i.geometry;return null===a.boundingSphere&&a.computeBoundingSphere(),fo.copy(a.boundingSphere).applyMatrix4(i.matrixWorld),this.intersectsSphere(fo)}intersectsSprite(i){return fo.center.set(0,0,0),fo.radius=.7071067811865476,fo.applyMatrix4(i.matrixWorld),this.intersectsSphere(fo)}intersectsSphere(i){const a=this.planes,s=i.center,o=-i.radius;for(let u=0;u<6;u++)if(a[u].distanceToPoint(s)<o)return!1;return!0}intersectsBox(i){const a=this.planes;for(let s=0;s<6;s++){const o=a[s];if(go.x=o.normal.x>0?i.max.x:i.min.x,go.y=o.normal.y>0?i.max.y:i.min.y,go.z=o.normal.z>0?i.max.z:i.min.z,o.distanceToPoint(go)<0)return!1}return!0}containsPoint(i){const a=this.planes;for(let s=0;s<6;s++)if(a[s].distanceToPoint(i)<0)return!1;return!0}};__name(_o,"Frustum");let yo=_o;function WebGLAnimation(){let i=null,a=!1,s=null,o=null;function onAnimationFrame(a,u){s(a,u),o=i.requestAnimationFrame(onAnimationFrame)}return __name(onAnimationFrame,"onAnimationFrame"),{start:/* @__PURE__ */__name(function(){!0!==a&&null!==s&&(o=i.requestAnimationFrame(onAnimationFrame),a=!0)},"start"),stop:/* @__PURE__ */__name(function(){i.cancelAnimationFrame(o),a=!1},"stop"),setAnimationLoop:/* @__PURE__ */__name(function(i){s=i},"setAnimationLoop"),setContext:/* @__PURE__ */__name(function(a){i=a},"setContext")}}function WebGLAttributes(i,a){const s=a.isWebGL2,o=/* @__PURE__ */new WeakMap;function createBuffer(a,o){const u=a.array,_=a.usage,x=i.createBuffer();i.bindBuffer(o,x),i.bufferData(o,u,_),a.onUploadCallback();let w=5126;return u instanceof Float32Array?w=5126:u instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):u instanceof Uint16Array?a.isFloat16BufferAttribute?s?w=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):w=5123:u instanceof Int16Array?w=5122:u instanceof Uint32Array?w=5125:u instanceof Int32Array?w=5124:u instanceof Int8Array?w=5120:u instanceof Uint8Array&&(w=5121),{buffer:x,type:w,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version}}function updateBuffer(a,o,u){const _=o.array,x=o.updateRange;i.bindBuffer(u,a),-1===x.count?i.bufferSubData(u,0,_):(s?i.bufferSubData(u,x.offset*_.BYTES_PER_ELEMENT,_,x.offset,x.count):i.bufferSubData(u,x.offset*_.BYTES_PER_ELEMENT,_.subarray(x.offset,x.offset+x.count)),x.count=-1)}function get2(i){return i.isInterleavedBufferAttribute&&(i=i.data),o.get(i)}function remove(a){a.isInterleavedBufferAttribute&&(a=a.data);const s=o.get(a);s&&(i.deleteBuffer(s.buffer),o.delete(a))}function update(i,a){if(i.isGLBufferAttribute){const a=o.get(i);return void((!a||a.version<i.version)&&o.set(i,{buffer:i.buffer,type:i.type,bytesPerElement:i.elementSize,version:i.version}))}i.isInterleavedBufferAttribute&&(i=i.data);const s=o.get(i);void 0===s?o.set(i,createBuffer(i,a)):s.version<i.version&&(updateBuffer(s.buffer,i,a),s.version=i.version)}return __name(createBuffer,"createBuffer"),__name(updateBuffer,"updateBuffer"),__name(get2,"get"),__name(remove,"remove"),__name(update,"update"),{get:get2,remove:remove,update:update}}__name(WebGLAnimation,"WebGLAnimation"),__name(WebGLAttributes,"WebGLAttributes");const vo=class _PlaneGeometry extends BufferGeometry{constructor(i=1,a=1,s=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:i,height:a,widthSegments:s,heightSegments:o};const u=i/2,_=a/2,x=Math.floor(s),w=Math.floor(o),C=x+1,L=w+1,B=i/x,U=a/w,j=[],V=[],z=[],$=[];for(let Y=0;Y<L;Y++){const i=Y*U-_;for(let a=0;a<C;a++){const s=a*B-u;V.push(s,-i,0),z.push(0,0,1),$.push(a/x),$.push(1-Y/w)}}for(let Y=0;Y<w;Y++)for(let i=0;i<x;i++){const a=i+C*Y,s=i+C*(Y+1),o=i+1+C*(Y+1),u=i+1+C*Y;j.push(a,s,u),j.push(s,o,u)}this.setIndex(j),this.setAttribute("position",new Float32BufferAttribute(V,3)),this.setAttribute("normal",new Float32BufferAttribute(z,3)),this.setAttribute("uv",new Float32BufferAttribute($,2))}};__name(vo,"PlaneGeometry");let bo=vo;const To={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},So={common:{diffuse:{value:new Ms(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ar},uv2Transform:{value:new Ar},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Sr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ms(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ms(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Ar}},sprite:{diffuse:{value:new Ms(15658734)},opacity:{value:1},center:{value:new Sr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Ar}}},xo={basic:{uniforms:mergeUniforms([So.common,So.specularmap,So.envmap,So.aomap,So.lightmap,So.fog]),vertexShader:To.meshbasic_vert,fragmentShader:To.meshbasic_frag},lambert:{uniforms:mergeUniforms([So.common,So.specularmap,So.envmap,So.aomap,So.lightmap,So.emissivemap,So.fog,So.lights,{emissive:{value:new Ms(0)}}]),vertexShader:To.meshlambert_vert,fragmentShader:To.meshlambert_frag},phong:{uniforms:mergeUniforms([So.common,So.specularmap,So.envmap,So.aomap,So.lightmap,So.emissivemap,So.bumpmap,So.normalmap,So.displacementmap,So.fog,So.lights,{emissive:{value:new Ms(0)},specular:{value:new Ms(1118481)},shininess:{value:30}}]),vertexShader:To.meshphong_vert,fragmentShader:To.meshphong_frag},standard:{uniforms:mergeUniforms([So.common,So.envmap,So.aomap,So.lightmap,So.emissivemap,So.bumpmap,So.normalmap,So.displacementmap,So.roughnessmap,So.metalnessmap,So.fog,So.lights,{emissive:{value:new Ms(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:To.meshphysical_vert,fragmentShader:To.meshphysical_frag},toon:{uniforms:mergeUniforms([So.common,So.aomap,So.lightmap,So.emissivemap,So.bumpmap,So.normalmap,So.displacementmap,So.gradientmap,So.fog,So.lights,{emissive:{value:new Ms(0)}}]),vertexShader:To.meshtoon_vert,fragmentShader:To.meshtoon_frag},matcap:{uniforms:mergeUniforms([So.common,So.bumpmap,So.normalmap,So.displacementmap,So.fog,{matcap:{value:null}}]),vertexShader:To.meshmatcap_vert,fragmentShader:To.meshmatcap_frag},points:{uniforms:mergeUniforms([So.points,So.fog]),vertexShader:To.points_vert,fragmentShader:To.points_frag},dashed:{uniforms:mergeUniforms([So.common,So.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:To.linedashed_vert,fragmentShader:To.linedashed_frag},depth:{uniforms:mergeUniforms([So.common,So.displacementmap]),vertexShader:To.depth_vert,fragmentShader:To.depth_frag},normal:{uniforms:mergeUniforms([So.common,So.bumpmap,So.normalmap,So.displacementmap,{opacity:{value:1}}]),vertexShader:To.normal_vert,fragmentShader:To.normal_frag},sprite:{uniforms:mergeUniforms([So.sprite,So.fog]),vertexShader:To.sprite_vert,fragmentShader:To.sprite_frag},background:{uniforms:{uvTransform:{value:new Ar},t2D:{value:null}},vertexShader:To.background_vert,fragmentShader:To.background_frag},cube:{uniforms:mergeUniforms([So.envmap,{opacity:{value:1}}]),vertexShader:To.cube_vert,fragmentShader:To.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:To.equirect_vert,fragmentShader:To.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([So.common,So.displacementmap,{referencePosition:{value:new Or},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:To.distanceRGBA_vert,fragmentShader:To.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([So.lights,So.fog,{color:{value:new Ms(0)},opacity:{value:1}}]),vertexShader:To.shadow_vert,fragmentShader:To.shadow_frag}};function WebGLBackground(i,a,s,o,u){const _=new Ms(0);let x,w,C=0,L=null,B=0,U=null;function render(s,u,j,V){let z=!0===u.isScene?u.background:null;z&&z.isTexture&&(z=a.get(z));const $=i.xr,Y=$.getSession&&$.getSession();Y&&"additive"===Y.environmentBlendMode&&(z=null),null===z?setClear(_,C):z&&z.isColor&&(setClear(z,1),V=!0),(i.autoClear||V)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),z&&(z.isCubeTexture||z.isWebGLCubeRenderTarget||z.mapping===At)?(void 0===w&&(w=new Mesh(new so(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(xo.cube.uniforms),vertexShader:xo.cube.vertexShader,fragmentShader:xo.cube.fragmentShader,side:le,depthTest:!1,depthWrite:!1,fog:!1})),w.geometry.deleteAttribute("normal"),w.geometry.deleteAttribute("uv"),w.onBeforeRender=function(i,a,s){this.matrixWorld.copyPosition(s.matrixWorld)},Object.defineProperty(w.material,"envMap",{get:/* @__PURE__ */__name(function(){return this.uniforms.envMap.value},"get")}),o.update(w)),z.isWebGLCubeRenderTarget&&(z=z.texture),w.material.uniforms.envMap.value=z,w.material.uniforms.flipEnvMap.value=z.isCubeTexture&&z._needsFlipEnvMap?-1:1,L===z&&B===z.version&&U===i.toneMapping||(w.material.needsUpdate=!0,L=z,B=z.version,U=i.toneMapping),s.unshift(w,w.geometry,w.material,0,0,null)):z&&z.isTexture&&(void 0===x&&(x=new Mesh(new bo(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(xo.background.uniforms),vertexShader:xo.background.vertexShader,fragmentShader:xo.background.fragmentShader,side:ae,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),Object.defineProperty(x.material,"map",{get:/* @__PURE__ */__name(function(){return this.uniforms.t2D.value},"get")}),o.update(x)),x.material.uniforms.t2D.value=z,!0===z.matrixAutoUpdate&&z.updateMatrix(),x.material.uniforms.uvTransform.value.copy(z.matrix),L===z&&B===z.version&&U===i.toneMapping||(x.material.needsUpdate=!0,L=z,B=z.version,U=i.toneMapping),s.unshift(x,x.geometry,x.material,0,0,null))}function setClear(i,a){s.buffers.color.setClear(i.r,i.g,i.b,a,u)}return __name(render,"render"),__name(setClear,"setClear"),{getClearColor:/* @__PURE__ */__name(function(){return _},"getClearColor"),setClearColor:/* @__PURE__ */__name(function(i,a=1){_.set(i),C=a,setClear(_,C)},"setClearColor"),getClearAlpha:/* @__PURE__ */__name(function(){return C},"getClearAlpha"),setClearAlpha:/* @__PURE__ */__name(function(i){C=i,setClear(_,C)},"setClearAlpha"),render:render}}function WebGLBindingStates(i,a,s,o){const u=i.getParameter(34921),_=o.isWebGL2?null:a.get("OES_vertex_array_object"),x=o.isWebGL2||null!==_,w={},C=createBindingState(null);let L=C;function setup2(a,o,u,_,w){let C=!1;if(x){const i=getBindingState(_,u,o);L!==i&&(L=i,bindVertexArrayObject(L.object)),C=needsUpdate(_,w),C&&saveCache(_,w)}else{const i=!0===o.wireframe;L.geometry===_.id&&L.program===u.id&&L.wireframe===i||(L.geometry=_.id,L.program=u.id,L.wireframe=i,C=!0)}!0===a.isInstancedMesh&&(C=!0),null!==w&&s.update(w,34963),C&&(setupVertexAttributes(a,o,u,_),null!==w&&i.bindBuffer(34963,s.get(w).buffer))}function createVertexArrayObject(){return o.isWebGL2?i.createVertexArray():_.createVertexArrayOES()}function bindVertexArrayObject(a){return o.isWebGL2?i.bindVertexArray(a):_.bindVertexArrayOES(a)}function deleteVertexArrayObject(a){return o.isWebGL2?i.deleteVertexArray(a):_.deleteVertexArrayOES(a)}function getBindingState(i,a,s){const o=!0===s.wireframe;let u=w[i.id];void 0===u&&(u={},w[i.id]=u);let _=u[a.id];void 0===_&&(_={},u[a.id]=_);let x=_[o];return void 0===x&&(x=createBindingState(createVertexArrayObject()),_[o]=x),x}function createBindingState(i){const a=[],s=[],o=[];for(let _=0;_<u;_++)a[_]=0,s[_]=0,o[_]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:a,enabledAttributes:s,attributeDivisors:o,object:i,attributes:{},index:null}}function needsUpdate(i,a){const s=L.attributes,o=i.attributes;let u=0;for(const _ in o){const i=s[_],a=o[_];if(void 0===i)return!0;if(i.attribute!==a)return!0;if(i.data!==a.data)return!0;u++}return L.attributesNum!==u||L.index!==a}function saveCache(i,a){const s={},o=i.attributes;let u=0;for(const _ in o){const i=o[_],a={};a.attribute=i,i.data&&(a.data=i.data),s[_]=a,u++}L.attributes=s,L.attributesNum=u,L.index=a}function initAttributes(){const i=L.newAttributes;for(let a=0,s=i.length;a<s;a++)i[a]=0}function enableAttribute(i){enableAttributeAndDivisor(i,0)}function enableAttributeAndDivisor(s,u){const _=L.newAttributes,x=L.enabledAttributes,w=L.attributeDivisors;_[s]=1,0===x[s]&&(i.enableVertexAttribArray(s),x[s]=1),w[s]!==u&&((o.isWebGL2?i:a.get("ANGLE_instanced_arrays"))[o.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](s,u),w[s]=u)}function disableUnusedAttributes(){const a=L.newAttributes,s=L.enabledAttributes;for(let o=0,u=s.length;o<u;o++)s[o]!==a[o]&&(i.disableVertexAttribArray(o),s[o]=0)}function vertexAttribPointer(a,s,u,_,x,w){!0!==o.isWebGL2||5124!==u&&5125!==u?i.vertexAttribPointer(a,s,u,_,x,w):i.vertexAttribIPointer(a,s,u,x,w)}function setupVertexAttributes(u,_,x,w){if(!1===o.isWebGL2&&(u.isInstancedMesh||w.isInstancedBufferGeometry)&&null===a.get("ANGLE_instanced_arrays"))return;initAttributes();const C=w.attributes,L=x.getAttributes(),B=_.defaultAttributeValues;for(const a in L){const o=L[a];if(o>=0){const _=C[a];if(void 0!==_){const a=_.normalized,u=_.itemSize,x=s.get(_);if(void 0===x)continue;const C=x.buffer,L=x.type,B=x.bytesPerElement;if(_.isInterleavedBufferAttribute){const s=_.data,x=s.stride,U=_.offset;s&&s.isInstancedInterleavedBuffer?(enableAttributeAndDivisor(o,s.meshPerAttribute),void 0===w._maxInstanceCount&&(w._maxInstanceCount=s.meshPerAttribute*s.count)):enableAttribute(o),i.bindBuffer(34962,C),vertexAttribPointer(o,u,L,a,x*B,U*B)}else _.isInstancedBufferAttribute?(enableAttributeAndDivisor(o,_.meshPerAttribute),void 0===w._maxInstanceCount&&(w._maxInstanceCount=_.meshPerAttribute*_.count)):enableAttribute(o),i.bindBuffer(34962,C),vertexAttribPointer(o,u,L,a,0,0)}else if("instanceMatrix"===a){const a=s.get(u.instanceMatrix);if(void 0===a)continue;const _=a.buffer,x=a.type;enableAttributeAndDivisor(o+0,1),enableAttributeAndDivisor(o+1,1),enableAttributeAndDivisor(o+2,1),enableAttributeAndDivisor(o+3,1),i.bindBuffer(34962,_),i.vertexAttribPointer(o+0,4,x,!1,64,0),i.vertexAttribPointer(o+1,4,x,!1,64,16),i.vertexAttribPointer(o+2,4,x,!1,64,32),i.vertexAttribPointer(o+3,4,x,!1,64,48)}else if("instanceColor"===a){const a=s.get(u.instanceColor);if(void 0===a)continue;const _=a.buffer,x=a.type;enableAttributeAndDivisor(o,1),i.bindBuffer(34962,_),i.vertexAttribPointer(o,3,x,!1,12,0)}else if(void 0!==B){const s=B[a];if(void 0!==s)switch(s.length){case 2:i.vertexAttrib2fv(o,s);break;case 3:i.vertexAttrib3fv(o,s);break;case 4:i.vertexAttrib4fv(o,s);break;default:i.vertexAttrib1fv(o,s)}}}}disableUnusedAttributes()}function dispose(){reset2();for(const i in w){const a=w[i];for(const i in a){const s=a[i];for(const i in s)deleteVertexArrayObject(s[i].object),delete s[i];delete a[i]}delete w[i]}}function releaseStatesOfGeometry(i){if(void 0===w[i.id])return;const a=w[i.id];for(const s in a){const i=a[s];for(const a in i)deleteVertexArrayObject(i[a].object),delete i[a];delete a[s]}delete w[i.id]}function releaseStatesOfProgram(i){for(const a in w){const s=w[a];if(void 0===s[i.id])continue;const o=s[i.id];for(const i in o)deleteVertexArrayObject(o[i].object),delete o[i];delete s[i.id]}}function reset2(){resetDefaultState(),L!==C&&(L=C,bindVertexArrayObject(L.object))}function resetDefaultState(){C.geometry=null,C.program=null,C.wireframe=!1}return __name(setup2,"setup"),__name(createVertexArrayObject,"createVertexArrayObject"),__name(bindVertexArrayObject,"bindVertexArrayObject"),__name(deleteVertexArrayObject,"deleteVertexArrayObject"),__name(getBindingState,"getBindingState"),__name(createBindingState,"createBindingState"),__name(needsUpdate,"needsUpdate"),__name(saveCache,"saveCache"),__name(initAttributes,"initAttributes"),__name(enableAttribute,"enableAttribute"),__name(enableAttributeAndDivisor,"enableAttributeAndDivisor"),__name(disableUnusedAttributes,"disableUnusedAttributes"),__name(vertexAttribPointer,"vertexAttribPointer"),__name(setupVertexAttributes,"setupVertexAttributes"),__name(dispose,"dispose"),__name(releaseStatesOfGeometry,"releaseStatesOfGeometry"),__name(releaseStatesOfProgram,"releaseStatesOfProgram"),__name(reset2,"reset"),__name(resetDefaultState,"resetDefaultState"),{setup:setup2,reset:reset2,resetDefaultState:resetDefaultState,dispose:dispose,releaseStatesOfGeometry:releaseStatesOfGeometry,releaseStatesOfProgram:releaseStatesOfProgram,initAttributes:initAttributes,enableAttribute:enableAttribute,disableUnusedAttributes:disableUnusedAttributes}}function WebGLBufferRenderer(i,a,s,o){const u=o.isWebGL2;let _;function setMode(i){_=i}function render(a,o){i.drawArrays(_,a,o),s.update(o,_,1)}function renderInstances(o,x,w){if(0===w)return;let C,L;if(u)C=i,L="drawArraysInstanced";else if(C=a.get("ANGLE_instanced_arrays"),L="drawArraysInstancedANGLE",null===C)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[L](_,o,x,w),s.update(x,_,w)}__name(setMode,"setMode"),__name(render,"render"),__name(renderInstances,"renderInstances"),this.setMode=setMode,this.render=render,this.renderInstances=renderInstances}function WebGLCapabilities(i,a,s){let o;function getMaxAnisotropy(){if(void 0!==o)return o;const s=a.get("EXT_texture_filter_anisotropic");return o=null!==s?i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,o}function getMaxPrecision(a){if("highp"===a){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";a="mediump"}return"mediump"===a&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}__name(getMaxAnisotropy,"getMaxAnisotropy"),__name(getMaxPrecision,"getMaxPrecision");const u="undefined"!=typeof WebGL2RenderingContext&&i instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&i instanceof WebGL2ComputeRenderingContext;let _=void 0!==s.precision?s.precision:"highp";const x=getMaxPrecision(_);x!==_&&(console.warn("THREE.WebGLRenderer:",_,"not supported, using",x,"instead."),_=x);const w=!0===s.logarithmicDepthBuffer,C=i.getParameter(34930),L=i.getParameter(35660),B=i.getParameter(3379),U=i.getParameter(34076),j=i.getParameter(34921),V=i.getParameter(36347),z=i.getParameter(36348),$=i.getParameter(36349),Y=L>0,Z=u||!!a.get("OES_texture_float");return{isWebGL2:u,getMaxAnisotropy:getMaxAnisotropy,getMaxPrecision:getMaxPrecision,precision:_,logarithmicDepthBuffer:w,maxTextures:C,maxVertexTextures:L,maxTextureSize:B,maxCubemapSize:U,maxAttributes:j,maxVertexUniforms:V,maxVaryings:z,maxFragmentUniforms:$,vertexTextures:Y,floatFragmentTextures:Z,floatVertexTextures:Y&&Z,maxSamples:u?i.getParameter(36183):0}}function WebGLClipping(i){const a=this;let s=null,o=0,u=!1,_=!1;const x=new ds,w=new Ar,C={value:null,needsUpdate:!1};function resetGlobalState(){C.value!==s&&(C.value=s,C.needsUpdate=o>0),a.numPlanes=o,a.numIntersection=0}function projectPlanes(i,s,o,u){const _=null!==i?i.length:0;let L=null;if(0!==_){if(L=C.value,!0!==u||null===L){const a=o+4*_,u=s.matrixWorldInverse;w.getNormalMatrix(u),(null===L||L.length<a)&&(L=new Float32Array(a));for(let s=0,C=o;s!==_;++s,C+=4)x.copy(i[s]).applyMatrix4(u,w),x.normal.toArray(L,C),L[C+3]=x.constant}C.value=L,C.needsUpdate=!0}return a.numPlanes=_,a.numIntersection=0,L}this.uniform=C,this.numPlanes=0,this.numIntersection=0,this.init=function(i,a,_){const x=0!==i.length||a||0!==o||u;return u=a,s=projectPlanes(i,_,0),o=i.length,x},this.beginShadows=function(){_=!0,projectPlanes(null)},this.endShadows=function(){_=!1,resetGlobalState()},this.setState=function(a,x,w){const L=a.clippingPlanes,B=a.clipIntersection,U=a.clipShadows,j=i.get(a);if(!u||null===L||0===L.length||_&&!U)_?projectPlanes(null):resetGlobalState();else{const i=_?0:o,a=4*i;let u=j.clippingState||null;C.value=u,u=projectPlanes(L,x,a,w);for(let o=0;o!==a;++o)u[o]=s[o];j.clippingState=u,this.numIntersection=B?this.numPlanes:0,this.numPlanes+=i}},__name(resetGlobalState,"resetGlobalState"),__name(projectPlanes,"projectPlanes")}function WebGLCubeMaps(i){let a=/* @__PURE__ */new WeakMap;function mapTextureMapping(i,a){return a===xt?i.mapping=Tt:a===wt&&(i.mapping=St),i}function get2(s){if(s&&s.isTexture){const o=s.mapping;if(o===xt||o===wt){if(a.has(s))return mapTextureMapping(a.get(s).texture,s.mapping);{const o=s.image;if(o&&o.height>0){const u=i.getRenderList(),_=i.getRenderTarget(),x=new mo(o.height/2);return x.fromEquirectangularTexture(i,s),a.set(s,x),i.setRenderTarget(_),i.setRenderList(u),s.addEventListener("dispose",onTextureDispose),mapTextureMapping(x.texture,s.mapping)}return null}}}return s}function onTextureDispose(i){const s=i.target;s.removeEventListener("dispose",onTextureDispose);const o=a.get(s);void 0!==o&&(a.delete(s),o.dispose())}function dispose(){a=/* @__PURE__ */new WeakMap}return __name(mapTextureMapping,"mapTextureMapping"),__name(get2,"get"),__name(onTextureDispose,"onTextureDispose"),__name(dispose,"dispose"),{get:get2,dispose:dispose}}function WebGLExtensions(i){const a={};function getExtension(s){if(void 0!==a[s])return a[s];let o;switch(s){case"WEBGL_depth_texture":o=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=i.getExtension(s)}return a[s]=o,o}return __name(getExtension,"getExtension"),{has:/* @__PURE__ */__name(function(i){return null!==getExtension(i)},"has"),init:/* @__PURE__ */__name(function(i){i.isWebGL2?getExtension("EXT_color_buffer_float"):(getExtension("WEBGL_depth_texture"),getExtension("OES_texture_float"),getExtension("OES_texture_half_float"),getExtension("OES_texture_half_float_linear"),getExtension("OES_standard_derivatives"),getExtension("OES_element_index_uint"),getExtension("OES_vertex_array_object"),getExtension("ANGLE_instanced_arrays")),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float")},"init"),get:/* @__PURE__ */__name(function(i){const a=getExtension(i);return null===a&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),a},"get")}}function WebGLGeometries(i,a,s,o){const u={},_=/* @__PURE__ */new WeakMap;function onGeometryDispose(i){const x=i.target;null!==x.index&&a.remove(x.index);for(const s in x.attributes)a.remove(x.attributes[s]);x.removeEventListener("dispose",onGeometryDispose),delete u[x.id];const w=_.get(x);w&&(a.remove(w),_.delete(x)),o.releaseStatesOfGeometry(x),!0===x.isInstancedBufferGeometry&&delete x._maxInstanceCount,s.memory.geometries--}function get2(i,a){return!0===u[a.id]||(a.addEventListener("dispose",onGeometryDispose),u[a.id]=!0,s.memory.geometries++),a}function update(i){const s=i.attributes;for(const u in s)a.update(s[u],34962);const o=i.morphAttributes;for(const u in o){const i=o[u];for(let s=0,o=i.length;s<o;s++)a.update(i[s],34962)}}function updateWireframeAttribute(i){const s=[],o=i.index,u=i.attributes.position;let x=0;if(null!==o){const i=o.array;x=o.version;for(let a=0,o=i.length;a<o;a+=3){const o=i[a+0],u=i[a+1],_=i[a+2];s.push(o,u,u,_,_,o)}}else{const i=u.array;x=u.version;for(let a=0,o=i.length/3-1;a<o;a+=3){const i=a+0,o=a+1,u=a+2;s.push(i,o,o,u,u,i)}}const w=new(arrayMax(s)>65535?Uint32BufferAttribute:Uint16BufferAttribute)(s,1);w.version=x;const C=_.get(i);C&&a.remove(C),_.set(i,w)}function getWireframeAttribute(i){const a=_.get(i);if(a){const s=i.index;null!==s&&a.version<s.version&&updateWireframeAttribute(i)}else updateWireframeAttribute(i);return _.get(i)}return __name(onGeometryDispose,"onGeometryDispose"),__name(get2,"get"),__name(update,"update"),__name(updateWireframeAttribute,"updateWireframeAttribute"),__name(getWireframeAttribute,"getWireframeAttribute"),{get:get2,update:update,getWireframeAttribute:getWireframeAttribute}}function WebGLIndexedBufferRenderer(i,a,s,o){const u=o.isWebGL2;let _,x,w;function setMode(i){_=i}function setIndex(i){x=i.type,w=i.bytesPerElement}function render(a,o){i.drawElements(_,o,x,a*w),s.update(o,_,1)}function renderInstances(o,C,L){if(0===L)return;let B,U;if(u)B=i,U="drawElementsInstanced";else if(B=a.get("ANGLE_instanced_arrays"),U="drawElementsInstancedANGLE",null===B)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");B[U](_,C,x,o*w,L),s.update(C,_,L)}__name(setMode,"setMode"),__name(setIndex,"setIndex"),__name(render,"render"),__name(renderInstances,"renderInstances"),this.setMode=setMode,this.setIndex=setIndex,this.render=render,this.renderInstances=renderInstances}function WebGLInfo(i){const a={geometries:0,textures:0},s={frame:0,calls:0,triangles:0,points:0,lines:0};function update(i,a,o){switch(s.calls++,a){case 4:s.triangles+=o*(i/3);break;case 1:s.lines+=o*(i/2);break;case 3:s.lines+=o*(i-1);break;case 2:s.lines+=o*i;break;case 0:s.points+=o*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}function reset2(){s.frame++,s.calls=0,s.triangles=0,s.points=0,s.lines=0}return __name(update,"update"),__name(reset2,"reset"),{memory:a,render:s,programs:null,autoReset:!0,reset:reset2,update:update}}function numericalSort(i,a){return i[0]-a[0]}function absNumericalSort(i,a){return Math.abs(a[1])-Math.abs(i[1])}function WebGLMorphtargets(i){const a={},s=new Float32Array(8),o=[];for(let u=0;u<8;u++)o[u]=[u,0];function update(u,_,x,w){const C=u.morphTargetInfluences,L=void 0===C?0:C.length;let B=a[_.id];if(void 0===B){B=[];for(let i=0;i<L;i++)B[i]=[i,0];a[_.id]=B}for(let i=0;i<L;i++){const a=B[i];a[0]=i,a[1]=C[i]}B.sort(absNumericalSort);for(let i=0;i<8;i++)i<L&&B[i][1]?(o[i][0]=B[i][0],o[i][1]=B[i][1]):(o[i][0]=Number.MAX_SAFE_INTEGER,o[i][1]=0);o.sort(numericalSort);const U=x.morphTargets&&_.morphAttributes.position,j=x.morphNormals&&_.morphAttributes.normal;let V=0;for(let i=0;i<8;i++){const a=o[i],u=a[0],x=a[1];u!==Number.MAX_SAFE_INTEGER&&x?(U&&_.getAttribute("morphTarget"+i)!==U[u]&&_.setAttribute("morphTarget"+i,U[u]),j&&_.getAttribute("morphNormal"+i)!==j[u]&&_.setAttribute("morphNormal"+i,j[u]),s[i]=x,V+=x):(U&&!0===_.hasAttribute("morphTarget"+i)&&_.deleteAttribute("morphTarget"+i),j&&!0===_.hasAttribute("morphNormal"+i)&&_.deleteAttribute("morphNormal"+i),s[i]=0)}const z=_.morphTargetsRelative?1:1-V;w.getUniforms().setValue(i,"morphTargetBaseInfluence",z),w.getUniforms().setValue(i,"morphTargetInfluences",s)}return __name(update,"update"),{update:update}}function WebGLObjects(i,a,s,o){let u=/* @__PURE__ */new WeakMap;function update(i){const _=o.render.frame,x=i.geometry,w=a.get(i,x);return u.get(w)!==_&&(a.update(w),u.set(w,_)),i.isInstancedMesh&&(!1===i.hasEventListener("dispose",onInstancedMeshDispose)&&i.addEventListener("dispose",onInstancedMeshDispose),s.update(i.instanceMatrix,34962),null!==i.instanceColor&&s.update(i.instanceColor,34962)),w}function dispose(){u=/* @__PURE__ */new WeakMap}function onInstancedMeshDispose(i){const a=i.target;a.removeEventListener("dispose",onInstancedMeshDispose),s.remove(a.instanceMatrix),null!==a.instanceColor&&s.remove(a.instanceColor)}return __name(update,"update"),__name(dispose,"dispose"),__name(onInstancedMeshDispose,"onInstancedMeshDispose"),{update:update,dispose:dispose}}function DataTexture2DArray(i=null,a=1,s=1,o=1){Texture.call(this,null),this.image={data:i,width:a,height:s,depth:o},this.magFilter=Pt,this.minFilter=Pt,this.wrapR=Mt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function DataTexture3D(i=null,a=1,s=1,o=1){Texture.call(this,null),this.image={data:i,width:a,height:s,depth:o},this.magFilter=Pt,this.minFilter=Pt,this.wrapR=Mt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}xo.physical={uniforms:mergeUniforms([xo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Sr(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Ms(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:To.meshphysical_vert,fragmentShader:To.meshphysical_frag},__name(WebGLBackground,"WebGLBackground"),__name(WebGLBindingStates,"WebGLBindingStates"),__name(WebGLBufferRenderer,"WebGLBufferRenderer"),__name(WebGLCapabilities,"WebGLCapabilities"),__name(WebGLClipping,"WebGLClipping"),__name(WebGLCubeMaps,"WebGLCubeMaps"),__name(WebGLExtensions,"WebGLExtensions"),__name(WebGLGeometries,"WebGLGeometries"),__name(WebGLIndexedBufferRenderer,"WebGLIndexedBufferRenderer"),__name(WebGLInfo,"WebGLInfo"),__name(numericalSort,"numericalSort"),__name(absNumericalSort,"absNumericalSort"),__name(WebGLMorphtargets,"WebGLMorphtargets"),__name(WebGLObjects,"WebGLObjects"),__name(DataTexture2DArray,"DataTexture2DArray"),DataTexture2DArray.prototype=Object.create(Texture.prototype),DataTexture2DArray.prototype.constructor=DataTexture2DArray,DataTexture2DArray.prototype.isDataTexture2DArray=!0,__name(DataTexture3D,"DataTexture3D"),DataTexture3D.prototype=Object.create(Texture.prototype),DataTexture3D.prototype.constructor=DataTexture3D,DataTexture3D.prototype.isDataTexture3D=!0;const wo=new Texture,Ao=new DataTexture2DArray,Co=new DataTexture3D,Eo=new CubeTexture,Mo=[],ko=[],Po=new Float32Array(16),Io=new Float32Array(9),Lo=new Float32Array(4);function flatten2(i,a,s){const o=i[0];if(o<=0||o>0)return i;const u=a*s;let _=Mo[u];if(void 0===_&&(_=new Float32Array(u),Mo[u]=_),0!==a){o.toArray(_,0);for(let o=1,u=0;o!==a;++o)u+=s,i[o].toArray(_,u)}return _}function arraysEqual(i,a){if(i.length!==a.length)return!1;for(let s=0,o=i.length;s<o;s++)if(i[s]!==a[s])return!1;return!0}function copyArray(i,a){for(let s=0,o=a.length;s<o;s++)i[s]=a[s]}function allocTexUnits(i,a){let s=ko[a];void 0===s&&(s=new Int32Array(a),ko[a]=s);for(let o=0;o!==a;++o)s[o]=i.allocateTextureUnit();return s}function setValueV1f(i,a){const s=this.cache;s[0]!==a&&(i.uniform1f(this.addr,a),s[0]=a)}function setValueV2f(i,a){const s=this.cache;if(void 0!==a.x)s[0]===a.x&&s[1]===a.y||(i.uniform2f(this.addr,a.x,a.y),s[0]=a.x,s[1]=a.y);else{if(arraysEqual(s,a))return;i.uniform2fv(this.addr,a),copyArray(s,a)}}function setValueV3f(i,a){const s=this.cache;if(void 0!==a.x)s[0]===a.x&&s[1]===a.y&&s[2]===a.z||(i.uniform3f(this.addr,a.x,a.y,a.z),s[0]=a.x,s[1]=a.y,s[2]=a.z);else if(void 0!==a.r)s[0]===a.r&&s[1]===a.g&&s[2]===a.b||(i.uniform3f(this.addr,a.r,a.g,a.b),s[0]=a.r,s[1]=a.g,s[2]=a.b);else{if(arraysEqual(s,a))return;i.uniform3fv(this.addr,a),copyArray(s,a)}}function setValueV4f(i,a){const s=this.cache;if(void 0!==a.x)s[0]===a.x&&s[1]===a.y&&s[2]===a.z&&s[3]===a.w||(i.uniform4f(this.addr,a.x,a.y,a.z,a.w),s[0]=a.x,s[1]=a.y,s[2]=a.z,s[3]=a.w);else{if(arraysEqual(s,a))return;i.uniform4fv(this.addr,a),copyArray(s,a)}}function setValueM2(i,a){const s=this.cache,o=a.elements;if(void 0===o){if(arraysEqual(s,a))return;i.uniformMatrix2fv(this.addr,!1,a),copyArray(s,a)}else{if(arraysEqual(s,o))return;Lo.set(o),i.uniformMatrix2fv(this.addr,!1,Lo),copyArray(s,o)}}function setValueM3(i,a){const s=this.cache,o=a.elements;if(void 0===o){if(arraysEqual(s,a))return;i.uniformMatrix3fv(this.addr,!1,a),copyArray(s,a)}else{if(arraysEqual(s,o))return;Io.set(o),i.uniformMatrix3fv(this.addr,!1,Io),copyArray(s,o)}}function setValueM4(i,a){const s=this.cache,o=a.elements;if(void 0===o){if(arraysEqual(s,a))return;i.uniformMatrix4fv(this.addr,!1,a),copyArray(s,a)}else{if(arraysEqual(s,o))return;Po.set(o),i.uniformMatrix4fv(this.addr,!1,Po),copyArray(s,o)}}function setValueT1(i,a,s){const o=this.cache,u=s.allocateTextureUnit();o[0]!==u&&(i.uniform1i(this.addr,u),o[0]=u),s.safeSetTexture2D(a||wo,u)}function setValueT2DArray1(i,a,s){const o=this.cache,u=s.allocateTextureUnit();o[0]!==u&&(i.uniform1i(this.addr,u),o[0]=u),s.setTexture2DArray(a||Ao,u)}function setValueT3D1(i,a,s){const o=this.cache,u=s.allocateTextureUnit();o[0]!==u&&(i.uniform1i(this.addr,u),o[0]=u),s.setTexture3D(a||Co,u)}function setValueT6(i,a,s){const o=this.cache,u=s.allocateTextureUnit();o[0]!==u&&(i.uniform1i(this.addr,u),o[0]=u),s.safeSetTextureCube(a||Eo,u)}function setValueV1i(i,a){const s=this.cache;s[0]!==a&&(i.uniform1i(this.addr,a),s[0]=a)}function setValueV2i(i,a){const s=this.cache;arraysEqual(s,a)||(i.uniform2iv(this.addr,a),copyArray(s,a))}function setValueV3i(i,a){const s=this.cache;arraysEqual(s,a)||(i.uniform3iv(this.addr,a),copyArray(s,a))}function setValueV4i(i,a){const s=this.cache;arraysEqual(s,a)||(i.uniform4iv(this.addr,a),copyArray(s,a))}function setValueV1ui(i,a){const s=this.cache;s[0]!==a&&(i.uniform1ui(this.addr,a),s[0]=a)}function getSingularSetter(i){switch(i){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(i,a){i.uniform1fv(this.addr,a)}function setValueV1iArray(i,a){i.uniform1iv(this.addr,a)}function setValueV2iArray(i,a){i.uniform2iv(this.addr,a)}function setValueV3iArray(i,a){i.uniform3iv(this.addr,a)}function setValueV4iArray(i,a){i.uniform4iv(this.addr,a)}function setValueV2fArray(i,a){const s=flatten2(a,this.size,2);i.uniform2fv(this.addr,s)}function setValueV3fArray(i,a){const s=flatten2(a,this.size,3);i.uniform3fv(this.addr,s)}function setValueV4fArray(i,a){const s=flatten2(a,this.size,4);i.uniform4fv(this.addr,s)}function setValueM2Array(i,a){const s=flatten2(a,this.size,4);i.uniformMatrix2fv(this.addr,!1,s)}function setValueM3Array(i,a){const s=flatten2(a,this.size,9);i.uniformMatrix3fv(this.addr,!1,s)}function setValueM4Array(i,a){const s=flatten2(a,this.size,16);i.uniformMatrix4fv(this.addr,!1,s)}function setValueT1Array(i,a,s){const o=a.length,u=allocTexUnits(s,o);i.uniform1iv(this.addr,u);for(let _=0;_!==o;++_)s.safeSetTexture2D(a[_]||wo,u[_])}function setValueT6Array(i,a,s){const o=a.length,u=allocTexUnits(s,o);i.uniform1iv(this.addr,u);for(let _=0;_!==o;++_)s.safeSetTextureCube(a[_]||Eo,u[_])}function getPureArraySetter(i){switch(i){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35680:case 36300:case 36308:case 36293:return setValueT6Array}}function SingleUniform(i,a,s){this.id=i,this.addr=s,this.cache=[],this.setValue=getSingularSetter(a.type)}function PureArrayUniform(i,a,s){this.id=i,this.addr=s,this.cache=[],this.size=a.size,this.setValue=getPureArraySetter(a.type)}function StructuredUniform(i){this.id=i,this.seq=[],this.map={}}__name(flatten2,"flatten"),__name(arraysEqual,"arraysEqual"),__name(copyArray,"copyArray"),__name(allocTexUnits,"allocTexUnits"),__name(setValueV1f,"setValueV1f"),__name(setValueV2f,"setValueV2f"),__name(setValueV3f,"setValueV3f"),__name(setValueV4f,"setValueV4f"),__name(setValueM2,"setValueM2"),__name(setValueM3,"setValueM3"),__name(setValueM4,"setValueM4"),__name(setValueT1,"setValueT1"),__name(setValueT2DArray1,"setValueT2DArray1"),__name(setValueT3D1,"setValueT3D1"),__name(setValueT6,"setValueT6"),__name(setValueV1i,"setValueV1i"),__name(setValueV2i,"setValueV2i"),__name(setValueV3i,"setValueV3i"),__name(setValueV4i,"setValueV4i"),__name(setValueV1ui,"setValueV1ui"),__name(getSingularSetter,"getSingularSetter"),__name(setValueV1fArray,"setValueV1fArray"),__name(setValueV1iArray,"setValueV1iArray"),__name(setValueV2iArray,"setValueV2iArray"),__name(setValueV3iArray,"setValueV3iArray"),__name(setValueV4iArray,"setValueV4iArray"),__name(setValueV2fArray,"setValueV2fArray"),__name(setValueV3fArray,"setValueV3fArray"),__name(setValueV4fArray,"setValueV4fArray"),__name(setValueM2Array,"setValueM2Array"),__name(setValueM3Array,"setValueM3Array"),__name(setValueM4Array,"setValueM4Array"),__name(setValueT1Array,"setValueT1Array"),__name(setValueT6Array,"setValueT6Array"),__name(getPureArraySetter,"getPureArraySetter"),__name(SingleUniform,"SingleUniform"),__name(PureArrayUniform,"PureArrayUniform"),PureArrayUniform.prototype.updateCache=function(i){const a=this.cache;i instanceof Float32Array&&a.length!==i.length&&(this.cache=new Float32Array(i.length)),copyArray(a,i)},__name(StructuredUniform,"StructuredUniform"),StructuredUniform.prototype.setValue=function(i,a,s){const o=this.seq;for(let u=0,_=o.length;u!==_;++u){const _=o[u];_.setValue(i,a[_.id],s)}};const Do=/(\w+)(\])?(\[|\.)?/g;function addUniform(i,a){i.seq.push(a),i.map[a.id]=a}function parseUniform(i,a,s){const o=i.name,u=o.length;for(Do.lastIndex=0;;){const _=Do.exec(o),x=Do.lastIndex;let w=_[1];const C="]"===_[2],L=_[3];if(C&&(w|=0),void 0===L||"["===L&&x+2===u){addUniform(s,void 0===L?new SingleUniform(w,i,a):new PureArrayUniform(w,i,a));break}{let i=s.map[w];void 0===i&&(i=new StructuredUniform(w),addUniform(s,i)),s=i}}}function WebGLUniforms(i,a){this.seq=[],this.map={};const s=i.getProgramParameter(a,35718);for(let o=0;o<s;++o){const s=i.getActiveUniform(a,o);parseUniform(s,i.getUniformLocation(a,s.name),this)}}function WebGLShader(i,a,s){const o=i.createShader(a);return i.shaderSource(o,s),i.compileShader(o),o}__name(addUniform,"addUniform"),__name(parseUniform,"parseUniform"),__name(WebGLUniforms,"WebGLUniforms"),WebGLUniforms.prototype.setValue=function(i,a,s,o){const u=this.map[a];void 0!==u&&u.setValue(i,s,o)},WebGLUniforms.prototype.setOptional=function(i,a,s){const o=a[s];void 0!==o&&this.setValue(i,s,o)},WebGLUniforms.upload=function(i,a,s,o){for(let u=0,_=a.length;u!==_;++u){const _=a[u],x=s[_.id];!1!==x.needsUpdate&&_.setValue(i,x.value,o)}},WebGLUniforms.seqWithValue=function(i,a){const s=[];for(let o=0,u=i.length;o!==u;++o){const u=i[o];u.id in a&&s.push(u)}return s},__name(WebGLShader,"WebGLShader");let Ro=0;function addLineNumbers(i){const a=i.split("\n");for(let s=0;s<a.length;s++)a[s]=s+1+": "+a[s];return a.join("\n")}function getEncodingComponents(i){switch(i){case tr:return["Linear","( value )"];case nr:return["sRGB","( value )"];case rr:return["RGBE","( value )"];case sr:return["RGBM","( value, 7.0 )"];case or:return["RGBM","( value, 16.0 )"];case lr:return["RGBD","( value, 256.0 )"];case ir:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case ar:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function getShaderErrors(i,a,s){const o=i.getShaderParameter(a,35713),u=i.getShaderInfoLog(a).trim();return o&&""===u?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+s+"\n"+u+addLineNumbers(i.getShaderSource(a))}function getTexelDecodingFunction(i,a){const s=getEncodingComponents(a);return"vec4 "+i+"( vec4 value ) { return "+s[0]+"ToLinear"+s[1]+"; }"}function getTexelEncodingFunction(i,a){const s=getEncodingComponents(a);return"vec4 "+i+"( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"}function getToneMappingFunction(i,a){let s;switch(a){case ft:s="Linear";break;case gt:s="Reinhard";break;case _t:s="OptimizedCineon";break;case yt:s="ACESFilmic";break;case vt:s="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),s="Linear"}return"vec3 "+i+"( vec3 color ) { return "+s+"ToneMapping( color ); }"}function generateExtensions(i){return[i.extensionDerivatives||i.envMapCubeUV||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(filterEmptyLine).join("\n")}function generateDefines(i){const a=[];for(const s in i){const o=i[s];!1!==o&&a.push("#define "+s+" "+o)}return a.join("\n")}function fetchAttributeLocations(i,a){const s={},o=i.getProgramParameter(a,35721);for(let u=0;u<o;u++){const o=i.getActiveAttrib(a,u).name;s[o]=i.getAttribLocation(a,o)}return s}function filterEmptyLine(i){return""!==i}function replaceLightNums(i,a){return i.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function replaceClippingPlaneNums(i,a){return i.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}__name(addLineNumbers,"addLineNumbers"),__name(getEncodingComponents,"getEncodingComponents"),__name(getShaderErrors,"getShaderErrors"),__name(getTexelDecodingFunction,"getTexelDecodingFunction"),__name(getTexelEncodingFunction,"getTexelEncodingFunction"),__name(getToneMappingFunction,"getToneMappingFunction"),__name(generateExtensions,"generateExtensions"),__name(generateDefines,"generateDefines"),__name(fetchAttributeLocations,"fetchAttributeLocations"),__name(filterEmptyLine,"filterEmptyLine"),__name(replaceLightNums,"replaceLightNums"),__name(replaceClippingPlaneNums,"replaceClippingPlaneNums");const Oo=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(i){return i.replace(Oo,includeReplacer)}function includeReplacer(i,a){const s=To[a];if(void 0===s)throw new Error("Can not resolve #include <"+a+">");return resolveIncludes(s)}__name(resolveIncludes,"resolveIncludes"),__name(includeReplacer,"includeReplacer");const No=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Bo=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(i){return i.replace(Bo,loopReplacer).replace(No,deprecatedLoopReplacer)}function deprecatedLoopReplacer(i,a,s,o){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),loopReplacer(i,a,s,o)}function loopReplacer(i,a,s,o){let u="";for(let _=parseInt(a);_<parseInt(s);_++)u+=o.replace(/\[\s*i\s*\]/g,"[ "+_+" ]").replace(/UNROLLED_LOOP_INDEX/g,_);return u}function generatePrecision(i){let a="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?a+="\n#define HIGH_PRECISION":"mediump"===i.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(a+="\n#define LOW_PRECISION"),a}function generateShadowMapTypeDefine(i){let a="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Z?a="SHADOWMAP_TYPE_PCF":i.shadowMapType===ee?a="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===ie&&(a="SHADOWMAP_TYPE_VSM"),a}function generateEnvMapTypeDefine(i){let a="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Tt:case St:a="ENVMAP_TYPE_CUBE";break;case At:case Ct:a="ENVMAP_TYPE_CUBE_UV"}return a}function generateEnvMapModeDefine(i){let a="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case St:case Ct:a="ENVMAP_MODE_REFRACTION"}return a}function generateEnvMapBlendingDefine(i){let a="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case dt:a="ENVMAP_BLENDING_MULTIPLY";break;case ht:a="ENVMAP_BLENDING_MIX";break;case pt:a="ENVMAP_BLENDING_ADD"}return a}function WebGLProgram(i,a,s,o){const u=i.getContext(),_=s.defines;let x=s.vertexShader,w=s.fragmentShader;const C=generateShadowMapTypeDefine(s),L=generateEnvMapTypeDefine(s),B=generateEnvMapModeDefine(s),U=generateEnvMapBlendingDefine(s),j=i.gammaFactor>0?i.gammaFactor:1,V=s.isWebGL2?"":generateExtensions(s),z=generateDefines(_),$=u.createProgram();let Y,Z,ee=s.glslVersion?"#version "+s.glslVersion+"\n":"";s.isRawShaderMaterial?(Y=[z].filter(filterEmptyLine).join("\n"),Y.length>0&&(Y+="\n"),Z=[V,z].filter(filterEmptyLine).join("\n"),Z.length>0&&(Z+="\n")):(Y=[generatePrecision(s),"#define SHADER_NAME "+s.shaderName,z,s.instancing?"#define USE_INSTANCING":"",s.instancingColor?"#define USE_INSTANCING_COLOR":"",s.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+j,"#define MAX_BONES "+s.maxBones,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+B:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.displacementMap&&s.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors?"#define USE_COLOR":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.flatShading?"#define FLAT_SHADED":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals&&!1===s.flatShading?"#define USE_MORPHNORMALS":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+C:"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),Z=[V,generatePrecision(s),"#define SHADER_NAME "+s.shaderName,z,s.alphaTest?"#define ALPHATEST "+s.alphaTest+(s.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+j,s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp2?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.matcap?"#define USE_MATCAP":"",s.envMap?"#define USE_ENVMAP":"",s.envMap?"#define "+L:"",s.envMap?"#define "+B:"",s.envMap?"#define "+U:"",s.lightMap?"#define USE_LIGHTMAP":"",s.aoMap?"#define USE_AOMAP":"",s.emissiveMap?"#define USE_EMISSIVEMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.normalMap&&s.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",s.normalMap&&s.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",s.clearcoatMap?"#define USE_CLEARCOATMAP":"",s.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",s.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.roughnessMap?"#define USE_ROUGHNESSMAP":"",s.metalnessMap?"#define USE_METALNESSMAP":"",s.alphaMap?"#define USE_ALPHAMAP":"",s.sheen?"#define USE_SHEEN":"",s.transmissionMap?"#define USE_TRANSMISSIONMAP":"",s.vertexTangents?"#define USE_TANGENT":"",s.vertexColors||s.instancingColor?"#define USE_COLOR":"",s.vertexUvs?"#define USE_UV":"",s.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",s.gradientMap?"#define USE_GRADIENTMAP":"",s.flatShading?"#define FLAT_SHADED":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+C:"",s.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",s.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",s.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",s.logarithmicDepthBuffer&&s.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(s.extensionShaderTextureLOD||s.envMap)&&s.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",s.toneMapping!==mt?"#define TONE_MAPPING":"",s.toneMapping!==mt?To.tonemapping_pars_fragment:"",s.toneMapping!==mt?getToneMappingFunction("toneMapping",s.toneMapping):"",s.dithering?"#define DITHERING":"",To.encodings_pars_fragment,s.map?getTexelDecodingFunction("mapTexelToLinear",s.mapEncoding):"",s.matcap?getTexelDecodingFunction("matcapTexelToLinear",s.matcapEncoding):"",s.envMap?getTexelDecodingFunction("envMapTexelToLinear",s.envMapEncoding):"",s.emissiveMap?getTexelDecodingFunction("emissiveMapTexelToLinear",s.emissiveMapEncoding):"",s.lightMap?getTexelDecodingFunction("lightMapTexelToLinear",s.lightMapEncoding):"",getTexelEncodingFunction("linearToOutputTexel",s.outputEncoding),s.depthPacking?"#define DEPTH_PACKING "+s.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),x=resolveIncludes(x),x=replaceLightNums(x,s),x=replaceClippingPlaneNums(x,s),w=resolveIncludes(w),w=replaceLightNums(w,s),w=replaceClippingPlaneNums(w,s),x=unrollLoops(x),w=unrollLoops(w),s.isWebGL2&&!0!==s.isRawShaderMaterial&&(ee="#version 300 es\n",Y=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Y,Z=["#define varying in",s.glslVersion===_r?"":"out highp vec4 pc_fragColor;",s.glslVersion===_r?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Z);const ie=ee+Z+w,ae=WebGLShader(u,35633,ee+Y+x),le=WebGLShader(u,35632,ie);if(u.attachShader($,ae),u.attachShader($,le),void 0!==s.index0AttributeName?u.bindAttribLocation($,0,s.index0AttributeName):!0===s.morphTargets&&u.bindAttribLocation($,0,"position"),u.linkProgram($),i.debug.checkShaderErrors){const i=u.getProgramInfoLog($).trim(),a=u.getShaderInfoLog(ae).trim(),s=u.getShaderInfoLog(le).trim();let o=!0,_=!0;if(!1===u.getProgramParameter($,35714)){o=!1;const a=getShaderErrors(u,ae,"vertex"),s=getShaderErrors(u,le,"fragment");console.error("THREE.WebGLProgram: shader error: ",u.getError(),"35715",u.getProgramParameter($,35715),"gl.getProgramInfoLog",i,a,s)}else""!==i?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",i):""!==a&&""!==s||(_=!1);_&&(this.diagnostics={runnable:o,programLog:i,vertexShader:{log:a,prefix:Y},fragmentShader:{log:s,prefix:Z}})}let ce,de;return u.deleteShader(ae),u.deleteShader(le),this.getUniforms=function(){return void 0===ce&&(ce=new WebGLUniforms(u,$)),ce},this.getAttributes=function(){return void 0===de&&(de=fetchAttributeLocations(u,$)),de},this.destroy=function(){o.releaseStatesOfProgram(this),u.deleteProgram($),this.program=void 0},this.name=s.shaderName,this.id=Ro++,this.cacheKey=a,this.usedTimes=1,this.program=$,this.vertexShader=ae,this.fragmentShader=le,this}function WebGLPrograms(i,a,s,o,u,_){const x=[],w=o.isWebGL2,C=o.logarithmicDepthBuffer,L=o.floatVertexTextures,B=o.maxVertexUniforms,U=o.vertexTextures;let j=o.precision;const V={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},z=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function getMaxBones(i){const a=i.skeleton.bones;if(L)return 1024;{const i=B,s=Math.floor((i-20)/4),o=Math.min(s,a.length);return o<a.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+a.length+" bones. This GPU supports "+o+"."),0):o}}function getTextureEncodingFromMap(i){let a;return i&&i.isTexture?a=i.encoding:i&&i.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),a=i.texture.encoding):a=tr,a}function getParameters(u,x,B,z,$){const Y=z.fog,Z=u.isMeshStandardMaterial?z.environment:null,ee=a.get(u.envMap||Z),ie=V[u.type],ae=$.isSkinnedMesh?getMaxBones($):0;let de,pe;if(null!==u.precision&&(j=o.getMaxPrecision(u.precision),j!==u.precision&&console.warn("THREE.WebGLProgram.getParameters:",u.precision,"not supported, using",j,"instead.")),ie){const i=xo[ie];de=i.vertexShader,pe=i.fragmentShader}else de=u.vertexShader,pe=u.fragmentShader;const fe=i.getRenderTarget();return{isWebGL2:w,shaderID:ie,shaderName:u.type,vertexShader:de,fragmentShader:pe,defines:u.defines,isRawShaderMaterial:!0===u.isRawShaderMaterial,glslVersion:u.glslVersion,precision:j,instancing:!0===$.isInstancedMesh,instancingColor:!0===$.isInstancedMesh&&null!==$.instanceColor,supportsVertexTextures:U,outputEncoding:null!==fe?getTextureEncodingFromMap(fe.texture):i.outputEncoding,map:!!u.map,mapEncoding:getTextureEncodingFromMap(u.map),matcap:!!u.matcap,matcapEncoding:getTextureEncodingFromMap(u.matcap),envMap:!!ee,envMapMode:ee&&ee.mapping,envMapEncoding:getTextureEncodingFromMap(ee),envMapCubeUV:!!ee&&(ee.mapping===At||ee.mapping===Ct),lightMap:!!u.lightMap,lightMapEncoding:getTextureEncodingFromMap(u.lightMap),aoMap:!!u.aoMap,emissiveMap:!!u.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(u.emissiveMap),bumpMap:!!u.bumpMap,normalMap:!!u.normalMap,objectSpaceNormalMap:u.normalMapType===hr,tangentSpaceNormalMap:u.normalMapType===dr,clearcoatMap:!!u.clearcoatMap,clearcoatRoughnessMap:!!u.clearcoatRoughnessMap,clearcoatNormalMap:!!u.clearcoatNormalMap,displacementMap:!!u.displacementMap,roughnessMap:!!u.roughnessMap,metalnessMap:!!u.metalnessMap,specularMap:!!u.specularMap,alphaMap:!!u.alphaMap,gradientMap:!!u.gradientMap,sheen:!!u.sheen,transmissionMap:!!u.transmissionMap,combine:u.combine,vertexTangents:u.normalMap&&u.vertexTangents,vertexColors:u.vertexColors,vertexUvs:!!(u.map||u.bumpMap||u.normalMap||u.specularMap||u.alphaMap||u.emissiveMap||u.roughnessMap||u.metalnessMap||u.clearcoatMap||u.clearcoatRoughnessMap||u.clearcoatNormalMap||u.displacementMap||u.transmissionMap),uvsVertexOnly:!(u.map||u.bumpMap||u.normalMap||u.specularMap||u.alphaMap||u.emissiveMap||u.roughnessMap||u.metalnessMap||u.clearcoatNormalMap||u.transmissionMap||!u.displacementMap),fog:!!Y,useFog:u.fog,fogExp2:Y&&Y.isFogExp2,flatShading:u.flatShading,sizeAttenuation:u.sizeAttenuation,logarithmicDepthBuffer:C,skinning:u.skinning&&ae>0,maxBones:ae,useVertexTexture:L,morphTargets:u.morphTargets,morphNormals:u.morphNormals,maxMorphTargets:i.maxMorphTargets,maxMorphNormals:i.maxMorphNormals,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numClippingPlanes:_.numPlanes,numClipIntersection:_.numIntersection,dithering:u.dithering,shadowMapEnabled:i.shadowMap.enabled&&B.length>0,shadowMapType:i.shadowMap.type,toneMapping:u.toneMapped?i.toneMapping:mt,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:u.premultipliedAlpha,alphaTest:u.alphaTest,doubleSided:u.side===ce,flipSided:u.side===le,depthPacking:void 0!==u.depthPacking&&u.depthPacking,index0AttributeName:u.index0AttributeName,extensionDerivatives:u.extensions&&u.extensions.derivatives,extensionFragDepth:u.extensions&&u.extensions.fragDepth,extensionDrawBuffers:u.extensions&&u.extensions.drawBuffers,extensionShaderTextureLOD:u.extensions&&u.extensions.shaderTextureLOD,rendererExtensionFragDepth:w||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:w||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:w||s.has("EXT_shader_texture_lod"),customProgramCacheKey:u.customProgramCacheKey()}}function getProgramCacheKey(a){const s=[];if(a.shaderID?s.push(a.shaderID):(s.push(a.fragmentShader),s.push(a.vertexShader)),void 0!==a.defines)for(const i in a.defines)s.push(i),s.push(a.defines[i]);if(!1===a.isRawShaderMaterial){for(let i=0;i<z.length;i++)s.push(a[z[i]]);s.push(i.outputEncoding),s.push(i.gammaFactor)}return s.push(a.customProgramCacheKey),s.join()}function getUniforms(i){const a=V[i.type];let s;if(a){const i=xo[a];s=oo.clone(i.uniforms)}else s=i.uniforms;return s}function acquireProgram(a,s){let o;for(let i=0,u=x.length;i<u;i++){const a=x[i];if(a.cacheKey===s){o=a,++o.usedTimes;break}}return void 0===o&&(o=new WebGLProgram(i,s,a,u),x.push(o)),o}function releaseProgram(i){if(0===--i.usedTimes){const a=x.indexOf(i);x[a]=x[x.length-1],x.pop(),i.destroy()}}return __name(getMaxBones,"getMaxBones"),__name(getTextureEncodingFromMap,"getTextureEncodingFromMap"),__name(getParameters,"getParameters"),__name(getProgramCacheKey,"getProgramCacheKey"),__name(getUniforms,"getUniforms"),__name(acquireProgram,"acquireProgram"),__name(releaseProgram,"releaseProgram"),{getParameters:getParameters,getProgramCacheKey:getProgramCacheKey,getUniforms:getUniforms,acquireProgram:acquireProgram,releaseProgram:releaseProgram,programs:x}}function WebGLProperties(){let i=/* @__PURE__ */new WeakMap;function get2(a){let s=i.get(a);return void 0===s&&(s={},i.set(a,s)),s}function remove(a){i.delete(a)}function update(a,s,o){i.get(a)[s]=o}function dispose(){i=/* @__PURE__ */new WeakMap}return __name(get2,"get"),__name(remove,"remove"),__name(update,"update"),__name(dispose,"dispose"),{get:get2,remove:remove,update:update,dispose:dispose}}function painterSortStable(i,a){return i.groupOrder!==a.groupOrder?i.groupOrder-a.groupOrder:i.renderOrder!==a.renderOrder?i.renderOrder-a.renderOrder:i.program!==a.program?i.program.id-a.program.id:i.material.id!==a.material.id?i.material.id-a.material.id:i.z!==a.z?i.z-a.z:i.id-a.id}function reversePainterSortStable(i,a){return i.groupOrder!==a.groupOrder?i.groupOrder-a.groupOrder:i.renderOrder!==a.renderOrder?i.renderOrder-a.renderOrder:i.z!==a.z?a.z-i.z:i.id-a.id}function WebGLRenderList(i){const a=[];let s=0;const o=[],u=[],_={id:-1};function init(){s=0,o.length=0,u.length=0}function getNextRenderItem(o,u,x,w,C,L){let B=a[s];const U=i.get(x);return void 0===B?(B={id:o.id,object:o,geometry:u,material:x,program:U.program||_,groupOrder:w,renderOrder:o.renderOrder,z:C,group:L},a[s]=B):(B.id=o.id,B.object=o,B.geometry=u,B.material=x,B.program=U.program||_,B.groupOrder=w,B.renderOrder=o.renderOrder,B.z=C,B.group=L),s++,B}function push(i,a,s,_,x,w){const C=getNextRenderItem(i,a,s,_,x,w);(!0===s.transparent?u:o).push(C)}function unshift(i,a,s,_,x,w){const C=getNextRenderItem(i,a,s,_,x,w);(!0===s.transparent?u:o).unshift(C)}function sort(i,a){o.length>1&&o.sort(i||painterSortStable),u.length>1&&u.sort(a||reversePainterSortStable)}function finish(){for(let i=s,o=a.length;i<o;i++){const s=a[i];if(null===s.id)break;s.id=null,s.object=null,s.geometry=null,s.material=null,s.program=null,s.group=null}}return __name(init,"init"),__name(getNextRenderItem,"getNextRenderItem"),__name(push,"push"),__name(unshift,"unshift"),__name(sort,"sort"),__name(finish,"finish"),{opaque:o,transparent:u,init:init,push:push,unshift:unshift,finish:finish,sort:sort}}function WebGLRenderLists(i){let a=/* @__PURE__ */new WeakMap;function get2(s,o){const u=a.get(s);let _;return void 0===u?(_=new WebGLRenderList(i),a.set(s,/* @__PURE__ */new WeakMap),a.get(s).set(o,_)):(_=u.get(o),void 0===_&&(_=new WebGLRenderList(i),u.set(o,_))),_}function dispose(){a=/* @__PURE__ */new WeakMap}return __name(get2,"get"),__name(dispose,"dispose"),{get:get2,dispose:dispose}}function UniformsCache(){const i={};return{get:/* @__PURE__ */__name(function(a){if(void 0!==i[a.id])return i[a.id];let s;switch(a.type){case"DirectionalLight":s={direction:new Or,color:new Ms};break;case"SpotLight":s={position:new Or,direction:new Or,color:new Ms,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":s={position:new Or,color:new Ms,distance:0,decay:0};break;case"HemisphereLight":s={direction:new Or,skyColor:new Ms,groundColor:new Ms};break;case"RectAreaLight":s={color:new Ms,position:new Or,halfWidth:new Or,halfHeight:new Or}}return i[a.id]=s,s},"get")}}function ShadowUniformsCache(){const i={};return{get:/* @__PURE__ */__name(function(a){if(void 0!==i[a.id])return i[a.id];let s;switch(a.type){case"DirectionalLight":case"SpotLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Sr};break;case"PointLight":s={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Sr,shadowCameraNear:1,shadowCameraFar:1e3}}return i[a.id]=s,s},"get")}}__name(unrollLoops,"unrollLoops"),__name(deprecatedLoopReplacer,"deprecatedLoopReplacer"),__name(loopReplacer,"loopReplacer"),__name(generatePrecision,"generatePrecision"),__name(generateShadowMapTypeDefine,"generateShadowMapTypeDefine"),__name(generateEnvMapTypeDefine,"generateEnvMapTypeDefine"),__name(generateEnvMapModeDefine,"generateEnvMapModeDefine"),__name(generateEnvMapBlendingDefine,"generateEnvMapBlendingDefine"),__name(WebGLProgram,"WebGLProgram"),__name(WebGLPrograms,"WebGLPrograms"),__name(WebGLProperties,"WebGLProperties"),__name(painterSortStable,"painterSortStable"),__name(reversePainterSortStable,"reversePainterSortStable"),__name(WebGLRenderList,"WebGLRenderList"),__name(WebGLRenderLists,"WebGLRenderLists"),__name(UniformsCache,"UniformsCache"),__name(ShadowUniformsCache,"ShadowUniformsCache");let Fo=0;function shadowCastingLightsFirst(i,a){return(a.castShadow?1:0)-(i.castShadow?1:0)}function WebGLLights(i,a){const s=new UniformsCache,o=ShadowUniformsCache(),u={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let C=0;C<9;C++)u.probe.push(new Or);const _=new Or,x=new ya,w=new ya;function setup2(_){let x=0,w=0,C=0;for(let i=0;i<9;i++)u.probe[i].set(0,0,0);let L=0,B=0,U=0,j=0,V=0,z=0,$=0,Y=0;_.sort(shadowCastingLightsFirst);for(let i=0,a=_.length;i<a;i++){const a=_[i],Z=a.color,ee=a.intensity,ie=a.distance,ae=a.shadow&&a.shadow.map?a.shadow.map.texture:null;if(a.isAmbientLight)x+=Z.r*ee,w+=Z.g*ee,C+=Z.b*ee;else if(a.isLightProbe)for(let i=0;i<9;i++)u.probe[i].addScaledVector(a.sh.coefficients[i],ee);else if(a.isDirectionalLight){const i=s.get(a);if(i.color.copy(a.color).multiplyScalar(a.intensity),a.castShadow){const i=a.shadow,s=o.get(a);s.shadowBias=i.bias,s.shadowNormalBias=i.normalBias,s.shadowRadius=i.radius,s.shadowMapSize=i.mapSize,u.directionalShadow[L]=s,u.directionalShadowMap[L]=ae,u.directionalShadowMatrix[L]=a.shadow.matrix,z++}u.directional[L]=i,L++}else if(a.isSpotLight){const i=s.get(a);if(i.position.setFromMatrixPosition(a.matrixWorld),i.color.copy(Z).multiplyScalar(ee),i.distance=ie,i.coneCos=Math.cos(a.angle),i.penumbraCos=Math.cos(a.angle*(1-a.penumbra)),i.decay=a.decay,a.castShadow){const i=a.shadow,s=o.get(a);s.shadowBias=i.bias,s.shadowNormalBias=i.normalBias,s.shadowRadius=i.radius,s.shadowMapSize=i.mapSize,u.spotShadow[U]=s,u.spotShadowMap[U]=ae,u.spotShadowMatrix[U]=a.shadow.matrix,Y++}u.spot[U]=i,U++}else if(a.isRectAreaLight){const i=s.get(a);i.color.copy(Z).multiplyScalar(ee),i.halfWidth.set(.5*a.width,0,0),i.halfHeight.set(0,.5*a.height,0),u.rectArea[j]=i,j++}else if(a.isPointLight){const i=s.get(a);if(i.color.copy(a.color).multiplyScalar(a.intensity),i.distance=a.distance,i.decay=a.decay,a.castShadow){const i=a.shadow,s=o.get(a);s.shadowBias=i.bias,s.shadowNormalBias=i.normalBias,s.shadowRadius=i.radius,s.shadowMapSize=i.mapSize,s.shadowCameraNear=i.camera.near,s.shadowCameraFar=i.camera.far,u.pointShadow[B]=s,u.pointShadowMap[B]=ae,u.pointShadowMatrix[B]=a.shadow.matrix,$++}u.point[B]=i,B++}else if(a.isHemisphereLight){const i=s.get(a);i.skyColor.copy(a.color).multiplyScalar(ee),i.groundColor.copy(a.groundColor).multiplyScalar(ee),u.hemi[V]=i,V++}}j>0&&(a.isWebGL2||!0===i.has("OES_texture_float_linear")?(u.rectAreaLTC1=So.LTC_FLOAT_1,u.rectAreaLTC2=So.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(u.rectAreaLTC1=So.LTC_HALF_1,u.rectAreaLTC2=So.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),u.ambient[0]=x,u.ambient[1]=w,u.ambient[2]=C;const Z=u.hash;Z.directionalLength===L&&Z.pointLength===B&&Z.spotLength===U&&Z.rectAreaLength===j&&Z.hemiLength===V&&Z.numDirectionalShadows===z&&Z.numPointShadows===$&&Z.numSpotShadows===Y||(u.directional.length=L,u.spot.length=U,u.rectArea.length=j,u.point.length=B,u.hemi.length=V,u.directionalShadow.length=z,u.directionalShadowMap.length=z,u.pointShadow.length=$,u.pointShadowMap.length=$,u.spotShadow.length=Y,u.spotShadowMap.length=Y,u.directionalShadowMatrix.length=z,u.pointShadowMatrix.length=$,u.spotShadowMatrix.length=Y,Z.directionalLength=L,Z.pointLength=B,Z.spotLength=U,Z.rectAreaLength=j,Z.hemiLength=V,Z.numDirectionalShadows=z,Z.numPointShadows=$,Z.numSpotShadows=Y,u.version=Fo++)}function setupView(i,a){let s=0,o=0,C=0,L=0,B=0;const U=a.matrixWorldInverse;for(let j=0,V=i.length;j<V;j++){const a=i[j];if(a.isDirectionalLight){const i=u.directional[s];i.direction.setFromMatrixPosition(a.matrixWorld),_.setFromMatrixPosition(a.target.matrixWorld),i.direction.sub(_),i.direction.transformDirection(U),s++}else if(a.isSpotLight){const i=u.spot[C];i.position.setFromMatrixPosition(a.matrixWorld),i.position.applyMatrix4(U),i.direction.setFromMatrixPosition(a.matrixWorld),_.setFromMatrixPosition(a.target.matrixWorld),i.direction.sub(_),i.direction.transformDirection(U),C++}else if(a.isRectAreaLight){const i=u.rectArea[L];i.position.setFromMatrixPosition(a.matrixWorld),i.position.applyMatrix4(U),w.identity(),x.copy(a.matrixWorld),x.premultiply(U),w.extractRotation(x),i.halfWidth.set(.5*a.width,0,0),i.halfHeight.set(0,.5*a.height,0),i.halfWidth.applyMatrix4(w),i.halfHeight.applyMatrix4(w),L++}else if(a.isPointLight){const i=u.point[o];i.position.setFromMatrixPosition(a.matrixWorld),i.position.applyMatrix4(U),o++}else if(a.isHemisphereLight){const i=u.hemi[B];i.direction.setFromMatrixPosition(a.matrixWorld),i.direction.transformDirection(U),i.direction.normalize(),B++}}}return __name(setup2,"setup"),__name(setupView,"setupView"),{setup:setup2,setupView:setupView,state:u}}function WebGLRenderState(i,a){const s=new WebGLLights(i,a),o=[],u=[];function init(){o.length=0,u.length=0}function pushLight(i){o.push(i)}function pushShadow(i){u.push(i)}function setupLights(){s.setup(o)}function setupLightsView(i){s.setupView(o,i)}return __name(init,"init"),__name(pushLight,"pushLight"),__name(pushShadow,"pushShadow"),__name(setupLights,"setupLights"),__name(setupLightsView,"setupLightsView"),{init:init,state:{lightsArray:o,shadowsArray:u,lights:s},setupLights:setupLights,setupLightsView:setupLightsView,pushLight:pushLight,pushShadow:pushShadow}}function WebGLRenderStates(i,a){let s=/* @__PURE__ */new WeakMap;function get2(o,u=0){let _;return!1===s.has(o)?(_=new WebGLRenderState(i,a),s.set(o,[]),s.get(o).push(_)):u>=s.get(o).length?(_=new WebGLRenderState(i,a),s.get(o).push(_)):_=s.get(o)[u],_}function dispose(){s=/* @__PURE__ */new WeakMap}return __name(get2,"get"),__name(dispose,"dispose"),{get:get2,dispose:dispose}}function MeshDepthMaterial(i){Material.call(this),this.type="MeshDepthMaterial",this.depthPacking=cr,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(i)}function MeshDistanceMaterial(i){Material.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Or,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(i)}__name(shadowCastingLightsFirst,"shadowCastingLightsFirst"),__name(WebGLLights,"WebGLLights"),__name(WebGLRenderState,"WebGLRenderState"),__name(WebGLRenderStates,"WebGLRenderStates"),__name(MeshDepthMaterial,"MeshDepthMaterial"),MeshDepthMaterial.prototype=Object.create(Material.prototype),MeshDepthMaterial.prototype.constructor=MeshDepthMaterial,MeshDepthMaterial.prototype.isMeshDepthMaterial=!0,MeshDepthMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.depthPacking=i.depthPacking,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.map=i.map,this.alphaMap=i.alphaMap,this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this},__name(MeshDistanceMaterial,"MeshDistanceMaterial"),MeshDistanceMaterial.prototype=Object.create(Material.prototype),MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial,MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0,MeshDistanceMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.referencePosition.copy(i.referencePosition),this.nearDistance=i.nearDistance,this.farDistance=i.farDistance,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.map=i.map,this.alphaMap=i.alphaMap,this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this};var Uo="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",jo="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function WebGLShadowMap(i,a,s){let o=new yo;const u=new Sr,_=new Sr,x=new kr,w=[],C=[],L={},B={0:le,1:ae,2:ce},U=new ShaderMaterial({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Sr},radius:{value:4}},vertexShader:jo,fragmentShader:Uo}),j=U.clone();j.defines.HORIZONTAL_PASS=1;const V=new BufferGeometry;V.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const z=new Mesh(V,U),$=this;function VSMPass(s,o){const u=a.update(z);U.uniforms.shadow_pass.value=s.map.texture,U.uniforms.resolution.value=s.mapSize,U.uniforms.radius.value=s.radius,i.setRenderTarget(s.mapPass),i.clear(),i.renderBufferDirect(o,null,u,U,z,null),j.uniforms.shadow_pass.value=s.mapPass.texture,j.uniforms.resolution.value=s.mapSize,j.uniforms.radius.value=s.radius,i.setRenderTarget(s.map),i.clear(),i.renderBufferDirect(o,null,u,j,z,null)}function getDepthMaterialVariant(i,a,s){const o=i|a<<1|s<<2;let u=w[o];return void 0===u&&(u=new MeshDepthMaterial({depthPacking:ur,morphTargets:i,skinning:a}),w[o]=u),u}function getDistanceMaterialVariant(i,a,s){const o=i|a<<1|s<<2;let u=C[o];return void 0===u&&(u=new MeshDistanceMaterial({morphTargets:i,skinning:a}),C[o]=u),u}function getDepthMaterial(a,s,o,u,_,x,w){let C=null,U=getDepthMaterialVariant,j=a.customDepthMaterial;if(!0===u.isPointLight&&(U=getDistanceMaterialVariant,j=a.customDistanceMaterial),void 0===j){let i=!1;!0===o.morphTargets&&(i=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0);let u=!1;!0===a.isSkinnedMesh&&(!0===o.skinning?u=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",a)),C=U(i,u,!0===a.isInstancedMesh)}else C=j;if(i.localClippingEnabled&&!0===o.clipShadows&&0!==o.clippingPlanes.length){const i=C.uuid,a=o.uuid;let s=L[i];void 0===s&&(s={},L[i]=s);let u=s[a];void 0===u&&(u=C.clone(),s[a]=u),C=u}return C.visible=o.visible,C.wireframe=o.wireframe,C.side=w===ie?null!==o.shadowSide?o.shadowSide:o.side:null!==o.shadowSide?o.shadowSide:B[o.side],C.clipShadows=o.clipShadows,C.clippingPlanes=o.clippingPlanes,C.clipIntersection=o.clipIntersection,C.wireframeLinewidth=o.wireframeLinewidth,C.linewidth=o.linewidth,!0===u.isPointLight&&!0===C.isMeshDistanceMaterial&&(C.referencePosition.setFromMatrixPosition(u.matrixWorld),C.nearDistance=_,C.farDistance=x),C}function renderObject(s,u,_,x,w){if(!1===s.visible)return;if(s.layers.test(u.layers)&&(s.isMesh||s.isLine||s.isPoints)&&(s.castShadow||s.receiveShadow&&w===ie)&&(!s.frustumCulled||o.intersectsObject(s))){s.modelViewMatrix.multiplyMatrices(_.matrixWorldInverse,s.matrixWorld);const o=a.update(s),u=s.material;if(Array.isArray(u)){const a=o.groups;for(let C=0,L=a.length;C<L;C++){const L=a[C],B=u[L.materialIndex];if(B&&B.visible){const a=getDepthMaterial(s,o,B,x,_.near,_.far,w);i.renderBufferDirect(_,null,o,a,s,L)}}}else if(u.visible){const a=getDepthMaterial(s,o,u,x,_.near,_.far,w);i.renderBufferDirect(_,null,o,a,s,null)}}const C=s.children;for(let i=0,a=C.length;i<a;i++)renderObject(C[i],u,_,x,w)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Z,this.render=function(a,w,C){if(!1===$.enabled)return;if(!1===$.autoUpdate&&!1===$.needsUpdate)return;if(0===a.length)return;const L=i.getRenderTarget(),B=i.getActiveCubeFace(),U=i.getActiveMipmapLevel(),j=i.state;j.setBlending(pe),j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);for(let V=0,z=a.length;V<z;V++){const L=a[V],B=L.shadow;if(void 0===B){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(!1===B.autoUpdate&&!1===B.needsUpdate)continue;u.copy(B.mapSize);const U=B.getFrameExtents();if(u.multiply(U),_.copy(B.mapSize),(u.x>s||u.y>s)&&(u.x>s&&(_.x=Math.floor(s/U.x),u.x=_.x*U.x,B.mapSize.x=_.x),u.y>s&&(_.y=Math.floor(s/U.y),u.y=_.y*U.y,B.mapSize.y=_.y)),null===B.map&&!B.isPointLightShadow&&this.type===ie){const i={minFilter:Dt,magFilter:Dt,format:Yt};B.map=new Ir(u.x,u.y,i),B.map.texture.name=L.name+".shadowMap",B.mapPass=new Ir(u.x,u.y,i),B.camera.updateProjectionMatrix()}if(null===B.map){const i={minFilter:Pt,magFilter:Pt,format:Yt};B.map=new Ir(u.x,u.y,i),B.map.texture.name=L.name+".shadowMap",B.camera.updateProjectionMatrix()}i.setRenderTarget(B.map),i.clear();const z=B.getViewportCount();for(let i=0;i<z;i++){const a=B.getViewport(i);x.set(_.x*a.x,_.y*a.y,_.x*a.z,_.y*a.w),j.viewport(x),B.updateMatrices(L,i),o=B.getFrustum(),renderObject(w,C,B.camera,L,this.type)}B.isPointLightShadow||this.type!==ie||VSMPass(B,C),B.needsUpdate=!1}$.needsUpdate=!1,i.setRenderTarget(L,B,U)},__name(VSMPass,"VSMPass"),__name(getDepthMaterialVariant,"getDepthMaterialVariant"),__name(getDistanceMaterialVariant,"getDistanceMaterialVariant"),__name(getDepthMaterial,"getDepthMaterial"),__name(renderObject,"renderObject")}function WebGLState(i,a,s){const o=s.isWebGL2;function ColorBuffer(){let a=!1;const s=new kr;let o=null;const u=new kr(0,0,0,0);return{setMask:/* @__PURE__ */__name(function(s){o===s||a||(i.colorMask(s,s,s,s),o=s)},"setMask"),setLocked:/* @__PURE__ */__name(function(i){a=i},"setLocked"),setClear:/* @__PURE__ */__name(function(a,o,_,x,w){!0===w&&(a*=x,o*=x,_*=x),s.set(a,o,_,x),!1===u.equals(s)&&(i.clearColor(a,o,_,x),u.copy(s))},"setClear"),reset:/* @__PURE__ */__name(function(){a=!1,o=null,u.set(-1,0,0,0)},"reset")}}function DepthBuffer(){let a=!1,s=null,o=null,u=null;return{setTest:/* @__PURE__ */__name(function(i){i?enable(2929):disable(2929)},"setTest"),setMask:/* @__PURE__ */__name(function(o){s===o||a||(i.depthMask(o),s=o)},"setMask"),setFunc:/* @__PURE__ */__name(function(a){if(o!==a){if(a)switch(a){case it:i.depthFunc(512);break;case rt:i.depthFunc(519);break;case at:i.depthFunc(513);break;case st:i.depthFunc(515);break;case ot:i.depthFunc(514);break;case lt:i.depthFunc(518);break;case ct:i.depthFunc(516);break;case ut:i.depthFunc(517);break;default:i.depthFunc(515)}else i.depthFunc(515);o=a}},"setFunc"),setLocked:/* @__PURE__ */__name(function(i){a=i},"setLocked"),setClear:/* @__PURE__ */__name(function(a){u!==a&&(i.clearDepth(a),u=a)},"setClear"),reset:/* @__PURE__ */__name(function(){a=!1,s=null,o=null,u=null},"reset")}}function StencilBuffer(){let a=!1,s=null,o=null,u=null,_=null,x=null,w=null,C=null,L=null;return{setTest:/* @__PURE__ */__name(function(i){a||(i?enable(2960):disable(2960))},"setTest"),setMask:/* @__PURE__ */__name(function(o){s===o||a||(i.stencilMask(o),s=o)},"setMask"),setFunc:/* @__PURE__ */__name(function(a,s,x){o===a&&u===s&&_===x||(i.stencilFunc(a,s,x),o=a,u=s,_=x)},"setFunc"),setOp:/* @__PURE__ */__name(function(a,s,o){x===a&&w===s&&C===o||(i.stencilOp(a,s,o),x=a,w=s,C=o)},"setOp"),setLocked:/* @__PURE__ */__name(function(i){a=i},"setLocked"),setClear:/* @__PURE__ */__name(function(a){L!==a&&(i.clearStencil(a),L=a)},"setClear"),reset:/* @__PURE__ */__name(function(){a=!1,s=null,o=null,u=null,_=null,x=null,w=null,C=null,L=null},"reset")}}__name(ColorBuffer,"ColorBuffer"),__name(DepthBuffer,"DepthBuffer"),__name(StencilBuffer,"StencilBuffer");const u=new ColorBuffer,_=new DepthBuffer,x=new StencilBuffer;let w={},C=null,L=null,B=null,U=null,j=null,V=null,Z=null,ee=null,ie=null,ae=!1,de=null,dt=null,ht=null,pt=null,mt=null;const ft=i.getParameter(35661);let gt=!1,_t=0;const yt=i.getParameter(7938);-1!==yt.indexOf("WebGL")?(_t=parseFloat(/^WebGL (\d)/.exec(yt)[1]),gt=_t>=1):-1!==yt.indexOf("OpenGL ES")&&(_t=parseFloat(/^OpenGL ES (\d)/.exec(yt)[1]),gt=_t>=2);let vt=null,bt={};const Tt=new kr,St=new kr;function createTexture(a,s,o){const u=new Uint8Array(4),_=i.createTexture();i.bindTexture(a,_),i.texParameteri(a,10241,9728),i.texParameteri(a,10240,9728);for(let x=0;x<o;x++)i.texImage2D(s+x,0,6408,1,1,0,6408,5121,u);return _}__name(createTexture,"createTexture");const xt={};function enable(a){!0!==w[a]&&(i.enable(a),w[a]=!0)}function disable(a){!1!==w[a]&&(i.disable(a),w[a]=!1)}function useProgram(a){return C!==a&&(i.useProgram(a),C=a,!0)}xt[3553]=createTexture(3553,3553,1),xt[34067]=createTexture(34067,34069,6),u.setClear(0,0,0,1),_.setClear(1),x.setClear(0),enable(2929),_.setFunc(st),setFlipSided(!1),setCullFace($),enable(2884),setBlending(pe),__name(enable,"enable"),__name(disable,"disable"),__name(useProgram,"useProgram");const wt={[Se]:32774,[xe]:32778,[we]:32779};if(o)wt[Pe]=32775,wt[Re]=32776;else{const i=a.get("EXT_blend_minmax");null!==i&&(wt[Pe]=i.MIN_EXT,wt[Re]=i.MAX_EXT)}const At={[ze]:0,[He]:1,[$e]:768,[qe]:770,[nt]:776,[et]:774,[Qe]:772,[We]:769,[Xe]:771,[tt]:775,[Ye]:773};function setBlending(a,s,o,u,_,x,w,C){if(a!==pe){if(L||(enable(3042),L=!0),a===Te)_=_||s,x=x||o,w=w||u,s===U&&_===Z||(i.blendEquationSeparate(wt[s],wt[_]),U=s,Z=_),o===j&&u===V&&x===ee&&w===ie||(i.blendFuncSeparate(At[o],At[u],At[x],At[w]),j=o,V=u,ee=x,ie=w),B=a,ae=null;else if(a!==B||C!==ae){if(U===Se&&Z===Se||(i.blendEquation(32774),U=Se,Z=Se),C)switch(a){case fe:i.blendFuncSeparate(1,771,1,771);break;case _e:i.blendFunc(1,1);break;case ye:i.blendFuncSeparate(0,0,769,771);break;case be:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",a)}else switch(a){case fe:i.blendFuncSeparate(770,771,1,771);break;case _e:i.blendFunc(770,1);break;case ye:i.blendFunc(0,769);break;case be:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",a)}j=null,V=null,ee=null,ie=null,B=a,ae=C}}else L&&(disable(3042),L=!1)}function setMaterial(i,a){i.side===ce?disable(2884):enable(2884);let s=i.side===le;a&&(s=!s),setFlipSided(s),i.blending===fe&&!1===i.transparent?setBlending(pe):setBlending(i.blending,i.blendEquation,i.blendSrc,i.blendDst,i.blendEquationAlpha,i.blendSrcAlpha,i.blendDstAlpha,i.premultipliedAlpha),_.setFunc(i.depthFunc),_.setTest(i.depthTest),_.setMask(i.depthWrite),u.setMask(i.colorWrite);const o=i.stencilWrite;x.setTest(o),o&&(x.setMask(i.stencilWriteMask),x.setFunc(i.stencilFunc,i.stencilRef,i.stencilFuncMask),x.setOp(i.stencilFail,i.stencilZFail,i.stencilZPass)),setPolygonOffset(i.polygonOffset,i.polygonOffsetFactor,i.polygonOffsetUnits)}function setFlipSided(a){de!==a&&(a?i.frontFace(2304):i.frontFace(2305),de=a)}function setCullFace(a){a!==z?(enable(2884),a!==dt&&(a===$?i.cullFace(1029):a===Y?i.cullFace(1028):i.cullFace(1032))):disable(2884),dt=a}function setLineWidth(a){a!==ht&&(gt&&i.lineWidth(a),ht=a)}function setPolygonOffset(a,s,o){a?(enable(32823),pt===s&&mt===o||(i.polygonOffset(s,o),pt=s,mt=o)):disable(32823)}function setScissorTest(i){i?enable(3089):disable(3089)}function activeTexture(a){void 0===a&&(a=33984+ft-1),vt!==a&&(i.activeTexture(a),vt=a)}function bindTexture(a,s){null===vt&&activeTexture();let o=bt[vt];void 0===o&&(o={type:void 0,texture:void 0},bt[vt]=o),o.type===a&&o.texture===s||(i.bindTexture(a,s||xt[a]),o.type=a,o.texture=s)}function unbindTexture(){const a=bt[vt];void 0!==a&&void 0!==a.type&&(i.bindTexture(a.type,null),a.type=void 0,a.texture=void 0)}function compressedTexImage2D(){try{i.compressedTexImage2D.apply(i,arguments)}catch(a){console.error("THREE.WebGLState:",a)}}function texImage2D(){try{i.texImage2D.apply(i,arguments)}catch(a){console.error("THREE.WebGLState:",a)}}function texImage3D(){try{i.texImage3D.apply(i,arguments)}catch(a){console.error("THREE.WebGLState:",a)}}function scissor(a){!1===Tt.equals(a)&&(i.scissor(a.x,a.y,a.z,a.w),Tt.copy(a))}function viewport(a){!1===St.equals(a)&&(i.viewport(a.x,a.y,a.z,a.w),St.copy(a))}function reset2(){w={},vt=null,bt={},C=null,L=null,B=null,U=null,j=null,V=null,Z=null,ee=null,ie=null,ae=!1,de=null,dt=null,ht=null,pt=null,mt=null,u.reset(),_.reset(),x.reset()}return __name(setBlending,"setBlending"),__name(setMaterial,"setMaterial"),__name(setFlipSided,"setFlipSided"),__name(setCullFace,"setCullFace"),__name(setLineWidth,"setLineWidth"),__name(setPolygonOffset,"setPolygonOffset"),__name(setScissorTest,"setScissorTest"),__name(activeTexture,"activeTexture"),__name(bindTexture,"bindTexture"),__name(unbindTexture,"unbindTexture"),__name(compressedTexImage2D,"compressedTexImage2D"),__name(texImage2D,"texImage2D"),__name(texImage3D,"texImage3D"),__name(scissor,"scissor"),__name(viewport,"viewport"),__name(reset2,"reset"),{buffers:{color:u,depth:_,stencil:x},enable:enable,disable:disable,useProgram:useProgram,setBlending:setBlending,setMaterial:setMaterial,setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:setLineWidth,setPolygonOffset:setPolygonOffset,setScissorTest:setScissorTest,activeTexture:activeTexture,bindTexture:bindTexture,unbindTexture:unbindTexture,compressedTexImage2D:compressedTexImage2D,texImage2D:texImage2D,texImage3D:texImage3D,scissor:scissor,viewport:viewport,reset:reset2}}function WebGLTextures(i,a,s,o,u,_,x){const w=u.isWebGL2,C=u.maxTextures,L=u.maxCubemapSize,B=u.maxTextureSize,U=u.maxSamples,j=/* @__PURE__ */new WeakMap;let V,z=!1;try{z="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ae){}function createCanvas(i,a){return z?new OffscreenCanvas(i,a):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function resizeImage(i,a,s,o){let u=1;if((i.width>o||i.height>o)&&(u=o/Math.max(i.width,i.height)),u<1||!0===a){if("undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&i instanceof ImageBitmap){const o=a?br.floorPowerOfTwo:Math.floor,_=o(u*i.width),x=o(u*i.height);void 0===V&&(V=createCanvas(_,x));const w=s?createCanvas(_,x):V;return w.width=_,w.height=x,w.getContext("2d").drawImage(i,0,0,_,x),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+_+"x"+x+")."),w}return"data"in i&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),i}return i}function isPowerOfTwo(i){return br.isPowerOfTwo(i.width)&&br.isPowerOfTwo(i.height)}function textureNeedsPowerOfTwo(i){return!w&&(i.wrapS!==Mt||i.wrapT!==Mt||i.minFilter!==Pt&&i.minFilter!==Dt)}function textureNeedsGenerateMipmaps(i,a){return i.generateMipmaps&&a&&i.minFilter!==Pt&&i.minFilter!==Dt}function generateMipmap(a,s,u,_){i.generateMipmap(a),o.get(s).__maxMipLevel=Math.log(Math.max(u,_))*Math.LOG2E}function getInternalFormat(s,o,u){if(!1===w)return o;if(null!==s){if(void 0!==i[s])return i[s];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+s+"'")}let _=o;return 6403===o&&(5126===u&&(_=33326),5131===u&&(_=33325),5121===u&&(_=33321)),6407===o&&(5126===u&&(_=34837),5131===u&&(_=34843),5121===u&&(_=32849)),6408===o&&(5126===u&&(_=34836),5131===u&&(_=34842),5121===u&&(_=32856)),33325!==_&&33326!==_&&34842!==_&&34836!==_||a.get("EXT_color_buffer_float"),_}function filterFallback(i){return i===Pt||i===It||i===Lt?9728:9729}function onTextureDispose(i){const a=i.target;a.removeEventListener("dispose",onTextureDispose),deallocateTexture(a),a.isVideoTexture&&j.delete(a),x.memory.textures--}function onRenderTargetDispose(i){const a=i.target;a.removeEventListener("dispose",onRenderTargetDispose),deallocateRenderTarget(a),x.memory.textures--}function deallocateTexture(a){const s=o.get(a);void 0!==s.__webglInit&&(i.deleteTexture(s.__webglTexture),o.remove(a))}function deallocateRenderTarget(a){const s=o.get(a),u=o.get(a.texture);if(a){if(void 0!==u.__webglTexture&&i.deleteTexture(u.__webglTexture),a.depthTexture&&a.depthTexture.dispose(),a.isWebGLCubeRenderTarget)for(let a=0;a<6;a++)i.deleteFramebuffer(s.__webglFramebuffer[a]),s.__webglDepthbuffer&&i.deleteRenderbuffer(s.__webglDepthbuffer[a]);else i.deleteFramebuffer(s.__webglFramebuffer),s.__webglDepthbuffer&&i.deleteRenderbuffer(s.__webglDepthbuffer),s.__webglMultisampledFramebuffer&&i.deleteFramebuffer(s.__webglMultisampledFramebuffer),s.__webglColorRenderbuffer&&i.deleteRenderbuffer(s.__webglColorRenderbuffer),s.__webglDepthRenderbuffer&&i.deleteRenderbuffer(s.__webglDepthRenderbuffer);o.remove(a.texture),o.remove(a)}}__name(createCanvas,"createCanvas"),__name(resizeImage,"resizeImage"),__name(isPowerOfTwo,"isPowerOfTwo"),__name(textureNeedsPowerOfTwo,"textureNeedsPowerOfTwo"),__name(textureNeedsGenerateMipmaps,"textureNeedsGenerateMipmaps"),__name(generateMipmap,"generateMipmap"),__name(getInternalFormat,"getInternalFormat"),__name(filterFallback,"filterFallback"),__name(onTextureDispose,"onTextureDispose"),__name(onRenderTargetDispose,"onRenderTargetDispose"),__name(deallocateTexture,"deallocateTexture"),__name(deallocateRenderTarget,"deallocateRenderTarget");let $=0;function resetTextureUnits(){$=0}function allocateTextureUnit(){const i=$;return i>=C&&console.warn("THREE.WebGLTextures: Trying to use "+i+" texture units while this GPU supports only "+C),$+=1,i}function setTexture2D(i,a){const u=o.get(i);if(i.isVideoTexture&&updateVideoTexture(i),i.version>0&&u.__version!==i.version){const s=i.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==s.complete)return void uploadTexture(u,i,a);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}s.activeTexture(33984+a),s.bindTexture(3553,u.__webglTexture)}function setTexture2DArray(i,a){const u=o.get(i);i.version>0&&u.__version!==i.version?uploadTexture(u,i,a):(s.activeTexture(33984+a),s.bindTexture(35866,u.__webglTexture))}function setTexture3D(i,a){const u=o.get(i);i.version>0&&u.__version!==i.version?uploadTexture(u,i,a):(s.activeTexture(33984+a),s.bindTexture(32879,u.__webglTexture))}function setTextureCube(i,a){const u=o.get(i);i.version>0&&u.__version!==i.version?uploadCubeTexture(u,i,a):(s.activeTexture(33984+a),s.bindTexture(34067,u.__webglTexture))}__name(resetTextureUnits,"resetTextureUnits"),__name(allocateTextureUnit,"allocateTextureUnit"),__name(setTexture2D,"setTexture2D"),__name(setTexture2DArray,"setTexture2DArray"),__name(setTexture3D,"setTexture3D"),__name(setTextureCube,"setTextureCube");const Y={[Et]:10497,[Mt]:33071,[kt]:33648},Z={[Pt]:9728,[It]:9984,[Lt]:9986,[Dt]:9729,[Rt]:9985,[Ot]:9987};function setTextureParameters(s,_,x){x?(i.texParameteri(s,10242,Y[_.wrapS]),i.texParameteri(s,10243,Y[_.wrapT]),32879!==s&&35866!==s||i.texParameteri(s,32882,Y[_.wrapR]),i.texParameteri(s,10240,Z[_.magFilter]),i.texParameteri(s,10241,Z[_.minFilter])):(i.texParameteri(s,10242,33071),i.texParameteri(s,10243,33071),32879!==s&&35866!==s||i.texParameteri(s,32882,33071),_.wrapS===Mt&&_.wrapT===Mt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(s,10240,filterFallback(_.magFilter)),i.texParameteri(s,10241,filterFallback(_.minFilter)),_.minFilter!==Pt&&_.minFilter!==Dt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const C=a.get("EXT_texture_filter_anisotropic");if(C){if(_.type===zt&&null===a.get("OES_texture_float_linear"))return;if(_.type===Ht&&null===(w||a.get("OES_texture_half_float_linear")))return;(_.anisotropy>1||o.get(_).__currentAnisotropy)&&(i.texParameterf(s,C.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(_.anisotropy,u.getMaxAnisotropy())),o.get(_).__currentAnisotropy=_.anisotropy)}}function initTexture(a,s){void 0===a.__webglInit&&(a.__webglInit=!0,s.addEventListener("dispose",onTextureDispose),a.__webglTexture=i.createTexture(),x.memory.textures++)}function uploadTexture(a,o,u){let x=3553;o.isDataTexture2DArray&&(x=35866),o.isDataTexture3D&&(x=32879),initTexture(a,o),s.activeTexture(33984+u),s.bindTexture(x,a.__webglTexture),i.pixelStorei(37440,o.flipY),i.pixelStorei(37441,o.premultiplyAlpha),i.pixelStorei(3317,o.unpackAlignment);const C=textureNeedsPowerOfTwo(o)&&!1===isPowerOfTwo(o.image),L=resizeImage(o.image,C,!1,B),U=isPowerOfTwo(L)||w,j=_.convert(o.format);let V,z=_.convert(o.type),$=getInternalFormat(o.internalFormat,j,z);setTextureParameters(x,o,U);const Y=o.mipmaps;if(o.isDepthTexture)$=6402,w?$=o.type===zt?36012:o.type===Vt?33190:o.type===qt?35056:33189:o.type===zt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),o.format===en&&6402===$&&o.type!==Ut&&o.type!==Vt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),o.type=Ut,z=_.convert(o.type)),o.format===tn&&6402===$&&($=34041,o.type!==qt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),o.type=qt,z=_.convert(o.type))),s.texImage2D(3553,0,$,L.width,L.height,0,j,z,null);else if(o.isDataTexture)if(Y.length>0&&U){for(let i=0,a=Y.length;i<a;i++)V=Y[i],s.texImage2D(3553,i,$,V.width,V.height,0,j,z,V.data);o.generateMipmaps=!1,a.__maxMipLevel=Y.length-1}else s.texImage2D(3553,0,$,L.width,L.height,0,j,z,L.data),a.__maxMipLevel=0;else if(o.isCompressedTexture){for(let i=0,a=Y.length;i<a;i++)V=Y[i],o.format!==Yt&&o.format!==Kt?null!==j?s.compressedTexImage2D(3553,i,$,V.width,V.height,0,V.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):s.texImage2D(3553,i,$,V.width,V.height,0,j,z,V.data);a.__maxMipLevel=Y.length-1}else if(o.isDataTexture2DArray)s.texImage3D(35866,0,$,L.width,L.height,L.depth,0,j,z,L.data),a.__maxMipLevel=0;else if(o.isDataTexture3D)s.texImage3D(32879,0,$,L.width,L.height,L.depth,0,j,z,L.data),a.__maxMipLevel=0;else if(Y.length>0&&U){for(let i=0,a=Y.length;i<a;i++)V=Y[i],s.texImage2D(3553,i,$,j,z,V);o.generateMipmaps=!1,a.__maxMipLevel=Y.length-1}else s.texImage2D(3553,0,$,j,z,L),a.__maxMipLevel=0;textureNeedsGenerateMipmaps(o,U)&&generateMipmap(x,o,L.width,L.height),a.__version=o.version,o.onUpdate&&o.onUpdate(o)}function uploadCubeTexture(a,o,u){if(6!==o.image.length)return;initTexture(a,o),s.activeTexture(33984+u),s.bindTexture(34067,a.__webglTexture),i.pixelStorei(37440,o.flipY),i.pixelStorei(37441,o.premultiplyAlpha),i.pixelStorei(3317,o.unpackAlignment);const x=o&&(o.isCompressedTexture||o.image[0].isCompressedTexture),C=o.image[0]&&o.image[0].isDataTexture,B=[];for(let i=0;i<6;i++)B[i]=x||C?C?o.image[i].image:o.image[i]:resizeImage(o.image[i],!1,!0,L);const U=B[0],j=isPowerOfTwo(U)||w,V=_.convert(o.format),z=_.convert(o.type),$=getInternalFormat(o.internalFormat,V,z);let Y;if(setTextureParameters(34067,o,j),x){for(let i=0;i<6;i++){Y=B[i].mipmaps;for(let a=0;a<Y.length;a++){const u=Y[a];o.format!==Yt&&o.format!==Kt?null!==V?s.compressedTexImage2D(34069+i,a,$,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):s.texImage2D(34069+i,a,$,u.width,u.height,0,V,z,u.data)}}a.__maxMipLevel=Y.length-1}else{Y=o.mipmaps;for(let i=0;i<6;i++)if(C){s.texImage2D(34069+i,0,$,B[i].width,B[i].height,0,V,z,B[i].data);for(let a=0;a<Y.length;a++){const o=Y[a].image[i].image;s.texImage2D(34069+i,a+1,$,o.width,o.height,0,V,z,o.data)}}else{s.texImage2D(34069+i,0,$,V,z,B[i]);for(let a=0;a<Y.length;a++){const o=Y[a];s.texImage2D(34069+i,a+1,$,V,z,o.image[i])}}a.__maxMipLevel=Y.length}textureNeedsGenerateMipmaps(o,j)&&generateMipmap(34067,o,U.width,U.height),a.__version=o.version,o.onUpdate&&o.onUpdate(o)}function setupFrameBufferTexture(a,u,x,w){const C=_.convert(u.texture.format),L=_.convert(u.texture.type),B=getInternalFormat(u.texture.internalFormat,C,L);s.texImage2D(w,0,B,u.width,u.height,0,C,L,null),i.bindFramebuffer(36160,a),i.framebufferTexture2D(36160,x,w,o.get(u.texture).__webglTexture,0),i.bindFramebuffer(36160,null)}function setupRenderBufferStorage(a,s,o){if(i.bindRenderbuffer(36161,a),s.depthBuffer&&!s.stencilBuffer){let u=33189;if(o){const a=s.depthTexture;a&&a.isDepthTexture&&(a.type===zt?u=36012:a.type===Vt&&(u=33190));const o=getRenderTargetSamples(s);i.renderbufferStorageMultisample(36161,o,u,s.width,s.height)}else i.renderbufferStorage(36161,u,s.width,s.height);i.framebufferRenderbuffer(36160,36096,36161,a)}else if(s.depthBuffer&&s.stencilBuffer){if(o){const a=getRenderTargetSamples(s);i.renderbufferStorageMultisample(36161,a,35056,s.width,s.height)}else i.renderbufferStorage(36161,34041,s.width,s.height);i.framebufferRenderbuffer(36160,33306,36161,a)}else{const a=_.convert(s.texture.format),u=_.convert(s.texture.type),x=getInternalFormat(s.texture.internalFormat,a,u);if(o){const a=getRenderTargetSamples(s);i.renderbufferStorageMultisample(36161,a,x,s.width,s.height)}else i.renderbufferStorage(36161,x,s.width,s.height)}i.bindRenderbuffer(36161,null)}function setupDepthTexture(a,s){if(s&&s.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,a),!s.depthTexture||!s.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");o.get(s.depthTexture).__webglTexture&&s.depthTexture.image.width===s.width&&s.depthTexture.image.height===s.height||(s.depthTexture.image.width=s.width,s.depthTexture.image.height=s.height,s.depthTexture.needsUpdate=!0),setTexture2D(s.depthTexture,0);const u=o.get(s.depthTexture).__webglTexture;if(s.depthTexture.format===en)i.framebufferTexture2D(36160,36096,3553,u,0);else{if(s.depthTexture.format!==tn)throw new Error("Unknown depthTexture format");i.framebufferTexture2D(36160,33306,3553,u,0)}}function setupDepthRenderbuffer(a){const s=o.get(a),u=!0===a.isWebGLCubeRenderTarget;if(a.depthTexture){if(u)throw new Error("target.depthTexture not supported in Cube render targets");setupDepthTexture(s.__webglFramebuffer,a)}else if(u){s.__webglDepthbuffer=[];for(let o=0;o<6;o++)i.bindFramebuffer(36160,s.__webglFramebuffer[o]),s.__webglDepthbuffer[o]=i.createRenderbuffer(),setupRenderBufferStorage(s.__webglDepthbuffer[o],a,!1)}else i.bindFramebuffer(36160,s.__webglFramebuffer),s.__webglDepthbuffer=i.createRenderbuffer(),setupRenderBufferStorage(s.__webglDepthbuffer,a,!1);i.bindFramebuffer(36160,null)}function setupRenderTarget(a){const u=o.get(a),C=o.get(a.texture);a.addEventListener("dispose",onRenderTargetDispose),C.__webglTexture=i.createTexture(),x.memory.textures++;const L=!0===a.isWebGLCubeRenderTarget,B=!0===a.isWebGLMultisampleRenderTarget,U=isPowerOfTwo(a)||w;if(!w||a.texture.format!==Kt||a.texture.type!==zt&&a.texture.type!==Ht||(a.texture.format=Yt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),L){u.__webglFramebuffer=[];for(let a=0;a<6;a++)u.__webglFramebuffer[a]=i.createFramebuffer()}else if(u.__webglFramebuffer=i.createFramebuffer(),B)if(w){u.__webglMultisampledFramebuffer=i.createFramebuffer(),u.__webglColorRenderbuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,u.__webglColorRenderbuffer);const s=_.convert(a.texture.format),o=_.convert(a.texture.type),x=getInternalFormat(a.texture.internalFormat,s,o),w=getRenderTargetSamples(a);i.renderbufferStorageMultisample(36161,w,x,a.width,a.height),i.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),i.bindRenderbuffer(36161,null),a.depthBuffer&&(u.__webglDepthRenderbuffer=i.createRenderbuffer(),setupRenderBufferStorage(u.__webglDepthRenderbuffer,a,!0)),i.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(L){s.bindTexture(34067,C.__webglTexture),setTextureParameters(34067,a.texture,U);for(let i=0;i<6;i++)setupFrameBufferTexture(u.__webglFramebuffer[i],a,36064,34069+i);textureNeedsGenerateMipmaps(a.texture,U)&&generateMipmap(34067,a.texture,a.width,a.height),s.bindTexture(34067,null)}else s.bindTexture(3553,C.__webglTexture),setTextureParameters(3553,a.texture,U),setupFrameBufferTexture(u.__webglFramebuffer,a,36064,3553),textureNeedsGenerateMipmaps(a.texture,U)&&generateMipmap(3553,a.texture,a.width,a.height),s.bindTexture(3553,null);a.depthBuffer&&setupDepthRenderbuffer(a)}function updateRenderTargetMipmap(i){const a=i.texture;if(textureNeedsGenerateMipmaps(a,isPowerOfTwo(i)||w)){const u=i.isWebGLCubeRenderTarget?34067:3553,_=o.get(a).__webglTexture;s.bindTexture(u,_),generateMipmap(u,a,i.width,i.height),s.bindTexture(u,null)}}function updateMultisampleRenderTarget(a){if(a.isWebGLMultisampleRenderTarget)if(w){const s=o.get(a);i.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,s.__webglFramebuffer);const u=a.width,_=a.height;let x=16384;a.depthBuffer&&(x|=256),a.stencilBuffer&&(x|=1024),i.blitFramebuffer(0,0,u,_,0,0,u,_,x,9728),i.bindFramebuffer(36160,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function getRenderTargetSamples(i){return w&&i.isWebGLMultisampleRenderTarget?Math.min(U,i.samples):0}function updateVideoTexture(i){const a=x.render.frame;j.get(i)!==a&&(j.set(i,a),i.update())}__name(setTextureParameters,"setTextureParameters"),__name(initTexture,"initTexture"),__name(uploadTexture,"uploadTexture"),__name(uploadCubeTexture,"uploadCubeTexture"),__name(setupFrameBufferTexture,"setupFrameBufferTexture"),__name(setupRenderBufferStorage,"setupRenderBufferStorage"),__name(setupDepthTexture,"setupDepthTexture"),__name(setupDepthRenderbuffer,"setupDepthRenderbuffer"),__name(setupRenderTarget,"setupRenderTarget"),__name(updateRenderTargetMipmap,"updateRenderTargetMipmap"),__name(updateMultisampleRenderTarget,"updateMultisampleRenderTarget"),__name(getRenderTargetSamples,"getRenderTargetSamples"),__name(updateVideoTexture,"updateVideoTexture");let ee=!1,ie=!1;function safeSetTexture2D(i,a){i&&i.isWebGLRenderTarget&&(!1===ee&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ee=!0),i=i.texture),setTexture2D(i,a)}function safeSetTextureCube(i,a){i&&i.isWebGLCubeRenderTarget&&(!1===ie&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ie=!0),i=i.texture),setTextureCube(i,a)}__name(safeSetTexture2D,"safeSetTexture2D"),__name(safeSetTextureCube,"safeSetTextureCube"),this.allocateTextureUnit=allocateTextureUnit,this.resetTextureUnits=resetTextureUnits,this.setTexture2D=setTexture2D,this.setTexture2DArray=setTexture2DArray,this.setTexture3D=setTexture3D,this.setTextureCube=setTextureCube,this.setupRenderTarget=setupRenderTarget,this.updateRenderTargetMipmap=updateRenderTargetMipmap,this.updateMultisampleRenderTarget=updateMultisampleRenderTarget,this.safeSetTexture2D=safeSetTexture2D,this.safeSetTextureCube=safeSetTextureCube}function WebGLUtils(i,a,s){const o=s.isWebGL2;function convert(i){let s;if(i===Nt)return 5121;if(i===$t)return 32819;if(i===Gt)return 32820;if(i===Wt)return 33635;if(i===Bt)return 5120;if(i===Ft)return 5122;if(i===Ut)return 5123;if(i===jt)return 5124;if(i===Vt)return 5125;if(i===zt)return 5126;if(i===Ht)return o?5131:(s=a.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(i===Qt)return 6406;if(i===Kt)return 6407;if(i===Yt)return 6408;if(i===Jt)return 6409;if(i===Zt)return 6410;if(i===en)return 6402;if(i===tn)return 34041;if(i===nn)return 6403;if(i===rn)return 36244;if(i===an)return 33319;if(i===sn)return 33320;if(i===ln)return 36248;if(i===cn)return 36249;if(i===un||i===dn||i===hn||i===pn){if(s=a.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===un)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===dn)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===hn)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===pn)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===mn||i===fn||i===gn||i===_n){if(s=a.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(i===mn)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===fn)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===gn)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===_n)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===yn)return s=a.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if((i===vn||i===bn)&&(s=a.get("WEBGL_compressed_texture_etc"),null!==s)){if(i===vn)return s.COMPRESSED_RGB8_ETC2;if(i===bn)return s.COMPRESSED_RGBA8_ETC2_EAC}return i===Tn||i===Sn||i===xn||i===wn||i===An||i===Cn||i===En||i===Mn||i===kn||i===Pn||i===In||i===Ln||i===Dn||i===Rn||i===Nn||i===Bn||i===Fn||i===Un||i===jn||i===Vn||i===zn||i===Hn||i===$n||i===Gn||i===Wn||i===qn||i===Xn||i===Qn?(s=a.get("WEBGL_compressed_texture_astc"),null!==s?i:null):i===On?(s=a.get("EXT_texture_compression_bptc"),null!==s?i:null):i===qt?o?34042:(s=a.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0}return __name(convert,"convert"),{convert:convert}}function ArrayCamera(i=[]){PerspectiveCamera.call(this),this.cameras=i}function Group(){Object3D.call(this),this.type="Group"}function WebXRController(){this._targetRay=null,this._grip=null,this._hand=null}function WebXRManager(i,a){const s=this;let o=null,u=1,_=null,x="local-floor",w=null;const C=[],L=/* @__PURE__ */new Map,B=new PerspectiveCamera;B.layers.enable(1),B.viewport=new kr;const U=new PerspectiveCamera;U.layers.enable(2),U.viewport=new kr;const j=[B,U],V=new ArrayCamera;V.layers.enable(1),V.layers.enable(2);let z=null,$=null;function onSessionEvent(i){const a=L.get(i.inputSource);a&&a.dispatchEvent({type:i.type,data:i.inputSource})}function onSessionEnd(){L.forEach(function(i,a){i.disconnect(a)}),L.clear(),z=null,$=null,i.setFramebuffer(null),i.setRenderTarget(i.getRenderTarget()),ie.stop(),s.isPresenting=!1,s.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(i){const a=o.inputSources;for(let s=0;s<C.length;s++)L.set(a[s],C[s]);for(let s=0;s<i.removed.length;s++){const a=i.removed[s],o=L.get(a);o&&(o.dispatchEvent({type:"disconnected",data:a}),L.delete(a))}for(let s=0;s<i.added.length;s++){const a=i.added[s],o=L.get(a);o&&o.dispatchEvent({type:"connected",data:a})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(i){let a=C[i];return void 0===a&&(a=new WebXRController,C[i]=a),a.getTargetRaySpace()},this.getControllerGrip=function(i){let a=C[i];return void 0===a&&(a=new WebXRController,C[i]=a),a.getGripSpace()},this.getHand=function(i){let a=C[i];return void 0===a&&(a=new WebXRController,C[i]=a),a.getHandSpace()},__name(onSessionEvent,"onSessionEvent"),__name(onSessionEnd,"onSessionEnd"),this.setFramebufferScaleFactor=function(i){u=i,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(i){x=i,!0===s.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return _},this.getSession=function(){return o},this.setSession=/* @__PURE__ */function(){var i=_asyncToGenerator(function*(i){if(o=i,null!==o){o.addEventListener("select",onSessionEvent),o.addEventListener("selectstart",onSessionEvent),o.addEventListener("selectend",onSessionEvent),o.addEventListener("squeeze",onSessionEvent),o.addEventListener("squeezestart",onSessionEvent),o.addEventListener("squeezeend",onSessionEvent),o.addEventListener("end",onSessionEnd),o.addEventListener("inputsourceschange",onInputSourcesChange);const i=a.getContextAttributes();!0!==i.xrCompatible&&(yield a.makeXRCompatible());const w={antialias:i.antialias,alpha:i.alpha,depth:i.depth,stencil:i.stencil,framebufferScaleFactor:u},C=new XRWebGLLayer(o,a,w);o.updateRenderState({baseLayer:C}),_=yield o.requestReferenceSpace(x),ie.setContext(o),ie.start(),s.isPresenting=!0,s.dispatchEvent({type:"sessionstart"})}});return function(a){return i.apply(this,arguments)}}(),__name(onInputSourcesChange,"onInputSourcesChange");const Y=new Or,Z=new Or;function setProjectionFromUnion(i,a,s){Y.setFromMatrixPosition(a.matrixWorld),Z.setFromMatrixPosition(s.matrixWorld);const o=Y.distanceTo(Z),u=a.projectionMatrix.elements,_=s.projectionMatrix.elements,x=u[14]/(u[10]-1),w=u[14]/(u[10]+1),C=(u[9]+1)/u[5],L=(u[9]-1)/u[5],B=(u[8]-1)/u[0],U=(_[8]+1)/_[0],j=x*B,V=x*U,z=o/(-B+U),$=z*-B;a.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.translateX($),i.translateZ(z),i.matrixWorld.compose(i.position,i.quaternion,i.scale),i.matrixWorldInverse.copy(i.matrixWorld).invert();const ee=x+z,ie=w+z,ae=j-$,le=V+(o-$),ce=C*w/ie*ee,de=L*w/ie*ee;i.projectionMatrix.makePerspective(ae,le,ce,de,ee,ie)}function updateCamera(i,a){null===a?i.matrixWorld.copy(i.matrix):i.matrixWorld.multiplyMatrices(a.matrixWorld,i.matrix),i.matrixWorldInverse.copy(i.matrixWorld).invert()}__name(setProjectionFromUnion,"setProjectionFromUnion"),__name(updateCamera,"updateCamera"),this.getCamera=function(i){V.near=U.near=B.near=i.near,V.far=U.far=B.far=i.far,z===V.near&&$===V.far||(o.updateRenderState({depthNear:V.near,depthFar:V.far}),z=V.near,$=V.far);const a=i.parent,s=V.cameras;updateCamera(V,a);for(let o=0;o<s.length;o++)updateCamera(s[o],a);i.matrixWorld.copy(V.matrixWorld),i.matrix.copy(V.matrix),i.matrix.decompose(i.position,i.quaternion,i.scale);const u=i.children;for(let o=0,_=u.length;o<_;o++)u[o].updateMatrixWorld(!0);return 2===s.length?setProjectionFromUnion(V,B,U):V.projectionMatrix.copy(B.projectionMatrix),V};let ee=null;function onAnimationFrame(a,s){if(w=s.getViewerPose(_),null!==w){const a=w.views,s=o.renderState.baseLayer;i.setFramebuffer(s.framebuffer);let u=!1;a.length!==V.cameras.length&&(V.cameras.length=0,u=!0);for(let i=0;i<a.length;i++){const o=a[i],_=s.getViewport(o),x=j[i];x.matrix.fromArray(o.transform.matrix),x.projectionMatrix.fromArray(o.projectionMatrix),x.viewport.set(_.x,_.y,_.width,_.height),0===i&&V.matrix.copy(x.matrix),!0===u&&V.cameras.push(x)}}const u=o.inputSources;for(let i=0;i<C.length;i++){const a=C[i],o=u[i];a.update(o,s,_)}ee&&ee(a,s)}__name(onAnimationFrame,"onAnimationFrame");const ie=new WebGLAnimation;ie.setAnimationLoop(onAnimationFrame),this.setAnimationLoop=function(i){ee=i},this.dispose=function(){}}function WebGLMaterials(i){function refreshFogUniforms(i,a){i.fogColor.value.copy(a.color),a.isFog?(i.fogNear.value=a.near,i.fogFar.value=a.far):a.isFogExp2&&(i.fogDensity.value=a.density)}function refreshMaterialUniforms(i,a,s,o){a.isMeshBasicMaterial?refreshUniformsCommon(i,a):a.isMeshLambertMaterial?(refreshUniformsCommon(i,a),refreshUniformsLambert(i,a)):a.isMeshToonMaterial?(refreshUniformsCommon(i,a),refreshUniformsToon(i,a)):a.isMeshPhongMaterial?(refreshUniformsCommon(i,a),refreshUniformsPhong(i,a)):a.isMeshStandardMaterial?(refreshUniformsCommon(i,a),a.isMeshPhysicalMaterial?refreshUniformsPhysical(i,a):refreshUniformsStandard(i,a)):a.isMeshMatcapMaterial?(refreshUniformsCommon(i,a),refreshUniformsMatcap(i,a)):a.isMeshDepthMaterial?(refreshUniformsCommon(i,a),refreshUniformsDepth(i,a)):a.isMeshDistanceMaterial?(refreshUniformsCommon(i,a),refreshUniformsDistance(i,a)):a.isMeshNormalMaterial?(refreshUniformsCommon(i,a),refreshUniformsNormal(i,a)):a.isLineBasicMaterial?(refreshUniformsLine(i,a),a.isLineDashedMaterial&&refreshUniformsDash(i,a)):a.isPointsMaterial?refreshUniformsPoints(i,a,s,o):a.isSpriteMaterial?refreshUniformsSprites(i,a):a.isShadowMaterial?(i.color.value.copy(a.color),i.opacity.value=a.opacity):a.isShaderMaterial&&(a.uniformsNeedUpdate=!1)}function refreshUniformsCommon(a,s){a.opacity.value=s.opacity,s.color&&a.diffuse.value.copy(s.color),s.emissive&&a.emissive.value.copy(s.emissive).multiplyScalar(s.emissiveIntensity),s.map&&(a.map.value=s.map),s.alphaMap&&(a.alphaMap.value=s.alphaMap),s.specularMap&&(a.specularMap.value=s.specularMap);const o=i.get(s).envMap;if(o){a.envMap.value=o,a.flipEnvMap.value=o.isCubeTexture&&o._needsFlipEnvMap?-1:1,a.reflectivity.value=s.reflectivity,a.refractionRatio.value=s.refractionRatio;const u=i.get(o).__maxMipLevel;void 0!==u&&(a.maxMipLevel.value=u)}let u,_;s.lightMap&&(a.lightMap.value=s.lightMap,a.lightMapIntensity.value=s.lightMapIntensity),s.aoMap&&(a.aoMap.value=s.aoMap,a.aoMapIntensity.value=s.aoMapIntensity),s.map?u=s.map:s.specularMap?u=s.specularMap:s.displacementMap?u=s.displacementMap:s.normalMap?u=s.normalMap:s.bumpMap?u=s.bumpMap:s.roughnessMap?u=s.roughnessMap:s.metalnessMap?u=s.metalnessMap:s.alphaMap?u=s.alphaMap:s.emissiveMap?u=s.emissiveMap:s.clearcoatMap?u=s.clearcoatMap:s.clearcoatNormalMap?u=s.clearcoatNormalMap:s.clearcoatRoughnessMap&&(u=s.clearcoatRoughnessMap),void 0!==u&&(u.isWebGLRenderTarget&&(u=u.texture),!0===u.matrixAutoUpdate&&u.updateMatrix(),a.uvTransform.value.copy(u.matrix)),s.aoMap?_=s.aoMap:s.lightMap&&(_=s.lightMap),void 0!==_&&(_.isWebGLRenderTarget&&(_=_.texture),!0===_.matrixAutoUpdate&&_.updateMatrix(),a.uv2Transform.value.copy(_.matrix))}function refreshUniformsLine(i,a){i.diffuse.value.copy(a.color),i.opacity.value=a.opacity}function refreshUniformsDash(i,a){i.dashSize.value=a.dashSize,i.totalSize.value=a.dashSize+a.gapSize,i.scale.value=a.scale}function refreshUniformsPoints(i,a,s,o){let u;i.diffuse.value.copy(a.color),i.opacity.value=a.opacity,i.size.value=a.size*s,i.scale.value=.5*o,a.map&&(i.map.value=a.map),a.alphaMap&&(i.alphaMap.value=a.alphaMap),a.map?u=a.map:a.alphaMap&&(u=a.alphaMap),void 0!==u&&(!0===u.matrixAutoUpdate&&u.updateMatrix(),i.uvTransform.value.copy(u.matrix))}function refreshUniformsSprites(i,a){let s;i.diffuse.value.copy(a.color),i.opacity.value=a.opacity,i.rotation.value=a.rotation,a.map&&(i.map.value=a.map),a.alphaMap&&(i.alphaMap.value=a.alphaMap),a.map?s=a.map:a.alphaMap&&(s=a.alphaMap),void 0!==s&&(!0===s.matrixAutoUpdate&&s.updateMatrix(),i.uvTransform.value.copy(s.matrix))}function refreshUniformsLambert(i,a){a.emissiveMap&&(i.emissiveMap.value=a.emissiveMap)}function refreshUniformsPhong(i,a){i.specular.value.copy(a.specular),i.shininess.value=Math.max(a.shininess,1e-4),a.emissiveMap&&(i.emissiveMap.value=a.emissiveMap),a.bumpMap&&(i.bumpMap.value=a.bumpMap,i.bumpScale.value=a.bumpScale,a.side===le&&(i.bumpScale.value*=-1)),a.normalMap&&(i.normalMap.value=a.normalMap,i.normalScale.value.copy(a.normalScale),a.side===le&&i.normalScale.value.negate()),a.displacementMap&&(i.displacementMap.value=a.displacementMap,i.displacementScale.value=a.displacementScale,i.displacementBias.value=a.displacementBias)}function refreshUniformsToon(i,a){a.gradientMap&&(i.gradientMap.value=a.gradientMap),a.emissiveMap&&(i.emissiveMap.value=a.emissiveMap),a.bumpMap&&(i.bumpMap.value=a.bumpMap,i.bumpScale.value=a.bumpScale,a.side===le&&(i.bumpScale.value*=-1)),a.normalMap&&(i.normalMap.value=a.normalMap,i.normalScale.value.copy(a.normalScale),a.side===le&&i.normalScale.value.negate()),a.displacementMap&&(i.displacementMap.value=a.displacementMap,i.displacementScale.value=a.displacementScale,i.displacementBias.value=a.displacementBias)}function refreshUniformsStandard(a,s){a.roughness.value=s.roughness,a.metalness.value=s.metalness,s.roughnessMap&&(a.roughnessMap.value=s.roughnessMap),s.metalnessMap&&(a.metalnessMap.value=s.metalnessMap),s.emissiveMap&&(a.emissiveMap.value=s.emissiveMap),s.bumpMap&&(a.bumpMap.value=s.bumpMap,a.bumpScale.value=s.bumpScale,s.side===le&&(a.bumpScale.value*=-1)),s.normalMap&&(a.normalMap.value=s.normalMap,a.normalScale.value.copy(s.normalScale),s.side===le&&a.normalScale.value.negate()),s.displacementMap&&(a.displacementMap.value=s.displacementMap,a.displacementScale.value=s.displacementScale,a.displacementBias.value=s.displacementBias),i.get(s).envMap&&(a.envMapIntensity.value=s.envMapIntensity)}function refreshUniformsPhysical(i,a){refreshUniformsStandard(i,a),i.reflectivity.value=a.reflectivity,i.clearcoat.value=a.clearcoat,i.clearcoatRoughness.value=a.clearcoatRoughness,a.sheen&&i.sheen.value.copy(a.sheen),a.clearcoatMap&&(i.clearcoatMap.value=a.clearcoatMap),a.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap.value=a.clearcoatRoughnessMap),a.clearcoatNormalMap&&(i.clearcoatNormalScale.value.copy(a.clearcoatNormalScale),i.clearcoatNormalMap.value=a.clearcoatNormalMap,a.side===le&&i.clearcoatNormalScale.value.negate()),i.transmission.value=a.transmission,a.transmissionMap&&(i.transmissionMap.value=a.transmissionMap)}function refreshUniformsMatcap(i,a){a.matcap&&(i.matcap.value=a.matcap),a.bumpMap&&(i.bumpMap.value=a.bumpMap,i.bumpScale.value=a.bumpScale,a.side===le&&(i.bumpScale.value*=-1)),a.normalMap&&(i.normalMap.value=a.normalMap,i.normalScale.value.copy(a.normalScale),a.side===le&&i.normalScale.value.negate()),a.displacementMap&&(i.displacementMap.value=a.displacementMap,i.displacementScale.value=a.displacementScale,i.displacementBias.value=a.displacementBias)}function refreshUniformsDepth(i,a){a.displacementMap&&(i.displacementMap.value=a.displacementMap,i.displacementScale.value=a.displacementScale,i.displacementBias.value=a.displacementBias)}function refreshUniformsDistance(i,a){a.displacementMap&&(i.displacementMap.value=a.displacementMap,i.displacementScale.value=a.displacementScale,i.displacementBias.value=a.displacementBias),i.referencePosition.value.copy(a.referencePosition),i.nearDistance.value=a.nearDistance,i.farDistance.value=a.farDistance}function refreshUniformsNormal(i,a){a.bumpMap&&(i.bumpMap.value=a.bumpMap,i.bumpScale.value=a.bumpScale,a.side===le&&(i.bumpScale.value*=-1)),a.normalMap&&(i.normalMap.value=a.normalMap,i.normalScale.value.copy(a.normalScale),a.side===le&&i.normalScale.value.negate()),a.displacementMap&&(i.displacementMap.value=a.displacementMap,i.displacementScale.value=a.displacementScale,i.displacementBias.value=a.displacementBias)}return __name(refreshFogUniforms,"refreshFogUniforms"),__name(refreshMaterialUniforms,"refreshMaterialUniforms"),__name(refreshUniformsCommon,"refreshUniformsCommon"),__name(refreshUniformsLine,"refreshUniformsLine"),__name(refreshUniformsDash,"refreshUniformsDash"),__name(refreshUniformsPoints,"refreshUniformsPoints"),__name(refreshUniformsSprites,"refreshUniformsSprites"),__name(refreshUniformsLambert,"refreshUniformsLambert"),__name(refreshUniformsPhong,"refreshUniformsPhong"),__name(refreshUniformsToon,"refreshUniformsToon"),__name(refreshUniformsStandard,"refreshUniformsStandard"),__name(refreshUniformsPhysical,"refreshUniformsPhysical"),__name(refreshUniformsMatcap,"refreshUniformsMatcap"),__name(refreshUniformsDepth,"refreshUniformsDepth"),__name(refreshUniformsDistance,"refreshUniformsDistance"),__name(refreshUniformsNormal,"refreshUniformsNormal"),{refreshFogUniforms:refreshFogUniforms,refreshMaterialUniforms:refreshMaterialUniforms}}function createCanvasElement(){const i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.style.display="block",i}function WebGLRenderer(i){const a=void 0!==(i=i||{}).canvas?i.canvas:createCanvasElement(),s=void 0!==i.context?i.context:null,o=void 0!==i.alpha&&i.alpha,u=void 0===i.depth||i.depth,_=void 0===i.stencil||i.stencil,x=void 0!==i.antialias&&i.antialias,w=void 0===i.premultipliedAlpha||i.premultipliedAlpha,C=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,L=void 0!==i.powerPreference?i.powerPreference:"default",B=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let U=null,j=null;const V=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=tr,this.physicallyCorrectLights=!1,this.toneMapping=mt,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const z=this;let $=!1,Y=null,Z=0,ee=0,ie=null,ae=null,le=-1,ce=null;const de=new kr,pe=new kr;let fe=null,_e=a.width,ye=a.height,be=1,Te=null,Se=null;const xe=new kr(0,0,_e,ye),we=new kr(0,0,_e,ye);let Pe=!1;const Re=new yo;let ze=!1,He=!1;const $e=new ya,We=new Or,qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function getTargetPixelRatio(){return null===ie?be:1}__name(getTargetPixelRatio,"getTargetPixelRatio");let Xe,Qe,Ye,et,tt,nt,it,rt,at,st,ot,lt,ct,ut,dt,ht,pt,ft,gt,_t,yt,vt=s;function getContext(i,s){for(let o=0;o<i.length;o++){const u=i[o],_=a.getContext(u,s);if(null!==_)return _}return null}__name(getContext,"getContext");try{const i={alpha:o,depth:u,stencil:_,antialias:x,premultipliedAlpha:w,preserveDrawingBuffer:C,powerPreference:L,failIfMajorPerformanceCaveat:B};if(a.addEventListener("webglcontextlost",onContextLost,!1),a.addEventListener("webglcontextrestored",onContextRestore,!1),null===vt){const a=["webgl2","webgl","experimental-webgl"];if(!0===z.isWebGL1Renderer&&a.shift(),vt=getContext(a,i),null===vt)throw getContext(a)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===vt.getShaderPrecisionFormat&&(vt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(wt){throw console.error("THREE.WebGLRenderer: "+wt.message),wt}function initGLContext(){Xe=new WebGLExtensions(vt),Qe=new WebGLCapabilities(vt,Xe,i),Xe.init(Qe),_t=new WebGLUtils(vt,Xe,Qe),Ye=new WebGLState(vt,Xe,Qe),Ye.scissor(pe.copy(we).multiplyScalar(be).floor()),Ye.viewport(de.copy(xe).multiplyScalar(be).floor()),et=new WebGLInfo,tt=new WebGLProperties,nt=new WebGLTextures(vt,Xe,Ye,tt,Qe,_t,et),it=new WebGLCubeMaps(z),rt=new WebGLAttributes(vt,Qe),yt=new WebGLBindingStates(vt,Xe,rt,Qe),at=new WebGLGeometries(vt,rt,et,yt),st=new WebGLObjects(vt,at,rt,et),pt=new WebGLMorphtargets(vt),dt=new WebGLClipping(tt),ot=new WebGLPrograms(z,it,Xe,Qe,yt,dt),lt=new WebGLMaterials(tt),ct=new WebGLRenderLists(tt),ut=new WebGLRenderStates(Xe,Qe),ht=new WebGLBackground(z,it,Ye,st,w),ft=new WebGLBufferRenderer(vt,Xe,et,Qe),gt=new WebGLIndexedBufferRenderer(vt,Xe,et,Qe),et.programs=ot.programs,z.capabilities=Qe,z.extensions=Xe,z.properties=tt,z.renderLists=ct,z.state=Ye,z.info=et}__name(initGLContext,"initGLContext"),initGLContext();const bt=new WebXRManager(z,vt);this.xr=bt;const Tt=new WebGLShadowMap(z,st,Qe.maxTextureSize);function onContextLost(i){i.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),$=!0}function onContextRestore(){console.log("THREE.WebGLRenderer: Context Restored."),$=!1,initGLContext()}function onMaterialDispose(i){const a=i.target;a.removeEventListener("dispose",onMaterialDispose),deallocateMaterial(a)}function deallocateMaterial(i){releaseMaterialProgramReference(i),tt.remove(i)}function releaseMaterialProgramReference(i){const a=tt.get(i).program;void 0!==a&&ot.releaseProgram(a)}function renderObjectImmediate(i,a){i.render(function(i){z.renderBufferImmediate(i,a)})}this.shadowMap=Tt,this.getContext=function(){return vt},this.getContextAttributes=function(){return vt.getContextAttributes()},this.forceContextLoss=function(){const i=Xe.get("WEBGL_lose_context");i&&i.loseContext()},this.forceContextRestore=function(){const i=Xe.get("WEBGL_lose_context");i&&i.restoreContext()},this.getPixelRatio=function(){return be},this.setPixelRatio=function(i){void 0!==i&&(be=i,this.setSize(_e,ye,!1))},this.getSize=function(i){return void 0===i&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),i=new Sr),i.set(_e,ye)},this.setSize=function(i,s,o){bt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(_e=i,ye=s,a.width=Math.floor(i*be),a.height=Math.floor(s*be),!1!==o&&(a.style.width=i+"px",a.style.height=s+"px"),this.setViewport(0,0,i,s))},this.getDrawingBufferSize=function(i){return void 0===i&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),i=new Sr),i.set(_e*be,ye*be).floor()},this.setDrawingBufferSize=function(i,s,o){_e=i,ye=s,be=o,a.width=Math.floor(i*o),a.height=Math.floor(s*o),this.setViewport(0,0,i,s)},this.getCurrentViewport=function(i){return void 0===i&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),i=new kr),i.copy(de)},this.getViewport=function(i){return i.copy(xe)},this.setViewport=function(i,a,s,o){i.isVector4?xe.set(i.x,i.y,i.z,i.w):xe.set(i,a,s,o),Ye.viewport(de.copy(xe).multiplyScalar(be).floor())},this.getScissor=function(i){return i.copy(we)},this.setScissor=function(i,a,s,o){i.isVector4?we.set(i.x,i.y,i.z,i.w):we.set(i,a,s,o),Ye.scissor(pe.copy(we).multiplyScalar(be).floor())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(i){Ye.setScissorTest(Pe=i)},this.setOpaqueSort=function(i){Te=i},this.setTransparentSort=function(i){Se=i},this.getClearColor=function(i){return void 0===i&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),i=new Ms),i.copy(ht.getClearColor())},this.setClearColor=function(){ht.setClearColor.apply(ht,arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha.apply(ht,arguments)},this.clear=function(i,a,s){let o=0;(void 0===i||i)&&(o|=16384),(void 0===a||a)&&(o|=256),(void 0===s||s)&&(o|=1024),vt.clear(o)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",onContextLost,!1),a.removeEventListener("webglcontextrestored",onContextRestore,!1),ct.dispose(),ut.dispose(),tt.dispose(),it.dispose(),st.dispose(),yt.dispose(),bt.dispose(),xt.stop()},__name(onContextLost,"onContextLost"),__name(onContextRestore,"onContextRestore"),__name(onMaterialDispose,"onMaterialDispose"),__name(deallocateMaterial,"deallocateMaterial"),__name(releaseMaterialProgramReference,"releaseMaterialProgramReference"),__name(renderObjectImmediate,"renderObjectImmediate"),this.renderBufferImmediate=function(i,a){yt.initAttributes();const s=tt.get(i);i.hasPositions&&!s.position&&(s.position=vt.createBuffer()),i.hasNormals&&!s.normal&&(s.normal=vt.createBuffer()),i.hasUvs&&!s.uv&&(s.uv=vt.createBuffer()),i.hasColors&&!s.color&&(s.color=vt.createBuffer());const o=a.getAttributes();i.hasPositions&&(vt.bindBuffer(34962,s.position),vt.bufferData(34962,i.positionArray,35048),yt.enableAttribute(o.position),vt.vertexAttribPointer(o.position,3,5126,!1,0,0)),i.hasNormals&&(vt.bindBuffer(34962,s.normal),vt.bufferData(34962,i.normalArray,35048),yt.enableAttribute(o.normal),vt.vertexAttribPointer(o.normal,3,5126,!1,0,0)),i.hasUvs&&(vt.bindBuffer(34962,s.uv),vt.bufferData(34962,i.uvArray,35048),yt.enableAttribute(o.uv),vt.vertexAttribPointer(o.uv,2,5126,!1,0,0)),i.hasColors&&(vt.bindBuffer(34962,s.color),vt.bufferData(34962,i.colorArray,35048),yt.enableAttribute(o.color),vt.vertexAttribPointer(o.color,3,5126,!1,0,0)),yt.disableUnusedAttributes(),vt.drawArrays(4,0,i.count),i.count=0},this.renderBufferDirect=function(i,a,s,o,u,_){null===a&&(a=qe);const x=u.isMesh&&u.matrixWorld.determinant()<0,w=setProgram(i,a,o,u);Ye.setMaterial(o,x);let C=s.index;const L=s.attributes.position;if(null===C){if(void 0===L||0===L.count)return}else if(0===C.count)return;let B,U=1;!0===o.wireframe&&(C=at.getWireframeAttribute(s),U=2),(o.morphTargets||o.morphNormals)&&pt.update(u,s,o,w),yt.setup(u,o,w,s,C);let j=ft;null!==C&&(B=rt.get(C),j=gt,j.setIndex(B));const V=null!==C?C.count:L.count,z=s.drawRange.start*U,$=s.drawRange.count*U,Y=null!==_?_.start*U:0,Z=null!==_?_.count*U:1/0,ee=Math.max(z,Y),ie=Math.min(V,z+$,Y+Z)-1,ae=Math.max(0,ie-ee+1);if(0!==ae){if(u.isMesh)!0===o.wireframe?(Ye.setLineWidth(o.wireframeLinewidth*getTargetPixelRatio()),j.setMode(1)):j.setMode(4);else if(u.isLine){let i=o.linewidth;void 0===i&&(i=1),Ye.setLineWidth(i*getTargetPixelRatio()),u.isLineSegments?j.setMode(1):u.isLineLoop?j.setMode(2):j.setMode(3)}else u.isPoints?j.setMode(0):u.isSprite&&j.setMode(4);if(u.isInstancedMesh)j.renderInstances(ee,ae,u.count);else if(s.isInstancedBufferGeometry){const i=Math.min(s.instanceCount,s._maxInstanceCount);j.renderInstances(ee,ae,i)}else j.render(ee,ae)}},this.compile=function(i,a){j=ut.get(i),j.init(),i.traverseVisible(function(i){i.isLight&&i.layers.test(a.layers)&&(j.pushLight(i),i.castShadow&&j.pushShadow(i))}),j.setupLights();const s=/* @__PURE__ */new WeakMap;i.traverse(function(a){const o=a.material;if(o)if(Array.isArray(o))for(let u=0;u<o.length;u++){const _=o[u];!1===s.has(_)&&(initMaterial(_,i,a),s.set(_))}else!1===s.has(o)&&(initMaterial(o,i,a),s.set(o))})};let St=null;function onAnimationFrame(i){bt.isPresenting||St&&St(i)}__name(onAnimationFrame,"onAnimationFrame");const xt=new WebGLAnimation;function projectObject(i,a,s,o){if(!1===i.visible)return;if(i.layers.test(a.layers))if(i.isGroup)s=i.renderOrder;else if(i.isLOD)!0===i.autoUpdate&&i.update(a);else if(i.isLight)j.pushLight(i),i.castShadow&&j.pushShadow(i);else if(i.isSprite){if(!i.frustumCulled||Re.intersectsSprite(i)){o&&We.setFromMatrixPosition(i.matrixWorld).applyMatrix4($e);const a=st.update(i),u=i.material;u.visible&&U.push(i,a,u,s,We.z,null)}}else if(i.isImmediateRenderObject)o&&We.setFromMatrixPosition(i.matrixWorld).applyMatrix4($e),U.push(i,null,i.material,s,We.z,null);else if((i.isMesh||i.isLine||i.isPoints)&&(i.isSkinnedMesh&&i.skeleton.frame!==et.render.frame&&(i.skeleton.update(),i.skeleton.frame=et.render.frame),!i.frustumCulled||Re.intersectsObject(i))){o&&We.setFromMatrixPosition(i.matrixWorld).applyMatrix4($e);const a=st.update(i),u=i.material;if(Array.isArray(u)){const o=a.groups;for(let _=0,x=o.length;_<x;_++){const x=o[_],w=u[x.materialIndex];w&&w.visible&&U.push(i,a,w,s,We.z,x)}}else u.visible&&U.push(i,a,u,s,We.z,null)}const u=i.children;for(let _=0,x=u.length;_<x;_++)projectObject(u[_],a,s,o)}function renderObjects(i,a,s){const o=!0===a.isScene?a.overrideMaterial:null;for(let u=0,_=i.length;u<_;u++){const _=i[u],x=_.object,w=_.geometry,C=null===o?_.material:o,L=_.group;if(s.isArrayCamera){const i=s.cameras;for(let s=0,o=i.length;s<o;s++){const o=i[s];x.layers.test(o.layers)&&(Ye.viewport(de.copy(o.viewport)),j.setupLightsView(o),renderObject(x,a,o,w,C,L))}}else renderObject(x,a,s,w,C,L)}}function renderObject(i,a,s,o,u,_){if(i.onBeforeRender(z,a,s,o,u,_),i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld),i.normalMatrix.getNormalMatrix(i.modelViewMatrix),i.isImmediateRenderObject){const o=setProgram(s,a,u,i);Ye.setMaterial(u),yt.reset(),renderObjectImmediate(i,o)}else z.renderBufferDirect(s,a,o,u,i,_);i.onAfterRender(z,a,s,o,u,_)}function initMaterial(i,a,s){!0!==a.isScene&&(a=qe);const o=tt.get(i),u=j.state.lights,_=j.state.shadowsArray,x=u.state.version,w=ot.getParameters(i,u.state,_,a,s),C=ot.getProgramCacheKey(w);let L=o.program,B=!0;if(o.environment=i.isMeshStandardMaterial?a.environment:null,o.fog=a.fog,o.envMap=it.get(i.envMap||o.environment),void 0===L)i.addEventListener("dispose",onMaterialDispose);else if(L.cacheKey!==C)releaseMaterialProgramReference(i);else if(o.lightsStateVersion!==x)B=!1;else{if(void 0!==w.shaderID)return;B=!1}B&&(w.uniforms=ot.getUniforms(i),i.onBeforeCompile(w,z),L=ot.acquireProgram(w,C),o.program=L,o.uniforms=w.uniforms,o.outputEncoding=w.outputEncoding);const U=o.uniforms;(i.isShaderMaterial||i.isRawShaderMaterial)&&!0!==i.clipping||(o.numClippingPlanes=dt.numPlanes,o.numIntersection=dt.numIntersection,U.clippingPlanes=dt.uniform),o.needsLights=materialNeedsLights(i),o.lightsStateVersion=x,o.needsLights&&(U.ambientLightColor.value=u.state.ambient,U.lightProbe.value=u.state.probe,U.directionalLights.value=u.state.directional,U.directionalLightShadows.value=u.state.directionalShadow,U.spotLights.value=u.state.spot,U.spotLightShadows.value=u.state.spotShadow,U.rectAreaLights.value=u.state.rectArea,U.ltc_1.value=u.state.rectAreaLTC1,U.ltc_2.value=u.state.rectAreaLTC2,U.pointLights.value=u.state.point,U.pointLightShadows.value=u.state.pointShadow,U.hemisphereLights.value=u.state.hemi,U.directionalShadowMap.value=u.state.directionalShadowMap,U.directionalShadowMatrix.value=u.state.directionalShadowMatrix,U.spotShadowMap.value=u.state.spotShadowMap,U.spotShadowMatrix.value=u.state.spotShadowMatrix,U.pointShadowMap.value=u.state.pointShadowMap,U.pointShadowMatrix.value=u.state.pointShadowMatrix);const V=o.program.getUniforms(),$=WebGLUniforms.seqWithValue(V.seq,U);o.uniformsList=$}function setProgram(i,a,s,o){!0!==a.isScene&&(a=qe),nt.resetTextureUnits();const u=a.fog,_=s.isMeshStandardMaterial?a.environment:null,x=null===ie?z.outputEncoding:ie.texture.encoding,w=it.get(s.envMap||_),C=tt.get(s),L=j.state.lights;if(!0===ze&&(!0===He||i!==ce)){const a=i===ce&&s.id===le;dt.setState(s,i,a)}s.version===C.__version?s.fog&&C.fog!==u||C.environment!==_||C.needsLights&&C.lightsStateVersion!==L.state.version?initMaterial(s,a,o):void 0===C.numClippingPlanes||C.numClippingPlanes===dt.numPlanes&&C.numIntersection===dt.numIntersection?(C.outputEncoding!==x||C.envMap!==w)&&initMaterial(s,a,o):initMaterial(s,a,o):(initMaterial(s,a,o),C.__version=s.version);let B=!1,U=!1,V=!1;const $=C.program,Y=$.getUniforms(),Z=C.uniforms;if(Ye.useProgram($.program)&&(B=!0,U=!0,V=!0),s.id!==le&&(le=s.id,U=!0),B||ce!==i){if(Y.setValue(vt,"projectionMatrix",i.projectionMatrix),Qe.logarithmicDepthBuffer&&Y.setValue(vt,"logDepthBufFC",2/(Math.log(i.far+1)/Math.LN2)),ce!==i&&(ce=i,U=!0,V=!0),s.isShaderMaterial||s.isMeshPhongMaterial||s.isMeshToonMaterial||s.isMeshStandardMaterial||s.envMap){const a=Y.map.cameraPosition;void 0!==a&&a.setValue(vt,We.setFromMatrixPosition(i.matrixWorld))}(s.isMeshPhongMaterial||s.isMeshToonMaterial||s.isMeshLambertMaterial||s.isMeshBasicMaterial||s.isMeshStandardMaterial||s.isShaderMaterial)&&Y.setValue(vt,"isOrthographic",!0===i.isOrthographicCamera),(s.isMeshPhongMaterial||s.isMeshToonMaterial||s.isMeshLambertMaterial||s.isMeshBasicMaterial||s.isMeshStandardMaterial||s.isShaderMaterial||s.isShadowMaterial||s.skinning)&&Y.setValue(vt,"viewMatrix",i.matrixWorldInverse)}if(s.skinning){Y.setOptional(vt,o,"bindMatrix"),Y.setOptional(vt,o,"bindMatrixInverse");const i=o.skeleton;if(i){const a=i.bones;if(Qe.floatVertexTextures){if(null===i.boneTexture){let s=Math.sqrt(4*a.length);s=br.ceilPowerOfTwo(s),s=Math.max(s,4);const o=new Float32Array(s*s*4);o.set(i.boneMatrices);const u=new DataTexture(o,s,s,Yt,zt);i.boneMatrices=o,i.boneTexture=u,i.boneTextureSize=s}Y.setValue(vt,"boneTexture",i.boneTexture,nt),Y.setValue(vt,"boneTextureSize",i.boneTextureSize)}else Y.setOptional(vt,i,"boneMatrices")}}return(U||C.receiveShadow!==o.receiveShadow)&&(C.receiveShadow=o.receiveShadow,Y.setValue(vt,"receiveShadow",o.receiveShadow)),U&&(Y.setValue(vt,"toneMappingExposure",z.toneMappingExposure),C.needsLights&&markUniformsLightsNeedsUpdate(Z,V),u&&s.fog&&lt.refreshFogUniforms(Z,u),lt.refreshMaterialUniforms(Z,s,be,ye),WebGLUniforms.upload(vt,C.uniformsList,Z,nt)),s.isShaderMaterial&&!0===s.uniformsNeedUpdate&&(WebGLUniforms.upload(vt,C.uniformsList,Z,nt),s.uniformsNeedUpdate=!1),s.isSpriteMaterial&&Y.setValue(vt,"center",o.center),Y.setValue(vt,"modelViewMatrix",o.modelViewMatrix),Y.setValue(vt,"normalMatrix",o.normalMatrix),Y.setValue(vt,"modelMatrix",o.matrixWorld),$}function markUniformsLightsNeedsUpdate(i,a){i.ambientLightColor.needsUpdate=a,i.lightProbe.needsUpdate=a,i.directionalLights.needsUpdate=a,i.directionalLightShadows.needsUpdate=a,i.pointLights.needsUpdate=a,i.pointLightShadows.needsUpdate=a,i.spotLights.needsUpdate=a,i.spotLightShadows.needsUpdate=a,i.rectAreaLights.needsUpdate=a,i.hemisphereLights.needsUpdate=a}function materialNeedsLights(i){return i.isMeshLambertMaterial||i.isMeshToonMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isShadowMaterial||i.isShaderMaterial&&!0===i.lights}xt.setAnimationLoop(onAnimationFrame),"undefined"!=typeof window&&xt.setContext(window),this.setAnimationLoop=function(i){St=i,bt.setAnimationLoop(i),null===i?xt.stop():xt.start()},this.render=function(i,a){let s,o;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),s=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),o=arguments[3]),void 0!==a&&!0!==a.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===$)return;yt.resetDefaultState(),le=-1,ce=null,!0===i.autoUpdate&&i.updateMatrixWorld(),null===a.parent&&a.updateMatrixWorld(),!0===bt.enabled&&!0===bt.isPresenting&&(a=bt.getCamera(a)),!0===i.isScene&&i.onBeforeRender(z,i,a,s||ie),j=ut.get(i,V.length),j.init(),V.push(j),$e.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Re.setFromProjectionMatrix($e),He=this.localClippingEnabled,ze=dt.init(this.clippingPlanes,He,a),U=ct.get(i,a),U.init(),projectObject(i,a,0,z.sortObjects),U.finish(),!0===z.sortObjects&&U.sort(Te,Se),!0===ze&&dt.beginShadows();const u=j.state.shadowsArray;Tt.render(u,i,a),j.setupLights(),j.setupLightsView(a),!0===ze&&dt.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==s&&this.setRenderTarget(s),ht.render(U,i,a,o);const _=U.opaque,x=U.transparent;_.length>0&&renderObjects(_,i,a),x.length>0&&renderObjects(x,i,a),!0===i.isScene&&i.onAfterRender(z,i,a),null!==ie&&(nt.updateRenderTargetMipmap(ie),nt.updateMultisampleRenderTarget(ie)),Ye.buffers.depth.setTest(!0),Ye.buffers.depth.setMask(!0),Ye.buffers.color.setMask(!0),Ye.setPolygonOffset(!1),V.pop(),j=V.length>0?V[V.length-1]:null,U=null},__name(projectObject,"projectObject"),__name(renderObjects,"renderObjects"),__name(renderObject,"renderObject"),__name(initMaterial,"initMaterial"),__name(setProgram,"setProgram"),__name(markUniformsLightsNeedsUpdate,"markUniformsLightsNeedsUpdate"),__name(materialNeedsLights,"materialNeedsLights"),this.setFramebuffer=function(i){Y!==i&&null===ie&&vt.bindFramebuffer(36160,i),Y=i},this.getActiveCubeFace=function(){return Z},this.getActiveMipmapLevel=function(){return ee},this.getRenderList=function(){return U},this.setRenderList=function(i){U=i},this.getRenderTarget=function(){return ie},this.setRenderTarget=function(i,a=0,s=0){ie=i,Z=a,ee=s,i&&void 0===tt.get(i).__webglFramebuffer&&nt.setupRenderTarget(i);let o=Y,u=!1;if(i){const s=tt.get(i).__webglFramebuffer;i.isWebGLCubeRenderTarget?(o=s[a],u=!0):o=i.isWebGLMultisampleRenderTarget?tt.get(i).__webglMultisampledFramebuffer:s,de.copy(i.viewport),pe.copy(i.scissor),fe=i.scissorTest}else de.copy(xe).multiplyScalar(be).floor(),pe.copy(we).multiplyScalar(be).floor(),fe=Pe;if(ae!==o&&(vt.bindFramebuffer(36160,o),ae=o),Ye.viewport(de),Ye.scissor(pe),Ye.setScissorTest(fe),u){const o=tt.get(i.texture);vt.framebufferTexture2D(36160,36064,34069+a,o.__webglTexture,s)}},this.readRenderTargetPixels=function(i,a,s,o,u,_,x){if(!i||!i.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let w=tt.get(i).__webglFramebuffer;if(i.isWebGLCubeRenderTarget&&void 0!==x&&(w=w[x]),w){let x=!1;w!==ae&&(vt.bindFramebuffer(36160,w),x=!0);try{const x=i.texture,w=x.format,C=x.type;if(w!==Yt&&_t.convert(w)!==vt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const L=C===Ht&&(Xe.has("EXT_color_buffer_half_float")||Qe.isWebGL2&&Xe.has("EXT_color_buffer_float"));if(!(C===Nt||_t.convert(C)===vt.getParameter(35738)||C===zt&&(Qe.isWebGL2||Xe.has("OES_texture_float")||Xe.has("WEBGL_color_buffer_float"))||L))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===vt.checkFramebufferStatus(36160)?a>=0&&a<=i.width-o&&s>=0&&s<=i.height-u&&vt.readPixels(a,s,o,u,_t.convert(w),_t.convert(C),_):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{x&&vt.bindFramebuffer(36160,ae)}}},this.copyFramebufferToTexture=function(i,a,s=0){const o=Math.pow(2,-s),u=Math.floor(a.image.width*o),_=Math.floor(a.image.height*o),x=_t.convert(a.format);nt.setTexture2D(a,0),vt.copyTexImage2D(3553,s,x,i.x,i.y,u,_,0),Ye.unbindTexture()},this.copyTextureToTexture=function(i,a,s,o=0){const u=a.image.width,_=a.image.height,x=_t.convert(s.format),w=_t.convert(s.type);nt.setTexture2D(s,0),vt.pixelStorei(37440,s.flipY),vt.pixelStorei(37441,s.premultiplyAlpha),vt.pixelStorei(3317,s.unpackAlignment),a.isDataTexture?vt.texSubImage2D(3553,o,i.x,i.y,u,_,x,w,a.image.data):a.isCompressedTexture?vt.compressedTexSubImage2D(3553,o,i.x,i.y,a.mipmaps[0].width,a.mipmaps[0].height,x,a.mipmaps[0].data):vt.texSubImage2D(3553,o,i.x,i.y,x,w,a.image),0===o&&s.generateMipmaps&&vt.generateMipmap(3553),Ye.unbindTexture()},this.initTexture=function(i){nt.setTexture2D(i,0),Ye.unbindTexture()},this.resetState=function(){Ye.reset(),yt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function WebGL1Renderer(i){WebGLRenderer.call(this,i)}__name(WebGLShadowMap,"WebGLShadowMap"),__name(WebGLState,"WebGLState"),__name(WebGLTextures,"WebGLTextures"),__name(WebGLUtils,"WebGLUtils"),__name(ArrayCamera,"ArrayCamera"),ArrayCamera.prototype=_extends2(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0}),__name(Group,"Group"),Group.prototype=_extends2(Object.create(Object3D.prototype),{constructor:Group,isGroup:!0}),__name(WebXRController,"WebXRController"),_extends2(WebXRController.prototype,{constructor:WebXRController,getHandSpace:/* @__PURE__ */__name(function(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},"getHandSpace"),getTargetRaySpace:/* @__PURE__ */__name(function(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},"getTargetRaySpace"),getGripSpace:/* @__PURE__ */__name(function(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},"getGripSpace"),dispatchEvent:/* @__PURE__ */__name(function(i){return null!==this._targetRay&&this._targetRay.dispatchEvent(i),null!==this._grip&&this._grip.dispatchEvent(i),null!==this._hand&&this._hand.dispatchEvent(i),this},"dispatchEvent"),disconnect:/* @__PURE__ */__name(function(i){return this.dispatchEvent({type:"disconnected",data:i}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},"disconnect"),update:/* @__PURE__ */__name(function(i,a,s){let o=null,u=null,_=null;const x=this._targetRay,w=this._grip,C=this._hand;if(i&&"visible-blurred"!==a.session.visibilityState)if(C&&i.hand){_=!0;for(const _ of i.hand.values()){const i=a.getJointPose(_,s);if(void 0===C.joints[_.jointName]){const i=new Group;i.matrixAutoUpdate=!1,i.visible=!1,C.joints[_.jointName]=i,C.add(i)}const o=C.joints[_.jointName];null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.jointRadius=i.radius),o.visible=null!==i}const o=C.joints["index-finger-tip"],u=C.joints["thumb-tip"],x=o.position.distanceTo(u.position),w=.02,L=.005;C.inputState.pinching&&x>w+L?(C.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:i.handedness,target:this})):!C.inputState.pinching&&x<=w-L&&(C.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:i.handedness,target:this}))}else null!==x&&(o=a.getPose(i.targetRaySpace,s),null!==o&&(x.matrix.fromArray(o.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale))),null!==w&&i.gripSpace&&(u=a.getPose(i.gripSpace,s),null!==u&&(w.matrix.fromArray(u.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale)));return null!==x&&(x.visible=null!==o),null!==w&&(w.visible=null!==u),null!==C&&(C.visible=null!==_),this},"update")}),__name(WebXRManager,"WebXRManager"),_extends2(WebXRManager.prototype,EventDispatcher.prototype),__name(WebGLMaterials,"WebGLMaterials"),__name(createCanvasElement,"createCanvasElement"),__name(WebGLRenderer,"WebGLRenderer"),__name(WebGL1Renderer,"WebGL1Renderer"),WebGL1Renderer.prototype=_extends2(Object.create(WebGLRenderer.prototype),{constructor:WebGL1Renderer,isWebGL1Renderer:!0});const Vo=class _Scene extends Object3D{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(i,a){return super.copy(i,a),null!==i.background&&(this.background=i.background.clone()),null!==i.environment&&(this.environment=i.environment.clone()),null!==i.fog&&(this.fog=i.fog.clone()),null!==i.overrideMaterial&&(this.overrideMaterial=i.overrideMaterial.clone()),this.autoUpdate=i.autoUpdate,this.matrixAutoUpdate=i.matrixAutoUpdate,this}toJSON(i){const a=super.toJSON(i);return null!==this.background&&(a.object.background=this.background.toJSON(i)),null!==this.environment&&(a.object.environment=this.environment.toJSON(i)),null!==this.fog&&(a.object.fog=this.fog.toJSON()),a}};__name(Vo,"Scene");let zo=Vo;function InterleavedBuffer(i,a){this.array=i,this.stride=a,this.count=void 0!==i?i.length/a:0,this.usage=fr,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=br.generateUUID()}__name(InterleavedBuffer,"InterleavedBuffer"),Object.defineProperty(InterleavedBuffer.prototype,"needsUpdate",{set:/* @__PURE__ */__name(function(i){!0===i&&this.version++},"set")}),_extends2(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,onUploadCallback:/* @__PURE__ */__name(function(){},"onUploadCallback"),setUsage:/* @__PURE__ */__name(function(i){return this.usage=i,this},"setUsage"),copy:/* @__PURE__ */__name(function(i){return this.array=new i.array.constructor(i.array),this.count=i.count,this.stride=i.stride,this.usage=i.usage,this},"copy"),copyAt:/* @__PURE__ */__name(function(i,a,s){i*=this.stride,s*=a.stride;for(let o=0,u=this.stride;o<u;o++)this.array[i+o]=a.array[s+o];return this},"copyAt"),set:/* @__PURE__ */__name(function(i,a=0){return this.array.set(i,a),this},"set"),clone:/* @__PURE__ */__name(function(i){void 0===i.arrayBuffers&&(i.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=br.generateUUID()),void 0===i.arrayBuffers[this.array.buffer._uuid]&&(i.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const a=new InterleavedBuffer(new this.array.constructor(i.arrayBuffers[this.array.buffer._uuid]),this.stride);return a.setUsage(this.usage),a},"clone"),onUpload:/* @__PURE__ */__name(function(i){return this.onUploadCallback=i,this},"onUpload"),toJSON:/* @__PURE__ */__name(function(i){return void 0===i.arrayBuffers&&(i.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=br.generateUUID()),void 0===i.arrayBuffers[this.array.buffer._uuid]&&(i.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}},"toJSON")});const Ho=new Or;function InterleavedBufferAttribute(i,a,s,o){this.name="",this.data=i,this.itemSize=a,this.offset=s,this.normalized=!0===o}function SpriteMaterial(i){Material.call(this),this.type="SpriteMaterial",this.color=new Ms(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(i)}let $o;__name(InterleavedBufferAttribute,"InterleavedBufferAttribute"),Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:/* @__PURE__ */__name(function(){return this.data.count},"get")},array:{get:/* @__PURE__ */__name(function(){return this.data.array},"get")},needsUpdate:{set:/* @__PURE__ */__name(function(i){this.data.needsUpdate=i},"set")}}),_extends2(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:/* @__PURE__ */__name(function(i){for(let a=0,s=this.data.count;a<s;a++)Ho.x=this.getX(a),Ho.y=this.getY(a),Ho.z=this.getZ(a),Ho.applyMatrix4(i),this.setXYZ(a,Ho.x,Ho.y,Ho.z);return this},"applyMatrix4"),setX:/* @__PURE__ */__name(function(i,a){return this.data.array[i*this.data.stride+this.offset]=a,this},"setX"),setY:/* @__PURE__ */__name(function(i,a){return this.data.array[i*this.data.stride+this.offset+1]=a,this},"setY"),setZ:/* @__PURE__ */__name(function(i,a){return this.data.array[i*this.data.stride+this.offset+2]=a,this},"setZ"),setW:/* @__PURE__ */__name(function(i,a){return this.data.array[i*this.data.stride+this.offset+3]=a,this},"setW"),getX:/* @__PURE__ */__name(function(i){return this.data.array[i*this.data.stride+this.offset]},"getX"),getY:/* @__PURE__ */__name(function(i){return this.data.array[i*this.data.stride+this.offset+1]},"getY"),getZ:/* @__PURE__ */__name(function(i){return this.data.array[i*this.data.stride+this.offset+2]},"getZ"),getW:/* @__PURE__ */__name(function(i){return this.data.array[i*this.data.stride+this.offset+3]},"getW"),setXY:/* @__PURE__ */__name(function(i,a,s){return i=i*this.data.stride+this.offset,this.data.array[i+0]=a,this.data.array[i+1]=s,this},"setXY"),setXYZ:/* @__PURE__ */__name(function(i,a,s,o){return i=i*this.data.stride+this.offset,this.data.array[i+0]=a,this.data.array[i+1]=s,this.data.array[i+2]=o,this},"setXYZ"),setXYZW:/* @__PURE__ */__name(function(i,a,s,o,u){return i=i*this.data.stride+this.offset,this.data.array[i+0]=a,this.data.array[i+1]=s,this.data.array[i+2]=o,this.data.array[i+3]=u,this},"setXYZW"),clone:/* @__PURE__ */__name(function(i){if(void 0===i){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const i=[];for(let a=0;a<this.count;a++){const s=a*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)i.push(this.data.array[s+a])}return new BufferAttribute(new this.array.constructor(i),this.itemSize,this.normalized)}return void 0===i.interleavedBuffers&&(i.interleavedBuffers={}),void 0===i.interleavedBuffers[this.data.uuid]&&(i.interleavedBuffers[this.data.uuid]=this.data.clone(i)),new InterleavedBufferAttribute(i.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},"clone"),toJSON:/* @__PURE__ */__name(function(i){if(void 0===i){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const i=[];for(let a=0;a<this.count;a++){const s=a*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)i.push(this.data.array[s+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}return void 0===i.interleavedBuffers&&(i.interleavedBuffers={}),void 0===i.interleavedBuffers[this.data.uuid]&&(i.interleavedBuffers[this.data.uuid]=this.data.toJSON(i)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}},"toJSON")}),__name(SpriteMaterial,"SpriteMaterial"),SpriteMaterial.prototype=Object.create(Material.prototype),SpriteMaterial.prototype.constructor=SpriteMaterial,SpriteMaterial.prototype.isSpriteMaterial=!0,SpriteMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.color.copy(i.color),this.map=i.map,this.alphaMap=i.alphaMap,this.rotation=i.rotation,this.sizeAttenuation=i.sizeAttenuation,this};const Go=new Or,Wo=new Or,qo=new Or,Xo=new Sr,Qo=new Sr,Ko=new ya,Yo=new Or,Jo=new Or,Zo=new Or,tl=new Sr,sl=new Sr,ul=new Sr;function Sprite(i){if(Object3D.call(this),this.type="Sprite",void 0===$o){$o=new BufferGeometry;const i=new InterleavedBuffer(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);$o.setIndex([0,1,2,0,2,3]),$o.setAttribute("position",new InterleavedBufferAttribute(i,3,0,!1)),$o.setAttribute("uv",new InterleavedBufferAttribute(i,2,3,!1))}this.geometry=$o,this.material=void 0!==i?i:new SpriteMaterial,this.center=new Sr(.5,.5)}function transformVertex(i,a,s,o,u,_){Xo.subVectors(i,s).addScalar(.5).multiply(o),void 0!==u?(Qo.x=_*Xo.x-u*Xo.y,Qo.y=u*Xo.x+_*Xo.y):Qo.copy(Xo),i.copy(a),i.x+=Qo.x,i.y+=Qo.y,i.applyMatrix4(Ko)}__name(Sprite,"Sprite"),Sprite.prototype=_extends2(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:/* @__PURE__ */__name(function(i,a){null===i.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wo.setFromMatrixScale(this.matrixWorld),Ko.copy(i.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(i.camera.matrixWorldInverse,this.matrixWorld),qo.setFromMatrixPosition(this.modelViewMatrix),i.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Wo.multiplyScalar(-qo.z);const s=this.material.rotation;let o,u;0!==s&&(u=Math.cos(s),o=Math.sin(s));const _=this.center;transformVertex(Yo.set(-.5,-.5,0),qo,_,Wo,o,u),transformVertex(Jo.set(.5,-.5,0),qo,_,Wo,o,u),transformVertex(Zo.set(.5,.5,0),qo,_,Wo,o,u),tl.set(0,0),sl.set(1,0),ul.set(1,1);let x=i.ray.intersectTriangle(Yo,Jo,Zo,!1,Go);if(null===x&&(transformVertex(Jo.set(-.5,.5,0),qo,_,Wo,o,u),sl.set(0,1),x=i.ray.intersectTriangle(Yo,Zo,Jo,!1,Go),null===x))return;const w=i.ray.origin.distanceTo(Go);w<i.near||w>i.far||a.push({distance:w,point:Go.clone(),uv:xs.getUV(Go,Yo,Jo,Zo,tl,sl,ul,new Sr),face:null,object:this})},"raycast"),copy:/* @__PURE__ */__name(function(i){return Object3D.prototype.copy.call(this,i),void 0!==i.center&&this.center.copy(i.center),this.material=i.material,this},"copy")}),__name(transformVertex,"transformVertex");const _l=new Or,yl=new Or;function LOD(){Object3D.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}__name(LOD,"LOD"),LOD.prototype=_extends2(Object.create(Object3D.prototype),{constructor:LOD,isLOD:!0,copy:/* @__PURE__ */__name(function(i){Object3D.prototype.copy.call(this,i,!1);const a=i.levels;for(let s=0,o=a.length;s<o;s++){const i=a[s];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=i.autoUpdate,this},"copy"),addLevel:/* @__PURE__ */__name(function(i,a=0){a=Math.abs(a);const s=this.levels;let o;for(o=0;o<s.length&&!(a<s[o].distance);o++);return s.splice(o,0,{distance:a,object:i}),this.add(i),this},"addLevel"),getCurrentLevel:/* @__PURE__ */__name(function(){return this._currentLevel},"getCurrentLevel"),getObjectForDistance:/* @__PURE__ */__name(function(i){const a=this.levels;if(a.length>0){let s,o;for(s=1,o=a.length;s<o&&!(i<a[s].distance);s++);return a[s-1].object}return null},"getObjectForDistance"),raycast:/* @__PURE__ */__name(function(i,a){if(this.levels.length>0){_l.setFromMatrixPosition(this.matrixWorld);const s=i.ray.origin.distanceTo(_l);this.getObjectForDistance(s).raycast(i,a)}},"raycast"),update:/* @__PURE__ */__name(function(i){const a=this.levels;if(a.length>1){_l.setFromMatrixPosition(i.matrixWorld),yl.setFromMatrixPosition(this.matrixWorld);const s=_l.distanceTo(yl)/i.zoom;let o,u;for(a[0].object.visible=!0,o=1,u=a.length;o<u&&s>=a[o].distance;o++)a[o-1].object.visible=!1,a[o].object.visible=!0;for(this._currentLevel=o-1;o<u;o++)a[o].object.visible=!1}},"update"),toJSON:/* @__PURE__ */__name(function(i){const a=Object3D.prototype.toJSON.call(this,i);!1===this.autoUpdate&&(a.object.autoUpdate=!1),a.object.levels=[];const s=this.levels;for(let o=0,u=s.length;o<u;o++){const i=s[o];a.object.levels.push({object:i.object.uuid,distance:i.distance})}return a},"toJSON")});const vl=new Or,Tl=new kr,Sl=new kr,xl=new Or,wl=new ya;function SkinnedMesh(i,a){i&&i.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Mesh.call(this,i,a),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ya,this.bindMatrixInverse=new ya}function Bone(){Object3D.call(this),this.type="Bone"}__name(SkinnedMesh,"SkinnedMesh"),SkinnedMesh.prototype=_extends2(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,copy:/* @__PURE__ */__name(function(i){return Mesh.prototype.copy.call(this,i),this.bindMode=i.bindMode,this.bindMatrix.copy(i.bindMatrix),this.bindMatrixInverse.copy(i.bindMatrixInverse),this.skeleton=i.skeleton,this},"copy"),bind:/* @__PURE__ */__name(function(i,a){this.skeleton=i,void 0===a&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),a=this.matrixWorld),this.bindMatrix.copy(a),this.bindMatrixInverse.copy(a).invert()},"bind"),pose:/* @__PURE__ */__name(function(){this.skeleton.pose()},"pose"),normalizeSkinWeights:/* @__PURE__ */__name(function(){const i=new kr,a=this.geometry.attributes.skinWeight;for(let s=0,o=a.count;s<o;s++){i.x=a.getX(s),i.y=a.getY(s),i.z=a.getZ(s),i.w=a.getW(s);const o=1/i.manhattanLength();o!==1/0?i.multiplyScalar(o):i.set(1,0,0,0),a.setXYZW(s,i.x,i.y,i.z,i.w)}},"normalizeSkinWeights"),updateMatrixWorld:/* @__PURE__ */__name(function(i){Mesh.prototype.updateMatrixWorld.call(this,i),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},"updateMatrixWorld"),boneTransform:/* @__PURE__ */__name(function(i,a){const s=this.skeleton,o=this.geometry;Tl.fromBufferAttribute(o.attributes.skinIndex,i),Sl.fromBufferAttribute(o.attributes.skinWeight,i),vl.fromBufferAttribute(o.attributes.position,i).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let u=0;u<4;u++){const i=Sl.getComponent(u);if(0!==i){const o=Tl.getComponent(u);wl.multiplyMatrices(s.bones[o].matrixWorld,s.boneInverses[o]),a.addScaledVector(xl.copy(vl).applyMatrix4(wl),i)}}return a.applyMatrix4(this.bindMatrixInverse)},"boneTransform")}),__name(Bone,"Bone"),Bone.prototype=_extends2(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0});const Al=new ya,Cl=new ya;function Skeleton(i=[],a=[]){this.uuid=br.generateUUID(),this.bones=i.slice(0),this.boneInverses=a,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}__name(Skeleton,"Skeleton"),_extends2(Skeleton.prototype,{init:/* @__PURE__ */__name(function(){const i=this.bones,a=this.boneInverses;if(this.boneMatrices=new Float32Array(16*i.length),0===a.length)this.calculateInverses();else if(i.length!==a.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new ya)}},"init"),calculateInverses:/* @__PURE__ */__name(function(){this.boneInverses.length=0;for(let i=0,a=this.bones.length;i<a;i++){const a=new ya;this.bones[i]&&a.copy(this.bones[i].matrixWorld).invert(),this.boneInverses.push(a)}},"calculateInverses"),pose:/* @__PURE__ */__name(function(){for(let i=0,a=this.bones.length;i<a;i++){const a=this.bones[i];a&&a.matrixWorld.copy(this.boneInverses[i]).invert()}for(let i=0,a=this.bones.length;i<a;i++){const a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},"pose"),update:/* @__PURE__ */__name(function(){const i=this.bones,a=this.boneInverses,s=this.boneMatrices,o=this.boneTexture;for(let u=0,_=i.length;u<_;u++){const o=i[u]?i[u].matrixWorld:Cl;Al.multiplyMatrices(o,a[u]),Al.toArray(s,16*u)}null!==o&&(o.needsUpdate=!0)},"update"),clone:/* @__PURE__ */__name(function(){return new Skeleton(this.bones,this.boneInverses)},"clone"),getBoneByName:/* @__PURE__ */__name(function(i){for(let a=0,s=this.bones.length;a<s;a++){const s=this.bones[a];if(s.name===i)return s}},"getBoneByName"),dispose:/* @__PURE__ */__name(function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},"dispose"),fromJSON:/* @__PURE__ */__name(function(i,a){this.uuid=i.uuid;for(let s=0,o=i.bones.length;s<o;s++){const o=i.bones[s];let u=a[o];void 0===u&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),u=new Bone),this.bones.push(u),this.boneInverses.push((new ya).fromArray(i.boneInverses[s]))}return this.init(),this},"fromJSON"),toJSON:/* @__PURE__ */__name(function(){const i={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};i.uuid=this.uuid;const a=this.bones,s=this.boneInverses;for(let o=0,u=a.length;o<u;o++){const u=a[o];i.bones.push(u.uuid);const _=s[o];i.boneInverses.push(_.toArray())}return i},"toJSON")});const El=new ya,Ml=new ya,kl=[],Pl=new Mesh;function InstancedMesh(i,a,s){Mesh.call(this,i,a),this.instanceMatrix=new BufferAttribute(new Float32Array(16*s),16),this.instanceColor=null,this.count=s,this.frustumCulled=!1}function LineBasicMaterial(i){Material.call(this),this.type="LineBasicMaterial",this.color=new Ms(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(i)}__name(InstancedMesh,"InstancedMesh"),InstancedMesh.prototype=_extends2(Object.create(Mesh.prototype),{constructor:InstancedMesh,isInstancedMesh:!0,copy:/* @__PURE__ */__name(function(i){return Mesh.prototype.copy.call(this,i),this.instanceMatrix.copy(i.instanceMatrix),null!==i.instanceColor&&(this.instanceColor=i.instanceColor.clone()),this.count=i.count,this},"copy"),getColorAt:/* @__PURE__ */__name(function(i,a){a.fromArray(this.instanceColor.array,3*i)},"getColorAt"),getMatrixAt:/* @__PURE__ */__name(function(i,a){a.fromArray(this.instanceMatrix.array,16*i)},"getMatrixAt"),raycast:/* @__PURE__ */__name(function(i,a){const s=this.matrixWorld,o=this.count;if(Pl.geometry=this.geometry,Pl.material=this.material,void 0!==Pl.material)for(let u=0;u<o;u++){this.getMatrixAt(u,El),Ml.multiplyMatrices(s,El),Pl.matrixWorld=Ml,Pl.raycast(i,kl);for(let i=0,s=kl.length;i<s;i++){const s=kl[i];s.instanceId=u,s.object=this,a.push(s)}kl.length=0}},"raycast"),setColorAt:/* @__PURE__ */__name(function(i,a){null===this.instanceColor&&(this.instanceColor=new BufferAttribute(new Float32Array(3*this.count),3)),a.toArray(this.instanceColor.array,3*i)},"setColorAt"),setMatrixAt:/* @__PURE__ */__name(function(i,a){a.toArray(this.instanceMatrix.array,16*i)},"setMatrixAt"),updateMorphTargets:/* @__PURE__ */__name(function(){},"updateMorphTargets"),dispose:/* @__PURE__ */__name(function(){this.dispatchEvent({type:"dispose"})},"dispose")}),__name(LineBasicMaterial,"LineBasicMaterial"),LineBasicMaterial.prototype=Object.create(Material.prototype),LineBasicMaterial.prototype.constructor=LineBasicMaterial,LineBasicMaterial.prototype.isLineBasicMaterial=!0,LineBasicMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.color.copy(i.color),this.linewidth=i.linewidth,this.linecap=i.linecap,this.linejoin=i.linejoin,this.morphTargets=i.morphTargets,this};const Il=new Or,Ll=new Or,Dl=new ya,Rl=new ga,Ol=new na;function Line(i=new BufferGeometry,a=new LineBasicMaterial){Object3D.call(this),this.type="Line",this.geometry=i,this.material=a,this.updateMorphTargets()}__name(Line,"Line"),Line.prototype=_extends2(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,copy:/* @__PURE__ */__name(function(i){return Object3D.prototype.copy.call(this,i),this.material=i.material,this.geometry=i.geometry,this},"copy"),computeLineDistances:/* @__PURE__ */__name(function(){const i=this.geometry;if(i.isBufferGeometry)if(null===i.index){const a=i.attributes.position,s=[0];for(let i=1,o=a.count;i<o;i++)Il.fromBufferAttribute(a,i-1),Ll.fromBufferAttribute(a,i),s[i]=s[i-1],s[i]+=Il.distanceTo(Ll);i.setAttribute("lineDistance",new Float32BufferAttribute(s,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else i.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},"computeLineDistances"),raycast:/* @__PURE__ */__name(function(i,a){const s=this.geometry,o=this.matrixWorld,u=i.params.Line.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),Ol.copy(s.boundingSphere),Ol.applyMatrix4(o),Ol.radius+=u,!1===i.ray.intersectsSphere(Ol))return;Dl.copy(o).invert(),Rl.copy(i.ray).applyMatrix4(Dl);const _=u/((this.scale.x+this.scale.y+this.scale.z)/3),x=_*_,w=new Or,C=new Or,L=new Or,B=new Or,U=this.isLineSegments?2:1;if(s.isBufferGeometry){const o=s.index,u=s.attributes.position;if(null!==o){const s=o.array;for(let o=0,_=s.length-1;o<_;o+=U){const _=s[o],U=s[o+1];if(w.fromBufferAttribute(u,_),C.fromBufferAttribute(u,U),Rl.distanceSqToSegment(w,C,B,L)>x)continue;B.applyMatrix4(this.matrixWorld);const j=i.ray.origin.distanceTo(B);j<i.near||j>i.far||a.push({distance:j,point:L.clone().applyMatrix4(this.matrixWorld),index:o,face:null,faceIndex:null,object:this})}}else for(let s=0,_=u.count-1;s<_;s+=U){if(w.fromBufferAttribute(u,s),C.fromBufferAttribute(u,s+1),Rl.distanceSqToSegment(w,C,B,L)>x)continue;B.applyMatrix4(this.matrixWorld);const o=i.ray.origin.distanceTo(B);o<i.near||o>i.far||a.push({distance:o,point:L.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this})}}else s.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},"raycast"),updateMorphTargets:/* @__PURE__ */__name(function(){const i=this.geometry;if(i.isBufferGeometry){const a=i.morphAttributes,s=Object.keys(a);if(s.length>0){const i=a[s[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}else{const a=i.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},"updateMorphTargets")});const Nl=new Or,Bl=new Or;function LineSegments(i,a){Line.call(this,i,a),this.type="LineSegments"}function LineLoop(i,a){Line.call(this,i,a),this.type="LineLoop"}function PointsMaterial(i){Material.call(this),this.type="PointsMaterial",this.color=new Ms(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(i)}__name(LineSegments,"LineSegments"),LineSegments.prototype=_extends2(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0,computeLineDistances:/* @__PURE__ */__name(function(){const i=this.geometry;if(i.isBufferGeometry)if(null===i.index){const a=i.attributes.position,s=[];for(let i=0,o=a.count;i<o;i+=2)Nl.fromBufferAttribute(a,i),Bl.fromBufferAttribute(a,i+1),s[i]=0===i?0:s[i-1],s[i+1]=s[i]+Nl.distanceTo(Bl);i.setAttribute("lineDistance",new Float32BufferAttribute(s,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else i.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},"computeLineDistances")}),__name(LineLoop,"LineLoop"),LineLoop.prototype=_extends2(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0}),__name(PointsMaterial,"PointsMaterial"),PointsMaterial.prototype=Object.create(Material.prototype),PointsMaterial.prototype.constructor=PointsMaterial,PointsMaterial.prototype.isPointsMaterial=!0,PointsMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.color.copy(i.color),this.map=i.map,this.alphaMap=i.alphaMap,this.size=i.size,this.sizeAttenuation=i.sizeAttenuation,this.morphTargets=i.morphTargets,this};const Fl=new ya,Ul=new ga,Vl=new na,zl=new Or;function Points(i=new BufferGeometry,a=new PointsMaterial){Object3D.call(this),this.type="Points",this.geometry=i,this.material=a,this.updateMorphTargets()}function testPoint(i,a,s,o,u,_,x){const w=Ul.distanceSqToPoint(i);if(w<s){const s=new Or;Ul.closestPointToPoint(i,s),s.applyMatrix4(o);const C=u.ray.origin.distanceTo(s);if(C<u.near||C>u.far)return;_.push({distance:C,distanceToRay:Math.sqrt(w),point:s,index:a,face:null,object:x})}}function VideoTexture(i,a,s,o,u,_,x,w,C){Texture.call(this,i,a,s,o,u,_,x,w,C),this.format=void 0!==x?x:Kt,this.minFilter=void 0!==_?_:Dt,this.magFilter=void 0!==u?u:Dt,this.generateMipmaps=!1;const L=this;function updateVideo(){L.needsUpdate=!0,i.requestVideoFrameCallback(updateVideo)}__name(updateVideo,"updateVideo"),"requestVideoFrameCallback"in i&&i.requestVideoFrameCallback(updateVideo)}function CompressedTexture(i,a,s,o,u,_,x,w,C,L,B,U){Texture.call(this,null,_,x,w,C,L,o,u,B,U),this.image={width:a,height:s},this.mipmaps=i,this.flipY=!1,this.generateMipmaps=!1}function CanvasTexture(i,a,s,o,u,_,x,w,C){Texture.call(this,i,a,s,o,u,_,x,w,C),this.needsUpdate=!0}function DepthTexture(i,a,s,o,u,_,x,w,C,L){if((L=void 0!==L?L:en)!==en&&L!==tn)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===s&&L===en&&(s=Ut),void 0===s&&L===tn&&(s=qt),Texture.call(this,null,o,u,_,x,w,L,s,C),this.image={width:i,height:a},this.magFilter=void 0!==x?x:Pt,this.minFilter=void 0!==w?w:Pt,this.flipY=!1,this.generateMipmaps=!1}__name(Points,"Points"),Points.prototype=_extends2(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,copy:/* @__PURE__ */__name(function(i){return Object3D.prototype.copy.call(this,i),this.material=i.material,this.geometry=i.geometry,this},"copy"),raycast:/* @__PURE__ */__name(function(i,a){const s=this.geometry,o=this.matrixWorld,u=i.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),Vl.copy(s.boundingSphere),Vl.applyMatrix4(o),Vl.radius+=u,!1===i.ray.intersectsSphere(Vl))return;Fl.copy(o).invert(),Ul.copy(i.ray).applyMatrix4(Fl);const _=u/((this.scale.x+this.scale.y+this.scale.z)/3),x=_*_;if(s.isBufferGeometry){const u=s.index,_=s.attributes.position;if(null!==u){const s=u.array;for(let u=0,w=s.length;u<w;u++){const w=s[u];zl.fromBufferAttribute(_,w),testPoint(zl,w,x,o,i,a,this)}}else for(let s=0,w=_.count;s<w;s++)zl.fromBufferAttribute(_,s),testPoint(zl,s,x,o,i,a,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},"raycast"),updateMorphTargets:/* @__PURE__ */__name(function(){const i=this.geometry;if(i.isBufferGeometry){const a=i.morphAttributes,s=Object.keys(a);if(s.length>0){const i=a[s[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}else{const a=i.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},"updateMorphTargets")}),__name(testPoint,"testPoint"),__name(VideoTexture,"VideoTexture"),VideoTexture.prototype=_extends2(Object.create(Texture.prototype),{constructor:VideoTexture,clone:/* @__PURE__ */__name(function(){return new this.constructor(this.image).copy(this)},"clone"),isVideoTexture:!0,update:/* @__PURE__ */__name(function(){const i=this.image;0=="requestVideoFrameCallback"in i&&i.readyState>=i.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)},"update")}),__name(CompressedTexture,"CompressedTexture"),CompressedTexture.prototype=Object.create(Texture.prototype),CompressedTexture.prototype.constructor=CompressedTexture,CompressedTexture.prototype.isCompressedTexture=!0,__name(CanvasTexture,"CanvasTexture"),CanvasTexture.prototype=Object.create(Texture.prototype),CanvasTexture.prototype.constructor=CanvasTexture,CanvasTexture.prototype.isCanvasTexture=!0,__name(DepthTexture,"DepthTexture"),DepthTexture.prototype=Object.create(Texture.prototype),DepthTexture.prototype.constructor=DepthTexture,DepthTexture.prototype.isDepthTexture=!0,new Or,new Or,new Or,new xs;const Hl={triangulate:/* @__PURE__ */__name(function(i,a,s){s=s||2;const o=a&&a.length,u=o?a[0]*s:i.length;let _=linkedList(i,0,u,s,!0);const x=[];if(!_||_.next===_.prev)return x;let w,C,L,B,U,j,V;if(o&&(_=eliminateHoles(i,a,_,s)),i.length>80*s){w=L=i[0],C=B=i[1];for(let a=s;a<u;a+=s)U=i[a],j=i[a+1],U<w&&(w=U),j<C&&(C=j),U>L&&(L=U),j>B&&(B=j);V=Math.max(L-w,B-C),V=0!==V?1/V:0}return earcutLinked(_,x,s,w,C,V),x},"triangulate")};function linkedList(i,a,s,o,u){let _,x;if(u===signedArea(i,a,s,o)>0)for(_=a;_<s;_+=o)x=insertNode(_,i[_],i[_+1],x);else for(_=s-o;_>=a;_-=o)x=insertNode(_,i[_],i[_+1],x);return x&&equals(x,x.next)&&(removeNode(x),x=x.next),x}function filterPoints(i,a){if(!i)return i;a||(a=i);let s,o=i;do{if(s=!1,o.steiner||!equals(o,o.next)&&0!==area(o.prev,o,o.next))o=o.next;else{if(removeNode(o),o=a=o.prev,o===o.next)break;s=!0}}while(s||o!==a);return a}function earcutLinked(i,a,s,o,u,_,x){if(!i)return;!x&&_&&indexCurve(i,o,u,_);let w,C,L=i;for(;i.prev!==i.next;)if(w=i.prev,C=i.next,_?isEarHashed(i,o,u,_):isEar(i))a.push(w.i/s),a.push(i.i/s),a.push(C.i/s),removeNode(i),i=C.next,L=C.next;else if((i=C)===L){x?1===x?earcutLinked(i=cureLocalIntersections(filterPoints(i),a,s),a,s,o,u,_,2):2===x&&splitEarcut(i,a,s,o,u,_):earcutLinked(filterPoints(i),a,s,o,u,_,1);break}}function isEar(i){const a=i.prev,s=i,o=i.next;if(area(a,s,o)>=0)return!1;let u=i.next.next;for(;u!==i.prev;){if(pointInTriangle(a.x,a.y,s.x,s.y,o.x,o.y,u.x,u.y)&&area(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function isEarHashed(i,a,s,o){const u=i.prev,_=i,x=i.next;if(area(u,_,x)>=0)return!1;const w=u.x<_.x?u.x<x.x?u.x:x.x:_.x<x.x?_.x:x.x,C=u.y<_.y?u.y<x.y?u.y:x.y:_.y<x.y?_.y:x.y,L=u.x>_.x?u.x>x.x?u.x:x.x:_.x>x.x?_.x:x.x,B=u.y>_.y?u.y>x.y?u.y:x.y:_.y>x.y?_.y:x.y,U=zOrder(w,C,a,s,o),j=zOrder(L,B,a,s,o);let V=i.prevZ,z=i.nextZ;for(;V&&V.z>=U&&z&&z.z<=j;){if(V!==i.prev&&V!==i.next&&pointInTriangle(u.x,u.y,_.x,_.y,x.x,x.y,V.x,V.y)&&area(V.prev,V,V.next)>=0)return!1;if(V=V.prevZ,z!==i.prev&&z!==i.next&&pointInTriangle(u.x,u.y,_.x,_.y,x.x,x.y,z.x,z.y)&&area(z.prev,z,z.next)>=0)return!1;z=z.nextZ}for(;V&&V.z>=U;){if(V!==i.prev&&V!==i.next&&pointInTriangle(u.x,u.y,_.x,_.y,x.x,x.y,V.x,V.y)&&area(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;z&&z.z<=j;){if(z!==i.prev&&z!==i.next&&pointInTriangle(u.x,u.y,_.x,_.y,x.x,x.y,z.x,z.y)&&area(z.prev,z,z.next)>=0)return!1;z=z.nextZ}return!0}function cureLocalIntersections(i,a,s){let o=i;do{const u=o.prev,_=o.next.next;!equals(u,_)&&intersects(u,o,o.next,_)&&locallyInside(u,_)&&locallyInside(_,u)&&(a.push(u.i/s),a.push(o.i/s),a.push(_.i/s),removeNode(o),removeNode(o.next),o=i=_),o=o.next}while(o!==i);return filterPoints(o)}function splitEarcut(i,a,s,o,u,_){let x=i;do{let i=x.next.next;for(;i!==x.prev;){if(x.i!==i.i&&isValidDiagonal(x,i)){let w=splitPolygon(x,i);return x=filterPoints(x,x.next),w=filterPoints(w,w.next),earcutLinked(x,a,s,o,u,_),void earcutLinked(w,a,s,o,u,_)}i=i.next}x=x.next}while(x!==i)}function eliminateHoles(i,a,s,o){const u=[];let _,x,w,C,L;for(_=0,x=a.length;_<x;_++)w=a[_]*o,C=_<x-1?a[_+1]*o:i.length,L=linkedList(i,w,C,o,!1),L===L.next&&(L.steiner=!0),u.push(getLeftmost(L));for(u.sort(compareX),_=0;_<u.length;_++)eliminateHole(u[_],s),s=filterPoints(s,s.next);return s}function compareX(i,a){return i.x-a.x}function eliminateHole(i,a){if(a=findHoleBridge(i,a)){const s=splitPolygon(a,i);filterPoints(a,a.next),filterPoints(s,s.next)}}function findHoleBridge(i,a){let s=a;const o=i.x,u=i.y;let _,x=-1/0;do{if(u<=s.y&&u>=s.next.y&&s.next.y!==s.y){const i=s.x+(u-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(i<=o&&i>x){if(x=i,i===o){if(u===s.y)return s;if(u===s.next.y)return s.next}_=s.x<s.next.x?s:s.next}}s=s.next}while(s!==a);if(!_)return null;if(o===x)return _;const w=_,C=_.x,L=_.y;let B,U=1/0;s=_;do{o>=s.x&&s.x>=C&&o!==s.x&&pointInTriangle(u<L?o:x,u,C,L,u<L?x:o,u,s.x,s.y)&&(B=Math.abs(u-s.y)/(o-s.x),locallyInside(s,i)&&(B<U||B===U&&(s.x>_.x||s.x===_.x&&sectorContainsSector(_,s)))&&(_=s,U=B)),s=s.next}while(s!==w);return _}function sectorContainsSector(i,a){return area(i.prev,i,a.prev)<0&&area(a.next,i,i.next)<0}function indexCurve(i,a,s,o){let u=i;do{null===u.z&&(u.z=zOrder(u.x,u.y,a,s,o)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next}while(u!==i);u.prevZ.nextZ=null,u.prevZ=null,sortLinked(u)}function sortLinked(i){let a,s,o,u,_,x,w,C,L=1;do{for(s=i,i=null,_=null,x=0;s;){for(x++,o=s,w=0,a=0;a<L&&(w++,o=o.nextZ,o);a++);for(C=L;w>0||C>0&&o;)0!==w&&(0===C||!o||s.z<=o.z)?(u=s,s=s.nextZ,w--):(u=o,o=o.nextZ,C--),_?_.nextZ=u:i=u,u.prevZ=_,_=u;s=o}_.nextZ=null,L*=2}while(x>1);return i}function zOrder(i,a,s,o,u){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-s)*u)|i<<8))|i<<4))|i<<2))|i<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-o)*u)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function getLeftmost(i){let a=i,s=i;do{(a.x<s.x||a.x===s.x&&a.y<s.y)&&(s=a),a=a.next}while(a!==i);return s}function pointInTriangle(i,a,s,o,u,_,x,w){return(u-x)*(a-w)-(i-x)*(_-w)>=0&&(i-x)*(o-w)-(s-x)*(a-w)>=0&&(s-x)*(_-w)-(u-x)*(o-w)>=0}function isValidDiagonal(i,a){return i.next.i!==a.i&&i.prev.i!==a.i&&!intersectsPolygon(i,a)&&(locallyInside(i,a)&&locallyInside(a,i)&&middleInside(i,a)&&(area(i.prev,i,a.prev)||area(i,a.prev,a))||equals(i,a)&&area(i.prev,i,i.next)>0&&area(a.prev,a,a.next)>0)}function area(i,a,s){return(a.y-i.y)*(s.x-a.x)-(a.x-i.x)*(s.y-a.y)}function equals(i,a){return i.x===a.x&&i.y===a.y}function intersects(i,a,s,o){const u=sign(area(i,a,s)),_=sign(area(i,a,o)),x=sign(area(s,o,i)),w=sign(area(s,o,a));return u!==_&&x!==w||!(0!==u||!onSegment(i,s,a))||!(0!==_||!onSegment(i,o,a))||!(0!==x||!onSegment(s,i,o))||!(0!==w||!onSegment(s,a,o))}function onSegment(i,a,s){return a.x<=Math.max(i.x,s.x)&&a.x>=Math.min(i.x,s.x)&&a.y<=Math.max(i.y,s.y)&&a.y>=Math.min(i.y,s.y)}function sign(i){return i>0?1:i<0?-1:0}function intersectsPolygon(i,a){let s=i;do{if(s.i!==i.i&&s.next.i!==i.i&&s.i!==a.i&&s.next.i!==a.i&&intersects(s,s.next,i,a))return!0;s=s.next}while(s!==i);return!1}function locallyInside(i,a){return area(i.prev,i,i.next)<0?area(i,a,i.next)>=0&&area(i,i.prev,a)>=0:area(i,a,i.prev)<0||area(i,i.next,a)<0}function middleInside(i,a){let s=i,o=!1;const u=(i.x+a.x)/2,_=(i.y+a.y)/2;do{s.y>_!=s.next.y>_&&s.next.y!==s.y&&u<(s.next.x-s.x)*(_-s.y)/(s.next.y-s.y)+s.x&&(o=!o),s=s.next}while(s!==i);return o}function splitPolygon(i,a){const s=new Node(i.i,i.x,i.y),o=new Node(a.i,a.x,a.y),u=i.next,_=a.prev;return i.next=a,a.prev=i,s.next=u,u.prev=s,o.next=s,s.prev=o,_.next=o,o.prev=_,o}function insertNode(i,a,s,o){const u=new Node(i,a,s);return o?(u.next=o.next,u.prev=o,o.next.prev=u,o.next=u):(u.prev=u,u.next=u),u}function removeNode(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Node(i,a,s){this.i=i,this.x=a,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(i,a,s,o){let u=0;for(let _=a,x=s-o;_<s;_+=o)u+=(i[x]-i[_])*(i[_+1]+i[x+1]),x=_;return u}__name(linkedList,"linkedList"),__name(filterPoints,"filterPoints"),__name(earcutLinked,"earcutLinked"),__name(isEar,"isEar"),__name(isEarHashed,"isEarHashed"),__name(cureLocalIntersections,"cureLocalIntersections"),__name(splitEarcut,"splitEarcut"),__name(eliminateHoles,"eliminateHoles"),__name(compareX,"compareX"),__name(eliminateHole,"eliminateHole"),__name(findHoleBridge,"findHoleBridge"),__name(sectorContainsSector,"sectorContainsSector"),__name(indexCurve,"indexCurve"),__name(sortLinked,"sortLinked"),__name(zOrder,"zOrder"),__name(getLeftmost,"getLeftmost"),__name(pointInTriangle,"pointInTriangle"),__name(isValidDiagonal,"isValidDiagonal"),__name(area,"area"),__name(equals,"equals"),__name(intersects,"intersects"),__name(onSegment,"onSegment"),__name(sign,"sign"),__name(intersectsPolygon,"intersectsPolygon"),__name(locallyInside,"locallyInside"),__name(middleInside,"middleInside"),__name(splitPolygon,"splitPolygon"),__name(insertNode,"insertNode"),__name(removeNode,"removeNode"),__name(Node,"Node"),__name(signedArea,"signedArea");const $l={area:/* @__PURE__ */__name(function(i){const a=i.length;let s=0;for(let o=a-1,u=0;u<a;o=u++)s+=i[o].x*i[u].y-i[u].x*i[o].y;return.5*s},"area"),isClockWise:/* @__PURE__ */__name(function(i){return $l.area(i)<0},"isClockWise"),triangulateShape:/* @__PURE__ */__name(function(i,a){const s=[],o=[],u=[];removeDupEndPts(i),addContour(s,i);let _=i.length;a.forEach(removeDupEndPts);for(let w=0;w<a.length;w++)o.push(_),_+=a[w].length,addContour(s,a[w]);const x=Hl.triangulate(s,o);for(let w=0;w<x.length;w+=3)u.push(x.slice(w,w+3));return u},"triangulateShape")};function removeDupEndPts(i){const a=i.length;a>2&&i[a-1].equals(i[0])&&i.pop()}function addContour(i,a){for(let s=0;s<a.length;s++)i.push(a[s].x),i.push(a[s].y)}__name(removeDupEndPts,"removeDupEndPts"),__name(addContour,"addContour");const Gl=class _ExtrudeGeometry extends BufferGeometry{constructor(i,a){super(),this.type="ExtrudeGeometry",this.parameters={shapes:i,options:a},i=Array.isArray(i)?i:[i];const s=this,o=[],u=[];for(let _=0,x=i.length;_<x;_++)addShape(i[_]);function addShape(i){const _=[],x=void 0!==a.curveSegments?a.curveSegments:12,w=void 0!==a.steps?a.steps:1;let C=void 0!==a.depth?a.depth:100,L=void 0===a.bevelEnabled||a.bevelEnabled,B=void 0!==a.bevelThickness?a.bevelThickness:6,U=void 0!==a.bevelSize?a.bevelSize:B-2,j=void 0!==a.bevelOffset?a.bevelOffset:0,V=void 0!==a.bevelSegments?a.bevelSegments:3;const z=a.extrudePath,$=void 0!==a.UVGenerator?a.UVGenerator:Xl;void 0!==a.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),C=a.amount);let Y,Z,ee,ie,ae,le=!1;z&&(Y=z.getSpacedPoints(w),le=!0,L=!1,Z=z.computeFrenetFrames(w,!1),ee=new Or,ie=new Or,ae=new Or),L||(V=0,B=0,U=0,j=0);const ce=i.extractPoints(x);let de=ce.shape;const pe=ce.holes;if(!$l.isClockWise(de)){de=de.reverse();for(let i=0,a=pe.length;i<a;i++){const a=pe[i];$l.isClockWise(a)&&(pe[i]=a.reverse())}}const fe=$l.triangulateShape(de,pe),_e=de;for(let a=0,s=pe.length;a<s;a++){const i=pe[a];de=de.concat(i)}function scalePt2(i,a,s){return a||console.error("THREE.ExtrudeGeometry: vec does not exist"),a.clone().multiplyScalar(s).add(i)}__name(scalePt2,"scalePt2");const ye=de.length,be=fe.length;function getBevelVec(i,a,s){let o,u,_;const x=i.x-a.x,w=i.y-a.y,C=s.x-i.x,L=s.y-i.y,B=x*x+w*w,U=x*L-w*C;if(Math.abs(U)>Number.EPSILON){const U=Math.sqrt(B),j=Math.sqrt(C*C+L*L),V=a.x-w/U,z=a.y+x/U,$=((s.x-L/j-V)*L-(s.y+C/j-z)*C)/(x*L-w*C);o=V+x*$-i.x,u=z+w*$-i.y;const Y=o*o+u*u;if(Y<=2)return new Sr(o,u);_=Math.sqrt(Y/2)}else{let i=!1;x>Number.EPSILON?C>Number.EPSILON&&(i=!0):x<-Number.EPSILON?C<-Number.EPSILON&&(i=!0):Math.sign(w)===Math.sign(L)&&(i=!0),i?(o=-w,u=x,_=Math.sqrt(B)):(o=x,u=w,_=Math.sqrt(B/2))}return new Sr(o/_,u/_)}__name(getBevelVec,"getBevelVec");const Te=[];for(let a=0,s=_e.length,o=s-1,u=a+1;a<s;a++,o++,u++)o===s&&(o=0),u===s&&(u=0),Te[a]=getBevelVec(_e[a],_e[o],_e[u]);const Se=[];let xe,we=Te.concat();for(let a=0,s=pe.length;a<s;a++){const i=pe[a];xe=[];for(let a=0,s=i.length,o=s-1,u=a+1;a<s;a++,o++,u++)o===s&&(o=0),u===s&&(u=0),xe[a]=getBevelVec(i[a],i[o],i[u]);Se.push(xe),we=we.concat(xe)}for(let a=0;a<V;a++){const i=a/V,s=B*Math.cos(i*Math.PI/2),o=U*Math.sin(i*Math.PI/2)+j;for(let a=0,u=_e.length;a<u;a++){const i=scalePt2(_e[a],Te[a],o);v(i.x,i.y,-s)}for(let a=0,u=pe.length;a<u;a++){const i=pe[a];xe=Se[a];for(let a=0,u=i.length;a<u;a++){const u=scalePt2(i[a],xe[a],o);v(u.x,u.y,-s)}}}const Pe=U+j;for(let a=0;a<ye;a++){const i=L?scalePt2(de[a],we[a],Pe):de[a];le?(ie.copy(Z.normals[0]).multiplyScalar(i.x),ee.copy(Z.binormals[0]).multiplyScalar(i.y),ae.copy(Y[0]).add(ie).add(ee),v(ae.x,ae.y,ae.z)):v(i.x,i.y,0)}for(let a=1;a<=w;a++)for(let i=0;i<ye;i++){const s=L?scalePt2(de[i],we[i],Pe):de[i];le?(ie.copy(Z.normals[a]).multiplyScalar(s.x),ee.copy(Z.binormals[a]).multiplyScalar(s.y),ae.copy(Y[a]).add(ie).add(ee),v(ae.x,ae.y,ae.z)):v(s.x,s.y,C/w*a)}for(let a=V-1;a>=0;a--){const i=a/V,s=B*Math.cos(i*Math.PI/2),o=U*Math.sin(i*Math.PI/2)+j;for(let a=0,u=_e.length;a<u;a++){const i=scalePt2(_e[a],Te[a],o);v(i.x,i.y,C+s)}for(let a=0,u=pe.length;a<u;a++){const i=pe[a];xe=Se[a];for(let a=0,u=i.length;a<u;a++){const u=scalePt2(i[a],xe[a],o);le?v(u.x,u.y+Y[w-1].y,Y[w-1].x+s):v(u.x,u.y,C+s)}}}function buildLidFaces(){const i=o.length/3;if(L){let i=0,a=ye*i;for(let s=0;s<be;s++){const i=fe[s];f3(i[2]+a,i[1]+a,i[0]+a)}i=w+2*V,a=ye*i;for(let s=0;s<be;s++){const i=fe[s];f3(i[0]+a,i[1]+a,i[2]+a)}}else{for(let i=0;i<be;i++){const a=fe[i];f3(a[2],a[1],a[0])}for(let i=0;i<be;i++){const a=fe[i];f3(a[0]+ye*w,a[1]+ye*w,a[2]+ye*w)}}s.addGroup(i,o.length/3-i,0)}function buildSideFaces(){const i=o.length/3;let a=0;sidewalls(_e,a),a+=_e.length;for(let s=0,o=pe.length;s<o;s++){const i=pe[s];sidewalls(i,a),a+=i.length}s.addGroup(i,o.length/3-i,1)}function sidewalls(i,a){let s=i.length;for(;--s>=0;){const o=s;let u=s-1;u<0&&(u=i.length-1);for(let i=0,s=w+2*V;i<s;i++){const s=ye*i,_=ye*(i+1);f4(a+o+s,a+u+s,a+u+_,a+o+_)}}}function v(i,a,s){_.push(i),_.push(a),_.push(s)}function f3(i,a,u){addVertex(i),addVertex(a),addVertex(u);const _=o.length/3,x=$.generateTopUV(s,o,_-3,_-2,_-1);addUV(x[0]),addUV(x[1]),addUV(x[2])}function f4(i,a,u,_){addVertex(i),addVertex(a),addVertex(_),addVertex(a),addVertex(u),addVertex(_);const x=o.length/3,w=$.generateSideWallUV(s,o,x-6,x-3,x-2,x-1);addUV(w[0]),addUV(w[1]),addUV(w[3]),addUV(w[1]),addUV(w[2]),addUV(w[3])}function addVertex(i){o.push(_[3*i+0]),o.push(_[3*i+1]),o.push(_[3*i+2])}function addUV(i){u.push(i.x),u.push(i.y)}buildLidFaces(),buildSideFaces(),__name(buildLidFaces,"buildLidFaces"),__name(buildSideFaces,"buildSideFaces"),__name(sidewalls,"sidewalls"),__name(v,"v"),__name(f3,"f3"),__name(f4,"f4"),__name(addVertex,"addVertex"),__name(addUV,"addUV")}this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("uv",new Float32BufferAttribute(u,2)),this.computeVertexNormals(),__name(addShape,"addShape")}toJSON(){const i=BufferGeometry.prototype.toJSON.call(this);return toJSON(this.parameters.shapes,this.parameters.options,i)}};__name(Gl,"ExtrudeGeometry");let Wl=Gl;const Xl={generateTopUV:/* @__PURE__ */__name(function(i,a,s,o,u){const _=a[3*s],x=a[3*s+1],w=a[3*o],C=a[3*o+1],L=a[3*u],B=a[3*u+1];return[new Sr(_,x),new Sr(w,C),new Sr(L,B)]},"generateTopUV"),generateSideWallUV:/* @__PURE__ */__name(function(i,a,s,o,u,_){const x=a[3*s],w=a[3*s+1],C=a[3*s+2],L=a[3*o],B=a[3*o+1],U=a[3*o+2],j=a[3*u],V=a[3*u+1],z=a[3*u+2],$=a[3*_],Y=a[3*_+1],Z=a[3*_+2];return Math.abs(w-B)<.01?[new Sr(x,1-C),new Sr(L,1-U),new Sr(j,1-z),new Sr($,1-Z)]:[new Sr(w,1-C),new Sr(B,1-U),new Sr(V,1-z),new Sr(Y,1-Z)]},"generateSideWallUV")};function toJSON(i,a,s){if(s.shapes=[],Array.isArray(i))for(let o=0,u=i.length;o<u;o++){const a=i[o];s.shapes.push(a.uuid)}else s.shapes.push(i.uuid);return void 0!==a.extrudePath&&(s.options.extrudePath=a.extrudePath.toJSON()),s}function ParametricGeometry(i,a,s){BufferGeometry.call(this),this.type="ParametricGeometry",this.parameters={func:i,slices:a,stacks:s};const o=[],u=[],_=[],x=[],w=1e-5,C=new Or,L=new Or,B=new Or,U=new Or,j=new Or;i.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const V=a+1;for(let z=0;z<=s;z++){const o=z/s;for(let s=0;s<=a;s++){const V=s/a;i(V,o,L),u.push(L.x,L.y,L.z),V-w>=0?(i(V-w,o,B),U.subVectors(L,B)):(i(V+w,o,B),U.subVectors(B,L)),o-w>=0?(i(V,o-w,B),j.subVectors(L,B)):(i(V,o+w,B),j.subVectors(B,L)),C.crossVectors(U,j).normalize(),_.push(C.x,C.y,C.z),x.push(V,o)}}for(let z=0;z<s;z++)for(let i=0;i<a;i++){const a=z*V+i,s=z*V+i+1,u=(z+1)*V+i+1,_=(z+1)*V+i;o.push(a,s,_),o.push(s,u,_)}this.setIndex(o),this.setAttribute("position",new Float32BufferAttribute(u,3)),this.setAttribute("normal",new Float32BufferAttribute(_,3)),this.setAttribute("uv",new Float32BufferAttribute(x,2))}__name(toJSON,"toJSON"),__name(ParametricGeometry,"ParametricGeometry"),ParametricGeometry.prototype=Object.create(BufferGeometry.prototype),ParametricGeometry.prototype.constructor=ParametricGeometry;const Ql=class _ShapeGeometry extends BufferGeometry{constructor(i,a=12){super(),this.type="ShapeGeometry",this.parameters={shapes:i,curveSegments:a};const s=[],o=[],u=[],_=[];let x=0,w=0;if(!1===Array.isArray(i))addShape(i);else for(let C=0;C<i.length;C++)addShape(i[C]),this.addGroup(x,w,C),x+=w,w=0;function addShape(i){const x=o.length/3,C=i.extractPoints(a);let L=C.shape;const B=C.holes;!1===$l.isClockWise(L)&&(L=L.reverse());for(let a=0,s=B.length;a<s;a++){const i=B[a];!0===$l.isClockWise(i)&&(B[a]=i.reverse())}const U=$l.triangulateShape(L,B);for(let a=0,s=B.length;a<s;a++){const i=B[a];L=L.concat(i)}for(let a=0,s=L.length;a<s;a++){const i=L[a];o.push(i.x,i.y,0),u.push(0,0,1),_.push(i.x,i.y)}for(let a=0,o=U.length;a<o;a++){const i=U[a],o=i[0]+x,u=i[1]+x,_=i[2]+x;s.push(o,u,_),w+=3}}this.setIndex(s),this.setAttribute("position",new Float32BufferAttribute(o,3)),this.setAttribute("normal",new Float32BufferAttribute(u,3)),this.setAttribute("uv",new Float32BufferAttribute(_,2)),__name(addShape,"addShape")}toJSON(){const i=BufferGeometry.prototype.toJSON.call(this);return toJSON$1(this.parameters.shapes,i)}};__name(Ql,"ShapeGeometry");let Kl=Ql;function toJSON$1(i,a){if(a.shapes=[],Array.isArray(i))for(let s=0,o=i.length;s<o;s++){const o=i[s];a.shapes.push(o.uuid)}else a.shapes.push(i.uuid);return a}__name(toJSON$1,"toJSON$1");const Yl=class _SphereGeometry extends BufferGeometry{constructor(i=1,a=8,s=6,o=0,u=2*Math.PI,_=0,x=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:i,widthSegments:a,heightSegments:s,phiStart:o,phiLength:u,thetaStart:_,thetaLength:x},a=Math.max(3,Math.floor(a)),s=Math.max(2,Math.floor(s));const w=Math.min(_+x,Math.PI);let C=0;const L=[],B=new Or,U=new Or,j=[],V=[],z=[],$=[];for(let Y=0;Y<=s;Y++){const j=[],Z=Y/s;let ee=0;0==Y&&0==_?ee=.5/a:Y==s&&w==Math.PI&&(ee=-.5/a);for(let s=0;s<=a;s++){const w=s/a;B.x=-i*Math.cos(o+w*u)*Math.sin(_+Z*x),B.y=i*Math.cos(_+Z*x),B.z=i*Math.sin(o+w*u)*Math.sin(_+Z*x),V.push(B.x,B.y,B.z),U.copy(B).normalize(),z.push(U.x,U.y,U.z),$.push(w+ee,1-Z),j.push(C++)}L.push(j)}for(let Y=0;Y<s;Y++)for(let i=0;i<a;i++){const a=L[Y][i+1],o=L[Y][i],u=L[Y+1][i],x=L[Y+1][i+1];(0!==Y||_>0)&&j.push(a,o,x),(Y!==s-1||w<Math.PI)&&j.push(o,u,x)}this.setIndex(j),this.setAttribute("position",new Float32BufferAttribute(V,3)),this.setAttribute("normal",new Float32BufferAttribute(z,3)),this.setAttribute("uv",new Float32BufferAttribute($,2))}};__name(Yl,"SphereGeometry");let Jl=Yl;function ShadowMaterial(i){Material.call(this),this.type="ShadowMaterial",this.color=new Ms(0),this.transparent=!0,this.setValues(i)}function RawShaderMaterial(i){ShaderMaterial.call(this,i),this.type="RawShaderMaterial"}function MeshStandardMaterial(i){Material.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ms(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ms(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dr,this.normalScale=new Sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(i)}function MeshPhysicalMaterial(i){MeshStandardMaterial.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Sr(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:/* @__PURE__ */__name(function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},"get"),set:/* @__PURE__ */__name(function(i){this.reflectivity=br.clamp(2.5*(i-1)/(i+1),0,1)},"set")}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(i)}function MeshPhongMaterial(i){Material.call(this),this.type="MeshPhongMaterial",this.color=new Ms(16777215),this.specular=new Ms(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ms(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dr,this.normalScale=new Sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}function MeshToonMaterial(i){Material.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ms(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ms(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dr,this.normalScale=new Sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}function MeshNormalMaterial(i){Material.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dr,this.normalScale=new Sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}function MeshLambertMaterial(i){Material.call(this),this.type="MeshLambertMaterial",this.color=new Ms(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ms(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=dt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}function MeshMatcapMaterial(i){Material.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ms(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=dr,this.normalScale=new Sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(i)}function LineDashedMaterial(i){LineBasicMaterial.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(i)}__name(ShadowMaterial,"ShadowMaterial"),ShadowMaterial.prototype=Object.create(Material.prototype),ShadowMaterial.prototype.constructor=ShadowMaterial,ShadowMaterial.prototype.isShadowMaterial=!0,ShadowMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.color.copy(i.color),this},__name(RawShaderMaterial,"RawShaderMaterial"),RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype),RawShaderMaterial.prototype.constructor=RawShaderMaterial,RawShaderMaterial.prototype.isRawShaderMaterial=!0,__name(MeshStandardMaterial,"MeshStandardMaterial"),MeshStandardMaterial.prototype=Object.create(Material.prototype),MeshStandardMaterial.prototype.constructor=MeshStandardMaterial,MeshStandardMaterial.prototype.isMeshStandardMaterial=!0,MeshStandardMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.defines={STANDARD:""},this.color.copy(i.color),this.roughness=i.roughness,this.metalness=i.metalness,this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.roughnessMap=i.roughnessMap,this.metalnessMap=i.metalnessMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.envMapIntensity=i.envMapIntensity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this.vertexTangents=i.vertexTangents,this},__name(MeshPhysicalMaterial,"MeshPhysicalMaterial"),MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype),MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial,MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0,MeshPhysicalMaterial.prototype.copy=function(i){return MeshStandardMaterial.prototype.copy.call(this,i),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=i.clearcoat,this.clearcoatMap=i.clearcoatMap,this.clearcoatRoughness=i.clearcoatRoughness,this.clearcoatRoughnessMap=i.clearcoatRoughnessMap,this.clearcoatNormalMap=i.clearcoatNormalMap,this.clearcoatNormalScale.copy(i.clearcoatNormalScale),this.reflectivity=i.reflectivity,i.sheen?this.sheen=(this.sheen||new Ms).copy(i.sheen):this.sheen=null,this.transmission=i.transmission,this.transmissionMap=i.transmissionMap,this},__name(MeshPhongMaterial,"MeshPhongMaterial"),MeshPhongMaterial.prototype=Object.create(Material.prototype),MeshPhongMaterial.prototype.constructor=MeshPhongMaterial,MeshPhongMaterial.prototype.isMeshPhongMaterial=!0,MeshPhongMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.color.copy(i.color),this.specular.copy(i.specular),this.shininess=i.shininess,this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.specularMap=i.specularMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.combine=i.combine,this.reflectivity=i.reflectivity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this},__name(MeshToonMaterial,"MeshToonMaterial"),MeshToonMaterial.prototype=Object.create(Material.prototype),MeshToonMaterial.prototype.constructor=MeshToonMaterial,MeshToonMaterial.prototype.isMeshToonMaterial=!0,MeshToonMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.color.copy(i.color),this.map=i.map,this.gradientMap=i.gradientMap,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.alphaMap=i.alphaMap,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this},__name(MeshNormalMaterial,"MeshNormalMaterial"),MeshNormalMaterial.prototype=Object.create(Material.prototype),MeshNormalMaterial.prototype.constructor=MeshNormalMaterial,MeshNormalMaterial.prototype.isMeshNormalMaterial=!0,MeshNormalMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this},__name(MeshLambertMaterial,"MeshLambertMaterial"),MeshLambertMaterial.prototype=Object.create(Material.prototype),MeshLambertMaterial.prototype.constructor=MeshLambertMaterial,MeshLambertMaterial.prototype.isMeshLambertMaterial=!0,MeshLambertMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.color.copy(i.color),this.map=i.map,this.lightMap=i.lightMap,this.lightMapIntensity=i.lightMapIntensity,this.aoMap=i.aoMap,this.aoMapIntensity=i.aoMapIntensity,this.emissive.copy(i.emissive),this.emissiveMap=i.emissiveMap,this.emissiveIntensity=i.emissiveIntensity,this.specularMap=i.specularMap,this.alphaMap=i.alphaMap,this.envMap=i.envMap,this.combine=i.combine,this.reflectivity=i.reflectivity,this.refractionRatio=i.refractionRatio,this.wireframe=i.wireframe,this.wireframeLinewidth=i.wireframeLinewidth,this.wireframeLinecap=i.wireframeLinecap,this.wireframeLinejoin=i.wireframeLinejoin,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this},__name(MeshMatcapMaterial,"MeshMatcapMaterial"),MeshMatcapMaterial.prototype=Object.create(Material.prototype),MeshMatcapMaterial.prototype.constructor=MeshMatcapMaterial,MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0,MeshMatcapMaterial.prototype.copy=function(i){return Material.prototype.copy.call(this,i),this.defines={MATCAP:""},this.color.copy(i.color),this.matcap=i.matcap,this.map=i.map,this.bumpMap=i.bumpMap,this.bumpScale=i.bumpScale,this.normalMap=i.normalMap,this.normalMapType=i.normalMapType,this.normalScale.copy(i.normalScale),this.displacementMap=i.displacementMap,this.displacementScale=i.displacementScale,this.displacementBias=i.displacementBias,this.alphaMap=i.alphaMap,this.skinning=i.skinning,this.morphTargets=i.morphTargets,this.morphNormals=i.morphNormals,this},__name(LineDashedMaterial,"LineDashedMaterial"),LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype),LineDashedMaterial.prototype.constructor=LineDashedMaterial,LineDashedMaterial.prototype.isLineDashedMaterial=!0,LineDashedMaterial.prototype.copy=function(i){return LineBasicMaterial.prototype.copy.call(this,i),this.scale=i.scale,this.dashSize=i.dashSize,this.gapSize=i.gapSize,this};var Zl=/* @__PURE__ */Object.freeze({__proto__:null,ShadowMaterial:ShadowMaterial,SpriteMaterial:SpriteMaterial,RawShaderMaterial:RawShaderMaterial,ShaderMaterial:ShaderMaterial,PointsMaterial:PointsMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshToonMaterial:MeshToonMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshDistanceMaterial:MeshDistanceMaterial,MeshBasicMaterial:MeshBasicMaterial,MeshMatcapMaterial:MeshMatcapMaterial,LineDashedMaterial:LineDashedMaterial,LineBasicMaterial:LineBasicMaterial,Material:Material});const ec={arraySlice:/* @__PURE__ */__name(function(i,a,s){return ec.isTypedArray(i)?new i.constructor(i.subarray(a,void 0!==s?s:i.length)):i.slice(a,s)},"arraySlice"),convertArray:/* @__PURE__ */__name(function(i,a,s){return!i||!s&&i.constructor===a?i:"number"==typeof a.BYTES_PER_ELEMENT?new a(i):Array.prototype.slice.call(i)},"convertArray"),isTypedArray:/* @__PURE__ */__name(function(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)},"isTypedArray"),getKeyframeOrder:/* @__PURE__ */__name(function(i){function compareTime(a,s){return i[a]-i[s]}__name(compareTime,"compareTime");const a=i.length,s=new Array(a);for(let o=0;o!==a;++o)s[o]=o;return s.sort(compareTime),s},"getKeyframeOrder"),sortedArray:/* @__PURE__ */__name(function(i,a,s){const o=i.length,u=new i.constructor(o);for(let _=0,x=0;x!==o;++_){const o=s[_]*a;for(let s=0;s!==a;++s)u[x++]=i[o+s]}return u},"sortedArray"),flattenJSON:/* @__PURE__ */__name(function(i,a,s,o){let u=1,_=i[0];for(;void 0!==_&&void 0===_[o];)_=i[u++];if(void 0===_)return;let x=_[o];if(void 0!==x)if(Array.isArray(x))do{x=_[o],void 0!==x&&(a.push(_.time),s.push.apply(s,x)),_=i[u++]}while(void 0!==_);else if(void 0!==x.toArray)do{x=_[o],void 0!==x&&(a.push(_.time),x.toArray(s,s.length)),_=i[u++]}while(void 0!==_);else do{x=_[o],void 0!==x&&(a.push(_.time),s.push(x)),_=i[u++]}while(void 0!==_)},"flattenJSON"),subclip:/* @__PURE__ */__name(function(i,a,s,o,u=30){const _=i.clone();_.name=a;const x=[];for(let C=0;C<_.tracks.length;++C){const i=_.tracks[C],a=i.getValueSize(),w=[],L=[];for(let _=0;_<i.times.length;++_){const x=i.times[_]*u;if(!(x<s||x>=o)){w.push(i.times[_]);for(let s=0;s<a;++s)L.push(i.values[_*a+s])}}0!==w.length&&(i.times=ec.convertArray(w,i.times.constructor),i.values=ec.convertArray(L,i.values.constructor),x.push(i))}_.tracks=x;let w=1/0;for(let C=0;C<_.tracks.length;++C)w>_.tracks[C].times[0]&&(w=_.tracks[C].times[0]);for(let C=0;C<_.tracks.length;++C)_.tracks[C].shift(-1*w);return _.resetDuration(),_},"subclip"),makeClipAdditive:/* @__PURE__ */__name(function(i,a=0,s=i,o=30){o<=0&&(o=30);const u=s.tracks.length,_=a/o;for(let x=0;x<u;++x){const a=s.tracks[x],o=a.ValueTypeName;if("bool"===o||"string"===o)continue;const u=i.tracks.find(function(i){return i.name===a.name&&i.ValueTypeName===o});if(void 0===u)continue;let w=0;const C=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(w=C/3);let L=0;const B=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(L=B/3);const U=a.times.length-1;let j;if(_<=a.times[0]){const i=w,s=C-w;j=ec.arraySlice(a.values,i,s)}else if(_>=a.times[U]){const i=U*C+w,s=i+C-w;j=ec.arraySlice(a.values,i,s)}else{const i=a.createInterpolant(),s=w,o=C-w;i.evaluate(_),j=ec.arraySlice(i.resultBuffer,s,o)}"quaternion"===o&&(new Dr).fromArray(j).normalize().conjugate().toArray(j);const V=u.times.length;for(let i=0;i<V;++i){const a=i*B+L;if("quaternion"===o)Dr.multiplyQuaternionsFlat(u.values,a,j,0,u.values,a);else{const i=B-2*L;for(let s=0;s<i;++s)u.values[a+s]-=j[s]}}}return i.blendMode=Wi,i},"makeClipAdditive")};function Interpolant(i,a,s,o){this.parameterPositions=i,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new a.constructor(s),this.sampleValues=a,this.valueSize=s}function CubicInterpolant(i,a,s,o){Interpolant.call(this,i,a,s,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function LinearInterpolant(i,a,s,o){Interpolant.call(this,i,a,s,o)}function DiscreteInterpolant(i,a,s,o){Interpolant.call(this,i,a,s,o)}function KeyframeTrack(i,a,s,o){if(void 0===i)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===a||0===a.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+i);this.name=i,this.times=ec.convertArray(a,this.TimeBufferType),this.values=ec.convertArray(s,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}function BooleanKeyframeTrack(i,a,s){KeyframeTrack.call(this,i,a,s)}function ColorKeyframeTrack(i,a,s,o){KeyframeTrack.call(this,i,a,s,o)}function NumberKeyframeTrack(i,a,s,o){KeyframeTrack.call(this,i,a,s,o)}function QuaternionLinearInterpolant(i,a,s,o){Interpolant.call(this,i,a,s,o)}function QuaternionKeyframeTrack(i,a,s,o){KeyframeTrack.call(this,i,a,s,o)}function StringKeyframeTrack(i,a,s,o){KeyframeTrack.call(this,i,a,s,o)}function VectorKeyframeTrack(i,a,s,o){KeyframeTrack.call(this,i,a,s,o)}function AnimationClip(i,a=-1,s,o=Oi){this.name=i,this.tracks=s,this.duration=a,this.blendMode=o,this.uuid=br.generateUUID(),this.duration<0&&this.resetDuration()}function getTrackTypeForValueTypeName(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function parseKeyframeTrack(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const a=getTrackTypeForValueTypeName(i.type);if(void 0===i.times){const a=[],s=[];ec.flattenJSON(i.keys,a,s,"value"),i.times=a,i.values=s}return void 0!==a.parse?a.parse(i):new a(i.name,i.times,i.values,i.interpolation)}__name(Interpolant,"Interpolant"),_extends2(Interpolant.prototype,{evaluate:/* @__PURE__ */__name(function(i){const a=this.parameterPositions;let s=this._cachedIndex,o=a[s],u=a[s-1];e:{t:{let _;n:{i:if(!(i<o)){for(let _=s+2;;){if(void 0===o){if(i<u)break i;return s=a.length,this._cachedIndex=s,this.afterEnd_(s-1,i,u)}if(s===_)break;if(u=o,o=a[++s],i<o)break t}_=a.length;break n}if(!(i>=u)){const x=a[1];i<x&&(s=2,u=x);for(let _=s-2;;){if(void 0===u)return this._cachedIndex=0,this.beforeStart_(0,i,o);if(s===_)break;if(o=u,u=a[--s-1],i>=u)break t}_=s,s=0;break n}break e}for(;s<_;){const o=s+_>>>1;i<a[o]?_=o:s=o+1}if(o=a[s],u=a[s-1],void 0===u)return this._cachedIndex=0,this.beforeStart_(0,i,o);if(void 0===o)return s=a.length,this._cachedIndex=s,this.afterEnd_(s-1,u,i)}this._cachedIndex=s,this.intervalChanged_(s,u,o)}return this.interpolate_(s,u,i,o)},"evaluate"),settings:null,DefaultSettings_:{},getSettings_:/* @__PURE__ */__name(function(){return this.settings||this.DefaultSettings_},"getSettings_"),copySampleValue_:/* @__PURE__ */__name(function(i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,u=i*o;for(let _=0;_!==o;++_)a[_]=s[u+_];return a},"copySampleValue_"),interpolate_:/* @__PURE__ */__name(function(){throw new Error("call to abstract method")},"interpolate_"),intervalChanged_:/* @__PURE__ */__name(function(){},"intervalChanged_")}),_extends2(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_}),__name(CubicInterpolant,"CubicInterpolant"),CubicInterpolant.prototype=_extends2(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:Mi,endingEnd:Mi},intervalChanged_:/* @__PURE__ */__name(function(i,a,s){const o=this.parameterPositions;let u=i-2,_=i+1,x=o[u],w=o[_];if(void 0===x)switch(this.getSettings_().endingStart){case Pi:u=i,x=2*a-s;break;case Ri:u=o.length-2,x=a+o[u]-o[u+1];break;default:u=i,x=s}if(void 0===w)switch(this.getSettings_().endingEnd){case Pi:_=i,w=2*s-a;break;case Ri:_=1,w=s+o[1]-o[0];break;default:_=i-1,w=a}const C=.5*(s-a),L=this.valueSize;this._weightPrev=C/(a-x),this._weightNext=C/(w-s),this._offsetPrev=u*L,this._offsetNext=_*L},"intervalChanged_"),interpolate_:/* @__PURE__ */__name(function(i,a,s,o){const u=this.resultBuffer,_=this.sampleValues,x=this.valueSize,w=i*x,C=w-x,L=this._offsetPrev,B=this._offsetNext,U=this._weightPrev,j=this._weightNext,V=(s-a)/(o-a),z=V*V,$=z*V,Y=-U*$+2*U*z-U*V,Z=(1+U)*$+(-1.5-2*U)*z+(-.5+U)*V+1,ee=(-1-j)*$+(1.5+j)*z+.5*V,ie=j*$-j*z;for(let ae=0;ae!==x;++ae)u[ae]=Y*_[L+ae]+Z*_[C+ae]+ee*_[w+ae]+ie*_[B+ae];return u},"interpolate_")}),__name(LinearInterpolant,"LinearInterpolant"),LinearInterpolant.prototype=_extends2(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:/* @__PURE__ */__name(function(i,a,s,o){const u=this.resultBuffer,_=this.sampleValues,x=this.valueSize,w=i*x,C=w-x,L=(s-a)/(o-a),B=1-L;for(let U=0;U!==x;++U)u[U]=_[C+U]*B+_[w+U]*L;return u},"interpolate_")}),__name(DiscreteInterpolant,"DiscreteInterpolant"),DiscreteInterpolant.prototype=_extends2(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:/* @__PURE__ */__name(function(i){return this.copySampleValue_(i-1)},"interpolate_")}),__name(KeyframeTrack,"KeyframeTrack"),_extends2(KeyframeTrack,{toJSON:/* @__PURE__ */__name(function(i){const a=i.constructor;let s;if(void 0!==a.toJSON)s=a.toJSON(i);else{s={name:i.name,times:ec.convertArray(i.times,Array),values:ec.convertArray(i.values,Array)};const a=i.getInterpolation();a!==i.DefaultInterpolation&&(s.interpolation=a)}return s.type=i.ValueTypeName,s},"toJSON")}),_extends2(KeyframeTrack.prototype,{constructor:KeyframeTrack,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:_i,InterpolantFactoryMethodDiscrete:/* @__PURE__ */__name(function(i){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),i)},"InterpolantFactoryMethodDiscrete"),InterpolantFactoryMethodLinear:/* @__PURE__ */__name(function(i){return new LinearInterpolant(this.times,this.values,this.getValueSize(),i)},"InterpolantFactoryMethodLinear"),InterpolantFactoryMethodSmooth:/* @__PURE__ */__name(function(i){return new CubicInterpolant(this.times,this.values,this.getValueSize(),i)},"InterpolantFactoryMethodSmooth"),setInterpolation:/* @__PURE__ */__name(function(i){let a;switch(i){case Zn:a=this.InterpolantFactoryMethodDiscrete;break;case _i:a=this.InterpolantFactoryMethodLinear;break;case Ei:a=this.InterpolantFactoryMethodSmooth}if(void 0===a){const a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(i===this.DefaultInterpolation)throw new Error(a);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",a),this}return this.createInterpolant=a,this},"setInterpolation"),getInterpolation:/* @__PURE__ */__name(function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zn;case this.InterpolantFactoryMethodLinear:return _i;case this.InterpolantFactoryMethodSmooth:return Ei}},"getInterpolation"),getValueSize:/* @__PURE__ */__name(function(){return this.values.length/this.times.length},"getValueSize"),shift:/* @__PURE__ */__name(function(i){if(0!==i){const a=this.times;for(let s=0,o=a.length;s!==o;++s)a[s]+=i}return this},"shift"),scale:/* @__PURE__ */__name(function(i){if(1!==i){const a=this.times;for(let s=0,o=a.length;s!==o;++s)a[s]*=i}return this},"scale"),trim:/* @__PURE__ */__name(function(i,a){const s=this.times,o=s.length;let u=0,_=o-1;for(;u!==o&&s[u]<i;)++u;for(;-1!==_&&s[_]>a;)--_;if(++_,0!==u||_!==o){u>=_&&(_=Math.max(_,1),u=_-1);const i=this.getValueSize();this.times=ec.arraySlice(s,u,_),this.values=ec.arraySlice(this.values,u*i,_*i)}return this},"trim"),validate:/* @__PURE__ */__name(function(){let i=!0;const a=this.getValueSize();a-Math.floor(a)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),i=!1);const s=this.times,o=this.values,u=s.length;0===u&&(console.error("THREE.KeyframeTrack: Track is empty.",this),i=!1);let _=null;for(let x=0;x!==u;x++){const a=s[x];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,x,a),i=!1;break}if(null!==_&&_>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,x,a,_),i=!1;break}_=a}if(void 0!==o&&ec.isTypedArray(o))for(let x=0,w=o.length;x!==w;++x){const a=o[x];if(isNaN(a)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,x,a),i=!1;break}}return i},"validate"),optimize:/* @__PURE__ */__name(function(){const i=ec.arraySlice(this.times),a=ec.arraySlice(this.values),s=this.getValueSize(),o=this.getInterpolation()===Ei,u=i.length-1;let _=1;for(let x=1;x<u;++x){let u=!1;const w=i[x];if(w!==i[x+1]&&(1!==x||w!==i[0]))if(o)u=!0;else{const i=x*s,o=i-s,_=i+s;for(let x=0;x!==s;++x){const s=a[i+x];if(s!==a[o+x]||s!==a[_+x]){u=!0;break}}}if(u){if(x!==_){i[_]=i[x];const o=x*s,u=_*s;for(let i=0;i!==s;++i)a[u+i]=a[o+i]}++_}}if(u>0){i[_]=i[u];for(let i=u*s,o=_*s,x=0;x!==s;++x)a[o+x]=a[i+x];++_}return _!==i.length?(this.times=ec.arraySlice(i,0,_),this.values=ec.arraySlice(a,0,_*s)):(this.times=i,this.values=a),this},"optimize"),clone:/* @__PURE__ */__name(function(){const i=ec.arraySlice(this.times,0),a=ec.arraySlice(this.values,0),s=new(0,this.constructor)(this.name,i,a);return s.createInterpolant=this.createInterpolant,s},"clone")}),__name(BooleanKeyframeTrack,"BooleanKeyframeTrack"),BooleanKeyframeTrack.prototype=_extends2(Object.create(KeyframeTrack.prototype),{constructor:BooleanKeyframeTrack,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Zn,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),__name(ColorKeyframeTrack,"ColorKeyframeTrack"),ColorKeyframeTrack.prototype=_extends2(Object.create(KeyframeTrack.prototype),{constructor:ColorKeyframeTrack,ValueTypeName:"color"}),__name(NumberKeyframeTrack,"NumberKeyframeTrack"),NumberKeyframeTrack.prototype=_extends2(Object.create(KeyframeTrack.prototype),{constructor:NumberKeyframeTrack,ValueTypeName:"number"}),__name(QuaternionLinearInterpolant,"QuaternionLinearInterpolant"),QuaternionLinearInterpolant.prototype=_extends2(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:/* @__PURE__ */__name(function(i,a,s,o){const u=this.resultBuffer,_=this.sampleValues,x=this.valueSize,w=(s-a)/(o-a);let C=i*x;for(let L=C+x;C!==L;C+=4)Dr.slerpFlat(u,0,_,C-x,_,C,w);return u},"interpolate_")}),__name(QuaternionKeyframeTrack,"QuaternionKeyframeTrack"),QuaternionKeyframeTrack.prototype=_extends2(Object.create(KeyframeTrack.prototype),{constructor:QuaternionKeyframeTrack,ValueTypeName:"quaternion",DefaultInterpolation:_i,InterpolantFactoryMethodLinear:/* @__PURE__ */__name(function(i){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),i)},"InterpolantFactoryMethodLinear"),InterpolantFactoryMethodSmooth:void 0}),__name(StringKeyframeTrack,"StringKeyframeTrack"),StringKeyframeTrack.prototype=_extends2(Object.create(KeyframeTrack.prototype),{constructor:StringKeyframeTrack,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Zn,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),__name(VectorKeyframeTrack,"VectorKeyframeTrack"),VectorKeyframeTrack.prototype=_extends2(Object.create(KeyframeTrack.prototype),{constructor:VectorKeyframeTrack,ValueTypeName:"vector"}),__name(AnimationClip,"AnimationClip"),__name(getTrackTypeForValueTypeName,"getTrackTypeForValueTypeName"),__name(parseKeyframeTrack,"parseKeyframeTrack"),_extends2(AnimationClip,{parse:/* @__PURE__ */__name(function(i){const a=[],s=i.tracks,o=1/(i.fps||1);for(let _=0,x=s.length;_!==x;++_)a.push(parseKeyframeTrack(s[_]).scale(o));const u=new AnimationClip(i.name,i.duration,a,i.blendMode);return u.uuid=i.uuid,u},"parse"),toJSON:/* @__PURE__ */__name(function(i){const a=[],s=i.tracks,o={name:i.name,duration:i.duration,tracks:a,uuid:i.uuid,blendMode:i.blendMode};for(let u=0,_=s.length;u!==_;++u)a.push(KeyframeTrack.toJSON(s[u]));return o},"toJSON"),CreateFromMorphTargetSequence:/* @__PURE__ */__name(function(i,a,s,o){const u=a.length,_=[];for(let x=0;x<u;x++){let i=[],w=[];i.push((x+u-1)%u,x,(x+1)%u),w.push(0,1,0);const C=ec.getKeyframeOrder(i);i=ec.sortedArray(i,1,C),w=ec.sortedArray(w,1,C),o||0!==i[0]||(i.push(u),w.push(w[0])),_.push(new NumberKeyframeTrack(".morphTargetInfluences["+a[x].name+"]",i,w).scale(1/s))}return new AnimationClip(i,-1,_)},"CreateFromMorphTargetSequence"),findByName:/* @__PURE__ */__name(function(i,a){let s=i;if(!Array.isArray(i)){const a=i;s=a.geometry&&a.geometry.animations||a.animations}for(let o=0;o<s.length;o++)if(s[o].name===a)return s[o];return null},"findByName"),CreateClipsFromMorphTargetSequences:/* @__PURE__ */__name(function(i,a,s){const o={},u=/^([\w-]*?)([\d]+)$/;for(let x=0,w=i.length;x<w;x++){const a=i[x],s=a.name.match(u);if(s&&s.length>1){const i=s[1];let u=o[i];u||(o[i]=u=[]),u.push(a)}}const _=[];for(const x in o)_.push(AnimationClip.CreateFromMorphTargetSequence(x,o[x],a,s));return _},"CreateClipsFromMorphTargetSequences"),parseAnimation:/* @__PURE__ */__name(function(i,a){if(!i)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=/* @__PURE__ */__name(function(i,a,s,o,u){if(0!==s.length){const _=[],x=[];ec.flattenJSON(s,_,x,o),0!==_.length&&u.push(new i(a,_,x))}},"addNonemptyTrack"),o=[],u=i.name||"default",_=i.fps||30,x=i.blendMode;let w=i.length||-1;const C=i.hierarchy||[];for(let L=0;L<C.length;L++){const i=C[L].keys;if(i&&0!==i.length)if(i[0].morphTargets){const a={};let s;for(s=0;s<i.length;s++)if(i[s].morphTargets)for(let o=0;o<i[s].morphTargets.length;o++)a[i[s].morphTargets[o]]=-1;for(const u in a){const a=[],_=[];for(let o=0;o!==i[s].morphTargets.length;++o){const o=i[s];a.push(o.time),_.push(o.morphTarget===u?1:0)}o.push(new NumberKeyframeTrack(".morphTargetInfluence["+u+"]",a,_))}w=a.length*_}else{const u=".bones["+a[L].name+"]";s(VectorKeyframeTrack,u+".position",i,"pos",o),s(QuaternionKeyframeTrack,u+".quaternion",i,"rot",o),s(VectorKeyframeTrack,u+".scale",i,"scl",o)}}return 0===o.length?null:new AnimationClip(u,w,o,x)},"parseAnimation")}),_extends2(AnimationClip.prototype,{resetDuration:/* @__PURE__ */__name(function(){let i=0;for(let a=0,s=this.tracks.length;a!==s;++a){const s=this.tracks[a];i=Math.max(i,s.times[s.times.length-1])}return this.duration=i,this},"resetDuration"),trim:/* @__PURE__ */__name(function(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].trim(0,this.duration);return this},"trim"),validate:/* @__PURE__ */__name(function(){let i=!0;for(let a=0;a<this.tracks.length;a++)i=i&&this.tracks[a].validate();return i},"validate"),optimize:/* @__PURE__ */__name(function(){for(let i=0;i<this.tracks.length;i++)this.tracks[i].optimize();return this},"optimize"),clone:/* @__PURE__ */__name(function(){const i=[];for(let a=0;a<this.tracks.length;a++)i.push(this.tracks[a].clone());return new AnimationClip(this.name,this.duration,i,this.blendMode)},"clone"),toJSON:/* @__PURE__ */__name(function(){return AnimationClip.toJSON(this)},"toJSON")});const ic={enabled:!1,files:{},add:/* @__PURE__ */__name(function(i,a){!1!==this.enabled&&(this.files[i]=a)},"add"),get:/* @__PURE__ */__name(function(i){if(!1!==this.enabled)return this.files[i]},"get"),remove:/* @__PURE__ */__name(function(i){delete this.files[i]},"remove"),clear:/* @__PURE__ */__name(function(){this.files={}},"clear")};function LoadingManager(i,a,s){const o=this;let u,_=!1,x=0,w=0;const C=[];this.onStart=void 0,this.onLoad=i,this.onProgress=a,this.onError=s,this.itemStart=function(i){w++,!1===_&&void 0!==o.onStart&&o.onStart(i,x,w),_=!0},this.itemEnd=function(i){x++,void 0!==o.onProgress&&o.onProgress(i,x,w),x===w&&(_=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(i){void 0!==o.onError&&o.onError(i)},this.resolveURL=function(i){return u?u(i):i},this.setURLModifier=function(i){return u=i,this},this.addHandler=function(i,a){return C.push(i,a),this},this.removeHandler=function(i){const a=C.indexOf(i);return-1!==a&&C.splice(a,2),this},this.getHandler=function(i){for(let a=0,s=C.length;a<s;a+=2){const s=C[a],o=C[a+1];if(s.global&&(s.lastIndex=0),s.test(i))return o}return null}}__name(LoadingManager,"LoadingManager");const rc=new LoadingManager;function Loader(i){this.manager=void 0!==i?i:rc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}__name(Loader,"Loader"),_extends2(Loader.prototype,{load:/* @__PURE__ */__name(function(){},"load"),loadAsync:/* @__PURE__ */__name(function(i,a){const s=this;return new Promise(function(o,u){s.load(i,o,a,u)})},"loadAsync"),parse:/* @__PURE__ */__name(function(){},"parse"),setCrossOrigin:/* @__PURE__ */__name(function(i){return this.crossOrigin=i,this},"setCrossOrigin"),setWithCredentials:/* @__PURE__ */__name(function(i){return this.withCredentials=i,this},"setWithCredentials"),setPath:/* @__PURE__ */__name(function(i){return this.path=i,this},"setPath"),setResourcePath:/* @__PURE__ */__name(function(i){return this.resourcePath=i,this},"setResourcePath"),setRequestHeader:/* @__PURE__ */__name(function(i){return this.requestHeader=i,this},"setRequestHeader")});const ac={};function FileLoader(i){Loader.call(this,i)}function AnimationLoader(i){Loader.call(this,i)}function CompressedTextureLoader(i){Loader.call(this,i)}function ImageLoader(i){Loader.call(this,i)}function CubeTextureLoader(i){Loader.call(this,i)}function DataTextureLoader(i){Loader.call(this,i)}function TextureLoader(i){Loader.call(this,i)}function Curve(){this.type="Curve",this.arcLengthDivisions=200}function EllipseCurve(i,a,s,o,u,_,x,w){Curve.call(this),this.type="EllipseCurve",this.aX=i||0,this.aY=a||0,this.xRadius=s||1,this.yRadius=o||1,this.aStartAngle=u||0,this.aEndAngle=_||2*Math.PI,this.aClockwise=x||!1,this.aRotation=w||0}function ArcCurve(i,a,s,o,u,_){EllipseCurve.call(this,i,a,s,s,o,u,_),this.type="ArcCurve"}function CubicPoly(){let i=0,a=0,s=0,o=0;function init(u,_,x,w){i=u,a=x,s=-3*u+3*_-2*x-w,o=2*u-2*_+x+w}return __name(init,"init"),{initCatmullRom:/* @__PURE__ */__name(function(i,a,s,o,u){init(a,s,u*(s-i),u*(o-a))},"initCatmullRom"),initNonuniformCatmullRom:/* @__PURE__ */__name(function(i,a,s,o,u,_,x){let w=(a-i)/u-(s-i)/(u+_)+(s-a)/_,C=(s-a)/_-(o-a)/(_+x)+(o-s)/x;w*=_,C*=_,init(a,s,w,C)},"initNonuniformCatmullRom"),calc:/* @__PURE__ */__name(function(u){const _=u*u;return i+a*u+s*_+o*(_*u)},"calc")}}__name(FileLoader,"FileLoader"),FileLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:FileLoader,load:/* @__PURE__ */__name(function(i,a,s,o){void 0===i&&(i=""),void 0!==this.path&&(i=this.path+i),i=this.manager.resolveURL(i);const u=this,_=ic.get(i);if(void 0!==_)return u.manager.itemStart(i),setTimeout(function(){a&&a(_),u.manager.itemEnd(i)},0),_;if(void 0!==ac[i])return void ac[i].push({onLoad:a,onProgress:s,onError:o});const x=/^data:(.*?)(;base64)?,(.*)$/,w=i.match(x);let C;if(w){const s=w[1],_=!!w[2];let x=w[3];x=decodeURIComponent(x),_&&(x=atob(x));try{let o;const _=(this.responseType||"").toLowerCase();switch(_){case"arraybuffer":case"blob":const i=new Uint8Array(x.length);for(let s=0;s<x.length;s++)i[s]=x.charCodeAt(s);o="blob"===_?new Blob([i.buffer],{type:s}):i.buffer;break;case"document":const a=new DOMParser;o=a.parseFromString(x,s);break;case"json":o=JSON.parse(x);break;default:o=x}setTimeout(function(){a&&a(o),u.manager.itemEnd(i)},0)}catch(L){setTimeout(function(){o&&o(L),u.manager.itemError(i),u.manager.itemEnd(i)},0)}}else{ac[i]=[],ac[i].push({onLoad:a,onProgress:s,onError:o}),C=new XMLHttpRequest,C.open("GET",i,!0),C.addEventListener("load",function(a){const s=this.response,o=ac[i];if(delete ac[i],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),ic.add(i,s);for(let i=0,a=o.length;i<a;i++){const a=o[i];a.onLoad&&a.onLoad(s)}u.manager.itemEnd(i)}else{for(let i=0,s=o.length;i<s;i++){const s=o[i];s.onError&&s.onError(a)}u.manager.itemError(i),u.manager.itemEnd(i)}},!1),C.addEventListener("progress",function(a){const s=ac[i];for(let i=0,o=s.length;i<o;i++){const o=s[i];o.onProgress&&o.onProgress(a)}},!1),C.addEventListener("error",function(a){const s=ac[i];delete ac[i];for(let i=0,o=s.length;i<o;i++){const o=s[i];o.onError&&o.onError(a)}u.manager.itemError(i),u.manager.itemEnd(i)},!1),C.addEventListener("abort",function(a){const s=ac[i];delete ac[i];for(let i=0,o=s.length;i<o;i++){const o=s[i];o.onError&&o.onError(a)}u.manager.itemError(i),u.manager.itemEnd(i)},!1),void 0!==this.responseType&&(C.responseType=this.responseType),void 0!==this.withCredentials&&(C.withCredentials=this.withCredentials),C.overrideMimeType&&C.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const i in this.requestHeader)C.setRequestHeader(i,this.requestHeader[i]);C.send(null)}return u.manager.itemStart(i),C},"load"),setResponseType:/* @__PURE__ */__name(function(i){return this.responseType=i,this},"setResponseType"),setMimeType:/* @__PURE__ */__name(function(i){return this.mimeType=i,this},"setMimeType")}),__name(AnimationLoader,"AnimationLoader"),AnimationLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:AnimationLoader,load:/* @__PURE__ */__name(function(i,a,s,o){const u=this,_=new FileLoader(u.manager);_.setPath(u.path),_.setRequestHeader(u.requestHeader),_.setWithCredentials(u.withCredentials),_.load(i,function(s){try{a(u.parse(JSON.parse(s)))}catch(_){o?o(_):console.error(_),u.manager.itemError(i)}},s,o)},"load"),parse:/* @__PURE__ */__name(function(i){const a=[];for(let s=0;s<i.length;s++){const o=AnimationClip.parse(i[s]);a.push(o)}return a},"parse")}),__name(CompressedTextureLoader,"CompressedTextureLoader"),CompressedTextureLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:CompressedTextureLoader,load:/* @__PURE__ */__name(function(i,a,s,o){const u=this,_=[],x=new CompressedTexture,w=new FileLoader(this.manager);w.setPath(this.path),w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setWithCredentials(u.withCredentials);let C=0;function loadTexture(L){w.load(i[L],function(i){const s=u.parse(i,!0);_[L]={width:s.width,height:s.height,format:s.format,mipmaps:s.mipmaps},C+=1,6===C&&(1===s.mipmapCount&&(x.minFilter=Dt),x.image=_,x.format=s.format,x.needsUpdate=!0,a&&a(x))},s,o)}if(__name(loadTexture,"loadTexture"),Array.isArray(i))for(let L=0,B=i.length;L<B;++L)loadTexture(L);else w.load(i,function(i){const s=u.parse(i,!0);if(s.isCubemap){const i=s.mipmaps.length/s.mipmapCount;for(let a=0;a<i;a++){_[a]={mipmaps:[]};for(let i=0;i<s.mipmapCount;i++)_[a].mipmaps.push(s.mipmaps[a*s.mipmapCount+i]),_[a].format=s.format,_[a].width=s.width,_[a].height=s.height}x.image=_}else x.image.width=s.width,x.image.height=s.height,x.mipmaps=s.mipmaps;1===s.mipmapCount&&(x.minFilter=Dt),x.format=s.format,x.needsUpdate=!0,a&&a(x)},s,o);return x},"load")}),__name(ImageLoader,"ImageLoader"),ImageLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:ImageLoader,load:/* @__PURE__ */__name(function(i,a,s,o){void 0!==this.path&&(i=this.path+i),i=this.manager.resolveURL(i);const u=this,_=ic.get(i);if(void 0!==_)return u.manager.itemStart(i),setTimeout(function(){a&&a(_),u.manager.itemEnd(i)},0),_;const x=document.createElementNS("http://www.w3.org/1999/xhtml","img");function onImageLoad(){x.removeEventListener("load",onImageLoad,!1),x.removeEventListener("error",onImageError,!1),ic.add(i,this),a&&a(this),u.manager.itemEnd(i)}function onImageError(a){x.removeEventListener("load",onImageLoad,!1),x.removeEventListener("error",onImageError,!1),o&&o(a),u.manager.itemError(i),u.manager.itemEnd(i)}return __name(onImageLoad,"onImageLoad"),__name(onImageError,"onImageError"),x.addEventListener("load",onImageLoad,!1),x.addEventListener("error",onImageError,!1),"data:"!==i.substr(0,5)&&void 0!==this.crossOrigin&&(x.crossOrigin=this.crossOrigin),u.manager.itemStart(i),x.src=i,x},"load")}),__name(CubeTextureLoader,"CubeTextureLoader"),CubeTextureLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:CubeTextureLoader,load:/* @__PURE__ */__name(function(i,a,s,o){const u=new CubeTexture,_=new ImageLoader(this.manager);_.setCrossOrigin(this.crossOrigin),_.setPath(this.path);let x=0;function loadTexture(s){_.load(i[s],function(i){u.images[s]=i,x++,6===x&&(u.needsUpdate=!0,a&&a(u))},void 0,o)}__name(loadTexture,"loadTexture");for(let w=0;w<i.length;++w)loadTexture(w);return u},"load")}),__name(DataTextureLoader,"DataTextureLoader"),DataTextureLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:DataTextureLoader,load:/* @__PURE__ */__name(function(i,a,s,o){const u=this,_=new DataTexture,x=new FileLoader(this.manager);return x.setResponseType("arraybuffer"),x.setRequestHeader(this.requestHeader),x.setPath(this.path),x.setWithCredentials(u.withCredentials),x.load(i,function(i){const s=u.parse(i);s&&(void 0!==s.image?_.image=s.image:void 0!==s.data&&(_.image.width=s.width,_.image.height=s.height,_.image.data=s.data),_.wrapS=void 0!==s.wrapS?s.wrapS:Mt,_.wrapT=void 0!==s.wrapT?s.wrapT:Mt,_.magFilter=void 0!==s.magFilter?s.magFilter:Dt,_.minFilter=void 0!==s.minFilter?s.minFilter:Dt,_.anisotropy=void 0!==s.anisotropy?s.anisotropy:1,void 0!==s.encoding&&(_.encoding=s.encoding),void 0!==s.flipY&&(_.flipY=s.flipY),void 0!==s.format&&(_.format=s.format),void 0!==s.type&&(_.type=s.type),void 0!==s.mipmaps&&(_.mipmaps=s.mipmaps,_.minFilter=Ot),1===s.mipmapCount&&(_.minFilter=Dt),_.needsUpdate=!0,a&&a(_,s))},s,o),_},"load")}),__name(TextureLoader,"TextureLoader"),TextureLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:TextureLoader,load:/* @__PURE__ */__name(function(i,a,s,o){const u=new Texture,_=new ImageLoader(this.manager);return _.setCrossOrigin(this.crossOrigin),_.setPath(this.path),_.load(i,function(s){u.image=s;const o=i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/);u.format=o?Kt:Yt,u.needsUpdate=!0,void 0!==a&&a(u)},s,o),u},"load")}),__name(Curve,"Curve"),_extends2(Curve.prototype,{getPoint:/* @__PURE__ */__name(function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},"getPoint"),getPointAt:/* @__PURE__ */__name(function(i,a){const s=this.getUtoTmapping(i);return this.getPoint(s,a)},"getPointAt"),getPoints:/* @__PURE__ */__name(function(i=5){const a=[];for(let s=0;s<=i;s++)a.push(this.getPoint(s/i));return a},"getPoints"),getSpacedPoints:/* @__PURE__ */__name(function(i=5){const a=[];for(let s=0;s<=i;s++)a.push(this.getPointAt(s/i));return a},"getSpacedPoints"),getLength:/* @__PURE__ */__name(function(){const i=this.getLengths();return i[i.length-1]},"getLength"),getLengths:/* @__PURE__ */__name(function(i){if(void 0===i&&(i=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===i+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const a=[];let s,o=this.getPoint(0),u=0;a.push(0);for(let _=1;_<=i;_++)s=this.getPoint(_/i),u+=s.distanceTo(o),a.push(u),o=s;return this.cacheArcLengths=a,a},"getLengths"),updateArcLengths:/* @__PURE__ */__name(function(){this.needsUpdate=!0,this.getLengths()},"updateArcLengths"),getUtoTmapping:/* @__PURE__ */__name(function(i,a){const s=this.getLengths();let o=0;const u=s.length;let _;_=a||i*s[u-1];let x,w=0,C=u-1;for(;w<=C;)if(o=Math.floor(w+(C-w)/2),x=s[o]-_,x<0)w=o+1;else{if(!(x>0)){C=o;break}C=o-1}if(o=C,s[o]===_)return o/(u-1);const L=s[o];return(o+(_-L)/(s[o+1]-L))/(u-1)},"getUtoTmapping"),getTangent:/* @__PURE__ */__name(function(i,a){const s=1e-4;let o=i-s,u=i+s;o<0&&(o=0),u>1&&(u=1);const _=this.getPoint(o),x=this.getPoint(u),w=a||(_.isVector2?new Sr:new Or);return w.copy(x).sub(_).normalize(),w},"getTangent"),getTangentAt:/* @__PURE__ */__name(function(i,a){const s=this.getUtoTmapping(i);return this.getTangent(s,a)},"getTangentAt"),computeFrenetFrames:/* @__PURE__ */__name(function(i,a){const s=new Or,o=[],u=[],_=[],x=new Or,w=new ya;for(let j=0;j<=i;j++){const a=j/i;o[j]=this.getTangentAt(a,new Or),o[j].normalize()}u[0]=new Or,_[0]=new Or;let C=Number.MAX_VALUE;const L=Math.abs(o[0].x),B=Math.abs(o[0].y),U=Math.abs(o[0].z);L<=C&&(C=L,s.set(1,0,0)),B<=C&&(C=B,s.set(0,1,0)),U<=C&&s.set(0,0,1),x.crossVectors(o[0],s).normalize(),u[0].crossVectors(o[0],x),_[0].crossVectors(o[0],u[0]);for(let j=1;j<=i;j++){if(u[j]=u[j-1].clone(),_[j]=_[j-1].clone(),x.crossVectors(o[j-1],o[j]),x.length()>Number.EPSILON){x.normalize();const i=Math.acos(br.clamp(o[j-1].dot(o[j]),-1,1));u[j].applyMatrix4(w.makeRotationAxis(x,i))}_[j].crossVectors(o[j],u[j])}if(!0===a){let a=Math.acos(br.clamp(u[0].dot(u[i]),-1,1));a/=i,o[0].dot(x.crossVectors(u[0],u[i]))>0&&(a=-a);for(let s=1;s<=i;s++)u[s].applyMatrix4(w.makeRotationAxis(o[s],a*s)),_[s].crossVectors(o[s],u[s])}return{tangents:o,normals:u,binormals:_}},"computeFrenetFrames"),clone:/* @__PURE__ */__name(function(){return(new this.constructor).copy(this)},"clone"),copy:/* @__PURE__ */__name(function(i){return this.arcLengthDivisions=i.arcLengthDivisions,this},"copy"),toJSON:/* @__PURE__ */__name(function(){const i={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return i.arcLengthDivisions=this.arcLengthDivisions,i.type=this.type,i},"toJSON"),fromJSON:/* @__PURE__ */__name(function(i){return this.arcLengthDivisions=i.arcLengthDivisions,this},"fromJSON")}),__name(EllipseCurve,"EllipseCurve"),EllipseCurve.prototype=Object.create(Curve.prototype),EllipseCurve.prototype.constructor=EllipseCurve,EllipseCurve.prototype.isEllipseCurve=!0,EllipseCurve.prototype.getPoint=function(i,a){const s=a||new Sr,o=2*Math.PI;let u=this.aEndAngle-this.aStartAngle;const _=Math.abs(u)<Number.EPSILON;for(;u<0;)u+=o;for(;u>o;)u-=o;u<Number.EPSILON&&(u=_?0:o),!0!==this.aClockwise||_||(u===o?u=-o:u-=o);const x=this.aStartAngle+i*u;let w=this.aX+this.xRadius*Math.cos(x),C=this.aY+this.yRadius*Math.sin(x);if(0!==this.aRotation){const i=Math.cos(this.aRotation),a=Math.sin(this.aRotation),s=w-this.aX,o=C-this.aY;w=s*i-o*a+this.aX,C=s*a+o*i+this.aY}return s.set(w,C)},EllipseCurve.prototype.copy=function(i){return Curve.prototype.copy.call(this,i),this.aX=i.aX,this.aY=i.aY,this.xRadius=i.xRadius,this.yRadius=i.yRadius,this.aStartAngle=i.aStartAngle,this.aEndAngle=i.aEndAngle,this.aClockwise=i.aClockwise,this.aRotation=i.aRotation,this},EllipseCurve.prototype.toJSON=function(){const i=Curve.prototype.toJSON.call(this);return i.aX=this.aX,i.aY=this.aY,i.xRadius=this.xRadius,i.yRadius=this.yRadius,i.aStartAngle=this.aStartAngle,i.aEndAngle=this.aEndAngle,i.aClockwise=this.aClockwise,i.aRotation=this.aRotation,i},EllipseCurve.prototype.fromJSON=function(i){return Curve.prototype.fromJSON.call(this,i),this.aX=i.aX,this.aY=i.aY,this.xRadius=i.xRadius,this.yRadius=i.yRadius,this.aStartAngle=i.aStartAngle,this.aEndAngle=i.aEndAngle,this.aClockwise=i.aClockwise,this.aRotation=i.aRotation,this},__name(ArcCurve,"ArcCurve"),ArcCurve.prototype=Object.create(EllipseCurve.prototype),ArcCurve.prototype.constructor=ArcCurve,ArcCurve.prototype.isArcCurve=!0,__name(CubicPoly,"CubicPoly");const sc=new Or,oc=new CubicPoly,lc=new CubicPoly,cc=new CubicPoly;function CatmullRomCurve3(i=[],a=!1,s="centripetal",o=.5){Curve.call(this),this.type="CatmullRomCurve3",this.points=i,this.closed=a,this.curveType=s,this.tension=o}function CatmullRom(i,a,s,o,u){const _=.5*(o-a),x=.5*(u-s),w=i*i;return(2*s-2*o+_+x)*(i*w)+(-3*s+3*o-2*_-x)*w+_*i+s}function QuadraticBezierP0(i,a){const s=1-i;return s*s*a}function QuadraticBezierP1(i,a){return 2*(1-i)*i*a}function QuadraticBezierP2(i,a){return i*i*a}function QuadraticBezier(i,a,s,o){return QuadraticBezierP0(i,a)+QuadraticBezierP1(i,s)+QuadraticBezierP2(i,o)}function CubicBezierP0(i,a){const s=1-i;return s*s*s*a}function CubicBezierP1(i,a){const s=1-i;return 3*s*s*i*a}function CubicBezierP2(i,a){return 3*(1-i)*i*i*a}function CubicBezierP3(i,a){return i*i*i*a}function CubicBezier(i,a,s,o,u){return CubicBezierP0(i,a)+CubicBezierP1(i,s)+CubicBezierP2(i,o)+CubicBezierP3(i,u)}function CubicBezierCurve(i=new Sr,a=new Sr,s=new Sr,o=new Sr){Curve.call(this),this.type="CubicBezierCurve",this.v0=i,this.v1=a,this.v2=s,this.v3=o}function CubicBezierCurve3(i=new Or,a=new Or,s=new Or,o=new Or){Curve.call(this),this.type="CubicBezierCurve3",this.v0=i,this.v1=a,this.v2=s,this.v3=o}function LineCurve(i=new Sr,a=new Sr){Curve.call(this),this.type="LineCurve",this.v1=i,this.v2=a}function LineCurve3(i=new Or,a=new Or){Curve.call(this),this.type="LineCurve3",this.v1=i,this.v2=a}function QuadraticBezierCurve(i=new Sr,a=new Sr,s=new Sr){Curve.call(this),this.type="QuadraticBezierCurve",this.v0=i,this.v1=a,this.v2=s}function QuadraticBezierCurve3(i=new Or,a=new Or,s=new Or){Curve.call(this),this.type="QuadraticBezierCurve3",this.v0=i,this.v1=a,this.v2=s}function SplineCurve(i=[]){Curve.call(this),this.type="SplineCurve",this.points=i}__name(CatmullRomCurve3,"CatmullRomCurve3"),CatmullRomCurve3.prototype=Object.create(Curve.prototype),CatmullRomCurve3.prototype.constructor=CatmullRomCurve3,CatmullRomCurve3.prototype.isCatmullRomCurve3=!0,CatmullRomCurve3.prototype.getPoint=function(i,a=new Or){const s=a,o=this.points,u=o.length,_=(u-(this.closed?0:1))*i;let x,w,C=Math.floor(_),L=_-C;this.closed?C+=C>0?0:(Math.floor(Math.abs(C)/u)+1)*u:0===L&&C===u-1&&(C=u-2,L=1),this.closed||C>0?x=o[(C-1)%u]:(sc.subVectors(o[0],o[1]).add(o[0]),x=sc);const B=o[C%u],U=o[(C+1)%u];if(this.closed||C+2<u?w=o[(C+2)%u]:(sc.subVectors(o[u-1],o[u-2]).add(o[u-1]),w=sc),"centripetal"===this.curveType||"chordal"===this.curveType){const i="chordal"===this.curveType?.5:.25;let a=Math.pow(x.distanceToSquared(B),i),s=Math.pow(B.distanceToSquared(U),i),o=Math.pow(U.distanceToSquared(w),i);s<1e-4&&(s=1),a<1e-4&&(a=s),o<1e-4&&(o=s),oc.initNonuniformCatmullRom(x.x,B.x,U.x,w.x,a,s,o),lc.initNonuniformCatmullRom(x.y,B.y,U.y,w.y,a,s,o),cc.initNonuniformCatmullRom(x.z,B.z,U.z,w.z,a,s,o)}else"catmullrom"===this.curveType&&(oc.initCatmullRom(x.x,B.x,U.x,w.x,this.tension),lc.initCatmullRom(x.y,B.y,U.y,w.y,this.tension),cc.initCatmullRom(x.z,B.z,U.z,w.z,this.tension));return s.set(oc.calc(L),lc.calc(L),cc.calc(L)),s},CatmullRomCurve3.prototype.copy=function(i){Curve.prototype.copy.call(this,i),this.points=[];for(let a=0,s=i.points.length;a<s;a++){const s=i.points[a];this.points.push(s.clone())}return this.closed=i.closed,this.curveType=i.curveType,this.tension=i.tension,this},CatmullRomCurve3.prototype.toJSON=function(){const i=Curve.prototype.toJSON.call(this);i.points=[];for(let a=0,s=this.points.length;a<s;a++){const s=this.points[a];i.points.push(s.toArray())}return i.closed=this.closed,i.curveType=this.curveType,i.tension=this.tension,i},CatmullRomCurve3.prototype.fromJSON=function(i){Curve.prototype.fromJSON.call(this,i),this.points=[];for(let a=0,s=i.points.length;a<s;a++){const s=i.points[a];this.points.push((new Or).fromArray(s))}return this.closed=i.closed,this.curveType=i.curveType,this.tension=i.tension,this},__name(CatmullRom,"CatmullRom"),__name(QuadraticBezierP0,"QuadraticBezierP0"),__name(QuadraticBezierP1,"QuadraticBezierP1"),__name(QuadraticBezierP2,"QuadraticBezierP2"),__name(QuadraticBezier,"QuadraticBezier"),__name(CubicBezierP0,"CubicBezierP0"),__name(CubicBezierP1,"CubicBezierP1"),__name(CubicBezierP2,"CubicBezierP2"),__name(CubicBezierP3,"CubicBezierP3"),__name(CubicBezier,"CubicBezier"),__name(CubicBezierCurve,"CubicBezierCurve"),CubicBezierCurve.prototype=Object.create(Curve.prototype),CubicBezierCurve.prototype.constructor=CubicBezierCurve,CubicBezierCurve.prototype.isCubicBezierCurve=!0,CubicBezierCurve.prototype.getPoint=function(i,a=new Sr){const s=a,o=this.v0,u=this.v1,_=this.v2,x=this.v3;return s.set(CubicBezier(i,o.x,u.x,_.x,x.x),CubicBezier(i,o.y,u.y,_.y,x.y)),s},CubicBezierCurve.prototype.copy=function(i){return Curve.prototype.copy.call(this,i),this.v0.copy(i.v0),this.v1.copy(i.v1),this.v2.copy(i.v2),this.v3.copy(i.v3),this},CubicBezierCurve.prototype.toJSON=function(){const i=Curve.prototype.toJSON.call(this);return i.v0=this.v0.toArray(),i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i.v3=this.v3.toArray(),i},CubicBezierCurve.prototype.fromJSON=function(i){return Curve.prototype.fromJSON.call(this,i),this.v0.fromArray(i.v0),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this.v3.fromArray(i.v3),this},__name(CubicBezierCurve3,"CubicBezierCurve3"),CubicBezierCurve3.prototype=Object.create(Curve.prototype),CubicBezierCurve3.prototype.constructor=CubicBezierCurve3,CubicBezierCurve3.prototype.isCubicBezierCurve3=!0,CubicBezierCurve3.prototype.getPoint=function(i,a=new Or){const s=a,o=this.v0,u=this.v1,_=this.v2,x=this.v3;return s.set(CubicBezier(i,o.x,u.x,_.x,x.x),CubicBezier(i,o.y,u.y,_.y,x.y),CubicBezier(i,o.z,u.z,_.z,x.z)),s},CubicBezierCurve3.prototype.copy=function(i){return Curve.prototype.copy.call(this,i),this.v0.copy(i.v0),this.v1.copy(i.v1),this.v2.copy(i.v2),this.v3.copy(i.v3),this},CubicBezierCurve3.prototype.toJSON=function(){const i=Curve.prototype.toJSON.call(this);return i.v0=this.v0.toArray(),i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i.v3=this.v3.toArray(),i},CubicBezierCurve3.prototype.fromJSON=function(i){return Curve.prototype.fromJSON.call(this,i),this.v0.fromArray(i.v0),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this.v3.fromArray(i.v3),this},__name(LineCurve,"LineCurve"),LineCurve.prototype=Object.create(Curve.prototype),LineCurve.prototype.constructor=LineCurve,LineCurve.prototype.isLineCurve=!0,LineCurve.prototype.getPoint=function(i,a=new Sr){const s=a;return 1===i?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(i).add(this.v1)),s},LineCurve.prototype.getPointAt=function(i,a){return this.getPoint(i,a)},LineCurve.prototype.getTangent=function(i,a){const s=a||new Sr;return s.copy(this.v2).sub(this.v1).normalize(),s},LineCurve.prototype.copy=function(i){return Curve.prototype.copy.call(this,i),this.v1.copy(i.v1),this.v2.copy(i.v2),this},LineCurve.prototype.toJSON=function(){const i=Curve.prototype.toJSON.call(this);return i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i},LineCurve.prototype.fromJSON=function(i){return Curve.prototype.fromJSON.call(this,i),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this},__name(LineCurve3,"LineCurve3"),LineCurve3.prototype=Object.create(Curve.prototype),LineCurve3.prototype.constructor=LineCurve3,LineCurve3.prototype.isLineCurve3=!0,LineCurve3.prototype.getPoint=function(i,a=new Or){const s=a;return 1===i?s.copy(this.v2):(s.copy(this.v2).sub(this.v1),s.multiplyScalar(i).add(this.v1)),s},LineCurve3.prototype.getPointAt=function(i,a){return this.getPoint(i,a)},LineCurve3.prototype.copy=function(i){return Curve.prototype.copy.call(this,i),this.v1.copy(i.v1),this.v2.copy(i.v2),this},LineCurve3.prototype.toJSON=function(){const i=Curve.prototype.toJSON.call(this);return i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i},LineCurve3.prototype.fromJSON=function(i){return Curve.prototype.fromJSON.call(this,i),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this},__name(QuadraticBezierCurve,"QuadraticBezierCurve"),QuadraticBezierCurve.prototype=Object.create(Curve.prototype),QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve,QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0,QuadraticBezierCurve.prototype.getPoint=function(i,a=new Sr){const s=a,o=this.v0,u=this.v1,_=this.v2;return s.set(QuadraticBezier(i,o.x,u.x,_.x),QuadraticBezier(i,o.y,u.y,_.y)),s},QuadraticBezierCurve.prototype.copy=function(i){return Curve.prototype.copy.call(this,i),this.v0.copy(i.v0),this.v1.copy(i.v1),this.v2.copy(i.v2),this},QuadraticBezierCurve.prototype.toJSON=function(){const i=Curve.prototype.toJSON.call(this);return i.v0=this.v0.toArray(),i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i},QuadraticBezierCurve.prototype.fromJSON=function(i){return Curve.prototype.fromJSON.call(this,i),this.v0.fromArray(i.v0),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this},__name(QuadraticBezierCurve3,"QuadraticBezierCurve3"),QuadraticBezierCurve3.prototype=Object.create(Curve.prototype),QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3,QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0,QuadraticBezierCurve3.prototype.getPoint=function(i,a=new Or){const s=a,o=this.v0,u=this.v1,_=this.v2;return s.set(QuadraticBezier(i,o.x,u.x,_.x),QuadraticBezier(i,o.y,u.y,_.y),QuadraticBezier(i,o.z,u.z,_.z)),s},QuadraticBezierCurve3.prototype.copy=function(i){return Curve.prototype.copy.call(this,i),this.v0.copy(i.v0),this.v1.copy(i.v1),this.v2.copy(i.v2),this},QuadraticBezierCurve3.prototype.toJSON=function(){const i=Curve.prototype.toJSON.call(this);return i.v0=this.v0.toArray(),i.v1=this.v1.toArray(),i.v2=this.v2.toArray(),i},QuadraticBezierCurve3.prototype.fromJSON=function(i){return Curve.prototype.fromJSON.call(this,i),this.v0.fromArray(i.v0),this.v1.fromArray(i.v1),this.v2.fromArray(i.v2),this},__name(SplineCurve,"SplineCurve"),SplineCurve.prototype=Object.create(Curve.prototype),SplineCurve.prototype.constructor=SplineCurve,SplineCurve.prototype.isSplineCurve=!0,SplineCurve.prototype.getPoint=function(i,a=new Sr){const s=a,o=this.points,u=(o.length-1)*i,_=Math.floor(u),x=u-_,w=o[0===_?_:_-1],C=o[_],L=o[_>o.length-2?o.length-1:_+1],B=o[_>o.length-3?o.length-1:_+2];return s.set(CatmullRom(x,w.x,C.x,L.x,B.x),CatmullRom(x,w.y,C.y,L.y,B.y)),s},SplineCurve.prototype.copy=function(i){Curve.prototype.copy.call(this,i),this.points=[];for(let a=0,s=i.points.length;a<s;a++){const s=i.points[a];this.points.push(s.clone())}return this},SplineCurve.prototype.toJSON=function(){const i=Curve.prototype.toJSON.call(this);i.points=[];for(let a=0,s=this.points.length;a<s;a++){const s=this.points[a];i.points.push(s.toArray())}return i},SplineCurve.prototype.fromJSON=function(i){Curve.prototype.fromJSON.call(this,i),this.points=[];for(let a=0,s=i.points.length;a<s;a++){const s=i.points[a];this.points.push((new Sr).fromArray(s))}return this};var dc=/* @__PURE__ */Object.freeze({__proto__:null,ArcCurve:ArcCurve,CatmullRomCurve3:CatmullRomCurve3,CubicBezierCurve:CubicBezierCurve,CubicBezierCurve3:CubicBezierCurve3,EllipseCurve:EllipseCurve,LineCurve:LineCurve,LineCurve3:LineCurve3,QuadraticBezierCurve:QuadraticBezierCurve,QuadraticBezierCurve3:QuadraticBezierCurve3,SplineCurve:SplineCurve});function CurvePath(){Curve.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Path(i){CurvePath.call(this),this.type="Path",this.currentPoint=new Sr,i&&this.setFromPoints(i)}function Shape(i){Path.call(this,i),this.uuid=br.generateUUID(),this.type="Shape",this.holes=[]}function Light(i,a=1){Object3D.call(this),this.type="Light",this.color=new Ms(i),this.intensity=a}function HemisphereLight(i,a,s){Light.call(this,i,s),this.type="HemisphereLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Ms(a)}function LightShadow(i){this.camera=i,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Sr(512,512),this.map=null,this.mapPass=null,this.matrix=new ya,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yo,this._frameExtents=new Sr(1,1),this._viewportCount=1,this._viewports=[new kr(0,0,1,1)]}function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500)),this.focus=1}function SpotLight(i,a,s,o,u,_){Light.call(this,i,a),this.type="SpotLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,"power",{get:/* @__PURE__ */__name(function(){return this.intensity*Math.PI},"get"),set:/* @__PURE__ */__name(function(i){this.intensity=i/Math.PI},"set")}),this.distance=void 0!==s?s:0,this.angle=void 0!==o?o:Math.PI/3,this.penumbra=void 0!==u?u:0,this.decay=void 0!==_?_:1,this.shadow=new SpotLightShadow}function PointLightShadow(){LightShadow.call(this,new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new Sr(4,2),this._viewportCount=6,this._viewports=[new kr(2,1,1,1),new kr(0,1,1,1),new kr(3,1,1,1),new kr(1,1,1,1),new kr(3,0,1,1),new kr(1,0,1,1)],this._cubeDirections=[new Or(1,0,0),new Or(-1,0,0),new Or(0,0,1),new Or(0,0,-1),new Or(0,1,0),new Or(0,-1,0)],this._cubeUps=[new Or(0,1,0),new Or(0,1,0),new Or(0,1,0),new Or(0,1,0),new Or(0,0,1),new Or(0,0,-1)]}function PointLight(i,a,s,o){Light.call(this,i,a),this.type="PointLight",Object.defineProperty(this,"power",{get:/* @__PURE__ */__name(function(){return 4*this.intensity*Math.PI},"get"),set:/* @__PURE__ */__name(function(i){this.intensity=i/(4*Math.PI)},"set")}),this.distance=void 0!==s?s:0,this.decay=void 0!==o?o:1,this.shadow=new PointLightShadow}function OrthographicCamera(i=-1,a=1,s=1,o=-1,u=.1,_=2e3){Camera.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=i,this.right=a,this.top=s,this.bottom=o,this.near=u,this.far=_,this.updateProjectionMatrix()}function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}function DirectionalLight(i,a){Light.call(this,i,a),this.type="DirectionalLight",this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}function AmbientLight(i,a){Light.call(this,i,a),this.type="AmbientLight"}function RectAreaLight(i,a,s,o){Light.call(this,i,a),this.type="RectAreaLight",this.width=void 0!==s?s:10,this.height=void 0!==o?o:10}__name(CurvePath,"CurvePath"),CurvePath.prototype=_extends2(Object.create(Curve.prototype),{constructor:CurvePath,add:/* @__PURE__ */__name(function(i){this.curves.push(i)},"add"),closePath:/* @__PURE__ */__name(function(){const i=this.curves[0].getPoint(0),a=this.curves[this.curves.length-1].getPoint(1);i.equals(a)||this.curves.push(new LineCurve(a,i))},"closePath"),getPoint:/* @__PURE__ */__name(function(i){const a=i*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=a){const i=s[o]-a,u=this.curves[o],_=u.getLength(),x=0===_?0:1-i/_;return u.getPointAt(x)}o++}return null},"getPoint"),getLength:/* @__PURE__ */__name(function(){const i=this.getCurveLengths();return i[i.length-1]},"getLength"),updateArcLengths:/* @__PURE__ */__name(function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},"updateArcLengths"),getCurveLengths:/* @__PURE__ */__name(function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const i=[];let a=0;for(let s=0,o=this.curves.length;s<o;s++)a+=this.curves[s].getLength(),i.push(a);return this.cacheLengths=i,i},"getCurveLengths"),getSpacedPoints:/* @__PURE__ */__name(function(i=40){const a=[];for(let s=0;s<=i;s++)a.push(this.getPoint(s/i));return this.autoClose&&a.push(a[0]),a},"getSpacedPoints"),getPoints:/* @__PURE__ */__name(function(i=12){const a=[];let s;for(let o=0,u=this.curves;o<u.length;o++){const _=u[o],x=_&&_.isEllipseCurve?2*i:_&&(_.isLineCurve||_.isLineCurve3)?1:_&&_.isSplineCurve?i*_.points.length:i,w=_.getPoints(x);for(let i=0;i<w.length;i++){const o=w[i];s&&s.equals(o)||(a.push(o),s=o)}}return this.autoClose&&a.length>1&&!a[a.length-1].equals(a[0])&&a.push(a[0]),a},"getPoints"),copy:/* @__PURE__ */__name(function(i){Curve.prototype.copy.call(this,i),this.curves=[];for(let a=0,s=i.curves.length;a<s;a++){const s=i.curves[a];this.curves.push(s.clone())}return this.autoClose=i.autoClose,this},"copy"),toJSON:/* @__PURE__ */__name(function(){const i=Curve.prototype.toJSON.call(this);i.autoClose=this.autoClose,i.curves=[];for(let a=0,s=this.curves.length;a<s;a++){const s=this.curves[a];i.curves.push(s.toJSON())}return i},"toJSON"),fromJSON:/* @__PURE__ */__name(function(i){Curve.prototype.fromJSON.call(this,i),this.autoClose=i.autoClose,this.curves=[];for(let a=0,s=i.curves.length;a<s;a++){const s=i.curves[a];this.curves.push((new dc[s.type]).fromJSON(s))}return this},"fromJSON")}),__name(Path,"Path"),Path.prototype=_extends2(Object.create(CurvePath.prototype),{constructor:Path,setFromPoints:/* @__PURE__ */__name(function(i){this.moveTo(i[0].x,i[0].y);for(let a=1,s=i.length;a<s;a++)this.lineTo(i[a].x,i[a].y);return this},"setFromPoints"),moveTo:/* @__PURE__ */__name(function(i,a){return this.currentPoint.set(i,a),this},"moveTo"),lineTo:/* @__PURE__ */__name(function(i,a){const s=new LineCurve(this.currentPoint.clone(),new Sr(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this},"lineTo"),quadraticCurveTo:/* @__PURE__ */__name(function(i,a,s,o){const u=new QuadraticBezierCurve(this.currentPoint.clone(),new Sr(i,a),new Sr(s,o));return this.curves.push(u),this.currentPoint.set(s,o),this},"quadraticCurveTo"),bezierCurveTo:/* @__PURE__ */__name(function(i,a,s,o,u,_){const x=new CubicBezierCurve(this.currentPoint.clone(),new Sr(i,a),new Sr(s,o),new Sr(u,_));return this.curves.push(x),this.currentPoint.set(u,_),this},"bezierCurveTo"),splineThru:/* @__PURE__ */__name(function(i){const a=new SplineCurve([this.currentPoint.clone()].concat(i));return this.curves.push(a),this.currentPoint.copy(i[i.length-1]),this},"splineThru"),arc:/* @__PURE__ */__name(function(i,a,s,o,u,_){const x=this.currentPoint.x,w=this.currentPoint.y;return this.absarc(i+x,a+w,s,o,u,_),this},"arc"),absarc:/* @__PURE__ */__name(function(i,a,s,o,u,_){return this.absellipse(i,a,s,s,o,u,_),this},"absarc"),ellipse:/* @__PURE__ */__name(function(i,a,s,o,u,_,x,w){const C=this.currentPoint.x,L=this.currentPoint.y;return this.absellipse(i+C,a+L,s,o,u,_,x,w),this},"ellipse"),absellipse:/* @__PURE__ */__name(function(i,a,s,o,u,_,x,w){const C=new EllipseCurve(i,a,s,o,u,_,x,w);if(this.curves.length>0){const i=C.getPoint(0);i.equals(this.currentPoint)||this.lineTo(i.x,i.y)}this.curves.push(C);const L=C.getPoint(1);return this.currentPoint.copy(L),this},"absellipse"),copy:/* @__PURE__ */__name(function(i){return CurvePath.prototype.copy.call(this,i),this.currentPoint.copy(i.currentPoint),this},"copy"),toJSON:/* @__PURE__ */__name(function(){const i=CurvePath.prototype.toJSON.call(this);return i.currentPoint=this.currentPoint.toArray(),i},"toJSON"),fromJSON:/* @__PURE__ */__name(function(i){return CurvePath.prototype.fromJSON.call(this,i),this.currentPoint.fromArray(i.currentPoint),this},"fromJSON")}),__name(Shape,"Shape"),Shape.prototype=_extends2(Object.create(Path.prototype),{constructor:Shape,getPointsHoles:/* @__PURE__ */__name(function(i){const a=[];for(let s=0,o=this.holes.length;s<o;s++)a[s]=this.holes[s].getPoints(i);return a},"getPointsHoles"),extractPoints:/* @__PURE__ */__name(function(i){return{shape:this.getPoints(i),holes:this.getPointsHoles(i)}},"extractPoints"),copy:/* @__PURE__ */__name(function(i){Path.prototype.copy.call(this,i),this.holes=[];for(let a=0,s=i.holes.length;a<s;a++){const s=i.holes[a];this.holes.push(s.clone())}return this},"copy"),toJSON:/* @__PURE__ */__name(function(){const i=Path.prototype.toJSON.call(this);i.uuid=this.uuid,i.holes=[];for(let a=0,s=this.holes.length;a<s;a++){const s=this.holes[a];i.holes.push(s.toJSON())}return i},"toJSON"),fromJSON:/* @__PURE__ */__name(function(i){Path.prototype.fromJSON.call(this,i),this.uuid=i.uuid,this.holes=[];for(let a=0,s=i.holes.length;a<s;a++){const s=i.holes[a];this.holes.push((new Path).fromJSON(s))}return this},"fromJSON")}),__name(Light,"Light"),Light.prototype=_extends2(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:/* @__PURE__ */__name(function(i){return Object3D.prototype.copy.call(this,i),this.color.copy(i.color),this.intensity=i.intensity,this},"copy"),toJSON:/* @__PURE__ */__name(function(i){const a=Object3D.prototype.toJSON.call(this,i);return a.object.color=this.color.getHex(),a.object.intensity=this.intensity,void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(a.object.distance=this.distance),void 0!==this.angle&&(a.object.angle=this.angle),void 0!==this.decay&&(a.object.decay=this.decay),void 0!==this.penumbra&&(a.object.penumbra=this.penumbra),void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON()),a},"toJSON")}),__name(HemisphereLight,"HemisphereLight"),HemisphereLight.prototype=_extends2(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:/* @__PURE__ */__name(function(i){return Light.prototype.copy.call(this,i),this.groundColor.copy(i.groundColor),this},"copy")}),__name(LightShadow,"LightShadow"),_extends2(LightShadow.prototype,{_projScreenMatrix:new ya,_lightPositionWorld:new Or,_lookTarget:new Or,getViewportCount:/* @__PURE__ */__name(function(){return this._viewportCount},"getViewportCount"),getFrustum:/* @__PURE__ */__name(function(){return this._frustum},"getFrustum"),updateMatrices:/* @__PURE__ */__name(function(i){const a=this.camera,s=this.matrix,o=this._projScreenMatrix,u=this._lookTarget,_=this._lightPositionWorld;_.setFromMatrixPosition(i.matrixWorld),a.position.copy(_),u.setFromMatrixPosition(i.target.matrixWorld),a.lookAt(u),a.updateMatrixWorld(),o.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(a.projectionMatrix),s.multiply(a.matrixWorldInverse)},"updateMatrices"),getViewport:/* @__PURE__ */__name(function(i){return this._viewports[i]},"getViewport"),getFrameExtents:/* @__PURE__ */__name(function(){return this._frameExtents},"getFrameExtents"),copy:/* @__PURE__ */__name(function(i){return this.camera=i.camera.clone(),this.bias=i.bias,this.radius=i.radius,this.mapSize.copy(i.mapSize),this},"copy"),clone:/* @__PURE__ */__name(function(){return(new this.constructor).copy(this)},"clone"),toJSON:/* @__PURE__ */__name(function(){const i={};return 0!==this.bias&&(i.bias=this.bias),0!==this.normalBias&&(i.normalBias=this.normalBias),1!==this.radius&&(i.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(i.mapSize=this.mapSize.toArray()),i.camera=this.camera.toJSON(!1).object,delete i.camera.matrix,i},"toJSON")}),__name(SpotLightShadow,"SpotLightShadow"),SpotLightShadow.prototype=_extends2(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,updateMatrices:/* @__PURE__ */__name(function(i){const a=this.camera,s=2*br.RAD2DEG*i.angle*this.focus,o=this.mapSize.width/this.mapSize.height,u=i.distance||a.far;s===a.fov&&o===a.aspect&&u===a.far||(a.fov=s,a.aspect=o,a.far=u,a.updateProjectionMatrix()),LightShadow.prototype.updateMatrices.call(this,i)},"updateMatrices")}),__name(SpotLight,"SpotLight"),SpotLight.prototype=_extends2(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:/* @__PURE__ */__name(function(i){return Light.prototype.copy.call(this,i),this.distance=i.distance,this.angle=i.angle,this.penumbra=i.penumbra,this.decay=i.decay,this.target=i.target.clone(),this.shadow=i.shadow.clone(),this},"copy")}),__name(PointLightShadow,"PointLightShadow"),PointLightShadow.prototype=_extends2(Object.create(LightShadow.prototype),{constructor:PointLightShadow,isPointLightShadow:!0,updateMatrices:/* @__PURE__ */__name(function(i,a=0){const s=this.camera,o=this.matrix,u=this._lightPositionWorld,_=this._lookTarget,x=this._projScreenMatrix;u.setFromMatrixPosition(i.matrixWorld),s.position.copy(u),_.copy(s.position),_.add(this._cubeDirections[a]),s.up.copy(this._cubeUps[a]),s.lookAt(_),s.updateMatrixWorld(),o.makeTranslation(-u.x,-u.y,-u.z),x.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(x)},"updateMatrices")}),__name(PointLight,"PointLight"),PointLight.prototype=_extends2(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:/* @__PURE__ */__name(function(i){return Light.prototype.copy.call(this,i),this.distance=i.distance,this.decay=i.decay,this.shadow=i.shadow.clone(),this},"copy")}),__name(OrthographicCamera,"OrthographicCamera"),OrthographicCamera.prototype=_extends2(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:/* @__PURE__ */__name(function(i,a){return Camera.prototype.copy.call(this,i,a),this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.near=i.near,this.far=i.far,this.zoom=i.zoom,this.view=null===i.view?null:_extends2({},i.view),this},"copy"),setViewOffset:/* @__PURE__ */__name(function(i,a,s,o,u,_){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=a,this.view.offsetX=s,this.view.offsetY=o,this.view.width=u,this.view.height=_,this.updateProjectionMatrix()},"setViewOffset"),clearViewOffset:/* @__PURE__ */__name(function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},"clearViewOffset"),updateProjectionMatrix:/* @__PURE__ */__name(function(){const i=(this.right-this.left)/(2*this.zoom),a=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let u=s-i,_=s+i,x=o+a,w=o-a;if(null!==this.view&&this.view.enabled){const i=(this.right-this.left)/this.view.fullWidth/this.zoom,a=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=i*this.view.offsetX,_=u+i*this.view.width,x-=a*this.view.offsetY,w=x-a*this.view.height}this.projectionMatrix.makeOrthographic(u,_,x,w,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},"updateProjectionMatrix"),toJSON:/* @__PURE__ */__name(function(i){const a=Object3D.prototype.toJSON.call(this,i);return a.object.zoom=this.zoom,a.object.left=this.left,a.object.right=this.right,a.object.top=this.top,a.object.bottom=this.bottom,a.object.near=this.near,a.object.far=this.far,null!==this.view&&(a.object.view=_extends2({},this.view)),a},"toJSON")}),__name(DirectionalLightShadow,"DirectionalLightShadow"),DirectionalLightShadow.prototype=_extends2(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow,isDirectionalLightShadow:!0,updateMatrices:/* @__PURE__ */__name(function(i){LightShadow.prototype.updateMatrices.call(this,i)},"updateMatrices")}),__name(DirectionalLight,"DirectionalLight"),DirectionalLight.prototype=_extends2(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:/* @__PURE__ */__name(function(i){return Light.prototype.copy.call(this,i),this.target=i.target.clone(),this.shadow=i.shadow.clone(),this},"copy")}),__name(AmbientLight,"AmbientLight"),AmbientLight.prototype=_extends2(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0}),__name(RectAreaLight,"RectAreaLight"),RectAreaLight.prototype=_extends2(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:/* @__PURE__ */__name(function(i){return Light.prototype.copy.call(this,i),this.width=i.width,this.height=i.height,this},"copy"),toJSON:/* @__PURE__ */__name(function(i){const a=Light.prototype.toJSON.call(this,i);return a.object.width=this.width,a.object.height=this.height,a},"toJSON")});const hc=class _SphericalHarmonics3{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let i=0;i<9;i++)this.coefficients.push(new Or)}set(i){for(let a=0;a<9;a++)this.coefficients[a].copy(i[a]);return this}zero(){for(let i=0;i<9;i++)this.coefficients[i].set(0,0,0);return this}getAt(i,a){const s=i.x,o=i.y,u=i.z,_=this.coefficients;return a.copy(_[0]).multiplyScalar(.282095),a.addScaledVector(_[1],.488603*o),a.addScaledVector(_[2],.488603*u),a.addScaledVector(_[3],.488603*s),a.addScaledVector(_[4],s*o*1.092548),a.addScaledVector(_[5],o*u*1.092548),a.addScaledVector(_[6],.315392*(3*u*u-1)),a.addScaledVector(_[7],s*u*1.092548),a.addScaledVector(_[8],.546274*(s*s-o*o)),a}getIrradianceAt(i,a){const s=i.x,o=i.y,u=i.z,_=this.coefficients;return a.copy(_[0]).multiplyScalar(.886227),a.addScaledVector(_[1],1.023328*o),a.addScaledVector(_[2],1.023328*u),a.addScaledVector(_[3],1.023328*s),a.addScaledVector(_[4],.858086*s*o),a.addScaledVector(_[5],.858086*o*u),a.addScaledVector(_[6],.743125*u*u-.247708),a.addScaledVector(_[7],.858086*s*u),a.addScaledVector(_[8],.429043*(s*s-o*o)),a}add(i){for(let a=0;a<9;a++)this.coefficients[a].add(i.coefficients[a]);return this}addScaledSH(i,a){for(let s=0;s<9;s++)this.coefficients[s].addScaledVector(i.coefficients[s],a);return this}scale(i){for(let a=0;a<9;a++)this.coefficients[a].multiplyScalar(i);return this}lerp(i,a){for(let s=0;s<9;s++)this.coefficients[s].lerp(i.coefficients[s],a);return this}equals(i){for(let a=0;a<9;a++)if(!this.coefficients[a].equals(i.coefficients[a]))return!1;return!0}copy(i){return this.set(i.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(i,a=0){const s=this.coefficients;for(let o=0;o<9;o++)s[o].fromArray(i,a+3*o);return this}toArray(i=[],a=0){const s=this.coefficients;for(let o=0;o<9;o++)s[o].toArray(i,a+3*o);return i}static getBasisAt(i,a){const s=i.x,o=i.y,u=i.z;a[0]=.282095,a[1]=.488603*o,a[2]=.488603*u,a[3]=.488603*s,a[4]=1.092548*s*o,a[5]=1.092548*o*u,a[6]=.315392*(3*u*u-1),a[7]=1.092548*s*u,a[8]=.546274*(s*s-o*o)}};__name(hc,"SphericalHarmonics3");let pc=hc;function LightProbe(i,a){Light.call(this,void 0,a),this.type="LightProbe",this.sh=void 0!==i?i:new pc}function MaterialLoader(i){Loader.call(this,i),this.textures={}}__name(LightProbe,"LightProbe"),LightProbe.prototype=_extends2(Object.create(Light.prototype),{constructor:LightProbe,isLightProbe:!0,copy:/* @__PURE__ */__name(function(i){return Light.prototype.copy.call(this,i),this.sh.copy(i.sh),this},"copy"),fromJSON:/* @__PURE__ */__name(function(i){return this.intensity=i.intensity,this.sh.fromArray(i.sh),this},"fromJSON"),toJSON:/* @__PURE__ */__name(function(i){const a=Light.prototype.toJSON.call(this,i);return a.object.sh=this.sh.toArray(),a},"toJSON")}),__name(MaterialLoader,"MaterialLoader"),MaterialLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:MaterialLoader,load:/* @__PURE__ */__name(function(i,a,s,o){const u=this,_=new FileLoader(u.manager);_.setPath(u.path),_.setRequestHeader(u.requestHeader),_.setWithCredentials(u.withCredentials),_.load(i,function(s){try{a(u.parse(JSON.parse(s)))}catch(_){o?o(_):console.error(_),u.manager.itemError(i)}},s,o)},"load"),parse:/* @__PURE__ */__name(function(i){const a=this.textures;function getTexture(i){return void 0===a[i]&&console.warn("THREE.MaterialLoader: Undefined texture",i),a[i]}__name(getTexture,"getTexture");const s=new Zl[i.type];if(void 0!==i.uuid&&(s.uuid=i.uuid),void 0!==i.name&&(s.name=i.name),void 0!==i.color&&void 0!==s.color&&s.color.setHex(i.color),void 0!==i.roughness&&(s.roughness=i.roughness),void 0!==i.metalness&&(s.metalness=i.metalness),void 0!==i.sheen&&(s.sheen=(new Ms).setHex(i.sheen)),void 0!==i.emissive&&void 0!==s.emissive&&s.emissive.setHex(i.emissive),void 0!==i.specular&&void 0!==s.specular&&s.specular.setHex(i.specular),void 0!==i.shininess&&(s.shininess=i.shininess),void 0!==i.clearcoat&&(s.clearcoat=i.clearcoat),void 0!==i.clearcoatRoughness&&(s.clearcoatRoughness=i.clearcoatRoughness),void 0!==i.fog&&(s.fog=i.fog),void 0!==i.flatShading&&(s.flatShading=i.flatShading),void 0!==i.blending&&(s.blending=i.blending),void 0!==i.combine&&(s.combine=i.combine),void 0!==i.side&&(s.side=i.side),void 0!==i.opacity&&(s.opacity=i.opacity),void 0!==i.transparent&&(s.transparent=i.transparent),void 0!==i.alphaTest&&(s.alphaTest=i.alphaTest),void 0!==i.depthTest&&(s.depthTest=i.depthTest),void 0!==i.depthWrite&&(s.depthWrite=i.depthWrite),void 0!==i.colorWrite&&(s.colorWrite=i.colorWrite),void 0!==i.stencilWrite&&(s.stencilWrite=i.stencilWrite),void 0!==i.stencilWriteMask&&(s.stencilWriteMask=i.stencilWriteMask),void 0!==i.stencilFunc&&(s.stencilFunc=i.stencilFunc),void 0!==i.stencilRef&&(s.stencilRef=i.stencilRef),void 0!==i.stencilFuncMask&&(s.stencilFuncMask=i.stencilFuncMask),void 0!==i.stencilFail&&(s.stencilFail=i.stencilFail),void 0!==i.stencilZFail&&(s.stencilZFail=i.stencilZFail),void 0!==i.stencilZPass&&(s.stencilZPass=i.stencilZPass),void 0!==i.wireframe&&(s.wireframe=i.wireframe),void 0!==i.wireframeLinewidth&&(s.wireframeLinewidth=i.wireframeLinewidth),void 0!==i.wireframeLinecap&&(s.wireframeLinecap=i.wireframeLinecap),void 0!==i.wireframeLinejoin&&(s.wireframeLinejoin=i.wireframeLinejoin),void 0!==i.rotation&&(s.rotation=i.rotation),1!==i.linewidth&&(s.linewidth=i.linewidth),void 0!==i.dashSize&&(s.dashSize=i.dashSize),void 0!==i.gapSize&&(s.gapSize=i.gapSize),void 0!==i.scale&&(s.scale=i.scale),void 0!==i.polygonOffset&&(s.polygonOffset=i.polygonOffset),void 0!==i.polygonOffsetFactor&&(s.polygonOffsetFactor=i.polygonOffsetFactor),void 0!==i.polygonOffsetUnits&&(s.polygonOffsetUnits=i.polygonOffsetUnits),void 0!==i.skinning&&(s.skinning=i.skinning),void 0!==i.morphTargets&&(s.morphTargets=i.morphTargets),void 0!==i.morphNormals&&(s.morphNormals=i.morphNormals),void 0!==i.dithering&&(s.dithering=i.dithering),void 0!==i.vertexTangents&&(s.vertexTangents=i.vertexTangents),void 0!==i.visible&&(s.visible=i.visible),void 0!==i.toneMapped&&(s.toneMapped=i.toneMapped),void 0!==i.userData&&(s.userData=i.userData),void 0!==i.vertexColors&&("number"==typeof i.vertexColors?s.vertexColors=i.vertexColors>0:s.vertexColors=i.vertexColors),void 0!==i.uniforms)for(const o in i.uniforms){const a=i.uniforms[o];switch(s.uniforms[o]={},a.type){case"t":s.uniforms[o].value=getTexture(a.value);break;case"c":s.uniforms[o].value=(new Ms).setHex(a.value);break;case"v2":s.uniforms[o].value=(new Sr).fromArray(a.value);break;case"v3":s.uniforms[o].value=(new Or).fromArray(a.value);break;case"v4":s.uniforms[o].value=(new kr).fromArray(a.value);break;case"m3":s.uniforms[o].value=(new Ar).fromArray(a.value);break;case"m4":s.uniforms[o].value=(new ya).fromArray(a.value);break;default:s.uniforms[o].value=a.value}}if(void 0!==i.defines&&(s.defines=i.defines),void 0!==i.vertexShader&&(s.vertexShader=i.vertexShader),void 0!==i.fragmentShader&&(s.fragmentShader=i.fragmentShader),void 0!==i.extensions)for(const o in i.extensions)s.extensions[o]=i.extensions[o];if(void 0!==i.shading&&(s.flatShading=1===i.shading),void 0!==i.size&&(s.size=i.size),void 0!==i.sizeAttenuation&&(s.sizeAttenuation=i.sizeAttenuation),void 0!==i.map&&(s.map=getTexture(i.map)),void 0!==i.matcap&&(s.matcap=getTexture(i.matcap)),void 0!==i.alphaMap&&(s.alphaMap=getTexture(i.alphaMap)),void 0!==i.bumpMap&&(s.bumpMap=getTexture(i.bumpMap)),void 0!==i.bumpScale&&(s.bumpScale=i.bumpScale),void 0!==i.normalMap&&(s.normalMap=getTexture(i.normalMap)),void 0!==i.normalMapType&&(s.normalMapType=i.normalMapType),void 0!==i.normalScale){let a=i.normalScale;!1===Array.isArray(a)&&(a=[a,a]),s.normalScale=(new Sr).fromArray(a)}return void 0!==i.displacementMap&&(s.displacementMap=getTexture(i.displacementMap)),void 0!==i.displacementScale&&(s.displacementScale=i.displacementScale),void 0!==i.displacementBias&&(s.displacementBias=i.displacementBias),void 0!==i.roughnessMap&&(s.roughnessMap=getTexture(i.roughnessMap)),void 0!==i.metalnessMap&&(s.metalnessMap=getTexture(i.metalnessMap)),void 0!==i.emissiveMap&&(s.emissiveMap=getTexture(i.emissiveMap)),void 0!==i.emissiveIntensity&&(s.emissiveIntensity=i.emissiveIntensity),void 0!==i.specularMap&&(s.specularMap=getTexture(i.specularMap)),void 0!==i.envMap&&(s.envMap=getTexture(i.envMap)),void 0!==i.envMapIntensity&&(s.envMapIntensity=i.envMapIntensity),void 0!==i.reflectivity&&(s.reflectivity=i.reflectivity),void 0!==i.refractionRatio&&(s.refractionRatio=i.refractionRatio),void 0!==i.lightMap&&(s.lightMap=getTexture(i.lightMap)),void 0!==i.lightMapIntensity&&(s.lightMapIntensity=i.lightMapIntensity),void 0!==i.aoMap&&(s.aoMap=getTexture(i.aoMap)),void 0!==i.aoMapIntensity&&(s.aoMapIntensity=i.aoMapIntensity),void 0!==i.gradientMap&&(s.gradientMap=getTexture(i.gradientMap)),void 0!==i.clearcoatMap&&(s.clearcoatMap=getTexture(i.clearcoatMap)),void 0!==i.clearcoatRoughnessMap&&(s.clearcoatRoughnessMap=getTexture(i.clearcoatRoughnessMap)),void 0!==i.clearcoatNormalMap&&(s.clearcoatNormalMap=getTexture(i.clearcoatNormalMap)),void 0!==i.clearcoatNormalScale&&(s.clearcoatNormalScale=(new Sr).fromArray(i.clearcoatNormalScale)),void 0!==i.transmission&&(s.transmission=i.transmission),void 0!==i.transmissionMap&&(s.transmissionMap=getTexture(i.transmissionMap)),s},"parse"),setTextures:/* @__PURE__ */__name(function(i){return this.textures=i,this},"setTextures")});const fc={decodeText:/* @__PURE__ */__name(function(i){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(i);let a="";for(let o=0,u=i.length;o<u;o++)a+=String.fromCharCode(i[o]);try{return decodeURIComponent(escape(a))}catch(s){return a}},"decodeText"),extractUrlBase:/* @__PURE__ */__name(function(i){const a=i.lastIndexOf("/");return-1===a?"./":i.substr(0,a+1)},"extractUrlBase")};function InstancedBufferGeometry(){BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function InstancedBufferAttribute(i,a,s,o){"number"==typeof s&&(o=s,s=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),BufferAttribute.call(this,i,a,s),this.meshPerAttribute=o||1}function BufferGeometryLoader(i){Loader.call(this,i)}function ImageBitmapLoader(i){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Loader.call(this,i),this.options={premultiplyAlpha:"none"}}function ShapePath(){this.type="ShapePath",this.color=new Ms,this.subPaths=[],this.currentPath=null}__name(InstancedBufferGeometry,"InstancedBufferGeometry"),InstancedBufferGeometry.prototype=_extends2(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,copy:/* @__PURE__ */__name(function(i){return BufferGeometry.prototype.copy.call(this,i),this.instanceCount=i.instanceCount,this},"copy"),clone:/* @__PURE__ */__name(function(){return(new this.constructor).copy(this)},"clone"),toJSON:/* @__PURE__ */__name(function(){const i=BufferGeometry.prototype.toJSON.call(this);return i.instanceCount=this.instanceCount,i.isInstancedBufferGeometry=!0,i},"toJSON")}),__name(InstancedBufferAttribute,"InstancedBufferAttribute"),InstancedBufferAttribute.prototype=_extends2(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:/* @__PURE__ */__name(function(i){return BufferAttribute.prototype.copy.call(this,i),this.meshPerAttribute=i.meshPerAttribute,this},"copy"),toJSON:/* @__PURE__ */__name(function(){const i=BufferAttribute.prototype.toJSON.call(this);return i.meshPerAttribute=this.meshPerAttribute,i.isInstancedBufferAttribute=!0,i},"toJSON")}),__name(BufferGeometryLoader,"BufferGeometryLoader"),BufferGeometryLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:BufferGeometryLoader,load:/* @__PURE__ */__name(function(i,a,s,o){const u=this,_=new FileLoader(u.manager);_.setPath(u.path),_.setRequestHeader(u.requestHeader),_.setWithCredentials(u.withCredentials),_.load(i,function(s){try{a(u.parse(JSON.parse(s)))}catch(_){o?o(_):console.error(_),u.manager.itemError(i)}},s,o)},"load"),parse:/* @__PURE__ */__name(function(i){const a={},s={};function getInterleavedBuffer(i,s){if(void 0!==a[s])return a[s];const o=i.interleavedBuffers[s],u=getArrayBuffer(i,o.buffer),_=new InterleavedBuffer(getTypedArray(o.type,u),o.stride);return _.uuid=o.uuid,a[s]=_,_}function getArrayBuffer(i,a){if(void 0!==s[a])return s[a];const o=i.arrayBuffers[a],u=new Uint32Array(o).buffer;return s[a]=u,u}__name(getInterleavedBuffer,"getInterleavedBuffer"),__name(getArrayBuffer,"getArrayBuffer");const o=i.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,u=i.data.index;if(void 0!==u){const i=getTypedArray(u.type,u.array);o.setIndex(new BufferAttribute(i,1))}const _=i.data.attributes;for(const L in _){const a=_[L];let s;if(a.isInterleavedBufferAttribute)s=new InterleavedBufferAttribute(getInterleavedBuffer(i.data,a.data),a.itemSize,a.offset,a.normalized);else{const i=getTypedArray(a.type,a.array);s=new(a.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute)(i,a.itemSize,a.normalized)}void 0!==a.name&&(s.name=a.name),o.setAttribute(L,s)}const x=i.data.morphAttributes;if(x)for(const L in x){const a=x[L],s=[];for(let o=0,u=a.length;o<u;o++){const u=a[o];let _;_=u.isInterleavedBufferAttribute?new InterleavedBufferAttribute(getInterleavedBuffer(i.data,u.data),u.itemSize,u.offset,u.normalized):new BufferAttribute(getTypedArray(u.type,u.array),u.itemSize,u.normalized),void 0!==u.name&&(_.name=u.name),s.push(_)}o.morphAttributes[L]=s}i.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const w=i.data.groups||i.data.drawcalls||i.data.offsets;if(void 0!==w)for(let L=0,B=w.length;L!==B;++L){const i=w[L];o.addGroup(i.start,i.count,i.materialIndex)}const C=i.data.boundingSphere;if(void 0!==C){const i=new Or;void 0!==C.center&&i.fromArray(C.center),o.boundingSphere=new na(i,C.radius)}return i.name&&(o.name=i.name),i.userData&&(o.userData=i.userData),o},"parse")}),__name(ImageBitmapLoader,"ImageBitmapLoader"),ImageBitmapLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:ImageBitmapLoader,isImageBitmapLoader:!0,setOptions:/* @__PURE__ */__name(function setOptions(i){return this.options=i,this},"setOptions"),load:/* @__PURE__ */__name(function(i,a,s,o){void 0===i&&(i=""),void 0!==this.path&&(i=this.path+i),i=this.manager.resolveURL(i);const u=this,_=ic.get(i);if(void 0!==_)return u.manager.itemStart(i),setTimeout(function(){a&&a(_),u.manager.itemEnd(i)},0),_;const x={};x.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(i,x).then(function(i){return i.blob()}).then(function(i){return createImageBitmap(i,u.options)}).then(function(s){ic.add(i,s),a&&a(s),u.manager.itemEnd(i)}).catch(function(a){o&&o(a),u.manager.itemError(i),u.manager.itemEnd(i)}),u.manager.itemStart(i)},"load")}),__name(ShapePath,"ShapePath"),_extends2(ShapePath.prototype,{moveTo:/* @__PURE__ */__name(function(i,a){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(i,a),this},"moveTo"),lineTo:/* @__PURE__ */__name(function(i,a){return this.currentPath.lineTo(i,a),this},"lineTo"),quadraticCurveTo:/* @__PURE__ */__name(function(i,a,s,o){return this.currentPath.quadraticCurveTo(i,a,s,o),this},"quadraticCurveTo"),bezierCurveTo:/* @__PURE__ */__name(function(i,a,s,o,u,_){return this.currentPath.bezierCurveTo(i,a,s,o,u,_),this},"bezierCurveTo"),splineThru:/* @__PURE__ */__name(function(i){return this.currentPath.splineThru(i),this},"splineThru"),toShapes:/* @__PURE__ */__name(function(i,a){function toShapesNoHoles(i){const a=[];for(let s=0,o=i.length;s<o;s++){const o=i[s],u=new Shape;u.curves=o.curves,a.push(u)}return a}function isPointInsidePolygon(i,a){const s=a.length;let o=!1;for(let u=s-1,_=0;_<s;u=_++){let s=a[u],x=a[_],w=x.x-s.x,C=x.y-s.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(s=a[_],w=-w,x=a[u],C=-C),i.y<s.y||i.y>x.y)continue;if(i.y===s.y){if(i.x===s.x)return!0}else{const a=C*(i.x-s.x)-w*(i.y-s.y);if(0===a)return!0;if(a<0)continue;o=!o}}else{if(i.y!==s.y)continue;if(x.x<=i.x&&i.x<=s.x||s.x<=i.x&&i.x<=x.x)return!0}}return o}__name(toShapesNoHoles,"toShapesNoHoles"),__name(isPointInsidePolygon,"isPointInsidePolygon");const s=$l.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===a)return toShapesNoHoles(o);let u,_,x;const w=[];if(1===o.length)return _=o[0],x=new Shape,x.curves=_.curves,w.push(x),w;let C=!s(o[0].getPoints());C=i?!C:C;const L=[],B=[];let U,j,V=[],z=0;B[z]=void 0,V[z]=[];for(let $=0,Y=o.length;$<Y;$++)_=o[$],U=_.getPoints(),u=s(U),u=i?!u:u,u?(!C&&B[z]&&z++,B[z]={s:new Shape,p:U},B[z].s.curves=_.curves,C&&z++,V[z]=[]):V[z].push({h:_,p:U[0]});if(!B[0])return toShapesNoHoles(o);if(B.length>1){let i=!1;const a=[];for(let s=0,o=B.length;s<o;s++)L[s]=[];for(let s=0,o=B.length;s<o;s++){const o=V[s];for(let u=0;u<o.length;u++){const _=o[u];let x=!0;for(let o=0;o<B.length;o++)isPointInsidePolygon(_.p,B[o].p)&&(s!==o&&a.push({froms:s,tos:o,hole:u}),x?(x=!1,L[o].push(_)):i=!0);x&&L[s].push(_)}}a.length>0&&(i||(V=L))}for(let $=0,Y=B.length;$<Y;$++){x=B[$].s,w.push(x),j=V[$];for(let i=0,a=j.length;i<a;i++)x.holes.push(j[i].h)}return w},"toShapes")});const gc=class _Font{constructor(i){Object.defineProperty(this,"isFont",{value:!0}),this.type="Font",this.data=i}generateShapes(i,a=100){const s=[],o=createPaths(i,a,this.data);for(let u=0,_=o.length;u<_;u++)Array.prototype.push.apply(s,o[u].toShapes());return s}};__name(gc,"Font");let _c,bc=gc;function createPaths(i,a,s){const o=Array.from?Array.from(i):String(i).split(""),u=a/s.resolution,_=(s.boundingBox.yMax-s.boundingBox.yMin+s.underlineThickness)*u,x=[];let w=0,C=0;for(let L=0;L<o.length;L++){const i=o[L];if("\n"===i)w=0,C-=_;else{const a=createPath(i,u,w,C,s);w+=a.offsetX,x.push(a.path)}}return x}function createPath(i,a,s,o,u){const _=u.glyphs[i]||u.glyphs["?"];if(!_)return void console.error('THREE.Font: character "'+i+'" does not exists in font family '+u.familyName+".");const x=new ShapePath;let w,C,L,B,U,j,V,z;if(_.o){const i=_._cachedOutline||(_._cachedOutline=_.o.split(" "));for(let u=0,_=i.length;u<_;)switch(i[u++]){case"m":w=i[u++]*a+s,C=i[u++]*a+o,x.moveTo(w,C);break;case"l":w=i[u++]*a+s,C=i[u++]*a+o,x.lineTo(w,C);break;case"q":L=i[u++]*a+s,B=i[u++]*a+o,U=i[u++]*a+s,j=i[u++]*a+o,x.quadraticCurveTo(U,j,L,B);break;case"b":L=i[u++]*a+s,B=i[u++]*a+o,U=i[u++]*a+s,j=i[u++]*a+o,V=i[u++]*a+s,z=i[u++]*a+o,x.bezierCurveTo(U,j,V,z,L,B)}}return{offsetX:_.ha*a,path:x}}function FontLoader(i){Loader.call(this,i)}__name(createPaths,"createPaths"),__name(createPath,"createPath"),__name(FontLoader,"FontLoader"),FontLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:FontLoader,load:/* @__PURE__ */__name(function(i,a,s,o){const u=this,_=new FileLoader(this.manager);_.setPath(this.path),_.setRequestHeader(this.requestHeader),_.setWithCredentials(u.withCredentials),_.load(i,function(i){let s;try{s=JSON.parse(i)}catch(_){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),s=JSON.parse(i.substring(65,i.length-2))}const o=u.parse(s);a&&a(o)},s,o)},"load"),parse:/* @__PURE__ */__name(function(i){return new bc(i)},"parse")});const Ec={getContext:/* @__PURE__ */__name(function(){return void 0===_c&&(_c=new(window.AudioContext||window.webkitAudioContext)),_c},"getContext"),setContext:/* @__PURE__ */__name(function(i){_c=i},"setContext")};function AudioLoader(i){Loader.call(this,i)}function HemisphereLightProbe(i,a,s){LightProbe.call(this,void 0,s);const o=(new Ms).set(i),u=(new Ms).set(a),_=new Or(o.r,o.g,o.b),x=new Or(u.r,u.g,u.b),w=Math.sqrt(Math.PI),C=w*Math.sqrt(.75);this.sh.coefficients[0].copy(_).add(x).multiplyScalar(w),this.sh.coefficients[1].copy(_).sub(x).multiplyScalar(C)}function AmbientLightProbe(i,a){LightProbe.call(this,void 0,a);const s=(new Ms).set(i);this.sh.coefficients[0].set(s.r,s.g,s.b).multiplyScalar(2*Math.sqrt(Math.PI))}__name(AudioLoader,"AudioLoader"),AudioLoader.prototype=_extends2(Object.create(Loader.prototype),{constructor:AudioLoader,load:/* @__PURE__ */__name(function(i,a,s,o){const u=this,_=new FileLoader(u.manager);_.setResponseType("arraybuffer"),_.setPath(u.path),_.setRequestHeader(u.requestHeader),_.setWithCredentials(u.withCredentials),_.load(i,function(s){try{const i=s.slice(0);Ec.getContext().decodeAudioData(i,function(i){a(i)})}catch(_){o?o(_):console.error(_),u.manager.itemError(i)}},s,o)},"load")}),__name(HemisphereLightProbe,"HemisphereLightProbe"),HemisphereLightProbe.prototype=_extends2(Object.create(LightProbe.prototype),{constructor:HemisphereLightProbe,isHemisphereLightProbe:!0,copy:/* @__PURE__ */__name(function(i){return LightProbe.prototype.copy.call(this,i),this},"copy"),toJSON:/* @__PURE__ */__name(function(i){return LightProbe.prototype.toJSON.call(this,i)},"toJSON")}),__name(AmbientLightProbe,"AmbientLightProbe"),AmbientLightProbe.prototype=_extends2(Object.create(LightProbe.prototype),{constructor:AmbientLightProbe,isAmbientLightProbe:!0,copy:/* @__PURE__ */__name(function(i){return LightProbe.prototype.copy.call(this,i),this},"copy"),toJSON:/* @__PURE__ */__name(function(i){return LightProbe.prototype.toJSON.call(this,i)},"toJSON")});const Mc=new ya,kc=new ya;function StereoCamera(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function PropertyMixer(i,a,s){let o,u,_;switch(this.binding=i,this.valueSize=s,a){case"quaternion":o=this._slerp,u=this._slerpAdditive,_=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*s),this._workIndex=5;break;case"string":case"bool":o=this._select,u=this._select,_=this._setAdditiveIdentityOther,this.buffer=new Array(5*s);break;default:o=this._lerp,u=this._lerpAdditive,_=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*s)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=u,this._setIdentity=_,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}__name(StereoCamera,"StereoCamera"),_extends2(StereoCamera.prototype,{update:/* @__PURE__ */__name(function(i){const a=this._cache;if(a.focus!==i.focus||a.fov!==i.fov||a.aspect!==i.aspect*this.aspect||a.near!==i.near||a.far!==i.far||a.zoom!==i.zoom||a.eyeSep!==this.eyeSep){a.focus=i.focus,a.fov=i.fov,a.aspect=i.aspect*this.aspect,a.near=i.near,a.far=i.far,a.zoom=i.zoom,a.eyeSep=this.eyeSep;const s=i.projectionMatrix.clone(),o=a.eyeSep/2,u=o*a.near/a.focus,_=a.near*Math.tan(br.DEG2RAD*a.fov*.5)/a.zoom;let x,w;kc.elements[12]=-o,Mc.elements[12]=o,x=-_*a.aspect+u,w=_*a.aspect+u,s.elements[0]=2*a.near/(w-x),s.elements[8]=(w+x)/(w-x),this.cameraL.projectionMatrix.copy(s),x=-_*a.aspect-u,w=_*a.aspect-u,s.elements[0]=2*a.near/(w-x),s.elements[8]=(w+x)/(w-x),this.cameraR.projectionMatrix.copy(s)}this.cameraL.matrixWorld.copy(i.matrixWorld).multiply(kc),this.cameraR.matrixWorld.copy(i.matrixWorld).multiply(Mc)},"update")}),__name(PropertyMixer,"PropertyMixer"),_extends2(PropertyMixer.prototype,{accumulate:/* @__PURE__ */__name(function(i,a){const s=this.buffer,o=this.valueSize,u=i*o+o;let _=this.cumulativeWeight;if(0===_){for(let i=0;i!==o;++i)s[u+i]=s[i];_=a}else{_+=a;const i=a/_;this._mixBufferRegion(s,u,0,i,o)}this.cumulativeWeight=_},"accumulate"),accumulateAdditive:/* @__PURE__ */__name(function(i){const a=this.buffer,s=this.valueSize,o=s*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(a,o,0,i,s),this.cumulativeWeightAdditive+=i},"accumulateAdditive"),apply:/* @__PURE__ */__name(function(i){const a=this.valueSize,s=this.buffer,o=i*a+a,u=this.cumulativeWeight,_=this.cumulativeWeightAdditive,x=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,u<1){const i=a*this._origIndex;this._mixBufferRegion(s,o,i,1-u,a)}_>0&&this._mixBufferRegionAdditive(s,o,this._addIndex*a,1,a);for(let w=a,C=a+a;w!==C;++w)if(s[w]!==s[w+a]){x.setValue(s,o);break}},"apply"),saveOriginalState:/* @__PURE__ */__name(function(){const i=this.binding,a=this.buffer,s=this.valueSize,o=s*this._origIndex;i.getValue(a,o);for(let u=s,_=o;u!==_;++u)a[u]=a[o+u%s];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},"saveOriginalState"),restoreOriginalState:/* @__PURE__ */__name(function(){const i=3*this.valueSize;this.binding.setValue(this.buffer,i)},"restoreOriginalState"),_setAdditiveIdentityNumeric:/* @__PURE__ */__name(function(){const i=this._addIndex*this.valueSize,a=i+this.valueSize;for(let s=i;s<a;s++)this.buffer[s]=0},"_setAdditiveIdentityNumeric"),_setAdditiveIdentityQuaternion:/* @__PURE__ */__name(function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},"_setAdditiveIdentityQuaternion"),_setAdditiveIdentityOther:/* @__PURE__ */__name(function(){const i=this._origIndex*this.valueSize,a=this._addIndex*this.valueSize;for(let s=0;s<this.valueSize;s++)this.buffer[a+s]=this.buffer[i+s]},"_setAdditiveIdentityOther"),_select:/* @__PURE__ */__name(function(i,a,s,o,u){if(o>=.5)for(let _=0;_!==u;++_)i[a+_]=i[s+_]},"_select"),_slerp:/* @__PURE__ */__name(function(i,a,s,o){Dr.slerpFlat(i,a,i,a,i,s,o)},"_slerp"),_slerpAdditive:/* @__PURE__ */__name(function(i,a,s,o,u){const _=this._workIndex*u;Dr.multiplyQuaternionsFlat(i,_,i,a,i,s),Dr.slerpFlat(i,a,i,a,i,_,o)},"_slerpAdditive"),_lerp:/* @__PURE__ */__name(function(i,a,s,o,u){const _=1-o;for(let x=0;x!==u;++x){const u=a+x;i[u]=i[u]*_+i[s+x]*o}},"_lerp"),_lerpAdditive:/* @__PURE__ */__name(function(i,a,s,o,u){for(let _=0;_!==u;++_){const u=a+_;i[u]=i[u]+i[s+_]*o}},"_lerpAdditive")});const Pc="\\[\\]\\.:\\/",Ic=new RegExp("["+Pc+"]","g"),Lc="[^"+Pc+"]",Rc="[^"+Pc.replace("\\.","")+"]",Oc=/((?:WC+[\/:])*)/.source.replace("WC",Lc),Nc=/(WCOD+)?/.source.replace("WCOD",Rc),Fc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Lc),jc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Lc),Hc=new RegExp("^"+Oc+Nc+Fc+jc+"$"),Gc=["material","materials","bones"];function Composite(i,a,s){const o=s||PropertyBinding.parseTrackName(a);this._targetGroup=i,this._bindings=i.subscribe_(a,o)}function PropertyBinding(i,a,s){this.path=a,this.parsedPath=s||PropertyBinding.parseTrackName(a),this.node=PropertyBinding.findNode(i,this.parsedPath.nodeName)||i,this.rootNode=i}function AnimationObjectGroup(){this.uuid=br.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const i={};this._indicesByUUID=i;for(let s=0,o=arguments.length;s!==o;++s)i[arguments[s].uuid]=s;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}__name(Composite,"Composite"),_extends2(Composite.prototype,{getValue:/* @__PURE__ */__name(function(i,a){this.bind();const s=this._targetGroup.nCachedObjects_,o=this._bindings[s];void 0!==o&&o.getValue(i,a)},"getValue"),setValue:/* @__PURE__ */__name(function(i,a){const s=this._bindings;for(let o=this._targetGroup.nCachedObjects_,u=s.length;o!==u;++o)s[o].setValue(i,a)},"setValue"),bind:/* @__PURE__ */__name(function(){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=i.length;a!==s;++a)i[a].bind()},"bind"),unbind:/* @__PURE__ */__name(function(){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=i.length;a!==s;++a)i[a].unbind()},"unbind")}),__name(PropertyBinding,"PropertyBinding"),_extends2(PropertyBinding,{Composite:Composite,create:/* @__PURE__ */__name(function(i,a,s){return i&&i.isAnimationObjectGroup?new PropertyBinding.Composite(i,a,s):new PropertyBinding(i,a,s)},"create"),sanitizeNodeName:/* @__PURE__ */__name(function(i){return i.replace(/\s/g,"_").replace(Ic,"")},"sanitizeNodeName"),parseTrackName:/* @__PURE__ */__name(function(i){const a=Hc.exec(i);if(!a)throw new Error("PropertyBinding: Cannot parse trackName: "+i);const s={nodeName:a[2],objectName:a[3],objectIndex:a[4],propertyName:a[5],propertyIndex:a[6]},o=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const i=s.nodeName.substring(o+1);-1!==Gc.indexOf(i)&&(s.nodeName=s.nodeName.substring(0,o),s.objectName=i)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+i);return s},"parseTrackName"),findNode:/* @__PURE__ */__name(function(i,a){if(!a||""===a||"."===a||-1===a||a===i.name||a===i.uuid)return i;if(i.skeleton){const s=i.skeleton.getBoneByName(a);if(void 0!==s)return s}if(i.children){const s=/* @__PURE__ */__name(function(i){for(let o=0;o<i.length;o++){const u=i[o];if(u.name===a||u.uuid===a)return u;const _=s(u.children);if(_)return _}return null},"searchNodeSubtree"),o=s(i.children);if(o)return o}return null},"findNode")}),_extends2(PropertyBinding.prototype,{_getValue_unavailable:/* @__PURE__ */__name(function(){},"_getValue_unavailable"),_setValue_unavailable:/* @__PURE__ */__name(function(){},"_setValue_unavailable"),BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[/* @__PURE__ */__name(function getValue_direct(i,a){i[a]=this.node[this.propertyName]},"getValue_direct"),/* @__PURE__ */__name(function getValue_array(i,a){const s=this.resolvedProperty;for(let o=0,u=s.length;o!==u;++o)i[a++]=s[o]},"getValue_array"),/* @__PURE__ */__name(function getValue_arrayElement(i,a){i[a]=this.resolvedProperty[this.propertyIndex]},"getValue_arrayElement"),/* @__PURE__ */__name(function getValue_toArray(i,a){this.resolvedProperty.toArray(i,a)},"getValue_toArray")],SetterByBindingTypeAndVersioning:[[
/* @__PURE__ */__name(function setValue_direct(i,a){this.targetObject[this.propertyName]=i[a]},"setValue_direct"),
/* @__PURE__ */__name(function setValue_direct_setNeedsUpdate(i,a){this.targetObject[this.propertyName]=i[a],this.targetObject.needsUpdate=!0},"setValue_direct_setNeedsUpdate"),
/* @__PURE__ */__name(function setValue_direct_setMatrixWorldNeedsUpdate(i,a){this.targetObject[this.propertyName]=i[a],this.targetObject.matrixWorldNeedsUpdate=!0},"setValue_direct_setMatrixWorldNeedsUpdate")],[
/* @__PURE__ */__name(function setValue_array(i,a){const s=this.resolvedProperty;for(let o=0,u=s.length;o!==u;++o)s[o]=i[a++]},"setValue_array"),
/* @__PURE__ */__name(function setValue_array_setNeedsUpdate(i,a){const s=this.resolvedProperty;for(let o=0,u=s.length;o!==u;++o)s[o]=i[a++];this.targetObject.needsUpdate=!0},"setValue_array_setNeedsUpdate"),
/* @__PURE__ */__name(function setValue_array_setMatrixWorldNeedsUpdate(i,a){const s=this.resolvedProperty;for(let o=0,u=s.length;o!==u;++o)s[o]=i[a++];this.targetObject.matrixWorldNeedsUpdate=!0},"setValue_array_setMatrixWorldNeedsUpdate")],[
/* @__PURE__ */__name(function setValue_arrayElement(i,a){this.resolvedProperty[this.propertyIndex]=i[a]},"setValue_arrayElement"),
/* @__PURE__ */__name(function setValue_arrayElement_setNeedsUpdate(i,a){this.resolvedProperty[this.propertyIndex]=i[a],this.targetObject.needsUpdate=!0},"setValue_arrayElement_setNeedsUpdate"),
/* @__PURE__ */__name(function setValue_arrayElement_setMatrixWorldNeedsUpdate(i,a){this.resolvedProperty[this.propertyIndex]=i[a],this.targetObject.matrixWorldNeedsUpdate=!0},"setValue_arrayElement_setMatrixWorldNeedsUpdate")],[
/* @__PURE__ */__name(function setValue_fromArray(i,a){this.resolvedProperty.fromArray(i,a)},"setValue_fromArray"),
/* @__PURE__ */__name(function setValue_fromArray_setNeedsUpdate(i,a){this.resolvedProperty.fromArray(i,a),this.targetObject.needsUpdate=!0},"setValue_fromArray_setNeedsUpdate"),
/* @__PURE__ */__name(function setValue_fromArray_setMatrixWorldNeedsUpdate(i,a){this.resolvedProperty.fromArray(i,a),this.targetObject.matrixWorldNeedsUpdate=!0},"setValue_fromArray_setMatrixWorldNeedsUpdate")]],getValue:/* @__PURE__ */__name(function getValue_unbound(i,a){this.bind(),this.getValue(i,a)},"getValue_unbound"),setValue:/* @__PURE__ */__name(function getValue_unbound(i,a){this.bind(),this.setValue(i,a)},"getValue_unbound"),bind:/* @__PURE__ */__name(function(){let i=this.node;const a=this.parsedPath,s=a.objectName,o=a.propertyName;let u=a.propertyIndex;if(i||(i=PropertyBinding.findNode(this.rootNode,a.nodeName)||this.rootNode,this.node=i),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!i)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let o=a.objectIndex;switch(s){case"materials":if(!i.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!i.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);i=i.material.materials;break;case"bones":if(!i.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);i=i.skeleton.bones;for(let a=0;a<i.length;a++)if(i[a].name===o){o=a;break}break;default:if(void 0===i[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);i=i[s]}if(void 0!==o){if(void 0===i[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,i);i=i[o]}}const _=i[o];if(void 0===_){const s=a.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s+"."+o+" but it wasn't found.",i)}let x=this.Versioning.None;this.targetObject=i,void 0!==i.needsUpdate?x=this.Versioning.NeedsUpdate:void 0!==i.matrixWorldNeedsUpdate&&(x=this.Versioning.MatrixWorldNeedsUpdate);let w=this.BindingType.Direct;if(void 0!==u){if("morphTargetInfluences"===o){if(!i.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!i.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!i.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==i.morphTargetDictionary[u]&&(u=i.morphTargetDictionary[u])}w=this.BindingType.ArrayElement,this.resolvedProperty=_,this.propertyIndex=u}else void 0!==_.fromArray&&void 0!==_.toArray?(w=this.BindingType.HasFromToArray,this.resolvedProperty=_):Array.isArray(_)?(w=this.BindingType.EntireArray,this.resolvedProperty=_):this.propertyName=o;this.getValue=this.GetterByBindingType[w],this.setValue=this.SetterByBindingTypeAndVersioning[w][x]},"bind"),unbind:/* @__PURE__ */__name(function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound},"unbind")}),_extends2(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue}),__name(AnimationObjectGroup,"AnimationObjectGroup"),_extends2(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:/* @__PURE__ */__name(function(){const i=this._objects,a=this._indicesByUUID,s=this._paths,o=this._parsedPaths,u=this._bindings,_=u.length;let x,w=i.length,C=this.nCachedObjects_;for(let L=0,B=arguments.length;L!==B;++L){const B=arguments[L],U=B.uuid;let j=a[U];if(void 0===j){j=w++,a[U]=j,i.push(B);for(let i=0,a=_;i!==a;++i)u[i].push(new PropertyBinding(B,s[i],o[i]))}else if(j<C){x=i[j];const w=--C,L=i[w];a[L.uuid]=j,i[j]=L,a[U]=w,i[w]=B;for(let i=0,a=_;i!==a;++i){const a=u[i],_=a[w];let x=a[j];a[j]=_,void 0===x&&(x=new PropertyBinding(B,s[i],o[i])),a[w]=x}}else i[j]!==x&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=C},"add"),remove:/* @__PURE__ */__name(function(){const i=this._objects,a=this._indicesByUUID,s=this._bindings,o=s.length;let u=this.nCachedObjects_;for(let _=0,x=arguments.length;_!==x;++_){const x=arguments[_],w=x.uuid,C=a[w];if(void 0!==C&&C>=u){const _=u++,L=i[_];a[L.uuid]=C,i[C]=L,a[w]=_,i[_]=x;for(let i=0,a=o;i!==a;++i){const a=s[i],o=a[_],u=a[C];a[C]=o,a[_]=u}}}this.nCachedObjects_=u},"remove"),uncache:/* @__PURE__ */__name(function(){const i=this._objects,a=this._indicesByUUID,s=this._bindings,o=s.length;let u=this.nCachedObjects_,_=i.length;for(let x=0,w=arguments.length;x!==w;++x){const w=arguments[x].uuid,C=a[w];if(void 0!==C)if(delete a[w],C<u){const x=--u,w=i[x],L=--_,B=i[L];a[w.uuid]=C,i[C]=w,a[B.uuid]=x,i[x]=B,i.pop();for(let i=0,a=o;i!==a;++i){const a=s[i],o=a[x],u=a[L];a[C]=o,a[x]=u,a.pop()}}else{const u=--_,x=i[u];u>0&&(a[x.uuid]=C),i[C]=x,i.pop();for(let i=0,a=o;i!==a;++i){const a=s[i];a[C]=a[u],a.pop()}}}this.nCachedObjects_=u},"uncache"),subscribe_:/* @__PURE__ */__name(function(i,a){const s=this._bindingsIndicesByPath;let o=s[i];const u=this._bindings;if(void 0!==o)return u[o];const _=this._paths,x=this._parsedPaths,w=this._objects,C=w.length,L=this.nCachedObjects_,B=new Array(C);o=u.length,s[i]=o,_.push(i),x.push(a),u.push(B);for(let U=L,j=w.length;U!==j;++U){const s=w[U];B[U]=new PropertyBinding(s,i,a)}return B},"subscribe_"),unsubscribe_:/* @__PURE__ */__name(function(i){const a=this._bindingsIndicesByPath,s=a[i];if(void 0!==s){const o=this._paths,u=this._parsedPaths,_=this._bindings,x=_.length-1,w=_[x];a[i[x]]=s,_[s]=w,_.pop(),u[s]=u[x],u.pop(),o[s]=o[x],o.pop()}},"unsubscribe_")});const qc=class _AnimationAction{constructor(i,a,s=null,o=a.blendMode){this._mixer=i,this._clip=a,this._localRoot=s,this.blendMode=o;const u=a.tracks,_=u.length,x=new Array(_),w={endingStart:Mi,endingEnd:Mi};for(let C=0;C!==_;++C){const i=u[C].createInterpolant(null);x[C]=i,i.settings=w}this._interpolantSettings=w,this._interpolants=x,this._propertyBindings=new Array(_),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Yn,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(i){return this._startTime=i,this}setLoop(i,a){return this.loop=i,this.repetitions=a,this}setEffectiveWeight(i){return this.weight=i,this._effectiveWeight=this.enabled?i:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(i){return this._scheduleFading(i,0,1)}fadeOut(i){return this._scheduleFading(i,1,0)}crossFadeFrom(i,a,s){if(i.fadeOut(a),this.fadeIn(a),s){const s=this._clip.duration,o=i._clip.duration,u=o/s,_=s/o;i.warp(1,u,a),this.warp(_,1,a)}return this}crossFadeTo(i,a,s){return i.crossFadeFrom(this,a,s)}stopFading(){const i=this._weightInterpolant;return null!==i&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(i)),this}setEffectiveTimeScale(i){return this.timeScale=i,this._effectiveTimeScale=this.paused?0:i,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(i){return this.timeScale=this._clip.duration/i,this.stopWarping()}syncWith(i){return this.time=i.time,this.timeScale=i.timeScale,this.stopWarping()}halt(i){return this.warp(this._effectiveTimeScale,0,i)}warp(i,a,s){const o=this._mixer,u=o.time,_=this.timeScale;let x=this._timeScaleInterpolant;null===x&&(x=o._lendControlInterpolant(),this._timeScaleInterpolant=x);const w=x.parameterPositions,C=x.sampleValues;return w[0]=u,w[1]=u+s,C[0]=i/_,C[1]=a/_,this}stopWarping(){const i=this._timeScaleInterpolant;return null!==i&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(i)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(i,a,s,o){if(!this.enabled)return void this._updateWeight(i);const u=this._startTime;if(null!==u){const o=(i-u)*s;if(o<0||0===s)return;this._startTime=null,a=s*o}a*=this._updateTimeScale(i);const _=this._updateTime(a),x=this._updateWeight(i);if(x>0){const i=this._interpolants,a=this._propertyBindings;if(this.blendMode===Wi)for(let s=0,o=i.length;s!==o;++s)i[s].evaluate(_),a[s].accumulateAdditive(x);else for(let s=0,u=i.length;s!==u;++s)i[s].evaluate(_),a[s].accumulate(o,x)}}_updateWeight(i){let a=0;if(this.enabled){a=this.weight;const s=this._weightInterpolant;if(null!==s){const o=s.evaluate(i)[0];a*=o,i>s.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=a,a}_updateTimeScale(i){let a=0;if(!this.paused){a=this.timeScale;const s=this._timeScaleInterpolant;null!==s&&(a*=s.evaluate(i)[0],i>s.parameterPositions[1]&&(this.stopWarping(),0===a?this.paused=!0:this.timeScale=a))}return this._effectiveTimeScale=a,a}_updateTime(i){const a=this._clip.duration,s=this.loop;let o=this.time+i,u=this._loopCount;const _=s===Jn;if(0===i)return-1===u||!_||1&~u?o:a-o;if(s===Kn){-1===u&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=a)o=a;else{if(!(o<0)){this.time=o;break e}o=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:i<0?-1:1})}}else{if(-1===u&&(i>=0?(u=0,this._setEndings(!0,0===this.repetitions,_)):this._setEndings(0===this.repetitions,!0,_)),o>=a||o<0){const s=Math.floor(o/a);o-=a*s,u+=Math.abs(s);const x=this.repetitions-u;if(x<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=i>0?a:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:i>0?1:-1});else{if(1===x){const a=i<0;this._setEndings(a,!a,_)}else this._setEndings(!1,!1,_);this._loopCount=u,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=o;if(_&&!(1&~u))return a-o}return o}_setEndings(i,a,s){const o=this._interpolantSettings;s?(o.endingStart=Pi,o.endingEnd=Pi):(o.endingStart=i?this.zeroSlopeAtStart?Pi:Mi:Ri,o.endingEnd=a?this.zeroSlopeAtEnd?Pi:Mi:Ri)}_scheduleFading(i,a,s){const o=this._mixer,u=o.time;let _=this._weightInterpolant;null===_&&(_=o._lendControlInterpolant(),this._weightInterpolant=_);const x=_.parameterPositions,w=_.sampleValues;return x[0]=u,w[0]=a,x[1]=u+i,w[1]=s,this}};__name(qc,"AnimationAction");let Qc=qc;function AnimationMixer(i){this._root=i,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function InstancedInterleavedBuffer(i,a,s){InterleavedBuffer.call(this,i,a),this.meshPerAttribute=s||1}function GLBufferAttribute(i,a,s,o,u){this.buffer=i,this.type=a,this.itemSize=s,this.elementSize=o,this.count=u,this.version=0}function Raycaster(i,a,s,o){this.ray=new ga(i,a),this.near=s||0,this.far=o||1/0,this.camera=null,this.layers=new Ba,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points},"get")}})}function ascSort(i,a){return i.distance-a.distance}function intersectObject(i,a,s,o){if(i.layers.test(a.layers)&&i.raycast(a,s),!0===o){const o=i.children;for(let i=0,u=o.length;i<u;i++)intersectObject(o[i],a,s,!0)}}__name(AnimationMixer,"AnimationMixer"),AnimationMixer.prototype=_extends2(Object.create(EventDispatcher.prototype),{constructor:AnimationMixer,_bindAction:/* @__PURE__ */__name(function(i,a){const s=i._localRoot||this._root,o=i._clip.tracks,u=o.length,_=i._propertyBindings,x=i._interpolants,w=s.uuid,C=this._bindingsByRootAndName;let L=C[w];void 0===L&&(L={},C[w]=L);for(let B=0;B!==u;++B){const i=o[B],u=i.name;let C=L[u];if(void 0!==C)_[B]=C;else{if(C=_[B],void 0!==C){null===C._cacheIndex&&(++C.referenceCount,this._addInactiveBinding(C,w,u));continue}const o=a&&a._propertyBindings[B].binding.parsedPath;C=new PropertyMixer(PropertyBinding.create(s,u,o),i.ValueTypeName,i.getValueSize()),++C.referenceCount,this._addInactiveBinding(C,w,u),_[B]=C}x[B].resultBuffer=C.buffer}},"_bindAction"),_activateAction:/* @__PURE__ */__name(function(i){if(!this._isActiveAction(i)){if(null===i._cacheIndex){const a=(i._localRoot||this._root).uuid,s=i._clip.uuid,o=this._actionsByClip[s];this._bindAction(i,o&&o.knownActions[0]),this._addInactiveAction(i,s,a)}const a=i._propertyBindings;for(let i=0,s=a.length;i!==s;++i){const s=a[i];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(i)}},"_activateAction"),_deactivateAction:/* @__PURE__ */__name(function(i){if(this._isActiveAction(i)){const a=i._propertyBindings;for(let i=0,s=a.length;i!==s;++i){const s=a[i];0===--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(i)}},"_deactivateAction"),_initMemoryManager:/* @__PURE__ */__name(function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const i=this;this.stats={actions:{get total(){return i._actions.length},get inUse(){return i._nActiveActions}},bindings:{get total(){return i._bindings.length},get inUse(){return i._nActiveBindings}},controlInterpolants:{get total(){return i._controlInterpolants.length},get inUse(){return i._nActiveControlInterpolants}}}},"_initMemoryManager"),_isActiveAction:/* @__PURE__ */__name(function(i){const a=i._cacheIndex;return null!==a&&a<this._nActiveActions},"_isActiveAction"),_addInactiveAction:/* @__PURE__ */__name(function(i,a,s){const o=this._actions,u=this._actionsByClip;let _=u[a];if(void 0===_)_={knownActions:[i],actionByRoot:{}},i._byClipCacheIndex=0,u[a]=_;else{const a=_.knownActions;i._byClipCacheIndex=a.length,a.push(i)}i._cacheIndex=o.length,o.push(i),_.actionByRoot[s]=i},"_addInactiveAction"),_removeInactiveAction:/* @__PURE__ */__name(function(i){const a=this._actions,s=a[a.length-1],o=i._cacheIndex;s._cacheIndex=o,a[o]=s,a.pop(),i._cacheIndex=null;const u=i._clip.uuid,_=this._actionsByClip,x=_[u],w=x.knownActions,C=w[w.length-1],L=i._byClipCacheIndex;C._byClipCacheIndex=L,w[L]=C,w.pop(),i._byClipCacheIndex=null,delete x.actionByRoot[(i._localRoot||this._root).uuid],0===w.length&&delete _[u],this._removeInactiveBindingsForAction(i)},"_removeInactiveAction"),_removeInactiveBindingsForAction:/* @__PURE__ */__name(function(i){const a=i._propertyBindings;for(let s=0,o=a.length;s!==o;++s){const i=a[s];0===--i.referenceCount&&this._removeInactiveBinding(i)}},"_removeInactiveBindingsForAction"),_lendAction:/* @__PURE__ */__name(function(i){const a=this._actions,s=i._cacheIndex,o=this._nActiveActions++,u=a[o];i._cacheIndex=o,a[o]=i,u._cacheIndex=s,a[s]=u},"_lendAction"),_takeBackAction:/* @__PURE__ */__name(function(i){const a=this._actions,s=i._cacheIndex,o=--this._nActiveActions,u=a[o];i._cacheIndex=o,a[o]=i,u._cacheIndex=s,a[s]=u},"_takeBackAction"),_addInactiveBinding:/* @__PURE__ */__name(function(i,a,s){const o=this._bindingsByRootAndName,u=this._bindings;let _=o[a];void 0===_&&(_={},o[a]=_),_[s]=i,i._cacheIndex=u.length,u.push(i)},"_addInactiveBinding"),_removeInactiveBinding:/* @__PURE__ */__name(function(i){const a=this._bindings,s=i.binding,o=s.rootNode.uuid,u=s.path,_=this._bindingsByRootAndName,x=_[o],w=a[a.length-1],C=i._cacheIndex;w._cacheIndex=C,a[C]=w,a.pop(),delete x[u],0===Object.keys(x).length&&delete _[o]},"_removeInactiveBinding"),_lendBinding:/* @__PURE__ */__name(function(i){const a=this._bindings,s=i._cacheIndex,o=this._nActiveBindings++,u=a[o];i._cacheIndex=o,a[o]=i,u._cacheIndex=s,a[s]=u},"_lendBinding"),_takeBackBinding:/* @__PURE__ */__name(function(i){const a=this._bindings,s=i._cacheIndex,o=--this._nActiveBindings,u=a[o];i._cacheIndex=o,a[o]=i,u._cacheIndex=s,a[s]=u},"_takeBackBinding"),_lendControlInterpolant:/* @__PURE__ */__name(function(){const i=this._controlInterpolants,a=this._nActiveControlInterpolants++;let s=i[a];return void 0===s&&(s=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),s.__cacheIndex=a,i[a]=s),s},"_lendControlInterpolant"),_takeBackControlInterpolant:/* @__PURE__ */__name(function(i){const a=this._controlInterpolants,s=i.__cacheIndex,o=--this._nActiveControlInterpolants,u=a[o];i.__cacheIndex=o,a[o]=i,u.__cacheIndex=s,a[s]=u},"_takeBackControlInterpolant"),_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:/* @__PURE__ */__name(function(i,a,s){const o=a||this._root,u=o.uuid;let _="string"==typeof i?AnimationClip.findByName(o,i):i;const x=null!==_?_.uuid:i,w=this._actionsByClip[x];let C=null;if(void 0===s&&(s=null!==_?_.blendMode:Oi),void 0!==w){const i=w.actionByRoot[u];if(void 0!==i&&i.blendMode===s)return i;C=w.knownActions[0],null===_&&(_=C._clip)}if(null===_)return null;const L=new Qc(this,_,a,s);return this._bindAction(L,C),this._addInactiveAction(L,x,u),L},"clipAction"),existingAction:/* @__PURE__ */__name(function(i,a){const s=a||this._root,o=s.uuid,u="string"==typeof i?AnimationClip.findByName(s,i):i,_=u?u.uuid:i,x=this._actionsByClip[_];return void 0!==x&&x.actionByRoot[o]||null},"existingAction"),stopAllAction:/* @__PURE__ */__name(function(){const i=this._actions;for(let a=this._nActiveActions-1;a>=0;--a)i[a].stop();return this},"stopAllAction"),update:/* @__PURE__ */__name(function(i){i*=this.timeScale;const a=this._actions,s=this._nActiveActions,o=this.time+=i,u=Math.sign(i),_=this._accuIndex^=1;for(let C=0;C!==s;++C)a[C]._update(o,i,u,_);const x=this._bindings,w=this._nActiveBindings;for(let C=0;C!==w;++C)x[C].apply(_);return this},"update"),setTime:/* @__PURE__ */__name(function(i){this.time=0;for(let a=0;a<this._actions.length;a++)this._actions[a].time=0;return this.update(i)},"setTime"),getRoot:/* @__PURE__ */__name(function(){return this._root},"getRoot"),uncacheClip:/* @__PURE__ */__name(function(i){const a=this._actions,s=i.uuid,o=this._actionsByClip,u=o[s];if(void 0!==u){const i=u.knownActions;for(let s=0,o=i.length;s!==o;++s){const o=i[s];this._deactivateAction(o);const u=o._cacheIndex,_=a[a.length-1];o._cacheIndex=null,o._byClipCacheIndex=null,_._cacheIndex=u,a[u]=_,a.pop(),this._removeInactiveBindingsForAction(o)}delete o[s]}},"uncacheClip"),uncacheRoot:/* @__PURE__ */__name(function(i){const a=i.uuid,s=this._actionsByClip;for(const u in s){const i=s[u].actionByRoot[a];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const o=this._bindingsByRootAndName[a];if(void 0!==o)for(const u in o){const i=o[u];i.restoreOriginalState(),this._removeInactiveBinding(i)}},"uncacheRoot"),uncacheAction:/* @__PURE__ */__name(function(i,a){const s=this.existingAction(i,a);null!==s&&(this._deactivateAction(s),this._removeInactiveAction(s))},"uncacheAction")}),__name(InstancedInterleavedBuffer,"InstancedInterleavedBuffer"),InstancedInterleavedBuffer.prototype=_extends2(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:/* @__PURE__ */__name(function(i){return InterleavedBuffer.prototype.copy.call(this,i),this.meshPerAttribute=i.meshPerAttribute,this},"copy"),clone:/* @__PURE__ */__name(function(i){const a=InterleavedBuffer.prototype.clone.call(this,i);return a.meshPerAttribute=this.meshPerAttribute,a},"clone"),toJSON:/* @__PURE__ */__name(function(i){const a=InterleavedBuffer.prototype.toJSON.call(this,i);return a.isInstancedInterleavedBuffer=!0,a.meshPerAttribute=this.meshPerAttribute,a},"toJSON")}),__name(GLBufferAttribute,"GLBufferAttribute"),Object.defineProperty(GLBufferAttribute.prototype,"needsUpdate",{set:/* @__PURE__ */__name(function(i){!0===i&&this.version++},"set")}),_extends2(GLBufferAttribute.prototype,{isGLBufferAttribute:!0,setBuffer:/* @__PURE__ */__name(function(i){return this.buffer=i,this},"setBuffer"),setType:/* @__PURE__ */__name(function(i,a){return this.type=i,this.elementSize=a,this},"setType"),setItemSize:/* @__PURE__ */__name(function(i){return this.itemSize=i,this},"setItemSize"),setCount:/* @__PURE__ */__name(function(i){return this.count=i,this},"setCount")}),__name(Raycaster,"Raycaster"),__name(ascSort,"ascSort"),__name(intersectObject,"intersectObject"),_extends2(Raycaster.prototype,{set:/* @__PURE__ */__name(function(i,a){this.ray.set(i,a)},"set"),setFromCamera:/* @__PURE__ */__name(function(i,a){a&&a.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(a.matrixWorld),this.ray.direction.set(i.x,i.y,.5).unproject(a).sub(this.ray.origin).normalize(),this.camera=a):a&&a.isOrthographicCamera?(this.ray.origin.set(i.x,i.y,(a.near+a.far)/(a.near-a.far)).unproject(a),this.ray.direction.set(0,0,-1).transformDirection(a.matrixWorld),this.camera=a):console.error("THREE.Raycaster: Unsupported camera type: "+a.type)},"setFromCamera"),intersectObject:/* @__PURE__ */__name(function(i,a,s){const o=s||[];return intersectObject(i,this,o,a),o.sort(ascSort),o},"intersectObject"),intersectObjects:/* @__PURE__ */__name(function(i,a,s){const o=s||[];if(!1===Array.isArray(i))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),o;for(let u=0,_=i.length;u<_;u++)intersectObject(i[u],this,o,a);return o.sort(ascSort),o},"intersectObjects")});const Kc=class _Spherical{constructor(i=1,a=0,s=0){return this.radius=i,this.phi=a,this.theta=s,this}set(i,a,s){return this.radius=i,this.phi=a,this.theta=s,this}clone(){return(new this.constructor).copy(this)}copy(i){return this.radius=i.radius,this.phi=i.phi,this.theta=i.theta,this}makeSafe(){const i=1e-6;return this.phi=Math.max(i,Math.min(Math.PI-i,this.phi)),this}setFromVector3(i){return this.setFromCartesianCoords(i.x,i.y,i.z)}setFromCartesianCoords(i,a,s){return this.radius=Math.sqrt(i*i+a*a+s*s),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(i,s),this.phi=Math.acos(br.clamp(a/this.radius,-1,1))),this}};__name(Kc,"Spherical");let Jc=Kc;const eu=/* @__PURE__ */new Sr,tu=class _Box2{constructor(i,a){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==i?i:new Sr(1/0,1/0),this.max=void 0!==a?a:new Sr(-1/0,-1/0)}set(i,a){return this.min.copy(i),this.max.copy(a),this}setFromPoints(i){this.makeEmpty();for(let a=0,s=i.length;a<s;a++)this.expandByPoint(i[a]);return this}setFromCenterAndSize(i,a){const s=eu.copy(a).multiplyScalar(.5);return this.min.copy(i).sub(s),this.max.copy(i).add(s),this}clone(){return(new this.constructor).copy(this)}copy(i){return this.min.copy(i.min),this.max.copy(i.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(i){return void 0===i&&(console.warn("THREE.Box2: .getCenter() target is now required"),i=new Sr),this.isEmpty()?i.set(0,0):i.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(i){return void 0===i&&(console.warn("THREE.Box2: .getSize() target is now required"),i=new Sr),this.isEmpty()?i.set(0,0):i.subVectors(this.max,this.min)}expandByPoint(i){return this.min.min(i),this.max.max(i),this}expandByVector(i){return this.min.sub(i),this.max.add(i),this}expandByScalar(i){return this.min.addScalar(-i),this.max.addScalar(i),this}containsPoint(i){return!(i.x<this.min.x||i.x>this.max.x||i.y<this.min.y||i.y>this.max.y)}containsBox(i){return this.min.x<=i.min.x&&i.max.x<=this.max.x&&this.min.y<=i.min.y&&i.max.y<=this.max.y}getParameter(i,a){return void 0===a&&(console.warn("THREE.Box2: .getParameter() target is now required"),a=new Sr),a.set((i.x-this.min.x)/(this.max.x-this.min.x),(i.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(i){return!(i.max.x<this.min.x||i.min.x>this.max.x||i.max.y<this.min.y||i.min.y>this.max.y)}clampPoint(i,a){return void 0===a&&(console.warn("THREE.Box2: .clampPoint() target is now required"),a=new Sr),a.copy(i).clamp(this.min,this.max)}distanceToPoint(i){return eu.copy(i).clamp(this.min,this.max).sub(i).length()}intersect(i){return this.min.max(i.min),this.max.min(i.max),this}union(i){return this.min.min(i.min),this.max.max(i.max),this}translate(i){return this.min.add(i),this.max.add(i),this}equals(i){return i.min.equals(this.min)&&i.max.equals(this.max)}};__name(tu,"Box2");let nu=tu;function ImmediateRenderObject(i){Object3D.call(this),this.material=i,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}__name(ImmediateRenderObject,"ImmediateRenderObject"),ImmediateRenderObject.prototype=Object.create(Object3D.prototype),ImmediateRenderObject.prototype.constructor=ImmediateRenderObject,ImmediateRenderObject.prototype.isImmediateRenderObject=!0;const iu=new MeshBasicMaterial({side:le,depthWrite:!1,depthTest:!1});function Spline(i){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),CatmullRomCurve3.call(this,i),this.type="catmullrom"}new Mesh(new so,iu),Curve.create=function(i,a){return console.log("THREE.Curve.create() has been deprecated"),i.prototype=Object.create(Curve.prototype),i.prototype.constructor=i,i.prototype.getPoint=a,i},_extends2(Path.prototype,{fromPoints:/* @__PURE__ */__name(function(i){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(i)},"fromPoints")}),__name(Spline,"Spline"),Spline.prototype=Object.create(CatmullRomCurve3.prototype),_extends2(Spline.prototype,{initFromArray:/* @__PURE__ */__name(function(){console.error("THREE.Spline: .initFromArray() has been removed.")},"initFromArray"),getControlPointsArray:/* @__PURE__ */__name(function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},"getControlPointsArray"),reparametrizeByArcLength:/* @__PURE__ */__name(function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")},"reparametrizeByArcLength")}),_extends2(Loader.prototype,{extractUrlBase:/* @__PURE__ */__name(function(i){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),fc.extractUrlBase(i)},"extractUrlBase")}),Loader.Handlers={add:/* @__PURE__ */__name(function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},"add"),get:/* @__PURE__ */__name(function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")},"get")},_extends2(nu.prototype,{center:/* @__PURE__ */__name(function(i){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(i)},"center"),empty:/* @__PURE__ */__name(function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},"empty"),isIntersectionBox:/* @__PURE__ */__name(function(i){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},"isIntersectionBox"),size:/* @__PURE__ */__name(function(i){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(i)},"size")}),_extends2(Ur.prototype,{center:/* @__PURE__ */__name(function(i){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(i)},"center"),empty:/* @__PURE__ */__name(function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},"empty"),isIntersectionBox:/* @__PURE__ */__name(function(i){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},"isIntersectionBox"),isIntersectionSphere:/* @__PURE__ */__name(function(i){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},"isIntersectionSphere"),size:/* @__PURE__ */__name(function(i){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(i)},"size")}),_extends2(na.prototype,{empty:/* @__PURE__ */__name(function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},"empty")}),yo.prototype.setFromMatrix=function(i){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(i)},_extends2(br,{random16:/* @__PURE__ */__name(function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},"random16"),nearestPowerOfTwo:/* @__PURE__ */__name(function(i){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),br.floorPowerOfTwo(i)},"nearestPowerOfTwo"),nextPowerOfTwo:/* @__PURE__ */__name(function(i){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),br.ceilPowerOfTwo(i)},"nextPowerOfTwo")}),_extends2(Ar.prototype,{flattenToArrayOffset:/* @__PURE__ */__name(function(i,a){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,a)},"flattenToArrayOffset"),multiplyVector3:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},"multiplyVector3"),multiplyVector3Array:/* @__PURE__ */__name(function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},"multiplyVector3Array"),applyToBufferAttribute:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),i.applyMatrix3(this)},"applyToBufferAttribute"),applyToVector3Array:/* @__PURE__ */__name(function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},"applyToVector3Array"),getInverse:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},"getInverse")}),_extends2(ya.prototype,{extractPosition:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(i)},"extractPosition"),flattenToArrayOffset:/* @__PURE__ */__name(function(i,a){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(i,a)},"flattenToArrayOffset"),getPosition:/* @__PURE__ */__name(function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Or).setFromMatrixColumn(this,3)},"getPosition"),setRotationFromQuaternion:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(i)},"setRotationFromQuaternion"),multiplyToArray:/* @__PURE__ */__name(function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},"multiplyToArray"),multiplyVector3:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},"multiplyVector3"),multiplyVector4:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},"multiplyVector4"),multiplyVector3Array:/* @__PURE__ */__name(function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},"multiplyVector3Array"),rotateAxis:/* @__PURE__ */__name(function(i){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),i.transformDirection(this)},"rotateAxis"),crossVector:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},"crossVector"),translate:/* @__PURE__ */__name(function(){console.error("THREE.Matrix4: .translate() has been removed.")},"translate"),rotateX:/* @__PURE__ */__name(function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},"rotateX"),rotateY:/* @__PURE__ */__name(function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},"rotateY"),rotateZ:/* @__PURE__ */__name(function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},"rotateZ"),rotateByAxis:/* @__PURE__ */__name(function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},"rotateByAxis"),applyToBufferAttribute:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),i.applyMatrix4(this)},"applyToBufferAttribute"),applyToVector3Array:/* @__PURE__ */__name(function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},"applyToVector3Array"),makeFrustum:/* @__PURE__ */__name(function(i,a,s,o,u,_){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(i,a,o,s,u,_)},"makeFrustum"),getInverse:/* @__PURE__ */__name(function(i){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(i).invert()},"getInverse")}),ds.prototype.isIntersectionLine=function(i){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(i)},_extends2(Dr.prototype,{multiplyVector3:/* @__PURE__ */__name(function(i){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),i.applyQuaternion(this)},"multiplyVector3"),inverse:/* @__PURE__ */__name(function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},"inverse")}),_extends2(ga.prototype,{isIntersectionBox:/* @__PURE__ */__name(function(i){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(i)},"isIntersectionBox"),isIntersectionPlane:/* @__PURE__ */__name(function(i){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(i)},"isIntersectionPlane"),isIntersectionSphere:/* @__PURE__ */__name(function(i){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(i)},"isIntersectionSphere")}),_extends2(xs.prototype,{area:/* @__PURE__ */__name(function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},"area"),barycoordFromPoint:/* @__PURE__ */__name(function(i,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(i,a)},"barycoordFromPoint"),midpoint:/* @__PURE__ */__name(function(i){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(i)},"midpoint"),normal:/* @__PURE__ */__name(function(i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(i)},"normal"),plane:/* @__PURE__ */__name(function(i){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(i)},"plane")}),_extends2(xs,{barycoordFromPoint:/* @__PURE__ */__name(function(i,a,s,o,u){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),xs.getBarycoord(i,a,s,o,u)},"barycoordFromPoint"),normal:/* @__PURE__ */__name(function(i,a,s,o){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),xs.getNormal(i,a,s,o)},"normal")}),_extends2(Shape.prototype,{extractAllPoints:/* @__PURE__ */__name(function(i){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(i)},"extractAllPoints"),extrude:/* @__PURE__ */__name(function(i){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Wl(this,i)},"extrude"),makeGeometry:/* @__PURE__ */__name(function(i){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Kl(this,i)},"makeGeometry")}),_extends2(Sr.prototype,{fromAttribute:/* @__PURE__ */__name(function(i,a,s){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,a,s)},"fromAttribute"),distanceToManhattan:/* @__PURE__ */__name(function(i){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},"distanceToManhattan"),lengthManhattan:/* @__PURE__ */__name(function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},"lengthManhattan")}),_extends2(Or.prototype,{setEulerFromRotationMatrix:/* @__PURE__ */__name(function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},"setEulerFromRotationMatrix"),setEulerFromQuaternion:/* @__PURE__ */__name(function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},"setEulerFromQuaternion"),getPositionFromMatrix:/* @__PURE__ */__name(function(i){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(i)},"getPositionFromMatrix"),getScaleFromMatrix:/* @__PURE__ */__name(function(i){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(i)},"getScaleFromMatrix"),getColumnFromMatrix:/* @__PURE__ */__name(function(i,a){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(a,i)},"getColumnFromMatrix"),applyProjection:/* @__PURE__ */__name(function(i){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(i)},"applyProjection"),fromAttribute:/* @__PURE__ */__name(function(i,a,s){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,a,s)},"fromAttribute"),distanceToManhattan:/* @__PURE__ */__name(function(i){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(i)},"distanceToManhattan"),lengthManhattan:/* @__PURE__ */__name(function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},"lengthManhattan")}),_extends2(kr.prototype,{fromAttribute:/* @__PURE__ */__name(function(i,a,s){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(i,a,s)},"fromAttribute"),lengthManhattan:/* @__PURE__ */__name(function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},"lengthManhattan")}),_extends2(Object3D.prototype,{getChildByName:/* @__PURE__ */__name(function(i){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(i)},"getChildByName"),renderDepth:/* @__PURE__ */__name(function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},"renderDepth"),translate:/* @__PURE__ */__name(function(i,a){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(a,i)},"translate"),getWorldRotation:/* @__PURE__ */__name(function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},"getWorldRotation"),applyMatrix:/* @__PURE__ */__name(function(i){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},"applyMatrix")}),Object.defineProperties(Object3D.prototype,{eulerOrder:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=i},"set")},useQuaternion:{get:/* @__PURE__ */__name(function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},"set")}}),_extends2(Mesh.prototype,{setDrawMode:/* @__PURE__ */__name(function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},"setDrawMode")}),Object.defineProperties(Mesh.prototype,{drawMode:{get:/* @__PURE__ */__name(function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),er},"get"),set:/* @__PURE__ */__name(function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},"set")}}),Object.defineProperties(LOD.prototype,{objects:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels},"get")}}),Object.defineProperty(Skeleton.prototype,"useVertexTexture",{get:/* @__PURE__ */__name(function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},"set")}),SkinnedMesh.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Curve.prototype,"__arcLengthDivisions",{get:/* @__PURE__ */__name(function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=i},"set")}),PerspectiveCamera.prototype.setLens=function(i,a){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==a&&(this.filmGauge=a),this.setFocalLength(i)},Object.defineProperties(Light.prototype,{onlyShadow:{set:/* @__PURE__ */__name(function(){console.warn("THREE.Light: .onlyShadow has been removed.")},"set")},shadowCameraFov:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=i},"set")},shadowCameraLeft:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=i},"set")},shadowCameraRight:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=i},"set")},shadowCameraTop:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=i},"set")},shadowCameraBottom:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=i},"set")},shadowCameraNear:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=i},"set")},shadowCameraFar:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=i},"set")},shadowCameraVisible:{set:/* @__PURE__ */__name(function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")},"set")},shadowBias:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=i},"set")},shadowDarkness:{set:/* @__PURE__ */__name(function(){console.warn("THREE.Light: .shadowDarkness has been removed.")},"set")},shadowMapWidth:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=i},"set")},shadowMapHeight:{set:/* @__PURE__ */__name(function(i){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=i},"set")}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length},"get")},dynamic:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===gr},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(gr)},"set")}}),_extends2(BufferAttribute.prototype,{setDynamic:/* @__PURE__ */__name(function(i){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?gr:fr),this},"setDynamic"),copyIndicesArray:/* @__PURE__ */__name(function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},"copyIndicesArray"),setArray:/* @__PURE__ */__name(function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},"setArray")}),_extends2(BufferGeometry.prototype,{addIndex:/* @__PURE__ */__name(function(i){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(i)},"addIndex"),addAttribute:/* @__PURE__ */__name(function(i,a){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),a&&a.isBufferAttribute||a&&a.isInterleavedBufferAttribute?"index"===i?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(a),this):this.setAttribute(i,a):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(i,new BufferAttribute(arguments[1],arguments[2])))},"addAttribute"),addDrawCall:/* @__PURE__ */__name(function(i,a,s){void 0!==s&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(i,a)},"addDrawCall"),clearDrawCalls:/* @__PURE__ */__name(function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},"clearDrawCalls"),computeOffsets:/* @__PURE__ */__name(function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},"computeOffsets"),removeAttribute:/* @__PURE__ */__name(function(i){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(i)},"removeAttribute"),applyMatrix:/* @__PURE__ */__name(function(i){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(i)},"applyMatrix")}),Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:/* @__PURE__ */__name(function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups},"get")},offsets:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups},"get")}}),Object.defineProperties(InstancedBufferGeometry.prototype,{maxInstancedCount:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=i},"set")}}),Object.defineProperties(Raycaster.prototype,{linePrecision:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=i},"set")}}),Object.defineProperties(InterleavedBuffer.prototype,{dynamic:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===gr},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(i)},"set")}}),_extends2(InterleavedBuffer.prototype,{setDynamic:/* @__PURE__ */__name(function(i){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===i?gr:fr),this},"setDynamic"),setArray:/* @__PURE__ */__name(function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},"setArray")}),_extends2(Wl.prototype,{getArrays:/* @__PURE__ */__name(function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},"getArrays"),addShapeList:/* @__PURE__ */__name(function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},"addShapeList"),addShape:/* @__PURE__ */__name(function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},"addShape")}),_extends2(zo.prototype,{dispose:/* @__PURE__ */__name(function(){console.error("THREE.Scene: .dispose() has been removed.")},"dispose")}),Object.defineProperties(Material.prototype,{wrapAround:{get:/* @__PURE__ */__name(function(){console.warn("THREE.Material: .wrapAround has been removed.")},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.Material: .wrapAround has been removed.")},"set")},overdraw:{get:/* @__PURE__ */__name(function(){console.warn("THREE.Material: .overdraw has been removed.")},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.Material: .overdraw has been removed.")},"set")},wrapRGB:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ms},"get")},shading:{get:/* @__PURE__ */__name(function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===de},"set")},stencilMask:{get:/* @__PURE__ */__name(function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=i},"set")}}),Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")},"set")}}),Object.defineProperties(MeshPhysicalMaterial.prototype,{transparency:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=i},"set")}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=i},"set")}}),_extends2(WebGLRenderer.prototype,{clearTarget:/* @__PURE__ */__name(function(i,a,s,o){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(i),this.clear(a,s,o)},"clearTarget"),animate:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(i)},"animate"),getCurrentRenderTarget:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},"getCurrentRenderTarget"),getMaxAnisotropy:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},"getMaxAnisotropy"),getPrecision:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},"getPrecision"),resetGLState:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},"resetGLState"),supportsFloatTextures:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},"supportsFloatTextures"),supportsHalfFloatTextures:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},"supportsHalfFloatTextures"),supportsStandardDerivatives:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},"supportsStandardDerivatives"),supportsCompressedTextureS3TC:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},"supportsCompressedTextureS3TC"),supportsCompressedTexturePVRTC:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},"supportsCompressedTexturePVRTC"),supportsBlendMinMax:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},"supportsBlendMinMax"),supportsVertexTextures:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},"supportsVertexTextures"),supportsInstancedArrays:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},"supportsInstancedArrays"),enableScissorTest:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(i)},"enableScissorTest"),initMaterial:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},"initMaterial"),addPrePlugin:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},"addPrePlugin"),addPostPlugin:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},"addPostPlugin"),updateShadowMap:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},"updateShadowMap"),setFaceCulling:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},"setFaceCulling"),allocTextureUnit:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},"allocTextureUnit"),setTexture:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},"setTexture"),setTexture2D:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},"setTexture2D"),setTextureCube:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},"setTextureCube"),getActiveMipMapLevel:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},"getActiveMipMapLevel")}),Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:/* @__PURE__ */__name(function(){return this.shadowMap.enabled},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=i},"set")},shadowMapType:{get:/* @__PURE__ */__name(function(){return this.shadowMap.type},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=i},"set")},shadowMapCullFace:{get:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},"set")},context:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()},"get")},vr:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr},"get")},gammaInput:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")},"set")},gammaOutput:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===i?nr:tr},"set")},toneMappingWhitePoint:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")},"set")}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},"set")},renderReverseSided:{get:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},"set")},renderSingleSided:{get:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},"get"),set:/* @__PURE__ */__name(function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},"set")}}),Object.defineProperties(Ir.prototype,{wrapS:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=i},"set")},wrapT:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=i},"set")},magFilter:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=i},"set")},minFilter:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=i},"set")},anisotropy:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=i},"set")},offset:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=i},"set")},repeat:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=i},"set")},format:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=i},"set")},type:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=i},"set")},generateMipmaps:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=i},"set")}}),CubeCamera.prototype.updateCubeMap=function(i,a){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(i,a)},CubeCamera.prototype.clear=function(i,a,s,o){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(i,a,s,o)},Cr.crossOrigin=void 0,Cr.loadTexture=function(i,a,s,o){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const u=new TextureLoader;u.setCrossOrigin(this.crossOrigin);const _=u.load(i,s,void 0,o);return a&&(_.mapping=a),_},Cr.loadTextureCube=function(i,a,s,o){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const u=new CubeTextureLoader;u.setCrossOrigin(this.crossOrigin);const _=u.load(i,s,void 0,o);return a&&(_.mapping=a),_},Cr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Cr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:j}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=j);const ru=/* @__PURE__ */__name(function(i,a){var s,o,u=this,_=new ya,x=null;function gotVRDisplays(i){o=i,i.length>0?s=i[0]:a&&a("VR input not available.")}"VRFrameData"in window&&(x=new VRFrameData),__name(gotVRDisplays,"gotVRDisplays"),navigator.getVRDisplays&&navigator.getVRDisplays().then(gotVRDisplays).catch(function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return s},this.setVRDisplay=function(i){s=i},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),o},this.getStandingMatrix=function(){return _},this.update=function(){var a;s&&(s.getFrameData?(s.getFrameData(x),a=x.pose):s.getPose&&(a=s.getPose()),null!==a.orientation&&i.quaternion.fromArray(a.orientation),null!==a.position?i.position.fromArray(a.position):i.position.set(0,0,0),this.standing&&(s.stageParameters?(i.updateMatrix(),_.fromArray(s.stageParameters.sittingToStandingTransform),i.applyMatrix(_)):i.position.setY(i.position.y+this.userHeight)),i.position.multiplyScalar(u.scale))},this.dispose=function(){s=null}},"VRControls"),au=/* @__PURE__ */__name(function(i,a){var s,o,u,_,x=new Or,w=new Or,C=new ya,L=new ya,B=new ya,U=null;function gotVRDisplays(i){o=i,i.length>0?s=i[0]:a&&a("HMD not available")}"VRFrameData"in window&&(U=new window.VRFrameData),__name(gotVRDisplays,"gotVRDisplays"),navigator.getVRDisplays&&navigator.getVRDisplays().then(gotVRDisplays).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1;var j=this,V=i.getSize(),z=!1,$=i.getPixelRatio();this.getVRDisplay=function(){return s},this.setVRDisplay=function(i){s=i},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),o},this.setSize=function(a,o,u){if(V={width:a,height:o},z=u,j.isPresenting){var _=s.getEyeParameters("left");i.setPixelRatio(1),i.setSize(2*_.renderWidth,_.renderHeight,!1)}else i.setPixelRatio($),i.setSize(a,o,u)};var Y=i.domElement,Z=[0,0,.5,1],ee=[.5,0,.5,1];function onVRDisplayPresentChange(){var a=j.isPresenting;if(j.isPresenting=void 0!==s&&s.isPresenting,j.isPresenting){var o=s.getEyeParameters("left"),u=o.renderWidth,_=o.renderHeight;a||($=i.getPixelRatio(),V=i.getSize(),i.setPixelRatio(1),i.setSize(2*u,_,!1))}else a&&(i.setPixelRatio($),i.setSize(V.width,V.height,z))}__name(onVRDisplayPresentChange,"onVRDisplayPresentChange"),window.addEventListener("vrdisplaypresentchange",onVRDisplayPresentChange,!1),this.setFullScreen=function(i){return new Promise(function(a,o){void 0!==s?j.isPresenting!==i?a(i?s.requestPresent([{source:Y}]):s.exitPresent()):a():o(new Error("No VR hardware found."))})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(i){return void 0!==s?s.requestAnimationFrame(i):window.requestAnimationFrame(i)},this.cancelAnimationFrame=function(i){void 0!==s?s.cancelAnimationFrame(i):window.cancelAnimationFrame(i)},this.submitFrame=function(){void 0!==s&&j.isPresenting&&s.submitFrame()},this.autoSubmitFrame=!0;var ie=new PerspectiveCamera;ie.layers.enable(1);var ae=new PerspectiveCamera;ae.layers.enable(2),this.render=function(a,o,C,V){if(s&&j.isPresenting){var z=a.autoUpdate;z&&(a.updateMatrixWorld(),a.autoUpdate=!1),Array.isArray(a)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),a=a[0]);var $,Y,le=i.getSize(),ce=s.getLayers();if(ce.length){var de=ce[0];$=null!==de.leftBounds&&4===de.leftBounds.length?de.leftBounds:Z,Y=null!==de.rightBounds&&4===de.rightBounds.length?de.rightBounds:ee}else $=Z,Y=ee;if(u={x:Math.round(le.width*$[0]),y:Math.round(le.height*$[1]),width:Math.round(le.width*$[2]),height:Math.round(le.height*$[3])},_={x:Math.round(le.width*Y[0]),y:Math.round(le.height*Y[1]),width:Math.round(le.width*Y[2]),height:Math.round(le.height*Y[3])},C?(i.setRenderTarget(C),C.scissorTest=!0):(i.setRenderTarget(null),i.setScissorTest(!0)),(i.autoClear||V)&&i.clear(),null===o.parent&&o.updateMatrixWorld(),o.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ae.position.copy(ie.position),ae.quaternion.copy(ie.quaternion),ae.scale.copy(ie.scale),s.getFrameData)s.depthNear=o.near,s.depthFar=o.far,s.getFrameData(U),ie.projectionMatrix.elements=U.leftProjectionMatrix,ae.projectionMatrix.elements=U.rightProjectionMatrix,getEyeMatrices(U),ie.updateMatrix(),ie.matrix.multiply(L),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ae.updateMatrix(),ae.matrix.multiply(B),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale);else{var pe=s.getEyeParameters("left"),fe=s.getEyeParameters("right");ie.projectionMatrix=fovToProjection(pe.fieldOfView,!0,o.near,o.far),ae.projectionMatrix=fovToProjection(fe.fieldOfView,!0,o.near,o.far),x.fromArray(pe.offset),w.fromArray(fe.offset),ie.translateOnAxis(x,ie.scale.x),ae.translateOnAxis(w,ae.scale.x)}return C?(C.viewport.set(u.x,u.y,u.width,u.height),C.scissor.set(u.x,u.y,u.width,u.height)):(i.setViewport(u.x,u.y,u.width,u.height),i.setScissor(u.x,u.y,u.width,u.height)),i.render(a,ie,C,V),C?(C.viewport.set(_.x,_.y,_.width,_.height),C.scissor.set(_.x,_.y,_.width,_.height)):(i.setViewport(_.x,_.y,_.width,_.height),i.setScissor(_.x,_.y,_.width,_.height)),i.render(a,ae,C,V),C?(C.viewport.set(0,0,le.width,le.height),C.scissor.set(0,0,le.width,le.height),C.scissorTest=!1,i.setRenderTarget(null)):(i.setViewport(0,0,le.width,le.height),i.setScissorTest(!1)),z&&(a.autoUpdate=!0),void(j.autoSubmitFrame&&j.submitFrame())}i.render(a,o,C,V)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",onVRDisplayPresentChange,!1)};var le=new Dr,ce=new Or;function getEyeMatrices(i){i.pose.orientation?(le.fromArray(i.pose.orientation),C.makeRotationFromQuaternion(le)):C.identity(),i.pose.position&&(ce.fromArray(i.pose.position),C.setPosition(ce)),L.fromArray(i.leftViewMatrix),L.multiply(C),B.fromArray(i.rightViewMatrix),B.multiply(C),L.getInverse(L),B.getInverse(B)}function fovToNDCScaleOffset(i){var a=2/(i.leftTan+i.rightTan),s=(i.leftTan-i.rightTan)*a*.5,o=2/(i.upTan+i.downTan);return{scale:[a,o],offset:[s,(i.upTan-i.downTan)*o*.5]}}function fovPortToProjection(i,a,s,o){s=void 0===s?.01:s,o=void 0===o?1e4:o;var u=(a=void 0===a||a)?-1:1,_=new ya,x=_.elements,w=fovToNDCScaleOffset(i);return x[0]=w.scale[0],x[1]=0,x[2]=w.offset[0]*u,x[3]=0,x[4]=0,x[5]=w.scale[1],x[6]=-w.offset[1]*u,x[7]=0,x[8]=0,x[9]=0,x[10]=o/(s-o)*-u,x[11]=o*s/(s-o),x[12]=0,x[13]=0,x[14]=u,x[15]=0,_.transpose(),_}function fovToProjection(i,a,s,o){var u=Math.PI/180;return fovPortToProjection({upTan:Math.tan(i.upDegrees*u),downTan:Math.tan(i.downDegrees*u),leftTan:Math.tan(i.leftDegrees*u),rightTan:Math.tan(i.rightDegrees*u)},a,s,o)}__name(getEyeMatrices,"getEyeMatrices"),__name(fovToNDCScaleOffset,"fovToNDCScaleOffset"),__name(fovPortToProjection,"fovPortToProjection"),__name(fovToProjection,"fovToProjection")},"VREffect"),su=/* @__PURE__ */__name(function(i,a){var s,o,u,_,x;this.object=i,this.domElement=void 0!==a?a:document,this.enabled=!0,this.target=new Or,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:V.LEFT,ZOOM:V.MIDDLE,PAN:V.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return $.phi},this.getAzimuthalAngle=function(){return $.theta},this.saveState=function(){w.target0.copy(w.target),w.position0.copy(w.object.position),w.zoom0=w.object.zoom},this.reset=function(){w.target.copy(w.target0),w.object.position.copy(w.position0),w.object.zoom=w.zoom0,w.object.updateProjectionMatrix(),w.dispatchEvent(C),w.update(),j=U.NONE},this.update=(s=new Or,o=(new Dr).setFromUnitVectors(i.up,new Or(0,1,0)),u=o.clone().inverse(),_=new Or,x=new Dr,/* @__PURE__ */__name(function update(){var i=w.object.position;return s.copy(i).sub(w.target),s.applyQuaternion(o),$.setFromVector3(s),w.autoRotate&&j===U.NONE&&w.rotateLeft(getAutoRotationAngle()),$.theta+=Y.theta,$.phi+=Y.phi,$.theta=Math.max(w.minAzimuthAngle,Math.min(w.maxAzimuthAngle,$.theta)),$.phi=Math.max(w.minPolarAngle,Math.min(w.maxPolarAngle,$.phi)),$.makeSafe(),$.radius*=Z,$.radius=Math.max(w.minDistance,Math.min(w.maxDistance,$.radius)),w.target.add(ee),s.setFromSpherical($),s.applyQuaternion(u),i.copy(w.target).add(s),w.object.lookAt(w.target),!0===w.enableDamping?(Y.theta*=1-w.dampingFactor,Y.phi*=1-w.dampingFactor,ee.multiplyScalar(1-w.dampingFactor)):(Y.set(0,0,0),ee.set(0,0,0)),Z=1,!!(ie||_.distanceToSquared(w.object.position)>z||8*(1-x.dot(w.object.quaternion))>z)&&(w.dispatchEvent(C),_.copy(w.object.position),x.copy(w.object.quaternion),ie=!1,!0)},"update")),this.dispose=function(){w.domElement.removeEventListener("contextmenu",onContextMenu,!1),w.domElement.removeEventListener("mousedown",onMouseDown,!1),w.domElement.removeEventListener("wheel",onMouseWheel,!1),w.domElement.removeEventListener("touchstart",onTouchStart,!1),w.domElement.removeEventListener("touchend",onTouchEnd,!1),w.domElement.removeEventListener("touchmove",onTouchMove,!1),document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),window.removeEventListener("keydown",onKeyDown,!1)};var w=this,C={type:"change"},L={type:"start"},B={type:"end"},U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},j=U.NONE,z=1e-6,$=new Jc,Y=new Jc,Z=1,ee=new Or,ie=!1,ae=new Sr,le=new Sr,ce=new Sr,de=new Sr,pe=new Sr,fe=new Sr,_e=new Sr,ye=new Sr,be=new Sr;function getAutoRotationAngle(){return 2*Math.PI/60/60*w.autoRotateSpeed}function getZoomScale(){return Math.pow(.95,w.zoomSpeed)}__name(getAutoRotationAngle,"getAutoRotationAngle"),__name(getZoomScale,"getZoomScale"),w.rotateLeft=/* @__PURE__ */__name(function rotateLeft(i){Y.theta-=i},"rotateLeft"),w.rotateUp=/* @__PURE__ */__name(function rotateUp(i){Y.phi-=i},"rotateUp");var Te,Se=(Te=new Or,/* @__PURE__ */__name(function panLeft2(i,a){Te.setFromMatrixColumn(a,0),Te.multiplyScalar(-i),ee.add(Te)},"panLeft")),xe=function(){var i=new Or;/* @__PURE__ */
return __name(function panUp2(a,s){!0===w.screenSpacePanning?i.setFromMatrixColumn(s,1):(i.setFromMatrixColumn(s,0),i.crossVectors(w.object.up,i)),i.multiplyScalar(a),ee.add(i)},"panUp")}(),we=function(){var i=new Or;/* @__PURE__ */
return __name(function pan2(a,s){var o=w.domElement===document?w.domElement.body:w.domElement;if(w.object.isPerspectiveCamera){var u=w.object.position;i.copy(u).sub(w.target);var _=i.length();_*=Math.tan(w.object.fov/2*Math.PI/180),Se(2*a*_/o.clientHeight,w.object.matrix),xe(2*s*_/o.clientHeight,w.object.matrix)}else w.object.isOrthographicCamera?(Se(a*(w.object.right-w.object.left)/w.object.zoom/o.clientWidth,w.object.matrix),xe(s*(w.object.top-w.object.bottom)/w.object.zoom/o.clientHeight,w.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),w.enablePan=!1)},"pan")}();function dollyIn(i){w.object.isPerspectiveCamera?Z/=i:w.object.isOrthographicCamera?(w.object.zoom=Math.max(w.minZoom,Math.min(w.maxZoom,w.object.zoom*i)),w.object.updateProjectionMatrix(),ie=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),w.enableZoom=!1)}function dollyOut(i){w.object.isPerspectiveCamera?Z*=i:w.object.isOrthographicCamera?(w.object.zoom=Math.max(w.minZoom,Math.min(w.maxZoom,w.object.zoom/i)),w.object.updateProjectionMatrix(),ie=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),w.enableZoom=!1)}function handleMouseDownRotate(i){ae.set(i.clientX,i.clientY)}function handleMouseDownDolly(i){_e.set(i.clientX,i.clientY)}function handleMouseDownPan(i){de.set(i.clientX,i.clientY)}function handleMouseMoveRotate(i){le.set(i.clientX,i.clientY),ce.subVectors(le,ae).multiplyScalar(w.rotateSpeed);var a=w.domElement===document?w.domElement.body:w.domElement;w.rotateLeft(2*Math.PI*ce.x/a.clientHeight),w.rotateUp(2*Math.PI*ce.y/a.clientHeight),ae.copy(le),w.update()}function handleMouseMoveDolly(i){ye.set(i.clientX,i.clientY),be.subVectors(ye,_e),be.y>0?dollyIn(getZoomScale()):be.y<0&&dollyOut(getZoomScale()),_e.copy(ye),w.update()}function handleMouseMovePan(i){pe.set(i.clientX,i.clientY),fe.subVectors(pe,de).multiplyScalar(w.panSpeed),we(fe.x,fe.y),de.copy(pe),w.update()}function handleMouseWheel(i){i.deltaY<0?dollyOut(getZoomScale()):i.deltaY>0&&dollyIn(getZoomScale()),w.update()}function handleKeyDown(i){switch(i.keyCode){case w.keys.UP:we(0,w.keyPanSpeed),w.update();break;case w.keys.BOTTOM:we(0,-w.keyPanSpeed),w.update();break;case w.keys.LEFT:we(w.keyPanSpeed,0),w.update();break;case w.keys.RIGHT:we(-w.keyPanSpeed,0),w.update()}}function handleTouchStartRotate(i){ae.set(i.touches[0].pageX,i.touches[0].pageY)}function handleTouchStartDollyPan(i){if(w.enableZoom){var a=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY,o=Math.sqrt(a*a+s*s);_e.set(0,o)}if(w.enablePan){var u=.5*(i.touches[0].pageX+i.touches[1].pageX),_=.5*(i.touches[0].pageY+i.touches[1].pageY);de.set(u,_)}}function handleTouchMoveRotate(i){le.set(i.touches[0].pageX,i.touches[0].pageY),ce.subVectors(le,ae).multiplyScalar(w.rotateSpeed);var a=w.domElement===document?w.domElement.body:w.domElement;w.rotateLeft(2*Math.PI*ce.x/a.clientHeight),w.rotateUp(2*Math.PI*ce.y/a.clientHeight),ae.copy(le),w.update()}function handleTouchMoveDollyPan(i){if(w.enableZoom){var a=i.touches[0].pageX-i.touches[1].pageX,s=i.touches[0].pageY-i.touches[1].pageY,o=Math.sqrt(a*a+s*s);ye.set(0,o),be.set(0,Math.pow(ye.y/_e.y,w.zoomSpeed)),dollyIn(be.y),_e.copy(ye)}if(w.enablePan){var u=.5*(i.touches[0].pageX+i.touches[1].pageX),_=.5*(i.touches[0].pageY+i.touches[1].pageY);pe.set(u,_),fe.subVectors(pe,de).multiplyScalar(w.panSpeed),we(fe.x,fe.y),de.copy(pe)}w.update()}function onMouseDown(i){if(!1!==w.enabled){switch(i.preventDefault(),i.button){case w.mouseButtons.ORBIT:if(!1===w.enableRotate)return;handleMouseDownRotate(i),j=U.ROTATE;break;case w.mouseButtons.ZOOM:if(!1===w.enableZoom)return;handleMouseDownDolly(i),j=U.DOLLY;break;case w.mouseButtons.PAN:if(!1===w.enablePan)return;handleMouseDownPan(i),j=U.PAN}j!==U.NONE&&(document.addEventListener("mousemove",onMouseMove,!1),document.addEventListener("mouseup",onMouseUp,!1),w.dispatchEvent(L))}}function onMouseMove(i){if(!1!==w.enabled)switch(i.preventDefault(),j){case U.ROTATE:if(!1===w.enableRotate)return;handleMouseMoveRotate(i);break;case U.DOLLY:if(!1===w.enableZoom)return;handleMouseMoveDolly(i);break;case U.PAN:if(!1===w.enablePan)return;handleMouseMovePan(i)}}function onMouseUp(i){!1!==w.enabled&&(document.removeEventListener("mousemove",onMouseMove,!1),document.removeEventListener("mouseup",onMouseUp,!1),w.dispatchEvent(B),j=U.NONE)}function onMouseWheel(i){!1===w.enabled||!1===w.enableZoom||j!==U.NONE&&j!==U.ROTATE||(i.preventDefault(),i.stopPropagation(),w.dispatchEvent(L),handleMouseWheel(i),w.dispatchEvent(B))}function onKeyDown(i){!1!==w.enabled&&!1!==w.enableKeys&&!1!==w.enablePan&&handleKeyDown(i)}function onTouchStart(i){if(!1!==w.enabled){switch(i.preventDefault(),i.touches.length){case 1:if(!1===w.enableRotate)return;handleTouchStartRotate(i),j=U.TOUCH_ROTATE;break;case 2:if(!1===w.enableZoom&&!1===w.enablePan)return;handleTouchStartDollyPan(i),j=U.TOUCH_DOLLY_PAN;break;default:j=U.NONE}j!==U.NONE&&w.dispatchEvent(L)}}function onTouchMove(i){if(!1!==w.enabled)switch(i.preventDefault(),i.stopPropagation(),i.touches.length){case 1:if(!1===w.enableRotate)return;if(j!==U.TOUCH_ROTATE)return;handleTouchMoveRotate(i);break;case 2:if(!1===w.enableZoom&&!1===w.enablePan)return;if(j!==U.TOUCH_DOLLY_PAN)return;handleTouchMoveDollyPan(i);break;default:j=U.NONE}}function onTouchEnd(i){!1!==w.enabled&&(w.dispatchEvent(B),j=U.NONE)}function onContextMenu(i){!1!==w.enabled&&i.preventDefault()}__name(dollyIn,"dollyIn"),__name(dollyOut,"dollyOut"),__name(handleMouseDownRotate,"handleMouseDownRotate"),__name(handleMouseDownDolly,"handleMouseDownDolly"),__name(handleMouseDownPan,"handleMouseDownPan"),__name(handleMouseMoveRotate,"handleMouseMoveRotate"),__name(handleMouseMoveDolly,"handleMouseMoveDolly"),__name(handleMouseMovePan,"handleMouseMovePan"),__name(handleMouseWheel,"handleMouseWheel"),__name(handleKeyDown,"handleKeyDown"),__name(handleTouchStartRotate,"handleTouchStartRotate"),__name(handleTouchStartDollyPan,"handleTouchStartDollyPan"),__name(handleTouchMoveRotate,"handleTouchMoveRotate"),__name(handleTouchMoveDollyPan,"handleTouchMoveDollyPan"),__name(onMouseDown,"onMouseDown"),__name(onMouseMove,"onMouseMove"),__name(onMouseUp,"onMouseUp"),__name(onMouseWheel,"onMouseWheel"),__name(onKeyDown,"onKeyDown"),__name(onTouchStart,"onTouchStart"),__name(onTouchMove,"onTouchMove"),__name(onTouchEnd,"onTouchEnd"),__name(onContextMenu,"onContextMenu"),w.domElement.addEventListener("mousedown",onMouseDown,!1),w.domElement.addEventListener("wheel",onMouseWheel,!1),w.domElement.addEventListener("touchstart",onTouchStart,!1),w.domElement.addEventListener("touchend",onTouchEnd,!1),w.domElement.addEventListener("touchmove",onTouchMove,!1),window.addEventListener("keydown",onKeyDown,!1),this.update()},"OrbitControls");su.prototype=Object.create(EventDispatcher.prototype),su.prototype.constructor=su,Object.defineProperties(su.prototype,{center:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target},"get")},noZoom:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!i},"set")},noRotate:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!i},"set")},noPan:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!i},"set")},noKeys:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!i},"set")},staticMoving:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!i},"set")},dynamicDampingFactor:{get:/* @__PURE__ */__name(function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},"get"),set:/* @__PURE__ */__name(function(i){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=i},"set")}});const ou=/* @__PURE__ */__name(function(i){var a=this;this.object=i,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var s,o,u,_,x=/* @__PURE__ */__name(function(i){a.deviceOrientation=i},"onDeviceOrientationChangeEvent"),w=/* @__PURE__ */__name(function(){a.screenOrientation=window.orientation||0},"onScreenOrientationChangeEvent"),C=(s=new Or(0,0,1),o=new Ia,u=new Dr,_=new Dr(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(i,a,x,w,C){o.set(x,a,-w,"YXZ"),i.setFromEuler(o),i.multiply(_),i.multiply(u.setFromAxisAngle(s,-C))});this.connect=function(){w(),window.addEventListener("orientationchange",w,!1),window.addEventListener("deviceorientation",x,!1),a.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",w,!1),window.removeEventListener("deviceorientation",x,!1),a.enabled=!1},this.update=function(){if(!1!==a.enabled){var i=a.deviceOrientation;if(i){var s=i.alpha?br.degToRad(i.alpha)+a.alphaOffset:0,o=i.beta?br.degToRad(i.beta):0,u=i.gamma?br.degToRad(i.gamma):0,_=a.screenOrientation?br.degToRad(a.screenOrientation):0;C(a.object.quaternion,s,o,u,_)}}},this.dispose=function(){a.disconnect()},this.connect()},"DeviceOrientationControls");function Quat2Angle(i,a,s,o){const u=i*a+s*o;if(u>.499){const a=2*Math.atan2(i,o),s=Math.PI/2;return new Or(s,0,a)}if(u<-.499){const a=-2*Math.atan2(i,o),s=-Math.PI/2;return new Or(s,0,a)}const _=i*i,x=a*a,w=s*s,C=Math.atan2(2*a*o-2*i*s,1-2*x-2*w),L=Math.asin(2*u),B=Math.atan2(2*i*o-2*a*s,1-2*_-2*w);return new Or(L,B,C)}__name(Quat2Angle,"Quat2Angle");const lu=class _OrbitOrientationControls{constructor(i){this.object=i.camera,this.domElement=i.canvas,this.orbit=new su(this.object,this.domElement),this.speed=.5,this.orbit.target.set(0,0,-1),this.orbit.enableZoom=!1,this.orbit.enablePan=!1,this.orbit.rotateSpeed=-this.speed,i.orientation&&(this.orientation=new ou(this.object)),i.halfView&&(this.orbit.minAzimuthAngle=-Math.PI/4,this.orbit.maxAzimuthAngle=Math.PI/4)}update(){if(this.orientation){this.orientation.update();const i=this.orientation.object.quaternion,a=Quat2Angle(i.x,i.y,i.z,i.w);void 0===this.lastAngle_&&(this.lastAngle_=a),this.orbit.rotateLeft((this.lastAngle_.z-a.z)*(1+this.speed)),this.orbit.rotateUp((this.lastAngle_.y-a.y)*(1+this.speed)),this.lastAngle_=a}this.orbit.update()}dispose(){this.orbit.dispose(),this.orientation&&this.orientation.dispose()}};__name(lu,"OrbitOrientationControls");let cu=lu;const uu=function(){const i=document.createElement("video");return i.crossOrigin="anonymous",i.hasAttribute("crossorigin")}(),du=["360","360_LR","360_TB","360_CUBE","EAC","EAC_LR","NONE","AUTO","Sphere","Cube","equirectangular","180","180_LR","180_MONO"],hu=/* @__PURE__ */__name(function(i){if(i){if(i=i.toString().trim(),/sphere/i.test(i))return"360";if(/cube/i.test(i))return"360_CUBE";if(/equirectangular/i.test(i))return"360";for(let a=0;a<du.length;a++)if(new RegExp("^"+du[a]+"$","i").test(i))return du[a]}},"getInternalProjectionName"),pu=class _CanvasPlayerControls extends EventTarget{constructor(i,s,o){super(),this.player=i,this.canvas=s,this.options=o,this.onMoveEnd=a.default.bind(this,this.onMoveEnd),this.onMoveStart=a.default.bind(this,this.onMoveStart),this.onMove=a.default.bind(this,this.onMove),this.onControlBarMove=a.default.bind(this,this.onControlBarMove),this.player.controlBar.on(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],this.onControlBarMove),this.oldReportUserActivity=this.player.reportUserActivity,this.player.reportUserActivity=()=>{},this.canvas.addEventListener("mousedown",this.onMoveStart),this.canvas.addEventListener("touchstart",this.onMoveStart),this.canvas.addEventListener("mousemove",this.onMove),this.canvas.addEventListener("touchmove",this.onMove),this.canvas.addEventListener("mouseup",this.onMoveEnd),this.canvas.addEventListener("touchend",this.onMoveEnd),this.shouldTogglePlay=!1}togglePlay(){this.player.paused()?this.player.play():this.player.pause()}onMoveStart(i){this.options.disableTogglePlay||!this.player.controls()||"mousedown"===i.type&&!a.default.dom.isSingleLeftClick(i)?this.shouldTogglePlay=!1:(this.shouldTogglePlay=!0,this.touchMoveCount_=0)}onMoveEnd(i){if("touchend"===i.type&&this.touchMoveCount_<10)return!1===this.player.userActive()?void this.player.userActive(!0):void this.player.userActive(!1);this.shouldTogglePlay&&"mouseup"===i.type&&this.togglePlay()}onMove(i){this.touchMoveCount_++,this.shouldTogglePlay=!1}onControlBarMove(i){this.player.userActive(!0)}dispose(){this.canvas.removeEventListener("mousedown",this.onMoveStart),this.canvas.removeEventListener("touchstart",this.onMoveStart),this.canvas.removeEventListener("mousemove",this.onMove),this.canvas.removeEventListener("touchmove",this.onMove),this.canvas.removeEventListener("mouseup",this.onMoveEnd),this.canvas.removeEventListener("touchend",this.onMoveEnd),this.player.controlBar.off(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],this.onControlBarMove),this.player.reportUserActivity=this.oldReportUserActivity}};__name(pu,"CanvasPlayerControls");let mu=pu;const fu=class _OmnitoneController extends EventTarget{constructor(i,s,o,u){super();const _=videojs.mergeOptions({channelMap:a.default.browser.IS_SAFARI?[2,0,1,3]:[0,1,2,3],ambisonicOrder:1},u);this.videoElementSource=i.createMediaElementSource(o),this.foaRenderer=s.createFOARenderer(i,_),this.foaRenderer.initialize().then(()=>{"suspended"===i.state&&this.trigger({type:"audiocontext-suspended"}),this.videoElementSource.connect(this.foaRenderer.input),this.foaRenderer.output.connect(i.destination),this.initialized=!0,this.trigger({type:"omnitone-ready"})},i=>{a.default.log.warn(`videojs-vr: Omnitone initializes failed with the following error: ${i})`)})}update(i){this.initialized&&this.foaRenderer.setRotationMatrixFromCamera(i.matrix)}dispose(){this.initialized=!1,this.foaRenderer.setRenderingMode("bypass"),this.foaRenderer=null}};__name(fu,"OmnitoneController");let gu=fu;const _u=videojs.getComponent("Button"),yu=class _CardboardButton extends _u{constructor(i,s){super(i,s),this.handleVrDisplayActivate_=a.default.bind(this,this.handleVrDisplayActivate_),this.handleVrDisplayDeactivate_=a.default.bind(this,this.handleVrDisplayDeactivate_),this.handleVrDisplayPresentChange_=a.default.bind(this,this.handleVrDisplayPresentChange_),this.handleOrientationChange_=a.default.bind(this,this.handleOrientationChange_),window.addEventListener("orientationchange",this.handleOrientationChange_),window.addEventListener("vrdisplayactivate",this.handleVrDisplayActivate_),window.addEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_),window.addEventListener("vrdisplaypresentchange",this.handleVrDisplayPresentChange_),a.default.browser.IS_ANDROID&&this.on(i,"fullscreenchange",()=>{i.isFullscreen()?this.hide():this.show()})}buildCSSClass(){return`vjs-button-vr ${super.buildCSSClass()}`}handleVrDisplayPresentChange_(){!this.player_.vr().vrDisplay.isPresenting&&this.active_&&this.handleVrDisplayDeactivate_(),this.player_.vr().vrDisplay.isPresenting&&!this.active_&&this.handleVrDisplayActivate_()}handleOrientationChange_(){this.active_&&a.default.browser.IS_IOS&&this.changeSize_()}changeSize_(){this.player_.width(window.innerWidth),this.player_.height(window.innerHeight),window.dispatchEvent(new window.Event("resize"))}handleVrDisplayActivate_(){a.default.browser.IS_IOS&&(this.oldWidth_=this.player_.currentWidth(),this.oldHeight_=this.player_.currentHeight(),this.player_.enterFullWindow(),this.changeSize_()),this.active_=!0}handleVrDisplayDeactivate_(){a.default.browser.IS_IOS&&(this.oldWidth_&&this.player_.width(this.oldWidth_),this.oldHeight_&&this.player_.height(this.oldHeight_),this.player_.exitFullWindow()),this.active_=!1}handleClick(i){this.active_?window.dispatchEvent(new window.Event("vrdisplaydeactivate")):(!this.player_.hasStarted()&&a.default.browser.IS_ANDROID&&this.player_.play(),window.dispatchEvent(new window.Event("vrdisplayactivate")))}dispose(){super.dispose(),window.removeEventListener("vrdisplayactivate",this.handleVrDisplayActivate_),window.removeEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_),window.removeEventListener("vrdisplaypresentchange",this.handleVrDisplayPresentChange_)}};__name(yu,"CardboardButton");let vu=yu;videojs.registerComponent("CardboardButton",vu);const bu=videojs.getComponent("BigPlayButton"),Tu=class _BigVrPlayButton extends bu{buildCSSClass(){return`vjs-big-vr-play-button ${super.buildCSSClass()}`}};__name(Tu,"BigVrPlayButton");let Su=Tu;videojs.registerComponent("BigVrPlayButton",Su);const xu={debug:!1,omnitone:!1,forceCardboard:!1,omnitoneOptions:{},projection:"AUTO",sphereDetail:32,disableTogglePlay:!1},wu={"web-vr-out-of-date":{headline:"360 is out of date",type:"360_OUT_OF_DATE",message:"Your browser supports 360 but not the latest version. See <a href='http://webvr.info'>http://webvr.info</a> for more info."},"web-vr-not-supported":{headline:"360 not supported on this device",type:"360_NOT_SUPPORTED",message:"Your browser does not support 360. See <a href='http://webvr.info'>http://webvr.info</a> for assistance."},"web-vr-hls-cors-not-supported":{headline:"360 HLS video not supported on this device",type:"360_NOT_SUPPORTED",message:"Your browser/device does not support HLS 360 video. See <a href='http://webvr.info'>http://webvr.info</a> for assistance."}},Au=videojs.getPlugin("plugin"),Cu=videojs.getComponent("Component"),Eu=class _VR extends Au{constructor(i,s){const o=videojs.mergeOptions(xu,s);super(i,o),this.options_=o,this.player_=i,this.bigPlayButtonIndex_=i.children().indexOf(i.getChild("BigPlayButton"))||0,this.videojsErrorsSupport_=!!a.default.errors,this.videojsErrorsSupport_&&i.errors({errors:wu}),!a.default.browser.IE_VERSION&&uu?(this.polyfill_=new WebVRPolyfill({ROTATE_INSTRUCTIONS_DISABLED:!0}),this.polyfill_=new WebVRPolyfill,this.handleVrDisplayActivate_=a.default.bind(this,this.handleVrDisplayActivate_),this.handleVrDisplayDeactivate_=a.default.bind(this,this.handleVrDisplayDeactivate_),this.handleResize_=a.default.bind(this,this.handleResize_),this.animate_=a.default.bind(this,this.animate_),this.setProjection(this.options_.projection),this.on(i,"adstart",()=>i.setTimeout(()=>{i.ads&&i.ads.videoElementRecycled()?(this.log("video element recycled for this ad, reseting"),this.reset(),this.one(i,"playing",this.init)):this.log("video element not recycled for this ad, no need to reset")}),1),this.on(i,"loadedmetadata",this.init)):this.player_.on("loadstart",()=>{this.triggerError_({code:"web-vr-not-supported",dismiss:!1})})}changeProjection_(i){(i=hu(i))||(i="NONE");const a={x:0,y:0,z:0};if(this.scene&&this.scene.remove(this.movieScreen),"AUTO"===i){if(this.player_.mediainfo&&this.player_.mediainfo.projection&&"AUTO"!==this.player_.mediainfo.projection){const i=hu(this.player_.mediainfo.projection);return this.changeProjection_(i)}return this.changeProjection_("NONE")}if("360"===i)this.movieGeometry=new Jl(256,this.options_.sphereDetail,this.options_.sphereDetail),this.movieMaterial=new MeshBasicMaterial({map:this.videoTexture,overdraw:!0,side:le}),this.movieScreen=new Mesh(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(a.x,a.y,a.z),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.scene.add(this.movieScreen);else if("360_LR"===i||"360_TB"===i){let a=new Jl(256,this.options_.sphereDetail,this.options_.sphereDetail),s=a.faceVertexUvs[0];for(let o=0;o<s.length;o++)for(let a=0;a<3;a++)"360_LR"===i?s[o][a].x*=.5:(s[o][a].y*=.5,s[o][a].y+=.5);this.movieGeometry=(new BufferGeometry).fromGeometry(a),this.movieMaterial=new MeshBasicMaterial({map:this.videoTexture,overdraw:!0,side:le}),this.movieScreen=new Mesh(this.movieGeometry,this.movieMaterial),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),a=new Jl(256,this.options_.sphereDetail,this.options_.sphereDetail),s=a.faceVertexUvs[0];for(let o=0;o<s.length;o++)for(let a=0;a<3;a++)"360_LR"===i?(s[o][a].x*=.5,s[o][a].x+=.5):s[o][a].y*=.5;this.movieGeometry=(new BufferGeometry).fromGeometry(a),this.movieMaterial=new MeshBasicMaterial({map:this.videoTexture,overdraw:!0,side:le}),this.movieScreen=new Mesh(this.movieGeometry,this.movieMaterial),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}else if("360_CUBE"===i){this.movieGeometry=new so(256,256,256),this.movieMaterial=new MeshBasicMaterial({map:this.videoTexture,overdraw:!0,side:le});const i=[new Sr(0,.5),new Sr(.333,.5),new Sr(.333,1),new Sr(0,1)],s=[new Sr(.333,.5),new Sr(.666,.5),new Sr(.666,1),new Sr(.333,1)],o=[new Sr(.666,.5),new Sr(1,.5),new Sr(1,1),new Sr(.666,1)],u=[new Sr(0,0),new Sr(.333,0),new Sr(.333,.5),new Sr(0,.5)],_=[new Sr(.333,0),new Sr(.666,0),new Sr(.666,.5),new Sr(.333,.5)],x=[new Sr(.666,0),new Sr(1,0),new Sr(1,.5),new Sr(.666,.5)];this.movieGeometry.faceVertexUvs[0]=[],this.movieGeometry.faceVertexUvs[0][0]=[s[2],s[1],s[3]],this.movieGeometry.faceVertexUvs[0][1]=[s[1],s[0],s[3]],this.movieGeometry.faceVertexUvs[0][2]=[i[2],i[1],i[3]],this.movieGeometry.faceVertexUvs[0][3]=[i[1],i[0],i[3]],this.movieGeometry.faceVertexUvs[0][4]=[o[2],o[1],o[3]],this.movieGeometry.faceVertexUvs[0][5]=[o[1],o[0],o[3]],this.movieGeometry.faceVertexUvs[0][6]=[u[2],u[1],u[3]],this.movieGeometry.faceVertexUvs[0][7]=[u[1],u[0],u[3]],this.movieGeometry.faceVertexUvs[0][8]=[_[2],_[1],_[3]],this.movieGeometry.faceVertexUvs[0][9]=[_[1],_[0],_[3]],this.movieGeometry.faceVertexUvs[0][10]=[x[2],x[1],x[3]],this.movieGeometry.faceVertexUvs[0][11]=[x[1],x[0],x[3]],this.movieScreen=new Mesh(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(a.x,a.y,a.z),this.movieScreen.rotation.y=-Math.PI,this.scene.add(this.movieScreen)}else if("180"===i||"180_LR"===i||"180_MONO"===i){let a=new Jl(256,this.options_.sphereDetail,this.options_.sphereDetail,Math.PI,Math.PI);a.scale(-1,1,1);let s=a.faceVertexUvs[0];if("180_MONO"!==i)for(let i=0;i<s.length;i++)for(let a=0;a<3;a++)s[i][a].x*=.5;this.movieGeometry=(new BufferGeometry).fromGeometry(a),this.movieMaterial=new MeshBasicMaterial({map:this.videoTexture,overdraw:!0}),this.movieScreen=new Mesh(this.movieGeometry,this.movieMaterial),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),a=new Jl(256,this.options_.sphereDetail,this.options_.sphereDetail,Math.PI,Math.PI),a.scale(-1,1,1),s=a.faceVertexUvs[0];for(let i=0;i<s.length;i++)for(let a=0;a<3;a++)s[i][a].x*=.5,s[i][a].x+=.5;this.movieGeometry=(new BufferGeometry).fromGeometry(a),this.movieMaterial=new MeshBasicMaterial({map:this.videoTexture,overdraw:!0}),this.movieScreen=new Mesh(this.movieGeometry,this.movieMaterial),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}else if("EAC"===i||"EAC_LR"===i){const s=/* @__PURE__ */__name((i,s)=>{const o=2;this.movieGeometry=new so(256,256,256),this.movieMaterial=new ShaderMaterial({overdraw:!0,side:le,uniforms:{mapped:{value:this.videoTexture},mapMatrix:{value:i},contCorrect:{value:o},faceWH:{value:new Sr(1/3,.5).applyMatrix3(s)},vidWH:{value:new Sr(this.videoTexture.image.videoWidth,this.videoTexture.image.videoHeight).applyMatrix3(s)}},vertexShader:"\nvarying vec2 vUv;\nuniform mat3 mapMatrix;\n\nvoid main() {\n  vUv = (mapMatrix * vec3(uv, 1.)).xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n}",fragmentShader:"\nvarying vec2 vUv;\nuniform sampler2D mapped;\nuniform vec2 faceWH;\nuniform vec2 vidWH;\nuniform float contCorrect;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvoid main() {\n  vec2 corner = vUv - mod(vUv, faceWH) + vec2(0, contCorrect / vidWH.y);\n\n  vec2 faceWHadj = faceWH - vec2(0, contCorrect * 2. / vidWH.y);\n\n  vec2 p = (vUv - corner) / faceWHadj - .5;\n  vec2 q = 2. / PI * atan(2. * p) + .5;\n\n  vec2 eUv = corner + q * faceWHadj;\n\n  gl_FragColor = texture2D(mapped, eUv);\n}"});const u=[new Sr(0,.5),new Sr(1/3,.5),new Sr(1/3,1),new Sr(0,1)],_=[new Sr(1/3,.5),new Sr(2/3,.5),new Sr(2/3,1),new Sr(1/3,1)],x=[new Sr(2/3,.5),new Sr(1,.5),new Sr(1,1),new Sr(2/3,1)],w=[new Sr(1/3,0),new Sr(1/3,.5),new Sr(0,.5),new Sr(0,0)],C=[new Sr(1/3,.5),new Sr(1/3,0),new Sr(2/3,0),new Sr(2/3,.5)],L=[new Sr(1,0),new Sr(1,.5),new Sr(2/3,.5),new Sr(2/3,0)];for(const a of[u,_,x,w,C,L]){const i=this.videoTexture.image.videoHeight;let s=1,u=0;for(const o of a)o.y<s&&(s=o.y),o.y>u&&(u=o.y);for(const _ of a)Math.abs(_.y-s)<Number.EPSILON&&(_.y+=o/i),Math.abs(_.y-u)<Number.EPSILON&&(_.y-=o/i),_.x=_.x/i*(i-2*o)+o/i}return this.movieGeometry.faceVertexUvs[0]=[],this.movieGeometry.faceVertexUvs[0][0]=[u[2],u[1],u[3]],this.movieGeometry.faceVertexUvs[0][1]=[u[1],u[0],u[3]],this.movieGeometry.faceVertexUvs[0][2]=[x[2],x[1],x[3]],this.movieGeometry.faceVertexUvs[0][3]=[x[1],x[0],x[3]],this.movieGeometry.faceVertexUvs[0][4]=[L[2],L[1],L[3]],this.movieGeometry.faceVertexUvs[0][5]=[L[1],L[0],L[3]],this.movieGeometry.faceVertexUvs[0][6]=[w[2],w[1],w[3]],this.movieGeometry.faceVertexUvs[0][7]=[w[1],w[0],w[3]],this.movieGeometry.faceVertexUvs[0][8]=[_[2],_[1],_[3]],this.movieGeometry.faceVertexUvs[0][9]=[_[1],_[0],_[3]],this.movieGeometry.faceVertexUvs[0][10]=[C[2],C[1],C[3]],this.movieGeometry.faceVertexUvs[0][11]=[C[1],C[0],C[3]],this.movieScreen=new Mesh(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(a.x,a.y,a.z),this.movieScreen.rotation.y=-Math.PI,this.movieScreen},"makeScreen");if("EAC"===i)this.scene.add(s(new Ar,new Ar));else{const i=(new Ar).set(0,.5,0,1,0,0,0,0,1);s((new Ar).set(0,-.5,.5,1,0,0,0,0,1),i),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),s((new Ar).set(0,-.5,1,1,0,0,0,0,1),i),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}}this.currentProjection_=i}triggerError_(i){if(this.videojsErrorsSupport_)this.player_.error(i);else{const a=document.createElement("div");a.innerHTML=wu[i.code].message;const s=a.textContent||a.innerText||"";this.player_.error({code:i.code,message:s})}}log(...i){this.options_.debug&&i.forEach(i=>{a.default.log("VR: ",i)})}handleVrDisplayActivate_(){this.vrDisplay&&this.vrDisplay.requestPresent([{source:this.renderedCanvas}]).then(()=>{if(!this.vrDisplay.cardboardUI_||!a.default.browser.IS_IOS)return;let i=[];const s=/* @__PURE__ */__name(a=>{for(let s=0;s<a.touches.length;s++)i.push(a.touches[s])},"iosCardboardTouchStart_"),o=/* @__PURE__ */__name(a=>{i.length&&(i.forEach(i=>{const a=new window.MouseEvent("click",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});this.renderedCanvas.dispatchEvent(a)}),i=[])},"iosCardboardTouchEnd_");this.renderedCanvas.addEventListener("touchstart",s),this.renderedCanvas.addEventListener("touchend",o),this.iosRevertTouchToClick_=()=>{this.renderedCanvas.removeEventListener("touchstart",s),this.renderedCanvas.removeEventListener("touchend",o),this.iosRevertTouchToClick_=null}})}handleVrDisplayDeactivate_(){this.vrDisplay&&this.vrDisplay.isPresenting&&(this.iosRevertTouchToClick_&&this.iosRevertTouchToClick_(),this.vrDisplay.exitPresent())}requestAnimationFrame(i){return this.vrDisplay?this.vrDisplay.requestAnimationFrame(i):this.player_.requestAnimationFrame(i)}cancelAnimationFrame(i){return this.vrDisplay?this.vrDisplay.cancelAnimationFrame(i):this.player_.cancelAnimationFrame(i)}togglePlay_(){this.player_.paused()?this.player_.play():this.player_.pause()}animate_(){if(this.initialized_){if(this.getVideoEl_().readyState===this.getVideoEl_().HAVE_ENOUGH_DATA&&this.videoTexture&&(this.videoTexture.needsUpdate=!0),this.controls3d.update(),this.omniController&&this.omniController.update(this.camera),this.effect.render(this.scene,this.camera),window.navigator.getGamepads){const i=window.navigator.getGamepads();for(let a=0;a<i.length;++a){const s=i[a];if(s&&s.timestamp&&s.timestamp!==this.prevTimestamps_[a])for(let i=0;i<s.buttons.length;++i)if(s.buttons[i].pressed){this.togglePlay_(),this.prevTimestamps_[a]=s.timestamp;break}}}this.camera.getWorldDirection(this.cameraVector),this.animationFrameId_=this.requestAnimationFrame(this.animate_)}}handleResize_(){const i=this.player_.currentWidth(),a=this.player_.currentHeight();this.effect.setSize(i,a,!1),this.camera.aspect=i/a,this.camera.updateProjectionMatrix()}setProjection(i){hu(i)?(this.currentProjection_=i,this.defaultProjection_=i):a.default.log.error("videojs-vr: please pass a valid projection "+du.join(", "))}init(){if(this.reset(),this.camera=new PerspectiveCamera(75,this.player_.currentWidth()/this.player_.currentHeight(),1,1e3),this.cameraVector=new Or,"360_LR"!==this.currentProjection_&&"360_TB"!==this.currentProjection_&&"180"!==this.currentProjection_&&"180_LR"!==this.currentProjection_&&"180_MONO"!==this.currentProjection_&&"EAC_LR"!==this.currentProjection_||this.camera.layers.enable(1),this.scene=new zo,this.videoTexture=new VideoTexture(this.getVideoEl_()),this.videoTexture.generateMipmaps=!1,this.videoTexture.minFilter=Dt,this.videoTexture.magFilter=Dt,this.videoTexture.format=Kt,this.changeProjection_(this.currentProjection_),"NONE"===this.currentProjection_)return this.log("Projection is NONE, dont init"),void this.reset();this.player_.removeChild("BigPlayButton"),this.player_.addChild("BigVrPlayButton",{},this.bigPlayButtonIndex_),this.player_.bigPlayButton=this.player_.getChild("BigVrPlayButton"),(this.options_.forceCardboard||a.default.browser.IS_ANDROID||a.default.browser.IS_IOS)&&this.addCardboardButton_(),a.default.browser.IS_IOS&&this.player_.controlBar&&this.player_.controlBar.fullscreenToggle&&this.player_.controlBar.fullscreenToggle.hide(),this.camera.position.set(0,0,0),this.renderer=new WebGLRenderer({devicePixelRatio:window.devicePixelRatio,alpha:!1,clearColor:16777215,antialias:!0});const i=this.renderer.getContext("webgl"),s=i.texImage2D;i.texImage2D=(...a)=>{try{return s.apply(i,a)}catch(o){throw this.reset(),this.player_.pause(),this.triggerError_({code:"web-vr-hls-cors-not-supported",dismiss:!1}),new Error(o)}},this.renderer.setSize(this.player_.currentWidth(),this.player_.currentHeight(),!1),this.effect=new au(this.renderer),this.effect.setSize(this.player_.currentWidth(),this.player_.currentHeight(),!1),this.vrDisplay=null,this.prevTimestamps_=[],this.renderedCanvas=this.renderer.domElement,this.renderedCanvas.setAttribute("style","width: 100%; height: 100%; position: absolute; top:0;");const o=this.getVideoEl_().style;if(this.player_.el().insertBefore(this.renderedCanvas,this.player_.el().firstChild),o.zIndex="-1",o.opacity="0",window.navigator.getVRDisplays?(this.log("is supported, getting vr displays"),window.navigator.getVRDisplays().then(i=>{if(i.length>0&&(this.log("Displays found",i),this.vrDisplay=i[0],this.vrDisplay.isPolyfilled||(this.log("Real HMD found using VRControls",this.vrDisplay),this.addCardboardButton_(),this.controls3d=new ru(this.camera))),!this.controls3d){this.log("no HMD found Using Orbit & Orientation Controls");const i={camera:this.camera,canvas:this.renderedCanvas,halfView:0===this.currentProjection_.indexOf("180"),orientation:a.default.browser.IS_IOS||a.default.browser.IS_ANDROID||!1};!1===this.options_.motionControls&&(i.orientation=!1),this.controls3d=new cu(i),this.canvasPlayerControls=new mu(this.player_,this.renderedCanvas,this.options_)}this.animationFrameId_=this.requestAnimationFrame(this.animate_)})):window.navigator.getVRDevices?this.triggerError_({code:"web-vr-out-of-date",dismiss:!1}):this.triggerError_({code:"web-vr-not-supported",dismiss:!1}),this.options_.omnitone){const i=Ec.getContext();this.omniController=new gu(i,this.options_.omnitone,this.getVideoEl_(),this.options_.omnitoneOptions),this.omniController.one("audiocontext-suspended",()=>{this.player.pause(),this.player.one("playing",()=>{i.resume()})})}this.on(this.player_,"fullscreenchange",this.handleResize_),window.addEventListener("vrdisplaypresentchange",this.handleResize_,!0),window.addEventListener("resize",this.handleResize_,!0),window.addEventListener("vrdisplayactivate",this.handleVrDisplayActivate_,!0),window.addEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_,!0),this.initialized_=!0,this.trigger("initialized")}addCardboardButton_(){this.player_.controlBar.getChild("CardboardButton")||this.player_.controlBar.addChild("CardboardButton",{})}getVideoEl_(){return this.player_.el().getElementsByTagName("video")[0]}reset(){if(!this.initialized_)return;this.omniController&&(this.omniController.off("audiocontext-suspended"),this.omniController.dispose(),this.omniController=void 0),this.controls3d&&(this.controls3d.dispose(),this.controls3d=null),this.canvasPlayerControls&&(this.canvasPlayerControls.dispose(),this.canvasPlayerControls=null),this.effect&&(this.effect.dispose(),this.effect=null),window.removeEventListener("resize",this.handleResize_,!0),window.removeEventListener("vrdisplaypresentchange",this.handleResize_,!0),window.removeEventListener("vrdisplayactivate",this.handleVrDisplayActivate_,!0),window.removeEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_,!0),this.player_.getChild("BigPlayButton")||this.player_.addChild("BigPlayButton",{},this.bigPlayButtonIndex_),this.player_.getChild("BigVrPlayButton")&&this.player_.removeChild("BigVrPlayButton"),this.player_.getChild("CardboardButton")&&this.player_.controlBar.removeChild("CardboardButton"),a.default.browser.IS_IOS&&this.player_.controlBar&&this.player_.controlBar.fullscreenToggle&&this.player_.controlBar.fullscreenToggle.show();const i=this.getVideoEl_().style;i.zIndex="",i.opacity="",this.currentProjection_=this.defaultProjection_,this.iosRevertTouchToClick_&&this.iosRevertTouchToClick_(),this.renderedCanvas&&this.renderedCanvas.parentNode.removeChild(this.renderedCanvas),this.animationFrameId_&&this.cancelAnimationFrame(this.animationFrameId_),this.initialized_=!1}dispose(){super.dispose(),this.reset()}polyfillVersion(){return WebVRPolyfill.version}};__name(Eu,"VR");let Mu=Eu;return Mu.prototype.setTimeout=Cu.prototype.setTimeout,Mu.prototype.clearTimeout=Cu.prototype.clearTimeout,Mu.VERSION=s,videojs.registerPlugin("vr",Mu),Mu}(GO)),nx.exports}__name(requireVideojsVr,"requireVideojsVr");var qO=requireVideojsVr();const XO=/* @__PURE__ */_mergeNamespaces({__proto__:null,default:/* @__PURE__ */getDefaultExportFromCjs(qO)},[qO]),QO=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),KO=/* @__PURE__ */__name(i=>"number"==typeof i&&!isNaN(i)&&i>=0&&i<1/0,"validSeconds");let YO=/* @__PURE__ */__name(i=>{const a=i.playlist.autoadvance_;a.timeout&&i.clearTimeout(a.timeout),a.trigger&&i.off("ended",a.trigger),a.abortOrErrorHandler&&i.off(["abort","error"],a.abortOrErrorHandler),a.timeout=null,a.trigger=null,a.abortOrErrorHandler=null},"reset");const JO=/* @__PURE__ */__name((i,a)=>{YO(i),KO(a)?(i.playlist.autoadvance_.delay=a,i.playlist.autoadvance_.trigger=function(){const s=/* @__PURE__ */__name(()=>JO(i,a),"cancelOnPlay");i.one("play",s),i.playlist.autoadvance_.timeout=i.setTimeout(()=>{YO(i),i.off("play",s),i.one("loadstart",function(){i.playlist.isAutoadvancing=!0}),i.playlist.next(!0)},1e3*a)},i.playlist.autoadvance_.abortOrErrorHandler=function(){i.playlist.isAutoadvancing=!1},i.one("ended",i.playlist.autoadvance_.trigger),i.one(["abort","error"],i.playlist.autoadvance_.abortOrErrorHandler)):i.playlist.autoadvance_.delay=null},"setup"),ZO=/* @__PURE__ */__name(i=>{const a=i.remoteTextTracks();let s=a&&a.length||0;for(;s--;)i.removeRemoteTextTrack(a[s])},"clearTracks"),eN=/* @__PURE__ */__name((i,a,s=!1)=>{const o=!i.paused()||i.ended(),u=/* @__PURE__ */__name(()=>{i.audioPosterMode()&&i.poster(a.poster||"")},"displayPoster");return i.trigger("beforeplaylistitem",a.originalValue||a),a.playlistItemId_&&(i.playlist.currentPlaylistItemId_=a.playlistItemId_),i.poster(s?"":a.poster||""),i.off("audiopostermodechange",u),i.one("audiopostermodechange",u),i.src(a.sources),ZO(i),i.ready(()=>{if((a.textTracks||[]).forEach(i.addRemoteTextTrack.bind(i)),i.trigger("playlistitem",a.originalValue||a),o){const a=i.play();void 0!==a&&"function"==typeof a.then&&a.then(null,i=>{})}JO(i,i.playlist.autoadvance_.delay)}),i},"playItem");let tN=1;const nN=/* @__PURE__ */__name(i=>{let a=i;return i&&"object"==typeof i||(a=Object(i),a.originalValue=i),a.playlistItemId_=tN++,a},"preparePlaylistItem"),iN=/* @__PURE__ */__name(i=>i.map(nN),"preparePlaylistItems"),rN=/* @__PURE__ */__name((i,a)=>{for(let s=0;s<i.length;s++)if(i[s].playlistItemId_===a)return s;return-1},"indexInPlaylistItemIds"),aN=/* @__PURE__ */__name((i,a)=>{let s=i,o=a;return"object"==typeof i&&(s=i.src),"object"==typeof a&&(o=a.src),/^\/\//.test(s)&&(o=o.slice(o.indexOf("//"))),/^\/\//.test(o)&&(s=s.slice(s.indexOf("//"))),s===o},"sourceEquals"),sN=/* @__PURE__ */__name((i,a)=>{for(let s=0;s<i.length;s++){const o=i[s].sources;if(Array.isArray(o))for(let i=0;i<o.length;i++){const u=o[i];if(u&&aN(u,a))return s}}return-1},"indexInSources"),oN=/* @__PURE__ */__name(i=>{let a=-1;const s=i.length-1;for(;++a<i.length;){const o=a+Math.floor(Math.random()*(s-a+1)),u=i[o];i[o]=i[a],i[a]=u}return i},"randomize");function factory(i,a,s=0){let o=null,u=!1;const _=i.playlist=(a,s=0)=>{if(u)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(a)){const x=Array.isArray(o)?o.slice():null;o=iN(a),u=!0,i.trigger({type:"duringplaylistchange",nextIndex:s,nextPlaylist:a,previousIndex:_.currentIndex_,previousPlaylist:x||[]}),u=!1,-1!==s&&_.currentItem(s),x&&i.setTimeout(()=>{i.trigger({type:"playlistchange",action:"change"})},0)}return o.map(i=>i.originalValue||i)};return i.on("loadstart",()=>{-1===_.currentItem()&&YO(i)}),_.currentIndex_=-1,_.player_=i,_.autoadvance_={},_.repeat_=!1,_.currentPlaylistItemId_=null,_.currentItem=(i,a)=>{if(u)return _.currentIndex_;if("number"==typeof i&&_.currentIndex_!==i&&i>=0&&i<o.length)return _.currentIndex_=i,eN(_.player_,o[_.currentIndex_],a),_.currentIndex_;const s=_.player_.currentSrc()||"";if(_.currentPlaylistItemId_){const i=rN(o,_.currentPlaylistItemId_),a=o[i];if(a&&Array.isArray(a.sources)&&sN([a],s)>-1)return _.currentIndex_=i,_.currentIndex_;_.currentPlaylistItemId_=null}return _.currentIndex_=_.indexOf(s),_.currentIndex_},_.add=(a,s)=>{if(u)throw new Error("cannot modify a playlist that is currently changing");("number"!=typeof s||s<0||s>o.length)&&(s=o.length),Array.isArray(a)||(a=[a]),o.splice(s,0,...iN(a)),i.trigger({type:"playlistchange",action:"add"}),i.trigger({type:"playlistadd",count:a.length,index:s})},_.remove=(a,s=1)=>{if(u)throw new Error("cannot modify a playlist that is currently changing");"number"!=typeof a||a<0||a>o.length||(o.splice(a,s),i.trigger({type:"playlistchange",action:"remove"}),i.trigger({type:"playlistremove",count:s,index:a}))},_.contains=i=>-1!==_.indexOf(i),_.indexOf=i=>{if("string"==typeof i)return sN(o,i);const a=Array.isArray(i)?i:i.sources;for(let s=0;s<a.length;s++){const i=a[s];if("string"==typeof i)return sN(o,i);if(i.src)return sN(o,i.src)}return-1},_.currentIndex=()=>_.currentItem(),_.lastIndex=()=>o.length-1,_.nextIndex=()=>{const i=_.currentItem();if(-1===i)return-1;const a=_.lastIndex();return _.repeat_&&i===a?0:Math.min(i+1,a)},_.previousIndex=()=>{const i=_.currentItem();return-1===i?-1:_.repeat_&&0===i?_.lastIndex():Math.max(i-1,0)},_.first=()=>{if(u)return;const i=_.currentItem(0);if(o.length)return o[i].originalValue||o[i];_.currentIndex_=-1},_.last=()=>{if(u)return;const i=_.currentItem(_.lastIndex());if(o.length)return o[i].originalValue||o[i];_.currentIndex_=-1},_.next=(i=!1)=>{if(u)return;const a=_.nextIndex();if(a!==_.currentIndex_){const s=_.currentItem(a,i);return o[s].originalValue||o[s]}},_.previous=()=>{if(u)return;const i=_.previousIndex();if(i!==_.currentIndex_){const a=_.currentItem(i);return o[a].originalValue||o[a]}},_.autoadvance=i=>{JO(_.player_,i)},_.repeat=i=>void 0===i?_.repeat_:"boolean"==typeof i?(_.repeat_=!!i,_.repeat_):void videojs$2.log.error("videojs-playlist: Invalid value for repeat",i),_.sort=a=>{o.length&&(o.sort(a),u||i.trigger("playlistsorted"))},_.reverse=()=>{o.length&&(o.reverse(),u||i.trigger("playlistsorted"))},_.shuffle=({rest:a}={})=>{let s=0,x=o;a&&(s=_.currentIndex_+1,x=o.slice(s)),x.length<=1||(oN(x),a&&o.splice(...[s,x.length].concat(x)),u||i.trigger("playlistsorted"))},Array.isArray(a)?_(a,s):o=[],_}__name(factory,"factory");const lN=videojs$2.registerPlugin||videojs$2.plugin,cN=/* @__PURE__ */__name(function(i,a){factory(this,i,a)},"plugin");lN("playlist",cN),cN.VERSION="5.2.0";const uN=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,default:cN},Symbol.toStringTag,{value:"Module"}));i.ALL_SUPPORTED_EVENTS=KS,i.FunPlayerWebComponent=ZS,i.createFunPlayerElement=createFunPlayerElement,i.default=ex,i.getEventDocumentation=getEventDocumentation,i.registerFunPlayerWebComponent=registerFunPlayerWebComponent,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}(this.FunPlayer=this.FunPlayer||{});
