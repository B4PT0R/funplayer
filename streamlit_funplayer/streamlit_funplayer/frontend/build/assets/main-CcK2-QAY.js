const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./videojs-vr-CHzw7_q-.css"])))=>i.map(i=>d[i]);
var y3=Object.defineProperty;var v3=(n,e,t)=>e in n?y3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var sy=(n,e,t)=>v3(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Js(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Ex(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var ay={exports:{}},gd={},oy={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function _3(){if($v)return It;$v=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=m&&k[m]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function D(k,Y,he){this.props=k,this.context=Y,this.refs=C,this.updater=he||w}D.prototype.isReactComponent={},D.prototype.setState=function(k,Y){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Y,"setState")},D.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function N(){}N.prototype=D.prototype;function L(k,Y,he){this.props=k,this.context=Y,this.refs=C,this.updater=he||w}var P=L.prototype=new N;P.constructor=L,A(P,D.prototype),P.isPureReactComponent=!0;var X=Array.isArray,j=Object.prototype.hasOwnProperty,K={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function J(k,Y,he){var Ie,V={},ae=null,pe=null;if(Y!=null)for(Ie in Y.ref!==void 0&&(pe=Y.ref),Y.key!==void 0&&(ae=""+Y.key),Y)j.call(Y,Ie)&&!z.hasOwnProperty(Ie)&&(V[Ie]=Y[Ie]);var Z=arguments.length-2;if(Z===1)V.children=he;else if(1<Z){for(var _e=Array(Z),Me=0;Me<Z;Me++)_e[Me]=arguments[Me+2];V.children=_e}if(k&&k.defaultProps)for(Ie in Z=k.defaultProps,Z)V[Ie]===void 0&&(V[Ie]=Z[Ie]);return{$$typeof:n,type:k,key:ae,ref:pe,props:V,_owner:K.current}}function R(k,Y){return{$$typeof:n,type:k.type,key:Y,ref:k.ref,props:k.props,_owner:k._owner}}function F(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function de(k){var Y={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(he){return Y[he]})}var fe=/\/+/g;function le(k,Y){return typeof k=="object"&&k!==null&&k.key!=null?de(""+k.key):Y.toString(36)}function Se(k,Y,he,Ie,V){var ae=typeof k;(ae==="undefined"||ae==="boolean")&&(k=null);var pe=!1;if(k===null)pe=!0;else switch(ae){case"string":case"number":pe=!0;break;case"object":switch(k.$$typeof){case n:case e:pe=!0}}if(pe)return pe=k,V=V(pe),k=Ie===""?"."+le(pe,0):Ie,X(V)?(he="",k!=null&&(he=k.replace(fe,"$&/")+"/"),Se(V,Y,he,"",function(Me){return Me})):V!=null&&(F(V)&&(V=R(V,he+(!V.key||pe&&pe.key===V.key?"":(""+V.key).replace(fe,"$&/")+"/")+k)),Y.push(V)),1;if(pe=0,Ie=Ie===""?".":Ie+":",X(k))for(var Z=0;Z<k.length;Z++){ae=k[Z];var _e=Ie+le(ae,Z);pe+=Se(ae,Y,he,_e,V)}else if(_e=x(k),typeof _e=="function")for(k=_e.call(k),Z=0;!(ae=k.next()).done;)ae=ae.value,_e=Ie+le(ae,Z++),pe+=Se(ae,Y,he,_e,V);else if(ae==="object")throw Y=String(k),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return pe}function Ee(k,Y,he){if(k==null)return k;var Ie=[],V=0;return Se(k,Ie,"","",function(ae){return Y.call(he,ae,V++)}),Ie}function Ce(k){if(k._status===-1){var Y=k._result;Y=Y(),Y.then(function(he){(k._status===0||k._status===-1)&&(k._status=1,k._result=he)},function(he){(k._status===0||k._status===-1)&&(k._status=2,k._result=he)}),k._status===-1&&(k._status=0,k._result=Y)}if(k._status===1)return k._result.default;throw k._result}var re={current:null},te={transition:null},ue={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:te,ReactCurrentOwner:K};function ce(){throw Error("act(...) is not supported in production builds of React.")}return It.Children={map:Ee,forEach:function(k,Y,he){Ee(k,function(){Y.apply(this,arguments)},he)},count:function(k){var Y=0;return Ee(k,function(){Y++}),Y},toArray:function(k){return Ee(k,function(Y){return Y})||[]},only:function(k){if(!F(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},It.Component=D,It.Fragment=t,It.Profiler=r,It.PureComponent=L,It.StrictMode=i,It.Suspense=c,It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,It.act=ce,It.cloneElement=function(k,Y,he){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var Ie=A({},k.props),V=k.key,ae=k.ref,pe=k._owner;if(Y!=null){if(Y.ref!==void 0&&(ae=Y.ref,pe=K.current),Y.key!==void 0&&(V=""+Y.key),k.type&&k.type.defaultProps)var Z=k.type.defaultProps;for(_e in Y)j.call(Y,_e)&&!z.hasOwnProperty(_e)&&(Ie[_e]=Y[_e]===void 0&&Z!==void 0?Z[_e]:Y[_e])}var _e=arguments.length-2;if(_e===1)Ie.children=he;else if(1<_e){Z=Array(_e);for(var Me=0;Me<_e;Me++)Z[Me]=arguments[Me+2];Ie.children=Z}return{$$typeof:n,type:k.type,key:V,ref:ae,props:Ie,_owner:pe}},It.createContext=function(k){return k={$$typeof:o,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:s,_context:k},k.Consumer=k},It.createElement=J,It.createFactory=function(k){var Y=J.bind(null,k);return Y.type=k,Y},It.createRef=function(){return{current:null}},It.forwardRef=function(k){return{$$typeof:u,render:k}},It.isValidElement=F,It.lazy=function(k){return{$$typeof:f,_payload:{_status:-1,_result:k},_init:Ce}},It.memo=function(k,Y){return{$$typeof:h,type:k,compare:Y===void 0?null:Y}},It.startTransition=function(k){var Y=te.transition;te.transition={};try{k()}finally{te.transition=Y}},It.unstable_act=ce,It.useCallback=function(k,Y){return re.current.useCallback(k,Y)},It.useContext=function(k){return re.current.useContext(k)},It.useDebugValue=function(){},It.useDeferredValue=function(k){return re.current.useDeferredValue(k)},It.useEffect=function(k,Y){return re.current.useEffect(k,Y)},It.useId=function(){return re.current.useId()},It.useImperativeHandle=function(k,Y,he){return re.current.useImperativeHandle(k,Y,he)},It.useInsertionEffect=function(k,Y){return re.current.useInsertionEffect(k,Y)},It.useLayoutEffect=function(k,Y){return re.current.useLayoutEffect(k,Y)},It.useMemo=function(k,Y){return re.current.useMemo(k,Y)},It.useReducer=function(k,Y,he){return re.current.useReducer(k,Y,he)},It.useRef=function(k){return re.current.useRef(k)},It.useState=function(k){return re.current.useState(k)},It.useSyncExternalStore=function(k,Y,he){return re.current.useSyncExternalStore(k,Y,he)},It.useTransition=function(){return re.current.useTransition()},It.version="18.3.1",It}var zv;function Y0(){return zv||(zv=1,oy.exports=_3()),oy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function b3(){if(Vv)return gd;Vv=1;var n=Y0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(u,c,h){var f,m={},x=null,w=null;h!==void 0&&(x=""+h),c.key!==void 0&&(x=""+c.key),c.ref!==void 0&&(w=c.ref);for(f in c)i.call(c,f)&&!s.hasOwnProperty(f)&&(m[f]=c[f]);if(u&&u.defaultProps)for(f in c=u.defaultProps,c)m[f]===void 0&&(m[f]=c[f]);return{$$typeof:e,type:u,key:x,ref:w,props:m,_owner:r.current}}return gd.Fragment=t,gd.jsx=o,gd.jsxs=o,gd}var Hv;function x3(){return Hv||(Hv=1,ay.exports=b3()),ay.exports}var Ps=x3(),S3=Y0();const T3=Js(S3);var Lf={},ly={exports:{}},Rn={},uy={exports:{}},cy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function C3(){return qv||(qv=1,function(n){function e(te,ue){var ce=te.length;te.push(ue);e:for(;0<ce;){var k=ce-1>>>1,Y=te[k];if(0<r(Y,ue))te[k]=ue,te[ce]=Y,ce=k;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ue=te[0],ce=te.pop();if(ce!==ue){te[0]=ce;e:for(var k=0,Y=te.length,he=Y>>>1;k<he;){var Ie=2*(k+1)-1,V=te[Ie],ae=Ie+1,pe=te[ae];if(0>r(V,ce))ae<Y&&0>r(pe,V)?(te[k]=pe,te[ae]=ce,k=ae):(te[k]=V,te[Ie]=ce,k=Ie);else if(ae<Y&&0>r(pe,ce))te[k]=pe,te[ae]=ce,k=ae;else break e}}return ue}function r(te,ue){var ce=te.sortIndex-ue.sortIndex;return ce!==0?ce:te.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var c=[],h=[],f=1,m=null,x=3,w=!1,A=!1,C=!1,D=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(te){for(var ue=t(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=te)i(h),ue.sortIndex=ue.expirationTime,e(c,ue);else break;ue=t(h)}}function X(te){if(C=!1,P(te),!A)if(t(c)!==null)A=!0,Ce(j);else{var ue=t(h);ue!==null&&re(X,ue.startTime-te)}}function j(te,ue){A=!1,C&&(C=!1,N(J),J=-1),w=!0;var ce=x;try{for(P(ue),m=t(c);m!==null&&(!(m.expirationTime>ue)||te&&!de());){var k=m.callback;if(typeof k=="function"){m.callback=null,x=m.priorityLevel;var Y=k(m.expirationTime<=ue);ue=n.unstable_now(),typeof Y=="function"?m.callback=Y:m===t(c)&&i(c),P(ue)}else i(c);m=t(c)}if(m!==null)var he=!0;else{var Ie=t(h);Ie!==null&&re(X,Ie.startTime-ue),he=!1}return he}finally{m=null,x=ce,w=!1}}var K=!1,z=null,J=-1,R=5,F=-1;function de(){return!(n.unstable_now()-F<R)}function fe(){if(z!==null){var te=n.unstable_now();F=te;var ue=!0;try{ue=z(!0,te)}finally{ue?le():(K=!1,z=null)}}else K=!1}var le;if(typeof L=="function")le=function(){L(fe)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Ee=Se.port2;Se.port1.onmessage=fe,le=function(){Ee.postMessage(null)}}else le=function(){D(fe,0)};function Ce(te){z=te,K||(K=!0,le())}function re(te,ue){J=D(function(){te(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){A||w||(A=!0,Ce(j))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(te){switch(x){case 1:case 2:case 3:var ue=3;break;default:ue=x}var ce=x;x=ue;try{return te()}finally{x=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,ue){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ce=x;x=te;try{return ue()}finally{x=ce}},n.unstable_scheduleCallback=function(te,ue,ce){var k=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?k+ce:k):ce=k,te){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ce+Y,te={id:f++,callback:ue,priorityLevel:te,startTime:ce,expirationTime:Y,sortIndex:-1},ce>k?(te.sortIndex=ce,e(h,te),t(c)===null&&te===t(h)&&(C?(N(J),J=-1):C=!0,re(X,ce-k))):(te.sortIndex=Y,e(c,te),A||w||(A=!0,Ce(j))),te},n.unstable_shouldYield=de,n.unstable_wrapCallback=function(te){var ue=x;return function(){var ce=x;x=ue;try{return te.apply(this,arguments)}finally{x=ce}}}}(cy)),cy}var Wv;function w3(){return Wv||(Wv=1,uy.exports=C3()),uy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function E3(){if(Gv)return Rn;Gv=1;var n=Y0(),e=w3();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(r[a]=l,a=0;a<l.length;a++)i.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function x(a){return c.call(m,a)?!0:c.call(f,a)?!1:h.test(a)?m[a]=!0:(f[a]=!0,!1)}function w(a,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function A(a,l,d,g){if(l===null||typeof l>"u"||w(a,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function C(a,l,d,g,b,T,O){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=b,this.mustUseProperty=d,this.propertyName=a,this.type=l,this.sanitizeURL=T,this.removeEmptyString=O}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){D[a]=new C(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];D[l]=new C(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){D[a]=new C(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){D[a]=new C(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){D[a]=new C(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){D[a]=new C(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){D[a]=new C(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){D[a]=new C(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){D[a]=new C(a,5,!1,a.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function L(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(N,L);D[l]=new C(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(N,L);D[l]=new C(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(N,L);D[l]=new C(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){D[a]=new C(a,1,!1,a.toLowerCase(),null,!1,!1)}),D.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){D[a]=new C(a,1,!1,a.toLowerCase(),null,!0,!0)});function P(a,l,d,g){var b=D.hasOwnProperty(l)?D[l]:null;(b!==null?b.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(A(l,d,b,g)&&(d=null),g||b===null?x(l)&&(d===null?a.removeAttribute(l):a.setAttribute(l,""+d)):b.mustUseProperty?a[b.propertyName]=d===null?b.type===3?!1:"":d:(l=b.attributeName,g=b.attributeNamespace,d===null?a.removeAttribute(l):(b=b.type,d=b===3||b===4&&d===!0?"":""+d,g?a.setAttributeNS(g,l,d):a.setAttribute(l,d))))}var X=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),K=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),de=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),te=Symbol.iterator;function ue(a){return a===null||typeof a!="object"?null:(a=te&&a[te]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Object.assign,k;function Y(a){if(k===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);k=l&&l[1]||""}return`
`+k+a}var he=!1;function Ie(a,l){if(!a||he)return"";he=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(Te){var g=Te}Reflect.construct(a,[],l)}else{try{l.call()}catch(Te){g=Te}a.call(l.prototype)}else{try{throw Error()}catch(Te){g=Te}a()}}catch(Te){if(Te&&g&&typeof Te.stack=="string"){for(var b=Te.stack.split(`
`),T=g.stack.split(`
`),O=b.length-1,G=T.length-1;1<=O&&0<=G&&b[O]!==T[G];)G--;for(;1<=O&&0<=G;O--,G--)if(b[O]!==T[G]){if(O!==1||G!==1)do if(O--,G--,0>G||b[O]!==T[G]){var ee=`
`+b[O].replace(" at new "," at ");return a.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",a.displayName)),ee}while(1<=O&&0<=G);break}}}finally{he=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?Y(a):""}function V(a){switch(a.tag){case 5:return Y(a.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return a=Ie(a.type,!1),a;case 11:return a=Ie(a.type.render,!1),a;case 1:return a=Ie(a.type,!0),a;default:return""}}function ae(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case z:return"Fragment";case K:return"Portal";case R:return"Profiler";case J:return"StrictMode";case le:return"Suspense";case Se:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case de:return(a.displayName||"Context")+".Consumer";case F:return(a._context.displayName||"Context")+".Provider";case fe:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ee:return l=a.displayName||null,l!==null?l:ae(a.type)||"Memo";case Ce:l=a._payload,a=a._init;try{return ae(a(l))}catch{}}return null}function pe(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(l);case 8:return l===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function Z(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function _e(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Me(a){var l=_e(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var b=d.get,T=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return b.call(this)},set:function(O){g=""+O,T.call(this,O)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function $e(a){a._valueTracker||(a._valueTracker=Me(a))}function Ve(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return a&&(g=_e(a)?a.checked?"true":"false":a.value),a=g,a!==d?(l.setValue(a),!0):!1}function nt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function st(a,l){var d=l.checked;return ce({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??a._wrapperState.initialChecked})}function Xn(a,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=Z(l.value!=null?l.value:d),a._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function ri(a,l){l=l.checked,l!=null&&P(a,"checked",l,!1)}function Yn(a,l){ri(a,l);var d=Z(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?Ri(a,l.type,d):l.hasOwnProperty("defaultValue")&&Ri(a,l.type,Z(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function Oi(a,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,d||l===a.value||(a.value=l),a.defaultValue=l}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function Ri(a,l,d){(l!=="number"||nt(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var mt=Array.isArray;function Tt(a,l,d,g){if(a=a.options,l){l={};for(var b=0;b<d.length;b++)l["$"+d[b]]=!0;for(d=0;d<a.length;d++)b=l.hasOwnProperty("$"+a[d].value),a[d].selected!==b&&(a[d].selected=b),b&&g&&(a[d].defaultSelected=!0)}else{for(d=""+Z(d),l=null,b=0;b<a.length;b++){if(a[b].value===d){a[b].selected=!0,g&&(a[b].defaultSelected=!0);return}l!==null||a[b].disabled||(l=a[b])}l!==null&&(l.selected=!0)}}function Yt(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Sn(a,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(t(92));if(mt(d)){if(1<d.length)throw Error(t(93));d=d[0]}l=d}l==null&&(l=""),d=l}a._wrapperState={initialValue:Z(d)}}function _r(a,l){var d=Z(l.value),g=Z(l.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),l.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),g!=null&&(a.defaultValue=""+g)}function br(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function xr(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Li(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?xr(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Qn,us=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,b){MSApp.execUnsafeLocalFunction(function(){return a(l,d,g,b)})}:a}(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(Qn=Qn||document.createElement("div"),Qn.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Qn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Tn(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var Yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ie=["Webkit","ms","Moz","O"];Object.keys(Yi).forEach(function(a){ie.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Yi[l]=Yi[a]})});function xe(a,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Yi.hasOwnProperty(a)&&Yi[a]?(""+l).trim():l+"px"}function De(a,l){a=a.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,b=xe(d,l[d],g);d==="float"&&(d="cssFloat"),g?a.setProperty(d,b):a[d]=b}}var je=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(a,l){if(l){if(je[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function Rt(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jt=null;function ot(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ue=null,I=null,M=null;function $(a){if(a=S(a)){if(typeof Ue!="function")throw Error(t(280));var l=a.stateNode;l&&(l=B(l),Ue(a.stateNode,a.type,l))}}function oe(a){I?M?M.push(a):M=[a]:I=a}function Pe(){if(I){var a=I,l=M;if(M=I=null,$(a),l)for(a=0;a<l.length;a++)$(l[a])}}function ze(a,l){return a(l)}function xt(){}var pi=!1;function en(a,l,d){if(pi)return a(l,d);pi=!0;try{return ze(a,l,d)}finally{pi=!1,(I!==null||M!==null)&&(xt(),Pe())}}function $i(a,l){var d=a.stateNode;if(d===null)return null;var g=B(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(t(231,l,typeof d));return d}var un=!1;if(u)try{var tn={};Object.defineProperty(tn,"passive",{get:function(){un=!0}}),window.addEventListener("test",tn,tn),window.removeEventListener("test",tn,tn)}catch{un=!1}function Jn(a,l,d,g,b,T,O,G,ee){var Te=Array.prototype.slice.call(arguments,3);try{l.apply(d,Te)}catch(Re){this.onError(Re)}}var zi=!1,$t=null,Cn=!1,$r=null,gi={onError:function(a){zi=!0,$t=a}};function wn(a,l,d,g,b,T,O,G,ee){zi=!1,$t=null,Jn.apply(gi,arguments)}function Zn(a,l,d,g,b,T,O,G,ee){if(wn.apply(this,arguments),zi){if(zi){var Te=$t;zi=!1,$t=null}else throw Error(t(198));Cn||(Cn=!0,$r=Te)}}function Dt(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function ph(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function Mo(a){if(Dt(a)!==a)throw Error(t(188))}function Fl(a){var l=a.alternate;if(!l){if(l=Dt(a),l===null)throw Error(t(188));return l!==a?null:a}for(var d=a,g=l;;){var b=d.return;if(b===null)break;var T=b.alternate;if(T===null){if(g=b.return,g!==null){d=g;continue}break}if(b.child===T.child){for(T=b.child;T;){if(T===d)return Mo(b),a;if(T===g)return Mo(b),l;T=T.sibling}throw Error(t(188))}if(d.return!==g.return)d=b,g=T;else{for(var O=!1,G=b.child;G;){if(G===d){O=!0,d=b,g=T;break}if(G===g){O=!0,g=b,d=T;break}G=G.sibling}if(!O){for(G=T.child;G;){if(G===d){O=!0,d=T,g=b;break}if(G===g){O=!0,g=T,d=b;break}G=G.sibling}if(!O)throw Error(t(189))}}if(d.alternate!==g)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?a:l}function gh(a){return a=Fl(a),a!==null?cs(a):null}function cs(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=cs(a);if(l!==null)return l;a=a.sibling}return null}var ti=e.unstable_scheduleCallback,Pc=e.unstable_cancelCallback,Bl=e.unstable_shouldYield,Dg=e.unstable_requestPaint,mi=e.unstable_now,Ig=e.unstable_getCurrentPriorityLevel,jl=e.unstable_ImmediatePriority,Ul=e.unstable_UserBlockingPriority,Ma=e.unstable_NormalPriority,mh=e.unstable_LowPriority,yh=e.unstable_IdlePriority,$l=null,cn=null;function zl(a){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot($l,a,void 0,(a.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:Ro,Po=Math.log,Oo=Math.LN2;function Ro(a){return a>>>=0,a===0?32:31-(Po(a)/Oo|0)|0}var ds=64,Vl=4194304;function Pa(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Hl(a,l){var d=a.pendingLanes;if(d===0)return 0;var g=0,b=a.suspendedLanes,T=a.pingedLanes,O=d&268435455;if(O!==0){var G=O&~b;G!==0?g=Pa(G):(T&=O,T!==0&&(g=Pa(T)))}else O=d&~b,O!==0?g=Pa(O):T!==0&&(g=Pa(T));if(g===0)return 0;if(l!==0&&l!==g&&(l&b)===0&&(b=g&-g,T=l&-l,b>=T||b===16&&(T&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=g;0<l;)d=31-En(l),b=1<<d,g|=a[d],l&=~b;return g}function kg(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hs(a,l){for(var d=a.suspendedLanes,g=a.pingedLanes,b=a.expirationTimes,T=a.pendingLanes;0<T;){var O=31-En(T),G=1<<O,ee=b[O];ee===-1?((G&d)===0||(G&g)!==0)&&(b[O]=kg(G,l)):ee<=l&&(a.expiredLanes|=G),T&=~G}}function Oa(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function vh(){var a=ds;return ds<<=1,(ds&4194240)===0&&(ds=64),a}function Lo(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function Zs(a,l,d){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-En(l),a[l]=d}function er(a,l){var d=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<d;){var b=31-En(d),T=1<<b;l[b]=0,g[b]=-1,a[b]=-1,d&=~T}}function Oc(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var g=31-En(d),b=1<<g;b&l|a[g]&l&&(a[g]|=l),d&=~b}}var Lt=0;function Ra(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var No,fs,ql,Rc,Wl,Lc=!1,Gl=[],ps=null,tr=null,zr=null,Fo=new Map,La=new Map,gs=[],_h="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bh(a,l){switch(a){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":Fo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":La.delete(l.pointerId)}}function ms(a,l,d,g,b,T){return a===null||a.nativeEvent!==T?(a={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:T,targetContainers:[b]},l!==null&&(l=S(l),l!==null&&fs(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,b!==null&&l.indexOf(b)===-1&&l.push(b),a)}function Kl(a,l,d,g,b){switch(l){case"focusin":return ps=ms(ps,a,l,d,g,b),!0;case"dragenter":return tr=ms(tr,a,l,d,g,b),!0;case"mouseover":return zr=ms(zr,a,l,d,g,b),!0;case"pointerover":var T=b.pointerId;return Fo.set(T,ms(Fo.get(T)||null,a,l,d,g,b)),!0;case"gotpointercapture":return T=b.pointerId,La.set(T,ms(La.get(T)||null,a,l,d,g,b)),!0}return!1}function Nc(a){var l=v(a.target);if(l!==null){var d=Dt(l);if(d!==null){if(l=d.tag,l===13){if(l=ph(d),l!==null){a.blockedOn=l,Wl(a.priority,function(){ql(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xl(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=Bc(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var g=new d.constructor(d.type,d);Jt=g,d.target.dispatchEvent(g),Jt=null}else return l=S(d),l!==null&&fs(l),a.blockedOn=d,!1;l.shift()}return!0}function xh(a,l,d){Xl(a)&&d.delete(l)}function Sh(){Lc=!1,ps!==null&&Xl(ps)&&(ps=null),tr!==null&&Xl(tr)&&(tr=null),zr!==null&&Xl(zr)&&(zr=null),Fo.forEach(xh),La.forEach(xh)}function Na(a,l){a.blockedOn===l&&(a.blockedOn=null,Lc||(Lc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Sh)))}function Bo(a){function l(b){return Na(b,a)}if(0<Gl.length){Na(Gl[0],a);for(var d=1;d<Gl.length;d++){var g=Gl[d];g.blockedOn===a&&(g.blockedOn=null)}}for(ps!==null&&Na(ps,a),tr!==null&&Na(tr,a),zr!==null&&Na(zr,a),Fo.forEach(l),La.forEach(l),d=0;d<gs.length;d++)g=gs[d],g.blockedOn===a&&(g.blockedOn=null);for(;0<gs.length&&(d=gs[0],d.blockedOn===null);)Nc(d),d.blockedOn===null&&gs.shift()}var ea=X.ReactCurrentBatchConfig,Yl=!0;function Mg(a,l,d,g){var b=Lt,T=ea.transition;ea.transition=null;try{Lt=1,Fc(a,l,d,g)}finally{Lt=b,ea.transition=T}}function Pg(a,l,d,g){var b=Lt,T=ea.transition;ea.transition=null;try{Lt=4,Fc(a,l,d,g)}finally{Lt=b,ea.transition=T}}function Fc(a,l,d,g){if(Yl){var b=Bc(a,l,d,g);if(b===null)qa(a,l,g,Ql,d),bh(a,g);else if(Kl(b,a,l,d,g))g.stopPropagation();else if(bh(a,g),l&4&&-1<_h.indexOf(a)){for(;b!==null;){var T=S(b);if(T!==null&&No(T),T=Bc(a,l,d,g),T===null&&qa(a,l,g,Ql,d),T===b)break;b=T}b!==null&&g.stopPropagation()}else qa(a,l,g,null,d)}}var Ql=null;function Bc(a,l,d,g){if(Ql=null,a=ot(g),a=v(a),a!==null)if(l=Dt(a),l===null)a=null;else if(d=l.tag,d===13){if(a=ph(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return Ql=a,null}function Jl(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ig()){case jl:return 1;case Ul:return 4;case Ma:case mh:return 16;case yh:return 536870912;default:return 16}default:return 16}}var ys=null,Zl=null,ta=null;function Th(){if(ta)return ta;var a,l=Zl,d=l.length,g,b="value"in ys?ys.value:ys.textContent,T=b.length;for(a=0;a<d&&l[a]===b[a];a++);var O=d-a;for(g=1;g<=O&&l[d-g]===b[T-g];g++);return ta=b.slice(a,1<g?1-g:void 0)}function eu(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function tu(){return!0}function Ch(){return!1}function dn(a){function l(d,g,b,T,O){this._reactName=d,this._targetInst=b,this.type=g,this.nativeEvent=T,this.target=O,this.currentTarget=null;for(var G in a)a.hasOwnProperty(G)&&(d=a[G],this[G]=d?d(T):T[G]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?tu:Ch,this.isPropagationStopped=Ch,this}return ce(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),l}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ia=dn(Vr),Hr=ce({},Vr,{view:0,detail:0}),iu=dn(Hr),hn,ir,vs,jo=ce({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jc,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==vs&&(vs&&a.type==="mousemove"?(hn=a.screenX-vs.screenX,ir=a.screenY-vs.screenY):ir=hn=0,vs=a),hn)},movementY:function(a){return"movementY"in a?a.movementY:ir}}),wh=dn(jo),Og=ce({},jo,{dataTransfer:0}),Rg=dn(Og),Lg=ce({},Hr,{relatedTarget:0}),nu=dn(Lg),Eh=ce({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),ru=dn(Eh),Uo=ce({},Vr,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),su=dn(Uo),na=ce({},Vr,{data:0}),Ah=dn(na),Dh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ih={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ng(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=kh[a])?!!l[a]:!1}function jc(){return Ng}var Fg=ce({},Hr,{key:function(a){if(a.key){var l=Dh[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=eu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Ih[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jc,charCode:function(a){return a.type==="keypress"?eu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?eu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),au=dn(Fg),Bg=ce({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=dn(Bg),jg=ce({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jc}),Ug=dn(jg),Mh=ce({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),$c=dn(Mh),$g=ce({},jo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),zg=dn($g),Vg=[9,13,27,32],$o=u&&"CompositionEvent"in window,zo=null;u&&"documentMode"in document&&(zo=document.documentMode);var Ph=u&&"TextEvent"in window&&!zo,Oh=u&&(!$o||zo&&8<zo&&11>=zo),Rh=" ",zc=!1;function Lh(a,l){switch(a){case"keyup":return Vg.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vc(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ra=!1;function Nh(a,l){switch(a){case"compositionend":return Vc(l);case"keypress":return l.which!==32?null:(zc=!0,Rh);case"textInput":return a=l.data,a===Rh&&zc?null:a;default:return null}}function Hg(a,l){if(ra)return a==="compositionend"||!$o&&Lh(a,l)?(a=Th(),ta=Zl=ys=null,ra=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Oh&&l.locale!=="ko"?null:l.data;default:return null}}var qg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vo(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!qg[a.type]:l==="textarea"}function Fh(a,l,d,g){oe(g),l=fu(l,"onChange"),0<l.length&&(d=new ia("onChange","change",null,d,g),a.push({event:d,listeners:l}))}var Ho=null,qo=null;function Wg(a){Gh(a,0)}function Wo(a){var l=E(a);if(Ve(l))return a}function Gg(a,l){if(a==="change")return l}var Fa=!1;if(u){var ou;if(u){var Ba="oninput"in document;if(!Ba){var ja=document.createElement("div");ja.setAttribute("oninput","return;"),Ba=typeof ja.oninput=="function"}ou=Ba}else ou=!1;Fa=ou&&(!document.documentMode||9<document.documentMode)}function ci(){Ho&&(Ho.detachEvent("onpropertychange",sa),qo=Ho=null)}function sa(a){if(a.propertyName==="value"&&Wo(qo)){var l=[];Fh(l,qo,a,ot(a)),en(Wg,l)}}function Hc(a,l,d){a==="focusin"?(ci(),Ho=l,qo=d,Ho.attachEvent("onpropertychange",sa)):a==="focusout"&&ci()}function Kg(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Wo(qo)}function Xg(a,l){if(a==="click")return Wo(l)}function Yg(a,l){if(a==="input"||a==="change")return Wo(l)}function Qg(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var An=typeof Object.is=="function"?Object.is:Qg;function Ua(a,l){if(An(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var b=d[g];if(!c.call(l,b)||!An(a[b],l[b]))return!1}return!0}function qc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Wc(a,l){var d=qc(a);a=0;for(var g;d;){if(d.nodeType===3){if(g=a+d.textContent.length,a<=l&&g>=l)return{node:d,offset:l-a};a=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=qc(d)}}function Gc(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?Gc(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function lu(){for(var a=window,l=nt();l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=nt(a.document)}return l}function uu(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function Kc(a){var l=lu(),d=a.focusedElem,g=a.selectionRange;if(l!==d&&d&&d.ownerDocument&&Gc(d.ownerDocument.documentElement,d)){if(g!==null&&uu(d)){if(l=g.start,a=g.end,a===void 0&&(a=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(a,d.value.length);else if(a=(l=d.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var b=d.textContent.length,T=Math.min(g.start,b);g=g.end===void 0?T:Math.min(g.end,b),!a.extend&&T>g&&(b=g,g=T,T=b),b=Wc(d,T);var O=Wc(d,g);b&&O&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==O.node||a.focusOffset!==O.offset)&&(l=l.createRange(),l.setStart(b.node,b.offset),a.removeAllRanges(),T>g?(a.addRange(l),a.extend(O.node,O.offset)):(l.setEnd(O.node,O.offset),a.addRange(l)))}}for(l=[],a=d;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)a=l[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Jg=u&&"documentMode"in document&&11>=document.documentMode,Sr=null,Xc=null,$a=null,cu=!1;function Bh(a,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;cu||Sr==null||Sr!==nt(g)||(g=Sr,"selectionStart"in g&&uu(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),$a&&Ua($a,g)||($a=g,g=fu(Xc,"onSelect"),0<g.length&&(l=new ia("onSelect","select",null,l,d),a.push({event:l,listeners:g}),l.target=Sr)))}function du(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var aa={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionend:du("Transition","TransitionEnd")},Yc={},jh={};u&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function za(a){if(Yc[a])return Yc[a];if(!aa[a])return a;var l=aa[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in jh)return Yc[a]=l[d];return a}var Uh=za("animationend"),$h=za("animationiteration"),zh=za("animationstart"),Vh=za("transitionend"),Hh=new Map,qh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(a,l){Hh.set(a,l),s(l,[a])}for(var Qc=0;Qc<qh.length;Qc++){var Jc=qh[Qc],Zg=Jc.toLowerCase(),em=Jc[0].toUpperCase()+Jc.slice(1);_s(Zg,"on"+em)}_s(Uh,"onAnimationEnd"),_s($h,"onAnimationIteration"),_s(zh,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(Vh,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dn));function Wh(a,l,d){var g=a.type||"unknown-event";a.currentTarget=d,Zn(g,l,void 0,a),a.currentTarget=null}function Gh(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var g=a[d],b=g.event;g=g.listeners;e:{var T=void 0;if(l)for(var O=g.length-1;0<=O;O--){var G=g[O],ee=G.instance,Te=G.currentTarget;if(G=G.listener,ee!==T&&b.isPropagationStopped())break e;Wh(b,G,Te),T=ee}else for(O=0;O<g.length;O++){if(G=g[O],ee=G.instance,Te=G.currentTarget,G=G.listener,ee!==T&&b.isPropagationStopped())break e;Wh(b,G,Te),T=ee}}}if(Cn)throw a=$r,Cn=!1,$r=null,a}function si(a,l){var d=l[p];d===void 0&&(d=l[p]=new Set);var g=a+"__bubble";d.has(g)||(Go(l,a,2,!1),d.add(g))}function hu(a,l,d){var g=0;l&&(g|=4),Go(d,a,g,l)}var Va="_reactListening"+Math.random().toString(36).slice(2);function Ha(a){if(!a[Va]){a[Va]=!0,i.forEach(function(d){d!=="selectionchange"&&(tm.has(d)||hu(d,!1,a),hu(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Va]||(l[Va]=!0,hu("selectionchange",!1,l))}}function Go(a,l,d,g){switch(Jl(l)){case 1:var b=Mg;break;case 4:b=Pg;break;default:b=Fc}d=b.bind(null,l,d,a),b=void 0,!un||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(b=!0),g?b!==void 0?a.addEventListener(l,d,{capture:!0,passive:b}):a.addEventListener(l,d,!0):b!==void 0?a.addEventListener(l,d,{passive:b}):a.addEventListener(l,d,!1)}function qa(a,l,d,g,b){var T=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var G=g.stateNode.containerInfo;if(G===b||G.nodeType===8&&G.parentNode===b)break;if(O===4)for(O=g.return;O!==null;){var ee=O.tag;if((ee===3||ee===4)&&(ee=O.stateNode.containerInfo,ee===b||ee.nodeType===8&&ee.parentNode===b))return;O=O.return}for(;G!==null;){if(O=v(G),O===null)return;if(ee=O.tag,ee===5||ee===6){g=T=O;continue e}G=G.parentNode}}g=g.return}en(function(){var Te=T,Re=ot(d),Le=[];e:{var Oe=Hh.get(a);if(Oe!==void 0){var qe=ia,Ke=a;switch(a){case"keypress":if(eu(d)===0)break e;case"keydown":case"keyup":qe=au;break;case"focusin":Ke="focus",qe=nu;break;case"focusout":Ke="blur",qe=nu;break;case"beforeblur":case"afterblur":qe=nu;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=Rg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=Ug;break;case Uh:case $h:case zh:qe=ru;break;case Vh:qe=$c;break;case"scroll":qe=iu;break;case"wheel":qe=zg;break;case"copy":case"cut":case"paste":qe=su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=Uc}var Ye=(l&4)!==0,Ai=!Ye&&a==="scroll",ve=Ye?Oe!==null?Oe+"Capture":null:Oe;Ye=[];for(var se=Te,be;se!==null;){be=se;var Be=be.stateNode;if(be.tag===5&&Be!==null&&(be=Be,ve!==null&&(Be=$i(se,ve),Be!=null&&Ye.push(Ko(se,Be,be)))),Ai)break;se=se.return}0<Ye.length&&(Oe=new qe(Oe,Ke,null,d,Re),Le.push({event:Oe,listeners:Ye}))}}if((l&7)===0){e:{if(Oe=a==="mouseover"||a==="pointerover",qe=a==="mouseout"||a==="pointerout",Oe&&d!==Jt&&(Ke=d.relatedTarget||d.fromElement)&&(v(Ke)||Ke[wr]))break e;if((qe||Oe)&&(Oe=Re.window===Re?Re:(Oe=Re.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,qe?(Ke=d.relatedTarget||d.toElement,qe=Te,Ke=Ke?v(Ke):null,Ke!==null&&(Ai=Dt(Ke),Ke!==Ai||Ke.tag!==5&&Ke.tag!==6)&&(Ke=null)):(qe=null,Ke=Te),qe!==Ke)){if(Ye=wh,Be="onMouseLeave",ve="onMouseEnter",se="mouse",(a==="pointerout"||a==="pointerover")&&(Ye=Uc,Be="onPointerLeave",ve="onPointerEnter",se="pointer"),Ai=qe==null?Oe:E(qe),be=Ke==null?Oe:E(Ke),Oe=new Ye(Be,se+"leave",qe,d,Re),Oe.target=Ai,Oe.relatedTarget=be,Be=null,v(Re)===Te&&(Ye=new Ye(ve,se+"enter",Ke,d,Re),Ye.target=be,Ye.relatedTarget=Ai,Be=Ye),Ai=Be,qe&&Ke)t:{for(Ye=qe,ve=Ke,se=0,be=Ye;be;be=Wa(be))se++;for(be=0,Be=ve;Be;Be=Wa(Be))be++;for(;0<se-be;)Ye=Wa(Ye),se--;for(;0<be-se;)ve=Wa(ve),be--;for(;se--;){if(Ye===ve||ve!==null&&Ye===ve.alternate)break t;Ye=Wa(Ye),ve=Wa(ve)}Ye=null}else Ye=null;qe!==null&&Kh(Le,Oe,qe,Ye,!1),Ke!==null&&Ai!==null&&Kh(Le,Ai,Ke,Ye,!0)}}e:{if(Oe=Te?E(Te):window,qe=Oe.nodeName&&Oe.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Oe.type==="file")var Je=Gg;else if(Vo(Oe))if(Fa)Je=Yg;else{Je=Kg;var tt=Hc}else(qe=Oe.nodeName)&&qe.toLowerCase()==="input"&&(Oe.type==="checkbox"||Oe.type==="radio")&&(Je=Xg);if(Je&&(Je=Je(a,Te))){Fh(Le,Je,d,Re);break e}tt&&tt(a,Oe,Te),a==="focusout"&&(tt=Oe._wrapperState)&&tt.controlled&&Oe.type==="number"&&Ri(Oe,"number",Oe.value)}switch(tt=Te?E(Te):window,a){case"focusin":(Vo(tt)||tt.contentEditable==="true")&&(Sr=tt,Xc=Te,$a=null);break;case"focusout":$a=Xc=Sr=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,Bh(Le,d,Re);break;case"selectionchange":if(Jg)break;case"keydown":case"keyup":Bh(Le,d,Re)}var it;if($o)e:{switch(a){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else ra?Lh(a,d)&&(lt="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(lt="onCompositionStart");lt&&(Oh&&d.locale!=="ko"&&(ra||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&ra&&(it=Th()):(ys=Re,Zl="value"in ys?ys.value:ys.textContent,ra=!0)),tt=fu(Te,lt),0<tt.length&&(lt=new Ah(lt,a,null,d,Re),Le.push({event:lt,listeners:tt}),it?lt.data=it:(it=Vc(d),it!==null&&(lt.data=it)))),(it=Ph?Nh(a,d):Hg(a,d))&&(Te=fu(Te,"onBeforeInput"),0<Te.length&&(Re=new Ah("onBeforeInput","beforeinput",null,d,Re),Le.push({event:Re,listeners:Te}),Re.data=it))}Gh(Le,l)})}function Ko(a,l,d){return{instance:a,listener:l,currentTarget:d}}function fu(a,l){for(var d=l+"Capture",g=[];a!==null;){var b=a,T=b.stateNode;b.tag===5&&T!==null&&(b=T,T=$i(a,d),T!=null&&g.unshift(Ko(a,T,b)),T=$i(a,l),T!=null&&g.push(Ko(a,T,b))),a=a.return}return g}function Wa(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Kh(a,l,d,g,b){for(var T=l._reactName,O=[];d!==null&&d!==g;){var G=d,ee=G.alternate,Te=G.stateNode;if(ee!==null&&ee===g)break;G.tag===5&&Te!==null&&(G=Te,b?(ee=$i(d,T),ee!=null&&O.unshift(Ko(d,ee,G))):b||(ee=$i(d,T),ee!=null&&O.push(Ko(d,ee,G)))),d=d.return}O.length!==0&&a.push({event:l,listeners:O})}var im=/\r\n?/g,Zc=/\u0000|\uFFFD/g;function Xh(a){return(typeof a=="string"?a:""+a).replace(im,`
`).replace(Zc,"")}function pu(a,l,d){if(l=Xh(l),Xh(a)!==l&&d)throw Error(t(425))}function Xo(){}var bs=null,Nt=null;function qr(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ni=typeof setTimeout=="function"?setTimeout:void 0,Tr=typeof clearTimeout=="function"?clearTimeout:void 0,Yh=typeof Promise=="function"?Promise:void 0,Qh=typeof queueMicrotask=="function"?queueMicrotask:typeof Yh<"u"?function(a){return Yh.resolve(null).then(a).catch(nm)}:Ni;function nm(a){setTimeout(function(){throw a})}function ed(a,l){var d=l,g=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(g===0){a.removeChild(b),Bo(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=b}while(d);Bo(l)}function xs(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function Jh(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),Cr="__reactFiber$"+Ga,Yo="__reactProps$"+Ga,wr="__reactContainer$"+Ga,p="__reactEvents$"+Ga,y="__reactListeners$"+Ga,_="__reactHandles$"+Ga;function v(a){var l=a[Cr];if(l)return l;for(var d=a.parentNode;d;){if(l=d[wr]||d[Cr]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=Jh(a);a!==null;){if(d=a[Cr])return d;a=Jh(a)}return l}a=d,d=a.parentNode}return null}function S(a){return a=a[Cr]||a[wr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function E(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function B(a){return a[Yo]||null}var U=[],H=-1;function q(a){return{current:a}}function Q(a){0>H||(a.current=U[H],U[H]=null,H--)}function ye(a,l){H++,U[H]=a.current,a.current=l}var Fe={},we=q(Fe),We=q(!1),at=Fe;function li(a,l){var d=a.type.contextTypes;if(!d)return Fe;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var b={},T;for(T in d)b[T]=l[T];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=b),b}function Zt(a){return a=a.childContextTypes,a!=null}function nr(){Q(We),Q(we)}function Ka(a,l,d){if(we.current!==Fe)throw Error(t(168));ye(we,l),ye(We,d)}function Xa(a,l,d){var g=a.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var b in g)if(!(b in l))throw Error(t(108,pe(a)||"Unknown",b));return ce({},d,g)}function Ss(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Fe,at=we.current,ye(we,a),ye(We,We.current),!0}function Ya(a,l,d){var g=a.stateNode;if(!g)throw Error(t(169));d?(a=Xa(a,l,at),g.__reactInternalMemoizedMergedChildContext=a,Q(We),Q(we),ye(we,a)):Q(We),ye(We,d)}var In=null,zt=!1,oa=!1;function kn(a){In===null?In=[a]:In.push(a)}function NE(a){zt=!0,kn(a)}function Qa(){if(!oa&&In!==null){oa=!0;var a=0,l=Lt;try{var d=In;for(Lt=1;a<d.length;a++){var g=d[a];do g=g(!0);while(g!==null)}In=null,zt=!1}catch(b){throw In!==null&&(In=In.slice(a+1)),ti(jl,Qa),b}finally{Lt=l,oa=!1}}return null}var gu=[],mu=0,Zh=null,ef=0,Er=[],Ar=0,Qo=null,la=1,ua="";function Jo(a,l){gu[mu++]=ef,gu[mu++]=Zh,Zh=a,ef=l}function f2(a,l,d){Er[Ar++]=la,Er[Ar++]=ua,Er[Ar++]=Qo,Qo=a;var g=la;a=ua;var b=32-En(g)-1;g&=~(1<<b),d+=1;var T=32-En(l)+b;if(30<T){var O=b-b%5;T=(g&(1<<O)-1).toString(32),g>>=O,b-=O,la=1<<32-En(l)+b|d<<b|g,ua=T+a}else la=1<<T|d<<b|g,ua=a}function rm(a){a.return!==null&&(Jo(a,1),f2(a,1,0))}function sm(a){for(;a===Zh;)Zh=gu[--mu],gu[mu]=null,ef=gu[--mu],gu[mu]=null;for(;a===Qo;)Qo=Er[--Ar],Er[Ar]=null,ua=Er[--Ar],Er[Ar]=null,la=Er[--Ar],Er[Ar]=null}var rr=null,sr=null,di=!1,Wr=null;function p2(a,l){var d=Mr(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=a,l=a.deletions,l===null?(a.deletions=[d],a.flags|=16):l.push(d)}function g2(a,l){switch(a.tag){case 5:var d=a.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,rr=a,sr=xs(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,rr=a,sr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Qo!==null?{id:la,overflow:ua}:null,a.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=Mr(18,null,null,0),d.stateNode=l,d.return=a,a.child=d,rr=a,sr=null,!0):!1;default:return!1}}function am(a){return(a.mode&1)!==0&&(a.flags&128)===0}function om(a){if(di){var l=sr;if(l){var d=l;if(!g2(a,l)){if(am(a))throw Error(t(418));l=xs(d.nextSibling);var g=rr;l&&g2(a,l)?p2(g,d):(a.flags=a.flags&-4097|2,di=!1,rr=a)}}else{if(am(a))throw Error(t(418));a.flags=a.flags&-4097|2,di=!1,rr=a}}}function m2(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;rr=a}function tf(a){if(a!==rr)return!1;if(!di)return m2(a),di=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!qr(a.type,a.memoizedProps)),l&&(l=sr)){if(am(a))throw y2(),Error(t(418));for(;l;)p2(a,l),l=xs(l.nextSibling)}if(m2(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(l===0){sr=xs(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}a=a.nextSibling}sr=null}}else sr=rr?xs(a.stateNode.nextSibling):null;return!0}function y2(){for(var a=sr;a;)a=xs(a.nextSibling)}function yu(){sr=rr=null,di=!1}function lm(a){Wr===null?Wr=[a]:Wr.push(a)}var FE=X.ReactCurrentBatchConfig;function td(a,l,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var g=d.stateNode}if(!g)throw Error(t(147,a));var b=g,T=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===T?l.ref:(l=function(O){var G=b.refs;O===null?delete G[T]:G[T]=O},l._stringRef=T,l)}if(typeof a!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,a))}return a}function nf(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function v2(a){var l=a._init;return l(a._payload)}function _2(a){function l(ve,se){if(a){var be=ve.deletions;be===null?(ve.deletions=[se],ve.flags|=16):be.push(se)}}function d(ve,se){if(!a)return null;for(;se!==null;)l(ve,se),se=se.sibling;return null}function g(ve,se){for(ve=new Map;se!==null;)se.key!==null?ve.set(se.key,se):ve.set(se.index,se),se=se.sibling;return ve}function b(ve,se){return ve=so(ve,se),ve.index=0,ve.sibling=null,ve}function T(ve,se,be){return ve.index=be,a?(be=ve.alternate,be!==null?(be=be.index,be<se?(ve.flags|=2,se):be):(ve.flags|=2,se)):(ve.flags|=1048576,se)}function O(ve){return a&&ve.alternate===null&&(ve.flags|=2),ve}function G(ve,se,be,Be){return se===null||se.tag!==6?(se=Zm(be,ve.mode,Be),se.return=ve,se):(se=b(se,be),se.return=ve,se)}function ee(ve,se,be,Be){var Je=be.type;return Je===z?Re(ve,se,be.props.children,Be,be.key):se!==null&&(se.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===Ce&&v2(Je)===se.type)?(Be=b(se,be.props),Be.ref=td(ve,se,be),Be.return=ve,Be):(Be=Af(be.type,be.key,be.props,null,ve.mode,Be),Be.ref=td(ve,se,be),Be.return=ve,Be)}function Te(ve,se,be,Be){return se===null||se.tag!==4||se.stateNode.containerInfo!==be.containerInfo||se.stateNode.implementation!==be.implementation?(se=ey(be,ve.mode,Be),se.return=ve,se):(se=b(se,be.children||[]),se.return=ve,se)}function Re(ve,se,be,Be,Je){return se===null||se.tag!==7?(se=al(be,ve.mode,Be,Je),se.return=ve,se):(se=b(se,be),se.return=ve,se)}function Le(ve,se,be){if(typeof se=="string"&&se!==""||typeof se=="number")return se=Zm(""+se,ve.mode,be),se.return=ve,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case j:return be=Af(se.type,se.key,se.props,null,ve.mode,be),be.ref=td(ve,null,se),be.return=ve,be;case K:return se=ey(se,ve.mode,be),se.return=ve,se;case Ce:var Be=se._init;return Le(ve,Be(se._payload),be)}if(mt(se)||ue(se))return se=al(se,ve.mode,be,null),se.return=ve,se;nf(ve,se)}return null}function Oe(ve,se,be,Be){var Je=se!==null?se.key:null;if(typeof be=="string"&&be!==""||typeof be=="number")return Je!==null?null:G(ve,se,""+be,Be);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case j:return be.key===Je?ee(ve,se,be,Be):null;case K:return be.key===Je?Te(ve,se,be,Be):null;case Ce:return Je=be._init,Oe(ve,se,Je(be._payload),Be)}if(mt(be)||ue(be))return Je!==null?null:Re(ve,se,be,Be,null);nf(ve,be)}return null}function qe(ve,se,be,Be,Je){if(typeof Be=="string"&&Be!==""||typeof Be=="number")return ve=ve.get(be)||null,G(se,ve,""+Be,Je);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case j:return ve=ve.get(Be.key===null?be:Be.key)||null,ee(se,ve,Be,Je);case K:return ve=ve.get(Be.key===null?be:Be.key)||null,Te(se,ve,Be,Je);case Ce:var tt=Be._init;return qe(ve,se,be,tt(Be._payload),Je)}if(mt(Be)||ue(Be))return ve=ve.get(be)||null,Re(se,ve,Be,Je,null);nf(se,Be)}return null}function Ke(ve,se,be,Be){for(var Je=null,tt=null,it=se,lt=se=0,qi=null;it!==null&&lt<be.length;lt++){it.index>lt?(qi=it,it=null):qi=it.sibling;var Bt=Oe(ve,it,be[lt],Be);if(Bt===null){it===null&&(it=qi);break}a&&it&&Bt.alternate===null&&l(ve,it),se=T(Bt,se,lt),tt===null?Je=Bt:tt.sibling=Bt,tt=Bt,it=qi}if(lt===be.length)return d(ve,it),di&&Jo(ve,lt),Je;if(it===null){for(;lt<be.length;lt++)it=Le(ve,be[lt],Be),it!==null&&(se=T(it,se,lt),tt===null?Je=it:tt.sibling=it,tt=it);return di&&Jo(ve,lt),Je}for(it=g(ve,it);lt<be.length;lt++)qi=qe(it,ve,lt,be[lt],Be),qi!==null&&(a&&qi.alternate!==null&&it.delete(qi.key===null?lt:qi.key),se=T(qi,se,lt),tt===null?Je=qi:tt.sibling=qi,tt=qi);return a&&it.forEach(function(ao){return l(ve,ao)}),di&&Jo(ve,lt),Je}function Ye(ve,se,be,Be){var Je=ue(be);if(typeof Je!="function")throw Error(t(150));if(be=Je.call(be),be==null)throw Error(t(151));for(var tt=Je=null,it=se,lt=se=0,qi=null,Bt=be.next();it!==null&&!Bt.done;lt++,Bt=be.next()){it.index>lt?(qi=it,it=null):qi=it.sibling;var ao=Oe(ve,it,Bt.value,Be);if(ao===null){it===null&&(it=qi);break}a&&it&&ao.alternate===null&&l(ve,it),se=T(ao,se,lt),tt===null?Je=ao:tt.sibling=ao,tt=ao,it=qi}if(Bt.done)return d(ve,it),di&&Jo(ve,lt),Je;if(it===null){for(;!Bt.done;lt++,Bt=be.next())Bt=Le(ve,Bt.value,Be),Bt!==null&&(se=T(Bt,se,lt),tt===null?Je=Bt:tt.sibling=Bt,tt=Bt);return di&&Jo(ve,lt),Je}for(it=g(ve,it);!Bt.done;lt++,Bt=be.next())Bt=qe(it,ve,lt,Bt.value,Be),Bt!==null&&(a&&Bt.alternate!==null&&it.delete(Bt.key===null?lt:Bt.key),se=T(Bt,se,lt),tt===null?Je=Bt:tt.sibling=Bt,tt=Bt);return a&&it.forEach(function(m3){return l(ve,m3)}),di&&Jo(ve,lt),Je}function Ai(ve,se,be,Be){if(typeof be=="object"&&be!==null&&be.type===z&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case j:e:{for(var Je=be.key,tt=se;tt!==null;){if(tt.key===Je){if(Je=be.type,Je===z){if(tt.tag===7){d(ve,tt.sibling),se=b(tt,be.props.children),se.return=ve,ve=se;break e}}else if(tt.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===Ce&&v2(Je)===tt.type){d(ve,tt.sibling),se=b(tt,be.props),se.ref=td(ve,tt,be),se.return=ve,ve=se;break e}d(ve,tt);break}else l(ve,tt);tt=tt.sibling}be.type===z?(se=al(be.props.children,ve.mode,Be,be.key),se.return=ve,ve=se):(Be=Af(be.type,be.key,be.props,null,ve.mode,Be),Be.ref=td(ve,se,be),Be.return=ve,ve=Be)}return O(ve);case K:e:{for(tt=be.key;se!==null;){if(se.key===tt)if(se.tag===4&&se.stateNode.containerInfo===be.containerInfo&&se.stateNode.implementation===be.implementation){d(ve,se.sibling),se=b(se,be.children||[]),se.return=ve,ve=se;break e}else{d(ve,se);break}else l(ve,se);se=se.sibling}se=ey(be,ve.mode,Be),se.return=ve,ve=se}return O(ve);case Ce:return tt=be._init,Ai(ve,se,tt(be._payload),Be)}if(mt(be))return Ke(ve,se,be,Be);if(ue(be))return Ye(ve,se,be,Be);nf(ve,be)}return typeof be=="string"&&be!==""||typeof be=="number"?(be=""+be,se!==null&&se.tag===6?(d(ve,se.sibling),se=b(se,be),se.return=ve,ve=se):(d(ve,se),se=Zm(be,ve.mode,Be),se.return=ve,ve=se),O(ve)):d(ve,se)}return Ai}var vu=_2(!0),b2=_2(!1),rf=q(null),sf=null,_u=null,um=null;function cm(){um=_u=sf=null}function dm(a){var l=rf.current;Q(rf),a._currentValue=l}function hm(a,l,d){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===d)break;a=a.return}}function bu(a,l){sf=a,um=_u=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Mn=!0),a.firstContext=null)}function Dr(a){var l=a._currentValue;if(um!==a)if(a={context:a,memoizedValue:l,next:null},_u===null){if(sf===null)throw Error(t(308));_u=a,sf.dependencies={lanes:0,firstContext:a}}else _u=_u.next=a;return l}var Zo=null;function fm(a){Zo===null?Zo=[a]:Zo.push(a)}function x2(a,l,d,g){var b=l.interleaved;return b===null?(d.next=d,fm(l)):(d.next=b.next,b.next=d),l.interleaved=d,ca(a,g)}function ca(a,l){a.lanes|=l;var d=a.alternate;for(d!==null&&(d.lanes|=l),d=a,a=a.return;a!==null;)a.childLanes|=l,d=a.alternate,d!==null&&(d.childLanes|=l),d=a,a=a.return;return d.tag===3?d.stateNode:null}var Ja=!1;function pm(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S2(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function da(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function Za(a,l,d){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Ft&2)!==0){var b=g.pending;return b===null?l.next=l:(l.next=b.next,b.next=l),g.pending=l,ca(a,d)}return b=g.interleaved,b===null?(l.next=l,fm(g)):(l.next=b.next,b.next=l),g.interleaved=l,ca(a,d)}function af(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Oc(a,d)}}function T2(a,l){var d=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var b=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var O={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?b=T=O:T=T.next=O,d=d.next}while(d!==null);T===null?b=T=l:T=T.next=l}else b=T=l;d={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:T,shared:g.shared,effects:g.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}function of(a,l,d,g){var b=a.updateQueue;Ja=!1;var T=b.firstBaseUpdate,O=b.lastBaseUpdate,G=b.shared.pending;if(G!==null){b.shared.pending=null;var ee=G,Te=ee.next;ee.next=null,O===null?T=Te:O.next=Te,O=ee;var Re=a.alternate;Re!==null&&(Re=Re.updateQueue,G=Re.lastBaseUpdate,G!==O&&(G===null?Re.firstBaseUpdate=Te:G.next=Te,Re.lastBaseUpdate=ee))}if(T!==null){var Le=b.baseState;O=0,Re=Te=ee=null,G=T;do{var Oe=G.lane,qe=G.eventTime;if((g&Oe)===Oe){Re!==null&&(Re=Re.next={eventTime:qe,lane:0,tag:G.tag,payload:G.payload,callback:G.callback,next:null});e:{var Ke=a,Ye=G;switch(Oe=l,qe=d,Ye.tag){case 1:if(Ke=Ye.payload,typeof Ke=="function"){Le=Ke.call(qe,Le,Oe);break e}Le=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=Ye.payload,Oe=typeof Ke=="function"?Ke.call(qe,Le,Oe):Ke,Oe==null)break e;Le=ce({},Le,Oe);break e;case 2:Ja=!0}}G.callback!==null&&G.lane!==0&&(a.flags|=64,Oe=b.effects,Oe===null?b.effects=[G]:Oe.push(G))}else qe={eventTime:qe,lane:Oe,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Re===null?(Te=Re=qe,ee=Le):Re=Re.next=qe,O|=Oe;if(G=G.next,G===null){if(G=b.shared.pending,G===null)break;Oe=G,G=Oe.next,Oe.next=null,b.lastBaseUpdate=Oe,b.shared.pending=null}}while(!0);if(Re===null&&(ee=Le),b.baseState=ee,b.firstBaseUpdate=Te,b.lastBaseUpdate=Re,l=b.shared.interleaved,l!==null){b=l;do O|=b.lane,b=b.next;while(b!==l)}else T===null&&(b.shared.lanes=0);il|=O,a.lanes=O,a.memoizedState=Le}}function C2(a,l,d){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var g=a[l],b=g.callback;if(b!==null){if(g.callback=null,g=d,typeof b!="function")throw Error(t(191,b));b.call(g)}}}var id={},Ts=q(id),nd=q(id),rd=q(id);function el(a){if(a===id)throw Error(t(174));return a}function gm(a,l){switch(ye(rd,l),ye(nd,a),ye(Ts,id),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Li(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Li(l,a)}Q(Ts),ye(Ts,l)}function xu(){Q(Ts),Q(nd),Q(rd)}function w2(a){el(rd.current);var l=el(Ts.current),d=Li(l,a.type);l!==d&&(ye(nd,a),ye(Ts,d))}function mm(a){nd.current===a&&(Q(Ts),Q(nd))}var yi=q(0);function lf(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ym=[];function vm(){for(var a=0;a<ym.length;a++)ym[a]._workInProgressVersionPrimary=null;ym.length=0}var uf=X.ReactCurrentDispatcher,_m=X.ReactCurrentBatchConfig,tl=0,vi=null,Fi=null,Vi=null,cf=!1,sd=!1,ad=0,BE=0;function nn(){throw Error(t(321))}function bm(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!An(a[d],l[d]))return!1;return!0}function xm(a,l,d,g,b,T){if(tl=T,vi=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,uf.current=a===null||a.memoizedState===null?zE:VE,a=d(g,b),sd){T=0;do{if(sd=!1,ad=0,25<=T)throw Error(t(301));T+=1,Vi=Fi=null,l.updateQueue=null,uf.current=HE,a=d(g,b)}while(sd)}if(uf.current=ff,l=Fi!==null&&Fi.next!==null,tl=0,Vi=Fi=vi=null,cf=!1,l)throw Error(t(300));return a}function Sm(){var a=ad!==0;return ad=0,a}function Cs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vi===null?vi.memoizedState=Vi=a:Vi=Vi.next=a,Vi}function Ir(){if(Fi===null){var a=vi.alternate;a=a!==null?a.memoizedState:null}else a=Fi.next;var l=Vi===null?vi.memoizedState:Vi.next;if(l!==null)Vi=l,Fi=a;else{if(a===null)throw Error(t(310));Fi=a,a={memoizedState:Fi.memoizedState,baseState:Fi.baseState,baseQueue:Fi.baseQueue,queue:Fi.queue,next:null},Vi===null?vi.memoizedState=Vi=a:Vi=Vi.next=a}return Vi}function od(a,l){return typeof l=="function"?l(a):l}function Tm(a){var l=Ir(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var g=Fi,b=g.baseQueue,T=d.pending;if(T!==null){if(b!==null){var O=b.next;b.next=T.next,T.next=O}g.baseQueue=b=T,d.pending=null}if(b!==null){T=b.next,g=g.baseState;var G=O=null,ee=null,Te=T;do{var Re=Te.lane;if((tl&Re)===Re)ee!==null&&(ee=ee.next={lane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),g=Te.hasEagerState?Te.eagerState:a(g,Te.action);else{var Le={lane:Re,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null};ee===null?(G=ee=Le,O=g):ee=ee.next=Le,vi.lanes|=Re,il|=Re}Te=Te.next}while(Te!==null&&Te!==T);ee===null?O=g:ee.next=G,An(g,l.memoizedState)||(Mn=!0),l.memoizedState=g,l.baseState=O,l.baseQueue=ee,d.lastRenderedState=g}if(a=d.interleaved,a!==null){b=a;do T=b.lane,vi.lanes|=T,il|=T,b=b.next;while(b!==a)}else b===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Cm(a){var l=Ir(),d=l.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=a;var g=d.dispatch,b=d.pending,T=l.memoizedState;if(b!==null){d.pending=null;var O=b=b.next;do T=a(T,O.action),O=O.next;while(O!==b);An(T,l.memoizedState)||(Mn=!0),l.memoizedState=T,l.baseQueue===null&&(l.baseState=T),d.lastRenderedState=T}return[T,g]}function E2(){}function A2(a,l){var d=vi,g=Ir(),b=l(),T=!An(g.memoizedState,b);if(T&&(g.memoizedState=b,Mn=!0),g=g.queue,wm(k2.bind(null,d,g,a),[a]),g.getSnapshot!==l||T||Vi!==null&&Vi.memoizedState.tag&1){if(d.flags|=2048,ld(9,I2.bind(null,d,g,b,l),void 0,null),Hi===null)throw Error(t(349));(tl&30)!==0||D2(d,l,b)}return b}function D2(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=vi.updateQueue,l===null?(l={lastEffect:null,stores:null},vi.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function I2(a,l,d,g){l.value=d,l.getSnapshot=g,M2(l)&&P2(a)}function k2(a,l,d){return d(function(){M2(l)&&P2(a)})}function M2(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!An(a,d)}catch{return!0}}function P2(a){var l=ca(a,1);l!==null&&Yr(l,a,1,-1)}function O2(a){var l=Cs();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:od,lastRenderedState:a},l.queue=a,a=a.dispatch=$E.bind(null,vi,a),[l.memoizedState,a]}function ld(a,l,d,g){return a={tag:a,create:l,destroy:d,deps:g,next:null},l=vi.updateQueue,l===null?(l={lastEffect:null,stores:null},vi.updateQueue=l,l.lastEffect=a.next=a):(d=l.lastEffect,d===null?l.lastEffect=a.next=a:(g=d.next,d.next=a,a.next=g,l.lastEffect=a)),a}function R2(){return Ir().memoizedState}function df(a,l,d,g){var b=Cs();vi.flags|=a,b.memoizedState=ld(1|l,d,void 0,g===void 0?null:g)}function hf(a,l,d,g){var b=Ir();g=g===void 0?null:g;var T=void 0;if(Fi!==null){var O=Fi.memoizedState;if(T=O.destroy,g!==null&&bm(g,O.deps)){b.memoizedState=ld(l,d,T,g);return}}vi.flags|=a,b.memoizedState=ld(1|l,d,T,g)}function L2(a,l){return df(8390656,8,a,l)}function wm(a,l){return hf(2048,8,a,l)}function N2(a,l){return hf(4,2,a,l)}function F2(a,l){return hf(4,4,a,l)}function B2(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function j2(a,l,d){return d=d!=null?d.concat([a]):null,hf(4,4,B2.bind(null,l,a),d)}function Em(){}function U2(a,l){var d=Ir();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&bm(l,g[1])?g[0]:(d.memoizedState=[a,l],a)}function $2(a,l){var d=Ir();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&bm(l,g[1])?g[0]:(a=a(),d.memoizedState=[a,l],a)}function z2(a,l,d){return(tl&21)===0?(a.baseState&&(a.baseState=!1,Mn=!0),a.memoizedState=d):(An(d,l)||(d=vh(),vi.lanes|=d,il|=d,a.baseState=!0),l)}function jE(a,l){var d=Lt;Lt=d!==0&&4>d?d:4,a(!0);var g=_m.transition;_m.transition={};try{a(!1),l()}finally{Lt=d,_m.transition=g}}function V2(){return Ir().memoizedState}function UE(a,l,d){var g=no(a);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},H2(a))q2(l,d);else if(d=x2(a,l,d,g),d!==null){var b=pn();Yr(d,a,g,b),W2(d,l,g)}}function $E(a,l,d){var g=no(a),b={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(H2(a))q2(l,b);else{var T=a.alternate;if(a.lanes===0&&(T===null||T.lanes===0)&&(T=l.lastRenderedReducer,T!==null))try{var O=l.lastRenderedState,G=T(O,d);if(b.hasEagerState=!0,b.eagerState=G,An(G,O)){var ee=l.interleaved;ee===null?(b.next=b,fm(l)):(b.next=ee.next,ee.next=b),l.interleaved=b;return}}catch{}finally{}d=x2(a,l,b,g),d!==null&&(b=pn(),Yr(d,a,g,b),W2(d,l,g))}}function H2(a){var l=a.alternate;return a===vi||l!==null&&l===vi}function q2(a,l){sd=cf=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function W2(a,l,d){if((d&4194240)!==0){var g=l.lanes;g&=a.pendingLanes,d|=g,l.lanes=d,Oc(a,d)}}var ff={readContext:Dr,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},zE={readContext:Dr,useCallback:function(a,l){return Cs().memoizedState=[a,l===void 0?null:l],a},useContext:Dr,useEffect:L2,useImperativeHandle:function(a,l,d){return d=d!=null?d.concat([a]):null,df(4194308,4,B2.bind(null,l,a),d)},useLayoutEffect:function(a,l){return df(4194308,4,a,l)},useInsertionEffect:function(a,l){return df(4,2,a,l)},useMemo:function(a,l){var d=Cs();return l=l===void 0?null:l,a=a(),d.memoizedState=[a,l],a},useReducer:function(a,l,d){var g=Cs();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},g.queue=a,a=a.dispatch=UE.bind(null,vi,a),[g.memoizedState,a]},useRef:function(a){var l=Cs();return a={current:a},l.memoizedState=a},useState:O2,useDebugValue:Em,useDeferredValue:function(a){return Cs().memoizedState=a},useTransition:function(){var a=O2(!1),l=a[0];return a=jE.bind(null,a[1]),Cs().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,d){var g=vi,b=Cs();if(di){if(d===void 0)throw Error(t(407));d=d()}else{if(d=l(),Hi===null)throw Error(t(349));(tl&30)!==0||D2(g,l,d)}b.memoizedState=d;var T={value:d,getSnapshot:l};return b.queue=T,L2(k2.bind(null,g,T,a),[a]),g.flags|=2048,ld(9,I2.bind(null,g,T,d,l),void 0,null),d},useId:function(){var a=Cs(),l=Hi.identifierPrefix;if(di){var d=ua,g=la;d=(g&~(1<<32-En(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=ad++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=BE++,l=":"+l+"r"+d.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},VE={readContext:Dr,useCallback:U2,useContext:Dr,useEffect:wm,useImperativeHandle:j2,useInsertionEffect:N2,useLayoutEffect:F2,useMemo:$2,useReducer:Tm,useRef:R2,useState:function(){return Tm(od)},useDebugValue:Em,useDeferredValue:function(a){var l=Ir();return z2(l,Fi.memoizedState,a)},useTransition:function(){var a=Tm(od)[0],l=Ir().memoizedState;return[a,l]},useMutableSource:E2,useSyncExternalStore:A2,useId:V2,unstable_isNewReconciler:!1},HE={readContext:Dr,useCallback:U2,useContext:Dr,useEffect:wm,useImperativeHandle:j2,useInsertionEffect:N2,useLayoutEffect:F2,useMemo:$2,useReducer:Cm,useRef:R2,useState:function(){return Cm(od)},useDebugValue:Em,useDeferredValue:function(a){var l=Ir();return Fi===null?l.memoizedState=a:z2(l,Fi.memoizedState,a)},useTransition:function(){var a=Cm(od)[0],l=Ir().memoizedState;return[a,l]},useMutableSource:E2,useSyncExternalStore:A2,useId:V2,unstable_isNewReconciler:!1};function Gr(a,l){if(a&&a.defaultProps){l=ce({},l),a=a.defaultProps;for(var d in a)l[d]===void 0&&(l[d]=a[d]);return l}return l}function Am(a,l,d,g){l=a.memoizedState,d=d(g,l),d=d==null?l:ce({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var pf={isMounted:function(a){return(a=a._reactInternals)?Dt(a)===a:!1},enqueueSetState:function(a,l,d){a=a._reactInternals;var g=pn(),b=no(a),T=da(g,b);T.payload=l,d!=null&&(T.callback=d),l=Za(a,T,b),l!==null&&(Yr(l,a,b,g),af(l,a,b))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var g=pn(),b=no(a),T=da(g,b);T.tag=1,T.payload=l,d!=null&&(T.callback=d),l=Za(a,T,b),l!==null&&(Yr(l,a,b,g),af(l,a,b))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=pn(),g=no(a),b=da(d,g);b.tag=2,l!=null&&(b.callback=l),l=Za(a,b,g),l!==null&&(Yr(l,a,g,d),af(l,a,g))}};function G2(a,l,d,g,b,T,O){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,T,O):l.prototype&&l.prototype.isPureReactComponent?!Ua(d,g)||!Ua(b,T):!0}function K2(a,l,d){var g=!1,b=Fe,T=l.contextType;return typeof T=="object"&&T!==null?T=Dr(T):(b=Zt(l)?at:we.current,g=l.contextTypes,T=(g=g!=null)?li(a,b):Fe),l=new l(d,T),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=pf,a.stateNode=l,l._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=T),l}function X2(a,l,d,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==a&&pf.enqueueReplaceState(l,l.state,null)}function Dm(a,l,d,g){var b=a.stateNode;b.props=d,b.state=a.memoizedState,b.refs={},pm(a);var T=l.contextType;typeof T=="object"&&T!==null?b.context=Dr(T):(T=Zt(l)?at:we.current,b.context=li(a,T)),b.state=a.memoizedState,T=l.getDerivedStateFromProps,typeof T=="function"&&(Am(a,l,T,d),b.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(l=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),l!==b.state&&pf.enqueueReplaceState(b,b.state,null),of(a,d,b,g),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function Su(a,l){try{var d="",g=l;do d+=V(g),g=g.return;while(g);var b=d}catch(T){b=`
Error generating stack: `+T.message+`
`+T.stack}return{value:a,source:l,stack:b,digest:null}}function Im(a,l,d){return{value:a,source:null,stack:d??null,digest:l??null}}function km(a,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var qE=typeof WeakMap=="function"?WeakMap:Map;function Y2(a,l,d){d=da(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){xf||(xf=!0,qm=g),km(a,l)},d}function Q2(a,l,d){d=da(-1,d),d.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var b=l.value;d.payload=function(){return g(b)},d.callback=function(){km(a,l)}}var T=a.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){km(a,l),typeof g!="function"&&(to===null?to=new Set([this]):to.add(this));var O=l.stack;this.componentDidCatch(l.value,{componentStack:O!==null?O:""})}),d}function J2(a,l,d){var g=a.pingCache;if(g===null){g=a.pingCache=new qE;var b=new Set;g.set(l,b)}else b=g.get(l),b===void 0&&(b=new Set,g.set(l,b));b.has(d)||(b.add(d),a=s3.bind(null,a,l,d),l.then(a,a))}function Z2(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function ev(a,l,d,g,b){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=da(-1,1),l.tag=2,Za(d,l,1))),d.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var WE=X.ReactCurrentOwner,Mn=!1;function fn(a,l,d,g){l.child=a===null?b2(l,null,d,g):vu(l,a.child,d,g)}function tv(a,l,d,g,b){d=d.render;var T=l.ref;return bu(l,b),g=xm(a,l,d,g,T,b),d=Sm(),a!==null&&!Mn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ha(a,l,b)):(di&&d&&rm(l),l.flags|=1,fn(a,l,g,b),l.child)}function iv(a,l,d,g,b){if(a===null){var T=d.type;return typeof T=="function"&&!Jm(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=T,nv(a,l,T,g,b)):(a=Af(d.type,null,g,l,l.mode,b),a.ref=l.ref,a.return=l,l.child=a)}if(T=a.child,(a.lanes&b)===0){var O=T.memoizedProps;if(d=d.compare,d=d!==null?d:Ua,d(O,g)&&a.ref===l.ref)return ha(a,l,b)}return l.flags|=1,a=so(T,g),a.ref=l.ref,a.return=l,l.child=a}function nv(a,l,d,g,b){if(a!==null){var T=a.memoizedProps;if(Ua(T,g)&&a.ref===l.ref)if(Mn=!1,l.pendingProps=g=T,(a.lanes&b)!==0)(a.flags&131072)!==0&&(Mn=!0);else return l.lanes=a.lanes,ha(a,l,b)}return Mm(a,l,d,g,b)}function rv(a,l,d){var g=l.pendingProps,b=g.children,T=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Cu,ar),ar|=d;else{if((d&1073741824)===0)return a=T!==null?T.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,ye(Cu,ar),ar|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=T!==null?T.baseLanes:d,ye(Cu,ar),ar|=g}else T!==null?(g=T.baseLanes|d,l.memoizedState=null):g=d,ye(Cu,ar),ar|=g;return fn(a,l,b,d),l.child}function sv(a,l){var d=l.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Mm(a,l,d,g,b){var T=Zt(d)?at:we.current;return T=li(l,T),bu(l,b),d=xm(a,l,d,g,T,b),g=Sm(),a!==null&&!Mn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~b,ha(a,l,b)):(di&&g&&rm(l),l.flags|=1,fn(a,l,d,b),l.child)}function av(a,l,d,g,b){if(Zt(d)){var T=!0;Ss(l)}else T=!1;if(bu(l,b),l.stateNode===null)mf(a,l),K2(l,d,g),Dm(l,d,g,b),g=!0;else if(a===null){var O=l.stateNode,G=l.memoizedProps;O.props=G;var ee=O.context,Te=d.contextType;typeof Te=="object"&&Te!==null?Te=Dr(Te):(Te=Zt(d)?at:we.current,Te=li(l,Te));var Re=d.getDerivedStateFromProps,Le=typeof Re=="function"||typeof O.getSnapshotBeforeUpdate=="function";Le||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==g||ee!==Te)&&X2(l,O,g,Te),Ja=!1;var Oe=l.memoizedState;O.state=Oe,of(l,g,O,b),ee=l.memoizedState,G!==g||Oe!==ee||We.current||Ja?(typeof Re=="function"&&(Am(l,d,Re,g),ee=l.memoizedState),(G=Ja||G2(l,d,G,g,Oe,ee,Te))?(Le||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=ee),O.props=g,O.state=ee,O.context=Te,g=G):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{O=l.stateNode,S2(a,l),G=l.memoizedProps,Te=l.type===l.elementType?G:Gr(l.type,G),O.props=Te,Le=l.pendingProps,Oe=O.context,ee=d.contextType,typeof ee=="object"&&ee!==null?ee=Dr(ee):(ee=Zt(d)?at:we.current,ee=li(l,ee));var qe=d.getDerivedStateFromProps;(Re=typeof qe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(G!==Le||Oe!==ee)&&X2(l,O,g,ee),Ja=!1,Oe=l.memoizedState,O.state=Oe,of(l,g,O,b);var Ke=l.memoizedState;G!==Le||Oe!==Ke||We.current||Ja?(typeof qe=="function"&&(Am(l,d,qe,g),Ke=l.memoizedState),(Te=Ja||G2(l,d,Te,g,Oe,Ke,ee)||!1)?(Re||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,Ke,ee),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,Ke,ee)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||G===a.memoizedProps&&Oe===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===a.memoizedProps&&Oe===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Ke),O.props=g,O.state=Ke,O.context=ee,g=Te):(typeof O.componentDidUpdate!="function"||G===a.memoizedProps&&Oe===a.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||G===a.memoizedProps&&Oe===a.memoizedState||(l.flags|=1024),g=!1)}return Pm(a,l,d,g,T,b)}function Pm(a,l,d,g,b,T){sv(a,l);var O=(l.flags&128)!==0;if(!g&&!O)return b&&Ya(l,d,!1),ha(a,l,T);g=l.stateNode,WE.current=l;var G=O&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,a!==null&&O?(l.child=vu(l,a.child,null,T),l.child=vu(l,null,G,T)):fn(a,l,G,T),l.memoizedState=g.state,b&&Ya(l,d,!0),l.child}function ov(a){var l=a.stateNode;l.pendingContext?Ka(a,l.pendingContext,l.pendingContext!==l.context):l.context&&Ka(a,l.context,!1),gm(a,l.containerInfo)}function lv(a,l,d,g,b){return yu(),lm(b),l.flags|=256,fn(a,l,d,g),l.child}var Om={dehydrated:null,treeContext:null,retryLane:0};function Rm(a){return{baseLanes:a,cachePool:null,transitions:null}}function uv(a,l,d){var g=l.pendingProps,b=yi.current,T=!1,O=(l.flags&128)!==0,G;if((G=O)||(G=a!==null&&a.memoizedState===null?!1:(b&2)!==0),G?(T=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),ye(yi,b&1),a===null)return om(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(O=g.children,a=g.fallback,T?(g=l.mode,T=l.child,O={mode:"hidden",children:O},(g&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=O):T=Df(O,g,0,null),a=al(a,g,d,null),T.return=l,a.return=l,T.sibling=a,l.child=T,l.child.memoizedState=Rm(d),l.memoizedState=Om,a):Lm(l,O));if(b=a.memoizedState,b!==null&&(G=b.dehydrated,G!==null))return GE(a,l,O,g,G,b,d);if(T){T=g.fallback,O=l.mode,b=a.child,G=b.sibling;var ee={mode:"hidden",children:g.children};return(O&1)===0&&l.child!==b?(g=l.child,g.childLanes=0,g.pendingProps=ee,l.deletions=null):(g=so(b,ee),g.subtreeFlags=b.subtreeFlags&14680064),G!==null?T=so(G,T):(T=al(T,O,d,null),T.flags|=2),T.return=l,g.return=l,g.sibling=T,l.child=g,g=T,T=l.child,O=a.child.memoizedState,O=O===null?Rm(d):{baseLanes:O.baseLanes|d,cachePool:null,transitions:O.transitions},T.memoizedState=O,T.childLanes=a.childLanes&~d,l.memoizedState=Om,g}return T=a.child,a=T.sibling,g=so(T,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,a!==null&&(d=l.deletions,d===null?(l.deletions=[a],l.flags|=16):d.push(a)),l.child=g,l.memoizedState=null,g}function Lm(a,l){return l=Df({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function gf(a,l,d,g){return g!==null&&lm(g),vu(l,a.child,null,d),a=Lm(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function GE(a,l,d,g,b,T,O){if(d)return l.flags&256?(l.flags&=-257,g=Im(Error(t(422))),gf(a,l,O,g)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(T=g.fallback,b=l.mode,g=Df({mode:"visible",children:g.children},b,0,null),T=al(T,b,O,null),T.flags|=2,g.return=l,T.return=l,g.sibling=T,l.child=g,(l.mode&1)!==0&&vu(l,a.child,null,O),l.child.memoizedState=Rm(O),l.memoizedState=Om,T);if((l.mode&1)===0)return gf(a,l,O,null);if(b.data==="$!"){if(g=b.nextSibling&&b.nextSibling.dataset,g)var G=g.dgst;return g=G,T=Error(t(419)),g=Im(T,g,void 0),gf(a,l,O,g)}if(G=(O&a.childLanes)!==0,Mn||G){if(g=Hi,g!==null){switch(O&-O){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(g.suspendedLanes|O))!==0?0:b,b!==0&&b!==T.retryLane&&(T.retryLane=b,ca(a,b),Yr(g,a,b,-1))}return Qm(),g=Im(Error(t(421))),gf(a,l,O,g)}return b.data==="$?"?(l.flags|=128,l.child=a.child,l=a3.bind(null,a),b._reactRetry=l,null):(a=T.treeContext,sr=xs(b.nextSibling),rr=l,di=!0,Wr=null,a!==null&&(Er[Ar++]=la,Er[Ar++]=ua,Er[Ar++]=Qo,la=a.id,ua=a.overflow,Qo=l),l=Lm(l,g.children),l.flags|=4096,l)}function cv(a,l,d){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),hm(a.return,l,d)}function Nm(a,l,d,g,b){var T=a.memoizedState;T===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:b}:(T.isBackwards=l,T.rendering=null,T.renderingStartTime=0,T.last=g,T.tail=d,T.tailMode=b)}function dv(a,l,d){var g=l.pendingProps,b=g.revealOrder,T=g.tail;if(fn(a,l,g.children,d),g=yi.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&cv(a,d,l);else if(a.tag===19)cv(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(ye(yi,g),(l.mode&1)===0)l.memoizedState=null;else switch(b){case"forwards":for(d=l.child,b=null;d!==null;)a=d.alternate,a!==null&&lf(a)===null&&(b=d),d=d.sibling;d=b,d===null?(b=l.child,l.child=null):(b=d.sibling,d.sibling=null),Nm(l,!1,b,d,T);break;case"backwards":for(d=null,b=l.child,l.child=null;b!==null;){if(a=b.alternate,a!==null&&lf(a)===null){l.child=b;break}a=b.sibling,b.sibling=d,d=b,b=a}Nm(l,!0,d,null,T);break;case"together":Nm(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function mf(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function ha(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),il|=l.lanes,(d&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,d=so(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=so(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function KE(a,l,d){switch(l.tag){case 3:ov(l),yu();break;case 5:w2(l);break;case 1:Zt(l.type)&&Ss(l);break;case 4:gm(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,b=l.memoizedProps.value;ye(rf,g._currentValue),g._currentValue=b;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(ye(yi,yi.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?uv(a,l,d):(ye(yi,yi.current&1),a=ha(a,l,d),a!==null?a.sibling:null);ye(yi,yi.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(a.flags&128)!==0){if(g)return dv(a,l,d);l.flags|=128}if(b=l.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ye(yi,yi.current),g)break;return null;case 22:case 23:return l.lanes=0,rv(a,l,d)}return ha(a,l,d)}var hv,Fm,fv,pv;hv=function(a,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},Fm=function(){},fv=function(a,l,d,g){var b=a.memoizedProps;if(b!==g){a=l.stateNode,el(Ts.current);var T=null;switch(d){case"input":b=st(a,b),g=st(a,g),T=[];break;case"select":b=ce({},b,{value:void 0}),g=ce({},g,{value:void 0}),T=[];break;case"textarea":b=Yt(a,b),g=Yt(a,g),T=[];break;default:typeof b.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=Xo)}Ze(d,g);var O;d=null;for(Te in b)if(!g.hasOwnProperty(Te)&&b.hasOwnProperty(Te)&&b[Te]!=null)if(Te==="style"){var G=b[Te];for(O in G)G.hasOwnProperty(O)&&(d||(d={}),d[O]="")}else Te!=="dangerouslySetInnerHTML"&&Te!=="children"&&Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&Te!=="autoFocus"&&(r.hasOwnProperty(Te)?T||(T=[]):(T=T||[]).push(Te,null));for(Te in g){var ee=g[Te];if(G=b!=null?b[Te]:void 0,g.hasOwnProperty(Te)&&ee!==G&&(ee!=null||G!=null))if(Te==="style")if(G){for(O in G)!G.hasOwnProperty(O)||ee&&ee.hasOwnProperty(O)||(d||(d={}),d[O]="");for(O in ee)ee.hasOwnProperty(O)&&G[O]!==ee[O]&&(d||(d={}),d[O]=ee[O])}else d||(T||(T=[]),T.push(Te,d)),d=ee;else Te==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,G=G?G.__html:void 0,ee!=null&&G!==ee&&(T=T||[]).push(Te,ee)):Te==="children"?typeof ee!="string"&&typeof ee!="number"||(T=T||[]).push(Te,""+ee):Te!=="suppressContentEditableWarning"&&Te!=="suppressHydrationWarning"&&(r.hasOwnProperty(Te)?(ee!=null&&Te==="onScroll"&&si("scroll",a),T||G===ee||(T=[])):(T=T||[]).push(Te,ee))}d&&(T=T||[]).push("style",d);var Te=T;(l.updateQueue=Te)&&(l.flags|=4)}},pv=function(a,l,d,g){d!==g&&(l.flags|=4)};function ud(a,l){if(!di)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function rn(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,g=0;if(l)for(var b=a.child;b!==null;)d|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)d|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=g,a.childLanes=d,l}function XE(a,l,d){var g=l.pendingProps;switch(sm(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(l),null;case 1:return Zt(l.type)&&nr(),rn(l),null;case 3:return g=l.stateNode,xu(),Q(We),Q(we),vm(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(tf(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Wr!==null&&(Km(Wr),Wr=null))),Fm(a,l),rn(l),null;case 5:mm(l);var b=el(rd.current);if(d=l.type,a!==null&&l.stateNode!=null)fv(a,l,d,g,b),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return rn(l),null}if(a=el(Ts.current),tf(l)){g=l.stateNode,d=l.type;var T=l.memoizedProps;switch(g[Cr]=l,g[Yo]=T,a=(l.mode&1)!==0,d){case"dialog":si("cancel",g),si("close",g);break;case"iframe":case"object":case"embed":si("load",g);break;case"video":case"audio":for(b=0;b<Dn.length;b++)si(Dn[b],g);break;case"source":si("error",g);break;case"img":case"image":case"link":si("error",g),si("load",g);break;case"details":si("toggle",g);break;case"input":Xn(g,T),si("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!T.multiple},si("invalid",g);break;case"textarea":Sn(g,T),si("invalid",g)}Ze(d,T),b=null;for(var O in T)if(T.hasOwnProperty(O)){var G=T[O];O==="children"?typeof G=="string"?g.textContent!==G&&(T.suppressHydrationWarning!==!0&&pu(g.textContent,G,a),b=["children",G]):typeof G=="number"&&g.textContent!==""+G&&(T.suppressHydrationWarning!==!0&&pu(g.textContent,G,a),b=["children",""+G]):r.hasOwnProperty(O)&&G!=null&&O==="onScroll"&&si("scroll",g)}switch(d){case"input":$e(g),Oi(g,T,!0);break;case"textarea":$e(g),br(g);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(g.onclick=Xo)}g=b,l.updateQueue=g,g!==null&&(l.flags|=4)}else{O=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=xr(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=O.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=O.createElement(d,{is:g.is}):(a=O.createElement(d),d==="select"&&(O=a,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):a=O.createElementNS(a,d),a[Cr]=l,a[Yo]=g,hv(a,l,!1,!1),l.stateNode=a;e:{switch(O=Rt(d,g),d){case"dialog":si("cancel",a),si("close",a),b=g;break;case"iframe":case"object":case"embed":si("load",a),b=g;break;case"video":case"audio":for(b=0;b<Dn.length;b++)si(Dn[b],a);b=g;break;case"source":si("error",a),b=g;break;case"img":case"image":case"link":si("error",a),si("load",a),b=g;break;case"details":si("toggle",a),b=g;break;case"input":Xn(a,g),b=st(a,g),si("invalid",a);break;case"option":b=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},b=ce({},g,{value:void 0}),si("invalid",a);break;case"textarea":Sn(a,g),b=Yt(a,g),si("invalid",a);break;default:b=g}Ze(d,b),G=b;for(T in G)if(G.hasOwnProperty(T)){var ee=G[T];T==="style"?De(a,ee):T==="dangerouslySetInnerHTML"?(ee=ee?ee.__html:void 0,ee!=null&&us(a,ee)):T==="children"?typeof ee=="string"?(d!=="textarea"||ee!=="")&&Tn(a,ee):typeof ee=="number"&&Tn(a,""+ee):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(r.hasOwnProperty(T)?ee!=null&&T==="onScroll"&&si("scroll",a):ee!=null&&P(a,T,ee,O))}switch(d){case"input":$e(a),Oi(a,g,!1);break;case"textarea":$e(a),br(a);break;case"option":g.value!=null&&a.setAttribute("value",""+Z(g.value));break;case"select":a.multiple=!!g.multiple,T=g.value,T!=null?Tt(a,!!g.multiple,T,!1):g.defaultValue!=null&&Tt(a,!!g.multiple,g.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=Xo)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return rn(l),null;case 6:if(a&&l.stateNode!=null)pv(a,l,a.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(d=el(rd.current),el(Ts.current),tf(l)){if(g=l.stateNode,d=l.memoizedProps,g[Cr]=l,(T=g.nodeValue!==d)&&(a=rr,a!==null))switch(a.tag){case 3:pu(g.nodeValue,d,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&pu(g.nodeValue,d,(a.mode&1)!==0)}T&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Cr]=l,l.stateNode=g}return rn(l),null;case 13:if(Q(yi),g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(di&&sr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)y2(),yu(),l.flags|=98560,T=!1;else if(T=tf(l),g!==null&&g.dehydrated!==null){if(a===null){if(!T)throw Error(t(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(t(317));T[Cr]=l}else yu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;rn(l),T=!1}else Wr!==null&&(Km(Wr),Wr=null),T=!0;if(!T)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(yi.current&1)!==0?Bi===0&&(Bi=3):Qm())),l.updateQueue!==null&&(l.flags|=4),rn(l),null);case 4:return xu(),Fm(a,l),a===null&&Ha(l.stateNode.containerInfo),rn(l),null;case 10:return dm(l.type._context),rn(l),null;case 17:return Zt(l.type)&&nr(),rn(l),null;case 19:if(Q(yi),T=l.memoizedState,T===null)return rn(l),null;if(g=(l.flags&128)!==0,O=T.rendering,O===null)if(g)ud(T,!1);else{if(Bi!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(O=lf(a),O!==null){for(l.flags|=128,ud(T,!1),g=O.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)T=d,a=g,T.flags&=14680066,O=T.alternate,O===null?(T.childLanes=0,T.lanes=a,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=O.childLanes,T.lanes=O.lanes,T.child=O.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=O.memoizedProps,T.memoizedState=O.memoizedState,T.updateQueue=O.updateQueue,T.type=O.type,a=O.dependencies,T.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return ye(yi,yi.current&1|2),l.child}a=a.sibling}T.tail!==null&&mi()>wu&&(l.flags|=128,g=!0,ud(T,!1),l.lanes=4194304)}else{if(!g)if(a=lf(O),a!==null){if(l.flags|=128,g=!0,d=a.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),ud(T,!0),T.tail===null&&T.tailMode==="hidden"&&!O.alternate&&!di)return rn(l),null}else 2*mi()-T.renderingStartTime>wu&&d!==1073741824&&(l.flags|=128,g=!0,ud(T,!1),l.lanes=4194304);T.isBackwards?(O.sibling=l.child,l.child=O):(d=T.last,d!==null?d.sibling=O:l.child=O,T.last=O)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=mi(),l.sibling=null,d=yi.current,ye(yi,g?d&1|2:d&1),l):(rn(l),null);case 22:case 23:return Ym(),g=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(ar&1073741824)!==0&&(rn(l),l.subtreeFlags&6&&(l.flags|=8192)):rn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function YE(a,l){switch(sm(l),l.tag){case 1:return Zt(l.type)&&nr(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return xu(),Q(We),Q(we),vm(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return mm(l),null;case 13:if(Q(yi),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));yu()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return Q(yi),null;case 4:return xu(),null;case 10:return dm(l.type._context),null;case 22:case 23:return Ym(),null;case 24:return null;default:return null}}var yf=!1,sn=!1,QE=typeof WeakSet=="function"?WeakSet:Set,Ge=null;function Tu(a,l){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){wi(a,l,g)}else d.current=null}function Bm(a,l,d){try{d()}catch(g){wi(a,l,g)}}var gv=!1;function JE(a,l){if(bs=Yl,a=lu(),uu(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var b=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var O=0,G=-1,ee=-1,Te=0,Re=0,Le=a,Oe=null;t:for(;;){for(var qe;Le!==d||b!==0&&Le.nodeType!==3||(G=O+b),Le!==T||g!==0&&Le.nodeType!==3||(ee=O+g),Le.nodeType===3&&(O+=Le.nodeValue.length),(qe=Le.firstChild)!==null;)Oe=Le,Le=qe;for(;;){if(Le===a)break t;if(Oe===d&&++Te===b&&(G=O),Oe===T&&++Re===g&&(ee=O),(qe=Le.nextSibling)!==null)break;Le=Oe,Oe=Le.parentNode}Le=qe}d=G===-1||ee===-1?null:{start:G,end:ee}}else d=null}d=d||{start:0,end:0}}else d=null;for(Nt={focusedElem:a,selectionRange:d},Yl=!1,Ge=l;Ge!==null;)if(l=Ge,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Ge=a;else for(;Ge!==null;){l=Ge;try{var Ke=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Ke!==null){var Ye=Ke.memoizedProps,Ai=Ke.memoizedState,ve=l.stateNode,se=ve.getSnapshotBeforeUpdate(l.elementType===l.type?Ye:Gr(l.type,Ye),Ai);ve.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var be=l.stateNode.containerInfo;be.nodeType===1?be.textContent="":be.nodeType===9&&be.documentElement&&be.removeChild(be.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Be){wi(l,l.return,Be)}if(a=l.sibling,a!==null){a.return=l.return,Ge=a;break}Ge=l.return}return Ke=gv,gv=!1,Ke}function cd(a,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&a)===a){var T=b.destroy;b.destroy=void 0,T!==void 0&&Bm(l,d,T)}b=b.next}while(b!==g)}}function vf(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&a)===a){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function jm(a){var l=a.ref;if(l!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof l=="function"?l(a):l.current=a}}function mv(a){var l=a.alternate;l!==null&&(a.alternate=null,mv(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[Cr],delete l[Yo],delete l[p],delete l[y],delete l[_])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function yv(a){return a.tag===5||a.tag===3||a.tag===4}function vv(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||yv(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Um(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(a,l):d.insertBefore(a,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(a,d)):(l=d,l.appendChild(a)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Xo));else if(g!==4&&(a=a.child,a!==null))for(Um(a,l,d),a=a.sibling;a!==null;)Um(a,l,d),a=a.sibling}function $m(a,l,d){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for($m(a,l,d),a=a.sibling;a!==null;)$m(a,l,d),a=a.sibling}var Qi=null,Kr=!1;function eo(a,l,d){for(d=d.child;d!==null;)_v(a,l,d),d=d.sibling}function _v(a,l,d){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount($l,d)}catch{}switch(d.tag){case 5:sn||Tu(d,l);case 6:var g=Qi,b=Kr;Qi=null,eo(a,l,d),Qi=g,Kr=b,Qi!==null&&(Kr?(a=Qi,d=d.stateNode,a.nodeType===8?a.parentNode.removeChild(d):a.removeChild(d)):Qi.removeChild(d.stateNode));break;case 18:Qi!==null&&(Kr?(a=Qi,d=d.stateNode,a.nodeType===8?ed(a.parentNode,d):a.nodeType===1&&ed(a,d),Bo(a)):ed(Qi,d.stateNode));break;case 4:g=Qi,b=Kr,Qi=d.stateNode.containerInfo,Kr=!0,eo(a,l,d),Qi=g,Kr=b;break;case 0:case 11:case 14:case 15:if(!sn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var T=b,O=T.destroy;T=T.tag,O!==void 0&&((T&2)!==0||(T&4)!==0)&&Bm(d,l,O),b=b.next}while(b!==g)}eo(a,l,d);break;case 1:if(!sn&&(Tu(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(G){wi(d,l,G)}eo(a,l,d);break;case 21:eo(a,l,d);break;case 22:d.mode&1?(sn=(g=sn)||d.memoizedState!==null,eo(a,l,d),sn=g):eo(a,l,d);break;default:eo(a,l,d)}}function bv(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new QE),l.forEach(function(g){var b=o3.bind(null,a,g);d.has(g)||(d.add(g),g.then(b,b))})}}function Xr(a,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var b=d[g];try{var T=a,O=l,G=O;e:for(;G!==null;){switch(G.tag){case 5:Qi=G.stateNode,Kr=!1;break e;case 3:Qi=G.stateNode.containerInfo,Kr=!0;break e;case 4:Qi=G.stateNode.containerInfo,Kr=!0;break e}G=G.return}if(Qi===null)throw Error(t(160));_v(T,O,b),Qi=null,Kr=!1;var ee=b.alternate;ee!==null&&(ee.return=null),b.return=null}catch(Te){wi(b,l,Te)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)xv(l,a),l=l.sibling}function xv(a,l){var d=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Xr(l,a),ws(a),g&4){try{cd(3,a,a.return),vf(3,a)}catch(Ye){wi(a,a.return,Ye)}try{cd(5,a,a.return)}catch(Ye){wi(a,a.return,Ye)}}break;case 1:Xr(l,a),ws(a),g&512&&d!==null&&Tu(d,d.return);break;case 5:if(Xr(l,a),ws(a),g&512&&d!==null&&Tu(d,d.return),a.flags&32){var b=a.stateNode;try{Tn(b,"")}catch(Ye){wi(a,a.return,Ye)}}if(g&4&&(b=a.stateNode,b!=null)){var T=a.memoizedProps,O=d!==null?d.memoizedProps:T,G=a.type,ee=a.updateQueue;if(a.updateQueue=null,ee!==null)try{G==="input"&&T.type==="radio"&&T.name!=null&&ri(b,T),Rt(G,O);var Te=Rt(G,T);for(O=0;O<ee.length;O+=2){var Re=ee[O],Le=ee[O+1];Re==="style"?De(b,Le):Re==="dangerouslySetInnerHTML"?us(b,Le):Re==="children"?Tn(b,Le):P(b,Re,Le,Te)}switch(G){case"input":Yn(b,T);break;case"textarea":_r(b,T);break;case"select":var Oe=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!T.multiple;var qe=T.value;qe!=null?Tt(b,!!T.multiple,qe,!1):Oe!==!!T.multiple&&(T.defaultValue!=null?Tt(b,!!T.multiple,T.defaultValue,!0):Tt(b,!!T.multiple,T.multiple?[]:"",!1))}b[Yo]=T}catch(Ye){wi(a,a.return,Ye)}}break;case 6:if(Xr(l,a),ws(a),g&4){if(a.stateNode===null)throw Error(t(162));b=a.stateNode,T=a.memoizedProps;try{b.nodeValue=T}catch(Ye){wi(a,a.return,Ye)}}break;case 3:if(Xr(l,a),ws(a),g&4&&d!==null&&d.memoizedState.isDehydrated)try{Bo(l.containerInfo)}catch(Ye){wi(a,a.return,Ye)}break;case 4:Xr(l,a),ws(a);break;case 13:Xr(l,a),ws(a),b=a.child,b.flags&8192&&(T=b.memoizedState!==null,b.stateNode.isHidden=T,!T||b.alternate!==null&&b.alternate.memoizedState!==null||(Hm=mi())),g&4&&bv(a);break;case 22:if(Re=d!==null&&d.memoizedState!==null,a.mode&1?(sn=(Te=sn)||Re,Xr(l,a),sn=Te):Xr(l,a),ws(a),g&8192){if(Te=a.memoizedState!==null,(a.stateNode.isHidden=Te)&&!Re&&(a.mode&1)!==0)for(Ge=a,Re=a.child;Re!==null;){for(Le=Ge=Re;Ge!==null;){switch(Oe=Ge,qe=Oe.child,Oe.tag){case 0:case 11:case 14:case 15:cd(4,Oe,Oe.return);break;case 1:Tu(Oe,Oe.return);var Ke=Oe.stateNode;if(typeof Ke.componentWillUnmount=="function"){g=Oe,d=Oe.return;try{l=g,Ke.props=l.memoizedProps,Ke.state=l.memoizedState,Ke.componentWillUnmount()}catch(Ye){wi(g,d,Ye)}}break;case 5:Tu(Oe,Oe.return);break;case 22:if(Oe.memoizedState!==null){Cv(Le);continue}}qe!==null?(qe.return=Oe,Ge=qe):Cv(Le)}Re=Re.sibling}e:for(Re=null,Le=a;;){if(Le.tag===5){if(Re===null){Re=Le;try{b=Le.stateNode,Te?(T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(G=Le.stateNode,ee=Le.memoizedProps.style,O=ee!=null&&ee.hasOwnProperty("display")?ee.display:null,G.style.display=xe("display",O))}catch(Ye){wi(a,a.return,Ye)}}}else if(Le.tag===6){if(Re===null)try{Le.stateNode.nodeValue=Te?"":Le.memoizedProps}catch(Ye){wi(a,a.return,Ye)}}else if((Le.tag!==22&&Le.tag!==23||Le.memoizedState===null||Le===a)&&Le.child!==null){Le.child.return=Le,Le=Le.child;continue}if(Le===a)break e;for(;Le.sibling===null;){if(Le.return===null||Le.return===a)break e;Re===Le&&(Re=null),Le=Le.return}Re===Le&&(Re=null),Le.sibling.return=Le.return,Le=Le.sibling}}break;case 19:Xr(l,a),ws(a),g&4&&bv(a);break;case 21:break;default:Xr(l,a),ws(a)}}function ws(a){var l=a.flags;if(l&2){try{e:{for(var d=a.return;d!==null;){if(yv(d)){var g=d;break e}d=d.return}throw Error(t(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(Tn(b,""),g.flags&=-33);var T=vv(a);$m(a,T,b);break;case 3:case 4:var O=g.stateNode.containerInfo,G=vv(a);Um(a,G,O);break;default:throw Error(t(161))}}catch(ee){wi(a,a.return,ee)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function ZE(a,l,d){Ge=a,Sv(a)}function Sv(a,l,d){for(var g=(a.mode&1)!==0;Ge!==null;){var b=Ge,T=b.child;if(b.tag===22&&g){var O=b.memoizedState!==null||yf;if(!O){var G=b.alternate,ee=G!==null&&G.memoizedState!==null||sn;G=yf;var Te=sn;if(yf=O,(sn=ee)&&!Te)for(Ge=b;Ge!==null;)O=Ge,ee=O.child,O.tag===22&&O.memoizedState!==null?wv(b):ee!==null?(ee.return=O,Ge=ee):wv(b);for(;T!==null;)Ge=T,Sv(T),T=T.sibling;Ge=b,yf=G,sn=Te}Tv(a)}else(b.subtreeFlags&8772)!==0&&T!==null?(T.return=b,Ge=T):Tv(a)}}function Tv(a){for(;Ge!==null;){var l=Ge;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:sn||vf(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!sn)if(d===null)g.componentDidMount();else{var b=l.elementType===l.type?d.memoizedProps:Gr(l.type,d.memoizedProps);g.componentDidUpdate(b,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var T=l.updateQueue;T!==null&&C2(l,T,g);break;case 3:var O=l.updateQueue;if(O!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}C2(l,O,d)}break;case 5:var G=l.stateNode;if(d===null&&l.flags&4){d=G;var ee=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":ee.autoFocus&&d.focus();break;case"img":ee.src&&(d.src=ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var Te=l.alternate;if(Te!==null){var Re=Te.memoizedState;if(Re!==null){var Le=Re.dehydrated;Le!==null&&Bo(Le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}sn||l.flags&512&&jm(l)}catch(Oe){wi(l,l.return,Oe)}}if(l===a){Ge=null;break}if(d=l.sibling,d!==null){d.return=l.return,Ge=d;break}Ge=l.return}}function Cv(a){for(;Ge!==null;){var l=Ge;if(l===a){Ge=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Ge=d;break}Ge=l.return}}function wv(a){for(;Ge!==null;){var l=Ge;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{vf(4,l)}catch(ee){wi(l,d,ee)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var b=l.return;try{g.componentDidMount()}catch(ee){wi(l,b,ee)}}var T=l.return;try{jm(l)}catch(ee){wi(l,T,ee)}break;case 5:var O=l.return;try{jm(l)}catch(ee){wi(l,O,ee)}}}catch(ee){wi(l,l.return,ee)}if(l===a){Ge=null;break}var G=l.sibling;if(G!==null){G.return=l.return,Ge=G;break}Ge=l.return}}var e3=Math.ceil,_f=X.ReactCurrentDispatcher,zm=X.ReactCurrentOwner,kr=X.ReactCurrentBatchConfig,Ft=0,Hi=null,ki=null,Ji=0,ar=0,Cu=q(0),Bi=0,dd=null,il=0,bf=0,Vm=0,hd=null,Pn=null,Hm=0,wu=1/0,fa=null,xf=!1,qm=null,to=null,Sf=!1,io=null,Tf=0,fd=0,Wm=null,Cf=-1,wf=0;function pn(){return(Ft&6)!==0?mi():Cf!==-1?Cf:Cf=mi()}function no(a){return(a.mode&1)===0?1:(Ft&2)!==0&&Ji!==0?Ji&-Ji:FE.transition!==null?(wf===0&&(wf=vh()),wf):(a=Lt,a!==0||(a=window.event,a=a===void 0?16:Jl(a.type)),a)}function Yr(a,l,d,g){if(50<fd)throw fd=0,Wm=null,Error(t(185));Zs(a,d,g),((Ft&2)===0||a!==Hi)&&(a===Hi&&((Ft&2)===0&&(bf|=d),Bi===4&&ro(a,Ji)),On(a,g),d===1&&Ft===0&&(l.mode&1)===0&&(wu=mi()+500,zt&&Qa()))}function On(a,l){var d=a.callbackNode;hs(a,l);var g=Hl(a,a===Hi?Ji:0);if(g===0)d!==null&&Pc(d),a.callbackNode=null,a.callbackPriority=0;else if(l=g&-g,a.callbackPriority!==l){if(d!=null&&Pc(d),l===1)a.tag===0?NE(Av.bind(null,a)):kn(Av.bind(null,a)),Qh(function(){(Ft&6)===0&&Qa()}),d=null;else{switch(Ra(g)){case 1:d=jl;break;case 4:d=Ul;break;case 16:d=Ma;break;case 536870912:d=yh;break;default:d=Ma}d=Lv(d,Ev.bind(null,a))}a.callbackPriority=l,a.callbackNode=d}}function Ev(a,l){if(Cf=-1,wf=0,(Ft&6)!==0)throw Error(t(327));var d=a.callbackNode;if(Eu()&&a.callbackNode!==d)return null;var g=Hl(a,a===Hi?Ji:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||l)l=Ef(a,g);else{l=g;var b=Ft;Ft|=2;var T=Iv();(Hi!==a||Ji!==l)&&(fa=null,wu=mi()+500,rl(a,l));do try{n3();break}catch(G){Dv(a,G)}while(!0);cm(),_f.current=T,Ft=b,ki!==null?l=0:(Hi=null,Ji=0,l=Bi)}if(l!==0){if(l===2&&(b=Oa(a),b!==0&&(g=b,l=Gm(a,b))),l===1)throw d=dd,rl(a,0),ro(a,g),On(a,mi()),d;if(l===6)ro(a,g);else{if(b=a.current.alternate,(g&30)===0&&!t3(b)&&(l=Ef(a,g),l===2&&(T=Oa(a),T!==0&&(g=T,l=Gm(a,T))),l===1))throw d=dd,rl(a,0),ro(a,g),On(a,mi()),d;switch(a.finishedWork=b,a.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:sl(a,Pn,fa);break;case 3:if(ro(a,g),(g&130023424)===g&&(l=Hm+500-mi(),10<l)){if(Hl(a,0)!==0)break;if(b=a.suspendedLanes,(b&g)!==g){pn(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=Ni(sl.bind(null,a,Pn,fa),l);break}sl(a,Pn,fa);break;case 4:if(ro(a,g),(g&4194240)===g)break;for(l=a.eventTimes,b=-1;0<g;){var O=31-En(g);T=1<<O,O=l[O],O>b&&(b=O),g&=~T}if(g=b,g=mi()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*e3(g/1960))-g,10<g){a.timeoutHandle=Ni(sl.bind(null,a,Pn,fa),g);break}sl(a,Pn,fa);break;case 5:sl(a,Pn,fa);break;default:throw Error(t(329))}}}return On(a,mi()),a.callbackNode===d?Ev.bind(null,a):null}function Gm(a,l){var d=hd;return a.current.memoizedState.isDehydrated&&(rl(a,l).flags|=256),a=Ef(a,l),a!==2&&(l=Pn,Pn=d,l!==null&&Km(l)),a}function Km(a){Pn===null?Pn=a:Pn.push.apply(Pn,a)}function t3(a){for(var l=a;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var b=d[g],T=b.getSnapshot;b=b.value;try{if(!An(T(),b))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function ro(a,l){for(l&=~Vm,l&=~bf,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var d=31-En(l),g=1<<d;a[d]=-1,l&=~g}}function Av(a){if((Ft&6)!==0)throw Error(t(327));Eu();var l=Hl(a,0);if((l&1)===0)return On(a,mi()),null;var d=Ef(a,l);if(a.tag!==0&&d===2){var g=Oa(a);g!==0&&(l=g,d=Gm(a,g))}if(d===1)throw d=dd,rl(a,0),ro(a,l),On(a,mi()),d;if(d===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,sl(a,Pn,fa),On(a,mi()),null}function Xm(a,l){var d=Ft;Ft|=1;try{return a(l)}finally{Ft=d,Ft===0&&(wu=mi()+500,zt&&Qa())}}function nl(a){io!==null&&io.tag===0&&(Ft&6)===0&&Eu();var l=Ft;Ft|=1;var d=kr.transition,g=Lt;try{if(kr.transition=null,Lt=1,a)return a()}finally{Lt=g,kr.transition=d,Ft=l,(Ft&6)===0&&Qa()}}function Ym(){ar=Cu.current,Q(Cu)}function rl(a,l){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,Tr(d)),ki!==null)for(d=ki.return;d!==null;){var g=d;switch(sm(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&nr();break;case 3:xu(),Q(We),Q(we),vm();break;case 5:mm(g);break;case 4:xu();break;case 13:Q(yi);break;case 19:Q(yi);break;case 10:dm(g.type._context);break;case 22:case 23:Ym()}d=d.return}if(Hi=a,ki=a=so(a.current,null),Ji=ar=l,Bi=0,dd=null,Vm=bf=il=0,Pn=hd=null,Zo!==null){for(l=0;l<Zo.length;l++)if(d=Zo[l],g=d.interleaved,g!==null){d.interleaved=null;var b=g.next,T=d.pending;if(T!==null){var O=T.next;T.next=b,g.next=O}d.pending=g}Zo=null}return a}function Dv(a,l){do{var d=ki;try{if(cm(),uf.current=ff,cf){for(var g=vi.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}cf=!1}if(tl=0,Vi=Fi=vi=null,sd=!1,ad=0,zm.current=null,d===null||d.return===null){Bi=1,dd=l,ki=null;break}e:{var T=a,O=d.return,G=d,ee=l;if(l=Ji,G.flags|=32768,ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Te=ee,Re=G,Le=Re.tag;if((Re.mode&1)===0&&(Le===0||Le===11||Le===15)){var Oe=Re.alternate;Oe?(Re.updateQueue=Oe.updateQueue,Re.memoizedState=Oe.memoizedState,Re.lanes=Oe.lanes):(Re.updateQueue=null,Re.memoizedState=null)}var qe=Z2(O);if(qe!==null){qe.flags&=-257,ev(qe,O,G,T,l),qe.mode&1&&J2(T,Te,l),l=qe,ee=Te;var Ke=l.updateQueue;if(Ke===null){var Ye=new Set;Ye.add(ee),l.updateQueue=Ye}else Ke.add(ee);break e}else{if((l&1)===0){J2(T,Te,l),Qm();break e}ee=Error(t(426))}}else if(di&&G.mode&1){var Ai=Z2(O);if(Ai!==null){(Ai.flags&65536)===0&&(Ai.flags|=256),ev(Ai,O,G,T,l),lm(Su(ee,G));break e}}T=ee=Su(ee,G),Bi!==4&&(Bi=2),hd===null?hd=[T]:hd.push(T),T=O;do{switch(T.tag){case 3:T.flags|=65536,l&=-l,T.lanes|=l;var ve=Y2(T,ee,l);T2(T,ve);break e;case 1:G=ee;var se=T.type,be=T.stateNode;if((T.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||be!==null&&typeof be.componentDidCatch=="function"&&(to===null||!to.has(be)))){T.flags|=65536,l&=-l,T.lanes|=l;var Be=Q2(T,G,l);T2(T,Be);break e}}T=T.return}while(T!==null)}Mv(d)}catch(Je){l=Je,ki===d&&d!==null&&(ki=d=d.return);continue}break}while(!0)}function Iv(){var a=_f.current;return _f.current=ff,a===null?ff:a}function Qm(){(Bi===0||Bi===3||Bi===2)&&(Bi=4),Hi===null||(il&268435455)===0&&(bf&268435455)===0||ro(Hi,Ji)}function Ef(a,l){var d=Ft;Ft|=2;var g=Iv();(Hi!==a||Ji!==l)&&(fa=null,rl(a,l));do try{i3();break}catch(b){Dv(a,b)}while(!0);if(cm(),Ft=d,_f.current=g,ki!==null)throw Error(t(261));return Hi=null,Ji=0,Bi}function i3(){for(;ki!==null;)kv(ki)}function n3(){for(;ki!==null&&!Bl();)kv(ki)}function kv(a){var l=Rv(a.alternate,a,ar);a.memoizedProps=a.pendingProps,l===null?Mv(a):ki=l,zm.current=null}function Mv(a){var l=a;do{var d=l.alternate;if(a=l.return,(l.flags&32768)===0){if(d=XE(d,l,ar),d!==null){ki=d;return}}else{if(d=YE(d,l),d!==null){d.flags&=32767,ki=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Bi=6,ki=null;return}}if(l=l.sibling,l!==null){ki=l;return}ki=l=a}while(l!==null);Bi===0&&(Bi=5)}function sl(a,l,d){var g=Lt,b=kr.transition;try{kr.transition=null,Lt=1,r3(a,l,d,g)}finally{kr.transition=b,Lt=g}return null}function r3(a,l,d,g){do Eu();while(io!==null);if((Ft&6)!==0)throw Error(t(327));d=a.finishedWork;var b=a.finishedLanes;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var T=d.lanes|d.childLanes;if(er(a,T),a===Hi&&(ki=Hi=null,Ji=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||Sf||(Sf=!0,Lv(Ma,function(){return Eu(),null})),T=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||T){T=kr.transition,kr.transition=null;var O=Lt;Lt=1;var G=Ft;Ft|=4,zm.current=null,JE(a,d),xv(d,a),Kc(Nt),Yl=!!bs,Nt=bs=null,a.current=d,ZE(d),Dg(),Ft=G,Lt=O,kr.transition=T}else a.current=d;if(Sf&&(Sf=!1,io=a,Tf=b),T=a.pendingLanes,T===0&&(to=null),zl(d.stateNode),On(a,mi()),l!==null)for(g=a.onRecoverableError,d=0;d<l.length;d++)b=l[d],g(b.value,{componentStack:b.stack,digest:b.digest});if(xf)throw xf=!1,a=qm,qm=null,a;return(Tf&1)!==0&&a.tag!==0&&Eu(),T=a.pendingLanes,(T&1)!==0?a===Wm?fd++:(fd=0,Wm=a):fd=0,Qa(),null}function Eu(){if(io!==null){var a=Ra(Tf),l=kr.transition,d=Lt;try{if(kr.transition=null,Lt=16>a?16:a,io===null)var g=!1;else{if(a=io,io=null,Tf=0,(Ft&6)!==0)throw Error(t(331));var b=Ft;for(Ft|=4,Ge=a.current;Ge!==null;){var T=Ge,O=T.child;if((Ge.flags&16)!==0){var G=T.deletions;if(G!==null){for(var ee=0;ee<G.length;ee++){var Te=G[ee];for(Ge=Te;Ge!==null;){var Re=Ge;switch(Re.tag){case 0:case 11:case 15:cd(8,Re,T)}var Le=Re.child;if(Le!==null)Le.return=Re,Ge=Le;else for(;Ge!==null;){Re=Ge;var Oe=Re.sibling,qe=Re.return;if(mv(Re),Re===Te){Ge=null;break}if(Oe!==null){Oe.return=qe,Ge=Oe;break}Ge=qe}}}var Ke=T.alternate;if(Ke!==null){var Ye=Ke.child;if(Ye!==null){Ke.child=null;do{var Ai=Ye.sibling;Ye.sibling=null,Ye=Ai}while(Ye!==null)}}Ge=T}}if((T.subtreeFlags&2064)!==0&&O!==null)O.return=T,Ge=O;else e:for(;Ge!==null;){if(T=Ge,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:cd(9,T,T.return)}var ve=T.sibling;if(ve!==null){ve.return=T.return,Ge=ve;break e}Ge=T.return}}var se=a.current;for(Ge=se;Ge!==null;){O=Ge;var be=O.child;if((O.subtreeFlags&2064)!==0&&be!==null)be.return=O,Ge=be;else e:for(O=se;Ge!==null;){if(G=Ge,(G.flags&2048)!==0)try{switch(G.tag){case 0:case 11:case 15:vf(9,G)}}catch(Je){wi(G,G.return,Je)}if(G===O){Ge=null;break e}var Be=G.sibling;if(Be!==null){Be.return=G.return,Ge=Be;break e}Ge=G.return}}if(Ft=b,Qa(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot($l,a)}catch{}g=!0}return g}finally{Lt=d,kr.transition=l}}return!1}function Pv(a,l,d){l=Su(d,l),l=Y2(a,l,1),a=Za(a,l,1),l=pn(),a!==null&&(Zs(a,1,l),On(a,l))}function wi(a,l,d){if(a.tag===3)Pv(a,a,d);else for(;l!==null;){if(l.tag===3){Pv(l,a,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(to===null||!to.has(g))){a=Su(d,a),a=Q2(l,a,1),l=Za(l,a,1),a=pn(),l!==null&&(Zs(l,1,a),On(l,a));break}}l=l.return}}function s3(a,l,d){var g=a.pingCache;g!==null&&g.delete(l),l=pn(),a.pingedLanes|=a.suspendedLanes&d,Hi===a&&(Ji&d)===d&&(Bi===4||Bi===3&&(Ji&130023424)===Ji&&500>mi()-Hm?rl(a,0):Vm|=d),On(a,l)}function Ov(a,l){l===0&&((a.mode&1)===0?l=1:(l=Vl,Vl<<=1,(Vl&130023424)===0&&(Vl=4194304)));var d=pn();a=ca(a,l),a!==null&&(Zs(a,l,d),On(a,d))}function a3(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),Ov(a,d)}function o3(a,l){var d=0;switch(a.tag){case 13:var g=a.stateNode,b=a.memoizedState;b!==null&&(d=b.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),Ov(a,d)}var Rv;Rv=function(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps||We.current)Mn=!0;else{if((a.lanes&d)===0&&(l.flags&128)===0)return Mn=!1,KE(a,l,d);Mn=(a.flags&131072)!==0}else Mn=!1,di&&(l.flags&1048576)!==0&&f2(l,ef,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;mf(a,l),a=l.pendingProps;var b=li(l,we.current);bu(l,d),b=xm(null,l,g,a,b,d);var T=Sm();return l.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Zt(g)?(T=!0,Ss(l)):T=!1,l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,pm(l),b.updater=pf,l.stateNode=b,b._reactInternals=l,Dm(l,g,a,d),l=Pm(null,l,g,!0,T,d)):(l.tag=0,di&&T&&rm(l),fn(null,l,b,d),l=l.child),l;case 16:g=l.elementType;e:{switch(mf(a,l),a=l.pendingProps,b=g._init,g=b(g._payload),l.type=g,b=l.tag=u3(g),a=Gr(g,a),b){case 0:l=Mm(null,l,g,a,d);break e;case 1:l=av(null,l,g,a,d);break e;case 11:l=tv(null,l,g,a,d);break e;case 14:l=iv(null,l,g,Gr(g.type,a),d);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,b=l.pendingProps,b=l.elementType===g?b:Gr(g,b),Mm(a,l,g,b,d);case 1:return g=l.type,b=l.pendingProps,b=l.elementType===g?b:Gr(g,b),av(a,l,g,b,d);case 3:e:{if(ov(l),a===null)throw Error(t(387));g=l.pendingProps,T=l.memoizedState,b=T.element,S2(a,l),of(l,g,null,d);var O=l.memoizedState;if(g=O.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},l.updateQueue.baseState=T,l.memoizedState=T,l.flags&256){b=Su(Error(t(423)),l),l=lv(a,l,g,d,b);break e}else if(g!==b){b=Su(Error(t(424)),l),l=lv(a,l,g,d,b);break e}else for(sr=xs(l.stateNode.containerInfo.firstChild),rr=l,di=!0,Wr=null,d=b2(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(yu(),g===b){l=ha(a,l,d);break e}fn(a,l,g,d)}l=l.child}return l;case 5:return w2(l),a===null&&om(l),g=l.type,b=l.pendingProps,T=a!==null?a.memoizedProps:null,O=b.children,qr(g,b)?O=null:T!==null&&qr(g,T)&&(l.flags|=32),sv(a,l),fn(a,l,O,d),l.child;case 6:return a===null&&om(l),null;case 13:return uv(a,l,d);case 4:return gm(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=vu(l,null,g,d):fn(a,l,g,d),l.child;case 11:return g=l.type,b=l.pendingProps,b=l.elementType===g?b:Gr(g,b),tv(a,l,g,b,d);case 7:return fn(a,l,l.pendingProps,d),l.child;case 8:return fn(a,l,l.pendingProps.children,d),l.child;case 12:return fn(a,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,b=l.pendingProps,T=l.memoizedProps,O=b.value,ye(rf,g._currentValue),g._currentValue=O,T!==null)if(An(T.value,O)){if(T.children===b.children&&!We.current){l=ha(a,l,d);break e}}else for(T=l.child,T!==null&&(T.return=l);T!==null;){var G=T.dependencies;if(G!==null){O=T.child;for(var ee=G.firstContext;ee!==null;){if(ee.context===g){if(T.tag===1){ee=da(-1,d&-d),ee.tag=2;var Te=T.updateQueue;if(Te!==null){Te=Te.shared;var Re=Te.pending;Re===null?ee.next=ee:(ee.next=Re.next,Re.next=ee),Te.pending=ee}}T.lanes|=d,ee=T.alternate,ee!==null&&(ee.lanes|=d),hm(T.return,d,l),G.lanes|=d;break}ee=ee.next}}else if(T.tag===10)O=T.type===l.type?null:T.child;else if(T.tag===18){if(O=T.return,O===null)throw Error(t(341));O.lanes|=d,G=O.alternate,G!==null&&(G.lanes|=d),hm(O,d,l),O=T.sibling}else O=T.child;if(O!==null)O.return=T;else for(O=T;O!==null;){if(O===l){O=null;break}if(T=O.sibling,T!==null){T.return=O.return,O=T;break}O=O.return}T=O}fn(a,l,b.children,d),l=l.child}return l;case 9:return b=l.type,g=l.pendingProps.children,bu(l,d),b=Dr(b),g=g(b),l.flags|=1,fn(a,l,g,d),l.child;case 14:return g=l.type,b=Gr(g,l.pendingProps),b=Gr(g.type,b),iv(a,l,g,b,d);case 15:return nv(a,l,l.type,l.pendingProps,d);case 17:return g=l.type,b=l.pendingProps,b=l.elementType===g?b:Gr(g,b),mf(a,l),l.tag=1,Zt(g)?(a=!0,Ss(l)):a=!1,bu(l,d),K2(l,g,b),Dm(l,g,b,d),Pm(null,l,g,!0,a,d);case 19:return dv(a,l,d);case 22:return rv(a,l,d)}throw Error(t(156,l.tag))};function Lv(a,l){return ti(a,l)}function l3(a,l,d,g){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(a,l,d,g){return new l3(a,l,d,g)}function Jm(a){return a=a.prototype,!(!a||!a.isReactComponent)}function u3(a){if(typeof a=="function")return Jm(a)?1:0;if(a!=null){if(a=a.$$typeof,a===fe)return 11;if(a===Ee)return 14}return 2}function so(a,l){var d=a.alternate;return d===null?(d=Mr(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function Af(a,l,d,g,b,T){var O=2;if(g=a,typeof a=="function")Jm(a)&&(O=1);else if(typeof a=="string")O=5;else e:switch(a){case z:return al(d.children,b,T,l);case J:O=8,b|=8;break;case R:return a=Mr(12,d,l,b|2),a.elementType=R,a.lanes=T,a;case le:return a=Mr(13,d,l,b),a.elementType=le,a.lanes=T,a;case Se:return a=Mr(19,d,l,b),a.elementType=Se,a.lanes=T,a;case re:return Df(d,b,T,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case F:O=10;break e;case de:O=9;break e;case fe:O=11;break e;case Ee:O=14;break e;case Ce:O=16,g=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=Mr(O,d,l,b),l.elementType=a,l.type=g,l.lanes=T,l}function al(a,l,d,g){return a=Mr(7,a,g,l),a.lanes=d,a}function Df(a,l,d,g){return a=Mr(22,a,g,l),a.elementType=re,a.lanes=d,a.stateNode={isHidden:!1},a}function Zm(a,l,d){return a=Mr(6,a,null,l),a.lanes=d,a}function ey(a,l,d){return l=Mr(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function c3(a,l,d,g,b){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lo(0),this.expirationTimes=Lo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lo(0),this.identifierPrefix=g,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function ty(a,l,d,g,b,T,O,G,ee){return a=new c3(a,l,d,G,ee),l===1?(l=1,T===!0&&(l|=8)):l=0,T=Mr(3,null,null,l),a.current=T,T.stateNode=a,T.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},pm(T),a}function d3(a,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:g==null?null:""+g,children:a,containerInfo:l,implementation:d}}function Nv(a){if(!a)return Fe;a=a._reactInternals;e:{if(Dt(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Zt(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var d=a.type;if(Zt(d))return Xa(a,d,l)}return l}function Fv(a,l,d,g,b,T,O,G,ee){return a=ty(d,g,!0,a,b,T,O,G,ee),a.context=Nv(null),d=a.current,g=pn(),b=no(d),T=da(g,b),T.callback=l??null,Za(d,T,b),a.current.lanes=b,Zs(a,b,g),On(a,g),a}function If(a,l,d,g){var b=l.current,T=pn(),O=no(b);return d=Nv(d),l.context===null?l.context=d:l.pendingContext=d,l=da(T,O),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=Za(b,l,O),a!==null&&(Yr(a,b,O,T),af(a,b,O)),O}function kf(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Bv(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function iy(a,l){Bv(a,l),(a=a.alternate)&&Bv(a,l)}function h3(){return null}var jv=typeof reportError=="function"?reportError:function(a){console.error(a)};function ny(a){this._internalRoot=a}Mf.prototype.render=ny.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));If(a,l,null,null)},Mf.prototype.unmount=ny.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;nl(function(){If(null,a,null,null)}),l[wr]=null}};function Mf(a){this._internalRoot=a}Mf.prototype.unstable_scheduleHydration=function(a){if(a){var l=Rc();a={blockedOn:null,target:a,priority:l};for(var d=0;d<gs.length&&l!==0&&l<gs[d].priority;d++);gs.splice(d,0,a),d===0&&Nc(a)}};function ry(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Pf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Uv(){}function f3(a,l,d,g,b){if(b){if(typeof g=="function"){var T=g;g=function(){var Te=kf(O);T.call(Te)}}var O=Fv(l,g,a,0,null,!1,!1,"",Uv);return a._reactRootContainer=O,a[wr]=O.current,Ha(a.nodeType===8?a.parentNode:a),nl(),O}for(;b=a.lastChild;)a.removeChild(b);if(typeof g=="function"){var G=g;g=function(){var Te=kf(ee);G.call(Te)}}var ee=ty(a,0,!1,null,null,!1,!1,"",Uv);return a._reactRootContainer=ee,a[wr]=ee.current,Ha(a.nodeType===8?a.parentNode:a),nl(function(){If(l,ee,d,g)}),ee}function Of(a,l,d,g,b){var T=d._reactRootContainer;if(T){var O=T;if(typeof b=="function"){var G=b;b=function(){var ee=kf(O);G.call(ee)}}If(l,O,a,b)}else O=f3(d,l,a,b,g);return kf(O)}No=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var d=Pa(l.pendingLanes);d!==0&&(Oc(l,d|1),On(l,mi()),(Ft&6)===0&&(wu=mi()+500,Qa()))}break;case 13:nl(function(){var g=ca(a,1);if(g!==null){var b=pn();Yr(g,a,1,b)}}),iy(a,1)}},fs=function(a){if(a.tag===13){var l=ca(a,134217728);if(l!==null){var d=pn();Yr(l,a,134217728,d)}iy(a,134217728)}},ql=function(a){if(a.tag===13){var l=no(a),d=ca(a,l);if(d!==null){var g=pn();Yr(d,a,l,g)}iy(a,l)}},Rc=function(){return Lt},Wl=function(a,l){var d=Lt;try{return Lt=a,l()}finally{Lt=d}},Ue=function(a,l,d){switch(l){case"input":if(Yn(a,d),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==a&&g.form===a.form){var b=B(g);if(!b)throw Error(t(90));Ve(g),Yn(g,b)}}}break;case"textarea":_r(a,d);break;case"select":l=d.value,l!=null&&Tt(a,!!d.multiple,l,!1)}},ze=Xm,xt=nl;var p3={usingClientEntryPoint:!1,Events:[S,E,B,oe,Pe,Xm]},pd={findFiberByHostInstance:v,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},g3={bundleType:pd.bundleType,version:pd.version,rendererPackageName:pd.rendererPackageName,rendererConfig:pd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=gh(a),a===null?null:a.stateNode},findFiberByHostInstance:pd.findFiberByHostInstance||h3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rf.isDisabled&&Rf.supportsFiber)try{$l=Rf.inject(g3),cn=Rf}catch{}}return Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p3,Rn.createPortal=function(a,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ry(l))throw Error(t(200));return d3(a,l,null,d)},Rn.createRoot=function(a,l){if(!ry(a))throw Error(t(299));var d=!1,g="",b=jv;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),l=ty(a,1,!1,null,null,d,!1,g,b),a[wr]=l.current,Ha(a.nodeType===8?a.parentNode:a),new ny(l)},Rn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=gh(l),a=a===null?null:a.stateNode,a},Rn.flushSync=function(a){return nl(a)},Rn.hydrate=function(a,l,d){if(!Pf(l))throw Error(t(200));return Of(null,a,l,!0,d)},Rn.hydrateRoot=function(a,l,d){if(!ry(a))throw Error(t(405));var g=d!=null&&d.hydratedSources||null,b=!1,T="",O=jv;if(d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(O=d.onRecoverableError)),l=Fv(l,null,a,1,d??null,b,!1,T,O),a[wr]=l.current,Ha(a),g)for(a=0;a<g.length;a++)d=g[a],b=d._getVersion,b=b(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,b]:l.mutableSourceEagerHydrationData.push(d,b);return new Mf(l)},Rn.render=function(a,l,d){if(!Pf(l))throw Error(t(200));return Of(null,a,l,!1,d)},Rn.unmountComponentAtNode=function(a){if(!Pf(a))throw Error(t(40));return a._reactRootContainer?(nl(function(){Of(null,null,a,!1,function(){a._reactRootContainer=null,a[wr]=null})}),!0):!1},Rn.unstable_batchedUpdates=Xm,Rn.unstable_renderSubtreeIntoContainer=function(a,l,d,g){if(!Pf(d))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Of(a,l,d,!1,g)},Rn.version="18.3.1-next-f1338f8080-20240426",Rn}var Kv;function A3(){if(Kv)return ly.exports;Kv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ly.exports=E3(),ly.exports}var Xv;function D3(){if(Xv)return Lf;Xv=1;var n=A3();return Lf.createRoot=n.createRoot,Lf.hydrateRoot=n.hydrateRoot,Lf}var I3=D3(),dy={exports:{}},Vt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function k3(){if(Yv)return Vt;Yv=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,r=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,m=n?Symbol.for("react.suspense"):60113,x=n?Symbol.for("react.suspense_list"):60120,w=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,C=n?Symbol.for("react.block"):60121,D=n?Symbol.for("react.fundamental"):60117,N=n?Symbol.for("react.responder"):60118,L=n?Symbol.for("react.scope"):60119;function P(j){if(typeof j=="object"&&j!==null){var K=j.$$typeof;switch(K){case e:switch(j=j.type,j){case c:case h:case i:case s:case r:case m:return j;default:switch(j=j&&j.$$typeof,j){case u:case f:case A:case w:case o:return j;default:return K}}case t:return K}}}function X(j){return P(j)===h}return Vt.AsyncMode=c,Vt.ConcurrentMode=h,Vt.ContextConsumer=u,Vt.ContextProvider=o,Vt.Element=e,Vt.ForwardRef=f,Vt.Fragment=i,Vt.Lazy=A,Vt.Memo=w,Vt.Portal=t,Vt.Profiler=s,Vt.StrictMode=r,Vt.Suspense=m,Vt.isAsyncMode=function(j){return X(j)||P(j)===c},Vt.isConcurrentMode=X,Vt.isContextConsumer=function(j){return P(j)===u},Vt.isContextProvider=function(j){return P(j)===o},Vt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},Vt.isForwardRef=function(j){return P(j)===f},Vt.isFragment=function(j){return P(j)===i},Vt.isLazy=function(j){return P(j)===A},Vt.isMemo=function(j){return P(j)===w},Vt.isPortal=function(j){return P(j)===t},Vt.isProfiler=function(j){return P(j)===s},Vt.isStrictMode=function(j){return P(j)===r},Vt.isSuspense=function(j){return P(j)===m},Vt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===i||j===h||j===s||j===r||j===m||j===x||typeof j=="object"&&j!==null&&(j.$$typeof===A||j.$$typeof===w||j.$$typeof===o||j.$$typeof===u||j.$$typeof===f||j.$$typeof===D||j.$$typeof===N||j.$$typeof===L||j.$$typeof===C)},Vt.typeOf=P,Vt}var Qv;function M3(){return Qv||(Qv=1,dy.exports=k3()),dy.exports}var hy,Jv;function P3(){if(Jv)return hy;Jv=1;var n=M3(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[n.ForwardRef]=i,s[n.Memo]=r;function o(A){return n.isMemo(A)?r:s[A.$$typeof]||e}var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,x=Object.prototype;function w(A,C,D){if(typeof C!="string"){if(x){var N=m(C);N&&N!==x&&w(A,N,D)}var L=c(C);h&&(L=L.concat(h(C)));for(var P=o(A),X=o(C),j=0;j<L.length;++j){var K=L[j];if(!t[K]&&!(D&&D[K])&&!(X&&X[K])&&!(P&&P[K])){var z=f(C,K);try{u(A,K,z)}catch{}}}}return A}return hy=w,hy}var O3=P3();const R3=Js(O3);var fy={exports:{}},Ht={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var py,Zv;function L3(){if(Zv)return py;Zv=1;var n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function i(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function r(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var o={},u=0;u<10;u++)o["_"+String.fromCharCode(u)]=u;var c=Object.getOwnPropertyNames(o).map(function(f){return o[f]});if(c.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(f){h[f]=f}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return py=r()?Object.assign:function(s,o){for(var u,c=i(s),h,f=1;f<arguments.length;f++){u=Object(arguments[f]);for(var m in u)e.call(u,m)&&(c[m]=u[m]);if(n){h=n(u);for(var x=0;x<h.length;x++)t.call(u,h[x])&&(c[h[x]]=u[h[x]])}}return c},py}/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function N3(){if(e_)return Ht;e_=1;var n=L3(),e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,i=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,u=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,h=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,w=typeof Symbol=="function"&&Symbol.iterator;function A(V){for(var ae="https://reactjs.org/docs/error-decoder.html?invariant="+V,pe=1;pe<arguments.length;pe++)ae+="&args[]="+encodeURIComponent(arguments[pe]);return"Minified React error #"+V+"; visit "+ae+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D={};function N(V,ae,pe){this.props=V,this.context=ae,this.refs=D,this.updater=pe||C}N.prototype.isReactComponent={},N.prototype.setState=function(V,ae){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error(A(85));this.updater.enqueueSetState(this,V,ae,"setState")},N.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function L(){}L.prototype=N.prototype;function P(V,ae,pe){this.props=V,this.context=ae,this.refs=D,this.updater=pe||C}var X=P.prototype=new L;X.constructor=P,n(X,N.prototype),X.isPureReactComponent=!0;var j={current:null},K=Object.prototype.hasOwnProperty,z={key:!0,ref:!0,__self:!0,__source:!0};function J(V,ae,pe){var Z,_e={},Me=null,$e=null;if(ae!=null)for(Z in ae.ref!==void 0&&($e=ae.ref),ae.key!==void 0&&(Me=""+ae.key),ae)K.call(ae,Z)&&!z.hasOwnProperty(Z)&&(_e[Z]=ae[Z]);var Ve=arguments.length-2;if(Ve===1)_e.children=pe;else if(1<Ve){for(var nt=Array(Ve),st=0;st<Ve;st++)nt[st]=arguments[st+2];_e.children=nt}if(V&&V.defaultProps)for(Z in Ve=V.defaultProps,Ve)_e[Z]===void 0&&(_e[Z]=Ve[Z]);return{$$typeof:t,type:V,key:Me,ref:$e,props:_e,_owner:j.current}}function R(V,ae){return{$$typeof:t,type:V.type,key:ae,ref:V.ref,props:V.props,_owner:V._owner}}function F(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function de(V){var ae={"=":"=0",":":"=2"};return"$"+(""+V).replace(/[=:]/g,function(pe){return ae[pe]})}var fe=/\/+/g,le=[];function Se(V,ae,pe,Z){if(le.length){var _e=le.pop();return _e.result=V,_e.keyPrefix=ae,_e.func=pe,_e.context=Z,_e.count=0,_e}return{result:V,keyPrefix:ae,func:pe,context:Z,count:0}}function Ee(V){V.result=null,V.keyPrefix=null,V.func=null,V.context=null,V.count=0,10>le.length&&le.push(V)}function Ce(V,ae,pe,Z){var _e=typeof V;(_e==="undefined"||_e==="boolean")&&(V=null);var Me=!1;if(V===null)Me=!0;else switch(_e){case"string":case"number":Me=!0;break;case"object":switch(V.$$typeof){case t:case i:Me=!0}}if(Me)return pe(Z,V,ae===""?"."+te(V,0):ae),1;if(Me=0,ae=ae===""?".":ae+":",Array.isArray(V))for(var $e=0;$e<V.length;$e++){_e=V[$e];var Ve=ae+te(_e,$e);Me+=Ce(_e,Ve,pe,Z)}else if(V===null||typeof V!="object"?Ve=null:(Ve=w&&V[w]||V["@@iterator"],Ve=typeof Ve=="function"?Ve:null),typeof Ve=="function")for(V=Ve.call(V),$e=0;!(_e=V.next()).done;)_e=_e.value,Ve=ae+te(_e,$e++),Me+=Ce(_e,Ve,pe,Z);else if(_e==="object")throw pe=""+V,Error(A(31,pe==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":pe,""));return Me}function re(V,ae,pe){return V==null?0:Ce(V,"",ae,pe)}function te(V,ae){return typeof V=="object"&&V!==null&&V.key!=null?de(V.key):ae.toString(36)}function ue(V,ae){V.func.call(V.context,ae,V.count++)}function ce(V,ae,pe){var Z=V.result,_e=V.keyPrefix;V=V.func.call(V.context,ae,V.count++),Array.isArray(V)?k(V,Z,pe,function(Me){return Me}):V!=null&&(F(V)&&(V=R(V,_e+(!V.key||ae&&ae.key===V.key?"":(""+V.key).replace(fe,"$&/")+"/")+pe)),Z.push(V))}function k(V,ae,pe,Z,_e){var Me="";pe!=null&&(Me=(""+pe).replace(fe,"$&/")+"/"),ae=Se(ae,Me,Z,_e),re(V,ce,ae),Ee(ae)}var Y={current:null};function he(){var V=Y.current;if(V===null)throw Error(A(321));return V}var Ie={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:j,IsSomeRendererActing:{current:!1},assign:n};return Ht.Children={map:function(V,ae,pe){if(V==null)return V;var Z=[];return k(V,Z,null,ae,pe),Z},forEach:function(V,ae,pe){if(V==null)return V;ae=Se(null,null,ae,pe),re(V,ue,ae),Ee(ae)},count:function(V){return re(V,function(){return null},null)},toArray:function(V){var ae=[];return k(V,ae,null,function(pe){return pe}),ae},only:function(V){if(!F(V))throw Error(A(143));return V}},Ht.Component=N,Ht.Fragment=r,Ht.Profiler=o,Ht.PureComponent=P,Ht.StrictMode=s,Ht.Suspense=f,Ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ie,Ht.cloneElement=function(V,ae,pe){if(V==null)throw Error(A(267,V));var Z=n({},V.props),_e=V.key,Me=V.ref,$e=V._owner;if(ae!=null){if(ae.ref!==void 0&&(Me=ae.ref,$e=j.current),ae.key!==void 0&&(_e=""+ae.key),V.type&&V.type.defaultProps)var Ve=V.type.defaultProps;for(nt in ae)K.call(ae,nt)&&!z.hasOwnProperty(nt)&&(Z[nt]=ae[nt]===void 0&&Ve!==void 0?Ve[nt]:ae[nt])}var nt=arguments.length-2;if(nt===1)Z.children=pe;else if(1<nt){Ve=Array(nt);for(var st=0;st<nt;st++)Ve[st]=arguments[st+2];Z.children=Ve}return{$$typeof:t,type:V.type,key:_e,ref:Me,props:Z,_owner:$e}},Ht.createContext=function(V,ae){return ae===void 0&&(ae=null),V={$$typeof:c,_calculateChangedBits:ae,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider={$$typeof:u,_context:V},V.Consumer=V},Ht.createElement=J,Ht.createFactory=function(V){var ae=J.bind(null,V);return ae.type=V,ae},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(V){return{$$typeof:h,render:V}},Ht.isValidElement=F,Ht.lazy=function(V){return{$$typeof:x,_ctor:V,_status:-1,_result:null}},Ht.memo=function(V,ae){return{$$typeof:m,type:V,compare:ae===void 0?null:ae}},Ht.useCallback=function(V,ae){return he().useCallback(V,ae)},Ht.useContext=function(V,ae){return he().useContext(V,ae)},Ht.useDebugValue=function(){},Ht.useEffect=function(V,ae){return he().useEffect(V,ae)},Ht.useImperativeHandle=function(V,ae,pe){return he().useImperativeHandle(V,ae,pe)},Ht.useLayoutEffect=function(V,ae){return he().useLayoutEffect(V,ae)},Ht.useMemo=function(V,ae){return he().useMemo(V,ae)},Ht.useReducer=function(V,ae,pe){return he().useReducer(V,ae,pe)},Ht.useRef=function(V){return he().useRef(V)},Ht.useState=function(V){return he().useState(V)},Ht.version="16.14.0",Ht}var t_;function F3(){return t_||(t_=1,fy.exports=N3()),fy.exports}var B3=F3();const Nu=Js(B3);function ct(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function u(f){try{h(i.next(f))}catch(m){o(m)}}function c(f){try{h(i.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):r(f.value).then(u,c)}h((i=i.apply(n,e||[])).next())})}function i_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ct(n){return this instanceof Ct?(this.v=n,this):new Ct(n)}function Us(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(w){return function(A){return Promise.resolve(A).then(w,m)}}function u(w,A){i[w]&&(r[w]=function(C){return new Promise(function(D,N){s.push([w,C,D,N])>1||c(w,C)})},A&&(r[w]=A(r[w])))}function c(w,A){try{h(i[w](A))}catch(C){x(s[0][3],C)}}function h(w){w.value instanceof Ct?Promise.resolve(w.value.v).then(f,m):x(s[0][2],w)}function f(w){c("next",w)}function m(w){c("throw",w)}function x(w,A){w(A),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Kf(n){var e,t;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,s){e[r]=n[r]?function(o){return(t=!t)?{value:Ct(n[r](o)),done:!1}:s?s(o):o}:s}}function wl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof i_=="function"?i_(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(u,c){o=n[s](o),r(u,c,o.done,o.value)})}}function r(s,o,u,c){Promise.resolve(c).then(function(h){s({value:h,done:u})},o)}}const j3=new TextDecoder("utf-8"),l0=n=>j3.decode(n),U3=new TextEncoder,Q0=n=>U3.encode(n),[aO,$3]=(()=>{const n=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw n()}return e.asIntN=()=>{throw n()},e.asUintN=()=>{throw n()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[Zd,oO]=(()=>{const n=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw n()}static from(){throw n()}constructor(){throw n()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[eh,lO]=(()=>{const n=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw n()}static from(){throw n()}constructor(){throw n()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),z3=n=>typeof n=="number",Ax=n=>typeof n=="boolean",ji=n=>typeof n=="function",Wn=n=>n!=null&&Object(n)===n,_o=n=>Wn(n)&&ji(n.then),th=n=>Wn(n)&&ji(n[Symbol.iterator]),Tc=n=>Wn(n)&&ji(n[Symbol.asyncIterator]),u0=n=>Wn(n)&&Wn(n.schema),Dx=n=>Wn(n)&&"done"in n&&"value"in n,Ix=n=>Wn(n)&&ji(n.stat)&&z3(n.fd),kx=n=>Wn(n)&&J0(n.body),eg=n=>"_getDOMStream"in n&&"_getNodeStream"in n,V3=n=>Wn(n)&&ji(n.abort)&&ji(n.getWriter)&&!eg(n),J0=n=>Wn(n)&&ji(n.cancel)&&ji(n.getReader)&&!eg(n),H3=n=>Wn(n)&&ji(n.end)&&ji(n.write)&&Ax(n.writable)&&!eg(n),Mx=n=>Wn(n)&&ji(n.read)&&ji(n.pipe)&&Ax(n.readable)&&!eg(n),q3=n=>Wn(n)&&ji(n.clear)&&ji(n.bytes)&&ji(n.position)&&ji(n.setPosition)&&ji(n.capacity)&&ji(n.getBufferIdentifier)&&ji(n.createLong),Z0=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function W3(n){const e=n[0]?[n[0]]:[];let t,i,r,s;for(let o,u,c=0,h=0,f=n.length;++c<f;){if(o=e[h],u=n[c],!o||!u||o.buffer!==u.buffer||u.byteOffset<o.byteOffset){u&&(e[++h]=u);continue}if({byteOffset:t,byteLength:r}=o,{byteOffset:i,byteLength:s}=u,t+r<i||i+s<t){u&&(e[++h]=u);continue}e[h]=new Uint8Array(o.buffer,t,i-t+s)}return e}function n_(n,e,t=0,i=e.byteLength){const r=n.byteLength,s=new Uint8Array(n.buffer,n.byteOffset,r),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return s.set(o,t),n}function Ws(n,e){const t=W3(n),i=t.reduce((f,m)=>f+m.byteLength,0);let r,s,o,u=0,c=-1;const h=Math.min(e||Number.POSITIVE_INFINITY,i);for(const f=t.length;++c<f;){if(r=t[c],s=r.subarray(0,Math.min(r.length,h-u)),h<=u+s.length){s.length<r.length?t[c]=r.subarray(s.length):s.length===r.length&&c++,o?n_(o,s,u):o=s;break}n_(o||(o=new Uint8Array(h)),s,u),u+=s.length}return[o||new Uint8Array(0),t.slice(c),i-(o?o.byteLength:0)]}function ii(n,e){let t=Dx(e)?e.value:e;return t instanceof n?n===Uint8Array?new n(t.buffer,t.byteOffset,t.byteLength):t:t?(typeof t=="string"&&(t=Q0(t)),t instanceof ArrayBuffer?new n(t):t instanceof Z0?new n(t):q3(t)?ii(n,t.bytes()):ArrayBuffer.isView(t)?t.byteLength<=0?new n(0):new n(t.buffer,t.byteOffset,t.byteLength/n.BYTES_PER_ELEMENT):n.from(t)):new n(0)}const md=n=>ii(Int32Array,n),jt=n=>ii(Uint8Array,n),c0=n=>(n.next(),n);function*G3(n,e){const t=function*(r){yield r},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Z0?t(e):th(e)?e:t(e);return yield*c0(function*(r){let s=null;do s=r.next(yield ii(n,s));while(!s.done)}(i[Symbol.iterator]())),new n}const K3=n=>G3(Uint8Array,n);function Px(n,e){return Us(this,arguments,function*(){if(_o(e))return yield Ct(yield Ct(yield*Kf(wl(Px(n,yield Ct(e))))));const i=function(o){return Us(this,arguments,function*(){yield yield Ct(yield Ct(o))})},r=function(o){return Us(this,arguments,function*(){yield Ct(yield*Kf(wl(c0(function*(u){let c=null;do c=u.next(yield c==null?void 0:c.value);while(!c.done)}(o[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Z0?i(e):th(e)?r(e):Tc(e)?e:i(e);return yield Ct(yield*Kf(wl(c0(function(o){return Us(this,arguments,function*(){let u=null;do u=yield Ct(o.next(yield yield Ct(ii(n,u))));while(!u.done)})}(s[Symbol.asyncIterator]()))))),yield Ct(new n)})}const X3=n=>Px(Uint8Array,n);function e1(n,e,t){if(n!==0){t=t.slice(0,e+1);for(let i=-1;++i<=e;)t[i]+=n}return t}function Y3(n,e){let t=0;const i=n.length;if(i!==e.length)return!1;if(i>0)do if(n[t]!==e[t])return!1;while(++t<i);return!0}const Rr={fromIterable(n){return Nf(Q3(n))},fromAsyncIterable(n){return Nf(J3(n))},fromDOMStream(n){return Nf(Z3(n))},fromNodeStream(n){return Nf(tA(n))},toDOMStream(n,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(n,e){throw new Error('"toNodeStream" not available in this environment')}},Nf=n=>(n.next(),n);function*Q3(n){let e,t=!1,i=[],r,s,o,u=0;function c(){return s==="peek"?Ws(i,o)[0]:([r,i,u]=Ws(i,o),r)}({cmd:s,size:o}=yield null);const h=K3(n)[Symbol.iterator]();try{do if({done:e,value:r}=Number.isNaN(o-u)?h.next():h.next(o-u),!e&&r.byteLength>0&&(i.push(r),u+=r.byteLength),e||o<=u)do({cmd:s,size:o}=yield c());while(o<u);while(!e)}catch(f){(t=!0)&&typeof h.throw=="function"&&h.throw(f)}finally{t===!1&&typeof h.return=="function"&&h.return(null)}return null}function J3(n){return Us(this,arguments,function*(){let t,i=!1,r=[],s,o,u,c=0;function h(){return o==="peek"?Ws(r,u)[0]:([s,r,c]=Ws(r,u),s)}({cmd:o,size:u}=yield yield Ct(null));const f=X3(n)[Symbol.asyncIterator]();try{do if({done:t,value:s}=Number.isNaN(u-c)?yield Ct(f.next()):yield Ct(f.next(u-c)),!t&&s.byteLength>0&&(r.push(s),c+=s.byteLength),t||u<=c)do({cmd:o,size:u}=yield yield Ct(h()));while(u<c);while(!t)}catch(m){(i=!0)&&typeof f.throw=="function"&&(yield Ct(f.throw(m)))}finally{i===!1&&typeof f.return=="function"&&(yield Ct(f.return(new Uint8Array(0))))}return yield Ct(null)})}function Z3(n){return Us(this,arguments,function*(){let t=!1,i=!1,r=[],s,o,u,c=0;function h(){return o==="peek"?Ws(r,u)[0]:([s,r,c]=Ws(r,u),s)}({cmd:o,size:u}=yield yield Ct(null));const f=new eA(n);try{do if({done:t,value:s}=Number.isNaN(u-c)?yield Ct(f.read()):yield Ct(f.read(u-c)),!t&&s.byteLength>0&&(r.push(jt(s)),c+=s.byteLength),t||u<=c)do({cmd:o,size:u}=yield yield Ct(h()));while(u<c);while(!t)}catch(m){(i=!0)&&(yield Ct(f.cancel(m)))}finally{i===!1?yield Ct(f.cancel()):n.locked&&f.releaseLock()}return yield Ct(null)})}class eA{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ct(this,void 0,void 0,function*(){const{reader:t,source:i}=this;t&&(yield t.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return ct(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const t=yield this.reader.read();return!t.done&&(t.value=jt(t)),t})}}const gy=(n,e)=>{const t=r=>i([e,r]);let i;return[e,t,new Promise(r=>(i=r)&&n.once(e,t))]};function tA(n){return Us(this,arguments,function*(){const t=[];let i="error",r=!1,s=null,o,u,c=0,h=[],f;function m(){return o==="peek"?Ws(h,u)[0]:([f,h,c]=Ws(h,u),f)}if({cmd:o,size:u}=yield yield Ct(null),n.isTTY)return yield yield Ct(new Uint8Array(0)),yield Ct(null);try{t[0]=gy(n,"end"),t[1]=gy(n,"error");do{if(t[2]=gy(n,"readable"),[i,s]=yield Ct(Promise.race(t.map(w=>w[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(u-c)?(f=jt(n.read(u-c)),f.byteLength<u-c&&(f=jt(n.read()))):f=jt(n.read()),f.byteLength>0&&(h.push(f),c+=f.byteLength)),r||u<=c)do({cmd:o,size:u}=yield yield Ct(m()));while(u<c)}while(!r)}finally{yield Ct(x(t,i==="error"?s:null))}return yield Ct(null);function x(w,A){return f=h=null,new Promise((C,D)=>{for(const[N,L]of w)n.off(N,L);try{const N=n.destroy;N&&N.call(n,A),A=void 0}catch(N){A=N||A}finally{A!=null?D(A):C()}})}})}var pr;(function(n){n[n.V1=0]="V1",n[n.V2=1]="V2",n[n.V3=2]="V3",n[n.V4=3]="V4",n[n.V5=4]="V5"})(pr||(pr={}));var gr;(function(n){n[n.Sparse=0]="Sparse",n[n.Dense=1]="Dense"})(gr||(gr={}));var Hn;(function(n){n[n.HALF=0]="HALF",n[n.SINGLE=1]="SINGLE",n[n.DOUBLE=2]="DOUBLE"})(Hn||(Hn={}));var Aa;(function(n){n[n.DAY=0]="DAY",n[n.MILLISECOND=1]="MILLISECOND"})(Aa||(Aa={}));var Ut;(function(n){n[n.SECOND=0]="SECOND",n[n.MILLISECOND=1]="MILLISECOND",n[n.MICROSECOND=2]="MICROSECOND",n[n.NANOSECOND=3]="NANOSECOND"})(Ut||(Ut={}));var bo;(function(n){n[n.YEAR_MONTH=0]="YEAR_MONTH",n[n.DAY_TIME=1]="DAY_TIME",n[n.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(bo||(bo={}));var qt;(function(n){n[n.NONE=0]="NONE",n[n.Schema=1]="Schema",n[n.DictionaryBatch=2]="DictionaryBatch",n[n.RecordBatch=3]="RecordBatch",n[n.Tensor=4]="Tensor",n[n.SparseTensor=5]="SparseTensor"})(qt||(qt={}));var ge;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"})(ge||(ge={}));var ya;(function(n){n[n.OFFSET=0]="OFFSET",n[n.DATA=1]="DATA",n[n.VALIDITY=2]="VALIDITY",n[n.TYPE=3]="TYPE"})(ya||(ya={}));const iA=void 0;function $d(n){if(n===null)return"null";if(n===iA)return"undefined";switch(typeof n){case"number":return`${n}`;case"bigint":return`${n}`;case"string":return`"${n}"`}return typeof n[Symbol.toPrimitive]=="function"?n[Symbol.toPrimitive]("string"):ArrayBuffer.isView(n)?n instanceof Zd||n instanceof eh?`[${[...n].map(e=>$d(e))}]`:`[${n}]`:ArrayBuffer.isView(n)?`[${n}]`:JSON.stringify(n,(e,t)=>typeof t=="bigint"?`${t}`:t)}const nA=Symbol.for("isArrowBigNum");function ss(n,...e){return e.length===0?Object.setPrototypeOf(ii(this.TypedArray,n),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(n,...e),this.constructor.prototype)}ss.prototype[nA]=!0;ss.prototype.toJSON=function(){return`"${El(this)}"`};ss.prototype.valueOf=function(){return Ox(this)};ss.prototype.toString=function(){return El(this)};ss.prototype[Symbol.toPrimitive]=function(n="default"){switch(n){case"number":return Ox(this);case"string":return El(this);case"default":return d0(this)}return El(this)};function qu(...n){return ss.apply(this,n)}function Wu(...n){return ss.apply(this,n)}function zd(...n){return ss.apply(this,n)}Object.setPrototypeOf(qu.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Wu.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(zd.prototype,Object.create(Uint32Array.prototype));Object.assign(qu.prototype,ss.prototype,{constructor:qu,signed:!0,TypedArray:Int32Array,BigIntArray:Zd});Object.assign(Wu.prototype,ss.prototype,{constructor:Wu,signed:!1,TypedArray:Uint32Array,BigIntArray:eh});Object.assign(zd.prototype,ss.prototype,{constructor:zd,signed:!0,TypedArray:Uint32Array,BigIntArray:eh});function Ox(n){const{buffer:e,byteOffset:t,length:i,signed:r}=n,s=new eh(e,t,i),o=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let u=BigInt(o?1:0),c=BigInt(0);if(o){for(const h of s)u+=~h*(BigInt(1)<<BigInt(32)*c++);u*=BigInt(-1)}else for(const h of s)u+=h*(BigInt(1)<<BigInt(32)*c++);return u}let El,d0;$3?(d0=n=>n.byteLength===8?new n.BigIntArray(n.buffer,n.byteOffset,1)[0]:my(n),El=n=>n.byteLength===8?`${new n.BigIntArray(n.buffer,n.byteOffset,1)[0]}`:my(n)):(El=my,d0=El);function my(n){let e="";const t=new Uint32Array(2);let i=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const o=i.length-1;do{for(t[0]=i[s=0];s<o;)i[s++]=t[1]=t[0]/10,t[0]=(t[0]-t[1]*10<<16)+i[s];i[s]=t[1]=t[0]/10,t[0]=t[0]-t[1]*10,e=`${t[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e??"0"}class t1{static new(e,t){switch(t){case!0:return new qu(e);case!1:return new Wu(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case Zd:return new qu(e)}return e.byteLength===16?new zd(e):new Wu(e)}static signed(e){return new qu(e)}static unsigned(e){return new Wu(e)}static decimal(e){return new zd(e)}constructor(e,t){return t1.new(e,t)}}var Rx,Lx,Nx,Fx,Bx,jx,Ux,$x,zx,Vx,Hx,qx,Wx,Gx,Kx,Xx,Yx,Qx,Jx;class dt{static isNull(e){return(e==null?void 0:e.typeId)===ge.Null}static isInt(e){return(e==null?void 0:e.typeId)===ge.Int}static isFloat(e){return(e==null?void 0:e.typeId)===ge.Float}static isBinary(e){return(e==null?void 0:e.typeId)===ge.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===ge.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===ge.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===ge.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===ge.Date}static isTime(e){return(e==null?void 0:e.typeId)===ge.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===ge.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===ge.Interval}static isList(e){return(e==null?void 0:e.typeId)===ge.List}static isStruct(e){return(e==null?void 0:e.typeId)===ge.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===ge.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===ge.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===ge.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===ge.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===ge.Dictionary}static isDenseUnion(e){return dt.isUnion(e)&&e.mode===gr.Dense}static isSparseUnion(e){return dt.isUnion(e)&&e.mode===gr.Sparse}get typeId(){return ge.NONE}}Rx=Symbol.toStringTag;dt[Rx]=(n=>(n.children=null,n.ArrayType=Array,n[Symbol.toStringTag]="DataType"))(dt.prototype);let xo=class extends dt{toString(){return"Null"}get typeId(){return ge.Null}};Lx=Symbol.toStringTag;xo[Lx]=(n=>n[Symbol.toStringTag]="Null")(xo.prototype);class So extends dt{constructor(e,t){super(),this.isSigned=e,this.bitWidth=t}get typeId(){return ge.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Zd:eh}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Nx=Symbol.toStringTag;So[Nx]=(n=>(n.isSigned=null,n.bitWidth=null,n[Symbol.toStringTag]="Int"))(So.prototype);class Vd extends So{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Vd.prototype,"ArrayType",{value:Int32Array});class Hd extends dt{constructor(e){super(),this.precision=e}get typeId(){return ge.Float}get ArrayType(){switch(this.precision){case Hn.HALF:return Uint16Array;case Hn.SINGLE:return Float32Array;case Hn.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Fx=Symbol.toStringTag;Hd[Fx]=(n=>(n.precision=null,n[Symbol.toStringTag]="Float"))(Hd.prototype);let sp=class extends dt{constructor(){super()}get typeId(){return ge.Binary}toString(){return"Binary"}};Bx=Symbol.toStringTag;sp[Bx]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Binary"))(sp.prototype);let ap=class extends dt{constructor(){super()}get typeId(){return ge.Utf8}toString(){return"Utf8"}};jx=Symbol.toStringTag;ap[jx]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Utf8"))(ap.prototype);let op=class extends dt{constructor(){super()}get typeId(){return ge.Bool}toString(){return"Bool"}};Ux=Symbol.toStringTag;op[Ux]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Bool"))(op.prototype);let lp=class extends dt{constructor(e,t,i=128){super(),this.scale=e,this.precision=t,this.bitWidth=i}get typeId(){return ge.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};$x=Symbol.toStringTag;lp[$x]=(n=>(n.scale=null,n.precision=null,n.ArrayType=Uint32Array,n[Symbol.toStringTag]="Decimal"))(lp.prototype);class up extends dt{constructor(e){super(),this.unit=e}get typeId(){return ge.Date}toString(){return`Date${(this.unit+1)*32}<${Aa[this.unit]}>`}}zx=Symbol.toStringTag;up[zx]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Date"))(up.prototype);class qd extends dt{constructor(e,t){super(),this.unit=e,this.bitWidth=t}get typeId(){return ge.Time}toString(){return`Time${this.bitWidth}<${Ut[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Zd}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Vx=Symbol.toStringTag;qd[Vx]=(n=>(n.unit=null,n.bitWidth=null,n[Symbol.toStringTag]="Time"))(qd.prototype);class cp extends dt{constructor(e,t){super(),this.unit=e,this.timezone=t}get typeId(){return ge.Timestamp}toString(){return`Timestamp<${Ut[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Hx=Symbol.toStringTag;cp[Hx]=(n=>(n.unit=null,n.timezone=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Timestamp"))(cp.prototype);class dp extends dt{constructor(e){super(),this.unit=e}get typeId(){return ge.Interval}toString(){return`Interval<${bo[this.unit]}>`}}qx=Symbol.toStringTag;dp[qx]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Interval"))(dp.prototype);let hp=class extends dt{constructor(e){super(),this.children=[e]}get typeId(){return ge.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Wx=Symbol.toStringTag;hp[Wx]=(n=>(n.children=null,n[Symbol.toStringTag]="List"))(hp.prototype);class _n extends dt{constructor(e){super(),this.children=e}get typeId(){return ge.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Gx=Symbol.toStringTag;_n[Gx]=(n=>(n.children=null,n[Symbol.toStringTag]="Struct"))(_n.prototype);class fp extends dt{constructor(e,t,i){super(),this.mode=e,this.children=i,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce((r,s,o)=>(r[s]=o)&&r||r,Object.create(null))}get typeId(){return ge.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}Kx=Symbol.toStringTag;fp[Kx]=(n=>(n.mode=null,n.typeIds=null,n.children=null,n.typeIdToChildIndex=null,n.ArrayType=Int8Array,n[Symbol.toStringTag]="Union"))(fp.prototype);let pp=class extends dt{constructor(e){super(),this.byteWidth=e}get typeId(){return ge.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Xx=Symbol.toStringTag;pp[Xx]=(n=>(n.byteWidth=null,n.ArrayType=Uint8Array,n[Symbol.toStringTag]="FixedSizeBinary"))(pp.prototype);let gp=class extends dt{constructor(e,t){super(),this.listSize=e,this.children=[t]}get typeId(){return ge.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Yx=Symbol.toStringTag;gp[Yx]=(n=>(n.children=null,n.listSize=null,n[Symbol.toStringTag]="FixedSizeList"))(gp.prototype);class mp extends dt{constructor(e,t=!1){super(),this.children=[e],this.keysSorted=t}get typeId(){return ge.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Qx=Symbol.toStringTag;mp[Qx]=(n=>(n.children=null,n.keysSorted=null,n[Symbol.toStringTag]="Map_"))(mp.prototype);const rA=(n=>()=>++n)(-1);class ac extends dt{constructor(e,t,i,r){super(),this.indices=t,this.dictionary=e,this.isOrdered=r||!1,this.id=i==null?rA():typeof i=="number"?i:i.low}get typeId(){return ge.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Jx=Symbol.toStringTag;ac[Jx]=(n=>(n.id=null,n.indices=null,n.isOrdered=null,n.dictionary=null,n[Symbol.toStringTag]="Dictionary"))(ac.prototype);function va(n){const e=n;switch(n.typeId){case ge.Decimal:return n.bitWidth/32;case ge.Timestamp:return 2;case ge.Date:return 1+e.unit;case ge.Interval:return 1+e.unit;case ge.FixedSizeList:return e.listSize;case ge.FixedSizeBinary:return e.byteWidth;default:return 1}}class Ot{visitMany(e,...t){return e.map((i,r)=>this.visit(i,...t.map(s=>s[r])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,t=!0){return sA(this,e,t)}getVisitFnByTypeId(e,t=!0){return Fu(this,e,t)}visitNull(e,...t){return null}visitBool(e,...t){return null}visitInt(e,...t){return null}visitFloat(e,...t){return null}visitUtf8(e,...t){return null}visitBinary(e,...t){return null}visitFixedSizeBinary(e,...t){return null}visitDate(e,...t){return null}visitTimestamp(e,...t){return null}visitTime(e,...t){return null}visitDecimal(e,...t){return null}visitList(e,...t){return null}visitStruct(e,...t){return null}visitUnion(e,...t){return null}visitDictionary(e,...t){return null}visitInterval(e,...t){return null}visitFixedSizeList(e,...t){return null}visitMap(e,...t){return null}}function sA(n,e,t=!0){return typeof e=="number"?Fu(n,e,t):typeof e=="string"&&e in ge?Fu(n,ge[e],t):e&&e instanceof dt?Fu(n,r_(e),t):e!=null&&e.type&&e.type instanceof dt?Fu(n,r_(e.type),t):Fu(n,ge.NONE,t)}function Fu(n,e,t=!0){let i=null;switch(e){case ge.Null:i=n.visitNull;break;case ge.Bool:i=n.visitBool;break;case ge.Int:i=n.visitInt;break;case ge.Int8:i=n.visitInt8||n.visitInt;break;case ge.Int16:i=n.visitInt16||n.visitInt;break;case ge.Int32:i=n.visitInt32||n.visitInt;break;case ge.Int64:i=n.visitInt64||n.visitInt;break;case ge.Uint8:i=n.visitUint8||n.visitInt;break;case ge.Uint16:i=n.visitUint16||n.visitInt;break;case ge.Uint32:i=n.visitUint32||n.visitInt;break;case ge.Uint64:i=n.visitUint64||n.visitInt;break;case ge.Float:i=n.visitFloat;break;case ge.Float16:i=n.visitFloat16||n.visitFloat;break;case ge.Float32:i=n.visitFloat32||n.visitFloat;break;case ge.Float64:i=n.visitFloat64||n.visitFloat;break;case ge.Utf8:i=n.visitUtf8;break;case ge.Binary:i=n.visitBinary;break;case ge.FixedSizeBinary:i=n.visitFixedSizeBinary;break;case ge.Date:i=n.visitDate;break;case ge.DateDay:i=n.visitDateDay||n.visitDate;break;case ge.DateMillisecond:i=n.visitDateMillisecond||n.visitDate;break;case ge.Timestamp:i=n.visitTimestamp;break;case ge.TimestampSecond:i=n.visitTimestampSecond||n.visitTimestamp;break;case ge.TimestampMillisecond:i=n.visitTimestampMillisecond||n.visitTimestamp;break;case ge.TimestampMicrosecond:i=n.visitTimestampMicrosecond||n.visitTimestamp;break;case ge.TimestampNanosecond:i=n.visitTimestampNanosecond||n.visitTimestamp;break;case ge.Time:i=n.visitTime;break;case ge.TimeSecond:i=n.visitTimeSecond||n.visitTime;break;case ge.TimeMillisecond:i=n.visitTimeMillisecond||n.visitTime;break;case ge.TimeMicrosecond:i=n.visitTimeMicrosecond||n.visitTime;break;case ge.TimeNanosecond:i=n.visitTimeNanosecond||n.visitTime;break;case ge.Decimal:i=n.visitDecimal;break;case ge.List:i=n.visitList;break;case ge.Struct:i=n.visitStruct;break;case ge.Union:i=n.visitUnion;break;case ge.DenseUnion:i=n.visitDenseUnion||n.visitUnion;break;case ge.SparseUnion:i=n.visitSparseUnion||n.visitUnion;break;case ge.Dictionary:i=n.visitDictionary;break;case ge.Interval:i=n.visitInterval;break;case ge.IntervalDayTime:i=n.visitIntervalDayTime||n.visitInterval;break;case ge.IntervalYearMonth:i=n.visitIntervalYearMonth||n.visitInterval;break;case ge.FixedSizeList:i=n.visitFixedSizeList;break;case ge.Map:i=n.visitMap;break}if(typeof i=="function")return i;if(!t)return()=>null;throw new Error(`Unrecognized type '${ge[e]}'`)}function r_(n){switch(n.typeId){case ge.Null:return ge.Null;case ge.Int:{const{bitWidth:e,isSigned:t}=n;switch(e){case 8:return t?ge.Int8:ge.Uint8;case 16:return t?ge.Int16:ge.Uint16;case 32:return t?ge.Int32:ge.Uint32;case 64:return t?ge.Int64:ge.Uint64}return ge.Int}case ge.Float:switch(n.precision){case Hn.HALF:return ge.Float16;case Hn.SINGLE:return ge.Float32;case Hn.DOUBLE:return ge.Float64}return ge.Float;case ge.Binary:return ge.Binary;case ge.Utf8:return ge.Utf8;case ge.Bool:return ge.Bool;case ge.Decimal:return ge.Decimal;case ge.Time:switch(n.unit){case Ut.SECOND:return ge.TimeSecond;case Ut.MILLISECOND:return ge.TimeMillisecond;case Ut.MICROSECOND:return ge.TimeMicrosecond;case Ut.NANOSECOND:return ge.TimeNanosecond}return ge.Time;case ge.Timestamp:switch(n.unit){case Ut.SECOND:return ge.TimestampSecond;case Ut.MILLISECOND:return ge.TimestampMillisecond;case Ut.MICROSECOND:return ge.TimestampMicrosecond;case Ut.NANOSECOND:return ge.TimestampNanosecond}return ge.Timestamp;case ge.Date:switch(n.unit){case Aa.DAY:return ge.DateDay;case Aa.MILLISECOND:return ge.DateMillisecond}return ge.Date;case ge.Interval:switch(n.unit){case bo.DAY_TIME:return ge.IntervalDayTime;case bo.YEAR_MONTH:return ge.IntervalYearMonth}return ge.Interval;case ge.Map:return ge.Map;case ge.List:return ge.List;case ge.Struct:return ge.Struct;case ge.Union:switch(n.mode){case gr.Dense:return ge.DenseUnion;case gr.Sparse:return ge.SparseUnion}return ge.Union;case ge.FixedSizeBinary:return ge.FixedSizeBinary;case ge.FixedSizeList:return ge.FixedSizeList;case ge.Dictionary:return ge.Dictionary}throw new Error(`Unrecognized type '${ge[n.typeId]}'`)}Ot.prototype.visitInt8=null;Ot.prototype.visitInt16=null;Ot.prototype.visitInt32=null;Ot.prototype.visitInt64=null;Ot.prototype.visitUint8=null;Ot.prototype.visitUint16=null;Ot.prototype.visitUint32=null;Ot.prototype.visitUint64=null;Ot.prototype.visitFloat16=null;Ot.prototype.visitFloat32=null;Ot.prototype.visitFloat64=null;Ot.prototype.visitDateDay=null;Ot.prototype.visitDateMillisecond=null;Ot.prototype.visitTimestampSecond=null;Ot.prototype.visitTimestampMillisecond=null;Ot.prototype.visitTimestampMicrosecond=null;Ot.prototype.visitTimestampNanosecond=null;Ot.prototype.visitTimeSecond=null;Ot.prototype.visitTimeMillisecond=null;Ot.prototype.visitTimeMicrosecond=null;Ot.prototype.visitTimeNanosecond=null;Ot.prototype.visitDenseUnion=null;Ot.prototype.visitSparseUnion=null;Ot.prototype.visitIntervalDayTime=null;Ot.prototype.visitIntervalYearMonth=null;const Zx=new Float64Array(1),Au=new Uint32Array(Zx.buffer);function eS(n){const e=(n&31744)>>10,t=(n&1023)/1024,i=Math.pow(-1,(n&32768)>>15);switch(e){case 31:return i*(t?Number.NaN:1/0);case 0:return i*(t?6103515625e-14*t:0)}return i*Math.pow(2,e-15)*(1+t)}function aA(n){if(n!==n)return 32256;Zx[0]=n;const e=(Au[1]&2147483648)>>16&65535;let t=Au[1]&2146435072,i=0;return t>=1089470464?Au[0]>0?t=31744:(t=(t&2080374784)>>16,i=(Au[1]&1048575)>>10):t<=1056964608?(i=1048576+(Au[1]&1048575),i=1048576+(i<<(t>>20)-998)>>21,t=0):(t=t-1056964608>>10,i=(Au[1]&1048575)+512>>10),e|t|i&65535}class vt extends Ot{}function St(n){return(e,t,i)=>{if(e.setValid(t,i!=null))return n(e,t,i)}}const oA=(n,e,t)=>{n[e]=Math.trunc(t/864e5)},i1=(n,e,t)=>{n[e]=Math.trunc(t%4294967296),n[e+1]=Math.trunc(t/4294967296)},lA=(n,e,t)=>{n[e]=Math.trunc(t*1e3%4294967296),n[e+1]=Math.trunc(t*1e3/4294967296)},uA=(n,e,t)=>{n[e]=Math.trunc(t*1e6%4294967296),n[e+1]=Math.trunc(t*1e6/4294967296)},tS=(n,e,t,i)=>{if(t+1<e.length){const{[t]:r,[t+1]:s}=e;n.set(i.subarray(0,s-r),r)}},cA=({offset:n,values:e},t,i)=>{const r=n+t;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)},Ia=({values:n},e,t)=>{n[e]=t},n1=({values:n},e,t)=>{n[e]=t},iS=({values:n},e,t)=>{n[e]=aA(t)},dA=(n,e,t)=>{switch(n.type.precision){case Hn.HALF:return iS(n,e,t);case Hn.SINGLE:case Hn.DOUBLE:return n1(n,e,t)}},nS=({values:n},e,t)=>{oA(n,e,t.valueOf())},rS=({values:n},e,t)=>{i1(n,e*2,t.valueOf())},hA=({stride:n,values:e},t,i)=>{e.set(i.subarray(0,n),n*t)},fA=({values:n,valueOffsets:e},t,i)=>tS(n,e,t,i),pA=({values:n,valueOffsets:e},t,i)=>{tS(n,e,t,Q0(i))},gA=(n,e,t)=>{n.type.unit===Aa.DAY?nS(n,e,t):rS(n,e,t)},sS=({values:n},e,t)=>i1(n,e*2,t/1e3),aS=({values:n},e,t)=>i1(n,e*2,t),oS=({values:n},e,t)=>lA(n,e*2,t),lS=({values:n},e,t)=>uA(n,e*2,t),mA=(n,e,t)=>{switch(n.type.unit){case Ut.SECOND:return sS(n,e,t);case Ut.MILLISECOND:return aS(n,e,t);case Ut.MICROSECOND:return oS(n,e,t);case Ut.NANOSECOND:return lS(n,e,t)}},uS=({values:n},e,t)=>{n[e]=t},cS=({values:n},e,t)=>{n[e]=t},dS=({values:n},e,t)=>{n[e]=t},hS=({values:n},e,t)=>{n[e]=t},yA=(n,e,t)=>{switch(n.type.unit){case Ut.SECOND:return uS(n,e,t);case Ut.MILLISECOND:return cS(n,e,t);case Ut.MICROSECOND:return dS(n,e,t);case Ut.NANOSECOND:return hS(n,e,t)}},vA=({values:n,stride:e},t,i)=>{n.set(i.subarray(0,e),e*t)},_A=(n,e,t)=>{const i=n.children[0],r=n.valueOffsets,s=Fr.getVisitFn(i);if(Array.isArray(t))for(let o=-1,u=r[e],c=r[e+1];u<c;)s(i,u++,t[++o]);else for(let o=-1,u=r[e],c=r[e+1];u<c;)s(i,u++,t.get(++o))},bA=(n,e,t)=>{const i=n.children[0],{valueOffsets:r}=n,s=Fr.getVisitFn(i);let{[e]:o,[e+1]:u}=r;const c=t instanceof Map?t.entries():Object.entries(t);for(const h of c)if(s(i,o,h),++o>=u)break},xA=(n,e)=>(t,i,r,s)=>i&&t(i,n,e[s]),SA=(n,e)=>(t,i,r,s)=>i&&t(i,n,e.get(s)),TA=(n,e)=>(t,i,r,s)=>i&&t(i,n,e.get(r.name)),CA=(n,e)=>(t,i,r,s)=>i&&t(i,n,e[r.name]),wA=(n,e,t)=>{const i=n.type.children.map(s=>Fr.getVisitFn(s.type)),r=t instanceof Map?TA(e,t):t instanceof Wt?SA(e,t):Array.isArray(t)?xA(e,t):CA(e,t);n.type.children.forEach((s,o)=>r(i[o],n.children[o],s,o))},EA=(n,e,t)=>{n.type.mode===gr.Dense?fS(n,e,t):pS(n,e,t)},fS=(n,e,t)=>{const i=n.type.typeIdToChildIndex[n.typeIds[e]],r=n.children[i];Fr.visit(r,n.valueOffsets[e],t)},pS=(n,e,t)=>{const i=n.type.typeIdToChildIndex[n.typeIds[e]],r=n.children[i];Fr.visit(r,e,t)},AA=(n,e,t)=>{var i;(i=n.dictionary)===null||i===void 0||i.set(n.values[e],t)},DA=(n,e,t)=>{n.type.unit===bo.DAY_TIME?gS(n,e,t):mS(n,e,t)},gS=({values:n},e,t)=>{n.set(t.subarray(0,2),2*e)},mS=({values:n},e,t)=>{n[e]=t[0]*12+t[1]%12},IA=(n,e,t)=>{const{stride:i}=n,r=n.children[0],s=Fr.getVisitFn(r);if(Array.isArray(t))for(let o=-1,u=e*i;++o<i;)s(r,u+o,t[o]);else for(let o=-1,u=e*i;++o<i;)s(r,u+o,t.get(o))};vt.prototype.visitBool=St(cA);vt.prototype.visitInt=St(Ia);vt.prototype.visitInt8=St(Ia);vt.prototype.visitInt16=St(Ia);vt.prototype.visitInt32=St(Ia);vt.prototype.visitInt64=St(Ia);vt.prototype.visitUint8=St(Ia);vt.prototype.visitUint16=St(Ia);vt.prototype.visitUint32=St(Ia);vt.prototype.visitUint64=St(Ia);vt.prototype.visitFloat=St(dA);vt.prototype.visitFloat16=St(iS);vt.prototype.visitFloat32=St(n1);vt.prototype.visitFloat64=St(n1);vt.prototype.visitUtf8=St(pA);vt.prototype.visitBinary=St(fA);vt.prototype.visitFixedSizeBinary=St(hA);vt.prototype.visitDate=St(gA);vt.prototype.visitDateDay=St(nS);vt.prototype.visitDateMillisecond=St(rS);vt.prototype.visitTimestamp=St(mA);vt.prototype.visitTimestampSecond=St(sS);vt.prototype.visitTimestampMillisecond=St(aS);vt.prototype.visitTimestampMicrosecond=St(oS);vt.prototype.visitTimestampNanosecond=St(lS);vt.prototype.visitTime=St(yA);vt.prototype.visitTimeSecond=St(uS);vt.prototype.visitTimeMillisecond=St(cS);vt.prototype.visitTimeMicrosecond=St(dS);vt.prototype.visitTimeNanosecond=St(hS);vt.prototype.visitDecimal=St(vA);vt.prototype.visitList=St(_A);vt.prototype.visitStruct=St(wA);vt.prototype.visitUnion=St(EA);vt.prototype.visitDenseUnion=St(fS);vt.prototype.visitSparseUnion=St(pS);vt.prototype.visitDictionary=St(AA);vt.prototype.visitInterval=St(DA);vt.prototype.visitIntervalDayTime=St(gS);vt.prototype.visitIntervalYearMonth=St(mS);vt.prototype.visitFixedSizeList=St(IA);vt.prototype.visitMap=St(bA);const Fr=new vt,es=Symbol.for("parent"),Gu=Symbol.for("rowIndex");class r1{constructor(e,t){return this[es]=e,this[Gu]=t,new Proxy(this,new MA)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Gu],t=this[es],i=t.type.children,r={};for(let s=-1,o=i.length;++s<o;)r[i[s].name]=Gn.visit(t.children[s],e);return r}toString(){return`{${[...this].map(([e,t])=>`${$d(e)}: ${$d(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new kA(this[es],this[Gu])}}class kA{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Gn.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(r1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[es]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Gu]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class MA{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[es].type.children.map(t=>t.name)}has(e,t){return e[es].type.children.findIndex(i=>i.name===t)!==-1}getOwnPropertyDescriptor(e,t){if(e[es].type.children.findIndex(i=>i.name===t)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const i=e[es].type.children.findIndex(r=>r.name===t);if(i!==-1){const r=Gn.visit(e[es].children[i],e[Gu]);return Reflect.set(e,t,r),r}}set(e,t,i){const r=e[es].type.children.findIndex(s=>s.name===t);return r!==-1?(Fr.visit(e[es].children[r],e[Gu],i),Reflect.set(e,t,i)):Reflect.has(e,t)||typeof t=="symbol"?Reflect.set(e,t,i):!1}}class ht extends Ot{}function _t(n){return(e,t)=>e.getValid(t)?n(e,t):null}const PA=(n,e)=>864e5*n[e],s1=(n,e)=>4294967296*n[e+1]+(n[e]>>>0),OA=(n,e)=>4294967296*(n[e+1]/1e3)+(n[e]>>>0)/1e3,RA=(n,e)=>4294967296*(n[e+1]/1e6)+(n[e]>>>0)/1e6,yS=n=>new Date(n),LA=(n,e)=>yS(PA(n,e)),NA=(n,e)=>yS(s1(n,e)),FA=(n,e)=>null,vS=(n,e,t)=>{if(t+1>=e.length)return null;const i=e[t],r=e[t+1];return n.subarray(i,r)},BA=({offset:n,values:e},t)=>{const i=n+t;return(e[i>>3]&1<<i%8)!==0},_S=({values:n},e)=>LA(n,e),bS=({values:n},e)=>NA(n,e*2),Ao=({stride:n,values:e},t)=>e[n*t],jA=({stride:n,values:e},t)=>eS(e[n*t]),xS=({values:n},e)=>n[e],UA=({stride:n,values:e},t)=>e.subarray(n*t,n*(t+1)),$A=({values:n,valueOffsets:e},t)=>vS(n,e,t),zA=({values:n,valueOffsets:e},t)=>{const i=vS(n,e,t);return i!==null?l0(i):null},VA=({values:n},e)=>n[e],HA=({type:n,values:e},t)=>n.precision!==Hn.HALF?e[t]:eS(e[t]),qA=(n,e)=>n.type.unit===Aa.DAY?_S(n,e):bS(n,e),SS=({values:n},e)=>1e3*s1(n,e*2),TS=({values:n},e)=>s1(n,e*2),CS=({values:n},e)=>OA(n,e*2),wS=({values:n},e)=>RA(n,e*2),WA=(n,e)=>{switch(n.type.unit){case Ut.SECOND:return SS(n,e);case Ut.MILLISECOND:return TS(n,e);case Ut.MICROSECOND:return CS(n,e);case Ut.NANOSECOND:return wS(n,e)}},ES=({values:n},e)=>n[e],AS=({values:n},e)=>n[e],DS=({values:n},e)=>n[e],IS=({values:n},e)=>n[e],GA=(n,e)=>{switch(n.type.unit){case Ut.SECOND:return ES(n,e);case Ut.MILLISECOND:return AS(n,e);case Ut.MICROSECOND:return DS(n,e);case Ut.NANOSECOND:return IS(n,e)}},KA=({values:n,stride:e},t)=>t1.decimal(n.subarray(e*t,e*(t+1))),XA=(n,e)=>{const{valueOffsets:t,stride:i,children:r}=n,{[e*i]:s,[e*i+1]:o}=t,c=r[0].slice(s,o-s);return new Wt([c])},YA=(n,e)=>{const{valueOffsets:t,children:i}=n,{[e]:r,[e+1]:s}=t,o=i[0];return new a1(o.slice(r,s-r))},QA=(n,e)=>new r1(n,e),JA=(n,e)=>n.type.mode===gr.Dense?kS(n,e):MS(n,e),kS=(n,e)=>{const t=n.type.typeIdToChildIndex[n.typeIds[e]],i=n.children[t];return Gn.visit(i,n.valueOffsets[e])},MS=(n,e)=>{const t=n.type.typeIdToChildIndex[n.typeIds[e]],i=n.children[t];return Gn.visit(i,e)},ZA=(n,e)=>{var t;return(t=n.dictionary)===null||t===void 0?void 0:t.get(n.values[e])},e4=(n,e)=>n.type.unit===bo.DAY_TIME?PS(n,e):OS(n,e),PS=({values:n},e)=>n.subarray(2*e,2*(e+1)),OS=({values:n},e)=>{const t=n[e],i=new Int32Array(2);return i[0]=Math.trunc(t/12),i[1]=Math.trunc(t%12),i},t4=(n,e)=>{const{stride:t,children:i}=n,s=i[0].slice(e*t,t);return new Wt([s])};ht.prototype.visitNull=_t(FA);ht.prototype.visitBool=_t(BA);ht.prototype.visitInt=_t(VA);ht.prototype.visitInt8=_t(Ao);ht.prototype.visitInt16=_t(Ao);ht.prototype.visitInt32=_t(Ao);ht.prototype.visitInt64=_t(xS);ht.prototype.visitUint8=_t(Ao);ht.prototype.visitUint16=_t(Ao);ht.prototype.visitUint32=_t(Ao);ht.prototype.visitUint64=_t(xS);ht.prototype.visitFloat=_t(HA);ht.prototype.visitFloat16=_t(jA);ht.prototype.visitFloat32=_t(Ao);ht.prototype.visitFloat64=_t(Ao);ht.prototype.visitUtf8=_t(zA);ht.prototype.visitBinary=_t($A);ht.prototype.visitFixedSizeBinary=_t(UA);ht.prototype.visitDate=_t(qA);ht.prototype.visitDateDay=_t(_S);ht.prototype.visitDateMillisecond=_t(bS);ht.prototype.visitTimestamp=_t(WA);ht.prototype.visitTimestampSecond=_t(SS);ht.prototype.visitTimestampMillisecond=_t(TS);ht.prototype.visitTimestampMicrosecond=_t(CS);ht.prototype.visitTimestampNanosecond=_t(wS);ht.prototype.visitTime=_t(GA);ht.prototype.visitTimeSecond=_t(ES);ht.prototype.visitTimeMillisecond=_t(AS);ht.prototype.visitTimeMicrosecond=_t(DS);ht.prototype.visitTimeNanosecond=_t(IS);ht.prototype.visitDecimal=_t(KA);ht.prototype.visitList=_t(XA);ht.prototype.visitStruct=_t(QA);ht.prototype.visitUnion=_t(JA);ht.prototype.visitDenseUnion=_t(kS);ht.prototype.visitSparseUnion=_t(MS);ht.prototype.visitDictionary=_t(ZA);ht.prototype.visitInterval=_t(e4);ht.prototype.visitIntervalDayTime=_t(PS);ht.prototype.visitIntervalYearMonth=_t(OS);ht.prototype.visitFixedSizeList=_t(t4);ht.prototype.visitMap=_t(YA);const Gn=new ht,Rs=Symbol.for("keys"),Ku=Symbol.for("vals");class a1{constructor(e){return this[Rs]=new Wt([e.children[0]]).memoize(),this[Ku]=e.children[1],new Proxy(this,new n4)}[Symbol.iterator](){return new i4(this[Rs],this[Ku])}get size(){return this[Rs].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Rs],t=this[Ku],i={};for(let r=-1,s=e.length;++r<s;)i[e.get(r)]=Gn.visit(t,r);return i}toString(){return`{${[...this].map(([e,t])=>`${$d(e)}: ${$d(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class i4{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Gn.visit(this.vals,e)]})}}class n4{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Rs].toArray().map(String)}has(e,t){return e[Rs].includes(t)}getOwnPropertyDescriptor(e,t){if(e[Rs].indexOf(t)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const i=e[Rs].indexOf(t);if(i!==-1){const r=Gn.visit(Reflect.get(e,Ku),i);return Reflect.set(e,t,r),r}}set(e,t,i){const r=e[Rs].indexOf(t);return r!==-1?(Fr.visit(Reflect.get(e,Ku),r,i),Reflect.set(e,t,i)):Reflect.has(e,t)?Reflect.set(e,t,i):!1}}Object.defineProperties(a1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Rs]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ku]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let s_;function RS(n,e,t,i){const{length:r=0}=n;let s=typeof e!="number"?0:e,o=typeof t!="number"?r:t;return s<0&&(s=(s%r+r)%r),o<0&&(o=(o%r+r)%r),o<s&&(s_=s,s=o,o=s_),o>r&&(o=r),i?i(n,s,o):[s,o]}const a_=n=>n!==n;function Cc(n){if(typeof n!=="object"||n===null)return a_(n)?a_:t=>t===n;if(n instanceof Date){const t=n.valueOf();return i=>i instanceof Date?i.valueOf()===t:!1}return ArrayBuffer.isView(n)?t=>t?Y3(n,t):!1:n instanceof Map?s4(n):Array.isArray(n)?r4(n):n instanceof Wt?a4(n):o4(n,!0)}function r4(n){const e=[];for(let t=-1,i=n.length;++t<i;)e[t]=Cc(n[t]);return tg(e)}function s4(n){let e=-1;const t=[];for(const i of n.values())t[++e]=Cc(i);return tg(t)}function a4(n){const e=[];for(let t=-1,i=n.length;++t<i;)e[t]=Cc(n.get(t));return tg(e)}function o4(n,e=!1){const t=Object.keys(n);if(!e&&t.length===0)return()=>!1;const i=[];for(let r=-1,s=t.length;++r<s;)i[r]=Cc(n[t[r]]);return tg(i,t)}function tg(n,e){return t=>{if(!t||typeof t!="object")return!1;switch(t.constructor){case Array:return l4(n,t);case Map:return o_(n,t,t.keys());case a1:case r1:case Object:case void 0:return o_(n,t,e||Object.keys(t))}return t instanceof Wt?u4(n,t):!1}}function l4(n,e){const t=n.length;if(e.length!==t)return!1;for(let i=-1;++i<t;)if(!n[i](e[i]))return!1;return!0}function u4(n,e){const t=n.length;if(e.length!==t)return!1;for(let i=-1;++i<t;)if(!n[i](e.get(i)))return!1;return!0}function o_(n,e,t){const i=t[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0;const u=n.length;let c=s.next(),h=i.next(),f=r.next();for(;o<u&&!h.done&&!f.done&&!c.done&&!(h.value!==f.value||!n[o](c.value));++o,h=i.next(),f=r.next(),c=s.next());return o===u&&h.done&&f.done&&c.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function LS(n,e,t,i){return(t&1<<i)!==0}function c4(n,e,t,i){return(t&1<<i)>>i}function o1(n,e,t){const i=t.byteLength+7&-8;if(n>0||t.byteLength<i){const r=new Uint8Array(i);return r.set(n%8===0?t.subarray(n>>3):yp(new l1(t,n,e,null,LS)).subarray(0,i)),r}return t}function yp(n){const e=[];let t=0,i=0,r=0;for(const o of n)o&&(r|=1<<i),++i===8&&(e[t++]=r,r=i=0);(t===0||i>0)&&(e[t++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class l1{constructor(e,t,i,r,s){this.bytes=e,this.length=i,this.context=r,this.get=s,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function h0(n,e,t){if(t-e<=0)return 0;if(t-e<8){let s=0;for(const o of new l1(n,e,t-e,n,c4))s+=o;return s}const i=t>>3<<3,r=e+(e%8===0?0:8-e%8);return h0(n,e,r)+h0(n,i,t)+d4(n,r>>3,i-r>>3)}function d4(n,e,t){let i=0,r=Math.trunc(e);const s=new DataView(n.buffer,n.byteOffset,n.byteLength),o=t===void 0?n.byteLength:r+t;for(;o-r>=4;)i+=yy(s.getUint32(r)),r+=4;for(;o-r>=2;)i+=yy(s.getUint16(r)),r+=2;for(;o-r>=1;)i+=yy(s.getUint8(r)),r+=1;return i}function yy(n){let e=Math.trunc(n);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const h4=-1;class ai{constructor(e,t,i,r,s,o=[],u){this.type=e,this.children=o,this.dictionary=u,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let c;s instanceof ai?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=va(e),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:t,values:i,nullBitmap:r,typeIds:s}=this;return t&&(e+=t.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),this.children.reduce((o,u)=>o+u.byteLength,e)}get nullCount(){let e=this._nullCount,t;return e<=h4&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-h0(t,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const t=this.offset+e;return(this.nullBitmap[t>>3]&1<<t%8)!==0}return!0}setValid(e,t){if(!this.nullable)return t;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:c}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:c,_nullCount:0})}const{nullBitmap:i,offset:r}=this,s=r+e>>3,o=(r+e)%8,u=i[s]>>o&1;return t?u===0&&(i[s]|=1<<o,this._nullCount=this.nullCount+1):u===1&&(i[s]&=~(1<<o),this._nullCount=this.nullCount-1),t}clone(e=this.type,t=this.offset,i=this.length,r=this._nullCount,s=this,o=this.children){return new ai(e,t,i,r,s,o,this.dictionary)}slice(e,t){const{stride:i,typeId:r,children:s}=this,o=+(this._nullCount===0)-1,u=r===16?i:1,c=this._sliceBuffers(e,t,i,r);return this.clone(this.type,this.offset+e,t,o,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,u*e,u*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===ge.Null)return this.clone(this.type,0,e,0);const{length:t,nullCount:i}=this,r=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);r[t>>3]=(1<<t-(t&-8))-1,i>0&&r.set(o1(this.offset,t,this.nullBitmap),0);const s=this.buffers;return s[ya.VALIDITY]=r,this.clone(this.type,0,e,i+(e-t),s)}_sliceBuffers(e,t,i,r){let s;const{buffers:o}=this;return(s=o[ya.TYPE])&&(o[ya.TYPE]=s.subarray(e,e+t)),(s=o[ya.OFFSET])&&(o[ya.OFFSET]=s.subarray(e,e+t+1))||(s=o[ya.DATA])&&(o[ya.DATA]=r===6?s:s.subarray(i*e,i*(e+t))),o}_sliceChildren(e,t,i){return e.map(r=>r.slice(t,i))}}ai.prototype.children=Object.freeze([]);class Pd extends Ot{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:t,["offset"]:i=0,["length"]:r=0}=e;return new ai(t,i,r,0)}visitBool(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.ArrayType,e.data),{["length"]:o=s.length>>3,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,s,r])}visitInt(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,s,r])}visitFloat(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,s,r])}visitUtf8(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.data),s=jt(e.nullBitmap),o=md(e.valueOffsets),{["length"]:u=o.length-1,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ai(t,i,u,c,[o,r,s])}visitBinary(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.data),s=jt(e.nullBitmap),o=md(e.valueOffsets),{["length"]:u=o.length-1,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ai(t,i,u,c,[o,r,s])}visitFixedSizeBinary(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.ArrayType,e.data),{["length"]:o=s.length/va(t),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,s,r])}visitDate(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.ArrayType,e.data),{["length"]:o=s.length/va(t),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,s,r])}visitTimestamp(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.ArrayType,e.data),{["length"]:o=s.length/va(t),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,s,r])}visitTime(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.ArrayType,e.data),{["length"]:o=s.length/va(t),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,s,r])}visitDecimal(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.ArrayType,e.data),{["length"]:o=s.length/va(t),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,s,r])}visitList(e){const{["type"]:t,["offset"]:i=0,["child"]:r}=e,s=jt(e.nullBitmap),o=md(e.valueOffsets),{["length"]:u=o.length-1,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ai(t,i,u,c,[o,void 0,s],[r])}visitStruct(e){const{["type"]:t,["offset"]:i=0,["children"]:r=[]}=e,s=jt(e.nullBitmap),{length:o=r.reduce((c,{length:h})=>Math.max(c,h),0),nullCount:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,void 0,s],r)}visitUnion(e){const{["type"]:t,["offset"]:i=0,["children"]:r=[]}=e,s=jt(e.nullBitmap),o=ii(t.ArrayType,e.typeIds),{["length"]:u=o.length,["nullCount"]:c=e.nullBitmap?-1:0}=e;if(dt.isSparseUnion(t))return new ai(t,i,u,c,[void 0,void 0,s,o],r);const h=md(e.valueOffsets);return new ai(t,i,u,c,[h,void 0,s,o],r)}visitDictionary(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.indices.ArrayType,e.data),{["dictionary"]:o=new Wt([new Pd().visit({type:t.dictionary})])}=e,{["length"]:u=s.length,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ai(t,i,u,c,[void 0,s,r],[],o)}visitInterval(e){const{["type"]:t,["offset"]:i=0}=e,r=jt(e.nullBitmap),s=ii(t.ArrayType,e.data),{["length"]:o=s.length/va(t),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,s,r])}visitFixedSizeList(e){const{["type"]:t,["offset"]:i=0,["child"]:r=new Pd().visit({type:t.valueType})}=e,s=jt(e.nullBitmap),{["length"]:o=r.length/va(t),["nullCount"]:u=e.nullBitmap?-1:0}=e;return new ai(t,i,o,u,[void 0,void 0,s],[r])}visitMap(e){const{["type"]:t,["offset"]:i=0,["child"]:r=new Pd().visit({type:t.childType})}=e,s=jt(e.nullBitmap),o=md(e.valueOffsets),{["length"]:u=o.length-1,["nullCount"]:c=e.nullBitmap?-1:0}=e;return new ai(t,i,u,c,[o,void 0,s],[r])}}function Pt(n){return new Pd().visit(n)}class l_{constructor(e=0,t){this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function NS(n){return n.reduce((e,t)=>e+t.nullCount,0)}function FS(n){return n.reduce((e,t,i)=>(e[i+1]=e[i]+t.length,e),new Uint32Array(n.length+1))}function BS(n,e,t,i){const r=[];for(let s=-1,o=n.length;++s<o;){const u=n[s],c=e[s],{length:h}=u;if(c>=i)break;if(t>=c+h)continue;if(c>=t&&c+h<=i){r.push(u);continue}const f=Math.max(0,t-c),m=Math.min(i-c,h);r.push(u.slice(f,m-f))}return r.length===0&&r.push(n[0].slice(0,0)),r}function u1(n,e,t,i){let r=0,s=0,o=e.length-1;do{if(r>=o-1)return t<e[o]?i(n,r,t-e[r]):null;s=r+Math.trunc((o-r)*.5),t<e[s]?o=s:r=s}while(r<o)}function c1(n,e){return n.getValid(e)}function Xu(n){function e(t,i,r){return n(t[i],r)}return function(t){const i=this.data;return u1(i,this._offsets,t,e)}}function jS(n){let e;function t(i,r,s){return n(i[r],s,e)}return function(i,r){const s=this.data;e=r;const o=u1(s,this._offsets,i,t);return e=void 0,o}}function US(n){let e;function t(i,r,s){let o=s,u=0,c=0;for(let h=r-1,f=i.length;++h<f;){const m=i[h];if(~(u=n(m,e,o)))return c+u;o=0,c+=m.length}return-1}return function(i,r){e=i;const s=this.data,o=typeof r!="number"?t(s,0,0):u1(s,this._offsets,r,t);return e=void 0,o}}class ft extends Ot{}function f4(n,e){return e===null&&n.length>0?0:-1}function p4(n,e){const{nullBitmap:t}=n;if(!t||n.nullCount<=0)return-1;let i=0;for(const r of new l1(t,n.offset+(e||0),n.length,t,LS)){if(!r)return i;++i}return-1}function wt(n,e,t){if(e===void 0)return-1;if(e===null)return p4(n,t);const i=Gn.getVisitFn(n),r=Cc(e);for(let s=(t||0)-1,o=n.length;++s<o;)if(r(i(n,s)))return s;return-1}function $S(n,e,t){const i=Gn.getVisitFn(n),r=Cc(e);for(let s=(t||0)-1,o=n.length;++s<o;)if(r(i(n,s)))return s;return-1}ft.prototype.visitNull=f4;ft.prototype.visitBool=wt;ft.prototype.visitInt=wt;ft.prototype.visitInt8=wt;ft.prototype.visitInt16=wt;ft.prototype.visitInt32=wt;ft.prototype.visitInt64=wt;ft.prototype.visitUint8=wt;ft.prototype.visitUint16=wt;ft.prototype.visitUint32=wt;ft.prototype.visitUint64=wt;ft.prototype.visitFloat=wt;ft.prototype.visitFloat16=wt;ft.prototype.visitFloat32=wt;ft.prototype.visitFloat64=wt;ft.prototype.visitUtf8=wt;ft.prototype.visitBinary=wt;ft.prototype.visitFixedSizeBinary=wt;ft.prototype.visitDate=wt;ft.prototype.visitDateDay=wt;ft.prototype.visitDateMillisecond=wt;ft.prototype.visitTimestamp=wt;ft.prototype.visitTimestampSecond=wt;ft.prototype.visitTimestampMillisecond=wt;ft.prototype.visitTimestampMicrosecond=wt;ft.prototype.visitTimestampNanosecond=wt;ft.prototype.visitTime=wt;ft.prototype.visitTimeSecond=wt;ft.prototype.visitTimeMillisecond=wt;ft.prototype.visitTimeMicrosecond=wt;ft.prototype.visitTimeNanosecond=wt;ft.prototype.visitDecimal=wt;ft.prototype.visitList=wt;ft.prototype.visitStruct=wt;ft.prototype.visitUnion=wt;ft.prototype.visitDenseUnion=$S;ft.prototype.visitSparseUnion=$S;ft.prototype.visitDictionary=wt;ft.prototype.visitInterval=wt;ft.prototype.visitIntervalDayTime=wt;ft.prototype.visitIntervalYearMonth=wt;ft.prototype.visitFixedSizeList=wt;ft.prototype.visitMap=wt;const vp=new ft;class pt extends Ot{}function bt(n){const{type:e}=n;if(n.nullCount===0&&n.stride===1&&(e.typeId===ge.Timestamp||e instanceof So&&e.bitWidth!==64||e instanceof qd&&e.bitWidth!==64||e instanceof Hd&&e.precision!==Hn.HALF))return new l_(n.data.length,i=>{const r=n.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let t=0;return new l_(n.data.length,i=>{const s=n.data[i].length,o=n.slice(t,t+s);return t+=s,new g4(o)})}class g4{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}pt.prototype.visitNull=bt;pt.prototype.visitBool=bt;pt.prototype.visitInt=bt;pt.prototype.visitInt8=bt;pt.prototype.visitInt16=bt;pt.prototype.visitInt32=bt;pt.prototype.visitInt64=bt;pt.prototype.visitUint8=bt;pt.prototype.visitUint16=bt;pt.prototype.visitUint32=bt;pt.prototype.visitUint64=bt;pt.prototype.visitFloat=bt;pt.prototype.visitFloat16=bt;pt.prototype.visitFloat32=bt;pt.prototype.visitFloat64=bt;pt.prototype.visitUtf8=bt;pt.prototype.visitBinary=bt;pt.prototype.visitFixedSizeBinary=bt;pt.prototype.visitDate=bt;pt.prototype.visitDateDay=bt;pt.prototype.visitDateMillisecond=bt;pt.prototype.visitTimestamp=bt;pt.prototype.visitTimestampSecond=bt;pt.prototype.visitTimestampMillisecond=bt;pt.prototype.visitTimestampMicrosecond=bt;pt.prototype.visitTimestampNanosecond=bt;pt.prototype.visitTime=bt;pt.prototype.visitTimeSecond=bt;pt.prototype.visitTimeMillisecond=bt;pt.prototype.visitTimeMicrosecond=bt;pt.prototype.visitTimeNanosecond=bt;pt.prototype.visitDecimal=bt;pt.prototype.visitList=bt;pt.prototype.visitStruct=bt;pt.prototype.visitUnion=bt;pt.prototype.visitDenseUnion=bt;pt.prototype.visitSparseUnion=bt;pt.prototype.visitDictionary=bt;pt.prototype.visitInterval=bt;pt.prototype.visitIntervalDayTime=bt;pt.prototype.visitIntervalYearMonth=bt;pt.prototype.visitFixedSizeList=bt;pt.prototype.visitMap=bt;const d1=new pt,m4=(n,e)=>n+e;class Do extends Ot{visitNull(e,t){return 0}visitInt(e,t){return e.type.bitWidth/8}visitFloat(e,t){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,t){return 1/8}visitDecimal(e,t){return e.type.bitWidth/8}visitDate(e,t){return(e.type.unit+1)*4}visitTime(e,t){return e.type.bitWidth/8}visitTimestamp(e,t){return e.type.unit===Ut.SECOND?4:8}visitInterval(e,t){return(e.type.unit+1)*4}visitStruct(e,t){return e.children.reduce((i,r)=>i+Gs.visit(r,t),0)}visitFixedSizeBinary(e,t){return e.type.byteWidth}visitMap(e,t){return 8+e.children.reduce((i,r)=>i+Gs.visit(r,t),0)}visitDictionary(e,t){var i;return e.type.indices.bitWidth/8+(((i=e.dictionary)===null||i===void 0?void 0:i.getByteLength(e.values[t]))||0)}}const y4=({valueOffsets:n},e)=>8+(n[e+1]-n[e]),v4=({valueOffsets:n},e)=>8+(n[e+1]-n[e]),_4=({valueOffsets:n,stride:e,children:t},i)=>{const r=t[0],{[i*e]:s}=n,{[i*e+1]:o}=n,u=Gs.getVisitFn(r.type),c=r.slice(s,o-s);let h=8;for(let f=-1,m=o-s;++f<m;)h+=u(c,f);return h},b4=({stride:n,children:e},t)=>{const i=e[0],r=i.slice(t*n,n),s=Gs.getVisitFn(i.type);let o=0;for(let u=-1,c=r.length;++u<c;)o+=s(r,u);return o},x4=(n,e)=>n.type.mode===gr.Dense?zS(n,e):VS(n,e),zS=({type:n,children:e,typeIds:t,valueOffsets:i},r)=>{const s=n.typeIdToChildIndex[t[r]];return 8+Gs.visit(e[s],i[r])},VS=({children:n},e)=>4+Gs.visitMany(n,n.map(()=>e)).reduce(m4,0);Do.prototype.visitUtf8=y4;Do.prototype.visitBinary=v4;Do.prototype.visitList=_4;Do.prototype.visitFixedSizeList=b4;Do.prototype.visitUnion=x4;Do.prototype.visitDenseUnion=zS;Do.prototype.visitSparseUnion=VS;const Gs=new Do;var HS;const qS={},WS={};class Wt{constructor(e){var t,i,r;const s=e[0]instanceof Wt?e.flatMap(u=>u.data):e;if(s.length===0||s.some(u=>!(u instanceof ai)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(t=s[0])===null||t===void 0?void 0:t.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:u,set:c,indexOf:h,byteLength:f}=qS[o.typeId],m=s[0];this.isValid=x=>c1(m,x),this.get=x=>u(m,x),this.set=(x,w)=>c(m,x,w),this.indexOf=x=>h(m,x),this.getByteLength=x=>f(m,x),this._offsets=[0,m.length];break}default:Object.setPrototypeOf(this,WS[o.typeId]),this._offsets=FS(s);break}this.data=s,this.type=o,this.stride=va(o),this.numChildren=(r=(i=o.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,t)=>e+t.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=NS(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ge[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}includes(e,t){return this.indexOf(e,t)>0}getByteLength(e){return 0}[Symbol.iterator](){return d1.visit(this)}concat(...e){return new Wt(this.data.concat(e.flatMap(t=>t.data).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new Wt(RS(this,e,t,({data:i,_offsets:r},s,o)=>BS(i,r,s,o)))}toJSON(){return[...this]}toArray(){const{type:e,data:t,length:i,stride:r,ArrayType:s}=this;switch(e.typeId){case ge.Int:case ge.Float:case ge.Decimal:case ge.Time:case ge.Timestamp:switch(t.length){case 0:return new s;case 1:return t[0].values.subarray(0,i*r);default:return t.reduce((o,{values:u,length:c})=>(o.array.set(u.subarray(0,c*r),o.offset),o.offset+=c*r,o),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt((t=this.type.children)===null||t===void 0?void 0:t.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Wt(this.data.map(({children:t})=>t[e])):null}get isMemoized(){return dt.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(dt.isDictionary(this.type)){const e=new _p(this.data[0].dictionary),t=this.data.map(i=>{const r=i.clone();return r.dictionary=e,r});return new Wt(t)}return new _p(this)}unmemoize(){if(dt.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),t=this.data.map(i=>{const r=i.clone();return r.dictionary=e,r});return new Wt(t)}return this}}HS=Symbol.toStringTag;Wt[HS]=(n=>{n.type=dt.prototype,n.data=[],n.length=0,n.stride=1,n.numChildren=0,n._nullCount=-1,n._byteLength=-1,n._offsets=new Uint32Array([0]),n[Symbol.isConcatSpreadable]=!0;const e=Object.keys(ge).map(t=>ge[t]).filter(t=>typeof t=="number"&&t!==ge.NONE);for(const t of e){const i=Gn.getVisitFnByTypeId(t),r=Fr.getVisitFnByTypeId(t),s=vp.getVisitFnByTypeId(t),o=Gs.getVisitFnByTypeId(t);qS[t]={get:i,set:r,indexOf:s,byteLength:o},WS[t]=Object.create(n,{isValid:{value:Xu(c1)},get:{value:Xu(Gn.getVisitFnByTypeId(t))},set:{value:jS(Fr.getVisitFnByTypeId(t))},indexOf:{value:US(vp.getVisitFnByTypeId(t))},getByteLength:{value:Xu(Gs.getVisitFnByTypeId(t))}})}return"Vector"})(Wt.prototype);class _p extends Wt{constructor(e){super(e.data);const t=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const u=s[o];if(u!==void 0)return u;const c=t.call(this,o);return s[o]=c,c}}),Object.defineProperty(this,"set",{value(o,u){i.call(this,o,u),s[o]=u}}),Object.defineProperty(this,"slice",{value:(o,u)=>new _p(r.call(this,o,u))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Wt(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class f0{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,i,r){return e.prep(8,24),e.writeInt64(r),e.pad(4),e.writeInt32(i),e.writeInt64(t),e.offset()}}const vy=2,Ls=4,ba=4,ni=4,go=new Int32Array(2),u_=new Float32Array(go.buffer),c_=new Float64Array(go.buffer),Ff=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Ca=class p0{constructor(e,t){this.low=e|0,this.high=t|0}static create(e,t){return e==0&&t==0?p0.ZERO:new p0(e,t)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}};Ca.ZERO=new Ca(0,0);var g0;(function(n){n[n.UTF8_BYTES=1]="UTF8_BYTES",n[n.UTF16_STRING=2]="UTF16_STRING"})(g0||(g0={}));let oc=class GS{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new GS(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new Ca(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new Ca(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return go[0]=this.readInt32(e),u_[0]}readFloat64(e){return go[Ff?0:1]=this.readInt32(e),go[Ff?1:0]=this.readInt32(e+4),c_[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high)}writeUint64(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high)}writeFloat32(e,t){u_[0]=t,this.writeInt32(e,go[0])}writeFloat64(e,t){c_[0]=t,this.writeInt32(e,go[Ff?0:1]),this.writeInt32(e+4,go[Ff?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Ls+ba)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<ba;t++)e+=String.fromCharCode(this.readInt8(this.position_+Ls+t));return e}__offset(e,t){const i=e-this.readInt32(e);return t<this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const i=this.readInt32(e);let r="",s=0;if(e+=Ls,t===g0.UTF8_BYTES)return this.bytes_.subarray(e,e+i);for(;s<i;){let o;const u=this.readUint8(e+s++);if(u<192)o=u;else{const c=this.readUint8(e+s++);if(u<224)o=(u&31)<<6|c&63;else{const h=this.readUint8(e+s++);if(u<240)o=(u&15)<<12|(c&63)<<6|h&63;else{const f=this.readUint8(e+s++);o=(u&7)<<18|(c&63)<<12|(h&63)<<6|f&63}}}o<65536?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return r}__union_with_string(e,t){return typeof e=="string"?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Ls}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=ba)throw new Error("FlatBuffers: file identifier must be length "+ba);for(let t=0;t<ba;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+Ls+t))return!1;return!0}createLong(e,t){return Ca.create(e,t)}createScalarList(e,t){const i=[];for(let r=0;r<t;++r)e(r)!==null&&i.push(e(r));return i}createObjList(e,t){const i=[];for(let r=0;r<t;++r){const s=e(r);s!==null&&i.push(s.unpack())}return i}},KS=class XS{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let t;e?t=e:t=1024,this.bb=oc.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const i=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<i+e+t;){const r=this.bb.capacity();this.bb=XS.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){(this.force_defaults||!t.equals(i))&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=t<<1,r=oc.allocate(i);return r.setPosition(i-t),r.bytes().set(e.bytes(),i-t),r}addOffset(e){this.prep(Ls,0),this.writeInt32(this.offset()-e+Ls)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&this.vtable[t]==0;t--);const i=t+1;for(;t>=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);const r=2;this.addInt16(e-this.object_start);const s=(i+r)*vy;this.addInt16(s);let o=0;const u=this.space;e:for(t=0;t<this.vtables.length;t++){const c=this.bb.capacity()-this.vtables[t];if(s==this.bb.readInt16(c)){for(let h=vy;h<s;h+=vy)if(this.bb.readInt16(u+h)!=this.bb.readInt16(c+h))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){const r=i?ni:0;if(t){const s=t;if(this.prep(this.minalign,Ls+ba+r),s.length!=ba)throw new Error("FlatBuffers: file identifier must be length "+ba);for(let o=ba-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Ls+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(this.bb.readInt16(r+t)!=0))throw new Error("FlatBuffers: field "+t+" must be set")}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(Ls,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(!e)return 0;let t;if(e instanceof Uint8Array)t=e;else{t=[];let i=0;for(;i<e.length;){let r;const s=e.charCodeAt(i++);if(s<55296||s>=56320)r=s;else{const o=e.charCodeAt(i++);r=(s<<10)+o+-56613888}r<128?t.push(r):(r<2048?t.push(r>>6&31|192):(r<65536?t.push(r>>12&15|224):t.push(r>>18&7|240,r>>12&63|128),t.push(r>>6&63|128)),t.push(r&63|128))}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(let i=0,r=this.space,s=this.bb.bytes();i<t.length;i++)s[r++]=t[i];return this.endVector()}createLong(e,t){return Ca.create(e,t)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let i=0;i<e.length;++i){const r=e[i];if(r!==null)t.push(this.createObjectOffset(r));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e),this.endVector()}};class Ui{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new Ui).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+ni),(t||new Ui).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,i){return Ui.startKeyValue(e),Ui.addKey(e,t),Ui.addValue(e,i),Ui.endKeyValue(e)}}var lc;(function(n){n[n.V1=0]="V1",n[n.V2=1]="V2",n[n.V3=2]="V3",n[n.V4=3]="V4",n[n.V5=4]="V5"})(lc||(lc={}));var uc;(function(n){n[n.Little=0]="Little",n[n.Big=1]="Big"})(uc||(uc={}));var bp;(function(n){n[n.DenseArray=0]="DenseArray"})(bp||(bp={}));class fr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new fr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+ni),(t||new fr).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,i){return fr.startInt(e),fr.addBitWidth(e,t),fr.addIsSigned(e,i),fr.endInt(e)}}class xa{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new xa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+ni),(t||new xa).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new fr).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):bp.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,bp.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class yl{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(e,t){return(t||new yl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,t){return e.setPosition(e.position()+ni),(t||new yl).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return yl.startBinary(e),yl.endBinary(e)}}class vl{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(e,t){return(t||new vl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,t){return e.setPosition(e.position()+ni),(t||new vl).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return vl.startBool(e),vl.endBool(e)}}var xp;(function(n){n[n.DAY=0]="DAY",n[n.MILLISECOND=1]="MILLISECOND"})(xp||(xp={}));let Xf=class Bu{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(e,t){return(t||new Bu).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,t){return e.setPosition(e.position()+ni),(t||new Bu).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xp.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,xp.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,t){return Bu.startDate(e),Bu.addUnit(e,t),Bu.endDate(e)}};class Bn{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(e,t){return(t||new Bn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,t){return e.setPosition(e.position()+ni),(t||new Bn).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,t,i,r){return Bn.startDecimal(e),Bn.addPrecision(e,t),Bn.addScale(e,i),Bn.addBitWidth(e,r),Bn.endDecimal(e)}}var cc;(function(n){n[n.SECOND=0]="SECOND",n[n.MILLISECOND=1]="MILLISECOND",n[n.MICROSECOND=2]="MICROSECOND",n[n.NANOSECOND=3]="NANOSECOND"})(cc||(cc={}));class Ns{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(e,t){return(t||new Ns).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,t){return e.setPosition(e.position()+ni),(t||new Ns).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,t){return Ns.startFixedSizeBinary(e),Ns.addByteWidth(e,t),Ns.endFixedSizeBinary(e)}}class Fs{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(e,t){return(t||new Fs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,t){return e.setPosition(e.position()+ni),(t||new Fs).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,t){return Fs.startFixedSizeList(e),Fs.addListSize(e,t),Fs.endFixedSizeList(e)}}var Sp;(function(n){n[n.HALF=0]="HALF",n[n.SINGLE=1]="SINGLE",n[n.DOUBLE=2]="DOUBLE"})(Sp||(Sp={}));class Bs{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new Bs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+ni),(t||new Bs).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Sp.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,Sp.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return Bs.startFloatingPoint(e),Bs.addPrecision(e,t),Bs.endFloatingPoint(e)}}var Tp;(function(n){n[n.YEAR_MONTH=0]="YEAR_MONTH",n[n.DAY_TIME=1]="DAY_TIME",n[n.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Tp||(Tp={}));class js{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new js).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+ni),(t||new js).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Tp.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,Tp.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return js.startInterval(e),js.addUnit(e,t),js.endInterval(e)}}class _l{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(e,t){return(t||new _l).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,t){return e.setPosition(e.position()+ni),(t||new _l).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return _l.startList(e),_l.endList(e)}}let Yf=class ju{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(e,t){return(t||new ju).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,t){return e.setPosition(e.position()+ni),(t||new ju).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(e,t){return ju.startMap(e),ju.addKeysSorted(e,t),ju.endMap(e)}};class bl{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(e,t){return(t||new bl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,t){return e.setPosition(e.position()+ni),(t||new bl).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return bl.startNull(e),bl.endNull(e)}}class xl{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new xl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+ni),(t||new xl).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return xl.startStruct_(e),xl.endStruct_(e)}}let Ed=class pl{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new pl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+ni),(t||new pl).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):cc.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,cc.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,i){return pl.startTime(e),pl.addUnit(e,t),pl.addBitWidth(e,i),pl.endTime(e)}};class Lr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new Lr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+ni),(t||new Lr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):cc.SECOND}timezone(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,cc.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,i){return Lr.startTimestamp(e),Lr.addUnit(e,t),Lr.addTimezone(e,i),Lr.endTimestamp(e)}}var Cp;(function(n){n[n.Sparse=0]="Sparse",n[n.Dense=1]="Dense"})(Cp||(Cp={}));class jn{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new jn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+ni),(t||new jn).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Cp.Sparse}typeIds(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,Cp.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addInt32(t[i]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,i){return jn.startUnion(e),jn.addMode(e,t),jn.addTypeIds(e,i),jn.endUnion(e)}}class Sl{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(e,t){return(t||new Sl).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,t){return e.setPosition(e.position()+ni),(t||new Sl).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Sl.startUtf8(e),Sl.endUtf8(e)}}var bi;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.FloatingPoint=3]="FloatingPoint",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct_=13]="Struct_",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Duration=18]="Duration",n[n.LargeBinary=19]="LargeBinary",n[n.LargeUtf8=20]="LargeUtf8",n[n.LargeList=21]="LargeList"})(bi||(bi={}));let Or=class Qf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new Qf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+ni),(t||new Qf).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):bi.NONE}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new xa).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(e,t){const i=this.bb.__offset(this.bb_pos,14);return i?(t||new Qf).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,16);return i?(t||new Ui).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,bi.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}},Is=class ma{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new ma).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+ni),(t||new ma).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):uc.Little}fields(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new Or).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new Ui).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,uc.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let i=t.length-1;i>=0;i--)e.addInt64(t[i]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(e,t,i,r,s){return ma.startSchema(e),ma.addEndianness(e,t),ma.addFields(e,i),ma.addCustomMetadata(e,r),ma.addFeatures(e,s),ma.endSchema(e)}};class hr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new hr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+ni),(t||new hr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):lc.V1}schema(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Is).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new f0).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new f0).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Ui).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,lc.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}class Gt{constructor(e=[],t,i){this.fields=e||[],this.metadata=t||new Map,i||(i=m0(e)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,t)=>`${t}: ${e}`).join(", ")} }>`}select(e){const t=new Set(e),i=this.fields.filter(r=>t.has(r.name));return new Gt(i,this.metadata)}selectAt(e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new Gt(t,this.metadata)}assign(...e){const t=e[0]instanceof Gt?e[0]:Array.isArray(e[0])?new Gt(e[0]):new Gt(e),i=[...this.fields],r=Bf(Bf(new Map,this.metadata),t.metadata),s=t.fields.filter(u=>{const c=i.findIndex(h=>h.name===u.name);return~c?(i[c]=u.clone({metadata:Bf(Bf(new Map,i[c].metadata),u.metadata)}))&&!1:!0}),o=m0(s,new Map);return new Gt([...i,...s],r,new Map([...this.dictionaries,...o]))}}Gt.prototype.fields=null;Gt.prototype.metadata=null;Gt.prototype.dictionaries=null;class ui{constructor(e,t,i=!1,r){this.name=e,this.type=t,this.nullable=i,this.metadata=r||new Map}static new(...e){let[t,i,r,s]=e;return e[0]&&typeof e[0]=="object"&&({name:t}=e[0],i===void 0&&(i=e[0].type),r===void 0&&(r=e[0].nullable),s===void 0&&(s=e[0].metadata)),new ui(`${t}`,i,r,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[t,i,r,s]=e;return!e[0]||typeof e[0]!="object"?[t=this.name,i=this.type,r=this.nullable,s=this.metadata]=e:{name:t=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=e[0],ui.new(t,i,r,s)}}ui.prototype.type=null;ui.prototype.name=null;ui.prototype.nullable=null;ui.prototype.metadata=null;function Bf(n,e){return new Map([...n||new Map,...e||new Map])}function m0(n,e=new Map){for(let t=-1,i=n.length;++t<i;){const s=n[t].type;if(dt.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&m0(s.children,e)}return e}var d_=Ca,S4=KS,T4=oc;class Wd{constructor(e,t=pr.V4,i,r){this.schema=e,this.version=t,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}static decode(e){e=new T4(jt(e));const t=hr.getRootAsFooter(e),i=Gt.decode(t.schema());return new C4(i,t)}static encode(e){const t=new S4,i=Gt.encode(t,e.schema);hr.startRecordBatchesVector(t,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())To.encode(t,o);const r=t.endVector();hr.startDictionariesVector(t,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())To.encode(t,o);const s=t.endVector();return hr.startFooter(t),hr.addSchema(t,i),hr.addVersion(t,pr.V4),hr.addRecordBatches(t,r),hr.addDictionaries(t,s),hr.finishFooterBuffer(t,hr.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,t=-1,i=this.numRecordBatches;++t<i;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,i=this.numDictionaries;++t<i;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class C4 extends Wd{constructor(e,t){super(e,t.version()),this._footer=t}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const t=this._footer.recordBatches(e);if(t)return To.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const t=this._footer.dictionaries(e);if(t)return To.decode(t)}return null}}class To{constructor(e,t,i){this.metaDataLength=e,this.offset=typeof i=="number"?i:i.low,this.bodyLength=typeof t=="number"?t:t.low}static decode(e){return new To(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){const{metaDataLength:i}=t,r=new d_(t.offset,0),s=new d_(t.bodyLength,0);return f0.createBlock(e,r,i,s)}}const Si=Object.freeze({done:!0,value:void 0});class h_{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class h1{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class w4 extends h1{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ct(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(Si);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Rr.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Rr.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ct(this,void 0,void 0,function*(){return yield this.abort(e),Si})}return(e){return ct(this,void 0,void 0,function*(){return yield this.close(),Si})}read(e){return ct(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ct(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((t,i)=>{this.resolvers.push({resolve:t,reject:i})}):Promise.resolve(Si)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Jf extends w4{write(e){if((e=jt(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?l0(this.toUint8Array(!0)):this.toUint8Array(!1).then(l0)}toUint8Array(e=!1){return e?Ws(this._values)[0]:ct(this,void 0,void 0,function*(){var t,i;const r=[];let s=0;try{for(var o=wl(this),u;u=yield o.next(),!u.done;){const c=u.value;r.push(c),s+=c.byteLength}}catch(c){t={error:c}}finally{try{u&&!u.done&&(i=o.return)&&(yield i.call(o))}finally{if(t)throw t.error}}return Ws(r,s)[0]})}}class wp{constructor(e){e&&(this.source=new E4(Rr.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class dc{constructor(e){e instanceof dc?this.source=e.source:e instanceof Jf?this.source=new ol(Rr.fromAsyncIterable(e)):Mx(e)?this.source=new ol(Rr.fromNodeStream(e)):J0(e)?this.source=new ol(Rr.fromDOMStream(e)):kx(e)?this.source=new ol(Rr.fromDOMStream(e.body)):th(e)?this.source=new ol(Rr.fromIterable(e)):_o(e)?this.source=new ol(Rr.fromAsyncIterable(e)):Tc(e)&&(this.source=new ol(Rr.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class E4{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,t="read"){return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||Si)}return(e){return Object.create(this.source.return&&this.source.return(e)||Si)}}class ol{constructor(e){this.source=e,this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}cancel(e){return ct(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ct(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ct(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,t="read"){return ct(this,void 0,void 0,function*(){return yield this.source.next({cmd:t,size:e})})}throw(e){return ct(this,void 0,void 0,function*(){const t=this.source.throw&&(yield this.source.throw(e))||Si;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}return(e){return ct(this,void 0,void 0,function*(){const t=this.source.return&&(yield this.source.return(e))||Si;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}}class f_ extends wp{constructor(e,t){super(),this.position=0,this.buffer=jt(e),this.size=typeof t>"u"?this.buffer.byteLength:t}readInt32(e){const{buffer:t,byteOffset:i}=this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:t,size:i,position:r}=this;return t&&r<i?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,e)),t.subarray(r,this.position)):null}readAt(e,t){const i=this.buffer,r=Math.min(this.size,e+t);return i?i.subarray(e,r):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class Ep extends dc{constructor(e,t){super(),this.position=0,this._handle=e,typeof t=="number"?this.size=t:this._pending=ct(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return ct(this,void 0,void 0,function*(){const{buffer:t,byteOffset:i}=yield this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)})}seek(e){return ct(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ct(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:t,size:i,position:r}=this;if(t&&r<i){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=r,o=0,u=0;const c=Math.min(i,s+Math.min(i-s,e)),h=new Uint8Array(Math.max(0,(this.position=c)-s));for(;(s+=u)<c&&(o+=u)<h.byteLength;)({bytesRead:u}=yield t.read(h,o,h.byteLength-o,s));return h}return null})}readAt(e,t){return ct(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&e+t<r){const s=Math.min(r,e+t),o=new Uint8Array(s-e);return(yield i.read(o,0,t,e)).buffer}return new Uint8Array(t)})}close(){return ct(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ct(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ct(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const A4=65536;function $u(n){return n<0&&(n=4294967295+n+1),`0x${n.toString(16)}`}const hc=8,f1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class YS{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const t=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let r=t[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=t[2]*i[3],s+=r,r=t[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?A4:0,this.buffer[1]+=s>>>16,this.buffer[1]+=t[1]*i[3]+t[2]*i[2]+t[3]*i[1],this.buffer[1]+=t[0]*i[3]+t[1]*i[2]+t[2]*i[1]+t[3]*i[0]<<16,this}_plus(e){const t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${$u(this.buffer[1])} ${$u(this.buffer[0])}`}}class Qt extends YS{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,t=new Uint32Array(2)){return Qt.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return Qt.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const i=e.length,r=new Qt(t);for(let s=0;s<i;){const o=hc<i-s?hc:i-s,u=new Qt(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0])),c=new Qt(new Uint32Array([f1[o],0]));r.times(c),r.plus(u),s+=o}return r}static convertArray(e){const t=new Uint32Array(e.length*2);for(let i=-1,r=e.length;++i<r;)Qt.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new Qt(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Qt(new Uint32Array(e.buffer)).plus(t)}}class Fn extends YS{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const t=this.buffer[1]<<0,i=e.buffer[1]<<0;return t<i||t===i&&this.buffer[0]<e.buffer[0]}static from(e,t=new Uint32Array(2)){return Fn.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return Fn.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const i=e.startsWith("-"),r=e.length,s=new Fn(t);for(let o=i?1:0;o<r;){const u=hc<r-o?hc:r-o,c=new Fn(new Uint32Array([Number.parseInt(e.slice(o,o+u),10),0])),h=new Fn(new Uint32Array([f1[u],0]));s.times(h),s.plus(c),o+=u}return i?s.negate():s}static convertArray(e){const t=new Uint32Array(e.length*2);for(let i=-1,r=e.length;++i<r;)Fn.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new Fn(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Fn(new Uint32Array(e.buffer)).plus(t)}}class ks{constructor(e){this.buffer=e}high(){return new Fn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Fn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const t=new Qt(new Uint32Array([this.buffer[3],0])),i=new Qt(new Uint32Array([this.buffer[2],0])),r=new Qt(new Uint32Array([this.buffer[1],0])),s=new Qt(new Uint32Array([this.buffer[0],0])),o=new Qt(new Uint32Array([e.buffer[3],0])),u=new Qt(new Uint32Array([e.buffer[2],0])),c=new Qt(new Uint32Array([e.buffer[1],0])),h=new Qt(new Uint32Array([e.buffer[0],0]));let f=Qt.multiply(s,h);this.buffer[0]=f.low();const m=new Qt(new Uint32Array([f.high(),0]));return f=Qt.multiply(r,h),m.plus(f),f=Qt.multiply(s,c),m.plus(f),this.buffer[1]=m.low(),this.buffer[3]=m.lessThan(f)?1:0,this.buffer[2]=m.high(),new Qt(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Qt.multiply(i,h)).plus(Qt.multiply(r,c)).plus(Qt.multiply(s,u)),this.buffer[3]+=Qt.multiply(t,h).plus(Qt.multiply(i,c)).plus(Qt.multiply(r,u)).plus(Qt.multiply(s,o)).low(),this}plus(e){const t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${$u(this.buffer[3])} ${$u(this.buffer[2])} ${$u(this.buffer[1])} ${$u(this.buffer[0])}`}static multiply(e,t){return new ks(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new ks(new Uint32Array(e.buffer)).plus(t)}static from(e,t=new Uint32Array(4)){return ks.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(4)){return ks.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(4)){const i=e.startsWith("-"),r=e.length,s=new ks(t);for(let o=i?1:0;o<r;){const u=hc<r-o?hc:r-o,c=new ks(new Uint32Array([Number.parseInt(e.slice(o,o+u),10),0,0,0])),h=new ks(new Uint32Array([f1[u],0,0,0]));s.times(h),s.plus(c),o+=u}return i?s.negate():s}static convertArray(e){const t=new Uint32Array(e.length*4);for(let i=-1,r=e.length;++i<r;)ks.from(e[i],new Uint32Array(t.buffer,t.byteOffset+4*4*i,4));return t}}class QS extends Ot{constructor(e,t,i,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=i,this.dictionaries=r}visit(e){return super.visit(e instanceof ui?e.type:e)}visitNull(e,{length:t}=this.nextFieldNode()){return Pt({type:e,length:t})}visitBool(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===gr.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:t,nullCount:i}=this.nextFieldNode()){return Pt({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t,i=this.nextBufferRange()){return t>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e,{length:t,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class D4 extends QS{constructor(e,t,i,r){super(new Uint8Array(0),t,i,r),this.sources=e}readNullBitmap(e,t,{offset:i}=this.nextBufferRange()){return t<=0?new Uint8Array(0):yp(this.sources[i])}readOffsets(e,{offset:t}=this.nextBufferRange()){return ii(Uint8Array,ii(Int32Array,this.sources[t]))}readTypeIds(e,{offset:t}=this.nextBufferRange()){return ii(Uint8Array,ii(e.ArrayType,this.sources[t]))}readData(e,{offset:t}=this.nextBufferRange()){const{sources:i}=this;return dt.isTimestamp(e)||(dt.isInt(e)||dt.isTime(e))&&e.bitWidth===64||dt.isDate(e)&&e.unit===Aa.MILLISECOND?ii(Uint8Array,Fn.convertArray(i[t])):dt.isDecimal(e)?ii(Uint8Array,ks.convertArray(i[t])):dt.isBinary(e)||dt.isFixedSizeBinary(e)?I4(i[t]):dt.isBool(e)?yp(i[t]):dt.isUtf8(e)?Q0(i[t].join("")):ii(Uint8Array,ii(e.ArrayType,i[t].map(r=>+r)))}}function I4(n){const e=n.join(""),t=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)t[i>>1]=Number.parseInt(e.slice(i,i+2),16);return t}class gt extends Ot{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((i,r)=>this.compareFields(i,t[r]))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function Kn(n,e){return e instanceof n.constructor}function ih(n,e){return n===e||Kn(n,e)}function ka(n,e){return n===e||Kn(n,e)&&n.bitWidth===e.bitWidth&&n.isSigned===e.isSigned}function ig(n,e){return n===e||Kn(n,e)&&n.precision===e.precision}function k4(n,e){return n===e||Kn(n,e)&&n.byteWidth===e.byteWidth}function p1(n,e){return n===e||Kn(n,e)&&n.unit===e.unit}function nh(n,e){return n===e||Kn(n,e)&&n.unit===e.unit&&n.timezone===e.timezone}function rh(n,e){return n===e||Kn(n,e)&&n.unit===e.unit&&n.bitWidth===e.bitWidth}function M4(n,e){return n===e||Kn(n,e)&&n.children.length===e.children.length&&Co.compareManyFields(n.children,e.children)}function P4(n,e){return n===e||Kn(n,e)&&n.children.length===e.children.length&&Co.compareManyFields(n.children,e.children)}function g1(n,e){return n===e||Kn(n,e)&&n.mode===e.mode&&n.typeIds.every((t,i)=>t===e.typeIds[i])&&Co.compareManyFields(n.children,e.children)}function O4(n,e){return n===e||Kn(n,e)&&n.id===e.id&&n.isOrdered===e.isOrdered&&Co.visit(n.indices,e.indices)&&Co.visit(n.dictionary,e.dictionary)}function m1(n,e){return n===e||Kn(n,e)&&n.unit===e.unit}function R4(n,e){return n===e||Kn(n,e)&&n.listSize===e.listSize&&n.children.length===e.children.length&&Co.compareManyFields(n.children,e.children)}function L4(n,e){return n===e||Kn(n,e)&&n.keysSorted===e.keysSorted&&n.children.length===e.children.length&&Co.compareManyFields(n.children,e.children)}gt.prototype.visitNull=ih;gt.prototype.visitBool=ih;gt.prototype.visitInt=ka;gt.prototype.visitInt8=ka;gt.prototype.visitInt16=ka;gt.prototype.visitInt32=ka;gt.prototype.visitInt64=ka;gt.prototype.visitUint8=ka;gt.prototype.visitUint16=ka;gt.prototype.visitUint32=ka;gt.prototype.visitUint64=ka;gt.prototype.visitFloat=ig;gt.prototype.visitFloat16=ig;gt.prototype.visitFloat32=ig;gt.prototype.visitFloat64=ig;gt.prototype.visitUtf8=ih;gt.prototype.visitBinary=ih;gt.prototype.visitFixedSizeBinary=k4;gt.prototype.visitDate=p1;gt.prototype.visitDateDay=p1;gt.prototype.visitDateMillisecond=p1;gt.prototype.visitTimestamp=nh;gt.prototype.visitTimestampSecond=nh;gt.prototype.visitTimestampMillisecond=nh;gt.prototype.visitTimestampMicrosecond=nh;gt.prototype.visitTimestampNanosecond=nh;gt.prototype.visitTime=rh;gt.prototype.visitTimeSecond=rh;gt.prototype.visitTimeMillisecond=rh;gt.prototype.visitTimeMicrosecond=rh;gt.prototype.visitTimeNanosecond=rh;gt.prototype.visitDecimal=ih;gt.prototype.visitList=M4;gt.prototype.visitStruct=P4;gt.prototype.visitUnion=g1;gt.prototype.visitDenseUnion=g1;gt.prototype.visitSparseUnion=g1;gt.prototype.visitDictionary=O4;gt.prototype.visitInterval=m1;gt.prototype.visitIntervalDayTime=m1;gt.prototype.visitIntervalYearMonth=m1;gt.prototype.visitFixedSizeList=R4;gt.prototype.visitMap=L4;const Co=new gt;function y0(n,e){return Co.compareSchemas(n,e)}function _y(n,e){return N4(n,e.map(t=>t.data.concat()))}function N4(n,e){const t=[...n.fields],i=[],r={numBatches:e.reduce((m,x)=>Math.max(m,x.length),0)};let s=0,o=0,u=-1;const c=e.length;let h,f=[];for(;r.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,u=-1;++u<c;)f[u]=h=e[u].shift(),o=Math.min(o,h?h.length:o);Number.isFinite(o)&&(f=F4(t,o,f,e,r),o>0&&(i[s++]=Pt({type:new _n(t),length:o,nullCount:0,children:f.slice()})))}return[n=n.assign(t),i.map(m=>new Un(n,m))]}function F4(n,e,t,i,r){var s;const o=(e+63&-64)>>3;for(let u=-1,c=i.length;++u<c;){const h=t[u],f=h==null?void 0:h.length;if(f>=e)f===e?t[u]=h:(t[u]=h.slice(0,e),r.numBatches=Math.max(r.numBatches,i[u].unshift(h.slice(e,f-e))));else{const m=n[u];n[u]=m.clone({nullable:!0}),t[u]=(s=h==null?void 0:h._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:Pt({type:m.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)})}}return t}var JS;class yn{constructor(...e){var t,i;if(e.length===0)return this.batches=[],this.schema=new Gt([]),this._offsets=[0],this;let r,s;e[0]instanceof Gt&&(r=e.shift()),e[e.length-1]instanceof Uint32Array&&(s=e.pop());const o=c=>{if(c){if(c instanceof Un)return[c];if(c instanceof yn)return c.batches;if(c instanceof ai){if(c.type instanceof _n)return[new Un(new Gt(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(h=>o(h));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(h=>o(h));if(typeof c=="object"){const h=Object.keys(c),f=h.map(w=>new Wt([c[w]])),m=new Gt(h.map((w,A)=>new ui(String(w),f[A].type))),[,x]=_y(m,f);return x.length===0?[new Un(c)]:x}}}return[]},u=e.flatMap(c=>o(c));if(r=(i=r??((t=u[0])===null||t===void 0?void 0:t.schema))!==null&&i!==void 0?i:new Gt([]),!(r instanceof Gt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of u){if(!(c instanceof Un))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!y0(r,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=u,this._offsets=s??FS(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,t)=>e+t.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=NS(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?d1.visit(new Wt(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const t=this.schema,i=this.data.concat(e.flatMap(({data:r})=>r));return new yn(t,i.map(r=>new Un(t,r)))}slice(e,t){const i=this.schema;[e,t]=RS({length:this.numRows},e,t);const r=BS(this.data,this._offsets,e,t);return new yn(i,r.map(s=>new Un(i,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(t=>t.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const t=this.data.map(i=>i.children[e]);if(t.length===0){const{type:i}=this.schema.fields[e],r=Pt({type:i,length:0,nullCount:0});t.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new Wt(t)}return null}setChild(e,t){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===e),t)}setChildAt(e,t){let i=this.schema,r=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new Wt([Pt({type:new xo,length:this.numRows})]));const s=i.fields.slice(),o=s[e].clone({type:t.type}),u=this.schema.fields.map((c,h)=>this.getChildAt(h));[s[e],u[e]]=[o,t],[i,r]=_y(i,u)}return new yn(i,r)}select(e){const t=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(e.map(i=>t.get(i)).filter(i=>i>-1))}selectAt(e){const t=this.schema.selectAt(e),i=this.batches.map(r=>r.selectAt(e));return new yn(t,i)}assign(e){const t=this.schema.fields,[i,r]=e.schema.fields.reduce((u,c,h)=>{const[f,m]=u,x=t.findIndex(w=>w.name===c.name);return~x?m[x]=h:f.push(h),u},[[],[]]),s=this.schema.assign(e.schema),o=[...t.map((u,c)=>[c,r[c]]).map(([u,c])=>c===void 0?this.getChildAt(u):e.getChildAt(c)),...i.map(u=>e.getChildAt(u))].filter(Boolean);return new yn(..._y(s,o))}}JS=Symbol.toStringTag;yn[JS]=(n=>(n.schema=null,n.batches=[],n._offsets=new Uint32Array([0]),n._nullCount=-1,n[Symbol.isConcatSpreadable]=!0,n.isValid=Xu(c1),n.get=Xu(Gn.getVisitFn(ge.Struct)),n.set=jS(Fr.getVisitFn(ge.Struct)),n.indexOf=US(vp.getVisitFn(ge.Struct)),n.getByteLength=Xu(Gs.getVisitFn(ge.Struct)),"Table"))(yn.prototype);var ZS;let Un=class Ad{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof Gt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Pt({nullCount:0,type:new _n(this.schema.fields),children:this.schema.fields.map(t=>Pt({type:t.type,nullCount:0}))})]=e,!(this.data instanceof ai))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=p_(this.schema,this.data.children);break}case 1:{const[t]=e,{fields:i,children:r,length:s}=Object.keys(t).reduce((c,h,f)=>(c.children[f]=t[h],c.length=Math.max(c.length,t[h].length),c.fields[f]=ui.new({name:h,type:t[h].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),o=new Gt(i),u=Pt({type:new _n(i),length:s,children:r,nullCount:0});[this.schema,this.data]=p_(o,u.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=eT(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Gn.visit(this.data,e)}set(e,t){return Fr.visit(this.data,e,t)}indexOf(e,t){return vp.visit(this.data,e,t)}getByteLength(e){return Gs.visit(this.data,e)}[Symbol.iterator](){return d1.visit(new Wt([this.data]))}toArray(){return[...this]}concat(...e){return new yn(this.schema,[this,...e])}slice(e,t){const[i]=new Wt([this.data]).slice(e,t).data;return new Ad(this.schema,i)}getChild(e){var t;return this.getChildAt((t=this.schema.fields)===null||t===void 0?void 0:t.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Wt([this.data.children[e]]):null}setChild(e,t){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===e),t)}setChildAt(e,t){let i=this.schema,r=this.data;if(e>-1&&e<this.numCols){t||(t=new Wt([Pt({type:new xo,length:this.numRows})]));const s=i.fields.slice(),o=r.children.slice(),u=s[e].clone({type:t.type});[s[e],o[e]]=[u,t.data[0]],i=new Gt(s,new Map(this.schema.metadata)),r=Pt({type:new _n(s),children:o})}return new Ad(i,r)}select(e){const t=this.schema.select(e),i=new _n(t.fields),r=[];for(const s of e){const o=this.schema.fields.findIndex(u=>u.name===s);~o&&(r[o]=this.data.children[o])}return new Ad(t,Pt({type:i,length:this.numRows,children:r}))}selectAt(e){const t=this.schema.selectAt(e),i=e.map(s=>this.data.children[s]).filter(Boolean),r=Pt({type:new _n(t.fields),length:this.numRows,children:i});return new Ad(t,r)}};ZS=Symbol.toStringTag;Un[ZS]=(n=>(n._nullCount=-1,n[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Un.prototype);function p_(n,e,t=e.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...n.fields],s=[...e],o=(t+63&-64)>>3;for(const[u,c]of n.fields.entries()){const h=e[u];(!h||h.length!==t)&&(r[u]=c.clone({nullable:!0}),s[u]=(i=h==null?void 0:h._changeLengthAndBackfillNullBitmap(t))!==null&&i!==void 0?i:Pt({type:c.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)}))}return[n.assign(r),Pt({type:new _n(r),length:t,children:s})]}function eT(n,e,t=new Map){for(let i=-1,r=n.length;++i<r;){const o=n[i].type,u=e[i];if(dt.isDictionary(o)){if(!t.has(o.id))u.dictionary&&t.set(o.id,u.dictionary);else if(t.get(o.id)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&eT(o.children,u.children,t)}return t}class y1 extends Un{constructor(e){const t=e.fields.map(r=>Pt({type:r.type})),i=Pt({type:new _n(e.fields),nullCount:0,children:t});super(e,i)}}var Ap;(function(n){n[n.BUFFER=0]="BUFFER"})(Ap||(Ap={}));var Dp;(function(n){n[n.LZ4_FRAME=0]="LZ4_FRAME",n[n.ZSTD=1]="ZSTD"})(Dp||(Dp={}));class mo{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new mo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+ni),(t||new mo).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):Dp.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Ap.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,Dp.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,Ap.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,i){return mo.startBodyCompression(e),mo.addCodec(e,t),mo.addMethod(e,i),mo.endBodyCompression(e)}}let tT=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(t),e.offset()}},iT=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(t),e.offset()}},_a=class v0{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(e,t){return(t||new v0).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,t){return e.setPosition(e.position()+ni),(t||new v0).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new iT).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new tT).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new mo).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}},Uu=class _0{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(e,t){return(t||new _0).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,t){return e.setPosition(e.position()+ni),(t||new _0).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new _a).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}};var Ip;(function(n){n[n.NONE=0]="NONE",n[n.Schema=1]="Schema",n[n.DictionaryBatch=2]="DictionaryBatch",n[n.RecordBatch=3]="RecordBatch",n[n.Tensor=4]="Tensor",n[n.SparseTensor=5]="SparseTensor"})(Ip||(Ip={}));let oo=class Ds{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new Ds).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+ni),(t||new Ds).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):lc.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Ip.NONE}header(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Ui).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,lc.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,Ip.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,e.createLong(0,0))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(e,t,i,r,s,o){return Ds.startMessage(e),Ds.addVersion(e,t),Ds.addHeaderType(e,i),Ds.addHeader(e,r),Ds.addBodyLength(e,s),Ds.addCustomMetadata(e,o),Ds.endMessage(e)}};var B4=Ca;class j4 extends Ot{visit(e,t){return e==null||t==null?void 0:super.visit(e,t)}visitNull(e,t){return bl.startNull(t),bl.endNull(t)}visitInt(e,t){return fr.startInt(t),fr.addBitWidth(t,e.bitWidth),fr.addIsSigned(t,e.isSigned),fr.endInt(t)}visitFloat(e,t){return Bs.startFloatingPoint(t),Bs.addPrecision(t,e.precision),Bs.endFloatingPoint(t)}visitBinary(e,t){return yl.startBinary(t),yl.endBinary(t)}visitBool(e,t){return vl.startBool(t),vl.endBool(t)}visitUtf8(e,t){return Sl.startUtf8(t),Sl.endUtf8(t)}visitDecimal(e,t){return Bn.startDecimal(t),Bn.addScale(t,e.scale),Bn.addPrecision(t,e.precision),Bn.addBitWidth(t,e.bitWidth),Bn.endDecimal(t)}visitDate(e,t){return Xf.startDate(t),Xf.addUnit(t,e.unit),Xf.endDate(t)}visitTime(e,t){return Ed.startTime(t),Ed.addUnit(t,e.unit),Ed.addBitWidth(t,e.bitWidth),Ed.endTime(t)}visitTimestamp(e,t){const i=e.timezone&&t.createString(e.timezone)||void 0;return Lr.startTimestamp(t),Lr.addUnit(t,e.unit),i!==void 0&&Lr.addTimezone(t,i),Lr.endTimestamp(t)}visitInterval(e,t){return js.startInterval(t),js.addUnit(t,e.unit),js.endInterval(t)}visitList(e,t){return _l.startList(t),_l.endList(t)}visitStruct(e,t){return xl.startStruct_(t),xl.endStruct_(t)}visitUnion(e,t){jn.startTypeIdsVector(t,e.typeIds.length);const i=jn.createTypeIdsVector(t,e.typeIds);return jn.startUnion(t),jn.addMode(t,e.mode),jn.addTypeIds(t,i),jn.endUnion(t)}visitDictionary(e,t){const i=this.visit(e.indices,t);return xa.startDictionaryEncoding(t),xa.addId(t,new B4(e.id,0)),xa.addIsOrdered(t,e.isOrdered),i!==void 0&&xa.addIndexType(t,i),xa.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return Ns.startFixedSizeBinary(t),Ns.addByteWidth(t,e.byteWidth),Ns.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return Fs.startFixedSizeList(t),Fs.addListSize(t,e.listSize),Fs.endFixedSizeList(t)}visitMap(e,t){return Yf.startMap(t),Yf.addKeysSorted(t,e.keysSorted),Yf.endMap(t)}}const by=new j4;function U4(n,e=new Map){return new Gt(z4(n,e),Zf(n.customMetadata),e)}function nT(n){return new mr(n.count,rT(n.columns),sT(n.columns))}function $4(n){return new Ks(nT(n.data),n.id,n.isDelta)}function z4(n,e){return(n.fields||[]).filter(Boolean).map(t=>ui.fromJSON(t,e))}function g_(n,e){return(n.children||[]).filter(Boolean).map(t=>ui.fromJSON(t,e))}function rT(n){return(n||[]).reduce((e,t)=>[...e,new Ll(t.count,V4(t.VALIDITY)),...rT(t.children)],[])}function sT(n,e=[]){for(let t=-1,i=(n||[]).length;++t<i;){const r=n[t];r.VALIDITY&&e.push(new $s(e.length,r.VALIDITY.length)),r.TYPE&&e.push(new $s(e.length,r.TYPE.length)),r.OFFSET&&e.push(new $s(e.length,r.OFFSET.length)),r.DATA&&e.push(new $s(e.length,r.DATA.length)),e=sT(r.children,e)}return e}function V4(n){return(n||[]).reduce((e,t)=>e+ +(t===0),0)}function H4(n,e){let t,i,r,s,o,u;return!e||!(s=n.dictionary)?(o=y_(n,g_(n,e)),r=new ui(n.name,o,n.nullable,Zf(n.customMetadata))):e.has(t=s.id)?(i=(i=s.indexType)?m_(i):new Vd,u=new ac(e.get(t),i,t,s.isOrdered),r=new ui(n.name,u,n.nullable,Zf(n.customMetadata))):(i=(i=s.indexType)?m_(i):new Vd,e.set(t,o=y_(n,g_(n,e))),u=new ac(o,i,t,s.isOrdered),r=new ui(n.name,u,n.nullable,Zf(n.customMetadata))),r||null}function Zf(n){return new Map(Object.entries(n||{}))}function m_(n){return new So(n.isSigned,n.bitWidth)}function y_(n,e){const t=n.type.name;switch(t){case"NONE":return new xo;case"null":return new xo;case"binary":return new sp;case"utf8":return new ap;case"bool":return new op;case"list":return new hp((e||[])[0]);case"struct":return new _n(e||[]);case"struct_":return new _n(e||[])}switch(t){case"int":{const i=n.type;return new So(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=n.type;return new Hd(Hn[i.precision])}case"decimal":{const i=n.type;return new lp(i.scale,i.precision,i.bitWidth)}case"date":{const i=n.type;return new up(Aa[i.unit])}case"time":{const i=n.type;return new qd(Ut[i.unit],i.bitWidth)}case"timestamp":{const i=n.type;return new cp(Ut[i.unit],i.timezone)}case"interval":{const i=n.type;return new dp(bo[i.unit])}case"union":{const i=n.type;return new fp(gr[i.mode],i.typeIds||[],e||[])}case"fixedsizebinary":{const i=n.type;return new pp(i.byteWidth)}case"fixedsizelist":{const i=n.type;return new gp(i.listSize,(e||[])[0])}case"map":{const i=n.type;return new mp((e||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${t}"`)}var Pl=Ca,q4=KS,W4=oc;class bn{constructor(e,t,i,r){this._version=t,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,t){const i=new bn(0,pr.V4,t);return i._createHeader=G4(e,t),i}static decode(e){e=new W4(jt(e));const t=oo.getRootAsMessage(e),i=t.bodyLength(),r=t.version(),s=t.headerType(),o=new bn(i,r,s);return o._createHeader=K4(t,s),o}static encode(e){const t=new q4;let i=-1;return e.isSchema()?i=Gt.encode(t,e.header()):e.isRecordBatch()?i=mr.encode(t,e.header()):e.isDictionaryBatch()&&(i=Ks.encode(t,e.header())),oo.startMessage(t),oo.addVersion(t,pr.V4),oo.addHeader(t,i),oo.addHeaderType(t,e.headerType),oo.addBodyLength(t,new Pl(e.bodyLength,0)),oo.finishMessageBuffer(t,oo.endMessage(t)),t.asUint8Array()}static from(e,t=0){if(e instanceof Gt)return new bn(0,pr.V4,qt.Schema,e);if(e instanceof mr)return new bn(t,pr.V4,qt.RecordBatch,e);if(e instanceof Ks)return new bn(t,pr.V4,qt.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===qt.Schema}isRecordBatch(){return this.headerType===qt.RecordBatch}isDictionaryBatch(){return this.headerType===qt.DictionaryBatch}}class mr{constructor(e,t,i){this._nodes=t,this._buffers=i,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class Ks{constructor(e,t,i=!1){this._data=e,this._isDelta=i,this._id=typeof t=="number"?t:t.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class $s{constructor(e,t){this.offset=typeof e=="number"?e:e.low,this.length=typeof t=="number"?t:t.low}}class Ll{constructor(e,t){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof t=="number"?t:t.low}}function G4(n,e){return()=>{switch(e){case qt.Schema:return Gt.fromJSON(n);case qt.RecordBatch:return mr.fromJSON(n);case qt.DictionaryBatch:return Ks.fromJSON(n)}throw new Error(`Unrecognized Message type: { name: ${qt[e]}, type: ${e} }`)}}function K4(n,e){return()=>{switch(e){case qt.Schema:return Gt.decode(n.header(new Is));case qt.RecordBatch:return mr.decode(n.header(new _a),n.version());case qt.DictionaryBatch:return Ks.decode(n.header(new Uu),n.version())}throw new Error(`Unrecognized Message type: { name: ${qt[e]}, type: ${e} }`)}}ui.encode=sD;ui.decode=nD;ui.fromJSON=H4;Gt.encode=rD;Gt.decode=X4;Gt.fromJSON=U4;mr.encode=aD;mr.decode=Y4;mr.fromJSON=nT;Ks.encode=oD;Ks.decode=Q4;Ks.fromJSON=$4;Ll.encode=lD;Ll.decode=Z4;$s.encode=uD;$s.decode=J4;function X4(n,e=new Map){const t=iD(n,e);return new Gt(t,ep(n),e)}function Y4(n,e=pr.V4){if(n.compression()!==null)throw new Error("Record batch compression not implemented");return new mr(n.length(),eD(n),tD(n,e))}function Q4(n,e=pr.V4){return new Ks(mr.decode(n.data(),e),n.id(),n.isDelta())}function J4(n){return new $s(n.offset(),n.length())}function Z4(n){return new Ll(n.length(),n.nullCount())}function eD(n){const e=[];for(let t,i=-1,r=-1,s=n.nodesLength();++i<s;)(t=n.nodes(i))&&(e[++r]=Ll.decode(t));return e}function tD(n,e){const t=[];for(let i,r=-1,s=-1,o=n.buffersLength();++r<o;)(i=n.buffers(r))&&(e<pr.V4&&(i.bb_pos+=8*(r+1)),t[++s]=$s.decode(i));return t}function iD(n,e){const t=[];for(let i,r=-1,s=-1,o=n.fieldsLength();++r<o;)(i=n.fields(r))&&(t[++s]=ui.decode(i,e));return t}function v_(n,e){const t=[];for(let i,r=-1,s=-1,o=n.childrenLength();++r<o;)(i=n.children(r))&&(t[++s]=ui.decode(i,e));return t}function nD(n,e){let t,i,r,s,o,u;return!e||!(u=n.dictionary())?(r=b_(n,v_(n,e)),i=new ui(n.name(),r,n.nullable(),ep(n))):e.has(t=u.id().low)?(s=(s=u.indexType())?__(s):new Vd,o=new ac(e.get(t),s,t,u.isOrdered()),i=new ui(n.name(),o,n.nullable(),ep(n))):(s=(s=u.indexType())?__(s):new Vd,e.set(t,r=b_(n,v_(n,e))),o=new ac(r,s,t,u.isOrdered()),i=new ui(n.name(),o,n.nullable(),ep(n))),i||null}function ep(n){const e=new Map;if(n)for(let t,i,r=-1,s=Math.trunc(n.customMetadataLength());++r<s;)(t=n.customMetadata(r))&&(i=t.key())!=null&&e.set(i,t.value());return e}function __(n){return new So(n.isSigned(),n.bitWidth())}function b_(n,e){const t=n.typeType();switch(t){case bi.NONE:return new xo;case bi.Null:return new xo;case bi.Binary:return new sp;case bi.Utf8:return new ap;case bi.Bool:return new op;case bi.List:return new hp((e||[])[0]);case bi.Struct_:return new _n(e||[])}switch(t){case bi.Int:{const i=n.type(new fr);return new So(i.isSigned(),i.bitWidth())}case bi.FloatingPoint:{const i=n.type(new Bs);return new Hd(i.precision())}case bi.Decimal:{const i=n.type(new Bn);return new lp(i.scale(),i.precision(),i.bitWidth())}case bi.Date:{const i=n.type(new Xf);return new up(i.unit())}case bi.Time:{const i=n.type(new Ed);return new qd(i.unit(),i.bitWidth())}case bi.Timestamp:{const i=n.type(new Lr);return new cp(i.unit(),i.timezone())}case bi.Interval:{const i=n.type(new js);return new dp(i.unit())}case bi.Union:{const i=n.type(new jn);return new fp(i.mode(),i.typeIdsArray()||[],e||[])}case bi.FixedSizeBinary:{const i=n.type(new Ns);return new pp(i.byteWidth())}case bi.FixedSizeList:{const i=n.type(new Fs);return new gp(i.listSize(),(e||[])[0])}case bi.Map:{const i=n.type(new Yf);return new mp((e||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${bi[t]}" (${t})`)}function rD(n,e){const t=e.fields.map(s=>ui.encode(n,s));Is.startFieldsVector(n,t.length);const i=Is.createFieldsVector(n,t),r=e.metadata&&e.metadata.size>0?Is.createCustomMetadataVector(n,[...e.metadata].map(([s,o])=>{const u=n.createString(`${s}`),c=n.createString(`${o}`);return Ui.startKeyValue(n),Ui.addKey(n,u),Ui.addValue(n,c),Ui.endKeyValue(n)})):-1;return Is.startSchema(n),Is.addFields(n,i),Is.addEndianness(n,cD?uc.Little:uc.Big),r!==-1&&Is.addCustomMetadata(n,r),Is.endSchema(n)}function sD(n,e){let t=-1,i=-1,r=-1;const s=e.type;let o=e.typeId;dt.isDictionary(s)?(o=s.dictionary.typeId,r=by.visit(s,n),i=by.visit(s.dictionary,n)):i=by.visit(s,n);const u=(s.children||[]).map(f=>ui.encode(n,f)),c=Or.createChildrenVector(n,u),h=e.metadata&&e.metadata.size>0?Or.createCustomMetadataVector(n,[...e.metadata].map(([f,m])=>{const x=n.createString(`${f}`),w=n.createString(`${m}`);return Ui.startKeyValue(n),Ui.addKey(n,x),Ui.addValue(n,w),Ui.endKeyValue(n)})):-1;return e.name&&(t=n.createString(e.name)),Or.startField(n),Or.addType(n,i),Or.addTypeType(n,o),Or.addChildren(n,c),Or.addNullable(n,!!e.nullable),t!==-1&&Or.addName(n,t),r!==-1&&Or.addDictionary(n,r),h!==-1&&Or.addCustomMetadata(n,h),Or.endField(n)}function aD(n,e){const t=e.nodes||[],i=e.buffers||[];_a.startNodesVector(n,t.length);for(const o of t.slice().reverse())Ll.encode(n,o);const r=n.endVector();_a.startBuffersVector(n,i.length);for(const o of i.slice().reverse())$s.encode(n,o);const s=n.endVector();return _a.startRecordBatch(n),_a.addLength(n,new Pl(e.length,0)),_a.addNodes(n,r),_a.addBuffers(n,s),_a.endRecordBatch(n)}function oD(n,e){const t=mr.encode(n,e.data);return Uu.startDictionaryBatch(n),Uu.addId(n,new Pl(e.id,0)),Uu.addIsDelta(n,e.isDelta),Uu.addData(n,t),Uu.endDictionaryBatch(n)}function lD(n,e){return iT.createFieldNode(n,new Pl(e.length,0),new Pl(e.nullCount,0))}function uD(n,e){return tT.createBuffer(n,new Pl(e.offset,0),new Pl(e.length,0))}const cD=(()=>{const n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256})(),v1=n=>`Expected ${qt[n]} Message in stream, but was null or length 0.`,_1=n=>`Header pointer of flatbuffer-encoded ${qt[n]} Message is null or length 0.`,aT=(n,e)=>`Expected to read ${n} metadata bytes, but only read ${e}.`,oT=(n,e)=>`Expected to read ${n} bytes for message body, but only read ${e}.`;class lT{constructor(e){this.source=e instanceof wp?e:new wp(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?Si:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(v1(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const t=jt(this.source.read(e));if(t.byteLength<e)throw new Error(oT(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(e=!1){const t=qt.Schema,i=this.readMessage(t),r=i==null?void 0:i.header();if(e&&!r)throw new Error(_1(t));return r}readMetadataLength(){const e=this.source.read(ng),t=e&&new oc(e),i=(t==null?void 0:t.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(e){const t=this.source.read(e);if(!t)return Si;if(t.byteLength<e)throw new Error(aT(e,t.byteLength));return{done:!1,value:bn.decode(t)}}}class dD{constructor(e,t){this.source=e instanceof dc?e:Ix(e)?new Ep(e,t):new dc(e)}[Symbol.asyncIterator](){return this}next(){return ct(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?Si:e})}throw(e){return ct(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ct(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ct(this,void 0,void 0,function*(){let t;if((t=yield this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(v1(e));return t.value})}readMessageBody(e){return ct(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const t=jt(yield this.source.read(e));if(t.byteLength<e)throw new Error(oT(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()})}readSchema(e=!1){return ct(this,void 0,void 0,function*(){const t=qt.Schema,i=yield this.readMessage(t),r=i==null?void 0:i.header();if(e&&!r)throw new Error(_1(t));return r})}readMetadataLength(){return ct(this,void 0,void 0,function*(){const e=yield this.source.read(ng),t=e&&new oc(e),i=(t==null?void 0:t.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(e){return ct(this,void 0,void 0,function*(){const t=yield this.source.read(e);if(!t)return Si;if(t.byteLength<e)throw new Error(aT(e,t.byteLength));return{done:!1,value:bn.decode(t)}})}}class hD extends lT{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof h_?e:new h_(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:bn.fromJSON(e.schema,qt.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const t=e.dictionaries[this._dictionaryIndex++];return this._body=t.data.columns,{done:!1,value:bn.fromJSON(t,qt.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const t=e.batches[this._batchIndex++];return this._body=t.columns,{done:!1,value:bn.fromJSON(t,qt.RecordBatch)}}return this._body=[],Si}readMessageBody(e){return t(this._body);function t(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...t(s.children)],[])}}readMessage(e){let t;if((t=this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(v1(e));return t.value}readSchema(){const e=qt.Schema,t=this.readMessage(e),i=t==null?void 0:t.header();if(!t||!i)throw new Error(_1(e));return i}}const ng=4,b0="ARROW1",Gd=new Uint8Array(b0.length);for(let n=0;n<b0.length;n+=1)Gd[n]=b0.codePointAt(n);function b1(n,e=0){for(let t=-1,i=Gd.length;++t<i;)if(Gd[t]!==n[e+t])return!1;return!0}const sh=Gd.length,uT=sh+ng,fD=sh*2+ng;class wa extends h1{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const t=this._impl.open(e);return _o(t)?t.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Rr.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Rr.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof wa?e:u0(e)?yD(e):Ix(e)?bD(e):_o(e)?ct(this,void 0,void 0,function*(){return yield wa.from(yield e)}):kx(e)||J0(e)||Mx(e)||Tc(e)?_D(new dc(e)):vD(new wp(e))}static readAll(e){return e instanceof wa?e.isSync()?x_(e):S_(e):u0(e)||ArrayBuffer.isView(e)||th(e)||Dx(e)?x_(e):S_(e)}}class kp extends wa{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Us(this,arguments,function*(){yield Ct(yield*Kf(wl(this[Symbol.iterator]())))})}}class Mp extends wa{constructor(e){super(e),this._impl=e}readAll(){var e,t;return ct(this,void 0,void 0,function*(){const i=new Array;try{for(var r=wl(this),s;s=yield r.next(),!s.done;){const o=s.value;i.push(o)}}catch(o){e={error:o}}finally{try{s&&!s.done&&(t=r.return)&&(yield t.call(r))}finally{if(e)throw e.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class cT extends kp{constructor(e){super(e),this._impl=e}}class pD extends Mp{constructor(e){super(e),this._impl=e}}class dT{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){const i=this._loadVectors(e,t,this.schema.fields),r=Pt({type:new _n(this.schema.fields),length:e.length,children:i});return new Un(this.schema,r)}_loadDictionaryBatch(e,t){const{id:i,isDelta:r}=e,{dictionaries:s,schema:o}=this,u=s.get(i);if(r||!u){const c=o.dictionaries.get(i),h=this._loadVectors(e.data,t,[c]);return(u&&r?u.concat(new Wt(h)):new Wt(h)).memoize()}return u.memoize()}_loadVectors(e,t,i){return new QS(t,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}class Pp extends dT{constructor(e,t){super(t),this._reader=u0(e)?new hD(this._handle=e):new lT(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=fT(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):Si}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):Si}next(){if(this.closed)return Si;let e;const{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),r=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),r=t.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new y1(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Op extends dT{constructor(e,t){super(t),this._reader=new dD(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ct(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ct(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=fT(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ct(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):Si})}return(e){return ct(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):Si})}next(){return ct(this,void 0,void 0,function*(){if(this.closed)return Si;let e;const{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),r=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),r=yield t.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new y1(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ct(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class hT extends Pp{constructor(e,t){super(e instanceof f_?e:new f_(e),t)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();const i=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(qt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),o=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(e){var t;const i=(t=this._footer)===null||t===void 0?void 0:t.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(qt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),o=this._reader.readMessageBody(r.bodyLength),u=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,u)}}}_readFooter(){const{_handle:e}=this,t=e.size-uT,i=e.readInt32(t),r=e.readAt(t-i,i);return Wd.decode(r)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class gD extends Op{constructor(e,...t){const i=typeof t[0]!="number"?t.shift():void 0,r=t[0]instanceof Map?t.shift():void 0;super(e instanceof Ep?e:new Ep(e,i),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const t=Object.create(null,{open:{get:()=>super.open}});return ct(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield t.open.call(this,e)})}readRecordBatch(e){var t;return ct(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const i=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(qt.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),o=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(e){var t;return ct(this,void 0,void 0,function*(){const i=(t=this._footer)===null||t===void 0?void 0:t.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(qt.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),o=yield this._reader.readMessageBody(r.bodyLength),u=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,u)}}})}_readFooter(){return ct(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const t=e.size-uT,i=yield e.readInt32(t),r=yield e.readAt(t-i,i);return Wd.decode(r)})}_readNextMessageAndValidate(e){return ct(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null})}}class mD extends Pp{constructor(e,t){super(e,t)}_loadVectors(e,t,i){return new D4(t,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}function fT(n,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:n.autoDestroy}function*x_(n){const e=wa.from(n);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function S_(n){return Us(this,arguments,function*(){const t=yield Ct(wa.from(n));try{if(!(yield Ct(t.open({autoDestroy:!1}))).closed)do yield yield Ct(t);while(!(yield Ct(t.reset().open())).closed)}finally{yield Ct(t.cancel())}})}function yD(n){return new kp(new mD(n))}function vD(n){const e=n.peek(sh+7&-8);return e&&e.byteLength>=4?b1(e)?new cT(new hT(n.read())):new kp(new Pp(n)):new kp(new Pp(function*(){}()))}function _D(n){return ct(this,void 0,void 0,function*(){const e=yield n.peek(sh+7&-8);return e&&e.byteLength>=4?b1(e)?new cT(new hT(yield n.read())):new Mp(new Op(n)):new Mp(new Op(function(){return Us(this,arguments,function*(){})}()))})}function bD(n){return ct(this,void 0,void 0,function*(){const{size:e}=yield n.stat(),t=new Ep(n,e);return e>=fD&&b1(yield t.readAt(0,sh+7&-8))?new pD(new gD(t)):new Mp(new Op(t))})}class Pi extends Ot{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const t=r=>r.flatMap(s=>Array.isArray(s)?t(s):s instanceof Un?s.data.children:s.data),i=new Pi;return i.visitMany(t(e)),i}visit(e){if(e instanceof Wt)return this.visitMany(e.data),this;const{type:t}=e;if(!dt.isDictionary(t)){const{length:i,nullCount:r}=e;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");dt.isNull(t)||is.call(this,r<=0?new Uint8Array(0):o1(e.offset,i,e.nullBitmap)),this.nodes.push(new Ll(i,r))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function is(n){const e=n.byteLength+7&-8;return this.buffers.push(n),this.bufferRegions.push(new $s(this._byteLength,e)),this._byteLength+=e,this}function xD(n){const{type:e,length:t,typeIds:i,valueOffsets:r}=n;if(is.call(this,i),e.mode===gr.Sparse)return x0.call(this,n);if(e.mode===gr.Dense){if(n.offset<=0)return is.call(this,r),x0.call(this,n);{const s=i.reduce((f,m)=>Math.max(f,m),i[0]),o=new Int32Array(s+1),u=new Int32Array(s+1).fill(-1),c=new Int32Array(t),h=e1(-r[0],t,r);for(let f,m,x=-1;++x<t;)(m=u[f=i[x]])===-1&&(m=u[f]=h[f]),c[x]=h[x]-m,++o[f];is.call(this,c);for(let f,m=-1,x=e.children.length;++m<x;)if(f=n.children[m]){const w=e.typeIds[m],A=Math.min(t,o[w]);this.visit(f.slice(u[w],A))}}}return this}function SD(n){let e;return n.nullCount>=n.length?is.call(this,new Uint8Array(0)):(e=n.values)instanceof Uint8Array?is.call(this,o1(n.offset,n.length,e)):is.call(this,yp(n.values))}function Io(n){return is.call(this,n.values.subarray(0,n.length*n.stride))}function pT(n){const{length:e,values:t,valueOffsets:i}=n,r=i[0],s=i[e],o=Math.min(s-r,t.byteLength-r);return is.call(this,e1(-i[0],e,i)),is.call(this,t.subarray(r,r+o)),this}function x1(n){const{length:e,valueOffsets:t}=n;return t&&is.call(this,e1(t[0],e,t)),this.visit(n.children[0])}function x0(n){return this.visitMany(n.type.children.map((e,t)=>n.children[t]).filter(Boolean))[0]}Pi.prototype.visitBool=SD;Pi.prototype.visitInt=Io;Pi.prototype.visitFloat=Io;Pi.prototype.visitUtf8=pT;Pi.prototype.visitBinary=pT;Pi.prototype.visitFixedSizeBinary=Io;Pi.prototype.visitDate=Io;Pi.prototype.visitTimestamp=Io;Pi.prototype.visitTime=Io;Pi.prototype.visitDecimal=Io;Pi.prototype.visitList=x1;Pi.prototype.visitStruct=x0;Pi.prototype.visitUnion=xD;Pi.prototype.visitInterval=Io;Pi.prototype.visitFixedSizeList=x1;Pi.prototype.visitMap=x1;class gT extends h1{constructor(e){super(),this._position=0,this._started=!1,this._sink=new Jf,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Wn(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return _o(e)?e.then(t=>this.writeAll(t)):Tc(e)?w1(this,e):C1(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,t=null){return e===this._sink||e instanceof Jf?this._sink=e:(this._sink=new Jf,e&&V3(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&H3(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!t||!y0(t,this._schema))&&(t==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof yn&&!(t=e.schema))return this.finish()&&void 0;if(e instanceof Un&&!(t=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(t&&!y0(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof Un?e instanceof y1||this._writeRecordBatch(e):e instanceof yn?this.writeAll(e.batches):th(e)&&this.writeAll(e)}_writeMessage(e,t=8){const i=t-1,r=bn.encode(e),s=r.byteLength,o=this._writeLegacyIpcFormat?4:8,u=s+o+i&~i,c=u-s-o;return e.headerType===qt.RecordBatch?this._recordBatchBlocks.push(new To(u,e.bodyLength,this._position)):e.headerType===qt.DictionaryBatch&&this._dictionaryBlocks.push(new To(u,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(u-o)),s>0&&this._write(r),this._writePadding(c)}_write(e){if(this._started){const t=jt(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(bn.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Gd)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:t,nodes:i,bufferRegions:r,buffers:s}=Pi.assemble(e),o=new mr(e.numRows,i,r),u=bn.from(o,t);return this._writeDictionaries(e)._writeMessage(u)._writeBodyBuffers(s)}_writeDictionaryBatch(e,t,i=!1){this._dictionaryDeltaOffsets.set(t,e.length+(this._dictionaryDeltaOffsets.get(t)||0));const{byteLength:r,nodes:s,bufferRegions:o,buffers:u}=Pi.assemble(new Wt([e])),c=new mr(e.length,s,o),h=new Ks(c,t,i),f=bn.from(h,r);return this._writeMessage(f)._writeBodyBuffers(u)}_writeBodyBuffers(e){let t,i,r;for(let s=-1,o=e.length;++s<o;)(t=e[s])&&(i=t.byteLength)>0&&(this._write(t),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(e){for(let[t,i]of e.dictionaries){let r=this._dictionaryDeltaOffsets.get(t)||0;if(r===0||(i=i==null?void 0:i.slice(r)).length>0)for(const s of i.data)this._writeDictionaryBatch(s,t,r>0),r+=s.length}return this}}class S1 extends gT{static writeAll(e,t){const i=new S1(t);return _o(e)?e.then(r=>i.writeAll(r)):Tc(e)?w1(i,e):C1(i,e)}}class T1 extends gT{static writeAll(e){const t=new T1;return _o(e)?e.then(i=>t.writeAll(i)):Tc(e)?w1(t,e):C1(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const t=Wd.encode(new Wd(e,pr.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function C1(n,e){let t=e;e instanceof yn&&(t=e.batches,n.reset(void 0,e.schema));for(const i of t)n.write(i);return n.finish()}function w1(n,e){var t,i,r,s;return ct(this,void 0,void 0,function*(){try{for(t=wl(e);i=yield t.next(),!i.done;){const o=i.value;n.write(o)}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}return n.finish()})}function Dd(n){const e=wa.from(n);return _o(e)?e.then(t=>Dd(t)):e.isAsync()?e.readAll().then(t=>new yn(t)):new yn(e.readAll())}function xy(n,e="stream"){return(e==="stream"?S1:T1).writeAll(n).toUint8Array(!0)}var T_=function(){function n(e,t,i,r){var s=this;this.getCell=function(o,u){var c=o<s.headerRows&&u<s.headerColumns,h=o>=s.headerRows&&u<s.headerColumns,f=o<s.headerRows&&u>=s.headerColumns;if(c){var m=["blank"];return u>0&&m.push("level"+o),{type:"blank",classNames:m.join(" "),content:""}}else if(f){var x=u-s.headerColumns,m=["col_heading","level"+o,"col"+x];return{type:"columns",classNames:m.join(" "),content:s.getContent(s.columnsTable,x,o)}}else if(h){var w=o-s.headerRows,m=["row_heading","level"+u,"row"+w];return{type:"index",id:"T_".concat(s.uuid,"level").concat(u,"_row").concat(w),classNames:m.join(" "),content:s.getContent(s.indexTable,w,u)}}else{var w=o-s.headerRows,x=u-s.headerColumns,m=["data","row"+w,"col"+x],A=s.styler?s.getContent(s.styler.displayValuesTable,w,x):s.getContent(s.dataTable,w,x);return{type:"data",id:"T_".concat(s.uuid,"row").concat(w,"_col").concat(x),classNames:m.join(" "),content:A}}},this.getContent=function(o,u,c){var h=o.getChildAt(c);if(h===null)return"";var f=s.getColumnTypeId(o,c);switch(f){case ge.Timestamp:return s.nanosToDate(h.get(u));default:return h.get(u)}},this.dataTable=Dd(e),this.indexTable=Dd(t),this.columnsTable=Dd(i),this.styler=r?{caption:r.caption,displayValuesTable:Dd(r.displayValues),styles:r.styles,uuid:r.uuid}:void 0}return Object.defineProperty(n.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),n.prototype.serialize=function(){return{data:xy(this.dataTable),index:xy(this.indexTable),columns:xy(this.columnsTable)}},n.prototype.getColumnTypeId=function(e,t){return e.schema.fields[t].type.typeId},n.prototype.nanosToDate=function(e){return new Date(e/1e6)},n}(),Od=function(){return Od=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Od.apply(this,arguments)},Rd;(function(n){n.COMPONENT_READY="streamlit:componentReady",n.SET_COMPONENT_VALUE="streamlit:setComponentValue",n.SET_FRAME_HEIGHT="streamlit:setFrameHeight"})(Rd||(Rd={}));var $n=function(){function n(){}return n.API_VERSION=1,n.RENDER_EVENT="streamlit:render",n.events=new EventTarget,n.registeredMessageListener=!1,n.setComponentReady=function(){n.registeredMessageListener||(window.addEventListener("message",n.onMessageEvent),n.registeredMessageListener=!0),n.sendBackMsg(Rd.COMPONENT_READY,{apiVersion:n.API_VERSION})},n.setFrameHeight=function(e){e===void 0&&(e=document.body.scrollHeight),e!==n.lastFrameHeight&&(n.lastFrameHeight=e,n.sendBackMsg(Rd.SET_FRAME_HEIGHT,{height:e}))},n.setComponentValue=function(e){var t;e instanceof T_?(t="dataframe",e=e.serialize()):CD(e)?(t="bytes",e=new Uint8Array(e.buffer)):e instanceof ArrayBuffer?(t="bytes",e=new Uint8Array(e)):t="json",n.sendBackMsg(Rd.SET_COMPONENT_VALUE,{value:e,dataType:t})},n.onMessageEvent=function(e){var t=e.data.type;switch(t){case n.RENDER_EVENT:n.onRenderMessage(e.data);break}},n.onRenderMessage=function(e){var t=e.args;t==null&&(console.error("Got null args in onRenderMessage. This should never happen"),t={});var i=e.dfs&&e.dfs.length>0?n.argsDataframeToObject(e.dfs):{};t=Od(Od({},t),i);var r=!!e.disabled,s=e.theme;s&&TD(s);var o={disabled:r,args:t,theme:s},u=new CustomEvent(n.RENDER_EVENT,{detail:o});n.events.dispatchEvent(u)},n.argsDataframeToObject=function(e){var t=e.map(function(i){var r=i.key,s=i.value;return[r,n.toArrowTable(s)]});return Object.fromEntries(t)},n.toArrowTable=function(e){var t,i=(t=e.data,t.data),r=t.index,s=t.columns,o=t.styler;return new T_(i,r,s,o)},n.sendBackMsg=function(e,t){window.parent.postMessage(Od({isStreamlitMessage:!0,type:e},t),"*")},n}(),TD=function(n){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML=`
    :root {
      --primary-color: `.concat(n.primaryColor,`;
      --background-color: `).concat(n.backgroundColor,`;
      --secondary-background-color: `).concat(n.secondaryBackgroundColor,`;
      --text-color: `).concat(n.textColor,`;
      --font: `).concat(n.font,`;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
    }
  `)};function CD(n){var e=!1;try{e=n instanceof BigInt64Array||n instanceof BigUint64Array}catch{}return n instanceof Int8Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array||e}var mT=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wD=function(n){mT(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){$n.setFrameHeight()},e.prototype.componentDidUpdate=function(){$n.setFrameHeight()},e}(Nu.PureComponent);function ED(n){var e=function(t){mT(i,t);function i(r){var s=t.call(this,r)||this;return s.componentDidMount=function(){$n.events.addEventListener($n.RENDER_EVENT,s.onRenderEvent),$n.setComponentReady()},s.componentDidUpdate=function(){s.state.componentError!=null&&$n.setFrameHeight()},s.componentWillUnmount=function(){$n.events.removeEventListener($n.RENDER_EVENT,s.onRenderEvent)},s.onRenderEvent=function(o){s.setState({renderData:o.detail})},s.state={renderData:void 0,componentError:void 0},s}return i.prototype.render=function(){return this.state.componentError!=null?Nu.createElement("div",null,Nu.createElement("h1",null,"Component Error"),Nu.createElement("span",null,this.state.componentError.message)):this.state.renderData==null?null:Nu.createElement(n,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},i.getDerivedStateFromError=function(r){return{componentError:r}},i}(Nu.PureComponent);return R3(e,n)}const AD="modulepreload",DD=function(n,e){return new URL(n,e).href},C_={},S0=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let o=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const u=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=o(t.map(f=>{if(f=DD(f,i),f in C_)return;C_[f]=!0;const m=f.endsWith(".css"),x=m?'[rel="stylesheet"]':"";if(!!i)for(let C=u.length-1;C>=0;C--){const D=u[C];if(D.href===f&&(!m||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${x}`))return;const A=document.createElement("link");if(A.rel=m?"stylesheet":AD,m||(A.as="script"),A.crossOrigin="",A.href=f,h&&A.setAttribute("nonce",h),document.head.appendChild(A),m)return new Promise((C,D)=>{A.addEventListener("load",C),A.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return r.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};var Sy={exports:{}},kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function ID(){if(w_)return kt;w_=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function x(k){return k===null||typeof k!="object"?null:(k=m&&k[m]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,C={};function D(k,Y,he){this.props=k,this.context=Y,this.refs=C,this.updater=he||w}D.prototype.isReactComponent={},D.prototype.setState=function(k,Y){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Y,"setState")},D.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function N(){}N.prototype=D.prototype;function L(k,Y,he){this.props=k,this.context=Y,this.refs=C,this.updater=he||w}var P=L.prototype=new N;P.constructor=L,A(P,D.prototype),P.isPureReactComponent=!0;var X=Array.isArray,j=Object.prototype.hasOwnProperty,K={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function J(k,Y,he){var Ie,V={},ae=null,pe=null;if(Y!=null)for(Ie in Y.ref!==void 0&&(pe=Y.ref),Y.key!==void 0&&(ae=""+Y.key),Y)j.call(Y,Ie)&&!z.hasOwnProperty(Ie)&&(V[Ie]=Y[Ie]);var Z=arguments.length-2;if(Z===1)V.children=he;else if(1<Z){for(var _e=Array(Z),Me=0;Me<Z;Me++)_e[Me]=arguments[Me+2];V.children=_e}if(k&&k.defaultProps)for(Ie in Z=k.defaultProps,Z)V[Ie]===void 0&&(V[Ie]=Z[Ie]);return{$$typeof:n,type:k,key:ae,ref:pe,props:V,_owner:K.current}}function R(k,Y){return{$$typeof:n,type:k.type,key:Y,ref:k.ref,props:k.props,_owner:k._owner}}function F(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function de(k){var Y={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(he){return Y[he]})}var fe=/\/+/g;function le(k,Y){return typeof k=="object"&&k!==null&&k.key!=null?de(""+k.key):Y.toString(36)}function Se(k,Y,he,Ie,V){var ae=typeof k;(ae==="undefined"||ae==="boolean")&&(k=null);var pe=!1;if(k===null)pe=!0;else switch(ae){case"string":case"number":pe=!0;break;case"object":switch(k.$$typeof){case n:case e:pe=!0}}if(pe)return pe=k,V=V(pe),k=Ie===""?"."+le(pe,0):Ie,X(V)?(he="",k!=null&&(he=k.replace(fe,"$&/")+"/"),Se(V,Y,he,"",function(Me){return Me})):V!=null&&(F(V)&&(V=R(V,he+(!V.key||pe&&pe.key===V.key?"":(""+V.key).replace(fe,"$&/")+"/")+k)),Y.push(V)),1;if(pe=0,Ie=Ie===""?".":Ie+":",X(k))for(var Z=0;Z<k.length;Z++){ae=k[Z];var _e=Ie+le(ae,Z);pe+=Se(ae,Y,he,_e,V)}else if(_e=x(k),typeof _e=="function")for(k=_e.call(k),Z=0;!(ae=k.next()).done;)ae=ae.value,_e=Ie+le(ae,Z++),pe+=Se(ae,Y,he,_e,V);else if(ae==="object")throw Y=String(k),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return pe}function Ee(k,Y,he){if(k==null)return k;var Ie=[],V=0;return Se(k,Ie,"","",function(ae){return Y.call(he,ae,V++)}),Ie}function Ce(k){if(k._status===-1){var Y=k._result;Y=Y(),Y.then(function(he){(k._status===0||k._status===-1)&&(k._status=1,k._result=he)},function(he){(k._status===0||k._status===-1)&&(k._status=2,k._result=he)}),k._status===-1&&(k._status=0,k._result=Y)}if(k._status===1)return k._result.default;throw k._result}var re={current:null},te={transition:null},ue={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:te,ReactCurrentOwner:K};function ce(){throw Error("act(...) is not supported in production builds of React.")}return kt.Children={map:Ee,forEach:function(k,Y,he){Ee(k,function(){Y.apply(this,arguments)},he)},count:function(k){var Y=0;return Ee(k,function(){Y++}),Y},toArray:function(k){return Ee(k,function(Y){return Y})||[]},only:function(k){if(!F(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},kt.Component=D,kt.Fragment=t,kt.Profiler=r,kt.PureComponent=L,kt.StrictMode=i,kt.Suspense=c,kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,kt.act=ce,kt.cloneElement=function(k,Y,he){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var Ie=A({},k.props),V=k.key,ae=k.ref,pe=k._owner;if(Y!=null){if(Y.ref!==void 0&&(ae=Y.ref,pe=K.current),Y.key!==void 0&&(V=""+Y.key),k.type&&k.type.defaultProps)var Z=k.type.defaultProps;for(_e in Y)j.call(Y,_e)&&!z.hasOwnProperty(_e)&&(Ie[_e]=Y[_e]===void 0&&Z!==void 0?Z[_e]:Y[_e])}var _e=arguments.length-2;if(_e===1)Ie.children=he;else if(1<_e){Z=Array(_e);for(var Me=0;Me<_e;Me++)Z[Me]=arguments[Me+2];Ie.children=Z}return{$$typeof:n,type:k.type,key:V,ref:ae,props:Ie,_owner:pe}},kt.createContext=function(k){return k={$$typeof:o,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:s,_context:k},k.Consumer=k},kt.createElement=J,kt.createFactory=function(k){var Y=J.bind(null,k);return Y.type=k,Y},kt.createRef=function(){return{current:null}},kt.forwardRef=function(k){return{$$typeof:u,render:k}},kt.isValidElement=F,kt.lazy=function(k){return{$$typeof:f,_payload:{_status:-1,_result:k},_init:Ce}},kt.memo=function(k,Y){return{$$typeof:h,type:k,compare:Y===void 0?null:Y}},kt.startTransition=function(k){var Y=te.transition;te.transition={};try{k()}finally{te.transition=Y}},kt.unstable_act=ce,kt.useCallback=function(k,Y){return re.current.useCallback(k,Y)},kt.useContext=function(k){return re.current.useContext(k)},kt.useDebugValue=function(){},kt.useDeferredValue=function(k){return re.current.useDeferredValue(k)},kt.useEffect=function(k,Y){return re.current.useEffect(k,Y)},kt.useId=function(){return re.current.useId()},kt.useImperativeHandle=function(k,Y,he){return re.current.useImperativeHandle(k,Y,he)},kt.useInsertionEffect=function(k,Y){return re.current.useInsertionEffect(k,Y)},kt.useLayoutEffect=function(k,Y){return re.current.useLayoutEffect(k,Y)},kt.useMemo=function(k,Y){return re.current.useMemo(k,Y)},kt.useReducer=function(k,Y,he){return re.current.useReducer(k,Y,he)},kt.useRef=function(k){return re.current.useRef(k)},kt.useState=function(k){return re.current.useState(k)},kt.useSyncExternalStore=function(k,Y,he){return re.current.useSyncExternalStore(k,Y,he)},kt.useTransition=function(){return re.current.useTransition()},kt.version="18.3.1",kt}var E_;function kD(){return E_||(E_=1,Sy.exports=ID()),Sy.exports}var as=kD();const fc=Js(as);var Ty,A_;function rg(){if(A_)return Ty;A_=1;var n;return typeof window<"u"?n=window:typeof sc<"u"?n=sc:typeof self<"u"?n=self:n={},Ty=n,Ty}var MD=rg();const W=Js(MD),PD={},OD=Object.freeze(Object.defineProperty({__proto__:null,default:PD},Symbol.toStringTag,{value:"Module"})),RD=Ex(OD);var Cy,D_;function yT(){if(D_)return Cy;D_=1;var n=typeof sc<"u"?sc:typeof window<"u"?window:{},e=RD,t;return typeof document<"u"?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"],t||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=e)),Cy=t,Cy}var LD=yT();const Ne=Js(LD);var jf={exports:{}},wy={exports:{}},I_;function ND(){return I_||(I_=1,function(n){function e(){return n.exports=e=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var s in r)({}).hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},n.exports.__esModule=!0,n.exports.default=n.exports,e.apply(null,arguments)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(wy)),wy.exports}var Ey,k_;function FD(){if(k_)return Ey;k_=1,Ey=e;var n=Object.prototype.toString;function e(t){if(!t)return!1;var i=n.call(t);return i==="[object Function]"||typeof t=="function"&&i!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}return Ey}var Ay,M_;function BD(){if(M_)return Ay;M_=1;function n(r,s){var o=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(o)return(o=o.call(r)).next.bind(o);if(Array.isArray(r)||(o=e(r))||s){o&&(r=o);var u=0;return function(){return u>=r.length?{done:!0}:{done:!1,value:r[u++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(r,s){if(r){if(typeof r=="string")return t(r,s);var o=Object.prototype.toString.call(r).slice(8,-1);if(o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set")return Array.from(r);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(r,s)}}function t(r,s){(s==null||s>r.length)&&(s=r.length);for(var o=0,u=new Array(s);o<s;o++)u[o]=r[o];return u}var i=function(){function r(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var s=r.prototype;return s.getIsEnabled=function(){return this.enabled_},s.enable=function(){this.enabled_=!0},s.disable=function(){this.enabled_=!1},s.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},s.addInterceptor=function(u,c){this.typeToInterceptorsMap_.has(u)||this.typeToInterceptorsMap_.set(u,new Set);var h=this.typeToInterceptorsMap_.get(u);return h.has(c)?!1:(h.add(c),!0)},s.removeInterceptor=function(u,c){var h=this.typeToInterceptorsMap_.get(u);return h&&h.has(c)?(h.delete(c),!0):!1},s.clearInterceptorsByType=function(u){var c=this.typeToInterceptorsMap_.get(u);return c?(this.typeToInterceptorsMap_.delete(u),this.typeToInterceptorsMap_.set(u,new Set),!0):!1},s.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},s.getForType=function(u){return this.typeToInterceptorsMap_.get(u)||new Set},s.execute=function(u,c){for(var h=this.getForType(u),f=n(h),m;!(m=f()).done;){var x=m.value;try{c=x(c)}catch{}}return c},r}();return Ay=i,Ay}var Dy,P_;function jD(){if(P_)return Dy;P_=1;var n=function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var i=t.prototype;return i.getIsEnabled=function(){return this.enabled_},i.enable=function(){this.enabled_=!0},i.disable=function(){this.enabled_=!1},i.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},i.getMaxAttempts=function(){return this.maxAttempts_},i.setMaxAttempts=function(s){this.maxAttempts_=s},i.getDelayFactor=function(){return this.delayFactor_},i.setDelayFactor=function(s){this.delayFactor_=s},i.getFuzzFactor=function(){return this.fuzzFactor_},i.setFuzzFactor=function(s){this.fuzzFactor_=s},i.getInitialDelay=function(){return this.initialDelay_},i.setInitialDelay=function(s){this.initialDelay_=s},i.createRetry=function(s){var o=s===void 0?{}:s,u=o.maxAttempts,c=o.delayFactor,h=o.fuzzFactor,f=o.initialDelay;return new e({maxAttempts:u||this.maxAttempts_,delayFactor:c||this.delayFactor_,fuzzFactor:h||this.fuzzFactor_,initialDelay:f||this.initialDelay_})},t}(),e=function(){function t(r){this.maxAttempts_=r.maxAttempts,this.delayFactor_=r.delayFactor,this.fuzzFactor_=r.fuzzFactor,this.currentDelay_=r.initialDelay,this.currentAttempt_=1}var i=t.prototype;return i.moveToNextAttempt=function(){this.currentAttempt_++;var s=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+s},i.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},i.getCurrentDelay=function(){return this.currentDelay_},i.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},i.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},i.getCurrentFuzzedDelay=function(){var s=this.getCurrentMinPossibleDelay(),o=this.getCurrentMaxPossibleDelay();return s+Math.random()*(o-s)},t}();return Dy=n,Dy}var Iy,O_;function UD(){if(O_)return Iy;O_=1;var n=rg(),e=function(r,s){return s===void 0&&(s=!1),function(o,u,c){if(o){r(o);return}if(u.statusCode>=400&&u.statusCode<=599){var h=c;if(s)if(n.TextDecoder){var f=t(u.headers&&u.headers["content-type"]);try{h=new TextDecoder(f).decode(c)}catch{}}else h=String.fromCharCode.apply(null,new Uint8Array(c));r({cause:h});return}r(null,c)}};function t(i){return i===void 0&&(i=""),i.toLowerCase().split(";").reduce(function(r,s){var o=s.split("="),u=o[0],c=o[1];return u.trim()==="charset"?c.trim():r},"utf-8")}return Iy=e,Iy}var R_;function $D(){if(R_)return jf.exports;R_=1;var n=rg(),e=ND(),t=FD(),i=BD(),r=jD();h.httpHandler=UD(),h.requestInterceptorsStorage=new i,h.responseInterceptorsStorage=new i,h.retryManager=new r;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var s=function(A){var C={};return A&&A.trim().split(`
`).forEach(function(D){var N=D.indexOf(":"),L=D.slice(0,N).trim().toLowerCase(),P=D.slice(N+1).trim();typeof C[L]>"u"?C[L]=P:Array.isArray(C[L])?C[L].push(P):C[L]=[C[L],P]}),C};jf.exports=h,jf.exports.default=h,h.XMLHttpRequest=n.XMLHttpRequest||x,h.XDomainRequest="withCredentials"in new h.XMLHttpRequest?h.XMLHttpRequest:n.XDomainRequest,o(["get","put","post","patch","head","delete"],function(w){h[w==="delete"?"del":w]=function(A,C,D){return C=c(A,C,D),C.method=w.toUpperCase(),f(C)}});function o(w,A){for(var C=0;C<w.length;C++)A(w[C])}function u(w){for(var A in w)if(w.hasOwnProperty(A))return!1;return!0}function c(w,A,C){var D=w;return t(A)?(C=A,typeof w=="string"&&(D={uri:w})):D=e({},A,{uri:w}),D.callback=C,D}function h(w,A,C){return A=c(w,A,C),f(A)}function f(w){if(typeof w.callback>"u")throw new Error("callback argument missing");if(w.requestType&&h.requestInterceptorsStorage.getIsEnabled()){var A={uri:w.uri||w.url,headers:w.headers||{},body:w.body,metadata:w.metadata||{},retry:w.retry,timeout:w.timeout},C=h.requestInterceptorsStorage.execute(w.requestType,A);w.uri=C.uri,w.headers=C.headers,w.body=C.body,w.metadata=C.metadata,w.retry=C.retry,w.timeout=C.timeout}var D=!1,N=function(te,ue,ce){D||(D=!0,w.callback(te,ue,ce))};function L(){K.readyState===4&&!h.responseInterceptorsStorage.getIsEnabled()&&setTimeout(j,0)}function P(){var re=void 0;if(K.response?re=K.response:re=K.responseText||m(K),Se)try{re=JSON.parse(re)}catch{}return re}function X(re){if(clearTimeout(Ee),clearTimeout(w.retryTimeout),re instanceof Error||(re=new Error(""+(re||"Unknown XMLHttpRequest Error"))),re.statusCode=0,!J&&h.retryManager.getIsEnabled()&&w.retry&&w.retry.shouldRetry()){w.retryTimeout=setTimeout(function(){w.retry.moveToNextAttempt(),w.xhr=K,f(w)},w.retry.getCurrentFuzzedDelay());return}if(w.requestType&&h.responseInterceptorsStorage.getIsEnabled()){var te={headers:Ce.headers||{},body:Ce.body,responseUrl:K.responseURL,responseType:K.responseType},ue=h.responseInterceptorsStorage.execute(w.requestType,te);Ce.body=ue.body,Ce.headers=ue.headers}return N(re,Ce)}function j(){if(!J){var re;clearTimeout(Ee),clearTimeout(w.retryTimeout),w.useXDR&&K.status===void 0?re=200:re=K.status===1223?204:K.status;var te=Ce,ue=null;if(re!==0?(te={body:P(),statusCode:re,method:F,headers:{},url:R,rawRequest:K},K.getAllResponseHeaders&&(te.headers=s(K.getAllResponseHeaders()))):ue=new Error("Internal XMLHttpRequest Error"),w.requestType&&h.responseInterceptorsStorage.getIsEnabled()){var ce={headers:te.headers||{},body:te.body,responseUrl:K.responseURL,responseType:K.responseType},k=h.responseInterceptorsStorage.execute(w.requestType,ce);te.body=k.body,te.headers=k.headers}return N(ue,te,te.body)}}var K=w.xhr||null;K||(w.cors||w.useXDR?K=new h.XDomainRequest:K=new h.XMLHttpRequest);var z,J,R=K.url=w.uri||w.url,F=K.method=w.method||"GET",de=w.body||w.data,fe=K.headers=w.headers||{},le=!!w.sync,Se=!1,Ee,Ce={body:void 0,headers:{},statusCode:0,method:F,url:R,rawRequest:K};if("json"in w&&w.json!==!1&&(Se=!0,fe.accept||fe.Accept||(fe.Accept="application/json"),F!=="GET"&&F!=="HEAD"&&(fe["content-type"]||fe["Content-Type"]||(fe["Content-Type"]="application/json"),de=JSON.stringify(w.json===!0?de:w.json))),K.onreadystatechange=L,K.onload=j,K.onerror=X,K.onprogress=function(){},K.onabort=function(){J=!0,clearTimeout(w.retryTimeout)},K.ontimeout=X,K.open(F,R,!le,w.username,w.password),le||(K.withCredentials=!!w.withCredentials),!le&&w.timeout>0&&(Ee=setTimeout(function(){if(!J){J=!0,K.abort("timeout");var re=new Error("XMLHttpRequest timeout");re.code="ETIMEDOUT",X(re)}},w.timeout)),K.setRequestHeader)for(z in fe)fe.hasOwnProperty(z)&&K.setRequestHeader(z,fe[z]);else if(w.headers&&!u(w.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in w&&(K.responseType=w.responseType),"beforeSend"in w&&typeof w.beforeSend=="function"&&w.beforeSend(K),K.send(de||null),K}function m(w){try{if(w.responseType==="document")return w.responseXML;var A=w.responseXML&&w.responseXML.documentElement.nodeName==="parsererror";if(w.responseType===""&&!A)return w.responseXML}catch{}return null}function x(){}return jf.exports}var zD=$D();const vT=Js(zD);var ky={exports:{}},My,L_;function VD(){if(L_)return My;L_=1;var n=yT(),e=Object.create||function(){function R(){}return function(F){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return R.prototype=F,new R}}();function t(R,F){this.name="ParsingError",this.code=R.code,this.message=F||R.message}t.prototype=e(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function i(R){function F(fe,le,Se,Ee){return(fe|0)*3600+(le|0)*60+(Se|0)+(Ee|0)/1e3}var de=R.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return de?de[3]?F(de[1],de[2],de[3].replace(":",""),de[4]):de[1]>59?F(de[1],de[2],0,de[4]):F(0,de[1],de[2],de[4]):null}function r(){this.values=e(null)}r.prototype={set:function(R,F){!this.get(R)&&F!==""&&(this.values[R]=F)},get:function(R,F,de){return de?this.has(R)?this.values[R]:F[de]:this.has(R)?this.values[R]:F},has:function(R){return R in this.values},alt:function(R,F,de){for(var fe=0;fe<de.length;++fe)if(F===de[fe]){this.set(R,F);break}},integer:function(R,F){/^-?\d+$/.test(F)&&this.set(R,parseInt(F,10))},percent:function(R,F){return F.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(F=parseFloat(F),F>=0&&F<=100)?(this.set(R,F),!0):!1}};function s(R,F,de,fe){var le=fe?R.split(fe):[R];for(var Se in le)if(typeof le[Se]=="string"){var Ee=le[Se].split(de);if(Ee.length===2){var Ce=Ee[0].trim(),re=Ee[1].trim();F(Ce,re)}}}function o(R,F,de){var fe=R;function le(){var Ce=i(R);if(Ce===null)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+fe);return R=R.replace(/^[^\sa-zA-Z-]+/,""),Ce}function Se(Ce,re){var te=new r;s(Ce,function(ue,ce){switch(ue){case"region":for(var k=de.length-1;k>=0;k--)if(de[k].id===ce){te.set(ue,de[k].region);break}break;case"vertical":te.alt(ue,ce,["rl","lr"]);break;case"line":var Y=ce.split(","),he=Y[0];te.integer(ue,he),te.percent(ue,he)&&te.set("snapToLines",!1),te.alt(ue,he,["auto"]),Y.length===2&&te.alt("lineAlign",Y[1],["start","center","end"]);break;case"position":Y=ce.split(","),te.percent(ue,Y[0]),Y.length===2&&te.alt("positionAlign",Y[1],["start","center","end"]);break;case"size":te.percent(ue,ce);break;case"align":te.alt(ue,ce,["start","center","end","left","right"]);break}},/:/,/\s/),re.region=te.get("region",null),re.vertical=te.get("vertical","");try{re.line=te.get("line","auto")}catch{}re.lineAlign=te.get("lineAlign","start"),re.snapToLines=te.get("snapToLines",!0),re.size=te.get("size",100);try{re.align=te.get("align","center")}catch{re.align=te.get("align","middle")}try{re.position=te.get("position","auto")}catch{re.position=te.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},re.align)}re.positionAlign=te.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},re.align)}function Ee(){R=R.replace(/^\s+/,"")}if(Ee(),F.startTime=le(),Ee(),R.substr(0,3)!=="-->")throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+fe);R=R.substr(3),Ee(),F.endTime=le(),Ee(),Se(R,F)}var u=n.createElement&&n.createElement("textarea"),c={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},f={v:"title",lang:"lang"},m={rt:"ruby"};function x(R,F){function de(){if(!F)return null;function he(V){return F=F.substr(V.length),V}var Ie=F.match(/^([^<]*)(<[^>]*>?)?/);return he(Ie[1]?Ie[1]:Ie[2])}function fe(he){return u.innerHTML=he,he=u.textContent,u.textContent="",he}function le(he,Ie){return!m[Ie.localName]||m[Ie.localName]===he.localName}function Se(he,Ie){var V=c[he];if(!V)return null;var ae=R.document.createElement(V),pe=f[he];return pe&&Ie&&(ae[pe]=Ie.trim()),ae}for(var Ee=R.document.createElement("div"),Ce=Ee,re,te=[];(re=de())!==null;){if(re[0]==="<"){if(re[1]==="/"){te.length&&te[te.length-1]===re.substr(2).replace(">","")&&(te.pop(),Ce=Ce.parentNode);continue}var ue=i(re.substr(1,re.length-2)),ce;if(ue){ce=R.document.createProcessingInstruction("timestamp",ue),Ce.appendChild(ce);continue}var k=re.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!k||(ce=Se(k[1],k[3]),!ce)||!le(Ce,ce))continue;if(k[2]){var Y=k[2].split(".");Y.forEach(function(he){var Ie=/^bg_/.test(he),V=Ie?he.slice(3):he;if(h.hasOwnProperty(V)){var ae=Ie?"background-color":"color",pe=h[V];ce.style[ae]=pe}}),ce.className=Y.join(" ")}te.push(k[1]),Ce.appendChild(ce),Ce=ce;continue}Ce.appendChild(R.document.createTextNode(fe(re)))}return Ee}var w=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function A(R){for(var F=0;F<w.length;F++){var de=w[F];if(R>=de[0]&&R<=de[1])return!0}return!1}function C(R){var F=[],de="",fe;if(!R||!R.childNodes)return"ltr";function le(Ce,re){for(var te=re.childNodes.length-1;te>=0;te--)Ce.push(re.childNodes[te])}function Se(Ce){if(!Ce||!Ce.length)return null;var re=Ce.pop(),te=re.textContent||re.innerText;if(te){var ue=te.match(/^.*(\n|\r)/);return ue?(Ce.length=0,ue[0]):te}if(re.tagName==="ruby")return Se(Ce);if(re.childNodes)return le(Ce,re),Se(Ce)}for(le(F,R);de=Se(F);)for(var Ee=0;Ee<de.length;Ee++)if(fe=de.charCodeAt(Ee),A(fe))return"rtl";return"ltr"}function D(R){if(typeof R.line=="number"&&(R.snapToLines||R.line>=0&&R.line<=100))return R.line;if(!R.track||!R.track.textTrackList||!R.track.textTrackList.mediaElement)return-1;for(var F=R.track,de=F.textTrackList,fe=0,le=0;le<de.length&&de[le]!==F;le++)de[le].mode==="showing"&&fe++;return++fe*-1}function N(){}N.prototype.applyStyles=function(R,F){F=F||this.div;for(var de in R)R.hasOwnProperty(de)&&(F.style[de]=R[de])},N.prototype.formatStyle=function(R,F){return R===0?0:R+F};function L(R,F,de){N.call(this),this.cue=F,this.cueDiv=x(R,F.text);var fe={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:F.vertical===""?"horizontal-tb":F.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(fe,this.cueDiv),this.div=R.document.createElement("div"),fe={direction:C(this.cueDiv),writingMode:F.vertical===""?"horizontal-tb":F.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:F.align==="middle"?"center":F.align,font:de.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(fe),this.div.appendChild(this.cueDiv);var le=0;switch(F.positionAlign){case"start":case"line-left":le=F.position;break;case"center":le=F.position-F.size/2;break;case"end":case"line-right":le=F.position-F.size;break}F.vertical===""?this.applyStyles({left:this.formatStyle(le,"%"),width:this.formatStyle(F.size,"%")}):this.applyStyles({top:this.formatStyle(le,"%"),height:this.formatStyle(F.size,"%")}),this.move=function(Se){this.applyStyles({top:this.formatStyle(Se.top,"px"),bottom:this.formatStyle(Se.bottom,"px"),left:this.formatStyle(Se.left,"px"),right:this.formatStyle(Se.right,"px"),height:this.formatStyle(Se.height,"px"),width:this.formatStyle(Se.width,"px")})}}L.prototype=e(N.prototype),L.prototype.constructor=L;function P(R){var F,de,fe,le;if(R.div){de=R.div.offsetHeight,fe=R.div.offsetWidth,le=R.div.offsetTop;var Se=(Se=R.div.childNodes)&&(Se=Se[0])&&Se.getClientRects&&Se.getClientRects();R=R.div.getBoundingClientRect(),F=Se?Math.max(Se[0]&&Se[0].height||0,R.height/Se.length):0}this.left=R.left,this.right=R.right,this.top=R.top||le,this.height=R.height||de,this.bottom=R.bottom||le+(R.height||de),this.width=R.width||fe,this.lineHeight=F!==void 0?F:R.lineHeight}P.prototype.move=function(R,F){switch(F=F!==void 0?F:this.lineHeight,R){case"+x":this.left+=F,this.right+=F;break;case"-x":this.left-=F,this.right-=F;break;case"+y":this.top+=F,this.bottom+=F;break;case"-y":this.top-=F,this.bottom-=F;break}},P.prototype.overlaps=function(R){return this.left<R.right&&this.right>R.left&&this.top<R.bottom&&this.bottom>R.top},P.prototype.overlapsAny=function(R){for(var F=0;F<R.length;F++)if(this.overlaps(R[F]))return!0;return!1},P.prototype.within=function(R){return this.top>=R.top&&this.bottom<=R.bottom&&this.left>=R.left&&this.right<=R.right},P.prototype.overlapsOppositeAxis=function(R,F){switch(F){case"+x":return this.left<R.left;case"-x":return this.right>R.right;case"+y":return this.top<R.top;case"-y":return this.bottom>R.bottom}},P.prototype.intersectPercentage=function(R){var F=Math.max(0,Math.min(this.right,R.right)-Math.max(this.left,R.left)),de=Math.max(0,Math.min(this.bottom,R.bottom)-Math.max(this.top,R.top)),fe=F*de;return fe/(this.height*this.width)},P.prototype.toCSSCompatValues=function(R){return{top:this.top-R.top,bottom:R.bottom-this.bottom,left:this.left-R.left,right:R.right-this.right,height:this.height,width:this.width}},P.getSimpleBoxPosition=function(R){var F=R.div?R.div.offsetHeight:R.tagName?R.offsetHeight:0,de=R.div?R.div.offsetWidth:R.tagName?R.offsetWidth:0,fe=R.div?R.div.offsetTop:R.tagName?R.offsetTop:0;R=R.div?R.div.getBoundingClientRect():R.tagName?R.getBoundingClientRect():R;var le={left:R.left,right:R.right,top:R.top||fe,height:R.height||F,bottom:R.bottom||fe+(R.height||F),width:R.width||de};return le};function X(R,F,de,fe){function le(V,ae){for(var pe,Z=new P(V),_e=1,Me=0;Me<ae.length;Me++){for(;V.overlapsOppositeAxis(de,ae[Me])||V.within(de)&&V.overlapsAny(fe);)V.move(ae[Me]);if(V.within(de))return V;var $e=V.intersectPercentage(de);_e>$e&&(pe=new P(V),_e=$e),V=new P(Z)}return pe||Z}var Se=new P(F),Ee=F.cue,Ce=D(Ee),re=[];if(Ee.snapToLines){var te;switch(Ee.vertical){case"":re=["+y","-y"],te="height";break;case"rl":re=["+x","-x"],te="width";break;case"lr":re=["-x","+x"],te="width";break}var ue=Se.lineHeight,ce=ue*Math.round(Ce),k=de[te]+ue,Y=re[0];Math.abs(ce)>k&&(ce=ce<0?-1:1,ce*=Math.ceil(k/ue)*ue),Ce<0&&(ce+=Ee.vertical===""?de.height:de.width,re=re.reverse()),Se.move(Y,ce)}else{var he=Se.lineHeight/de.height*100;switch(Ee.lineAlign){case"center":Ce-=he/2;break;case"end":Ce-=he;break}switch(Ee.vertical){case"":F.applyStyles({top:F.formatStyle(Ce,"%")});break;case"rl":F.applyStyles({left:F.formatStyle(Ce,"%")});break;case"lr":F.applyStyles({right:F.formatStyle(Ce,"%")});break}re=["+y","-x","+x","-y"],Se=new P(F)}var Ie=le(Se,re);F.move(Ie.toCSSCompatValues(de))}function j(){}j.StringDecoder=function(){return{decode:function(R){if(!R)return"";if(typeof R!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(R))}}},j.convertCueToDOMTree=function(R,F){return!R||!F?null:x(R,F)};var K=.05,z="sans-serif",J="1.5%";return j.processCues=function(R,F,de){if(!R||!F||!de)return null;for(;de.firstChild;)de.removeChild(de.firstChild);var fe=R.document.createElement("div");fe.style.position="absolute",fe.style.left="0",fe.style.right="0",fe.style.top="0",fe.style.bottom="0",fe.style.margin=J,de.appendChild(fe);function le(ue){for(var ce=0;ce<ue.length;ce++)if(ue[ce].hasBeenReset||!ue[ce].displayState)return!0;return!1}if(!le(F)){for(var Se=0;Se<F.length;Se++)fe.appendChild(F[Se].displayState);return}var Ee=[],Ce=P.getSimpleBoxPosition(fe),re=Math.round(Ce.height*K*100)/100,te={font:re+"px "+z};(function(){for(var ue,ce,k=0;k<F.length;k++)ce=F[k],ue=new L(R,ce,te),fe.appendChild(ue.div),X(R,ue,Ce,Ee),ce.displayState=ue.div,Ee.push(P.getSimpleBoxPosition(ue))})()},j.Parser=function(R,F,de){de||(de=F,F={}),F||(F={}),this.window=R,this.vttjs=F,this.state="INITIAL",this.buffer="",this.decoder=de||new TextDecoder("utf8"),this.regionList=[]},j.Parser.prototype={reportOrThrowError:function(R){if(R instanceof t)this.onparsingerror&&this.onparsingerror(R);else throw R},parse:function(R){var F=this;R&&(F.buffer+=F.decoder.decode(R,{stream:!0}));function de(){for(var ue=F.buffer,ce=0;ce<ue.length&&ue[ce]!=="\r"&&ue[ce]!==`
`;)++ce;var k=ue.substr(0,ce);return ue[ce]==="\r"&&++ce,ue[ce]===`
`&&++ce,F.buffer=ue.substr(ce),k}function fe(ue){var ce=new r;if(s(ue,function(Y,he){switch(Y){case"id":ce.set(Y,he);break;case"width":ce.percent(Y,he);break;case"lines":ce.integer(Y,he);break;case"regionanchor":case"viewportanchor":var Ie=he.split(",");if(Ie.length!==2)break;var V=new r;if(V.percent("x",Ie[0]),V.percent("y",Ie[1]),!V.has("x")||!V.has("y"))break;ce.set(Y+"X",V.get("x")),ce.set(Y+"Y",V.get("y"));break;case"scroll":ce.alt(Y,he,["up"]);break}},/=/,/\s/),ce.has("id")){var k=new(F.vttjs.VTTRegion||F.window.VTTRegion);k.width=ce.get("width",100),k.lines=ce.get("lines",3),k.regionAnchorX=ce.get("regionanchorX",0),k.regionAnchorY=ce.get("regionanchorY",100),k.viewportAnchorX=ce.get("viewportanchorX",0),k.viewportAnchorY=ce.get("viewportanchorY",100),k.scroll=ce.get("scroll",""),F.onregion&&F.onregion(k),F.regionList.push({id:ce.get("id"),region:k})}}function le(ue){var ce=new r;s(ue,function(k,Y){switch(k){case"MPEGT":ce.integer(k+"S",Y);break;case"LOCA":ce.set(k+"L",i(Y));break}},/[^\d]:/,/,/),F.ontimestampmap&&F.ontimestampmap({MPEGTS:ce.get("MPEGTS"),LOCAL:ce.get("LOCAL")})}function Se(ue){ue.match(/X-TIMESTAMP-MAP/)?s(ue,function(ce,k){switch(ce){case"X-TIMESTAMP-MAP":le(k);break}},/=/):s(ue,function(ce,k){switch(ce){case"Region":fe(k);break}},/:/)}try{var Ee;if(F.state==="INITIAL"){if(!/\r\n|\n/.test(F.buffer))return this;Ee=de();var Ce=Ee.match(/^WEBVTT([ \t].*)?$/);if(!Ce||!Ce[0])throw new t(t.Errors.BadSignature);F.state="HEADER"}for(var re=!1;F.buffer;){if(!/\r\n|\n/.test(F.buffer))return this;switch(re?re=!1:Ee=de(),F.state){case"HEADER":/:/.test(Ee)?Se(Ee):Ee||(F.state="ID");continue;case"NOTE":Ee||(F.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(Ee)){F.state="NOTE";break}if(!Ee)continue;F.cue=new(F.vttjs.VTTCue||F.window.VTTCue)(0,0,"");try{F.cue.align="center"}catch{F.cue.align="middle"}if(F.state="CUE",Ee.indexOf("-->")===-1){F.cue.id=Ee;continue}case"CUE":try{o(Ee,F.cue,F.regionList)}catch(ue){F.reportOrThrowError(ue),F.cue=null,F.state="BADCUE";continue}F.state="CUETEXT";continue;case"CUETEXT":var te=Ee.indexOf("-->")!==-1;if(!Ee||te&&(re=!0)){F.oncue&&F.oncue(F.cue),F.cue=null,F.state="ID";continue}F.cue.text&&(F.cue.text+=`
`),F.cue.text+=Ee.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":Ee||(F.state="ID");continue}}}catch(ue){F.reportOrThrowError(ue),F.state==="CUETEXT"&&F.cue&&F.oncue&&F.oncue(F.cue),F.cue=null,F.state=F.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var R=this;try{if(R.buffer+=R.decoder.decode(),(R.cue||R.state==="HEADER")&&(R.buffer+=`

`,R.parse()),R.state==="INITIAL")throw new t(t.Errors.BadSignature)}catch(F){R.reportOrThrowError(F)}return R.onflush&&R.onflush(),this}},My=j,My}var Py,N_;function HD(){if(N_)return Py;N_=1;var n="auto",e={"":1,lr:1,rl:1},t={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function i(o){if(typeof o!="string")return!1;var u=e[o.toLowerCase()];return u?o.toLowerCase():!1}function r(o){if(typeof o!="string")return!1;var u=t[o.toLowerCase()];return u?o.toLowerCase():!1}function s(o,u,c){this.hasBeenReset=!1;var h="",f=!1,m=o,x=u,w=c,A=null,C="",D=!0,N="auto",L="start",P="auto",X="auto",j=100,K="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return h},set:function(z){h=""+z}},pauseOnExit:{enumerable:!0,get:function(){return f},set:function(z){f=!!z}},startTime:{enumerable:!0,get:function(){return m},set:function(z){if(typeof z!="number")throw new TypeError("Start time must be set to a number.");m=z,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return x},set:function(z){if(typeof z!="number")throw new TypeError("End time must be set to a number.");x=z,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return w},set:function(z){w=""+z,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return A},set:function(z){A=z,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return C},set:function(z){var J=i(z);if(J===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");C=J,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return D},set:function(z){D=!!z,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return N},set:function(z){if(typeof z!="number"&&z!==n)throw new SyntaxError("Line: an invalid number or illegal string was specified.");N=z,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return L},set:function(z){var J=r(z);J?(L=J,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return P},set:function(z){if(z<0||z>100)throw new Error("Position must be between 0 and 100.");P=z,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return X},set:function(z){var J=r(z);J?(X=J,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return j},set:function(z){if(z<0||z>100)throw new Error("Size must be between 0 and 100.");j=z,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return K},set:function(z){var J=r(z);if(!J)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");K=J,this.hasBeenReset=!0}}}),this.displayState=void 0}return s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Py=s,Py}var Oy,F_;function qD(){if(F_)return Oy;F_=1;var n={"":!0,up:!0};function e(r){if(typeof r!="string")return!1;var s=n[r.toLowerCase()];return s?r.toLowerCase():!1}function t(r){return typeof r=="number"&&r>=0&&r<=100}function i(){var r=100,s=3,o=0,u=100,c=0,h=100,f="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return r},set:function(m){if(!t(m))throw new Error("Width must be between 0 and 100.");r=m}},lines:{enumerable:!0,get:function(){return s},set:function(m){if(typeof m!="number")throw new TypeError("Lines must be set to a number.");s=m}},regionAnchorY:{enumerable:!0,get:function(){return u},set:function(m){if(!t(m))throw new Error("RegionAnchorX must be between 0 and 100.");u=m}},regionAnchorX:{enumerable:!0,get:function(){return o},set:function(m){if(!t(m))throw new Error("RegionAnchorY must be between 0 and 100.");o=m}},viewportAnchorY:{enumerable:!0,get:function(){return h},set:function(m){if(!t(m))throw new Error("ViewportAnchorY must be between 0 and 100.");h=m}},viewportAnchorX:{enumerable:!0,get:function(){return c},set:function(m){if(!t(m))throw new Error("ViewportAnchorX must be between 0 and 100.");c=m}},scroll:{enumerable:!0,get:function(){return f},set:function(m){var x=e(m);x===!1?console.warn("Scroll: an invalid or illegal string was specified."):f=x}}})}return Oy=i,Oy}var B_;function WD(){if(B_)return ky.exports;B_=1;var n=rg(),e=ky.exports={WebVTT:VD(),VTTCue:HD(),VTTRegion:qD()};n.vttjs=e,n.WebVTT=e.WebVTT;var t=e.VTTCue,i=e.VTTRegion,r=n.VTTCue,s=n.VTTRegion;return e.shim=function(){n.VTTCue=t,n.VTTRegion=i},e.restore=function(){n.VTTCue=r,n.VTTRegion=s},n.VTTCue||e.shim(),ky.exports}var GD=WD();const j_=Js(GD);function Ii(){return Ii=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ii.apply(null,arguments)}var U_="https://example.com",sg=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=W.location&&W.location.href||"");var i=/^\/\//.test(e),r=!W.location&&!/\/\//i.test(e);e=new W.URL(e,W.location||U_);var s=new URL(t,e);return r?s.href.slice(U_.length):i?s.href.slice(s.protocol.length):s.href},E1=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(i,r){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(r)},e.off=function(i,r){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(r);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},e.trigger=function(i){var r=this.listeners[i];if(r)if(arguments.length===2)for(var s=r.length,o=0;o<s;++o)r[o].call(this,arguments[1]);else for(var u=Array.prototype.slice.call(arguments,1),c=r.length,h=0;h<c;++h)r[h].apply(this,u)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(r){i.push(r)})},n}(),KD=function(e){return W.atob?W.atob(e):Buffer.from(e,"base64").toString("binary")};function _T(n){for(var e=KD(n),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class XD extends E1{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const YD="	",Ry=function(n){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(n||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},QD=function(){const t="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+t+")")},gn=function(n){const e={};if(!n)return e;const t=n.split(QD());let i=t.length,r;for(;i--;)t[i]!==""&&(r=/([^=]*)=(.*)/.exec(t[i]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),e[r[0]]=r[1]);return e},$_=n=>{const e=n.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t};class JD extends E1{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((s,o)=>{const u=o(e);return u===e?s:s.concat([u])},[e]).forEach(s=>{for(let o=0;o<this.customParsers.length;o++)if(this.customParsers[o].call(this,s))return;if(s.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:s.slice(1)});return}if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t){i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),this.trigger("data",i);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t){i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t){i=Ii(Ry(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t){i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(i={type:"tag",tagType:"map"},t[1]){const o=gn(t[1]);o.URI&&(i.uri=o.URI),o.BYTERANGE&&(i.byterange=Ry(o.BYTERANGE))}this.trigger("data",i);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){i={type:"tag",tagType:"stream-inf"},t[1]&&(i.attributes=gn(t[1]),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=$_(i.attributes.RESOLUTION)),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t){i={type:"tag",tagType:"media"},t[1]&&(i.attributes=gn(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-ENDLIST/.exec(s),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t){i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(s),t){i={type:"tag",tagType:"key"},t[1]&&(i.attributes=gn(t[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(t=/^#EXT-X-START:(.*)$/.exec(s),t){i={type:"tag",tagType:"start"},t[1]&&(i.attributes=gn(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"skip"},i.attributes=gn(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(YD)),this.trigger("data",i);return}if(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"part"},i.attributes=gn(t[1]),["DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["INDEPENDENT","GAP"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/.test(i.attributes[o]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=Ry(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"server-control"},i.attributes=gn(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/.test(i.attributes[o]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"part-inf"},i.attributes=gn(t[1]),["PART-TARGET"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=gn(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(o){if(i.attributes.hasOwnProperty(o)){i.attributes[o]=parseInt(i.attributes[o],10);const u=o==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[u]=i.attributes[o],delete i.attributes[o]}}),this.trigger("data",i);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=gn(t[1]),["LAST-MSN","LAST-PART"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseInt(i.attributes[o],10))}),this.trigger("data",i);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"daterange"},i.attributes=gn(t[1]),["ID","CLASS"].forEach(function(u){i.attributes.hasOwnProperty(u)&&(i.attributes[u]=String(i.attributes[u]))}),["START-DATE","END-DATE"].forEach(function(u){i.attributes.hasOwnProperty(u)&&(i.attributes[u]=new Date(i.attributes[u]))}),["DURATION","PLANNED-DURATION"].forEach(function(u){i.attributes.hasOwnProperty(u)&&(i.attributes[u]=parseFloat(i.attributes[u]))}),["END-ON-NEXT"].forEach(function(u){i.attributes.hasOwnProperty(u)&&(i.attributes[u]=/YES/i.test(i.attributes[u]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(u){i.attributes.hasOwnProperty(u)&&(i.attributes[u]=i.attributes[u].toString(16))});const o=/^X-([A-Z]+-)+[A-Z]+$/;for(const u in i.attributes){if(!o.test(u))continue;const c=/[0-9A-Fa-f]{6}/g.test(i.attributes[u]),h=/^\d+(\.\d+)?$/.test(i.attributes[u]);i.attributes[u]=c?i.attributes[u].toString(16):h?parseFloat(i.attributes[u]):String(i.attributes[u])}this.trigger("data",i);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(s),t){i={type:"tag",tagType:"content-steering"},i.attributes=gn(t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(s),t){i={type:"tag",tagType:"i-frame-playlist"},i.attributes=gn(t[1]),i.attributes.URI&&(i.uri=i.attributes.URI),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=$_(i.attributes.RESOLUTION)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),this.trigger("data",i);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(s),t){i={type:"tag",tagType:"define"},i.attributes=gn(t[1]),this.trigger("data",i);return}this.trigger("data",{type:"tag",data:s.slice(4)})})}addParser({expression:e,customType:t,dataParser:i,segment:r}){typeof i!="function"&&(i=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:i(s),customType:t,segment:r}),!0})}addTagMapper({expression:e,map:t}){const i=r=>e.test(r)?t(r):r;this.tagMappers.push(i)}}const ZD=n=>n.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),lo=function(n){const e={};return Object.keys(n).forEach(function(t){e[ZD(t)]=n[t]}),e},Ly=function(n){const{serverControl:e,targetDuration:t,partTargetDuration:i}=n;if(!e)return;const r="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",u=t&&t*3,c=i&&i*2;t&&!e.hasOwnProperty(s)&&(e[s]=u,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${u}).`})),u&&e[s]<u&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${u})`}),e[s]=u),i&&!e.hasOwnProperty(o)&&(e[o]=i*3,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[o]}).`})),i&&e[o]<c&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${e[o]}) to partTargetDuration * 2 (${c}).`}),e[o]=c)};class eI extends E1{constructor(e={}){super(),this.lineStream=new XD,this.parseStream=new JD,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,i=[];let r={},s,o,u=!1;const c=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},f="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let m=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let x=0,w=0;const A={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&s&&(r.map=s),!r.key&&o&&(r.key=o),!r.timeline&&typeof m=="number"&&(r.timeline=m),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(C){let D,N;if(t.manifest.definitions){for(const L in t.manifest.definitions)if(C.uri&&(C.uri=C.uri.replace(`{$${L}}`,t.manifest.definitions[L])),C.attributes)for(const P in C.attributes)typeof C.attributes[P]=="string"&&(C.attributes[P]=C.attributes[P].replace(`{$${L}}`,t.manifest.definitions[L]))}({tag(){({version(){C.version&&(this.manifest.version=C.version)},"allow-cache"(){this.manifest.allowCache=C.allowed,"allowed"in C||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const L={};"length"in C&&(r.byterange=L,L.length=C.length,"offset"in C||(C.offset=x)),"offset"in C&&(r.byterange=L,L.offset=C.offset),x=L.offset+L.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),C.title&&(r.title=C.title),C.duration>0&&(r.duration=C.duration),C.duration===0&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(!C.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(C.attributes.METHOD==="NONE"){o=null;return}if(!C.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(C.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:C.attributes};return}if(C.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:C.attributes.URI};return}if(C.attributes.KEYFORMAT===f){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(C.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(C.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),C.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(C.attributes.KEYID&&C.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:C.attributes.KEYFORMAT,keyId:C.attributes.KEYID.substring(2)},pssh:_T(C.attributes.URI.split(",")[1])};return}C.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),o={method:C.attributes.METHOD||"AES-128",uri:C.attributes.URI},typeof C.attributes.IV<"u"&&(o.iv=C.attributes.IV)},"media-sequence"(){if(!isFinite(C.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+C.number});return}this.manifest.mediaSequence=C.number},"discontinuity-sequence"(){if(!isFinite(C.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+C.number});return}this.manifest.discontinuitySequence=C.number,m=C.number},"playlist-type"(){if(!/VOD|EVENT/.test(C.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+C.playlist});return}this.manifest.playlistType=C.playlistType},map(){s={},C.uri&&(s.uri=C.uri),C.byterange&&(s.byterange=C.byterange),o&&(s.key=o)},"stream-inf"(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!C.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}r.attributes||(r.attributes={}),Ii(r.attributes,C.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(C.attributes&&C.attributes.TYPE&&C.attributes["GROUP-ID"]&&C.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const L=this.manifest.mediaGroups[C.attributes.TYPE];L[C.attributes["GROUP-ID"]]=L[C.attributes["GROUP-ID"]]||{},D=L[C.attributes["GROUP-ID"]],N={default:/yes/i.test(C.attributes.DEFAULT)},N.default?N.autoselect=!0:N.autoselect=/yes/i.test(C.attributes.AUTOSELECT),C.attributes.LANGUAGE&&(N.language=C.attributes.LANGUAGE),C.attributes.URI&&(N.uri=C.attributes.URI),C.attributes["INSTREAM-ID"]&&(N.instreamId=C.attributes["INSTREAM-ID"]),C.attributes.CHARACTERISTICS&&(N.characteristics=C.attributes.CHARACTERISTICS),C.attributes.FORCED&&(N.forced=/yes/i.test(C.attributes.FORCED)),D[C.attributes.NAME]=N},discontinuity(){m+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=C.dateTimeString,this.manifest.dateTimeObject=C.dateTimeObject),r.dateTimeString=C.dateTimeString,r.dateTimeObject=C.dateTimeObject;const{lastProgramDateTime:L}=this;this.lastProgramDateTime=new Date(C.dateTimeString).getTime(),L===null&&this.manifest.segments.reduceRight((P,X)=>(X.programDateTime=P-X.duration*1e3,X.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(C.duration)||C.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+C.duration});return}this.manifest.targetDuration=C.duration,Ly.call(this,this.manifest)},start(){if(!C.attributes||isNaN(C.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:C.attributes["TIME-OFFSET"],precise:C.attributes.PRECISE}},"cue-out"(){r.cueOut=C.data},"cue-out-cont"(){r.cueOutCont=C.data},"cue-in"(){r.cueIn=C.data},skip(){this.manifest.skip=lo(C.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",C.attributes,["SKIPPED-SEGMENTS"])},part(){u=!0;const L=this.manifest.segments.length,P=lo(C.attributes);r.parts=r.parts||[],r.parts.push(P),P.byterange&&(P.byterange.hasOwnProperty("offset")||(P.byterange.offset=w),w=P.byterange.offset+P.byterange.length);const X=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${X} for segment #${L}`,C.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((j,K)=>{j.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${K} lacks required attribute(s): LAST-PART`})})},"server-control"(){const L=this.manifest.serverControl=lo(C.attributes);L.hasOwnProperty("canBlockReload")||(L.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Ly.call(this,this.manifest),L.canSkipDateranges&&!L.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const L=this.manifest.segments.length,P=lo(C.attributes),X=P.type&&P.type==="PART";r.preloadHints=r.preloadHints||[],r.preloadHints.push(P),P.byterange&&(P.byterange.hasOwnProperty("offset")||(P.byterange.offset=X?w:0,X&&(w=P.byterange.offset+P.byterange.length)));const j=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${j} for segment #${L}`,C.attributes,["TYPE","URI"]),!!P.type)for(let K=0;K<r.preloadHints.length-1;K++){const z=r.preloadHints[K];z.type&&z.type===P.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${j} for segment #${L} has the same TYPE ${P.type} as preload hint #${K}`})}},"rendition-report"(){const L=lo(C.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(L);const P=this.manifest.renditionReports.length-1,X=["LAST-MSN","URI"];u&&X.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${P}`,C.attributes,X)},"part-inf"(){this.manifest.partInf=lo(C.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",C.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Ly.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(lo(C.attributes));const L=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${L}`,C.attributes,["ID","START-DATE"]);const P=this.manifest.dateRanges[L];P.endDate&&P.startDate&&new Date(P.endDate)<new Date(P.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),P.duration&&P.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),P.plannedDuration&&P.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const X=!!P.endOnNext;if(X&&!P.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),X&&(P.duration||P.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),P.duration&&P.endDate){const K=P.startDate.getTime()+P.duration*1e3;this.manifest.dateRanges[L].endDate=new Date(K)}if(!A[P.id])A[P.id]=P;else{for(const K in A[P.id])if(P[K]&&JSON.stringify(A[P.id][K])!==JSON.stringify(P[K])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const j=this.manifest.dateRanges.findIndex(K=>K.id===P.id);this.manifest.dateRanges[j]=Ii(this.manifest.dateRanges[j],P),A[P.id]=Ii(A[P.id],P),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=lo(C.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",C.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const L=(P,X)=>{if(P in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${P}`});return}this.manifest.definitions[P]=X};if("QUERYPARAM"in C.attributes){if("NAME"in C.attributes||"IMPORT"in C.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const P=this.params.get(C.attributes.QUERYPARAM);if(!P){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${C.attributes.QUERYPARAM}`});return}L(C.attributes.QUERYPARAM,decodeURIComponent(P));return}if("NAME"in C.attributes){if("IMPORT"in C.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in C.attributes)||typeof C.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${C.attributes.NAME}`});return}L(C.attributes.NAME,C.attributes.VALUE);return}if("IMPORT"in C.attributes){if(!this.mainDefinitions[C.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${C.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}L(C.attributes.IMPORT,this.mainDefinitions[C.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:C.attributes,uri:C.uri,timeline:m}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",C.attributes,["BANDWIDTH","URI"])}}[C.tagType]||c).call(t)},uri(){r.uri=C.uri,i.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),o&&(r.key=o),r.timeline=m,s&&(r.map=s),w=0,this.lastProgramDateTime!==null&&(r.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=r.duration*1e3),r={}},comment(){},custom(){C.segment?(r.custom=r.custom||{},r.custom[C.customType]=C.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[C.customType]=C.data)}})[C.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,i){const r=[];i.forEach(function(s){t.hasOwnProperty(s)||r.push(s)}),r.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${r.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var Al={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},tI=["video","audio","text"],z_=["Video","Audio","Text"],bT=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,r){var s=("00"+Number(i).toString(16)).slice(-2),o=("00"+Number(r).toString(16)).slice(-2);return"avc1."+s+"00"+o})},Ms=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(r){r=r.trim();var s;tI.forEach(function(o){var u=Al[o].exec(r.toLowerCase());if(!(!u||u.length<=1)){s=o;var c=r.substring(0,u[1].length),h=r.replace(c,"");i.push({type:c,details:h,mediaType:o})}}),s||i.push({type:r,details:"",mediaType:"unknown"})}),i},iI=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var r in i){var s=i[r];if(s.default&&s.playlists)return Ms(s.playlists[0].attributes.CODECS)}return null},xT=function(e){return e===void 0&&(e=""),Al.audio.test(e.trim().toLowerCase())},nI=function(e){return e===void 0&&(e=""),Al.text.test(e.trim().toLowerCase())},pc=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return bT(s.trim())}),i="video";t.length===1&&xT(t[0])?i="audio":t.length===1&&nI(t[0])&&(i="application");var r="mp4";return t.every(function(s){return Al.mp4.test(s)})?r="mp4":t.every(function(s){return Al.webm.test(s)})?r="webm":t.every(function(s){return Al.ogg.test(s)})&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},Ld=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),W.MediaSource&&W.MediaSource.isTypeSupported&&W.MediaSource.isTypeSupported(pc(e))||t&&W.ManagedMediaSource&&W.ManagedMediaSource.isTypeSupported&&W.ManagedMediaSource.isTypeSupported(pc(e))||!1},Ny=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<z_.length;i++){var r=z_[i];if(Al["muxer"+r].test(t))return!0}return!1})},V_="mp4a.40.2",rI="avc1.4d400d",sI=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,aI=/^application\/dash\+xml/i,ST=function(e){return sI.test(e)?"hls":aI.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},oI=function(e){return e.toString(2).length},lI=function(e){return Math.ceil(oI(e)/8)},TT=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},uI=function(e){return TT(e)},et=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!uI(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Zi=W.BigInt||Number,T0=[Zi("0x1"),Zi("0x100"),Zi("0x10000"),Zi("0x1000000"),Zi("0x100000000"),Zi("0x10000000000"),Zi("0x1000000000000"),Zi("0x100000000000000"),Zi("0x10000000000000000")];(function(){var n=new Uint16Array([65484]),e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var cI=function(e,t){var i=t===void 0?{}:t,r=i.signed,s=r===void 0?!1:r,o=i.le,u=o===void 0?!1:o;e=et(e);var c=u?"reduce":"reduceRight",h=e[c]?e[c]:Array.prototype[c],f=h.call(e,function(x,w,A){var C=u?A:Math.abs(A+1-e.length);return x+Zi(w)*T0[C]},Zi(0));if(s){var m=T0[e.length]/Zi(2)-Zi(1);f=Zi(f),f>m&&(f-=m,f-=m,f-=Zi(2))}return Number(f)},dI=function(e,t){var i={},r=i.le,s=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Zi(e);for(var o=lI(e),u=new Uint8Array(new ArrayBuffer(o)),c=0;c<o;c++){var h=s?c:Math.abs(c+1-u.length);u[h]=Number(e/T0[c]&Zi(255)),e<0&&(u[h]=Math.abs(~u[h]),u[h]-=c===0?1:2)}return u},CT=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i},hI=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(u){return u&&(u.byteLength||u.length)&&typeof u!="string"}),t.length<=1)return et(t[0]);var r=t.reduce(function(u,c,h){return u+(c.byteLength||c.length)},0),s=new Uint8Array(r),o=0;return t.forEach(function(u){u=et(u),s.set(u,o),o+=u.byteLength}),s},hi=function(e,t,i){var r=i===void 0?{}:i,s=r.offset,o=s===void 0?0:s,u=r.mask,c=u===void 0?[]:u;e=et(e),t=et(t);var h=t.every?t.every:Array.prototype.every;return t.length&&e.length-o>=t.length&&h.call(t,function(f,m){var x=c[m]?c[m]&e[o+m]:e[o+m];return f===x})},fI=function(e,t,i){t.forEach(function(r){for(var s in e.mediaGroups[r])for(var o in e.mediaGroups[r][s]){var u=e.mediaGroups[r][s][o];i(u,r,s,o)}})},yd={},pa={},ll={},H_;function ag(){if(H_)return ll;H_=1;function n(s,o,u){if(u===void 0&&(u=Array.prototype),s&&typeof u.find=="function")return u.find.call(s,o);for(var c=0;c<s.length;c++)if(Object.prototype.hasOwnProperty.call(s,c)){var h=s[c];if(o.call(void 0,h,c,s))return h}}function e(s,o){return o===void 0&&(o=Object),o&&typeof o.freeze=="function"?o.freeze(s):s}function t(s,o){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(s[u]=o[u]);return s}var i=e({HTML:"text/html",isHTML:function(s){return s===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return ll.assign=t,ll.find=n,ll.freeze=e,ll.MIME_TYPE=i,ll.NAMESPACE=r,ll}var q_;function wT(){if(q_)return pa;q_=1;var n=ag(),e=n.find,t=n.NAMESPACE;function i(I){return I!==""}function r(I){return I?I.split(/[\t\n\f\r ]+/).filter(i):[]}function s(I,M){return I.hasOwnProperty(M)||(I[M]=!0),I}function o(I){if(!I)return[];var M=r(I);return Object.keys(M.reduce(s,{}))}function u(I){return function(M){return I&&I.indexOf(M)!==-1}}function c(I,M){for(var $ in I)Object.prototype.hasOwnProperty.call(I,$)&&(M[$]=I[$])}function h(I,M){var $=I.prototype;if(!($ instanceof M)){let oe=function(){};oe.prototype=M.prototype,oe=new oe,c($,oe),I.prototype=$=oe}$.constructor!=I&&(typeof I!="function"&&console.error("unknown Class:"+I),$.constructor=I)}var f={},m=f.ELEMENT_NODE=1,x=f.ATTRIBUTE_NODE=2,w=f.TEXT_NODE=3,A=f.CDATA_SECTION_NODE=4,C=f.ENTITY_REFERENCE_NODE=5,D=f.ENTITY_NODE=6,N=f.PROCESSING_INSTRUCTION_NODE=7,L=f.COMMENT_NODE=8,P=f.DOCUMENT_NODE=9,X=f.DOCUMENT_TYPE_NODE=10,j=f.DOCUMENT_FRAGMENT_NODE=11,K=f.NOTATION_NODE=12,z={},J={};z.INDEX_SIZE_ERR=(J[1]="Index size error",1),z.DOMSTRING_SIZE_ERR=(J[2]="DOMString size error",2);var R=z.HIERARCHY_REQUEST_ERR=(J[3]="Hierarchy request error",3);z.WRONG_DOCUMENT_ERR=(J[4]="Wrong document",4),z.INVALID_CHARACTER_ERR=(J[5]="Invalid character",5),z.NO_DATA_ALLOWED_ERR=(J[6]="No data allowed",6),z.NO_MODIFICATION_ALLOWED_ERR=(J[7]="No modification allowed",7);var F=z.NOT_FOUND_ERR=(J[8]="Not found",8);z.NOT_SUPPORTED_ERR=(J[9]="Not supported",9);var de=z.INUSE_ATTRIBUTE_ERR=(J[10]="Attribute in use",10);z.INVALID_STATE_ERR=(J[11]="Invalid state",11),z.SYNTAX_ERR=(J[12]="Syntax error",12),z.INVALID_MODIFICATION_ERR=(J[13]="Invalid modification",13),z.NAMESPACE_ERR=(J[14]="Invalid namespace",14),z.INVALID_ACCESS_ERR=(J[15]="Invalid access",15);function fe(I,M){if(M instanceof Error)var $=M;else $=this,Error.call(this,J[I]),this.message=J[I],Error.captureStackTrace&&Error.captureStackTrace(this,fe);return $.code=I,M&&(this.message=this.message+": "+M),$}fe.prototype=Error.prototype,c(z,fe);function le(){}le.prototype={length:0,item:function(I){return I>=0&&I<this.length?this[I]:null},toString:function(I,M){for(var $=[],oe=0;oe<this.length;oe++)Rt(this[oe],$,I,M);return $.join("")},filter:function(I){return Array.prototype.filter.call(this,I)},indexOf:function(I){return Array.prototype.indexOf.call(this,I)}};function Se(I,M){this._node=I,this._refresh=M,Ee(this)}function Ee(I){var M=I._node._inc||I._node.ownerDocument._inc;if(I._inc!==M){var $=I._refresh(I._node);if(Ue(I,"length",$.length),!I.$$length||$.length<I.$$length)for(var oe=$.length;oe in I;oe++)Object.prototype.hasOwnProperty.call(I,oe)&&delete I[oe];c($,I),I._inc=M}}Se.prototype.item=function(I){return Ee(this),this[I]||null},h(Se,le);function Ce(){}function re(I,M){for(var $=I.length;$--;)if(I[$]===M)return $}function te(I,M,$,oe){if(oe?M[re(M,oe)]=$:M[M.length++]=$,I){$.ownerElement=I;var Pe=I.ownerDocument;Pe&&(oe&&ae(Pe,I,oe),V(Pe,I,$))}}function ue(I,M,$){var oe=re(M,$);if(oe>=0){for(var Pe=M.length-1;oe<Pe;)M[oe]=M[++oe];if(M.length=Pe,I){var ze=I.ownerDocument;ze&&(ae(ze,I,$),$.ownerElement=null)}}else throw new fe(F,new Error(I.tagName+"@"+$))}Ce.prototype={length:0,item:le.prototype.item,getNamedItem:function(I){for(var M=this.length;M--;){var $=this[M];if($.nodeName==I)return $}},setNamedItem:function(I){var M=I.ownerElement;if(M&&M!=this._ownerElement)throw new fe(de);var $=this.getNamedItem(I.nodeName);return te(this._ownerElement,this,I,$),$},setNamedItemNS:function(I){var M=I.ownerElement,$;if(M&&M!=this._ownerElement)throw new fe(de);return $=this.getNamedItemNS(I.namespaceURI,I.localName),te(this._ownerElement,this,I,$),$},removeNamedItem:function(I){var M=this.getNamedItem(I);return ue(this._ownerElement,this,M),M},removeNamedItemNS:function(I,M){var $=this.getNamedItemNS(I,M);return ue(this._ownerElement,this,$),$},getNamedItemNS:function(I,M){for(var $=this.length;$--;){var oe=this[$];if(oe.localName==M&&oe.namespaceURI==I)return oe}return null}};function ce(){}ce.prototype={hasFeature:function(I,M){return!0},createDocument:function(I,M,$){var oe=new Ie;if(oe.implementation=this,oe.childNodes=new le,oe.doctype=$||null,$&&oe.appendChild($),M){var Pe=oe.createElementNS(I,M);oe.appendChild(Pe)}return oe},createDocumentType:function(I,M,$){var oe=new Li;return oe.name=I,oe.nodeName=I,oe.publicId=M||"",oe.systemId=$||"",oe}};function k(){}k.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(I,M){return Ri(this,I,M)},replaceChild:function(I,M){Ri(this,I,M,Oi),M&&this.removeChild(M)},removeChild:function(I){return Z(this,I)},appendChild:function(I){return this.insertBefore(I,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(I){return ot(this.ownerDocument||this,this,I)},normalize:function(){for(var I=this.firstChild;I;){var M=I.nextSibling;M&&M.nodeType==w&&I.nodeType==w?(this.removeChild(M),I.appendData(M.data)):(I.normalize(),I=M)}},isSupported:function(I,M){return this.ownerDocument.implementation.hasFeature(I,M)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(I){for(var M=this;M;){var $=M._nsMap;if($){for(var oe in $)if(Object.prototype.hasOwnProperty.call($,oe)&&$[oe]===I)return oe}M=M.nodeType==x?M.ownerDocument:M.parentNode}return null},lookupNamespaceURI:function(I){for(var M=this;M;){var $=M._nsMap;if($&&Object.prototype.hasOwnProperty.call($,I))return $[I];M=M.nodeType==x?M.ownerDocument:M.parentNode}return null},isDefaultNamespace:function(I){var M=this.lookupPrefix(I);return M==null}};function Y(I){return I=="<"&&"&lt;"||I==">"&&"&gt;"||I=="&"&&"&amp;"||I=='"'&&"&quot;"||"&#"+I.charCodeAt()+";"}c(f,k),c(f,k.prototype);function he(I,M){if(M(I))return!0;if(I=I.firstChild)do if(he(I,M))return!0;while(I=I.nextSibling)}function Ie(){this.ownerDocument=this}function V(I,M,$){I&&I._inc++;var oe=$.namespaceURI;oe===t.XMLNS&&(M._nsMap[$.prefix?$.localName:""]=$.value)}function ae(I,M,$,oe){I&&I._inc++;var Pe=$.namespaceURI;Pe===t.XMLNS&&delete M._nsMap[$.prefix?$.localName:""]}function pe(I,M,$){if(I&&I._inc){I._inc++;var oe=M.childNodes;if($)oe[oe.length++]=$;else{for(var Pe=M.firstChild,ze=0;Pe;)oe[ze++]=Pe,Pe=Pe.nextSibling;oe.length=ze,delete oe[oe.length]}}}function Z(I,M){var $=M.previousSibling,oe=M.nextSibling;return $?$.nextSibling=oe:I.firstChild=oe,oe?oe.previousSibling=$:I.lastChild=$,M.parentNode=null,M.previousSibling=null,M.nextSibling=null,pe(I.ownerDocument,I),M}function _e(I){return I&&(I.nodeType===k.DOCUMENT_NODE||I.nodeType===k.DOCUMENT_FRAGMENT_NODE||I.nodeType===k.ELEMENT_NODE)}function Me(I){return I&&(Ve(I)||nt(I)||$e(I)||I.nodeType===k.DOCUMENT_FRAGMENT_NODE||I.nodeType===k.COMMENT_NODE||I.nodeType===k.PROCESSING_INSTRUCTION_NODE)}function $e(I){return I&&I.nodeType===k.DOCUMENT_TYPE_NODE}function Ve(I){return I&&I.nodeType===k.ELEMENT_NODE}function nt(I){return I&&I.nodeType===k.TEXT_NODE}function st(I,M){var $=I.childNodes||[];if(e($,Ve)||$e(M))return!1;var oe=e($,$e);return!(M&&oe&&$.indexOf(oe)>$.indexOf(M))}function Xn(I,M){var $=I.childNodes||[];function oe(ze){return Ve(ze)&&ze!==M}if(e($,oe))return!1;var Pe=e($,$e);return!(M&&Pe&&$.indexOf(Pe)>$.indexOf(M))}function ri(I,M,$){if(!_e(I))throw new fe(R,"Unexpected parent node type "+I.nodeType);if($&&$.parentNode!==I)throw new fe(F,"child not in parent");if(!Me(M)||$e(M)&&I.nodeType!==k.DOCUMENT_NODE)throw new fe(R,"Unexpected node type "+M.nodeType+" for parent node type "+I.nodeType)}function Yn(I,M,$){var oe=I.childNodes||[],Pe=M.childNodes||[];if(M.nodeType===k.DOCUMENT_FRAGMENT_NODE){var ze=Pe.filter(Ve);if(ze.length>1||e(Pe,nt))throw new fe(R,"More than one element or text in fragment");if(ze.length===1&&!st(I,$))throw new fe(R,"Element in fragment can not be inserted before doctype")}if(Ve(M)&&!st(I,$))throw new fe(R,"Only one element can be added and only after doctype");if($e(M)){if(e(oe,$e))throw new fe(R,"Only one doctype is allowed");var xt=e(oe,Ve);if($&&oe.indexOf(xt)<oe.indexOf($))throw new fe(R,"Doctype can only be inserted before an element");if(!$&&xt)throw new fe(R,"Doctype can not be appended since element is present")}}function Oi(I,M,$){var oe=I.childNodes||[],Pe=M.childNodes||[];if(M.nodeType===k.DOCUMENT_FRAGMENT_NODE){var ze=Pe.filter(Ve);if(ze.length>1||e(Pe,nt))throw new fe(R,"More than one element or text in fragment");if(ze.length===1&&!Xn(I,$))throw new fe(R,"Element in fragment can not be inserted before doctype")}if(Ve(M)&&!Xn(I,$))throw new fe(R,"Only one element can be added and only after doctype");if($e(M)){if(e(oe,function(en){return $e(en)&&en!==$}))throw new fe(R,"Only one doctype is allowed");var xt=e(oe,Ve);if($&&oe.indexOf(xt)<oe.indexOf($))throw new fe(R,"Doctype can only be inserted before an element")}}function Ri(I,M,$,oe){ri(I,M,$),I.nodeType===k.DOCUMENT_NODE&&(oe||Yn)(I,M,$);var Pe=M.parentNode;if(Pe&&Pe.removeChild(M),M.nodeType===j){var ze=M.firstChild;if(ze==null)return M;var xt=M.lastChild}else ze=xt=M;var pi=$?$.previousSibling:I.lastChild;ze.previousSibling=pi,xt.nextSibling=$,pi?pi.nextSibling=ze:I.firstChild=ze,$==null?I.lastChild=xt:$.previousSibling=xt;do ze.parentNode=I;while(ze!==xt&&(ze=ze.nextSibling));return pe(I.ownerDocument||I,I),M.nodeType==j&&(M.firstChild=M.lastChild=null),M}function mt(I,M){return M.parentNode&&M.parentNode.removeChild(M),M.parentNode=I,M.previousSibling=I.lastChild,M.nextSibling=null,M.previousSibling?M.previousSibling.nextSibling=M:I.firstChild=M,I.lastChild=M,pe(I.ownerDocument,I,M),M}Ie.prototype={nodeName:"#document",nodeType:P,doctype:null,documentElement:null,_inc:1,insertBefore:function(I,M){if(I.nodeType==j){for(var $=I.firstChild;$;){var oe=$.nextSibling;this.insertBefore($,M),$=oe}return I}return Ri(this,I,M),I.ownerDocument=this,this.documentElement===null&&I.nodeType===m&&(this.documentElement=I),I},removeChild:function(I){return this.documentElement==I&&(this.documentElement=null),Z(this,I)},replaceChild:function(I,M){Ri(this,I,M,Oi),I.ownerDocument=this,M&&this.removeChild(M),Ve(I)&&(this.documentElement=I)},importNode:function(I,M){return Jt(this,I,M)},getElementById:function(I){var M=null;return he(this.documentElement,function($){if($.nodeType==m&&$.getAttribute("id")==I)return M=$,!0}),M},getElementsByClassName:function(I){var M=o(I);return new Se(this,function($){var oe=[];return M.length>0&&he($.documentElement,function(Pe){if(Pe!==$&&Pe.nodeType===m){var ze=Pe.getAttribute("class");if(ze){var xt=I===ze;if(!xt){var pi=o(ze);xt=M.every(u(pi))}xt&&oe.push(Pe)}}}),oe})},createElement:function(I){var M=new Tt;M.ownerDocument=this,M.nodeName=I,M.tagName=I,M.localName=I,M.childNodes=new le;var $=M.attributes=new Ce;return $._ownerElement=M,M},createDocumentFragment:function(){var I=new Yi;return I.ownerDocument=this,I.childNodes=new le,I},createTextNode:function(I){var M=new _r;return M.ownerDocument=this,M.appendData(I),M},createComment:function(I){var M=new br;return M.ownerDocument=this,M.appendData(I),M},createCDATASection:function(I){var M=new xr;return M.ownerDocument=this,M.appendData(I),M},createProcessingInstruction:function(I,M){var $=new ie;return $.ownerDocument=this,$.tagName=$.nodeName=$.target=I,$.nodeValue=$.data=M,$},createAttribute:function(I){var M=new Yt;return M.ownerDocument=this,M.name=I,M.nodeName=I,M.localName=I,M.specified=!0,M},createEntityReference:function(I){var M=new Tn;return M.ownerDocument=this,M.nodeName=I,M},createElementNS:function(I,M){var $=new Tt,oe=M.split(":"),Pe=$.attributes=new Ce;return $.childNodes=new le,$.ownerDocument=this,$.nodeName=M,$.tagName=M,$.namespaceURI=I,oe.length==2?($.prefix=oe[0],$.localName=oe[1]):$.localName=M,Pe._ownerElement=$,$},createAttributeNS:function(I,M){var $=new Yt,oe=M.split(":");return $.ownerDocument=this,$.nodeName=M,$.name=M,$.namespaceURI=I,$.specified=!0,oe.length==2?($.prefix=oe[0],$.localName=oe[1]):$.localName=M,$}},h(Ie,k);function Tt(){this._nsMap={}}Tt.prototype={nodeType:m,hasAttribute:function(I){return this.getAttributeNode(I)!=null},getAttribute:function(I){var M=this.getAttributeNode(I);return M&&M.value||""},getAttributeNode:function(I){return this.attributes.getNamedItem(I)},setAttribute:function(I,M){var $=this.ownerDocument.createAttribute(I);$.value=$.nodeValue=""+M,this.setAttributeNode($)},removeAttribute:function(I){var M=this.getAttributeNode(I);M&&this.removeAttributeNode(M)},appendChild:function(I){return I.nodeType===j?this.insertBefore(I,null):mt(this,I)},setAttributeNode:function(I){return this.attributes.setNamedItem(I)},setAttributeNodeNS:function(I){return this.attributes.setNamedItemNS(I)},removeAttributeNode:function(I){return this.attributes.removeNamedItem(I.nodeName)},removeAttributeNS:function(I,M){var $=this.getAttributeNodeNS(I,M);$&&this.removeAttributeNode($)},hasAttributeNS:function(I,M){return this.getAttributeNodeNS(I,M)!=null},getAttributeNS:function(I,M){var $=this.getAttributeNodeNS(I,M);return $&&$.value||""},setAttributeNS:function(I,M,$){var oe=this.ownerDocument.createAttributeNS(I,M);oe.value=oe.nodeValue=""+$,this.setAttributeNode(oe)},getAttributeNodeNS:function(I,M){return this.attributes.getNamedItemNS(I,M)},getElementsByTagName:function(I){return new Se(this,function(M){var $=[];return he(M,function(oe){oe!==M&&oe.nodeType==m&&(I==="*"||oe.tagName==I)&&$.push(oe)}),$})},getElementsByTagNameNS:function(I,M){return new Se(this,function($){var oe=[];return he($,function(Pe){Pe!==$&&Pe.nodeType===m&&(I==="*"||Pe.namespaceURI===I)&&(M==="*"||Pe.localName==M)&&oe.push(Pe)}),oe})}},Ie.prototype.getElementsByTagName=Tt.prototype.getElementsByTagName,Ie.prototype.getElementsByTagNameNS=Tt.prototype.getElementsByTagNameNS,h(Tt,k);function Yt(){}Yt.prototype.nodeType=x,h(Yt,k);function Sn(){}Sn.prototype={data:"",substringData:function(I,M){return this.data.substring(I,I+M)},appendData:function(I){I=this.data+I,this.nodeValue=this.data=I,this.length=I.length},insertData:function(I,M){this.replaceData(I,0,M)},appendChild:function(I){throw new Error(J[R])},deleteData:function(I,M){this.replaceData(I,M,"")},replaceData:function(I,M,$){var oe=this.data.substring(0,I),Pe=this.data.substring(I+M);$=oe+$+Pe,this.nodeValue=this.data=$,this.length=$.length}},h(Sn,k);function _r(){}_r.prototype={nodeName:"#text",nodeType:w,splitText:function(I){var M=this.data,$=M.substring(I);M=M.substring(0,I),this.data=this.nodeValue=M,this.length=M.length;var oe=this.ownerDocument.createTextNode($);return this.parentNode&&this.parentNode.insertBefore(oe,this.nextSibling),oe}},h(_r,Sn);function br(){}br.prototype={nodeName:"#comment",nodeType:L},h(br,Sn);function xr(){}xr.prototype={nodeName:"#cdata-section",nodeType:A},h(xr,Sn);function Li(){}Li.prototype.nodeType=X,h(Li,k);function Qn(){}Qn.prototype.nodeType=K,h(Qn,k);function us(){}us.prototype.nodeType=D,h(us,k);function Tn(){}Tn.prototype.nodeType=C,h(Tn,k);function Yi(){}Yi.prototype.nodeName="#document-fragment",Yi.prototype.nodeType=j,h(Yi,k);function ie(){}ie.prototype.nodeType=N,h(ie,k);function xe(){}xe.prototype.serializeToString=function(I,M,$){return De.call(I,M,$)},k.prototype.toString=De;function De(I,M){var $=[],oe=this.nodeType==9&&this.documentElement||this,Pe=oe.prefix,ze=oe.namespaceURI;if(ze&&Pe==null){var Pe=oe.lookupPrefix(ze);if(Pe==null)var xt=[{namespace:ze,prefix:null}]}return Rt(this,$,I,M,xt),$.join("")}function je(I,M,$){var oe=I.prefix||"",Pe=I.namespaceURI;if(!Pe||oe==="xml"&&Pe===t.XML||Pe===t.XMLNS)return!1;for(var ze=$.length;ze--;){var xt=$[ze];if(xt.prefix===oe)return xt.namespace!==Pe}return!0}function Ze(I,M,$){I.push(" ",M,'="',$.replace(/[<>&"\t\n\r]/g,Y),'"')}function Rt(I,M,$,oe,Pe){if(Pe||(Pe=[]),oe)if(I=oe(I),I){if(typeof I=="string"){M.push(I);return}}else return;switch(I.nodeType){case m:var ze=I.attributes,xt=ze.length,gi=I.firstChild,pi=I.tagName;$=t.isHTML(I.namespaceURI)||$;var en=pi;if(!$&&!I.prefix&&I.namespaceURI){for(var $i,un=0;un<ze.length;un++)if(ze.item(un).name==="xmlns"){$i=ze.item(un).value;break}if(!$i)for(var tn=Pe.length-1;tn>=0;tn--){var Jn=Pe[tn];if(Jn.prefix===""&&Jn.namespace===I.namespaceURI){$i=Jn.namespace;break}}if($i!==I.namespaceURI)for(var tn=Pe.length-1;tn>=0;tn--){var Jn=Pe[tn];if(Jn.namespace===I.namespaceURI){Jn.prefix&&(en=Jn.prefix+":"+pi);break}}}M.push("<",en);for(var zi=0;zi<xt;zi++){var $t=ze.item(zi);$t.prefix=="xmlns"?Pe.push({prefix:$t.localName,namespace:$t.value}):$t.nodeName=="xmlns"&&Pe.push({prefix:"",namespace:$t.value})}for(var zi=0;zi<xt;zi++){var $t=ze.item(zi);if(je($t,$,Pe)){var Cn=$t.prefix||"",$r=$t.namespaceURI;Ze(M,Cn?"xmlns:"+Cn:"xmlns",$r),Pe.push({prefix:Cn,namespace:$r})}Rt($t,M,$,oe,Pe)}if(pi===en&&je(I,$,Pe)){var Cn=I.prefix||"",$r=I.namespaceURI;Ze(M,Cn?"xmlns:"+Cn:"xmlns",$r),Pe.push({prefix:Cn,namespace:$r})}if(gi||$&&!/^(?:meta|link|img|br|hr|input)$/i.test(pi)){if(M.push(">"),$&&/^script$/i.test(pi))for(;gi;)gi.data?M.push(gi.data):Rt(gi,M,$,oe,Pe.slice()),gi=gi.nextSibling;else for(;gi;)Rt(gi,M,$,oe,Pe.slice()),gi=gi.nextSibling;M.push("</",en,">")}else M.push("/>");return;case P:case j:for(var gi=I.firstChild;gi;)Rt(gi,M,$,oe,Pe.slice()),gi=gi.nextSibling;return;case x:return Ze(M,I.name,I.value);case w:return M.push(I.data.replace(/[<&>]/g,Y));case A:return M.push("<![CDATA[",I.data,"]]>");case L:return M.push("<!--",I.data,"-->");case X:var wn=I.publicId,Zn=I.systemId;if(M.push("<!DOCTYPE ",I.name),wn)M.push(" PUBLIC ",wn),Zn&&Zn!="."&&M.push(" ",Zn),M.push(">");else if(Zn&&Zn!=".")M.push(" SYSTEM ",Zn,">");else{var Dt=I.internalSubset;Dt&&M.push(" [",Dt,"]"),M.push(">")}return;case N:return M.push("<?",I.target," ",I.data,"?>");case C:return M.push("&",I.nodeName,";");default:M.push("??",I.nodeName)}}function Jt(I,M,$){var oe;switch(M.nodeType){case m:oe=M.cloneNode(!1),oe.ownerDocument=I;case j:break;case x:$=!0;break}if(oe||(oe=M.cloneNode(!1)),oe.ownerDocument=I,oe.parentNode=null,$)for(var Pe=M.firstChild;Pe;)oe.appendChild(Jt(I,Pe,$)),Pe=Pe.nextSibling;return oe}function ot(I,M,$){var oe=new M.constructor;for(var Pe in M)if(Object.prototype.hasOwnProperty.call(M,Pe)){var ze=M[Pe];typeof ze!="object"&&ze!=oe[Pe]&&(oe[Pe]=ze)}switch(M.childNodes&&(oe.childNodes=new le),oe.ownerDocument=I,oe.nodeType){case m:var xt=M.attributes,pi=oe.attributes=new Ce,en=xt.length;pi._ownerElement=oe;for(var $i=0;$i<en;$i++)oe.setAttributeNode(ot(I,xt.item($i),!0));break;case x:$=!0}if($)for(var un=M.firstChild;un;)oe.appendChild(ot(I,un,$)),un=un.nextSibling;return oe}function Ue(I,M,$){I[M]=$}try{if(Object.defineProperty){let I=function(M){switch(M.nodeType){case m:case j:var $=[];for(M=M.firstChild;M;)M.nodeType!==7&&M.nodeType!==8&&$.push(I(M)),M=M.nextSibling;return $.join("");default:return M.nodeValue}};Object.defineProperty(Se.prototype,"length",{get:function(){return Ee(this),this.$$length}}),Object.defineProperty(k.prototype,"textContent",{get:function(){return I(this)},set:function(M){switch(this.nodeType){case m:case j:for(;this.firstChild;)this.removeChild(this.firstChild);(M||String(M))&&this.appendChild(this.ownerDocument.createTextNode(M));break;default:this.data=M,this.value=M,this.nodeValue=M}}}),Ue=function(M,$,oe){M["$$"+$]=oe}}}catch{}return pa.DocumentType=Li,pa.DOMException=fe,pa.DOMImplementation=ce,pa.Element=Tt,pa.Node=k,pa.NodeList=le,pa.XMLSerializer=xe,pa}var vd={},Fy={},W_;function pI(){return W_||(W_=1,function(n){var e=ag().freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES}(Fy)),Fy}var Uf={},G_;function gI(){if(G_)return Uf;G_=1;var n=ag().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),r=0,s=1,o=2,u=3,c=4,h=5,f=6,m=7;function x(R,F){this.message=R,this.locator=F,Error.captureStackTrace&&Error.captureStackTrace(this,x)}x.prototype=new Error,x.prototype.name=x.name;function w(){}w.prototype={parse:function(R,F,de){var fe=this.domBuilder;fe.startDocument(),X(F,F={}),A(R,F,de,fe,this.errorHandler),fe.endDocument()}};function A(R,F,de,fe,le){function Se(Tt){if(Tt>65535){Tt-=65536;var Yt=55296+(Tt>>10),Sn=56320+(Tt&1023);return String.fromCharCode(Yt,Sn)}else return String.fromCharCode(Tt)}function Ee(Tt){var Yt=Tt.slice(1,-1);return Object.hasOwnProperty.call(de,Yt)?de[Yt]:Yt.charAt(0)==="#"?Se(parseInt(Yt.substr(1).replace("x","0x"))):(le.error("entity not found:"+Tt),Tt)}function Ce(Tt){if(Tt>Ie){var Yt=R.substring(Ie,Tt).replace(/&#?\w+;/g,Ee);k&&re(Ie),fe.characters(Yt,0,Tt-Ie),Ie=Tt}}function re(Tt,Yt){for(;Tt>=ue&&(Yt=ce.exec(R));)te=Yt.index,ue=te+Yt[0].length,k.lineNumber++;k.columnNumber=Tt-te+1}for(var te=0,ue=0,ce=/.*(?:\r\n?|\n)|.*$/g,k=fe.locator,Y=[{currentNSMap:F}],he={},Ie=0;;){try{var V=R.indexOf("<",Ie);if(V<0){if(!R.substr(Ie).match(/^\s*$/)){var ae=fe.doc,pe=ae.createTextNode(R.substr(Ie));ae.appendChild(pe),fe.currentElement=pe}return}switch(V>Ie&&Ce(V),R.charAt(V+1)){case"/":var ri=R.indexOf(">",V+3),Z=R.substring(V+2,ri).replace(/[ \t\n\r]+$/g,""),_e=Y.pop();ri<0?(Z=R.substring(V+2).replace(/[\s<].*/,""),le.error("end tag name: "+Z+" is not complete:"+_e.tagName),ri=V+1+Z.length):Z.match(/\s</)&&(Z=Z.replace(/[\s<].*/,""),le.error("end tag name: "+Z+" maybe not complete"),ri=V+1+Z.length);var Me=_e.localNSMap,$e=_e.tagName==Z,Ve=$e||_e.tagName&&_e.tagName.toLowerCase()==Z.toLowerCase();if(Ve){if(fe.endElement(_e.uri,_e.localName,Z),Me)for(var nt in Me)Object.prototype.hasOwnProperty.call(Me,nt)&&fe.endPrefixMapping(nt);$e||le.fatalError("end tag name: "+Z+" is not match the current start tagName:"+_e.tagName)}else Y.push(_e);ri++;break;case"?":k&&re(V),ri=K(R,V,fe);break;case"!":k&&re(V),ri=j(R,V,fe,le);break;default:k&&re(V);var st=new z,Xn=Y[Y.length-1].currentNSMap,ri=D(R,V,st,Xn,Ee,le),Yn=st.length;if(!st.closed&&P(R,ri,st.tagName,he)&&(st.closed=!0,de.nbsp||le.warning("unclosed xml attribute")),k&&Yn){for(var Oi=C(k,{}),Ri=0;Ri<Yn;Ri++){var mt=st[Ri];re(mt.offset),mt.locator=C(k,{})}fe.locator=Oi,N(st,fe,Xn)&&Y.push(st),fe.locator=k}else N(st,fe,Xn)&&Y.push(st);n.isHTML(st.uri)&&!st.closed?ri=L(R,ri,st.tagName,Ee,fe):ri++}}catch(Tt){if(Tt instanceof x)throw Tt;le.error("element parse error: "+Tt),ri=-1}ri>Ie?Ie=ri:Ce(Math.max(V,Ie)+1)}}function C(R,F){return F.lineNumber=R.lineNumber,F.columnNumber=R.columnNumber,F}function D(R,F,de,fe,le,Se){function Ee(k,Y,he){de.attributeNames.hasOwnProperty(k)&&Se.fatalError("Attribute "+k+" redefined"),de.addValue(k,Y.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,le),he)}for(var Ce,re,te=++F,ue=r;;){var ce=R.charAt(te);switch(ce){case"=":if(ue===s)Ce=R.slice(F,te),ue=u;else if(ue===o)ue=u;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(ue===u||ue===s)if(ue===s&&(Se.warning('attribute value must after "="'),Ce=R.slice(F,te)),F=te+1,te=R.indexOf(ce,F),te>0)re=R.slice(F,te),Ee(Ce,re,F-1),ue=h;else throw new Error("attribute value no end '"+ce+"' match");else if(ue==c)re=R.slice(F,te),Ee(Ce,re,F),Se.warning('attribute "'+Ce+'" missed start quot('+ce+")!!"),F=te+1,ue=h;else throw new Error('attribute value must after "="');break;case"/":switch(ue){case r:de.setTagName(R.slice(F,te));case h:case f:case m:ue=m,de.closed=!0;case c:case s:break;case o:de.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Se.error("unexpected end of input"),ue==r&&de.setTagName(R.slice(F,te)),te;case">":switch(ue){case r:de.setTagName(R.slice(F,te));case h:case f:case m:break;case c:case s:re=R.slice(F,te),re.slice(-1)==="/"&&(de.closed=!0,re=re.slice(0,-1));case o:ue===o&&(re=Ce),ue==c?(Se.warning('attribute "'+re+'" missed quot(")!'),Ee(Ce,re,F)):((!n.isHTML(fe[""])||!re.match(/^(?:disabled|checked|selected)$/i))&&Se.warning('attribute "'+re+'" missed value!! "'+re+'" instead!!'),Ee(re,re,F));break;case u:throw new Error("attribute value missed!!")}return te;case"":ce=" ";default:if(ce<=" ")switch(ue){case r:de.setTagName(R.slice(F,te)),ue=f;break;case s:Ce=R.slice(F,te),ue=o;break;case c:var re=R.slice(F,te);Se.warning('attribute "'+re+'" missed quot(")!!'),Ee(Ce,re,F);case h:ue=f;break}else switch(ue){case o:de.tagName,(!n.isHTML(fe[""])||!Ce.match(/^(?:disabled|checked|selected)$/i))&&Se.warning('attribute "'+Ce+'" missed value!! "'+Ce+'" instead2!!'),Ee(Ce,Ce,F),F=te,ue=s;break;case h:Se.warning('attribute space is required"'+Ce+'"!!');case f:ue=s,F=te;break;case u:ue=c,F=te;break;case m:throw new Error("elements closed character '/' and '>' must be connected to")}}te++}}function N(R,F,de){for(var fe=R.tagName,le=null,ce=R.length;ce--;){var Se=R[ce],Ee=Se.qName,Ce=Se.value,k=Ee.indexOf(":");if(k>0)var re=Se.prefix=Ee.slice(0,k),te=Ee.slice(k+1),ue=re==="xmlns"&&te;else te=Ee,re=null,ue=Ee==="xmlns"&&"";Se.localName=te,ue!==!1&&(le==null&&(le={},X(de,de={})),de[ue]=le[ue]=Ce,Se.uri=n.XMLNS,F.startPrefixMapping(ue,Ce))}for(var ce=R.length;ce--;){Se=R[ce];var re=Se.prefix;re&&(re==="xml"&&(Se.uri=n.XML),re!=="xmlns"&&(Se.uri=de[re||""]))}var k=fe.indexOf(":");k>0?(re=R.prefix=fe.slice(0,k),te=R.localName=fe.slice(k+1)):(re=null,te=R.localName=fe);var Y=R.uri=de[re||""];if(F.startElement(Y,te,fe,R),R.closed){if(F.endElement(Y,te,fe),le)for(re in le)Object.prototype.hasOwnProperty.call(le,re)&&F.endPrefixMapping(re)}else return R.currentNSMap=de,R.localNSMap=le,!0}function L(R,F,de,fe,le){if(/^(?:script|textarea)$/i.test(de)){var Se=R.indexOf("</"+de+">",F),Ee=R.substring(F+1,Se);if(/[&<]/.test(Ee))return/^script$/i.test(de)?(le.characters(Ee,0,Ee.length),Se):(Ee=Ee.replace(/&#?\w+;/g,fe),le.characters(Ee,0,Ee.length),Se)}return F+1}function P(R,F,de,fe){var le=fe[de];return le==null&&(le=R.lastIndexOf("</"+de+">"),le<F&&(le=R.lastIndexOf("</"+de)),fe[de]=le),le<F}function X(R,F){for(var de in R)Object.prototype.hasOwnProperty.call(R,de)&&(F[de]=R[de])}function j(R,F,de,fe){var le=R.charAt(F+2);switch(le){case"-":if(R.charAt(F+3)==="-"){var Se=R.indexOf("-->",F+4);return Se>F?(de.comment(R,F+4,Se-F-4),Se+3):(fe.error("Unclosed comment"),-1)}else return-1;default:if(R.substr(F+3,6)=="CDATA["){var Se=R.indexOf("]]>",F+9);return de.startCDATA(),de.characters(R,F+9,Se-F-9),de.endCDATA(),Se+3}var Ee=J(R,F),Ce=Ee.length;if(Ce>1&&/!doctype/i.test(Ee[0][0])){var re=Ee[1][0],te=!1,ue=!1;Ce>3&&(/^public$/i.test(Ee[2][0])?(te=Ee[3][0],ue=Ce>4&&Ee[4][0]):/^system$/i.test(Ee[2][0])&&(ue=Ee[3][0]));var ce=Ee[Ce-1];return de.startDTD(re,te,ue),de.endDTD(),ce.index+ce[0].length}}return-1}function K(R,F,de){var fe=R.indexOf("?>",F);if(fe){var le=R.substring(F,fe).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return le?(le[0].length,de.processingInstruction(le[1],le[2]),fe+2):-1}return-1}function z(){this.attributeNames={}}z.prototype={setTagName:function(R){if(!i.test(R))throw new Error("invalid tagName:"+R);this.tagName=R},addValue:function(R,F,de){if(!i.test(R))throw new Error("invalid attribute:"+R);this.attributeNames[R]=this.length,this[this.length++]={qName:R,value:F,offset:de}},length:0,getLocalName:function(R){return this[R].localName},getLocator:function(R){return this[R].locator},getQName:function(R){return this[R].qName},getURI:function(R){return this[R].uri},getValue:function(R){return this[R].value}};function J(R,F){var de,fe=[],le=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(le.lastIndex=F,le.exec(R);de=le.exec(R);)if(fe.push(de),de[1])return fe}return Uf.XMLReader=w,Uf.ParseError=x,Uf}var K_;function mI(){if(K_)return vd;K_=1;var n=ag(),e=wT(),t=pI(),i=gI(),r=e.DOMImplementation,s=n.NAMESPACE,o=i.ParseError,u=i.XMLReader;function c(D){return D.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function h(D){this.options=D||{locator:{}}}h.prototype.parseFromString=function(D,N){var L=this.options,P=new u,X=L.domBuilder||new m,j=L.errorHandler,K=L.locator,z=L.xmlns||{},J=/\/x?html?$/.test(N),R=J?t.HTML_ENTITIES:t.XML_ENTITIES;K&&X.setDocumentLocator(K),P.errorHandler=f(j,X,K),P.domBuilder=L.domBuilder||X,J&&(z[""]=s.HTML),z.xml=z.xml||s.XML;var F=L.normalizeLineEndings||c;return D&&typeof D=="string"?P.parse(F(D),z,R):P.errorHandler.error("invalid doc source"),X.doc};function f(D,N,L){if(!D){if(N instanceof m)return N;D=N}var P={},X=D instanceof Function;L=L||{};function j(K){var z=D[K];!z&&X&&(z=D.length==2?function(J){D(K,J)}:D),P[K]=z&&function(J){z("[xmldom "+K+"]	"+J+w(L))}||function(){}}return j("warning"),j("error"),j("fatalError"),P}function m(){this.cdata=!1}function x(D,N){N.lineNumber=D.lineNumber,N.columnNumber=D.columnNumber}m.prototype={startDocument:function(){this.doc=new r().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(D,N,L,P){var X=this.doc,j=X.createElementNS(D,L||N),K=P.length;C(this,j),this.currentElement=j,this.locator&&x(this.locator,j);for(var z=0;z<K;z++){var D=P.getURI(z),J=P.getValue(z),L=P.getQName(z),R=X.createAttributeNS(D,L);this.locator&&x(P.getLocator(z),R),R.value=R.nodeValue=J,j.setAttributeNode(R)}},endElement:function(D,N,L){var P=this.currentElement;P.tagName,this.currentElement=P.parentNode},startPrefixMapping:function(D,N){},endPrefixMapping:function(D){},processingInstruction:function(D,N){var L=this.doc.createProcessingInstruction(D,N);this.locator&&x(this.locator,L),C(this,L)},ignorableWhitespace:function(D,N,L){},characters:function(D,N,L){if(D=A.apply(this,arguments),D){if(this.cdata)var P=this.doc.createCDATASection(D);else var P=this.doc.createTextNode(D);this.currentElement?this.currentElement.appendChild(P):/^\s*$/.test(D)&&this.doc.appendChild(P),this.locator&&x(this.locator,P)}},skippedEntity:function(D){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(D){(this.locator=D)&&(D.lineNumber=0)},comment:function(D,N,L){D=A.apply(this,arguments);var P=this.doc.createComment(D);this.locator&&x(this.locator,P),C(this,P)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(D,N,L){var P=this.doc.implementation;if(P&&P.createDocumentType){var X=P.createDocumentType(D,N,L);this.locator&&x(this.locator,X),C(this,X),this.doc.doctype=X}},warning:function(D){console.warn("[xmldom warning]	"+D,w(this.locator))},error:function(D){console.error("[xmldom error]	"+D,w(this.locator))},fatalError:function(D){throw new o(D,this.locator)}};function w(D){if(D)return`
@`+(D.systemId||"")+"#[line:"+D.lineNumber+",col:"+D.columnNumber+"]"}function A(D,N,L){return typeof D=="string"?D.substr(N,L):D.length>=N+L||N?new java.lang.String(D,N,L)+"":D}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(D){m.prototype[D]=function(){return null}});function C(D,N){D.currentElement?D.currentElement.appendChild(N):D.doc.appendChild(N)}return vd.__DOMHandler=m,vd.normalizeLineEndings=c,vd.DOMParser=h,vd}var X_;function yI(){if(X_)return yd;X_=1;var n=wT();return yd.DOMImplementation=n.DOMImplementation,yd.XMLSerializer=n.XMLSerializer,yd.DOMParser=mI().DOMParser,yd}var vI=yI();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const Y_=n=>!!n&&typeof n=="object",Ki=(...n)=>n.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(i=>{Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):Y_(e[i])&&Y_(t[i])?e[i]=Ki(e[i],t[i]):e[i]=t[i]}),e),{}),ET=n=>Object.keys(n).map(e=>n[e]),_I=(n,e)=>{const t=[];for(let i=n;i<e;i++)t.push(i);return t},gc=n=>n.reduce((e,t)=>e.concat(t),[]),AT=n=>{if(!n.length)return[];const e=[];for(let t=0;t<n.length;t++)e.push(n[t]);return e},bI=(n,e)=>n.reduce((t,i,r)=>(i[e]&&t.push(r),t),[]),xI=(n,e)=>ET(n.reduce((t,i)=>(i.forEach(r=>{t[e(r)]=r}),t),{}));var mc={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Kd=({baseUrl:n="",source:e="",range:t="",indexRange:i=""})=>{const r={uri:e,resolvedUri:sg(n||"",e)};if(t||i){const o=(t||i).split("-");let u=W.BigInt?W.BigInt(o[0]):parseInt(o[0],10),c=W.BigInt?W.BigInt(o[1]):parseInt(o[1],10);u<Number.MAX_SAFE_INTEGER&&typeof u=="bigint"&&(u=Number(u)),c<Number.MAX_SAFE_INTEGER&&typeof c=="bigint"&&(c=Number(c));let h;typeof c=="bigint"||typeof u=="bigint"?h=W.BigInt(c)-W.BigInt(u)+W.BigInt(1):h=c-u+1,typeof h=="bigint"&&h<Number.MAX_SAFE_INTEGER&&(h=Number(h)),r.byterange={length:h,offset:u}}return r},SI=n=>{let e;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=W.BigInt(n.offset)+W.BigInt(n.length)-W.BigInt(1):e=n.offset+n.length-1,`${n.offset}-${e}`},Q_=n=>(n&&typeof n!="number"&&(n=parseInt(n,10)),isNaN(n)?null:n),TI={static(n){const{duration:e,timescale:t=1,sourceDuration:i,periodDuration:r}=n,s=Q_(n.endNumber),o=e/t;return typeof s=="number"?{start:0,end:s}:typeof r=="number"?{start:0,end:r/o}:{start:0,end:i/o}},dynamic(n){const{NOW:e,clientOffset:t,availabilityStartTime:i,timescale:r=1,duration:s,periodStart:o=0,minimumUpdatePeriod:u=0,timeShiftBufferDepth:c=1/0}=n,h=Q_(n.endNumber),f=(e+t)/1e3,m=i+o,w=f+u-m,A=Math.ceil(w*r/s),C=Math.floor((f-m-c)*r/s),D=Math.floor((f-m)*r/s);return{start:Math.max(0,C),end:typeof h=="number"?h:Math.min(A,D)}}},CI=n=>e=>{const{duration:t,timescale:i=1,periodStart:r,startNumber:s=1}=n;return{number:s+e,duration:t/i,timeline:r,time:e*t}},A1=n=>{const{type:e,duration:t,timescale:i=1,periodDuration:r,sourceDuration:s}=n,{start:o,end:u}=TI[e](n),c=_I(o,u).map(CI(n));if(e==="static"){const h=c.length-1,f=typeof r=="number"?r:s;c[h].duration=f-t/i*h}return c},DT=n=>{const{baseUrl:e,initialization:t={},sourceDuration:i,indexRange:r="",periodStart:s,presentationTime:o,number:u=0,duration:c}=n;if(!e)throw new Error(mc.NO_BASE_URL);const h=Kd({baseUrl:e,source:t.sourceURL,range:t.range}),f=Kd({baseUrl:e,source:e,indexRange:r});if(f.map=h,c){const m=A1(n);m.length&&(f.duration=m[0].duration,f.timeline=m[0].timeline)}else i&&(f.duration=i,f.timeline=s);return f.presentationTime=o||s,f.number=u,[f]},D1=(n,e,t)=>{const i=n.sidx.map?n.sidx.map:null,r=n.sidx.duration,s=n.timeline||0,o=n.sidx.byterange,u=o.offset+o.length,c=e.timescale,h=e.references.filter(D=>D.referenceType!==1),f=[],m=n.endList?"static":"dynamic",x=n.sidx.timeline;let w=x,A=n.mediaSequence||0,C;typeof e.firstOffset=="bigint"?C=W.BigInt(u)+e.firstOffset:C=u+e.firstOffset;for(let D=0;D<h.length;D++){const N=e.references[D],L=N.referencedSize,P=N.subsegmentDuration;let X;typeof C=="bigint"?X=C+W.BigInt(L)-W.BigInt(1):X=C+L-1;const j=`${C}-${X}`,z=DT({baseUrl:t,timescale:c,timeline:s,periodStart:x,presentationTime:w,number:A,duration:P,sourceDuration:r,indexRange:j,type:m})[0];i&&(z.map=i),f.push(z),typeof C=="bigint"?C+=W.BigInt(L):C+=L,w+=P/c,A++}return n.segments=f,n},wI=["AUDIO","SUBTITLES"],EI=1/60,IT=n=>xI(n,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),AI=(n,e)=>{for(let t=0;t<n.length;t++)if(n[t].attributes.NAME===e)return n[t];return null},J_=n=>{let e=[];return fI(n,wI,(t,i,r,s)=>{e=e.concat(t.playlists||[])}),e},Z_=({playlist:n,mediaSequence:e})=>{n.mediaSequence=e,n.segments.forEach((t,i)=>{t.number=n.mediaSequence+i})},DI=({oldPlaylists:n,newPlaylists:e,timelineStarts:t})=>{e.forEach(i=>{i.discontinuitySequence=t.findIndex(function({timeline:c}){return c===i.timeline});const r=AI(n,i.attributes.NAME);if(!r||i.sidx)return;const s=i.segments[0],o=r.segments.findIndex(function(c){return Math.abs(c.presentationTime-s.presentationTime)<EI});if(o===-1){Z_({playlist:i,mediaSequence:r.mediaSequence+r.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!r.segments.length&&i.timeline>r.timeline||r.segments.length&&i.timeline>r.segments[r.segments.length-1].timeline)&&i.discontinuitySequence--;return}r.segments[o].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),Z_({playlist:i,mediaSequence:r.segments[o].number})})},II=({oldManifest:n,newManifest:e})=>{const t=n.playlists.concat(J_(n)),i=e.playlists.concat(J_(e));return e.timelineStarts=IT([n.timelineStarts,e.timelineStarts]),DI({oldPlaylists:t,newPlaylists:i,timelineStarts:e.timelineStarts}),e},og=n=>n&&n.uri+"-"+SI(n.byterange),By=n=>{const e=n.reduce(function(i,r){return i[r.attributes.baseUrl]||(i[r.attributes.baseUrl]=[]),i[r.attributes.baseUrl].push(r),i},{});let t=[];return Object.values(e).forEach(i=>{const r=ET(i.reduce((s,o)=>{const u=o.attributes.id+(o.attributes.lang||"");return s[u]?(o.segments&&(o.segments[0]&&(o.segments[0].discontinuity=!0),s[u].segments.push(...o.segments)),o.attributes.contentProtection&&(s[u].attributes.contentProtection=o.attributes.contentProtection)):(s[u]=o,s[u].attributes.timelineStarts=[]),s[u].attributes.timelineStarts.push({start:o.attributes.periodStart,timeline:o.attributes.periodStart}),s},{}));t=t.concat(r)}),t.map(i=>(i.discontinuityStarts=bI(i.segments||[],"discontinuity"),i))},I1=(n,e)=>{const t=og(n.sidx),i=t&&e[t]&&e[t].sidx;return i&&D1(n,i,n.sidx.resolvedUri),n},kI=(n,e={})=>{if(!Object.keys(e).length)return n;for(const t in n)n[t]=I1(n[t],e);return n},MI=({attributes:n,segments:e,sidx:t,mediaSequence:i,discontinuitySequence:r,discontinuityStarts:s},o)=>{const u={attributes:{NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs,"PROGRAM-ID":1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuitySequence:r,discontinuityStarts:s,timelineStarts:n.timelineStarts,mediaSequence:i,segments:e};return n.contentProtection&&(u.contentProtection=n.contentProtection),n.serviceLocation&&(u.attributes.serviceLocation=n.serviceLocation),t&&(u.sidx=t),o&&(u.attributes.AUDIO="audio",u.attributes.SUBTITLES="subs"),u},PI=({attributes:n,segments:e,mediaSequence:t,discontinuityStarts:i,discontinuitySequence:r})=>{typeof e>"u"&&(e=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);const s={NAME:n.id,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1};n.codecs&&(s.CODECS=n.codecs);const o={attributes:s,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:i,discontinuitySequence:r,mediaSequence:t,segments:e};return n.serviceLocation&&(o.attributes.serviceLocation=n.serviceLocation),o},OI=(n,e={},t=!1)=>{let i;const r=n.reduce((s,o)=>{const u=o.attributes.role&&o.attributes.role.value||"",c=o.attributes.lang||"";let h=o.attributes.label||"main";if(c&&!o.attributes.label){const m=u?` (${u})`:"";h=`${o.attributes.lang}${m}`}s[h]||(s[h]={language:c,autoselect:!0,default:u==="main",playlists:[],uri:""});const f=I1(MI(o,t),e);return s[h].playlists.push(f),typeof i>"u"&&u==="main"&&(i=o,i.default=!0),s},{});if(!i){const s=Object.keys(r)[0];r[s].default=!0}return r},RI=(n,e={})=>n.reduce((t,i)=>{const r=i.attributes.label||i.attributes.lang||"text",s=i.attributes.lang||"und";return t[r]||(t[r]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),t[r].playlists.push(I1(PI(i),e)),t},{}),LI=n=>n.reduce((e,t)=>(t&&t.forEach(i=>{const{channel:r,language:s}=i;e[s]={autoselect:!1,default:!1,instreamId:r,language:s},i.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[s].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[s]["3D"]=i["3D"])}),e),{}),NI=({attributes:n,segments:e,sidx:t,discontinuityStarts:i})=>{const r={attributes:{NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuityStarts:i,timelineStarts:n.timelineStarts,segments:e};return n.frameRate&&(r.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(r.contentProtection=n.contentProtection),n.serviceLocation&&(r.attributes.serviceLocation=n.serviceLocation),t&&(r.sidx=t),r},FI=({attributes:n})=>n.mimeType==="video/mp4"||n.mimeType==="video/webm"||n.contentType==="video",BI=({attributes:n})=>n.mimeType==="audio/mp4"||n.mimeType==="audio/webm"||n.contentType==="audio",jI=({attributes:n})=>n.mimeType==="text/vtt"||n.contentType==="text",UI=(n,e)=>{n.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:i}){return i===t.timeline}),t.segments&&t.segments.forEach((i,r)=>{i.number=r})})},eb=n=>n?Object.keys(n).reduce((e,t)=>{const i=n[t];return e.concat(i.playlists)},[]):[],$I=({dashPlaylists:n,locations:e,contentSteering:t,sidxMapping:i={},previousManifest:r,eventStream:s})=>{if(!n.length)return{};const{sourceDuration:o,type:u,suggestedPresentationDelay:c,minimumUpdatePeriod:h}=n[0].attributes,f=By(n.filter(FI)).map(NI),m=By(n.filter(BI)),x=By(n.filter(jI)),w=n.map(X=>X.attributes.captionServices).filter(Boolean),A={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:o,playlists:kI(f,i)};h>=0&&(A.minimumUpdatePeriod=h*1e3),e&&(A.locations=e),t&&(A.contentSteering=t),u==="dynamic"&&(A.suggestedPresentationDelay=c),s&&s.length>0&&(A.eventStream=s);const C=A.playlists.length===0,D=m.length?OI(m,i,C):null,N=x.length?RI(x,i):null,L=f.concat(eb(D),eb(N)),P=L.map(({timelineStarts:X})=>X);return A.timelineStarts=IT(P),UI(L,A.timelineStarts),D&&(A.mediaGroups.AUDIO.audio=D),N&&(A.mediaGroups.SUBTITLES.subs=N),w.length&&(A.mediaGroups["CLOSED-CAPTIONS"].cc=LI(w)),r?II({oldManifest:r,newManifest:A}):A},zI=(n,e,t)=>{const{NOW:i,clientOffset:r,availabilityStartTime:s,timescale:o=1,periodStart:u=0,minimumUpdatePeriod:c=0}=n,h=(i+r)/1e3,f=s+u,x=h+c-f;return Math.ceil((x*o-e)/t)},kT=(n,e)=>{const{type:t,minimumUpdatePeriod:i=0,media:r="",sourceDuration:s,timescale:o=1,startNumber:u=1,periodStart:c}=n,h=[];let f=-1;for(let m=0;m<e.length;m++){const x=e[m],w=x.d,A=x.r||0,C=x.t||0;f<0&&(f=C),C&&C>f&&(f=C);let D;if(A<0){const P=m+1;P===e.length?t==="dynamic"&&i>0&&r.indexOf("$Number$")>0?D=zI(n,f,w):D=(s*o-f)/w:D=(e[P].t-f)/w}else D=A+1;const N=u+h.length+D;let L=u+h.length;for(;L<N;)h.push({number:L,duration:w/o,time:f,timeline:c}),f+=w,L++}return h},VI=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,HI=n=>(e,t,i,r)=>{if(e==="$$")return"$";if(typeof n[t]>"u")return e;const s=""+n[t];return t==="RepresentationID"||(i?r=parseInt(r,10):r=1,s.length>=r)?s:`${new Array(r-s.length+1).join("0")}${s}`},tb=(n,e)=>n.replace(VI,HI(e)),qI=(n,e)=>!n.duration&&!e?[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodStart}]:n.duration?A1(n):kT(n,e),WI=(n,e)=>{const t={RepresentationID:n.id,Bandwidth:n.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=n,r=Kd({baseUrl:n.baseUrl,source:tb(i.sourceURL,t),range:i.range});return qI(n,e).map(o=>{t.Number=o.number,t.Time=o.time;const u=tb(n.media||"",t),c=n.timescale||1,h=n.presentationTimeOffset||0,f=n.periodStart+(o.time-h)/c;return{uri:u,timeline:o.timeline,duration:o.duration,resolvedUri:sg(n.baseUrl||"",u),map:r,number:o.number,presentationTime:f}})},GI=(n,e)=>{const{baseUrl:t,initialization:i={}}=n,r=Kd({baseUrl:t,source:i.sourceURL,range:i.range}),s=Kd({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=r,s},KI=(n,e)=>{const{duration:t,segmentUrls:i=[],periodStart:r}=n;if(!t&&!e||t&&e)throw new Error(mc.SEGMENT_TIME_UNSPECIFIED);const s=i.map(c=>GI(n,c));let o;return t&&(o=A1(n)),e&&(o=kT(n,e)),o.map((c,h)=>{if(s[h]){const f=s[h],m=n.timescale||1,x=n.presentationTimeOffset||0;return f.timeline=c.timeline,f.duration=c.duration,f.number=c.number,f.presentationTime=r+(c.time-x)/m,f}}).filter(c=>c)},XI=({attributes:n,segmentInfo:e})=>{let t,i;e.template?(i=WI,t=Ki(n,e.template)):e.base?(i=DT,t=Ki(n,e.base)):e.list&&(i=KI,t=Ki(n,e.list));const r={attributes:n};if(!i)return r;const s=i(t,e.segmentTimeline);if(t.duration){const{duration:o,timescale:u=1}=t;t.duration=o/u}else s.length?t.duration=s.reduce((o,u)=>Math.max(o,Math.ceil(u.duration)),0):t.duration=0;return r.attributes=t,r.segments=s,e.base&&t.indexRange&&(r.sidx=s[0],r.segments=[]),r},YI=n=>n.map(XI),fi=(n,e)=>AT(n.childNodes).filter(({tagName:t})=>t===e),ah=n=>n.textContent.trim(),QI=n=>parseFloat(n.split("/").reduce((e,t)=>e/t)),Du=n=>{const u=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!u)return 0;const[c,h,f,m,x,w]=u.slice(1);return parseFloat(c||0)*31536e3+parseFloat(h||0)*2592e3+parseFloat(f||0)*86400+parseFloat(m||0)*3600+parseFloat(x||0)*60+parseFloat(w||0)},JI=n=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),Date.parse(n)),ib={mediaPresentationDuration(n){return Du(n)},availabilityStartTime(n){return JI(n)/1e3},minimumUpdatePeriod(n){return Du(n)},suggestedPresentationDelay(n){return Du(n)},type(n){return n},timeShiftBufferDepth(n){return Du(n)},start(n){return Du(n)},width(n){return parseInt(n,10)},height(n){return parseInt(n,10)},bandwidth(n){return parseInt(n,10)},frameRate(n){return QI(n)},startNumber(n){return parseInt(n,10)},timescale(n){return parseInt(n,10)},presentationTimeOffset(n){return parseInt(n,10)},duration(n){const e=parseInt(n,10);return isNaN(e)?Du(n):e},d(n){return parseInt(n,10)},t(n){return parseInt(n,10)},r(n){return parseInt(n,10)},presentationTime(n){return parseInt(n,10)},DEFAULT(n){return n}},Mi=n=>n&&n.attributes?AT(n.attributes).reduce((e,t)=>{const i=ib[t.name]||ib.DEFAULT;return e[t.name]=i(t.value),e},{}):{},ZI={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},lg=(n,e)=>e.length?gc(n.map(function(t){return e.map(function(i){const r=ah(i),s=sg(t.baseUrl,r),o=Ki(Mi(i),{baseUrl:s});return s!==r&&!o.serviceLocation&&t.serviceLocation&&(o.serviceLocation=t.serviceLocation),o})})):n,k1=n=>{const e=fi(n,"SegmentTemplate")[0],t=fi(n,"SegmentList")[0],i=t&&fi(t,"SegmentURL").map(m=>Ki({tag:"SegmentURL"},Mi(m))),r=fi(n,"SegmentBase")[0],s=t||e,o=s&&fi(s,"SegmentTimeline")[0],u=t||r||e,c=u&&fi(u,"Initialization")[0],h=e&&Mi(e);h&&c?h.initialization=c&&Mi(c):h&&h.initialization&&(h.initialization={sourceURL:h.initialization});const f={template:h,segmentTimeline:o&&fi(o,"S").map(m=>Mi(m)),list:t&&Ki(Mi(t),{segmentUrls:i,initialization:Mi(c)}),base:r&&Ki(Mi(r),{initialization:Mi(c)})};return Object.keys(f).forEach(m=>{f[m]||delete f[m]}),f},e5=(n,e,t)=>i=>{const r=fi(i,"BaseURL"),s=lg(e,r),o=Ki(n,Mi(i)),u=k1(i);return s.map(c=>({segmentInfo:Ki(t,u),attributes:Ki(o,c)}))},t5=n=>n.reduce((e,t)=>{const i=Mi(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const r=ZI[i.schemeIdUri];if(r){e[r]={attributes:i};const s=fi(t,"cenc:pssh")[0];if(s){const o=ah(s);e[r].pssh=o&&_T(o)}}return e},{}),i5=n=>{if(n.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{let i,r;return r=t,/^CC\d=/.test(t)?[i,r]=t.split("="):/^CC\d$/.test(t)&&(i=t),{channel:i,language:r}});if(n.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{const i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[r,s=""]=t.split("=");i.channel=r,i.language=t,s.split(",").forEach(o=>{const[u,c]=o.split(":");u==="lang"?i.language=c:u==="er"?i.easyReader=Number(c):u==="war"?i.aspectRatio=Number(c):u==="3D"&&(i["3D"]=Number(c))})}else i.language=t;return i.channel&&(i.channel="SERVICE"+i.channel),i})},n5=n=>gc(fi(n.node,"EventStream").map(e=>{const t=Mi(e),i=t.schemeIdUri;return fi(e,"Event").map(r=>{const s=Mi(r),o=s.presentationTime||0,u=t.timescale||1,c=s.duration||0,h=o/u+n.attributes.start;return{schemeIdUri:i,value:t.value,id:s.id,start:h,end:h+c/u,messageData:ah(r)||s.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),r5=(n,e,t)=>i=>{const r=Mi(i),s=lg(e,fi(i,"BaseURL")),o=fi(i,"Role")[0],u={role:Mi(o)};let c=Ki(n,r,u);const h=fi(i,"Accessibility")[0],f=i5(Mi(h));f&&(c=Ki(c,{captionServices:f}));const m=fi(i,"Label")[0];if(m&&m.childNodes.length){const D=m.childNodes[0].nodeValue.trim();c=Ki(c,{label:D})}const x=t5(fi(i,"ContentProtection"));Object.keys(x).length&&(c=Ki(c,{contentProtection:x}));const w=k1(i),A=fi(i,"Representation"),C=Ki(t,w);return gc(A.map(e5(c,s,C)))},s5=(n,e)=>(t,i)=>{const r=lg(e,fi(t.node,"BaseURL")),s=Ki(n,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(s.periodDuration=t.attributes.duration);const o=fi(t.node,"AdaptationSet"),u=k1(t.node);return gc(o.map(r5(s,r,u)))},a5=(n,e)=>{if(n.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!n.length)return null;const t=Ki({serverURL:ah(n[0])},Mi(n[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},o5=({attributes:n,priorPeriodAttributes:e,mpdType:t})=>typeof n.start=="number"?n.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,l5=(n,e={})=>{const{manifestUri:t="",NOW:i=Date.now(),clientOffset:r=0,eventHandler:s=function(){}}=e,o=fi(n,"Period");if(!o.length)throw new Error(mc.INVALID_NUMBER_OF_PERIOD);const u=fi(n,"Location"),c=Mi(n),h=lg([{baseUrl:t}],fi(n,"BaseURL")),f=fi(n,"ContentSteering");c.type=c.type||"static",c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=i,c.clientOffset=r,u.length&&(c.locations=u.map(ah));const m=[];return o.forEach((x,w)=>{const A=Mi(x),C=m[w-1];A.start=o5({attributes:A,priorPeriodAttributes:C?C.attributes:null,mpdType:c.type}),m.push({node:x,attributes:A})}),{locations:c.locations,contentSteeringInfo:a5(f,s),representationInfo:gc(m.map(s5(c,h))),eventStream:gc(m.map(n5))}},MT=n=>{if(n==="")throw new Error(mc.DASH_EMPTY_MANIFEST);const e=new vI.DOMParser;let t,i;try{t=e.parseFromString(n,"application/xml"),i=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(mc.DASH_INVALID_XML);return i},u5=n=>{const e=fi(n,"UTCTiming")[0];if(!e)return null;const t=Mi(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(mc.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},c5=(n,e={})=>{const t=l5(MT(n),e),i=YI(t.representationInfo);return $I({dashPlaylists:i,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},d5=n=>u5(MT(n));var jy,nb;function h5(){if(nb)return jy;nb=1;var n=Math.pow(2,32),e=function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r;return i.getBigUint64?(r=i.getBigUint64(0),r<Number.MAX_SAFE_INTEGER?Number(r):r):i.getUint32(0)*n+i.getUint32(4)};return jy={getUint64:e,MAX_UINT32:n},jy}var Uy,rb;function f5(){if(rb)return Uy;rb=1;var n=h5().getUint64,e=function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8)},s=12;r.version===0?(r.earliestPresentationTime=i.getUint32(s),r.firstOffset=i.getUint32(s+4),s+=8):(r.earliestPresentationTime=n(t.subarray(s)),r.firstOffset=n(t.subarray(s+8)),s+=16),s+=2;var o=i.getUint16(s);for(s+=2;o>0;s+=12,o--)r.references.push({referenceType:(t[s]&128)>>>7,referencedSize:i.getUint32(s)&2147483647,subsegmentDuration:i.getUint32(s+4),startsWithSap:!!(t[s+8]&128),sapType:(t[s+8]&112)>>>4,sapDeltaTime:i.getUint32(s+8)&268435455});return r};return Uy=e,Uy}var p5=f5();const g5=Js(p5);var m5=et([73,68,51]),y5=function(e,t){t===void 0&&(t=0),e=et(e);var i=e[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(i&16)>>4;return s?r+20:r+10},Id=function n(e,t){return t===void 0&&(t=0),e=et(e),e.length-t<10||!hi(e,m5,{offset:t})?t:(t+=y5(e,t),n(e,t))},sb=function(e){return typeof e=="string"?CT(e):e},v5=function(e){return Array.isArray(e)?e.map(function(t){return sb(t)}):[sb(e)]},_5=function n(e,t,i){i===void 0&&(i=!1),t=v5(t),e=et(e);var r=[];if(!t.length)return r;for(var s=0;s<e.length;){var o=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,u=e.subarray(s+4,s+8);if(o===0)break;var c=s+o;if(c>e.length){if(i)break;c=e.length}var h=e.subarray(s+8,c);hi(u,t[0])&&(t.length===1?r.push(h):r.push.apply(r,n(h,t.slice(1),i))),s=c}return r},$f={EBML:et([26,69,223,163]),DocType:et([66,130]),Segment:et([24,83,128,103]),SegmentInfo:et([21,73,169,102]),Tracks:et([22,84,174,107]),Track:et([174]),TrackNumber:et([215]),DefaultDuration:et([35,227,131]),TrackEntry:et([174]),TrackType:et([131]),FlagDefault:et([136]),CodecID:et([134]),CodecPrivate:et([99,162]),VideoTrack:et([224]),AudioTrack:et([225]),Cluster:et([31,67,182,117]),Timestamp:et([231]),TimestampScale:et([42,215,177]),BlockGroup:et([160]),BlockDuration:et([155]),Block:et([161]),SimpleBlock:et([163])},C0=[128,64,32,16,8,4,2,1],b5=function(e){for(var t=1,i=0;i<C0.length&&!(e&C0[i]);i++)t++;return t},Rp=function(e,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var s=b5(e[t]),o=e.subarray(t,t+s);return i&&(o=Array.prototype.slice.call(e,t,t+s),o[0]^=C0[s-1]),{length:s,value:cI(o,{signed:r}),bytes:o}},ab=function n(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return n(t)}):typeof e=="number"?dI(e):e},x5=function(e){return Array.isArray(e)?e.map(function(t){return ab(t)}):[ab(e)]},S5=function n(e,t,i){if(i>=t.length)return t.length;var r=Rp(t,i,!1);if(hi(e.bytes,r.bytes))return i;var s=Rp(t,i+r.length);return n(e,t,i+s.length+s.value+r.length)},ob=function n(e,t){t=x5(t),e=et(e);var i=[];if(!t.length)return i;for(var r=0;r<e.length;){var s=Rp(e,r,!1),o=Rp(e,r+s.length),u=r+s.length+o.length;o.value===127&&(o.value=S5(s,e,u),o.value!==e.length&&(o.value-=u));var c=u+o.value>e.length?e.length:u+o.value,h=e.subarray(u,c);hi(t[0],s.bytes)&&(t.length===1?i.push(h):i=i.concat(n(h,t.slice(1))));var f=s.length+o.length+h.length;r+=f}return i},T5=et([0,0,0,1]),C5=et([0,0,1]),w5=et([0,0,3]),E5=function(e){for(var t=[],i=1;i<e.length-2;)hi(e.subarray(i,i+3),w5)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var r=e.length-t.length,s=new Uint8Array(r),o=0;for(i=0;i<r;o++,i++)o===t[0]&&(o++,t.shift()),s[i]=e[o];return s},PT=function(e,t,i,r){e=et(e),i=[].concat(i);for(var s=0,o,u=0;s<e.length&&(u<r||o);){var c=void 0;if(hi(e.subarray(s),T5)?c=4:hi(e.subarray(s),C5)&&(c=3),!c){s++;continue}if(u++,o)return E5(e.subarray(o,s));var h=void 0;t==="h264"?h=e[s+c]&31:t==="h265"&&(h=e[s+c]>>1&63),i.indexOf(h)!==-1&&(o=s+c),s+=c+(t==="h264"?1:2)}return e.subarray(0,0)},A5=function(e,t,i){return PT(e,"h264",t,i)},D5=function(e,t,i){return PT(e,"h265",t,i)},mn={webm:et([119,101,98,109]),matroska:et([109,97,116,114,111,115,107,97]),flac:et([102,76,97,67]),ogg:et([79,103,103,83]),ac3:et([11,119]),riff:et([82,73,70,70]),avi:et([65,86,73]),wav:et([87,65,86,69]),"3gp":et([102,116,121,112,51,103]),mp4:et([102,116,121,112]),fmp4:et([115,116,121,112]),mov:et([102,116,121,112,113,116]),moov:et([109,111,111,118]),moof:et([109,111,111,102])},yc={aac:function(e){var t=Id(e);return hi(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Id(e);return hi(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=ob(e,[$f.EBML,$f.DocType])[0];return hi(t,mn.webm)},mkv:function(e){var t=ob(e,[$f.EBML,$f.DocType])[0];return hi(t,mn.matroska)},mp4:function(e){if(yc["3gp"](e)||yc.mov(e))return!1;if(hi(e,mn.mp4,{offset:4})||hi(e,mn.fmp4,{offset:4})||hi(e,mn.moof,{offset:4})||hi(e,mn.moov,{offset:4}))return!0},mov:function(e){return hi(e,mn.mov,{offset:4})},"3gp":function(e){return hi(e,mn["3gp"],{offset:4})},ac3:function(e){var t=Id(e);return hi(e,mn.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=Id(e);return hi(e,mn.flac,{offset:t})},ogg:function(e){return hi(e,mn.ogg)},avi:function(e){return hi(e,mn.riff)&&hi(e,mn.avi,{offset:8})},wav:function(e){return hi(e,mn.riff)&&hi(e,mn.wav,{offset:8})},h264:function(e){return A5(e,7,3).length},h265:function(e){return D5(e,[32,33],3).length}},w0=Object.keys(yc).filter(function(n){return n!=="ts"&&n!=="h264"&&n!=="h265"}).concat(["ts","h264","h265"]);w0.forEach(function(n){var e=yc[n];yc[n]=function(t){return e(et(t))}});var I5=yc,M1=function(e){e=et(e);for(var t=0;t<w0.length;t++){var i=w0[t];if(I5[i](e))return i}return""},k5=function(e){return _5(e,["moof"]).length>0},$y,lb;function M5(){if(lb)return $y;lb=1;var n=9e4,e,t,i,r,s,o,u;return e=function(c){return c*n},t=function(c,h){return c*h},i=function(c){return c/n},r=function(c,h){return c/h},s=function(c,h){return e(r(c,h))},o=function(c,h){return t(i(c),h)},u=function(c,h,f){return i(f?c:c-h)},$y={ONE_SECOND_IN_TS:n,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:i,audioTsToSeconds:r,audioTsToVideoTs:s,videoTsToAudioTs:o,metadataTsToSeconds:u},$y}var Tl=M5();/**
 * @license
 * Video.js 8.23.3 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var E0="8.23.3";const Sa={},wo=function(n,e){return Sa[n]=Sa[n]||[],e&&(Sa[n]=Sa[n].concat(e)),Sa[n]},P5=function(n,e){wo(n,e)},OT=function(n,e){const t=wo(n).indexOf(e);return t<=-1?!1:(Sa[n]=Sa[n].slice(),Sa[n].splice(t,1),!0)},O5=function(n,e){wo(n,[].concat(e).map(t=>{const i=(...r)=>(OT(n,i),t(...r));return i}))},Lp={prefixed:!0},tp=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],ub=tp[0];let kd;for(let n=0;n<tp.length;n++)if(tp[n][1]in Ne){kd=tp[n];break}if(kd){for(let n=0;n<kd.length;n++)Lp[ub[n]]=kd[n];Lp.prefixed=kd[0]!==ub[0]}let Nn=[];const R5=(n,e,t)=>(i,r,s)=>{const o=e.levels[r],u=new RegExp(`^(${o})$`);let c=n;if(i!=="log"&&s.unshift(i.toUpperCase()+":"),t&&(c=`%c${n}`,s.unshift(t)),s.unshift(c+":"),Nn){Nn.push([].concat(s));const f=Nn.length-1e3;Nn.splice(0,f>0?f:0)}if(!W.console)return;let h=W.console[i];!h&&i==="debug"&&(h=W.console.info||W.console.log),!(!h||!o||!u.test(i))&&h[Array.isArray(s)?"apply":"call"](W.console,s)};function A0(n,e=":",t=""){let i="info",r;function s(...o){r("log",i,o)}return r=R5(n,s,t),s.createLogger=(o,u,c)=>{const h=u!==void 0?u:e,f=c!==void 0?c:t,m=`${n} ${h} ${o}`;return A0(m,h,f)},s.createNewLogger=(o,u,c)=>A0(o,u,c),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},s.level=o=>{if(typeof o=="string"){if(!s.levels.hasOwnProperty(o))throw new Error(`"${o}" in not a valid log level`);i=o}return i},s.history=()=>Nn?[].concat(Nn):[],s.history.filter=o=>(Nn||[]).filter(u=>new RegExp(`.*${o}.*`).test(u[0])),s.history.clear=()=>{Nn&&(Nn.length=0)},s.history.disable=()=>{Nn!==null&&(Nn.length=0,Nn=null)},s.history.enable=()=>{Nn===null&&(Nn=[])},s.error=(...o)=>r("error",i,o),s.warn=(...o)=>r("warn",i,o),s.debug=(...o)=>r("debug",i,o),s}const At=A0("VIDEOJS"),RT=At.createLogger,L5=Object.prototype.toString,LT=function(n){return Xs(n)?Object.keys(n):[]};function Yu(n,e){LT(n).forEach(t=>e(n[t],t))}function NT(n,e,t=0){return LT(n).reduce((i,r)=>e(i,n[r],r),t)}function Xs(n){return!!n&&typeof n=="object"}function vc(n){return Xs(n)&&L5.call(n)==="[object Object]"&&n.constructor===Object}function ei(...n){const e={};return n.forEach(t=>{t&&Yu(t,(i,r)=>{if(!vc(i)){e[r]=i;return}vc(e[r])||(e[r]={}),e[r]=ei(e[r],i)})}),e}function FT(n={}){const e=[];for(const t in n)if(n.hasOwnProperty(t)){const i=n[t];e.push(i)}return e}function ug(n,e,t,i=!0){const r=o=>Object.defineProperty(n,e,{value:o,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const o=t();return r(o),o}};return i&&(s.set=r),Object.defineProperty(n,e,s)}var N5=Object.freeze({__proto__:null,each:Yu,reduce:NT,isObject:Xs,isPlain:vc,merge:ei,values:FT,defineLazyProperty:ug});let P1=!1,BT=null,rs=!1,jT,UT=!1,Qu=!1,Ju=!1,Ys=!1,O1=null,cg=null;const F5=!!(W.cast&&W.cast.framework&&W.cast.framework.CastReceiverContext);let $T=null,Np=!1,dg=!1,Fp=!1,hg=!1,Bp=!1,jp=!1,Up=!1;const Xd=!!(wc()&&("ontouchstart"in W||W.navigator.maxTouchPoints||W.DocumentTouch&&W.document instanceof W.DocumentTouch)),uo=W.navigator&&W.navigator.userAgentData;uo&&uo.platform&&uo.brands&&(rs=uo.platform==="Android",Qu=!!uo.brands.find(n=>n.brand==="Microsoft Edge"),Ju=!!uo.brands.find(n=>n.brand==="Chromium"),Ys=!Qu&&Ju,O1=cg=(uo.brands.find(n=>n.brand==="Chromium")||{}).version||null,dg=uo.platform==="Windows");if(!Ju){const n=W.navigator&&W.navigator.userAgent||"";P1=/iPod/i.test(n),BT=function(){const e=n.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),rs=/Android/i.test(n),jT=function(){const e=n.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),UT=/Firefox/i.test(n),Qu=/Edg/i.test(n),Ju=/Chrome/i.test(n)||/CriOS/i.test(n),Ys=!Qu&&Ju,O1=cg=function(){const e=n.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),$T=function(){const e=/MSIE\s(\d+)\.\d/.exec(n);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(n)&&/rv:11.0/.test(n)&&(t=11),t}(),Bp=/Tizen/i.test(n),jp=/Web0S/i.test(n),Up=Bp||jp,Np=/Safari/i.test(n)&&!Ys&&!rs&&!Qu&&!Up,dg=/Windows/i.test(n),Fp=/iPad/i.test(n)||Np&&Xd&&!/iPhone/i.test(n),hg=/iPhone/i.test(n)&&!Fp}const an=hg||Fp||P1,fg=(Np||an)&&!Ys;var zT=Object.freeze({__proto__:null,get IS_IPOD(){return P1},get IOS_VERSION(){return BT},get IS_ANDROID(){return rs},get ANDROID_VERSION(){return jT},get IS_FIREFOX(){return UT},get IS_EDGE(){return Qu},get IS_CHROMIUM(){return Ju},get IS_CHROME(){return Ys},get CHROMIUM_VERSION(){return O1},get CHROME_VERSION(){return cg},IS_CHROMECAST_RECEIVER:F5,get IE_VERSION(){return $T},get IS_SAFARI(){return Np},get IS_WINDOWS(){return dg},get IS_IPAD(){return Fp},get IS_IPHONE(){return hg},get IS_TIZEN(){return Bp},get IS_WEBOS(){return jp},get IS_SMART_TV(){return Up},TOUCH_ENABLED:Xd,IS_IOS:an,IS_ANY_SAFARI:fg});function cb(n){return typeof n=="string"&&!!n.trim()}function B5(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function wc(){return Ne===W.document}function Ec(n){return Xs(n)&&n.nodeType===1}function VT(){try{return W.parent!==W.self}catch{return!0}}function HT(n){return function(e,t){if(!cb(e))return Ne[n](null);cb(t)&&(t=Ne.querySelector(t));const i=Ec(t)?t:Ne;return i[n]&&i[n](e)}}function rt(n="div",e={},t={},i){const r=Ne.createElement(n);return Object.getOwnPropertyNames(e).forEach(function(s){const o=e[s];s==="textContent"?ko(r,o):(r[s]!==o||s==="tabIndex")&&(r[s]=o)}),Object.getOwnPropertyNames(t).forEach(function(s){r.setAttribute(s,t[s])}),i&&R1(r,i),r}function ko(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function D0(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function Nd(n,e){return B5(e),n.classList.contains(e)}function Dl(n,...e){return n.classList.add(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n}function pg(n,...e){return n?(n.classList.remove(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n):(At.warn("removeClass was called with an element that doesn't exist"),null)}function qT(n,e,t){return typeof t=="function"&&(t=t(n,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(i=>n.classList.toggle(i,t)),n}function WT(n,e){Object.getOwnPropertyNames(e).forEach(function(t){const i=e[t];i===null||typeof i>"u"||i===!1?n.removeAttribute(t):n.setAttribute(t,i===!0?"":i)})}function yo(n){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(n&&n.attributes&&n.attributes.length>0){const i=n.attributes;for(let r=i.length-1;r>=0;r--){const s=i[r].name;let o=i[r].value;t.includes(s)&&(o=o!==null),e[s]=o}}return e}function GT(n,e){return n.getAttribute(e)}function _c(n,e,t){n.setAttribute(e,t)}function gg(n,e){n.removeAttribute(e)}function KT(){Ne.body.focus(),Ne.onselectstart=function(){return!1}}function XT(){Ne.onselectstart=function(){return!0}}function bc(n){if(n&&n.getBoundingClientRect&&n.parentNode){const e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(xc(n,"height"))),t.width||(t.width=parseFloat(xc(n,"width"))),t}}function Yd(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};const e=n.offsetWidth,t=n.offsetHeight;let i=0,r=0;for(;n.offsetParent&&n!==Ne[Lp.fullscreenElement];)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return{left:i,top:r,width:e,height:t}}function mg(n,e){const t={x:0,y:0};if(an){let f=n;for(;f&&f.nodeName.toLowerCase()!=="html";){const m=xc(f,"transform");if(/^matrix/.test(m)){const x=m.slice(7,-1).split(/,\s/).map(Number);t.x+=x[4],t.y+=x[5]}else if(/^matrix3d/.test(m)){const x=m.slice(9,-1).split(/,\s/).map(Number);t.x+=x[12],t.y+=x[13]}if(f.assignedSlot&&f.assignedSlot.parentElement&&W.WebKitCSSMatrix){const x=W.getComputedStyle(f.assignedSlot.parentElement).transform,w=new W.WebKitCSSMatrix(x);t.x+=w.m41,t.y+=w.m42}f=f.parentNode||f.host}}const i={},r=Yd(e.target),s=Yd(n),o=s.width,u=s.height;let c=e.offsetY-(s.top-r.top),h=e.offsetX-(s.left-r.left);return e.changedTouches&&(h=e.changedTouches[0].pageX-s.left,c=e.changedTouches[0].pageY+s.top,an&&(h-=t.x,c-=t.y)),i.y=1-Math.max(0,Math.min(1,c/u)),i.x=Math.max(0,Math.min(1,h/o)),i}function YT(n){return Xs(n)&&n.nodeType===3}function yg(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function QT(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(e=>{if(typeof e=="function"&&(e=e()),Ec(e)||YT(e))return e;if(typeof e=="string"&&/\S/.test(e))return Ne.createTextNode(e)}).filter(e=>e)}function R1(n,e){return QT(e).forEach(t=>n.appendChild(t)),n}function JT(n,e){return R1(yg(n),e)}function Qd(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0||n.type==="mouseup"&&n.button===0&&n.buttons===0||n.type==="mousedown"&&n.button===0&&n.buttons===0?!0:!(n.button!==0||n.buttons!==1)}const Eo=HT("querySelector"),ZT=HT("querySelectorAll");function xc(n,e){if(!n||!e)return"";if(typeof W.getComputedStyle=="function"){let t;try{t=W.getComputedStyle(n)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function eC(n){[...Ne.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(r=>r.cssText).join(""),i=Ne.createElement("style");i.textContent=t,n.document.head.appendChild(i)}catch{const i=Ne.createElement("link");i.rel="stylesheet",i.type=e.type,i.media=e.media.mediaText,i.href=e.href,n.document.head.appendChild(i)}})}var tC=Object.freeze({__proto__:null,isReal:wc,isEl:Ec,isInFrame:VT,createEl:rt,textContent:ko,prependTo:D0,hasClass:Nd,addClass:Dl,removeClass:pg,toggleClass:qT,setAttributes:WT,getAttributes:yo,getAttribute:GT,setAttribute:_c,removeAttribute:gg,blockTextSelection:KT,unblockTextSelection:XT,getBoundingClientRect:bc,findPosition:Yd,getPointerPosition:mg,isTextNode:YT,emptyEl:yg,normalizeContent:QT,appendContent:R1,insertContent:JT,isSingleLeftClick:Qd,$:Eo,$$:ZT,computedStyle:xc,copyStyleSheetsToWindow:eC});let iC=!1,I0;const j5=function(){if(I0.options.autoSetup===!1)return;const n=Array.prototype.slice.call(Ne.getElementsByTagName("video")),e=Array.prototype.slice.call(Ne.getElementsByTagName("audio")),t=Array.prototype.slice.call(Ne.getElementsByTagName("video-js")),i=n.concat(e,t);if(i&&i.length>0)for(let r=0,s=i.length;r<s;r++){const o=i[r];if(o&&o.getAttribute)o.player===void 0&&o.getAttribute("data-setup")!==null&&I0(o);else{k0(1);break}}else iC||k0(1)};function k0(n,e){wc()&&(e&&(I0=e),W.setTimeout(j5,n))}function M0(){iC=!0,W.removeEventListener("load",M0)}wc()&&(Ne.readyState==="complete"?M0():W.addEventListener("load",M0));const nC=function(n){const e=Ne.createElement("style");return e.className=n,e},rC=function(n,e){n.styleSheet?n.styleSheet.cssText=e:n.textContent=e};var xn=new WeakMap;const U5=3;let $5=U5;function Br(){return $5++}function db(n,e){if(!xn.has(n))return;const t=xn.get(n);t.handlers[e].length===0&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&xn.delete(n)}function L1(n,e,t,i){t.forEach(function(r){n(e,r,i)})}function vg(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){const i=n||W.event;n={};const r=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const s in i)r.includes(s)||s==="returnValue"&&i.preventDefault||(n[s]=i[s]);if(n.target||(n.target=n.srcElement||Ne),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){i.preventDefault&&i.preventDefault(),n.returnValue=!1,i.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),n.cancelBubble=!0,i.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,n.clientX!==null&&n.clientX!==void 0){const s=Ne.documentElement,o=Ne.body;n.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),n.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n.fixed_=!0,n}let zf;const z5=function(){if(typeof zf!="boolean"){zf=!1;try{const n=Object.defineProperty({},"passive",{get(){zf=!0}});W.addEventListener("test",null,n),W.removeEventListener("test",null,n)}catch{}}return zf},V5=["touchstart","touchmove"];function yr(n,e,t){if(Array.isArray(e))return L1(yr,n,e,t);xn.has(n)||xn.set(n,{});const i=xn.get(n);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=Br()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(r,s){if(i.disabled)return;r=vg(r);const o=i.handlers[r.type];if(o){const u=o.slice(0);for(let c=0,h=u.length;c<h&&!r.isImmediatePropagationStopped();c++)try{u[c].call(n,r,s)}catch(f){At.error(f)}}}),i.handlers[e].length===1)if(n.addEventListener){let r=!1;z5()&&V5.indexOf(e)>-1&&(r={passive:!0}),n.addEventListener(e,i.dispatcher,r)}else n.attachEvent&&n.attachEvent("on"+e,i.dispatcher)}function on(n,e,t){if(!xn.has(n))return;const i=xn.get(n);if(!i.handlers)return;if(Array.isArray(e))return L1(on,n,e,t);const r=function(o,u){i.handlers[u]=[],db(o,u)};if(e===void 0){for(const o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&r(n,o);return}const s=i.handlers[e];if(s){if(!t){r(n,e);return}if(t.guid)for(let o=0;o<s.length;o++)s[o].guid===t.guid&&s.splice(o--,1);db(n,e)}}function Ac(n,e,t){const i=xn.has(n)?xn.get(n):{},r=n.parentNode||n.ownerDocument;if(typeof e=="string"?e={type:e,target:n}:e.target||(e.target=n),e=vg(e),i.dispatcher&&i.dispatcher.call(n,e,t),r&&!e.isPropagationStopped()&&e.bubbles===!0)Ac.call(null,r,e,t);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){xn.has(e.target)||xn.set(e.target,{});const s=xn.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function _g(n,e,t){if(Array.isArray(e))return L1(_g,n,e,t);const i=function(){on(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||Br(),yr(n,e,i)}function N1(n,e,t){const i=function(){on(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||Br(),yr(n,e,i)}var H5=Object.freeze({__proto__:null,fixEvent:vg,on:yr,off:on,trigger:Ac,one:_g,any:N1});const jr=30,oi=function(n,e,t){e.guid||(e.guid=Br());const i=e.bind(n);return i.guid=t?t+"_"+e.guid:e.guid,i},Qs=function(n,e){let t=W.performance.now();return function(...r){const s=W.performance.now();s-t>=e&&(n(...r),t=s)}},sC=function(n,e,t,i=W){let r;const s=()=>{i.clearTimeout(r),r=null},o=function(){const u=this,c=arguments;let h=function(){r=null,h=null,t||n.apply(u,c)};!r&&t&&n.apply(u,c),i.clearTimeout(r),r=i.setTimeout(h,e)};return o.cancel=s,o};var q5=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:jr,bind_:oi,throttle:Qs,debounce:sC});let _d;class vr{on(e,t){const i=this.addEventListener;this.addEventListener=()=>{},yr(this,e,t),this.addEventListener=i}off(e,t){on(this,e,t)}one(e,t){const i=this.addEventListener;this.addEventListener=()=>{},_g(this,e,t),this.addEventListener=i}any(e,t){const i=this.addEventListener;this.addEventListener=()=>{},N1(this,e,t),this.addEventListener=i}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=vg(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Ac(this,e)}queueTrigger(e){_d||(_d=new Map);const t=e.type||e;let i=_d.get(this);i||(i=new Map,_d.set(this,i));const r=i.get(t);i.delete(t),W.clearTimeout(r);const s=W.setTimeout(()=>{i.delete(t),i.size===0&&(i=null,_d.delete(this)),this.trigger(e)},0);i.set(t,s)}}vr.prototype.allowedEvents_={};vr.prototype.addEventListener=vr.prototype.on;vr.prototype.removeEventListener=vr.prototype.off;vr.prototype.dispatchEvent=vr.prototype.trigger;const bg=n=>typeof n.name=="function"?n.name():typeof n.name=="string"?n.name:n.name_?n.name_:n.constructor&&n.constructor.name?n.constructor.name:typeof n,Ea=n=>n instanceof vr||!!n.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof n[e]=="function"),W5=(n,e)=>{Ea(n)?e():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(e))},P0=n=>typeof n=="string"&&/\S/.test(n)||Array.isArray(n)&&!!n.length,$p=(n,e,t)=>{if(!n||!n.nodeName&&!Ea(n))throw new Error(`Invalid target for ${bg(e)}#${t}; must be a DOM node or evented object.`)},aC=(n,e,t)=>{if(!P0(n))throw new Error(`Invalid event type for ${bg(e)}#${t}; must be a non-empty string or array.`)},oC=(n,e,t)=>{if(typeof n!="function")throw new Error(`Invalid listener for ${bg(e)}#${t}; must be a function.`)},zy=(n,e,t)=>{const i=e.length<3||e[0]===n||e[0]===n.eventBusEl_;let r,s,o;return i?(r=n.eventBusEl_,e.length>=3&&e.shift(),[s,o]=e):(r=e[0],s=e[1],o=e[2]),$p(r,n,t),aC(s,n,t),oC(o,n,t),o=oi(n,o),{isTargetingSelf:i,target:r,type:s,listener:o}},ul=(n,e,t,i)=>{$p(n,n,e),n.nodeName?H5[e](n,t,i):n[e](t,i)},G5={on(...n){const{isTargetingSelf:e,target:t,type:i,listener:r}=zy(this,n,"on");if(ul(t,"on",i,r),!e){const s=()=>this.off(t,i,r);s.guid=r.guid;const o=()=>this.off("dispose",s);o.guid=r.guid,ul(this,"on","dispose",s),ul(t,"on","dispose",o)}},one(...n){const{isTargetingSelf:e,target:t,type:i,listener:r}=zy(this,n,"one");if(e)ul(t,"one",i,r);else{const s=(...o)=>{this.off(t,i,s),r.apply(null,o)};s.guid=r.guid,ul(t,"one",i,s)}},any(...n){const{isTargetingSelf:e,target:t,type:i,listener:r}=zy(this,n,"any");if(e)ul(t,"any",i,r);else{const s=(...o)=>{this.off(t,i,s),r.apply(null,o)};s.guid=r.guid,ul(t,"any",i,s)}},off(n,e,t){if(!n||P0(n))on(this.eventBusEl_,n,e);else{const i=n,r=e;$p(i,this,"off"),aC(r,this,"off"),oC(t,this,"off"),t=oi(this,t),this.off("dispose",t),i.nodeName?(on(i,r,t),on(i,"dispose",t)):Ea(i)&&(i.off(r,t),i.off("dispose",t))}},trigger(n,e){$p(this.eventBusEl_,this,"trigger");const t=n&&typeof n!="string"?n.type:n;if(!P0(t))throw new Error(`Invalid event type for ${bg(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Ac(this.eventBusEl_,n,e)}};function F1(n,e={}){const{eventBusKey:t}=e;if(t){if(!n[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);n.eventBusEl_=n[t]}else n.eventBusEl_=rt("span",{className:"vjs-event-bus"});return Object.assign(n,G5),n.eventedCallbacks&&n.eventedCallbacks.forEach(i=>{i()}),n.on("dispose",()=>{n.off(),[n,n.el_,n.eventBusEl_].forEach(function(i){i&&xn.has(i)&&xn.delete(i)}),W.setTimeout(()=>{n.eventBusEl_=null},0)}),n}const K5={state:{},setState(n){typeof n=="function"&&(n=n());let e;return Yu(n,(t,i)=>{this.state[i]!==t&&(e=e||{},e[i]={from:this.state[i],to:t}),this.state[i]=t}),e&&Ea(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function lC(n,e){return Object.assign(n,K5),n.state=Object.assign({},n.state,e),typeof n.handleStateChanged=="function"&&Ea(n)&&n.on("statechanged",n.handleStateChanged),n}const Fd=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toLowerCase())},Ei=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},uC=function(n,e){return Ei(n)===Ei(e)};var X5=Object.freeze({__proto__:null,toLowerCase:Fd,toTitleCase:Ei,titleCaseEquals:uC});class Ae{constructor(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=ei({},this.options_),t=this.options_=ei(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const r=e&&e.id&&e.id()||"no_player";this.id_=`${r}_component_${Br()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(r=>this.addClass(r)),["on","off","one","any","trigger"].forEach(r=>{this[r]=void 0}),t.evented!==!1&&(F1(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),lC(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(i),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=ei(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,i){return rt(e,t,i)}localize(e,t,i=e){const r=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),o=s&&s[r],u=r&&r.split("-")[0],c=s&&s[u];let h=i;return o&&o[e]?h=o[e]:c&&c[e]&&(h=c[e]),t&&(h=h.replace(/\{(\d+)\}/g,function(f,m){const x=t[m-1];let w=x;return typeof x>"u"&&(w=f),w})),h}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,r)=>i.concat(r),[]);let t=this;for(let i=0;i<e.length;i++)if(t=t.getChild(e[i]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",r=rt("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=Ne.createElementNS(i,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const o=Ne.createElementNS(i,"use");return s.appendChild(o),o.setAttributeNS(null,"href",`#vjs-icon-${e}`),r.appendChild(s),this.iconIsSet_?t.replaceChild(r,t.querySelector(".vjs-icon-placeholder")):t.appendChild(r),this.iconIsSet_=!0,r}addChild(e,t={},i=this.children_.length){let r,s;if(typeof e=="string"){s=Ei(e);const o=t.componentClass||s;t.name=s;const u=Ae.getComponent(o);if(!u)throw new Error(`Component ${o} does not exist`);if(typeof u!="function")return null;r=new u(this.player_||this,t)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,typeof r.id=="function"&&(this.childIndex_[r.id()]=r),s=s||r.name&&Ei(r.name()),s&&(this.childNameIndex_[s]=r,this.childNameIndex_[Fd(s)]=r),typeof r.el=="function"&&r.el()){let o=null;this.children_[i+1]&&(this.children_[i+1].el_?o=this.children_[i+1].el_:Ec(this.children_[i+1])&&(o=this.children_[i+1])),this.contentEl().insertBefore(r.el(),o)}return r}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){t=!0,this.children_.splice(r,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Ei(e.name())]=null,this.childNameIndex_[Fd(e.name())]=null;const i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,i=o=>{const u=o.name;let c=o.opts;if(t[u]!==void 0&&(c=t[u]),c===!1)return;c===!0&&(c={}),c.playerOptions=this.options_.playerOptions;const h=this.addChild(u,c);h&&(this[u]=h)};let r;const s=Ae.getComponent("Tech");Array.isArray(e)?r=e:r=Object.keys(e),r.concat(Object.keys(this.options_).filter(function(o){return!r.some(function(u){return typeof u=="string"?o===u:o===u.name})})).map(o=>{let u,c;return typeof o=="string"?(u=o,c=e[u]||this.options_[u]||{}):(u=o.name,c=o),{name:u,opts:c}}).filter(o=>{const u=Ae.getComponent(o.opts.componentClass||Ei(o.name));return u&&!s.isTech(u)}).forEach(i)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return Eo(e,t||this.contentEl())}$$(e,t){return ZT(e,t||this.contentEl())}hasClass(e){return Nd(this.el_,e)}addClass(...e){Dl(this.el_,...e)}removeClass(...e){pg(this.el_,...e)}toggleClass(e,t){qT(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return GT(this.el_,e)}setAttribute(e,t){_c(this.el_,e,t)}removeAttribute(e){gg(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,i){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;const r=this.el_.style[e],s=r.indexOf("px");return parseInt(s!==-1?r.slice(0,s):this.el_["offset"+Ei(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=xc(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const i=`offset${Ei(e)}`;t=this.el_[i]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},i={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:i}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const i=10,r=200;let s;this.on("touchstart",function(u){u.touches.length===1&&(t={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},e=W.performance.now(),s=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)s=!1;else if(t){const c=u.touches[0].pageX-t.pageX,h=u.touches[0].pageY-t.pageY;Math.sqrt(c*c+h*h)>i&&(s=!1)}});const o=function(){s=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(u){t=null,s===!0&&W.performance.now()-e<r&&(u.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=oi(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const i=function(r){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,t){var i;return e=oi(this,e),this.clearTimersOnDispose_(),i=W.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),W.clearTimeout(e)),e}setInterval(e,t){e=oi(this,e),this.clearTimersOnDispose_();const i=W.setInterval(e,t);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),W.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=oi(this,e),t=W.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=oi(this,t);const i=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),W.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((i,r)=>this[t](r))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(s){const o=W.getComputedStyle(s,null),u=o.getPropertyValue("visibility");return o.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(u)}function i(s){return!(!t(s.parentElement)||!t(s)||s.style.opacity==="0"||W.getComputedStyle(s).height==="0px"||W.getComputedStyle(s).width==="0px")}function r(s){if(s.offsetWidth+s.offsetHeight+s.getBoundingClientRect().height+s.getBoundingClientRect().width===0)return!1;const o={x:s.getBoundingClientRect().left+s.offsetWidth/2,y:s.getBoundingClientRect().top+s.offsetHeight/2};if(o.x<0||o.x>(Ne.documentElement.clientWidth||W.innerWidth)||o.y<0||o.y>(Ne.documentElement.clientHeight||W.innerHeight))return!1;let u=Ne.elementFromPoint(o.x,o.y);for(;u;){if(u===s)return!0;if(u.parentNode)u=u.parentNode;else return!1}}return e||(e=this.el()),!!(r(e)&&i(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const i=Ae.getComponent("Tech"),r=i&&i.isTech(t),s=Ae===t||Ae.prototype.isPrototypeOf(t.prototype);if(r||!s){let u;throw r?u="techs must be registered using Tech.registerTech()":u="must be a Component subclass",new Error(`Illegal component, "${e}"; ${u}.`)}e=Ei(e),Ae.components_||(Ae.components_={});const o=Ae.getComponent("Player");if(e==="Player"&&o&&o.players){const u=o.players,c=Object.keys(u);if(u&&c.length>0){for(let h=0;h<c.length;h++)if(u[c[h]]!==null)throw new Error("Can not register Player component after player has been created.")}}return Ae.components_[e]=t,Ae.components_[Fd(e)]=t,t}static getComponent(e){if(!(!e||!Ae.components_))return Ae.components_[e]}}Ae.registerComponent("Component",Ae);function Y5(n,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${n}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function hb(n,e,t,i){return Y5(n,i,t.length-1),t[i][e]}function Vy(n){let e;return n===void 0||n.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:n.length,start:hb.bind(null,"start",0,n),end:hb.bind(null,"end",1,n)},W.Symbol&&W.Symbol.iterator&&(e[W.Symbol.iterator]=()=>(n||[]).values()),e}function ns(n,e){return Array.isArray(n)?Vy(n):n===void 0||e===void 0?Vy():Vy([[n,e]])}const cC=function(n,e){n=n<0?0:n;let t=Math.floor(n%60),i=Math.floor(n/60%60),r=Math.floor(n/3600);const s=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(n)||n===1/0)&&(r=i=t="-"),r=r>0||o>0?r+":":"",i=((r||s>=10)&&i<10?"0"+i:i)+":",t=t<10?"0"+t:t,r+i+t};let B1=cC;function dC(n){B1=n}function hC(){B1=cC}function Ol(n,e=n){return B1(n,e)}var Q5=Object.freeze({__proto__:null,createTimeRanges:ns,createTimeRange:ns,setFormatTime:dC,resetFormatTime:hC,formatTime:Ol});function fC(n,e){let t=0,i,r;if(!e)return 0;(!n||!n.length)&&(n=ns(0,0));for(let s=0;s<n.length;s++)i=n.start(s),r=n.end(s),r>e&&(r=e),t+=r-i;return t/e}function Ci(n){if(n instanceof Ci)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:Xs(n)&&(typeof n.code=="number"&&(this.code=n.code),Object.assign(this,n)),this.message||(this.message=Ci.defaultMessages[this.code]||"")}Ci.prototype.code=0;Ci.prototype.message="";Ci.prototype.status=null;Ci.prototype.metadata=null;Ci.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Ci.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Ci.MEDIA_ERR_CUSTOM=0;Ci.prototype.MEDIA_ERR_CUSTOM=0;Ci.MEDIA_ERR_ABORTED=1;Ci.prototype.MEDIA_ERR_ABORTED=1;Ci.MEDIA_ERR_NETWORK=2;Ci.prototype.MEDIA_ERR_NETWORK=2;Ci.MEDIA_ERR_DECODE=3;Ci.prototype.MEDIA_ERR_DECODE=3;Ci.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ci.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ci.MEDIA_ERR_ENCRYPTED=5;Ci.prototype.MEDIA_ERR_ENCRYPTED=5;function Bd(n){return n!=null&&typeof n.then=="function"}function zs(n){Bd(n)&&n.then(null,e=>{})}const O0=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,i,r)=>(n[i]&&(t[i]=n[i]),t),{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},J5=function(n){const e=n.$$("track"),t=Array.prototype.map.call(e,r=>r.track);return Array.prototype.map.call(e,function(r){const s=O0(r.track);return r.src&&(s.src=r.src),s}).concat(Array.prototype.filter.call(n.textTracks(),function(r){return t.indexOf(r)===-1}).map(O0))},Z5=function(n,e){return n.forEach(function(t){const i=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(r=>i.addCue(r))}),e.textTracks()};var R0={textTracksToJson:J5,jsonToTextTracks:Z5,trackToJson:O0};const Hy="vjs-modal-dialog";class Dc extends Ae{constructor(e,t){super(e,t),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=rt("div",{className:`${Hy}-content`},{role:"document"}),this.descEl_=rt("p",{className:`${Hy}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),ko(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Hy} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let i=this.getChild("closeButton");if(t&&!i){const r=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),i=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),JT(t,e),this.trigger("modalfill"),r?i.insertBefore(t,r):i.appendChild(t);const s=this.getChild("closeButton");s&&i.appendChild(s.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),yg(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Ne.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const t=this.focusableEls_(),i=this.el_.querySelector(":focus");let r;for(let s=0;s<t.length;s++)if(i===t[s]){r=s;break}Ne.activeElement===this.el_&&(r=0),e.shiftKey&&r===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&r===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof W.HTMLAnchorElement||t instanceof W.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof W.HTMLInputElement||t instanceof W.HTMLSelectElement||t instanceof W.HTMLTextAreaElement||t instanceof W.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof W.HTMLIFrameElement||t instanceof W.HTMLObjectElement||t instanceof W.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}}Dc.prototype.options_={pauseOnOpen:!0,temporary:!0};Ae.registerComponent("ModalDialog",Dc);class Rl extends vr{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Ea(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let i=0,r=this.length;i<r;i++){const s=this[i];if(s.id===e){t=s;break}}return t}}Rl.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const n in Rl.prototype.allowedEvents_)Rl.prototype["on"+n]=null;const qy=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].enabled=!1)};class pC extends Rl{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){qy(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&qy(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,qy(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const Wy=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].selected=!1)};class gC extends Rl{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Wy(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&Wy(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Wy(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class j1 extends Rl{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(e=>e.toJSON())}}class e8{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let i=0,r=this.trackElements_.length;i<r;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(e){for(let t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class zp{constructor(e){zp.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let i=0;const r=e.length;this.cues_=e,this.length_=e.length;const s=function(o){""+o in this||Object.defineProperty(this,""+o,{get(){return this.cues_[o]}})};if(t<r)for(i=t;i<r;i++)s.call(this,i)}getCueById(e){let t=null;for(let i=0,r=this.length;i<r;i++){const s=this[i];if(s.id===e){t=s;break}}return t}}const t8={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},i8={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},n8={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},fb={disabled:"disabled",hidden:"hidden",showing:"showing"};class U1 extends vr{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Br(),kind:e.kind||"",language:e.language||""};let i=e.label||"";for(const r in t)Object.defineProperty(this,r,{get(){return t[r]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(r){r!==i&&(i=r,this.trigger("labelchange"))}})}}const $1=function(n){return new URL(n,Ne.baseURI)},mC=function(n){return new URL(n,Ne.baseURI).href},z1=function(n){if(typeof n=="string"){const t=n.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return t?t[1].toLowerCase():""}return""},xg=function(n,e=W.location){return $1(n).origin!==e.origin};var r8=Object.freeze({__proto__:null,parseUrl:$1,getAbsoluteURL:mC,getFileExtension:z1,isCrossOrigin:xg});const pb=function(n,e){const t=new W.WebVTT.Parser(W,W.vttjs,W.WebVTT.StringDecoder()),i=[];t.oncue=function(r){e.addCue(r)},t.onparsingerror=function(r){i.push(r)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(n),i.length>0&&(W.console&&W.console.groupCollapsed&&W.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),i.forEach(r=>At.error(r)),W.console&&W.console.groupEnd&&W.console.groupEnd()),t.flush()},gb=function(n,e){const t={uri:n},i=xg(n);i&&(t.cors=i);const r=e.tech_.crossOrigin()==="use-credentials";r&&(t.withCredentials=r),vT(t,oi(this,function(s,o,u){if(s)return At.error(s,o);e.loaded_=!0,typeof W.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],c=>{if(c.type==="vttjserror"){At.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return pb(u,e)}):pb(u,e)}))};class oh extends U1{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=ei(e,{kind:n8[e.kind]||"subtitles",language:e.language||e.srclang||""});let i=fb[t.mode]||"disabled";const r=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const s=new zp(this.cues_),o=new zp(this.activeCues_);let u=!1;this.timeupdateHandler=oi(this,function(h={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1),h.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const c=()=>{this.stopTracking()};this.tech_.one("dispose",c),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return r},set(){}},mode:{get(){return i},set(h){fb[h]&&i!==h&&(i=h,!this.preload_&&i!=="disabled"&&this.cues.length===0&&gb(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return o;const h=this.tech_.currentTime(),f=[];for(let m=0,x=this.cues.length;m<x;m++){const w=this.cues[m];w.startTime<=h&&w.endTime>=h&&f.push(w)}if(u=!1,f.length!==this.activeCues_.length)u=!0;else for(let m=0;m<f.length;m++)this.activeCues_.indexOf(f[m])===-1&&(u=!0);return this.activeCues_=f,o.setCues_(this.activeCues_),o},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&gb(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new W.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const r in e)r in t||(t[r]=e[r]);t.id=e.id,t.originalCue_=e}const i=this.tech_.textTracks();for(let r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}toJSON(){return R0.trackToJson(this)}removeCue(e){let t=this.cues_.length;for(;t--;){const i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}oh.prototype.allowedEvents_={cuechange:"cuechange"};class yC extends U1{constructor(e={}){const t=ei(e,{kind:i8[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class vC extends U1{constructor(e={}){const t=ei(e,{kind:t8[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class Da extends vr{constructor(e={}){super();let t;const i=new oh(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return i}}}),t=Da.NONE,i.addEventListener("loadeddata",()=>{t=Da.LOADED,this.trigger({type:"load",target:this})})}}Da.prototype.allowedEvents_={load:"load"};Da.NONE=0;Da.LOADING=1;Da.LOADED=2;Da.ERROR=3;const Nr={audio:{ListClass:pC,TrackClass:yC,capitalName:"Audio"},video:{ListClass:gC,TrackClass:vC,capitalName:"Video"},text:{ListClass:j1,TrackClass:oh,capitalName:"Text"}};Object.keys(Nr).forEach(function(n){Nr[n].getterName=`${n}Tracks`,Nr[n].privateName=`${n}Tracks_`});const Sc={remoteText:{ListClass:j1,TrackClass:oh,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:e8,TrackClass:Da,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},vn=Object.assign({},Nr,Sc);Sc.names=Object.keys(Sc);Nr.names=Object.keys(Nr);vn.names=[].concat(Sc.names).concat(Nr.names);function s8(n,e,t,i,r={}){const s=n.textTracks();r.kind=e,t&&(r.label=t),i&&(r.language=i),r.tech=n;const o=new vn.text.TrackClass(r);return s.addTrack(o),o}class yt extends Ae{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),vn.names.forEach(i=>{const r=vn[i];e&&e[r.getterName]&&(this[r.privateName]=e[r.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new vn.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(oi(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return ns(0,0)}bufferedPercent(){return fC(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Nr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const i=this[`${t}Tracks`]()||[];let r=i.length;for(;r--;){const s=i[r];t==="text"&&this.removeRemoteTextTrack(s),i.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const i=e[t];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Ci(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?ns(0,0):ns()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Nr.names.forEach(e=>{const t=Nr[e],i=()=>{this.trigger(`${e}trackchange`)},r=this[t.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),this.on("dispose",()=>{r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!W.WebVTT)if(Ne.body.contains(this.el())){if(!this.options_["vtt.js"]&&vc(j_)&&Object.keys(j_).length>0){this.trigger("vttjsloaded");return}const e=Ne.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),W.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),i=u=>e.addTrack(u.track),r=u=>e.removeTrack(u.track);t.on("addtrack",i),t.on("removetrack",r),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),o=()=>{s();for(let u=0;u<e.length;u++){const c=e[u];c.removeEventListener("cuechange",s),c.mode==="showing"&&c.addEventListener("cuechange",s)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",r),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(let u=0;u<e.length;u++)e[u].removeEventListener("cuechange",s)})}addTextTrack(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return s8(this,e,t,i)}createRemoteTextTrack(e){const t=ei(e,{tech:this});return new Sc.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const i=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Br();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return yt.canPlayType(e.type)}static isTech(e){return e.prototype instanceof yt||e instanceof yt||e===yt}static registerTech(e,t){if(yt.techs_||(yt.techs_={}),!yt.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!yt.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!yt.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Ei(e),yt.techs_[e]=t,yt.techs_[Fd(e)]=t,e!=="Tech"&&yt.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(yt.techs_&&yt.techs_[e])return yt.techs_[e];if(e=Ei(e),W&&W.videojs&&W.videojs[e])return At.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),W.videojs[e]}}}vn.names.forEach(function(n){const e=vn[n];yt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});yt.prototype.featuresVolumeControl=!0;yt.prototype.featuresMuteControl=!0;yt.prototype.featuresFullscreenResize=!1;yt.prototype.featuresPlaybackRate=!1;yt.prototype.featuresProgressEvents=!1;yt.prototype.featuresSourceset=!1;yt.prototype.featuresTimeupdateEvents=!1;yt.prototype.featuresNativeTextTracks=!1;yt.prototype.featuresVideoFrameCallback=!1;yt.withSourceHandlers=function(n){n.registerSourceHandler=function(t,i){let r=n.sourceHandlers;r||(r=n.sourceHandlers=[]),i===void 0&&(i=r.length),r.splice(i,0,t)},n.canPlayType=function(t){const i=n.sourceHandlers||[];let r;for(let s=0;s<i.length;s++)if(r=i[s].canPlayType(t),r)return r;return""},n.selectSourceHandler=function(t,i){const r=n.sourceHandlers||[];let s;for(let o=0;o<r.length;o++)if(s=r[o].canHandleSource(t,i),s)return r[o];return null},n.canPlaySource=function(t,i){const r=n.selectSourceHandler(t,i);return r?r.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){const i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){let i=n.selectSourceHandler(t,this.options_);i||(n.nativeSourceHandler?i=n.nativeSourceHandler:At.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Ae.registerComponent("Tech",yt);yt.registerTech("Tech",yt);yt.defaultTechOrder_=[];const Il={},Vp={},Hp={};function a8(n,e){Il[n]=Il[n]||[],Il[n].push(e)}function o8(n,e,t){n.setTimeout(()=>gl(e,Il[e.type],t,n),1)}function l8(n,e){n.forEach(t=>t.setTech&&t.setTech(e))}function u8(n,e,t){return n.reduceRight(V1(t),e[t]())}function c8(n,e,t,i){return e[t](n.reduce(V1(t),i))}function mb(n,e,t,i=null){const r="call"+Ei(t),s=n.reduce(V1(r),i),o=s===Hp,u=o?null:e[t](s);return f8(n,t,u,o),u}const d8={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},h8={setCurrentTime:1,setMuted:1,setVolume:1},yb={play:1,pause:1};function V1(n){return(e,t)=>e===Hp?Hp:t[n]?t[n](e):e}function f8(n,e,t,i){for(let r=n.length-1;r>=0;r--){const s=n[r];s[e]&&s[e](i,t)}}function p8(n){Vp.hasOwnProperty(n.id())&&delete Vp[n.id()]}function g8(n,e){const t=Vp[n.id()];let i=null;if(t==null)return i=e(n),Vp[n.id()]=[[e,i]],i;for(let r=0;r<t.length;r++){const[s,o]=t[r];s===e&&(i=o)}return i===null&&(i=e(n),t.push([e,i])),i}function gl(n={},e=[],t,i,r=[],s=!1){const[o,...u]=e;if(typeof o=="string")gl(n,Il[o],t,i,r,s);else if(o){const c=g8(i,o);if(!c.setSource)return r.push(c),gl(n,u,t,i,r,s);c.setSource(Object.assign({},n),function(h,f){if(h)return gl(n,u,t,i,r,s);r.push(c),gl(f,n.type===f.type?u:Il[f.type],t,i,r,s)})}else u.length?gl(n,u,t,i,r,s):s?t(n,r):gl(n,Il["*"],t,i,r,!0)}const m8={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},qp=function(n=""){const e=z1(n);return m8[e.toLowerCase()]||""},y8=(n,e)=>{if(!e)return"";if(n.cache_.source.src===e&&n.cache_.source.type)return n.cache_.source.type;const t=n.cache_.sources.filter(r=>r.src===e);if(t.length)return t[0].type;const i=n.$$("source");for(let r=0;r<i.length;r++){const s=i[r];if(s.type&&s.src&&s.src===e)return s.type}return qp(e)},_C=function(n){if(Array.isArray(n)){let e=[];n.forEach(function(t){t=_C(t),Array.isArray(t)?e=e.concat(t):Xs(t)&&e.push(t)}),n=e}else typeof n=="string"&&n.trim()?n=[vb({src:n})]:Xs(n)&&typeof n.src=="string"&&n.src&&n.src.trim()?n=[vb(n)]:n=[];return n};function vb(n){if(!n.type){const e=qp(n.src);e&&(n.type=e)}return n}var v8=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const _b=Bp?10009:jp?461:8,Iu={codes:{play:415,pause:19,ff:417,rw:412,back:_b},names:{415:"play",19:"pause",417:"ff",412:"rw",[_b]:"back"},isEventKey(n,e){return e=e.toLowerCase(),!!(this.names[n.keyCode]&&this.names[n.keyCode]===e)},getEventName(n){if(this.names[n.keyCode])return this.names[n.keyCode];if(this.codes[n.code]){const e=this.codes[n.code];return this.names[e]}return null}},bb=5;class _8 extends vr{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const i=t.key.substring(5).toLowerCase();this.move(i)}else if(Iu.isEventKey(t,"play")||Iu.isEventKey(t,"pause")||Iu.isEventKey(t,"ff")||Iu.isEventKey(t,"rw")){t.preventDefault();const i=Iu.getEventName(t);this.performMediaAction_(i)}else Iu.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+bb);break;case"rw":this.userSeek_(this.player_.currentTime()-bb);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let i=null;const r=this.getCurrentComponent(e.target);t&&(i=!!t.closest(".video-js"),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!i||!t)&&(r&&r.name()==="CloseButton"?this.refocusComponent():(this.pause(),r&&r.el()&&(this.lastFocusedComponent_=r)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function i(r){for(const s of r)s.hasOwnProperty("el_")&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())&&t.push(s),s.hasOwnProperty("children_")&&s.children_.length>0&&i(s.children_)}return e.children_.forEach(r=>{if(r.hasOwnProperty("el_"))if(r.getIsFocusable&&r.getIsAvailableToBeFocused&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())){t.push(r);return}else r.hasOwnProperty("children_")&&r.children_.length>0?i(r.children_):r.hasOwnProperty("items")&&r.items.length>0?i(r.items):this.findSuitableDOMChild(r)&&t.push(r);if(r.name_==="ErrorDisplay"&&r.opened_){const s=r.el_.querySelector(".vjs-errors-ok-button-container");s&&s.querySelectorAll("button").forEach((u,c)=>{t.push({name:()=>"ModalButton"+(c+1),el:()=>u,getPositions:()=>{const h=u.getBoundingClientRect(),f={x:h.x,y:h.y,width:h.width,height:h.height,top:h.top,right:h.right,bottom:h.bottom,left:h.left},m={x:h.left+h.width/2,y:h.top+h.height/2,width:0,height:0,top:h.top+h.height/2,right:h.left+h.width/2,bottom:h.top+h.height/2,left:h.left+h.width/2};return{boundingClientRect:f,center:m}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:h=>!0,focus:()=>u.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(i){if(e.getIsFocusable(i)&&e.getIsAvailableToBeFocused(i))return i;for(let r=0;r<i.children.length;r++){const s=i.children[r],o=t(s);if(o)return o}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length){for(const i of this.focusableComponents)if(i.el()===t)return i}}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const i=t.getPositions(),r=this.focusableComponents.filter(o=>o!==t&&this.isInDirection_(i.boundingClientRect,o.getPositions().boundingClientRect,e)),s=this.findBestCandidate_(i.center,r,e);s?this.focus(s):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,i){let r=1/0,s=null;for(const o of t){const u=o.getPositions().center,c=this.calculateDistance_(e,u,i);c<r&&(r=c,s=o)}return s}isInDirection_(e,t,i){switch(i){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,i){const r=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);let o;switch(i){case"right":case"left":o=r+s*100;break;case"up":o=s*2+r*.5;break;case"down":o=s*5+r;break;default:o=r+s}return o}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}}class b8 extends Ae{constructor(e,t,i){const r=ei({createEl:!1},t);if(super(e,r,i),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let s=0,o=t.playerOptions.techOrder;s<o.length;s++){const u=Ei(o[s]);let c=yt.getTech(u);if(u||(c=Ae.getComponent(u)),c&&c.isSupported()){e.loadTech_(u);break}}else e.src(t.playerOptions.sources)}}Ae.registerComponent("MediaLoader",b8);class Sg extends Ae{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",t={},i={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&At.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=t.tabIndex;const r=rt(e,t,i);return this.player_.options_.experimentalSvgIcons||r.appendChild(rt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=rt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const i=this.localize(e);this.controlText_=e,ko(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Ae.registerComponent("ClickableComponent",Sg);class L0 extends Sg{constructor(e,t){super(e,t),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return rt("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(rt("picture",{className:"vjs-poster",tabIndex:-1},{},rt("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?zs(this.player_.play()):this.player_.pause())}}L0.prototype.crossorigin=L0.prototype.crossOrigin;Ae.registerComponent("PosterImage",L0);const Pr="#222",xb="#ccc",x8={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Gy(n,e){let t;if(n.length===4)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)t=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function Es(n,e,t){try{n.style[e]=t}catch{return}}function Sb(n){return n?`${n}px`:""}class S8 extends Ae{constructor(e,t,i){super(e,t,i);const r=o=>this.updateDisplay(o),s=o=>{this.updateDisplayOverlay(),this.updateDisplay(o)};e.on("loadstart",o=>this.toggleDisplay(o)),e.on("useractive",r),e.on("userinactive",r),e.on("texttrackchange",r),e.on("loadedmetadata",o=>{this.updateDisplayOverlay(),this.preselectTrack(o)}),e.ready(oi(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",s),e.on("playerresize",s);const o=W.screen.orientation||W,u=W.screen.orientation?"change":"orientationchange";o.addEventListener(u,s),e.on("dispose",()=>o.removeEventListener(u,s));const c=this.options_.playerOptions.tracks||[];for(let h=0;h<c.length;h++)this.player_.addRemoteTextTrack(c[h],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let r,s,o;for(let u=0;u<t.length;u++){const c=t[u];i&&i.enabled&&i.language&&i.language===c.language&&c.kind in e?c.kind===i.kind?o=c:o||(o=c):i&&!i.enabled?(o=null,r=null,s=null):c.default&&(c.kind==="descriptions"&&!r?r=c:c.kind in e&&!s&&(s=c))}o?o.mode="showing":s?s.mode="showing":r&&(r.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof W.WebVTT=="function"&&W.WebVTT.processCues(W,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const o=[];for(let u=0;u<e.length;++u){const c=e[u];c.mode==="showing"&&o.push(c)}this.updateForTrack(o);return}let i=null,r=null,s=e.length;for(;s--;){const o=e[s];o.mode==="showing"&&(o.kind==="descriptions"?i=o:r=o)}if(r?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i)),!W.CSS.supports("inset","10px")){const o=this.el_,u=o.querySelectorAll(".vjs-text-track-cue"),c=this.player_.controlBar.el_.getBoundingClientRect().height,h=this.player_.el_.getBoundingClientRect().height;o.style="",Es(o,"position","relative"),Es(o,"height",h-c+"px"),Es(o,"top","unset"),Up?Es(o,"bottom",h+"px"):Es(o,"bottom","0px"),u.length>0&&u.forEach(f=>{if(f.style.inset){const m=f.style.inset.split(" ");m.length===3&&Object.assign(f.style,{top:m[0],right:m[1],bottom:m[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!W.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),i=e/t,r=this.player_.videoWidth()/this.player_.videoHeight();let s=0,o=0;Math.abs(i-r)>.1&&(i>r?s=Math.round((e-t*r)/2):o=Math.round((t-e/r)/2)),Es(this.el_,"insetInline",Sb(s)),Es(this.el_,"insetBlock",Sb(o))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),i=e.activeCues;let r=i.length;for(;r--;){const s=i[r];if(!s)continue;const o=s.displayState;if(t.color&&(o.firstChild.style.color=t.color),t.textOpacity&&Es(o.firstChild,"color",Gy(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(o.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Es(o.firstChild,"backgroundColor",Gy(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Es(o,"backgroundColor",Gy(t.windowColor,t.windowOpacity)):o.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?o.firstChild.style.textShadow=`2px 2px 3px ${Pr}, 2px 2px 4px ${Pr}, 2px 2px 5px ${Pr}`:t.edgeStyle==="raised"?o.firstChild.style.textShadow=`1px 1px ${Pr}, 2px 2px ${Pr}, 3px 3px ${Pr}`:t.edgeStyle==="depressed"?o.firstChild.style.textShadow=`1px 1px ${xb}, 0 1px ${xb}, -1px -1px ${Pr}, 0 -1px ${Pr}`:t.edgeStyle==="uniform"&&(o.firstChild.style.textShadow=`0 0 4px ${Pr}, 0 0 4px ${Pr}, 0 0 4px ${Pr}, 0 0 4px ${Pr}`)),t.fontPercent&&t.fontPercent!==1){const u=W.parseFloat(o.style.fontSize);o.style.fontSize=u*t.fontPercent+"px",o.style.height="auto",o.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=x8[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof W.WebVTT!="function"||e.every(i=>!i.activeCues))return;const t=[];for(let i=0;i<e.length;++i){const r=e[i];for(let s=0;s<r.activeCues.length;++s)t.push(r.activeCues[s])}W.WebVTT.processCues(W,t,this.el_);for(let i=0;i<e.length;++i){const r=e[i];for(let s=0;s<r.activeCues.length;++s){const o=r.activeCues[s].displayState;Dl(o,"vjs-text-track-cue","vjs-text-track-cue-"+(r.language?r.language:i)),r.language&&_c(o,"lang",r.language)}this.player_.textTrackSettings&&this.updateDisplayState(r)}}}Ae.registerComponent("TextTrackDisplay",S8);class T8 extends Ae{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=rt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),r=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Ae.registerComponent("LoadingSpinner",T8);class ln extends Sg{createEl(e,t={},i={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),i=Object.assign({type:"button"},i);const r=rt(e,t,i);return this.player_.options_.experimentalSvgIcons||r.appendChild(rt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}addChild(e,t={}){const i=this.constructor.name;return At.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),Ae.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}Ae.registerComponent("Button",ln);class bC extends ln{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(e.type==="tap"||this.mouseused_&&"clientX"in e&&"clientY"in e){zs(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(!r){this.player_.tech(!0).focus();return}const s=()=>r.focus();Bd(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}bC.prototype.controlText_="Play Video";Ae.registerComponent("BigPlayButton",bC);class C8 extends ln{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Ae.registerComponent("CloseButton",C8);class xC extends ln{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),t.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?zs(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}xC.prototype.controlText_="Play";Ae.registerComponent("PlayToggle",xC);class Ic extends Ae{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=rt("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(i),this.contentEl_=rt("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Ol(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,At.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Ne.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}Ic.prototype.labelText_="Time";Ic.prototype.controlText_="Time";Ae.registerComponent("TimeDisplay",Ic);class H1 extends Ic{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():e&&e.target&&typeof e.target.pendingSeekTime=="function"?t=e.target.pendingSeekTime():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}H1.prototype.labelText_="Current Time";H1.prototype.controlText_="Current Time";Ae.registerComponent("CurrentTimeDisplay",H1);class q1 extends Ic{constructor(e,t){super(e,t);const i=r=>this.updateContent(r);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}q1.prototype.labelText_="Duration";q1.prototype.controlText_="Duration";Ae.registerComponent("DurationDisplay",q1);class w8 extends Ae{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}}Ae.registerComponent("TimeDivider",w8);class W1 extends Ic{constructor(e,t){super(e,t),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(rt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}}W1.prototype.labelText_="Remaining Time";W1.prototype.controlText_="Remaining Time";Ae.registerComponent("RemainingTimeDisplay",W1);class E8 extends Ae{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=rt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(rt("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(Ne.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}Ae.registerComponent("LiveDisplay",E8);class SC extends ln{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=rt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}SC.prototype.controlText_="Seek to live, currently playing live";Ae.registerComponent("SeekToLive",SC);function lh(n,e,t){return n=Number(n),Math.min(t,Math.max(e,isNaN(n)?e:n))}var A8=Object.freeze({__proto__:null,clamp:lh});class G1 extends Ae{constructor(e,t){super(e,t),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,t,i)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Ys&&e.preventDefault(),KT(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;XT(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(lh(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=mg(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,i=t&&t.enabled,r=t&&t.horizontalSeek;i?r&&e.key==="ArrowLeft"||!r&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):r&&e.key==="ArrowRight"||!r&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(e)):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Ae.registerComponent("Slider",G1);const Ky=(n,e)=>lh(n/e*100,0,100).toFixed(2)+"%";class D8 extends Ae{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=rt("span",{className:"vjs-control-text"}),i=rt("span",{textContent:this.localize("Loaded")}),r=Ne.createTextNode(": ");return this.percentageEl_=rt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(r),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,i=this.player_.buffered(),r=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),o=this.partEls_,u=Ky(s,r);this.percent_!==u&&(this.el_.style.width=u,ko(this.percentageEl_,u),this.percent_=u);for(let c=0;c<i.length;c++){const h=i.start(c),f=i.end(c);let m=o[c];m||(m=this.el_.appendChild(rt()),o[c]=m),!(m.dataset.start===h&&m.dataset.end===f)&&(m.dataset.start=h,m.dataset.end=f,m.style.left=Ky(h,s),m.style.width=Ky(f-h,s))}for(let c=o.length;c>i.length;c--)this.el_.removeChild(o[c-1]);o.length=i.length})}}Ae.registerComponent("LoadProgressBar",D8);class I8 extends Ae{constructor(e,t){super(e,t),this.update=Qs(oi(this,this.update),jr)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,i){const r=Yd(this.el_),s=bc(this.player_.el()),o=e.width*t;if(!s||!r)return;let u=e.left-s.left+o,c=e.width-o+(s.right-e.right);c||(c=e.width-o,u=o);let h=r.width/2;u<h?h+=h-u:c<h&&(h=c),h<0?h=0:h>r.width&&(h=r.width),h=Math.round(h),this.el_.style.right=`-${h}px`,this.write(i)}write(e){ko(this.el_,e)}updateTime(e,t,i,r){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const o=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const u=this.player_.liveTracker.liveWindow(),c=u-t*u;s=(c<1?"":"-")+Ol(c,u)}else s=Ol(i,o);this.update(e,t,s),r&&r()})}}Ae.registerComponent("TimeTooltip",I8);class K1 extends Ae{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=Qs(oi(this,this.update),jr)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t,i){const r=this.getChild("timeTooltip");if(!r)return;const s=i&&i.target&&typeof i.target.pendingSeekTime=="function"?i.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(e,t,s)}}K1.prototype.options_={children:[]};!an&&!rs&&K1.prototype.options_.children.push("timeTooltip");Ae.registerComponent("PlayProgressBar",K1);class TC extends Ae{constructor(e,t){super(e,t),this.update=Qs(oi(this,this.update),jr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,()=>{this.el_.style.left=`${e.width*t}px`})}}TC.prototype.options_={children:["timeTooltip"]};Ae.registerComponent("MouseTimeDisplay",TC);class Tg extends G1{constructor(e,t){t=ei(Tg.prototype.options_,t),t.children=[...t.children];const i=e.options_.disableSeekWhileScrubbingOnMobile&&(an||rs)||e.options_.disableSeekWhileScrubbingOnSTV;(!an&&!rs||i)&&t.children.splice(1,0,"mouseTimeDisplay"),super(e,t),this.shouldDisableSeekWhileScrubbing_=i,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=oi(this,this.update),this.update=Qs(this.update_,jr),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ne&&"visibilityState"in Ne&&this.on(Ne,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Ne.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,jr))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Ne.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),r=this.player_.liveTracker;let s=this.player_.duration();r&&r.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==i||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ol(i,s),Ol(s,s)],"{1} of {2}")),this.currentTime_=i,this.duration_=s),this.bar&&this.bar.update(bc(this.el()),this.getProgress(),e)}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(e){if(e!==void 0)if(e!==null){const t=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(e,t))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(this.pendingSeekTime()!==null)return this.pendingSeekTime()/this.player_.duration();const e=this.getCurrentTime_();let t;const i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){Qd(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!Qd(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i;const r=this.calculateDistance(e),s=this.player_.liveTracker;if(!s||!s.isLive())i=r*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(r>=.99){s.seekToLiveEdge();return}const o=s.seekableStart(),u=s.liveCurrentTime();if(i=o+r*s.liveWindow(),i>=u&&(i=u),i<=o&&(i=o+.1),i===1/0)return}this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(i):this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?zs(this.player_.play()):this.update_()}handlePendingSeek_(e){this.player_.paused()||this.player_.pause();const t=this.pendingSeekTime()!==null?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(t+e),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const i=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Ne&&"visibilityState"in Ne&&this.off(Ne,"visibilitychange",this.toggleVisibility_),super.dispose()}}Tg.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};Ae.registerComponent("SeekBar",Tg);class CC extends Ae{constructor(e,t){super(e,t),this.handleMouseMove=Qs(oi(this,this.handleMouseMove),jr),this.throttledHandleMouseSeek=Qs(oi(this,this.handleMouseSeek),jr),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const i=t.getChild("playProgressBar"),r=t.getChild("mouseTimeDisplay");if(!i&&!r)return;const s=t.el(),o=Yd(s);let u=mg(s,e).x;u=lh(u,0,1),r&&r.update(o,u),i&&i.update(o,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&zs(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}CC.prototype.options_={children:["seekBar"]};Ae.registerComponent("ProgressControl",CC);class wC extends ln{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Ne.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in W?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Ne.exitPictureInPicture=="function"&&super.show()}}wC.prototype.controlText_="Picture-in-Picture";Ae.registerComponent("PictureInPictureToggle",wC);class EC extends ln{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),Ne[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}EC.prototype.controlText_="Fullscreen";Ae.registerComponent("FullscreenToggle",EC);const k8=function(n,e){e.tech_&&!e.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};class M8 extends Ae{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}Ae.registerComponent("VolumeLevel",M8);class P8 extends Ae{constructor(e,t){super(e,t),this.update=Qs(oi(this,this.update),jr)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,i,r){if(!i){const s=bc(this.el_),o=bc(this.player_.el()),u=e.width*t;if(!o||!s)return;const c=e.left-o.left+u,h=e.width-u+(o.right-e.right);let f=s.width/2;c<f?f+=f-c:h<f&&(f=h),f<0?f=0:f>s.width&&(f=s.width),this.el_.style.right=`-${f}px`}this.write(`${r}%`)}write(e){ko(this.el_,e)}updateVolume(e,t,i,r,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,i,r.toFixed(0)),s&&s()})}}Ae.registerComponent("VolumeLevelTooltip",P8);class AC extends Ae{constructor(e,t){super(e,t),this.update=Qs(oi(this,this.update),jr)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,i){const r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,r,()=>{i?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}}AC.prototype.options_={children:["volumeLevelTooltip"]};Ae.registerComponent("MouseVolumeLevelDisplay",AC);class Cg extends G1{constructor(e,t){super(e,t),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){Qd(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const i=this.el(),r=bc(i),s=this.vertical();let o=mg(i,e);o=s?o.y:o.x,o=lh(o,0,1),t.update(r,o,s)}Qd(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}Cg.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!an&&!rs&&Cg.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Cg.prototype.playerEvent="volumechange";Ae.registerComponent("VolumeBar",Cg);class DC extends Ae{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||vc(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),k8(this,e),this.throttledHandleMouseMove=Qs(oi(this,this.handleMouseMove),jr),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}DC.prototype.options_={children:["volumeBar"]};Ae.registerComponent("VolumeControl",DC);const O8=function(n,e){e.tech_&&!e.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};class IC extends ln{constructor(e,t){super(e,t),O8(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),i=this.player_.lastVolume_();if(t===0){const r=i<.1?.1:i;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),an&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),pg(this.el_,[0,1,2,3].reduce((i,r)=>i+`${r?" ":""}vjs-vol-${r}`,"")),Dl(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}IC.prototype.controlText_="Mute";Ae.registerComponent("MuteToggle",IC);class kC extends Ae{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||vc(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),yr(Ne,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),on(Ne,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}kC.prototype.options_={children:["muteToggle","volumeControl"]};Ae.registerComponent("VolumePanel",kC);class MC extends ln{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()?i.seekableEnd():this.player_.duration();let s;t+this.skipTime<=r?s=t+this.skipTime:s=r,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}MC.prototype.controlText_="Skip Forward";Ae.registerComponent("SkipForward",MC);class PC extends ln{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()&&i.seekableStart();let s;r&&t-this.skipTime<=r?s=r:t>=this.skipTime?s=t-this.skipTime:s=0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}PC.prototype.controlText_="Skip Backward";Ae.registerComponent("SkipBackward",PC);class OC extends Ae{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof Ae&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Ae&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=rt(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),yr(t,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Ne.activeElement;if(!this.children().some(i=>i.el()===t)){const i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const i=t.filter(r=>r.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}Ae.registerComponent("Menu",OC);class X1 extends Ae{constructor(e,t={}){super(e,t),this.menuButton_=new ln(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=ln.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const r=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",r),this.on(this.menuButton_,"click",r),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),yr(Ne,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new OC(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=rt("li",{className:"vjs-menu-title",textContent:Ei(this.options_.title),tabIndex:-1}),i=new Ae(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=ln.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),on(Ne,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),an&&VT())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Ae.registerComponent("MenuButton",X1);class Y1 extends X1{constructor(e,t){const i=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!i)return;const r=oi(this,this.update);i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),i.addEventListener("labelchange",r),this.player_.on("ready",r),this.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r),i.removeEventListener("labelchange",r)})}}Ae.registerComponent("TrackButton",Y1);class uh extends Sg{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,i){this.nonIconControl=!0;const r=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i),s=rt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?r.appendChild(s):r.replaceChild(s,r.querySelector(".vjs-icon-placeholder")),r}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Ae.registerComponent("MenuItem",uh);class ch extends uh{constructor(e,t){const i=t.track,r=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected=i.mode==="showing",super(e,t),this.track=i,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...u)=>{this.handleTracksChange.apply(this,u)},o=(...u)=>{this.handleSelectedLanguageChange.apply(this,u)};if(e.on(["loadstart","texttrackchange"],s),r.addEventListener("change",s),r.addEventListener("selectedlanguagechange",o),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),r.removeEventListener("change",s),r.removeEventListener("selectedlanguagechange",o)}),r.onchange===void 0){let u;this.on(["tap","click"],function(){if(typeof W.Event!="object")try{u=new W.Event("change")}catch{}u||(u=Ne.createEvent("Event"),u.initEvent("change",!0,!0)),r.dispatchEvent(u)})}this.handleTracksChange()}handleClick(e){const t=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let r=0;r<i.length;r++){const s=i[r];this.kinds.indexOf(s.kind)!==-1&&(s===t?s.mode!=="showing"&&(s.mode="showing"):s.mode!=="disabled"&&(s.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Ae.registerComponent("TextTrackMenuItem",ch);class RC extends ch{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let i=!0;for(let r=0,s=t.length;r<s;r++){const o=t[r];if(this.options_.kinds.indexOf(o.kind)>-1&&o.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let i=!0;for(let r=0,s=t.length;r<s;r++){const o=t[r];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&o.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Ae.registerComponent("OffTextTrackMenuItem",RC);class kc extends Y1{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=ch){let i;this.label_&&(i=`${this.label_} off`),e.push(new RC(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<r.length;s++){const o=r[s];if(this.kinds_.indexOf(o.kind)>-1){const u=new t(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});u.addClass(`vjs-${o.kind}-menu-item`),e.push(u)}}return e}}Ae.registerComponent("TextTrackButton",kc);class LC extends uh{constructor(e,t){const i=t.track,r=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=s&&s<r.endTime,super(e,t),this.track=i,this.cue=r}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Ae.registerComponent("ChaptersTrackMenuItem",LC);class Q1 extends kc{constructor(e,t,i){super(e,t,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(r=>{r.selected(this.track_.activeCues[0]===r.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const i=e[t];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Ei(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let i=0,r=t.length;i<r;i++){const s=t[i],o=new LC(this.player_,{track:this.track_,cue:s});e.push(o)}return e}}Q1.prototype.kind_="chapters";Q1.prototype.controlText_="Chapters";Ae.registerComponent("ChaptersButton",Q1);class J1 extends kc{constructor(e,t,i){super(e,t,i),this.setIcon("audio-description");const r=e.textTracks(),s=oi(this,this.handleTracksChange);r.addEventListener("change",s),this.on("dispose",function(){r.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let i=!1;for(let r=0,s=t.length;r<s;r++){const o=t[r];if(o.kind!==this.kind_&&o.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}J1.prototype.kind_="descriptions";J1.prototype.controlText_="Descriptions";Ae.registerComponent("DescriptionsButton",J1);class Z1 extends kc{constructor(e,t,i){super(e,t,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}Z1.prototype.kind_="subtitles";Z1.prototype.controlText_="Subtitles";Ae.registerComponent("SubtitlesButton",Z1);class e2 extends ch{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Ae.registerComponent("CaptionSettingsMenuItem",e2);class t2 extends kc{constructor(e,t,i){super(e,t,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new e2(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}t2.prototype.kind_="captions";t2.prototype.controlText_="Captions";Ae.registerComponent("CaptionsButton",t2);class NC extends ch{createEl(e,t,i){const r=super.createEl(e,t,i),s=r.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",r):s.appendChild(rt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(rt("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),r}}Ae.registerComponent("SubsCapsMenuItem",NC);class i2 extends kc{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Ei(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new e2(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,NC),e}}i2.prototype.kinds_=["captions","subtitles"];i2.prototype.controlText_="Subtitles";Ae.registerComponent("SubsCapsButton",i2);class FC extends uh{constructor(e,t){const i=t.track,r=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,super(e,t),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const s=(...o)=>{this.handleTracksChange.apply(this,o)};r.addEventListener("change",s),this.on("dispose",()=>{r.removeEventListener("change",s)})}createEl(e,t,i){const r=super.createEl(e,t,i),s=r.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(rt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(rt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const r=t[i];r!==this.track&&(r.enabled=r===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}Ae.registerComponent("AudioTrackMenuItem",FC);class BC extends Y1{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const r=t[i];e.push(new FC(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e}}BC.prototype.controlText_="Audio Track";Ae.registerComponent("AudioTrackButton",BC);class n2 extends uh{constructor(e,t){const i=t.rate,r=parseFloat(i,10);t.label=i,t.selected=r===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=i,this.rate=r,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}n2.prototype.contentElType="button";Ae.registerComponent("PlaybackRateMenuItem",n2);class jC extends X1{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=rt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let i=e.length-1;i>=0;i--)t.push(new n2(this.player(),{rate:e[i]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}jC.prototype.controlText_="Playback Rate";Ae.registerComponent("PlaybackRateMenuButton",jC);class UC extends Ae{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},i={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,i)}}Ae.registerComponent("Spacer",UC);class R8 extends UC{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}Ae.registerComponent("CustomControlSpacer",R8);class $C extends Ae{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}$C.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Ae.registerComponent("ControlBar",$C);class zC extends Dc{constructor(e,t){super(e,t),this.on(e,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}zC.prototype.options_=Object.assign({},Dc.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Ae.registerComponent("ErrorDisplay",zC);class VC extends Ae{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),rt("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const i=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Br()}`)+"-"+t[1].replace(/\W+/g,""),r=rt("option",{id:i,value:this.localize(t[0]),textContent:this.localize(t[1])});return r.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${i}`),r}))}}Ae.registerComponent("TextTrackSelect",VC);class kl extends Ae{constructor(e,t={}){super(e,t);const i=rt("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(i);const r=this.options_.selects;for(const s of r){const o=this.options_.selectConfigs[s],u=o.className,c=o.id.replace("%s",this.options_.id_);let h=null;const f=`vjs_select_${Br()}`;if(this.options_.type==="colors"){h=rt("span",{className:u});const x=rt("label",{id:c,className:"vjs-label",textContent:this.localize(o.label)});x.setAttribute("for",f),h.appendChild(x)}const m=new VC(e,{SelectOptions:o.options,legendId:this.options_.legendId,id:f,labelId:c});this.addChild(m),this.options_.type==="colors"&&(h.appendChild(m.el()),this.el().appendChild(h))}}createEl(){return rt("fieldset",{className:this.options_.className})}}Ae.registerComponent("TextTrackFieldset",kl);class HC extends Ae{constructor(e,t={}){super(e,t);const i=this.options_.textTrackComponentid,r=new kl(e,{id_:i,legendId:`captions-text-legend-${i}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const s=new kl(e,{id_:i,legendId:`captions-background-${i}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const o=new kl(e,{id_:i,legendId:`captions-window-${i}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(o)}createEl(){return rt("div",{className:"vjs-track-settings-colors"})}}Ae.registerComponent("TextTrackSettingsColors",HC);class qC extends Ae{constructor(e,t={}){super(e,t);const i=this.options_.textTrackComponentid,r=new kl(e,{id_:i,legendId:`captions-font-size-${i}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const s=new kl(e,{id_:i,legendId:`captions-edge-style-${i}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const o=new kl(e,{id_:i,legendId:`captions-font-family-${i}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(o)}createEl(){return rt("div",{className:"vjs-track-settings-font"})}}Ae.registerComponent("TextTrackSettingsFont",qC);class WC extends Ae{constructor(e,t={}){super(e,t);const i=new ln(e,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=this.localize("Reset"),this.addChild(i);const r=this.localize("Done"),s=new ln(e,{controlText:r,className:"vjs-done-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=r,this.addChild(s)}createEl(){return rt("div",{className:"vjs-track-settings-controls"})}}Ae.registerComponent("TrackSettingsControls",WC);const Xy="vjs-text-track-settings",Tb=["#000","Black"],Cb=["#00F","Blue"],wb=["#0FF","Cyan"],Eb=["#0F0","Green"],Ab=["#F0F","Magenta"],Db=["#F00","Red"],Ib=["#FFF","White"],kb=["#FF0","Yellow"],Yy=["1","Opaque"],Qy=["0.5","Semi-Transparent"],Mb=["0","Transparent"],vo={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Tb,Ib,Db,Eb,Cb,kb,Ab,wb],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Yy,Qy,Mb],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Ib,Tb,Db,Eb,Cb,kb,Ab,wb],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:n=>n==="1.00"?null:Number(n)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Yy,Qy],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[Mb,Qy,Yy],className:"vjs-window-opacity vjs-opacity"}};vo.windowColor.options=vo.backgroundColor.options;function GC(n,e){if(e&&(n=e(n)),n&&n!=="none")return n}function L8(n,e){const t=n.options[n.options.selectedIndex].value;return GC(t,e)}function N8(n,e,t){if(e){for(let i=0;i<n.options.length;i++)if(GC(n.options[i].value,t)===e){n.selectedIndex=i;break}}}class F8 extends Dc{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=rt("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new HC(e,{textTrackComponentid:this.id_,selectConfigs:vo,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const i=new qC(e,{textTrackComponentid:this.id_,selectConfigs:vo,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(i);const r=new WC(e);this.addChild(r)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),Yu(vo,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return NT(vo,(e,t,i)=>{const r=L8(this.$(t.selector),t.parser);return r!==void 0&&(e[i]=r),e},{})}setValues(e){Yu(vo,(t,i)=>{N8(this.$(t.selector),e[i],t.parser)})}setDefaults(){Yu(vo,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(W.localStorage.getItem(Xy))}catch(t){At.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?W.localStorage.setItem(Xy,JSON.stringify(e)):W.localStorage.removeItem(Xy)}catch(t){At.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Ae.registerComponent("TextTrackSettings",F8);class B8 extends Ae{constructor(e,t){let i=t.ResizeObserver||W.ResizeObserver;t.ResizeObserver===null&&(i=!1);const r=ei({createEl:!i,reportTouchActivity:!1},t);super(e,r),this.ResizeObserver=t.ResizeObserver||W.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=sC(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let o=this.unloadListener_=function(){on(this,"resize",s),on(this,"unload",o),o=null};yr(this.el_.contentWindow,"unload",o),yr(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Ae.registerComponent("ResizeManager",B8);const j8={trackingThreshold:20,liveTolerance:15};class U8 extends Ae{constructor(e,t){const i=ei(j8,t,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=r=>this.handlePlay(r),this.handleFirstTimeupdate_=r=>this.handleFirstTimeupdate(r),this.handleSeeked_=r=>this.handleSeeked(r),this.seekToLiveEdge_=r=>this.seekToLiveEdge(r),this.reset_(),this.on(this.player_,"durationchange",r=>this.handleDurationchange(r)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(W.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;const r=this.liveCurrentTime(),s=this.player_.currentTime();let o=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||r===1/0)&&(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,jr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Ae.registerComponent("LiveTracker",U8);class $8 extends Ae{constructor(e,t){super(e,t),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:rt("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Br()}`}),description:rt("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Br()}`})},rt("div",{className:"vjs-title-bar"},{},FT(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(r=>{const s=this.state[r],o=this.els[r],u=i[r];yg(o),s&&ko(o,s),t&&(t.removeAttribute(u),s&&t.setAttribute(u,o.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Ae.registerComponent("TitleBar",$8);const z8={initialDisplay:4e3,position:[],takeFocus:!1};class V8 extends ln{constructor(e,t){t=ei(z8,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],i=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=rt("button",{},{type:"button",class:this.buildCSSClass()},rt("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Ae.registerComponent("TransientButton",V8);const N0=n=>{const e=n.el();if(e.hasAttribute("src"))return n.triggerSourceset(e.src),!0;const t=n.$$("source"),i=[];let r="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const o=t[s].src;o&&i.indexOf(o)===-1&&i.push(o)}return i.length?(i.length===1&&(r=i[0]),n.triggerSourceset(r),!0):!1},H8=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(n){const e=Ne.createElement(this.nodeName.toLowerCase());e.innerHTML=n;const t=Ne.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",W.Element.prototype.appendChild.call(this,t),this.innerHTML}}),KC=(n,e)=>{let t={};for(let i=0;i<n.length&&(t=Object.getOwnPropertyDescriptor(n[i],e),!(t&&t.set&&t.get));i++);return t.enumerable=!0,t.configurable=!0,t},q8=n=>KC([n.el(),W.HTMLMediaElement.prototype,W.Element.prototype,H8],"innerHTML"),Pb=function(n){const e=n.el();if(e.resetSourceWatch_)return;const t={},i=q8(n),r=s=>(...o)=>{const u=s.apply(e,o);return N0(n),u};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(t[s]=e[s],e[s]=r(t[s]))}),Object.defineProperty(e,"innerHTML",ei(i,{set:r(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",i)},n.one("sourceset",e.resetSourceWatch_)},W8=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?mC(W.Element.prototype.getAttribute.call(this,"src")):""},set(n){return W.Element.prototype.setAttribute.call(this,"src",n),n}}),G8=n=>KC([n.el(),W.HTMLMediaElement.prototype,W8],"src"),K8=function(n){if(!n.featuresSourceset)return;const e=n.el();if(e.resetSourceset_)return;const t=G8(n),i=e.setAttribute,r=e.load;Object.defineProperty(e,"src",ei(t,{set:s=>{const o=t.set.call(e,s);return n.triggerSourceset(e.src),o}})),e.setAttribute=(s,o)=>{const u=i.call(e,s,o);return/src/i.test(s)&&n.triggerSourceset(e.src),u},e.load=()=>{const s=r.call(e);return N0(n)||(n.triggerSourceset(""),Pb(n)),s},e.currentSrc?n.triggerSourceset(e.currentSrc):N0(n)||Pb(n),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=r,e.setAttribute=i,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};class He extends yt{constructor(e,t){super(e,t);const i=e.source;let r=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let o=s.length;const u=[];for(;o--;){const c=s[o];c.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(c),this.remoteTextTracks().addTrack(c.track),this.textTracks().addTrack(c.track),!r&&!this.el_.hasAttribute("crossorigin")&&xg(c.src)&&(r=!0)):u.push(c))}for(let c=0;c<u.length;c++)this.el_.removeChild(u[c])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&r&&At.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Xd||hg)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),He.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){K8(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const i=()=>{t=[];for(let s=0;s<e.length;s++){const o=e[s];o.kind==="metadata"&&t.push({track:o,storedMode:o.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));const r=()=>{for(let s=0;s<t.length;s++){const o=t[s];o.track.mode==="disabled"&&o.track.mode!==o.storedMode&&(o.track.mode=o.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",r)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(r=>{this.el()[`${i}Tracks`].removeEventListener(r,this[`${i}TracksListeners_`][r])}),this[`featuresNative${e}Tracks`]=!t,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Nr[e],i=this.el()[t.getterName],r=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!i||!i.addEventListener)return;const s={change:u=>{const c={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(c),e==="text"&&this[Sc.remoteText.getterName]().trigger(c)},addtrack(u){r.addTrack(u.track)},removetrack(u){r.removeTrack(u.track)}},o=function(){const u=[];for(let c=0;c<r.length;c++){let h=!1;for(let f=0;f<i.length;f++)if(i[f]===r[c]){h=!0;break}h||u.push(r[c])}for(;u.length;)r.removeTrack(u.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(u=>{const c=s[u];i.addEventListener(u,c),this.on("dispose",h=>i.removeEventListener(u,c))}),this.on("loadstart",o),this.on("dispose",u=>this.off("loadstart",o))}proxyNativeTracks_(){Nr.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),He.disposeMediaElement(e),e=i}else{e=Ne.createElement("video");const i=this.options_.tag&&yo(this.options_.tag),r=ei({},i);(!Xd||this.options_.nativeControlsForTouch!==!0)&&delete r.controls,WT(e,Object.assign(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&_c(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let i=0;i<t.length;i++){const r=t[i],s=this.options_[r];typeof s<"u"&&(s?_c(e,r,r):gg(e,r),e[r]=s)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1;const r=function(){i=!0};this.on("loadstart",r);const s=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",s),i||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&fg?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){At(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&rs&&Ys&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)zs(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return At.error("Invalid source URL."),!1;const i={src:e};t&&(i.type=t);const r=rt("source",{},i);return this.el_.appendChild(r),!0}removeSourceElement(e){if(!e)return At.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const i of t)if(i.src===e)return this.el_.removeChild(i),!0;return At.warn(`No matching source element found with src: ${e}`),!1}reset(){He.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):super.addTextTrack(e,t,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Ne.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const i=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let i=t.length;for(;i--;)(e===t[i]||e===t[i].track)&&this.el().removeChild(t[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),W.performance&&(e.creationTime=W.performance.now()),e}}ug(He,"TEST_VID",function(){if(!wc())return;const n=Ne.createElement("video"),e=Ne.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n});He.isSupported=function(){try{He.TEST_VID.volume=.5}catch{return!1}return!!(He.TEST_VID&&He.TEST_VID.canPlayType)};He.canPlayType=function(n){return He.TEST_VID.canPlayType(n)};He.canPlaySource=function(n,e){return He.canPlayType(n.type)};He.canControlVolume=function(){try{const n=He.TEST_VID.volume;He.TEST_VID.volume=n/2+.1;const e=n!==He.TEST_VID.volume;return e&&an?(W.setTimeout(()=>{He&&He.prototype&&(He.prototype.featuresVolumeControl=n!==He.TEST_VID.volume)}),!1):e}catch{return!1}};He.canMuteVolume=function(){try{const n=He.TEST_VID.muted;return He.TEST_VID.muted=!n,He.TEST_VID.muted?_c(He.TEST_VID,"muted","muted"):gg(He.TEST_VID,"muted","muted"),n!==He.TEST_VID.muted}catch{return!1}};He.canControlPlaybackRate=function(){if(rs&&Ys&&cg<58)return!1;try{const n=He.TEST_VID.playbackRate;return He.TEST_VID.playbackRate=n/2+.1,n!==He.TEST_VID.playbackRate}catch{return!1}};He.canOverrideAttributes=function(){try{const n=()=>{};Object.defineProperty(Ne.createElement("video"),"src",{get:n,set:n}),Object.defineProperty(Ne.createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(Ne.createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(Ne.createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0};He.supportsNativeTextTracks=function(){return fg||an&&Ys};He.supportsNativeVideoTracks=function(){return!!(He.TEST_VID&&He.TEST_VID.videoTracks)};He.supportsNativeAudioTracks=function(){return!!(He.TEST_VID&&He.TEST_VID.audioTracks)};He.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([n,e]){ug(He.prototype,n,()=>He[e](),!0)});He.prototype.featuresVolumeControl=He.canControlVolume();He.prototype.movingMediaElementInDOM=!an;He.prototype.featuresFullscreenResize=!0;He.prototype.featuresProgressEvents=!0;He.prototype.featuresTimeupdateEvents=!0;He.prototype.featuresVideoFrameCallback=!!(He.TEST_VID&&He.TEST_VID.requestVideoFrameCallback);He.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};He.resetMediaElement=function(n){if(!n)return;const e=n.querySelectorAll("source");let t=e.length;for(;t--;)n.removeChild(e[t]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){He.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){He.prototype["set"+Ei(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){He.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){He.prototype["set"+Ei(n)]=function(e){this.el_[n]=e}});["pause","load","play"].forEach(function(n){He.prototype[n]=function(){return this.el_[n]()}});yt.withSourceHandlers(He);He.nativeSourceHandler={};He.nativeSourceHandler.canPlayType=function(n){try{return He.TEST_VID.canPlayType(n)}catch{return""}};He.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return He.nativeSourceHandler.canPlayType(n.type);if(n.src){const t=z1(n.src);return He.nativeSourceHandler.canPlayType(`video/${t}`)}return""};He.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)};He.nativeSourceHandler.dispose=function(){};He.registerSourceHandler(He.nativeSourceHandler);yt.registerTech("Html5",He);const XC=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Jy={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},F0=["tiny","xsmall","small","medium","large","xlarge","huge"],ip={};F0.forEach(n=>{const e=n.charAt(0)==="x"?`x-${n.substring(1)}`:n;ip[n]=`vjs-layout-${e}`});const X8={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class Kt extends Ae{constructor(e,t,i){if(e.id=e.id||t.id||`vjs_video_${Br()}`,t=Object.assign(Kt.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const o=e.closest("[lang]");o&&(t.language=o.getAttribute("lang"))}if(super(null,t,i),this.boundDocumentFullscreenChange_=o=>this.documentFullscreenChange_(o),this.boundFullWindowOnEscKey_=o=>this.fullWindowOnEscKey(o),this.boundUpdateStyleEl_=o=>this.updateStyleEl_(o),this.boundApplyInitTime_=o=>this.applyInitTime_(o),this.boundUpdateCurrentBreakpoint_=o=>this.updateCurrentBreakpoint_(o),this.boundHandleTechClick_=o=>this.handleTechClick_(o),this.boundHandleTechDoubleClick_=o=>this.handleTechDoubleClick_(o),this.boundHandleTechTouchStart_=o=>this.handleTechTouchStart_(o),this.boundHandleTechTouchMove_=o=>this.handleTechTouchMove_(o),this.boundHandleTechTouchEnd_=o=>this.handleTechTouchEnd_(o),this.boundHandleTechTap_=o=>this.handleTechTap_(o),this.boundUpdatePlayerHeightOnAudioOnlyMode_=o=>this.updatePlayerHeightOnAudioOnlyMode_(o),this.isFullscreen_=!1,this.log=RT(this.id_),this.fsApi_=Lp,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&yo(e),this.language(this.options_.language),t.languages){const o={};Object.getOwnPropertyNames(t.languages).forEach(function(u){o[u.toLowerCase()]=t.languages[u]}),this.languages_=o}else this.languages_=Kt.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(o=>{if(typeof this[o]!="function")throw new Error(`plugin "${o}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),F1(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(yr(Ne,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const r=ei(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(o=>{this[o](t.plugins[o])}),t.debug&&this.debug(!0),this.options_.playerOptions=r,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const u=new W.DOMParser().parseFromString(v8,"image/svg+xml");if(u.querySelector("parsererror"))At.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const h=u.documentElement;h.style.display="none",this.el_.appendChild(h),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new _8(this),this.addClass("vjs-spatial-navigation-enabled")),Xd&&this.addClass("vjs-touch-enabled"),an||this.addClass("vjs-workinghover"),Kt.players[this.id_]=this;const s=E0.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",o=>this.listenForUserActivity_(o)),this.on("keydown",o=>this.handleKeyDown(o)),this.on("languagechange",o=>this.handleLanguagechange(o)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),on(Ne,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),on(Ne,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Kt.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),p8(this),vn.names.forEach(e=>{const t=vn[e],i=this[t.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const r=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:r||(t=this.el_=super.createEl("div"));const s=yo(e);if(r){for(t=this.el_=e,e=this.tag=Ne.createElement("video");t.children.length;)e.appendChild(t.firstChild);Nd(t,"video-js")||Dl(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(c=>{try{e[c]=t[c]}catch{}})}e.setAttribute("tabindex","-1"),s.tabindex="-1",Ys&&dg&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(c){r&&c==="class"||t.setAttribute(c,s[c]),r&&e.setAttribute(c,s[c])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const o=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(c=>zT[c]).map(c=>"vjs-device-"+c.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...o),W.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=nC("vjs-styles-dimensions");const c=Eo(".vjs-styles-defaults"),h=Eo("head");h.insertBefore(this.styleEl_,c?c.nextSibling:h.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const u=e.getElementsByTagName("a");for(let c=0;c<u.length;c++){const h=u.item(c);Dl(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),D0(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){At.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const i=e+"_";if(t===void 0)return this[i]||0;if(t===""||t==="auto"){this[i]=void 0,this.updateStyleEl_();return}const r=parseFloat(t);if(isNaN(r)){At.error(`Improper value "${t}" supplied for for ${e}`);return}this[i]=r,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Ea(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),W5(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(W.VIDEOJS_NO_DYNAMIC_STYLE===!0){const u=typeof this.width_=="number"?this.width_:this.options_.width,c=typeof this.height_=="number"?this.height_:this.options_.height,h=this.tech_&&this.tech_.el();h&&(u>=0&&(h.width=u),c>=0&&(h.height=c));return}let e,t,i,r;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";const s=i.split(":"),o=s[1]/s[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/o:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*o,/^[^a-zA-Z]/.test(this.id())?r="dimensions-"+this.id():r=this.id()+"-dimensions",this.addClass(r),rC(this.styleEl_,`
      .${r} {
        width: ${e}px;
        height: ${t}px;
      }

      .${r}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${o*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const i=Ei(e),r=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(yt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let s=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(s=!1);const o={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${r}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};vn.names.forEach(c=>{const h=vn[c];o[h.getterName]=this[h.privateName]}),Object.assign(o,this.options_[i]),Object.assign(o,this.options_[r]),Object.assign(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);const u=yt.getTech(e);if(!u)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new u(o),this.tech_.ready(oi(this,this.handleTechReady_),!0),R0.jsonToTextTracks(this.textTracksJson_||[],this.tech_),XC.forEach(c=>{this.on(this.tech_,c,h=>this[`handleTech${Ei(c)}_`](h))}),Object.keys(Jy).forEach(c=>{this.on(this.tech_,c,h=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${Jy[c]}_`].bind(this),event:h});return}this[`handleTech${Jy[c]}_`](h)})}),this.on(this.tech_,"loadstart",c=>this.handleTechLoadStart_(c)),this.on(this.tech_,"sourceset",c=>this.handleTechSourceset_(c)),this.on(this.tech_,"waiting",c=>this.handleTechWaiting_(c)),this.on(this.tech_,"ended",c=>this.handleTechEnded_(c)),this.on(this.tech_,"seeking",c=>this.handleTechSeeking_(c)),this.on(this.tech_,"play",c=>this.handleTechPlay_(c)),this.on(this.tech_,"pause",c=>this.handleTechPause_(c)),this.on(this.tech_,"durationchange",c=>this.handleTechDurationChange_(c)),this.on(this.tech_,"fullscreenchange",(c,h)=>this.handleTechFullscreenChange_(c,h)),this.on(this.tech_,"fullscreenerror",(c,h)=>this.handleTechFullscreenError_(c,h)),this.on(this.tech_,"enterpictureinpicture",c=>this.handleTechEnterPictureInPicture_(c)),this.on(this.tech_,"leavepictureinpicture",c=>this.handleTechLeavePictureInPicture_(c)),this.on(this.tech_,"error",c=>this.handleTechError_(c)),this.on(this.tech_,"posterchange",c=>this.handleTechPosterChange_(c)),this.on(this.tech_,"textdata",c=>this.handleTechTextData_(c)),this.on(this.tech_,"ratechange",c=>this.handleTechRateChange_(c)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&D0(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){vn.names.forEach(e=>{const t=vn[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=R0.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&At.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":E0}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const r=this.muted();this.muted(!0);const s=()=>{this.muted(r)};this.playTerminatedQueue_.push(s);const o=this.play();if(Bd(o))return o.catch(u=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${u||""}`)})};let i;if(e==="any"&&!this.muted()?(i=this.play(),Bd(i)&&(i=i.catch(t))):e==="muted"&&!this.muted()?i=t():i=this.play(),!!Bd(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,i="";typeof t!="string"&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=y8(this,t)),this.cache_.source=ei({},e,{src:t,type:i});const r=this.cache_.sources.filter(c=>c.src&&c.src===t),s=[],o=this.$$("source"),u=[];for(let c=0;c<o.length;c++){const h=yo(o[c]);s.push(h),h.src&&h.src===t&&u.push(h.src)}u.length&&!r.length?this.cache_.sources=s:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(t=()=>{}),t(r),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if(s.type==="sourceset")return;const o=this.techGet_("currentSrc");this.lastSource_.tech=o,this.updateSourceCaches_(o)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?zs(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Ne.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const i=this.el();let r=Ne[this.fsApi_.fullscreenElement]===i;!r&&i.matches&&(r=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in h8)return c8(this.middleware_,this.tech_,e,t);if(e in yb)return mb(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw At(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in d8)return u8(this.middleware_,this.tech_,e);if(e in yb)return mb(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(At(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(At(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(At(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=zs){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(fg||an);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=o=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&i&&this.load();return}const r=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),r===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||ns(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=ns(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=ns(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return fC(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let i=e.end(e.length-1);return i>t&&(i=t),i}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((i,r)=>{function s(){t.off("fullscreenerror",u),t.off("fullscreenchange",o)}function o(){s(),i()}function u(h,f){s(),r(f)}t.one("fullscreenchange",o),t.one("fullscreenerror",u);const c=t.requestFullscreenHelper_(e);c&&(c.then(s,s),c.then(i,r))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,i)=>{function r(){e.off("fullscreenerror",o),e.off("fullscreenchange",s)}function s(){r(),t()}function o(c,h){r(),i(h)}e.one("fullscreenchange",s),e.one("fullscreenerror",o);const u=e.exitFullscreenHelper_();u&&(u.then(r,r),u.then(t,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Ne[this.fsApi_.exitFullscreen]();return e&&zs(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Ne.documentElement.style.overflow,yr(Ne,"keydown",this.boundFullWindowOnEscKey_),Ne.documentElement.style.overflow="hidden",Dl(Ne.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,on(Ne,"keydown",this.boundFullWindowOnEscKey_),Ne.documentElement.style.overflow=this.docOrigOverflow,pg(Ne.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&W.documentPictureInPicture){const e=Ne.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(rt("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),W.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(eC(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",i=>{const r=i.target.querySelector(".video-js");e.parentNode.replaceChild(r,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in Ne&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(W.documentPictureInPicture&&W.documentPictureInPicture.window)return W.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Ne)return Ne.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(r=>{const s=r.tagName.toLowerCase();if(r.isContentEditable)return!0;const o=["button","checkbox","hidden","radio","reset","submit"];return s==="input"?o.indexOf(r.type)===-1:["textarea"].indexOf(s)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=o=>e.key.toLowerCase()==="f",muteKey:r=o=>e.key.toLowerCase()==="m",playPauseKey:s=o=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const o=Ae.getComponent("FullscreenToggle");Ne[this.fsApi_.fullscreenEnabled]!==!1&&o.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),Ae.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Ae.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let i=0,r=this.options_.techOrder;i<r.length;i++){const s=r[i];let o=yt.getTech(s);if(o||(o=Ae.getComponent(s)),!o){At.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`);continue}if(o.isSupported()&&(t=o.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(u=>[u,yt.getTech(u)]).filter(([u,c])=>c?c.isSupported():(At.error(`The "${u}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(u,c,h){let f;return u.some(m=>c.some(x=>{if(f=h(m,x),f)return!0})),f};let r;const s=u=>(c,h)=>u(h,c),o=([u,c],h)=>{if(c.canPlaySource(h,this.options_[u.toLowerCase()]))return{source:h,tech:u}};return this.options_.sourceOrder?r=i(e,t,s(o)):r=i(t,e,o),r||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=_C(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),o8(this,i[0],(r,s)=>{if(this.middleware_=s,t||(this.cache_.sources=i),this.updateSourceCaches_(r),this.src_(r)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}l8(s,this.tech_)}),i.length>1){const r=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},s=()=>{this.off("error",r)};this.one("error",r),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",r),this.off("playing",s)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?uC(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();zs(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Ea(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:i,remainingTimeDisplay:r}=this.controlBar||{},{seekBar:s}=i||{};e&&e.updateContent(),t&&t.updateContent(),r&&r.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(wo("beforeerror").forEach(t=>{const i=t(this,e);if(!(Xs(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Ci(e),this.addClass("vjs-error"),At.error(`(CODE:${this.error_.code} ${Ci.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),wo("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,i;const r=oi(this,this.reportUserActivity),s=function(m){(m.screenX!==t||m.screenY!==i)&&(t=m.screenX,i=m.screenY,r())},o=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},u=function(m){r(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",s),this.on("mouseup",u),this.on("mouseleave",u);const c=this.getChild("controlBar");c&&!an&&!rs&&(c.on("mouseenter",function(m){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),c.on("mouseleave",function(m){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r);let h;const f=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(h);const m=this.options_.inactivityTimeout;m<=0||(h=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},m))};this.setInterval(f,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),i=t&&t.currentHeight();e.forEach(r=>{r!==t&&r.el_&&!r.hasClass("vjs-hidden")&&(r.hide(),this.audioOnlyCache_.hiddenChildren.push(r))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Ea(this)&&this.trigger("languagechange"))}languages(){return ei(Kt.prototype.options_.languages,this.languages_)}toJSON(){const e=ei(this.options_),t=e.tracks;e.tracks=[];for(let i=0;i<t.length;i++){let r=t[i];r=ei(r),r.player=void 0,e.tracks[i]=r}return e}createModal(e,t){t=t||{},t.content=e||"";const i=new Dc(this,t);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let i=0;i<F0.length;i++){const r=F0[i],s=this.breakpoints_[r];if(t<=s){if(e===r)return;e&&this.removeClass(ip[e]),this.addClass(ip[r]),this.breakpoint_=r;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},X8,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return ip[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=ei(e);const{artist:r,artwork:s,description:o,poster:u,src:c,textTracks:h,title:f}=this.cache_.media;!s&&u&&(this.cache_.media.artwork=[{src:u,type:qp(u)}]),i&&this.crossOrigin(i),c&&this.src(c),u&&this.poster(u),Array.isArray(h)&&h.forEach(m=>this.addRemoteTextTrack(m,!1)),this.titleBar&&this.titleBar.update({title:f,description:o||r||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src})),r={src:t,textTracks:i};return e&&(r.poster=e,r.artwork=[{src:r.poster,type:qp(r.poster)}]),r}return ei(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},i=yo(e),r=i["data-setup"];if(Nd(e,"vjs-fill")&&(i.fill=!0),Nd(e,"vjs-fluid")&&(i.fluid=!0),r!==null)try{Object.assign(i,JSON.parse(r||"{}"))}catch(s){At.error("data-setup",s)}if(Object.assign(t,i),e.hasChildNodes()){const s=e.childNodes;for(let o=0,u=s.length;o<u;o++){const c=s[o],h=c.nodeName.toLowerCase();h==="source"?t.sources.push(yo(c)):h==="track"&&t.tracks.push(yo(c))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Kt.prototype.videoTracks=()=>{};Kt.prototype.audioTracks=()=>{};Kt.prototype.textTracks=()=>{};Kt.prototype.remoteTextTracks=()=>{};Kt.prototype.remoteTextTrackEls=()=>{};vn.names.forEach(function(n){const e=vn[n];Kt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Kt.prototype.crossorigin=Kt.prototype.crossOrigin;Kt.players={};const bd=W.navigator;Kt.prototype.options_={techOrder:yt.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:bd&&(bd.languages&&bd.languages[0]||bd.userLanguage||bd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1};XC.forEach(function(n){Kt.prototype[`handleTech${Ei(n)}_`]=function(){return this.trigger(n)}});Ae.registerComponent("Player",Kt);const Wp="plugin",Zu="activePlugins_",zu={},Gp=n=>zu.hasOwnProperty(n),np=n=>Gp(n)?zu[n]:void 0,YC=(n,e)=>{n[Zu]=n[Zu]||{},n[Zu][e]=!0},Kp=(n,e,t)=>{const i=(t?"before":"")+"pluginsetup";n.trigger(i,e),n.trigger(i+":"+e.name,e)},Y8=function(n,e){const t=function(){Kp(this,{name:n,plugin:e,instance:null},!0);const i=e.apply(this,arguments);return YC(this,n),Kp(this,{name:n,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){t[i]=e[i]}),t},Ob=(n,e)=>(e.prototype.name=n,function(...t){Kp(this,{name:n,plugin:e,instance:null},!0);const i=new e(this,...t);return this[n]=()=>i,Kp(this,i.getEventHash()),i});class qn{constructor(e){if(this.constructor===qn)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),F1(this),delete this.trigger,lC(this,this.constructor.defaultState),YC(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Ac(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Zu][e]=!1,this.player=this.state=null,t[e]=Ob(e,zu[e])}static isBasic(e){const t=typeof e=="string"?np(e):e;return typeof t=="function"&&!qn.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(Gp(e))At.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Kt.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return zu[e]=t,e!==Wp&&(qn.isBasic(t)?Kt.prototype[e]=Y8(e,t):Kt.prototype[e]=Ob(e,t)),t}static deregisterPlugin(e){if(e===Wp)throw new Error("Cannot de-register base plugin.");Gp(e)&&(delete zu[e],delete Kt.prototype[e])}static getPlugins(e=Object.keys(zu)){let t;return e.forEach(i=>{const r=np(i);r&&(t=t||{},t[i]=r)}),t}static getPluginVersion(e){const t=np(e);return t&&t.VERSION||""}}qn.getPlugin=np;qn.BASE_PLUGIN_NAME=Wp;qn.registerPlugin(Wp,qn);Kt.prototype.usingPlugin=function(n){return!!this[Zu]&&this[Zu][n]===!0};Kt.prototype.hasPlugin=function(n){return!!Gp(n)};function Q8(n,e){let t=!1;return function(...i){return t||At.warn(n),t=!0,e.apply(this,i)}}function os(n,e,t,i){return Q8(`${e} is deprecated and will be removed in ${n}.0; please use ${t} instead.`,i)}var J8={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const QC=n=>n.indexOf("#")===0?n.slice(1):n;function me(n,e,t){let i=me.getPlayer(n);if(i)return e&&At.warn(`Player "${n}" is already initialised. Options will not be applied.`),t&&i.ready(t),i;const r=typeof n=="string"?Eo("#"+QC(n)):n;if(!Ec(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");const o=("getRootNode"in r?r.getRootNode()instanceof W.ShadowRoot:!1)?r.getRootNode():r.ownerDocument.body;(!r.ownerDocument.defaultView||!o.contains(r))&&At.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),wo("beforesetup").forEach(c=>{const h=c(r,ei(e));if(!Xs(h)||Array.isArray(h)){At.error("please return an object in beforesetup hooks");return}e=ei(e,h)});const u=Ae.getComponent("Player");return i=new u(r,e,t),wo("setup").forEach(c=>c(i)),i}me.hooks_=Sa;me.hooks=wo;me.hook=P5;me.hookOnce=O5;me.removeHook=OT;if(W.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&wc()){let n=Eo(".vjs-styles-defaults");if(!n){n=nC("vjs-styles-defaults");const e=Eo("head");e&&e.insertBefore(n,e.firstChild),rC(n,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}k0(1,me);me.VERSION=E0;me.options=Kt.prototype.options_;me.getPlayers=()=>Kt.players;me.getPlayer=n=>{const e=Kt.players;let t;if(typeof n=="string"){const i=QC(n),r=e[i];if(r)return r;t=Eo("#"+i)}else t=n;if(Ec(t)){const{player:i,playerId:r}=t;if(i||e[r])return i||e[r]}};me.getAllPlayers=()=>Object.keys(Kt.players).map(n=>Kt.players[n]).filter(Boolean);me.players=Kt.players;me.getComponent=Ae.getComponent;me.registerComponent=(n,e)=>(yt.isTech(e)&&At.warn(`The ${n} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Ae.registerComponent.call(Ae,n,e));me.getTech=yt.getTech;me.registerTech=yt.registerTech;me.use=a8;Object.defineProperty(me,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(me.middleware,"TERMINATOR",{value:Hp,writeable:!1,enumerable:!0});me.browser=zT;me.obj=N5;me.mergeOptions=os(9,"videojs.mergeOptions","videojs.obj.merge",ei);me.defineLazyProperty=os(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",ug);me.bind=os(9,"videojs.bind","native Function.prototype.bind",oi);me.registerPlugin=qn.registerPlugin;me.deregisterPlugin=qn.deregisterPlugin;me.plugin=(n,e)=>(At.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),qn.registerPlugin(n,e));me.getPlugins=qn.getPlugins;me.getPlugin=qn.getPlugin;me.getPluginVersion=qn.getPluginVersion;me.addLanguage=function(n,e){return n=(""+n).toLowerCase(),me.options.languages=ei(me.options.languages,{[n]:e}),me.options.languages[n]};me.log=At;me.createLogger=RT;me.time=Q5;me.createTimeRange=os(9,"videojs.createTimeRange","videojs.time.createTimeRanges",ns);me.createTimeRanges=os(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",ns);me.formatTime=os(9,"videojs.formatTime","videojs.time.formatTime",Ol);me.setFormatTime=os(9,"videojs.setFormatTime","videojs.time.setFormatTime",dC);me.resetFormatTime=os(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",hC);me.parseUrl=os(9,"videojs.parseUrl","videojs.url.parseUrl",$1);me.isCrossOrigin=os(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",xg);me.EventTarget=vr;me.any=N1;me.on=yr;me.one=_g;me.off=on;me.trigger=Ac;me.xhr=vT;me.TrackList=Rl;me.TextTrack=oh;me.TextTrackList=j1;me.AudioTrack=yC;me.AudioTrackList=pC;me.VideoTrack=vC;me.VideoTrackList=gC;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(n=>{me[n]=function(){return At.warn(`videojs.${n}() is deprecated; use videojs.dom.${n}() instead`),tC[n].apply(null,arguments)}});me.computedStyle=os(9,"videojs.computedStyle","videojs.dom.computedStyle",xc);me.dom=tC;me.fn=q5;me.num=A8;me.str=X5;me.url=r8;me.Error=J8;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class Z8{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(i){t.enabled_(i)}}),t}}class Xp extends me.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const i=this.levels_.length;return t=new Z8(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,i=this.length;t<i;t++){const r=this[t];if(r.id===e)return r}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Xp.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const n in Xp.prototype.allowedEvents_)Xp.prototype["on"+n]=null;var JC="4.1.0";const e6=function(n,e){const t=n.qualityLevels,i=new Xp,r=function(){i.dispose(),n.qualityLevels=t,n.off("dispose",r)};return n.on("dispose",r),n.qualityLevels=()=>i,n.qualityLevels.VERSION=JC,i},ZC=function(n){return e6(this,me.obj.merge({},n))};me.registerPlugin("qualityLevels",ZC);ZC.VERSION=JC;/*! @name @videojs/http-streaming @version 3.17.0 @license Apache-2.0 */const zn=sg,Yp=(n,e)=>e&&e.responseURL&&n!==e.responseURL?e.responseURL:n,Ur=n=>me.log.debug?me.log.debug.bind(me,"VHS:",`${n} >`):function(){};function Xt(...n){const e=me.obj||me;return(e.merge||e.mergeOptions).apply(e,n)}function Xi(...n){const e=me.time||me;return(e.createTimeRanges||e.createTimeRanges).apply(e,n)}function t6(n){if(n.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<n.length;t++){const i=n.start(t),r=n.end(t);e+=`${i} --> ${r}. Duration (${r-i})
`}return e}const Vs=1/30,Hs=Vs*3,ew=function(n,e){const t=[];let i;if(n&&n.length)for(i=0;i<n.length;i++)e(n.start(i),n.end(i))&&t.push([n.start(i),n.end(i)]);return Xi(t)},Vu=function(n,e){return ew(n,function(t,i){return t-Hs<=e&&i+Hs>=e})},Vf=function(n,e){return ew(n,function(t){return t-Vs>=e})},i6=function(n){if(n.length<2)return Xi();const e=[];for(let t=1;t<n.length;t++){const i=n.end(t-1),r=n.start(t);e.push([i,r])}return Xi(e)},n6=function(n,e){let t=null,i=null,r=0;const s=[],o=[];if(!n||!n.length||!e||!e.length)return Xi();let u=n.length;for(;u--;)s.push({time:n.start(u),type:"start"}),s.push({time:n.end(u),type:"end"});for(u=e.length;u--;)s.push({time:e.start(u),type:"start"}),s.push({time:e.end(u),type:"end"});for(s.sort(function(c,h){return c.time-h.time}),u=0;u<s.length;u++)s[u].type==="start"?(r++,r===2&&(t=s[u].time)):s[u].type==="end"&&(r--,r===1&&(i=s[u].time)),t!==null&&i!==null&&(o.push([t,i]),t=null,i=null);return Xi(o)},tw=n=>{const e=[];if(!n||!n.length)return"";for(let t=0;t<n.length;t++)e.push(n.start(t)+" => "+n.end(t));return e.join(", ")},r6=function(n,e,t=1){return((n.length?n.end(n.length-1):0)-e)/t},Cl=n=>{const e=[];for(let t=0;t<n.length;t++)e.push({start:n.start(t),end:n.end(t)});return e},s6=function(n,e){if(n===e)return!1;if(!n&&e||!e&&n||n.length!==e.length)return!0;for(let t=0;t<n.length;t++)if(n.start(t)!==e.start(t)||n.end(t)!==e.end(t))return!0;return!1},Zy=function(n){if(!(!n||!n.length||!n.end))return n.end(n.length-1)},r2=function(n,e){let t=0;if(!n||!n.length)return t;for(let i=0;i<n.length;i++){const r=n.start(i),s=n.end(i);if(!(e>s)){if(e>r&&e<=s){t+=s-e;continue}t+=s-r}}return t},s2=(n,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(i){t+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(t+=n.partTargetDuration)}),t},B0=n=>(n.segments||[]).reduce((e,t,i)=>(t.parts?t.parts.forEach(function(r,s){e.push({duration:r.duration,segmentIndex:i,partIndex:s,part:r,segment:t})}):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e),[]),iw=n=>{const e=n.segments&&n.segments.length&&n.segments[n.segments.length-1];return e&&e.parts||[]},nw=({preloadSegment:n})=>{if(!n)return;const{parts:e,preloadHints:t}=n;let i=(t||[]).reduce((r,s)=>r+(s.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},rw=(n,e)=>{if(e.endList)return 0;if(n&&n.suggestedPresentationDelay)return n.suggestedPresentationDelay;const t=iw(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},a6=function(n,e){let t=0,i=e-n.mediaSequence,r=n.segments[i];if(r){if(typeof r.start<"u")return{result:r.start,precise:!0};if(typeof r.end<"u")return{result:r.end-r.duration,precise:!0}}for(;i--;){if(r=n.segments[i],typeof r.end<"u")return{result:t+r.end,precise:!0};if(t+=s2(n,r),typeof r.start<"u")return{result:t+r.start,precise:!0}}return{result:t,precise:!1}},o6=function(n,e){let t=0,i,r=e-n.mediaSequence;for(;r<n.segments.length;r++){if(i=n.segments[r],typeof i.start<"u")return{result:i.start-t,precise:!0};if(t+=s2(n,i),typeof i.end<"u")return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}},sw=function(n,e,t){if(typeof e>"u"&&(e=n.mediaSequence+n.segments.length),e<n.mediaSequence)return 0;const i=a6(n,e);if(i.precise)return i.result;const r=o6(n,e);return r.precise?r.result:i.result+t},aw=function(n,e,t){if(!n)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(n.totalDuration)return n.totalDuration;if(!n.endList)return W.Infinity}return sw(n,e,t)},jd=function({defaultDuration:n,durationList:e,startIndex:t,endIndex:i}){let r=0;if(t>i&&([t,i]=[i,t]),t<0){for(let s=t;s<Math.min(0,i);s++)r+=n;t=0}for(let s=t;s<i;s++)r+=e[s].duration;return r},ow=function(n,e,t,i){if(!n||!n.segments)return null;if(n.endList)return aw(n);if(e===null)return null;e=e||0;let r=sw(n,n.mediaSequence+n.segments.length,e);return t&&(i=typeof i=="number"?i:rw(null,n),r-=i),Math.max(0,r)},l6=function(n,e,t){const r=e||0;let s=ow(n,e,!0,t);return s===null?Xi():(s<r&&(s=r),Xi(r,s))},u6=function({playlist:n,currentTime:e,startingSegmentIndex:t,startingPartIndex:i,startTime:r,exactManifestTimings:s}){let o=e-r;const u=B0(n);let c=0;for(let h=0;h<u.length;h++){const f=u[h];if(t===f.segmentIndex&&!(typeof i=="number"&&typeof f.partIndex=="number"&&i!==f.partIndex)){c=h;break}}if(o<0){if(c>0)for(let h=c-1;h>=0;h--){const f=u[h];if(o+=f.duration,s){if(o<0)continue}else if(o+Vs<=0)continue;return{partIndex:f.partIndex,segmentIndex:f.segmentIndex,startTime:r-jd({defaultDuration:n.targetDuration,durationList:u,startIndex:c,endIndex:h})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:e}}if(c<0){for(let h=c;h<0;h++)if(o-=n.targetDuration,o<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:e};c=0}for(let h=c;h<u.length;h++){const f=u[h];o-=f.duration;const m=f.duration>Vs,x=o===0,w=m&&o+Vs>=0;if(!((x||w)&&h!==u.length-1)){if(s){if(o>0)continue}else if(o-Vs>=0)continue;return{partIndex:f.partIndex,segmentIndex:f.segmentIndex,startTime:r+jd({defaultDuration:n.targetDuration,durationList:u,startIndex:c,endIndex:h})}}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:e}},lw=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},a2=function(n){return n.excludeUntil&&n.excludeUntil===1/0},wg=function(n){const e=lw(n);return!n.disabled&&!e},c6=function(n){return n.disabled},d6=function(n){for(let e=0;e<n.segments.length;e++)if(n.segments[e].key)return!0;return!1},uw=function(n,e){return e.attributes&&e.attributes[n]},h6=function(n,e,t,i=0){return uw("BANDWIDTH",t)?(n*t.attributes.BANDWIDTH-i*8)/e:NaN},j0=(n,e)=>{if(n.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return n.playlists.filter(i=>wg(i)?(i.attributes.BANDWIDTH||0)<t:!1).length===0},o2=(n,e)=>!n&&!e||!n&&e||n&&!e?!1:!!(n===e||n.id&&e.id&&n.id===e.id||n.resolvedUri&&e.resolvedUri&&n.resolvedUri===e.resolvedUri||n.uri&&e.uri&&n.uri===e.uri),Rb=function(n,e){const t=n&&n.mediaGroups&&n.mediaGroups.AUDIO||{};let i=!1;for(const r in t){for(const s in t[r])if(i=e(t[r][s]),i)break;if(i)break}return!!i},dh=n=>{if(!n||!n.playlists||!n.playlists.length)return Rb(n,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<n.playlists.length;e++){const t=n.playlists[e],i=t.attributes&&t.attributes.CODECS;if(!(i&&i.split(",").every(s=>xT(s))||Rb(n,s=>o2(t,s))))return!1}return!0};var Vn={liveEdgeDelay:rw,duration:aw,seekable:l6,getMediaInfoForTime:u6,isEnabled:wg,isDisabled:c6,isExcluded:lw,isIncompatible:a2,playlistEnd:ow,isAes:d6,hasAttribute:uw,estimateSegmentRequestTime:h6,isLowestEnabledRendition:j0,isAudioOnly:dh,playlistMatch:o2,segmentDurationWithParts:s2};const{log:cw}=me,ec=(n,e)=>`${n}-${e}`,dw=(n,e,t)=>`placeholder-uri-${n}-${e}-${t}`,f6=({onwarn:n,oninfo:e,manifestString:t,customTagParsers:i=[],customTagMappers:r=[],llhls:s})=>{const o=new eI;n&&o.on("warn",n),e&&o.on("info",e),i.forEach(h=>o.addParser(h)),r.forEach(h=>o.addTagMapper(h)),o.push(t),o.end();const u=o.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(h){u.hasOwnProperty(h)&&delete u[h]}),u.segments&&u.segments.forEach(function(h){["parts","preloadHints"].forEach(function(f){h.hasOwnProperty(f)&&delete h[f]})})),!u.targetDuration){let h=10;u.segments&&u.segments.length&&(h=u.segments.reduce((f,m)=>Math.max(f,m.duration),0)),n&&n({message:`manifest has no targetDuration defaulting to ${h}`}),u.targetDuration=h}const c=iw(u);if(c.length&&!u.partTargetDuration){const h=c.reduce((f,m)=>Math.max(f,m.duration),0);n&&(n({message:`manifest has no partTargetDuration defaulting to ${h}`}),cw.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),u.partTargetDuration=h}return u},Mc=(n,e)=>{n.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(n.mediaGroups[t])for(const i in n.mediaGroups[t])for(const r in n.mediaGroups[t][i]){const s=n.mediaGroups[t][i][r];e(s,t,i,r)}})},hw=({playlist:n,uri:e,id:t})=>{n.id=t,n.playlistErrors_=0,e&&(n.uri=e),n.attributes=n.attributes||{}},p6=n=>{let e=n.playlists.length;for(;e--;){const t=n.playlists[e];hw({playlist:t,id:ec(e,t.uri)}),t.resolvedUri=zn(n.uri,t.uri),n.playlists[t.id]=t,n.playlists[t.uri]=t,t.attributes.BANDWIDTH||cw.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},g6=n=>{Mc(n,e=>{e.uri&&(e.resolvedUri=zn(n.uri,e.uri))})},m6=(n,e)=>{const t=ec(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:W.location.href,resolvedUri:W.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return i.playlists[t]=i.playlists[0],i.playlists[e]=i.playlists[0],i},fw=(n,e,t=dw)=>{n.uri=e;for(let r=0;r<n.playlists.length;r++)if(!n.playlists[r].uri){const s=`placeholder-uri-${r}`;n.playlists[r].uri=s}const i=dh(n);Mc(n,(r,s,o,u)=>{if(!r.playlists||!r.playlists.length){if(i&&s==="AUDIO"&&!r.uri)for(let c=0;c<n.playlists.length;c++){const h=n.playlists[c];if(h.attributes&&h.attributes.AUDIO&&h.attributes.AUDIO===o)return}r.playlists=[Ii({},r)]}r.playlists.forEach(function(c,h){const f=t(s,o,u,c),m=ec(h,f);c.uri?c.resolvedUri=c.resolvedUri||zn(n.uri,c.uri):(c.uri=h===0?f:m,c.resolvedUri=c.uri),c.id=c.id||m,c.attributes=c.attributes||{},n.playlists[c.id]=c,n.playlists[c.uri]=c})}),p6(n),g6(n)};class Lb{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,i=t.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=e.reduce((r,s)=>(r.set(s.id,s),r),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((i,r)=>{if(!this.processedDateRanges_.has(r)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),t.push(i),!!i.class))if(e[i.class]){const s=e[i.class].push(i);i.classListIndex=s-1}else e[i.class]=[i],i.classListIndex=0});for(const i of t){const r=e[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&r[i.classListIndex+1]?i.endTime=r[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((i,r)=>{i.startDate.getTime()<e&&this.processedDateRanges_.delete(r)})}}const pw=22,Ml=({requestType:n,request:e,error:t,parseFailure:i})=>{const r=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,o={uri:e.uri,requestType:n},u=r&&!s||i;if(t&&s)o.error=Ii({},t),o.errorType=me.Error.NetworkRequestFailed;else if(e.aborted)o.errorType=me.Error.NetworkRequestAborted;else if(e.timedout)o.erroType=me.Error.NetworkRequestTimeout;else if(u){const c=i?me.Error.NetworkBodyParserFailed:me.Error.NetworkBadStatus;o.errorType=c,o.status=e.status,o.headers=e.headers}return o},y6=Ur("CodecUtils"),gw=function(n){const e=n.attributes||{};if(e.CODECS)return Ms(e.CODECS)},mw=(n,e)=>{const t=e.attributes||{};return n&&n.mediaGroups&&n.mediaGroups.AUDIO&&t.AUDIO&&n.mediaGroups.AUDIO[t.AUDIO]},v6=(n,e)=>{if(!mw(n,e))return!0;const t=e.attributes||{},i=n.mediaGroups.AUDIO[t.AUDIO];for(const r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1},Jd=function(n){const e={};return n.forEach(({mediaType:t,type:i,details:r})=>{e[t]=e[t]||[],e[t].push(bT(`${i}${r}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){y6(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},Nb=function(n){let e=0;return n.audio&&e++,n.video&&e++,e},Ud=function(n,e){const t=e.attributes||{},i=Jd(gw(e)||[]);if(mw(n,e)&&!i.audio&&!v6(n,e)){const r=Jd(iI(n,t.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},{EventTarget:_6}=me,b6=(n,e)=>{if(e.endList||!e.serverControl)return n;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:i}=e;let r=e.mediaSequence+e.segments.length;if(i){const s=i.parts||[],o=nw(e)-1;o>-1&&o!==s.length-1&&(t._HLS_part=o),(o>-1||s.length)&&r--}t._HLS_msn=r}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const i=new W.URL(n);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(r){t.hasOwnProperty(r)&&i.searchParams.set(r,t[r])}),n=i.toString()}return n},x6=(n,e)=>{if(!n)return e;const t=Xt(n,e);if(n.preloadHints&&!e.preloadHints&&delete t.preloadHints,n.parts&&!e.parts)delete t.parts;else if(n.parts&&e.parts)for(let i=0;i<e.parts.length;i++)n.parts&&n.parts[i]&&(t.parts[i]=Xt(n.parts[i],e.parts[i]));return!n.skipped&&e.skipped&&(t.skipped=!1),n.preload&&!e.preload&&(t.preload=!1),t},S6=(n,e,t)=>{const i=n.slice(),r=e.slice();t=t||0;const s=[];let o;for(let u=0;u<r.length;u++){const c=i[u+t],h=r[u];c?(o=c.map||o,s.push(x6(c,h))):(o&&!h.map&&(h.map=o),s.push(h))}return s},yw=(n,e)=>{!n.resolvedUri&&n.uri&&(n.resolvedUri=zn(e,n.uri)),n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=zn(e,n.key.uri)),n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=zn(e,n.map.uri)),n.map&&n.map.key&&!n.map.key.resolvedUri&&(n.map.key.resolvedUri=zn(e,n.map.key.uri)),n.parts&&n.parts.length&&n.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=zn(e,t.uri))}),n.preloadHints&&n.preloadHints.length&&n.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=zn(e,t.uri))})},vw=function(n){const e=n.segments||[],t=n.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let i=0;i<t.preloadHints.length;i++)if(t.preloadHints[i].type==="MAP")return e}t.duration=n.targetDuration,t.preload=!0,e.push(t)}return e},_w=(n,e)=>n===e||n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence&&n.preloadSegment===e.preloadSegment,U0=(n,e,t=_w)=>{const i=Xt(n,{}),r=i.playlists[e.id];if(!r||t(r,e))return null;e.segments=vw(e);const s=Xt(r,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(let o=0;o<e.skip.skippedSegments;o++)e.segments.unshift({skipped:!0})}s.segments=S6(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}s.segments.forEach(o=>{yw(o,s.resolvedUri)});for(let o=0;o<i.playlists.length;o++)i.playlists[o].id===e.id&&(i.playlists[o]=s);return i.playlists[e.id]=s,i.playlists[e.uri]=s,Mc(n,(o,u,c,h)=>{if(o.playlists)for(let f=0;f<o.playlists.length;f++)e.id===o.playlists[f].id&&(o.playlists[f]=s)}),i},$0=(n,e)=>{const t=n.segments||[],i=t[t.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],s=r&&r.duration||i&&i.duration;return e&&s?s*1e3:(n.partTargetDuration||n.targetDuration||10)*500},Fb=(n,e,t)=>{if(!n)return;const i=[];return n.forEach(r=>{if(!r.attributes)return;const{BANDWIDTH:s,RESOLUTION:o,CODECS:u}=r.attributes;i.push({id:r.id,bandwidth:s,resolution:o,codecs:u})}),{type:e,isLive:t,renditions:i}};class Hu extends _6{constructor(e,t,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Ur("PlaylistLoader");const{withCredentials:r=!1}=i;this.src=e,this.vhs_=t,this.withCredentials=r,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new Lb,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=zn(this.main.uri,e.uri);this.llhls&&(t=b6(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,r)=>{if(this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,i){const{uri:r,id:s}=t;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${r}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:Ml({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{const i=f6({onwarn:({message:r})=>this.logger_(`m3u8-parser warn for ${e}: ${r}`),oninfo:({message:r})=>this.logger_(`m3u8-parser info for ${e}: ${r}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!i.playlists||!i.playlists.length||this.excludeAudioOnlyVariants(i.playlists),i}catch(i){this.error=i,this.error.metadata={errorType:me.Error.StreamingHlsPlaylistParserError,error:i}}}excludeAudioOnlyVariants(e){const t=i=>{const r=i.attributes||{},{width:s,height:o}=r.RESOLUTION||{};if(s&&o)return!0;const u=gw(i)||[];return!!Jd(u).video};e.some(t)&&e.forEach(i=>{t(i)||(i.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:t,url:i,id:r}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:i}};this.trigger({type:"playlistparsestart",metadata:s});const o=t||this.parseManifest_({url:i,manifestString:e});o.lastRequest=Date.now(),hw({playlist:o,uri:i,id:r});const u=U0(this.main,o);this.targetDuration=o.partTargetDuration||o.targetDuration,this.pendingMedia_=null,u?(this.main=u,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_($0(this.media(),!!u)),s.parsedPlaylist=Fb(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),W.clearTimeout(this.mediaUpdateTimeout),W.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new Lb,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(W.clearTimeout(this.finalRenditionTimeout),t){const u=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=W.setTimeout(this.media.bind(this,e,!1),u);return}const i=this.state,r=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_($0(e,!0)),!r)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const o={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:o}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(u,c)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=Yp(e.resolvedUri,c),u)return this.playlistRequestError(this.request,e,i);this.trigger({type:"playlistrequestcomplete",metadata:o}),this.haveMetadata({playlistString:c.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(W.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(W.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const i=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=W.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(W.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=W.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=W.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,i)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2,metadata:Ml({requestType:i.requestType,request:i,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=Yp(this.src,i),this.trigger({type:"playlistparsestart",metadata:e});const r=this.parseManifest_({manifestString:i.responseText,url:this.src});e.parsedPlaylist=Fb(r.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(r)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,fw(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=vw(i),i.segments.forEach(r=>{yw(r,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||W.location.href;this.main=m6(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const i=this.main,r=e.ID;let s=i.playlists.length;for(;s--;){const o=i.playlists[s];if(o.attributes["PATHWAY-ID"]===r){const u=o.resolvedUri,c=o.id;if(t){const h=this.createCloneURI_(o.resolvedUri,e),f=ec(r,h),m=this.createCloneAttributes_(r,o.attributes),x=this.createClonePlaylist_(o,f,e,m);i.playlists[s]=x,i.playlists[f]=x,i.playlists[h]=x}else i.playlists.splice(s,1);delete i.playlists[c],delete i.playlists[u]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const i=this.main,r=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!i.mediaGroups[s]||!i.mediaGroups[s][r])){for(const o in i.mediaGroups[s])if(o===r){for(const u in i.mediaGroups[s][o])i.mediaGroups[s][o][u].playlists.forEach((h,f)=>{const m=i.playlists[h.id],x=m.id,w=m.resolvedUri;delete i.playlists[x],delete i.playlists[w]});delete i.mediaGroups[s][o]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const i=this.main,r=i.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),o=ec(e.ID,s),u=this.createCloneAttributes_(e.ID,t.attributes),c=this.createClonePlaylist_(t,o,e,u);i.playlists[r]=c,i.playlists[o]=c,i.playlists[s]=c,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,i=e["BASE-ID"],r=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!r.mediaGroups[s]||r.mediaGroups[s][t]))for(const o in r.mediaGroups[s]){if(o===i)r.mediaGroups[s][t]={};else continue;for(const u in r.mediaGroups[s][o]){const c=r.mediaGroups[s][o][u];r.mediaGroups[s][t][u]=Ii({},c);const h=r.mediaGroups[s][t][u],f=this.createCloneURI_(c.resolvedUri,e);h.resolvedUri=f,h.uri=f,h.playlists=[],c.playlists.forEach((m,x)=>{const w=r.playlists[m.id],A=dw(s,t,u),C=ec(t,A);if(w&&!r.playlists[C]){const D=this.createClonePlaylist_(w,C,e),N=D.resolvedUri;r.playlists[C]=D,r.playlists[N]=D}h.playlists[x]=this.createClonePlaylist_(m,C,e)})}}})}createClonePlaylist_(e,t,i,r){const s=this.createCloneURI_(e.resolvedUri,i),o={resolvedUri:s,uri:s,id:t};return e.segments&&(o.segments=[]),r&&(o.attributes=r),Xt(e,o)}createCloneURI_(e,t){const i=new URL(e);i.hostname=t["URI-REPLACEMENT"].HOST;const r=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(r))i.searchParams.set(s,r[s]);return i.href}createCloneAttributes_(e,t){const i={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{t[r]&&(i[r]=e)}),i}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const i in e.contentProtection){const r=e.contentProtection[i].attributes.keyId;r&&t.add(r.toLowerCase())}return t}}}const z0=function(n,e,t,i){const r=n.responseType==="arraybuffer"?n.response:n.responseText;!e&&r&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=r.byteLength||r.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3))),t.headers&&(n.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(n.timedout=!0),!e&&!n.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(n&&(r||n.responseText)))),i(e,n)},T6=(n,e)=>{if(!n||!n.size)return;let t=e;return n.forEach(i=>{t=i(t)}),t},C6=(n,e,t,i)=>{!n||!n.size||n.forEach(r=>{r(e,t,i)})},bw=function(){const n=function e(t,i){t=Xt({timeout:45e3},t);const r=e.beforeRequest||me.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||me.Vhs.xhr._requestCallbackSet||new Set,o=e._responseCallbackSet||me.Vhs.xhr._responseCallbackSet;r&&typeof r=="function"&&(me.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(r));const u=me.Vhs.xhr.original===!0?me.xhr:me.Vhs.xhr,c=T6(s,t);s.delete(r);const h=u(c||t,function(m,x){return C6(o,h,m,x),z0(h,m,x,i)}),f=h.abort;return h.abort=function(){return h.aborted=!0,f.apply(h,arguments)},h.uri=t.uri,h.requestType=t.requestType,h.requestTime=Date.now(),h};return n.original=!0,n},w6=function(n){let e;const t=n.offset;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=W.BigInt(n.offset)+W.BigInt(n.length)-W.BigInt(1):e=n.offset+n.length-1,"bytes="+t+"-"+e},V0=function(n){const e={};return n.byterange&&(e.Range=w6(n.byterange)),e},E6=function(n,e){return n.start(e)+"-"+n.end(e)},A6=function(n,e){const t=n.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},D6=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},xw=function(n){const e={};return Object.keys(n).forEach(t=>{const i=n[t];TT(i)?e[t]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[t]=i}),e},Qp=function(n){const e=n.byterange||{length:1/0,offset:0};return[e.length,e.offset,n.resolvedUri].join(",")},Sw=function(n){return n.resolvedUri},Tw=n=>{const e=Array.prototype.slice.call(n),t=16;let i="",r,s;for(let o=0;o<e.length/t;o++)r=e.slice(o*t,o*t+t).map(A6).join(""),s=e.slice(o*t,o*t+t).map(D6).join(""),i+=r+" "+s+`
`;return i},I6=({bytes:n})=>Tw(n),k6=n=>{let e="",t;for(t=0;t<n.length;t++)e+=E6(n,t)+" ";return e};var M6=Object.freeze({__proto__:null,createTransferableMessage:xw,initSegmentId:Qp,segmentKeyId:Sw,hexDump:Tw,tagDump:I6,textRanges:k6});const Cw=.25,P6=(n,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,r=e.videoTimingInfo.transmuxedPresentationStart+t,s=n-r;return new Date(e.dateTimeObject.getTime()+s*1e3)},O6=n=>n.transmuxedPresentationEnd-n.transmuxedPresentationStart-n.transmuxerPrependedSeconds,R6=(n,e)=>{let t;try{t=new Date(n)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(t<new Date(i.dateTimeObject))return null;for(let c=0;c<e.segments.length-1;c++){i=e.segments[c];const h=new Date(e.segments[c+1].dateTimeObject);if(t<h)break}const r=e.segments[e.segments.length-1],s=r.dateTimeObject,o=r.videoTimingInfo?O6(r.videoTimingInfo):r.duration+r.duration*Cw,u=new Date(s.getTime()+o*1e3);return t>u?null:(t>new Date(s)&&(i=r),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Vn.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},L6=(n,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,i;for(let s=0;s<e.segments.length&&(i=e.segments[s],t=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:t+i.duration,!(n<=t));s++);const r=e.segments[e.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<n)return null;if(n>t){if(n>t+r.duration*Cw)return null;i=r}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:t-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},N6=(n,e)=>{let t,i;try{t=new Date(n),i=new Date(e)}catch{}const r=t.getTime();return(i.getTime()-r)/1e3},F6=n=>{if(!n.segments||n.segments.length===0)return!1;for(let e=0;e<n.segments.length;e++)if(!n.segments[e].dateTimeObject)return!1;return!0},B6=({playlist:n,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const i=L6(e,n);if(!i)return t({message:"valid programTime was not found"});if(i.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const r={mediaSeconds:e},s=P6(e,i.segment);return s&&(r.programDateTime=s.toISOString()),t(null,r)},ww=({programTime:n,playlist:e,retryCount:t=2,seekTo:i,pauseAfterSeek:r=!0,tech:s,callback:o})=>{if(!o)throw new Error("seekToProgramTime: callback must be provided");if(typeof n>"u"||!e||!i)return o({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return o({message:"player must be playing a live stream to start buffering"});if(!F6(e))return o({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const u=R6(n,e);if(!u)return o({message:`${n} was not found in the stream`});const c=u.segment,h=N6(c.dateTimeObject,n);if(u.type==="estimate"){if(t===0)return o({message:`${n} is not buffered yet. Try again`});i(u.estimatedStart+h),s.one("seeked",()=>{ww({programTime:n,playlist:e,retryCount:t-1,seekTo:i,pauseAfterSeek:r,tech:s,callback:o})});return}const f=c.start+h,m=()=>o(null,s.currentTime());s.one("seeked",m),r&&s.pause(),i(f)},e0=(n,e)=>{if(n.readyState===4)return e()},j6=(n,e,t,i)=>{let r=[],s,o=!1;const u=function(m,x,w,A){return x.abort(),o=!0,t(m,x,w,A)},c=function(m,x){if(o)return;if(m)return m.metadata=Ml({requestType:i,request:x,error:m}),u(m,x,"",r);const w=x.responseText.substring(r&&r.byteLength||0,x.responseText.length);if(r=hI(r,CT(w,!0)),s=s||Id(r),r.length<10||s&&r.length<s+2)return e0(x,()=>u(m,x,"",r));const A=M1(r);return A==="ts"&&r.length<188?e0(x,()=>u(m,x,"",r)):!A&&r.length<376?e0(x,()=>u(m,x,"",r)):u(null,x,A,r)},f=e({uri:n,beforeSend(m){m.overrideMimeType("text/plain; charset=x-user-defined"),m.addEventListener("progress",function({total:x,loaded:w}){return z0(m,null,{statusCode:m.status},c)})}},function(m,x){return z0(f,m,x,c)});return f},{EventTarget:U6}=me,Bb=function(n,e){if(!_w(n,e)||n.sidx&&e.sidx&&(n.sidx.offset!==e.sidx.offset||n.sidx.length!==e.sidx.length))return!1;if(!n.sidx&&e.sidx||n.sidx&&!e.sidx||n.segments&&!e.segments||!n.segments&&e.segments)return!1;if(!n.segments&&!e.segments)return!0;for(let t=0;t<n.segments.length;t++){const i=n.segments[t],r=e.segments[t];if(i.uri!==r.uri)return!1;if(!i.byterange&&!r.byterange)continue;const s=i.byterange,o=r.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}return!0},$6=(n,e,t,i)=>{const r=i.attributes.NAME||t;return`placeholder-uri-${n}-${e}-${r}`},z6=({mainXml:n,srcUrl:e,clientOffset:t,sidxMapping:i,previousManifest:r})=>{const s=c5(n,{manifestUri:e,clientOffset:t,sidxMapping:i,previousManifest:r});return fw(s,e,$6),s},V6=(n,e)=>{Mc(n,(t,i,r,s)=>{(!e.mediaGroups[i][r]||!(s in e.mediaGroups[i][r]))&&delete n.mediaGroups[i][r][s]})},H6=(n,e,t)=>{let i=!0,r=Xt(n,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const o=e.playlists[s];if(o.sidx){const c=og(o.sidx);t&&t[c]&&t[c].sidx&&D1(o,t[c].sidx,o.sidx.resolvedUri)}const u=U0(r,o,Bb);u&&(r=u,i=!1)}return Mc(e,(s,o,u,c)=>{if(s.playlists&&s.playlists.length){const h=s.playlists[0].id,f=U0(r,s.playlists[0],Bb);f&&(r=f,c in r.mediaGroups[o][u]||(r.mediaGroups[o][u][c]=s),r.mediaGroups[o][u][c].playlists[0]=r.playlists[h],i=!1)}}),V6(r,e),e.minimumUpdatePeriod!==n.minimumUpdatePeriod&&(i=!1),i?null:r},q6=(n,e)=>(!n.map&&!e.map||!!(n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length))&&n.uri===e.uri&&n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length,jb=(n,e)=>{const t={};for(const i in n){const s=n[i].sidx;if(s){const o=og(s);if(!e[o])break;const u=e[o].sidxInfo;q6(u,s)&&(t[o]=e[o])}}return t},W6=(n,e)=>{let i=jb(n.playlists,e);return Mc(n,(r,s,o,u)=>{if(r.playlists&&r.playlists.length){const c=r.playlists;i=Xt(i,jb(c,e))}}),i};class H0 extends U6{constructor(e,t,i={},r){super(),this.isPaused_=!0,this.mainPlaylistLoader_=r||this,r||(this.isMain_=!0);const{withCredentials:s=!1}=i;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Ur("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,t,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,t,i){const r=e.sidx&&og(e.sidx);if(!e.sidx||!r||this.mainPlaylistLoader_.sidxMapping_[r]){W.clearTimeout(this.mediaRequest_),this.mediaRequest_=W.setTimeout(()=>i(!1),0);return}const s=Yp(e.sidx.resolvedUri),o=(c,h)=>{if(this.requestErrored_(c,h,t))return;const f=this.mainPlaylistLoader_.sidxMapping_,{requestType:m}=h;let x;try{x=g5(et(h.response).subarray(8))}catch(w){w.metadata=Ml({requestType:m,request:h,parseFailure:!0}),this.requestErrored_(w,h,t);return}return f[r]={sidxInfo:e.sidx,sidx:x},D1(e,x,e.sidx.resolvedUri),i(!0)},u="dash-sidx";this.request=j6(s,this.vhs_.xhr,(c,h,f,m)=>{if(c)return o(c,h);if(!f||f!=="mp4"){const A=f||"unknown";return o({status:h.status,message:`Unsupported ${A} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},h)}const{offset:x,length:w}=e.sidx.byterange;if(m.length>=w+x)return o(c,{response:m.subarray(x,x+w),status:h.status,uri:h.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:V0({byterange:e.sidx.byterange})},o)},u)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},W.clearTimeout(this.minimumUpdatePeriodTimeout_),W.clearTimeout(this.mediaRequest_),W.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,r=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,W.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),W.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(W.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,W.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const i=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=W.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){W.clearTimeout(this.mediaRequest_),this.mediaRequest_=W.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(i,r)=>{if(i){const{requestType:o}=r;i.metadata=Ml({requestType:o,request:r,error:i})}if(this.requestErrored_(i,r)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const s=r.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?this.mainLoaded_=Date.parse(r.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=Yp(this.mainPlaylistLoader_.srcUrl,r),s){this.handleMain_(),this.syncClientServerClock_(()=>e(r,s));return}return e(r,s)})}syncClientServerClock_(e){const t=d5(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:zn(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(i,r)=>{if(!this.request)return;if(i){const{requestType:o}=r;return this.error.metadata=Ml({requestType:o,request:r,error:i}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;t.method==="HEAD"?!r.responseHeaders||!r.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(r.responseHeaders.date):s=Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){W.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let i;try{i=z6({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:me.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(i=H6(e,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(i),i){const{duration:s,endList:o}=i,u=[];i.playlists.forEach(h=>{u.push({id:h.id,bandwidth:h.attributes.BANDWIDTH,resolution:h.attributes.RESOLUTION,codecs:h.attributes.CODECS})});const c={duration:s,isLive:!o,renditions:u};t.parsedManifest=c,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!i}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(W.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=W.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=W6(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==t[e];if(i?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const r=()=>{this.media().endList||(this.mediaUpdateTimeout=W.setTimeout(()=>{this.trigger("mediaupdatetimeout"),r()},$0(this.media(),!!i)))};r()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const i in e.contentProtection){const r=e.contentProtection[i].attributes["cenc:default_KID"];r&&t.add(r.replace(/-/g,"").toLowerCase())}return t}}}var Gi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const G6=n=>{const e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer},Ew=function(n){return n.on=n.addEventListener,n.off=n.removeEventListener,n},K6=function(n){try{return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(n),URL.createObjectURL(t.getBlob())}},Aw=function(n){return function(){const e=K6(n),t=Ew(new Worker(e));t.objURL=e;const i=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}},Dw=function(n){return`var browserWorkerPolyFill = ${Ew.toString()};
browserWorkerPolyFill(self);
`+n},Iw=function(n){return n.toString().replace(/^function.+?{/,"").slice(0,-1)},X6=Dw(Iw(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var p={};this.on=function(y,_){p[y]||(p[y]=[]),p[y]=p[y].concat(_)},this.off=function(y,_){var v;return p[y]?(v=p[y].indexOf(_),p[y]=p[y].slice(),p[y].splice(v,1),v>-1):!1},this.trigger=function(y){var _,v,S,E;if(_=p[y],!!_)if(arguments.length===2)for(S=_.length,v=0;v<S;++v)_[v].call(this,arguments[1]);else{for(E=[],v=arguments.length,v=1;v<arguments.length;++v)E.push(arguments[v]);for(S=_.length,v=0;v<S;++v)_[v].apply(this,E)}},this.dispose=function(){p={}}}};e.prototype.pipe=function(p){return this.on("data",function(y){p.push(y)}),this.on("done",function(y){p.flush(y)}),this.on("partialdone",function(y){p.partialFlush(y)}),this.on("endedtimeline",function(y){p.endTimeline(y)}),this.on("reset",function(y){p.reset(y)}),p},e.prototype.push=function(p){this.trigger("data",p)},e.prototype.flush=function(p){this.trigger("done",p)},e.prototype.partialFlush=function(p){this.trigger("partialdone",p)},e.prototype.endTimeline=function(p){this.trigger("endedtimeline",p)},e.prototype.reset=function(p){this.trigger("reset",p)};var t=e,i=Math.pow(2,32),r=function(p){var y=new DataView(p.buffer,p.byteOffset,p.byteLength),_;return y.getBigUint64?(_=y.getBigUint64(0),_<Number.MAX_SAFE_INTEGER?Number(_):_):y.getUint32(0)*i+y.getUint32(4)},s={getUint64:r,MAX_UINT32:i},o=s.MAX_UINT32,u,c,h,f,m,x,w,A,C,D,N,L,P,X,j,K,z,J,R,F,de,fe,le,Se,Ee,Ce,re,te,ue,ce,k,Y,he,Ie,V,ae;(function(){var p;if(le={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(p in le)le.hasOwnProperty(p)&&(le[p]=[p.charCodeAt(0),p.charCodeAt(1),p.charCodeAt(2),p.charCodeAt(3)]);Se=new Uint8Array([105,115,111,109]),Ce=new Uint8Array([97,118,99,49]),Ee=new Uint8Array([0,0,0,1]),re=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),te=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ue={video:re,audio:te},Y=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),k=new Uint8Array([0,0,0,0,0,0,0,0]),he=new Uint8Array([0,0,0,0,0,0,0,0]),Ie=he,V=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ae=he,ce=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),u=function(p){var y=[],_=0,v,S,E;for(v=1;v<arguments.length;v++)y.push(arguments[v]);for(v=y.length;v--;)_+=y[v].byteLength;for(S=new Uint8Array(_+8),E=new DataView(S.buffer,S.byteOffset,S.byteLength),E.setUint32(0,S.byteLength),S.set(p,4),v=0,_=8;v<y.length;v++)S.set(y[v],_),_+=y[v].byteLength;return S},c=function(){return u(le.dinf,u(le.dref,Y))},h=function(p){return u(le.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,p.audioobjecttype<<3|p.samplingfrequencyindex>>>1,p.samplingfrequencyindex<<7|p.channelcount<<3,6,1,2]))},f=function(){return u(le.ftyp,Se,Ee,Se,Ce)},K=function(p){return u(le.hdlr,ue[p])},m=function(p){return u(le.mdat,p)},j=function(p){var y=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,p.duration>>>24&255,p.duration>>>16&255,p.duration>>>8&255,p.duration&255,85,196,0,0]);return p.samplerate&&(y[12]=p.samplerate>>>24&255,y[13]=p.samplerate>>>16&255,y[14]=p.samplerate>>>8&255,y[15]=p.samplerate&255),u(le.mdhd,y)},X=function(p){return u(le.mdia,j(p),K(p.type),w(p))},x=function(p){return u(le.mfhd,new Uint8Array([0,0,0,0,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255]))},w=function(p){return u(le.minf,p.type==="video"?u(le.vmhd,ce):u(le.smhd,k),c(),J(p))},A=function(p,y){for(var _=[],v=y.length;v--;)_[v]=F(y[v]);return u.apply(null,[le.moof,x(p)].concat(_))},C=function(p){for(var y=p.length,_=[];y--;)_[y]=L(p[y]);return u.apply(null,[le.moov,N(4294967295)].concat(_).concat(D(p)))},D=function(p){for(var y=p.length,_=[];y--;)_[y]=de(p[y]);return u.apply(null,[le.mvex].concat(_))},N=function(p){var y=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(p&4278190080)>>24,(p&16711680)>>16,(p&65280)>>8,p&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u(le.mvhd,y)},z=function(p){var y=p.samples||[],_=new Uint8Array(4+y.length),v,S;for(S=0;S<y.length;S++)v=y[S].flags,_[S+4]=v.dependsOn<<4|v.isDependedOn<<2|v.hasRedundancy;return u(le.sdtp,_)},J=function(p){return u(le.stbl,R(p),u(le.stts,ae),u(le.stsc,Ie),u(le.stsz,V),u(le.stco,he))},function(){var p,y;R=function(_){return u(le.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),_.type==="video"?p(_):y(_))},p=function(_){var v=_.sps||[],S=_.pps||[],E=[],B=[],U,H;for(U=0;U<v.length;U++)E.push((v[U].byteLength&65280)>>>8),E.push(v[U].byteLength&255),E=E.concat(Array.prototype.slice.call(v[U]));for(U=0;U<S.length;U++)B.push((S[U].byteLength&65280)>>>8),B.push(S[U].byteLength&255),B=B.concat(Array.prototype.slice.call(S[U]));if(H=[le.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(_.width&65280)>>8,_.width&255,(_.height&65280)>>8,_.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u(le.avcC,new Uint8Array([1,_.profileIdc,_.profileCompatibility,_.levelIdc,255].concat([v.length],E,[S.length],B))),u(le.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],_.sarRatio){var q=_.sarRatio[0],Q=_.sarRatio[1];H.push(u(le.pasp,new Uint8Array([(q&4278190080)>>24,(q&16711680)>>16,(q&65280)>>8,q&255,(Q&4278190080)>>24,(Q&16711680)>>16,(Q&65280)>>8,Q&255])))}return u.apply(null,H)},y=function(_){return u(le.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(_.channelcount&65280)>>8,_.channelcount&255,(_.samplesize&65280)>>8,_.samplesize&255,0,0,0,0,(_.samplerate&65280)>>8,_.samplerate&255,0,0]),h(_))}}(),P=function(p){var y=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,0,(p.duration&4278190080)>>24,(p.duration&16711680)>>16,(p.duration&65280)>>8,p.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(p.width&65280)>>8,p.width&255,0,0,(p.height&65280)>>8,p.height&255,0,0]);return u(le.tkhd,y)},F=function(p){var y,_,v,S,E,B,U;return y=u(le.tfhd,new Uint8Array([0,0,0,58,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),B=Math.floor(p.baseMediaDecodeTime/o),U=Math.floor(p.baseMediaDecodeTime%o),_=u(le.tfdt,new Uint8Array([1,0,0,0,B>>>24&255,B>>>16&255,B>>>8&255,B&255,U>>>24&255,U>>>16&255,U>>>8&255,U&255])),E=92,p.type==="audio"?(v=fe(p,E),u(le.traf,y,_,v)):(S=z(p),v=fe(p,S.length+E),u(le.traf,y,_,v,S))},L=function(p){return p.duration=p.duration||4294967295,u(le.trak,P(p),X(p))},de=function(p){var y=new Uint8Array([0,0,0,0,(p.id&4278190080)>>24,(p.id&16711680)>>16,(p.id&65280)>>8,p.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return p.type!=="video"&&(y[y.length-1]=0),u(le.trex,y)},function(){var p,y,_;_=function(v,S){var E=0,B=0,U=0,H=0;return v.length&&(v[0].duration!==void 0&&(E=1),v[0].size!==void 0&&(B=2),v[0].flags!==void 0&&(U=4),v[0].compositionTimeOffset!==void 0&&(H=8)),[0,0,E|B|U|H,1,(v.length&4278190080)>>>24,(v.length&16711680)>>>16,(v.length&65280)>>>8,v.length&255,(S&4278190080)>>>24,(S&16711680)>>>16,(S&65280)>>>8,S&255]},y=function(v,S){var E,B,U,H,q,Q;for(H=v.samples||[],S+=20+16*H.length,U=_(H,S),B=new Uint8Array(U.length+H.length*16),B.set(U),E=U.length,Q=0;Q<H.length;Q++)q=H[Q],B[E++]=(q.duration&4278190080)>>>24,B[E++]=(q.duration&16711680)>>>16,B[E++]=(q.duration&65280)>>>8,B[E++]=q.duration&255,B[E++]=(q.size&4278190080)>>>24,B[E++]=(q.size&16711680)>>>16,B[E++]=(q.size&65280)>>>8,B[E++]=q.size&255,B[E++]=q.flags.isLeading<<2|q.flags.dependsOn,B[E++]=q.flags.isDependedOn<<6|q.flags.hasRedundancy<<4|q.flags.paddingValue<<1|q.flags.isNonSyncSample,B[E++]=q.flags.degradationPriority&61440,B[E++]=q.flags.degradationPriority&15,B[E++]=(q.compositionTimeOffset&4278190080)>>>24,B[E++]=(q.compositionTimeOffset&16711680)>>>16,B[E++]=(q.compositionTimeOffset&65280)>>>8,B[E++]=q.compositionTimeOffset&255;return u(le.trun,B)},p=function(v,S){var E,B,U,H,q,Q;for(H=v.samples||[],S+=20+8*H.length,U=_(H,S),E=new Uint8Array(U.length+H.length*8),E.set(U),B=U.length,Q=0;Q<H.length;Q++)q=H[Q],E[B++]=(q.duration&4278190080)>>>24,E[B++]=(q.duration&16711680)>>>16,E[B++]=(q.duration&65280)>>>8,E[B++]=q.duration&255,E[B++]=(q.size&4278190080)>>>24,E[B++]=(q.size&16711680)>>>16,E[B++]=(q.size&65280)>>>8,E[B++]=q.size&255;return u(le.trun,E)},fe=function(v,S){return v.type==="audio"?p(v,S):y(v,S)}}();var pe={ftyp:f,mdat:m,moof:A,moov:C,initSegment:function(p){var y=f(),_=C(p),v;return v=new Uint8Array(y.byteLength+_.byteLength),v.set(y),v.set(_,y.byteLength),v}},Z=function(p){var y,_,v=[],S=[];for(S.byteLength=0,S.nalCount=0,S.duration=0,v.byteLength=0,y=0;y<p.length;y++)_=p[y],_.nalUnitType==="access_unit_delimiter_rbsp"?(v.length&&(v.duration=_.dts-v.dts,S.byteLength+=v.byteLength,S.nalCount+=v.length,S.duration+=v.duration,S.push(v)),v=[_],v.byteLength=_.data.byteLength,v.pts=_.pts,v.dts=_.dts):(_.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(v.keyFrame=!0),v.duration=_.dts-v.dts,v.byteLength+=_.data.byteLength,v.push(_));return S.length&&(!v.duration||v.duration<=0)&&(v.duration=S[S.length-1].duration),S.byteLength+=v.byteLength,S.nalCount+=v.length,S.duration+=v.duration,S.push(v),S},_e=function(p){var y,_,v=[],S=[];for(v.byteLength=0,v.nalCount=0,v.duration=0,v.pts=p[0].pts,v.dts=p[0].dts,S.byteLength=0,S.nalCount=0,S.duration=0,S.pts=p[0].pts,S.dts=p[0].dts,y=0;y<p.length;y++)_=p[y],_.keyFrame?(v.length&&(S.push(v),S.byteLength+=v.byteLength,S.nalCount+=v.nalCount,S.duration+=v.duration),v=[_],v.nalCount=_.length,v.byteLength=_.byteLength,v.pts=_.pts,v.dts=_.dts,v.duration=_.duration):(v.duration+=_.duration,v.nalCount+=_.length,v.byteLength+=_.byteLength,v.push(_));return S.length&&v.duration<=0&&(v.duration=S[S.length-1].duration),S.byteLength+=v.byteLength,S.nalCount+=v.nalCount,S.duration+=v.duration,S.push(v),S},Me=function(p){var y;return!p[0][0].keyFrame&&p.length>1&&(y=p.shift(),p.byteLength-=y.byteLength,p.nalCount-=y.nalCount,p[0][0].dts=y.dts,p[0][0].pts=y.pts,p[0][0].duration+=y.duration),p},$e=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Ve=function(p,y){var _=$e();return _.dataOffset=y,_.compositionTimeOffset=p.pts-p.dts,_.duration=p.duration,_.size=4*p.length,_.size+=p.byteLength,p.keyFrame&&(_.flags.dependsOn=2,_.flags.isNonSyncSample=0),_},nt=function(p,y){var _,v,S,E,B,U=y||0,H=[];for(_=0;_<p.length;_++)for(E=p[_],v=0;v<E.length;v++)B=E[v],S=Ve(B,U),U+=S.size,H.push(S);return H},st=function(p){var y,_,v,S,E,B,U=0,H=p.byteLength,q=p.nalCount,Q=H+4*q,ye=new Uint8Array(Q),Fe=new DataView(ye.buffer);for(y=0;y<p.length;y++)for(S=p[y],_=0;_<S.length;_++)for(E=S[_],v=0;v<E.length;v++)B=E[v],Fe.setUint32(U,B.data.byteLength),U+=4,ye.set(B.data,U),U+=B.data.byteLength;return ye},Xn=function(p,y){var _,v=y||0,S=[];return _=Ve(p,v),S.push(_),S},ri=function(p){var y,_,v=0,S=p.byteLength,E=p.length,B=S+4*E,U=new Uint8Array(B),H=new DataView(U.buffer);for(y=0;y<p.length;y++)_=p[y],H.setUint32(v,_.data.byteLength),v+=4,U.set(_.data,v),v+=_.data.byteLength;return U},Yn={groupNalsIntoFrames:Z,groupFramesIntoGops:_e,extendFirstKeyFrame:Me,generateSampleTable:nt,concatenateNalData:st,generateSampleTableForFrame:Xn,concatenateNalDataForFrame:ri},Oi=[33,16,5,32,164,27],Ri=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],mt=function(p){for(var y=[];p--;)y.push(0);return y},Tt=function(p){return Object.keys(p).reduce(function(y,_){return y[_]=new Uint8Array(p[_].reduce(function(v,S){return v.concat(S)},[])),y},{})},Yt,Sn=function(){if(!Yt){var p={96e3:[Oi,[227,64],mt(154),[56]],88200:[Oi,[231],mt(170),[56]],64e3:[Oi,[248,192],mt(240),[56]],48e3:[Oi,[255,192],mt(268),[55,148,128],mt(54),[112]],44100:[Oi,[255,192],mt(268),[55,163,128],mt(84),[112]],32e3:[Oi,[255,192],mt(268),[55,234],mt(226),[112]],24e3:[Oi,[255,192],mt(268),[55,255,128],mt(268),[111,112],mt(126),[224]],16e3:[Oi,[255,192],mt(268),[55,255,128],mt(268),[111,255],mt(269),[223,108],mt(195),[1,192]],12e3:[Ri,mt(268),[3,127,248],mt(268),[6,255,240],mt(268),[13,255,224],mt(268),[27,253,128],mt(259),[56]],11025:[Ri,mt(268),[3,127,248],mt(268),[6,255,240],mt(268),[13,255,224],mt(268),[27,255,192],mt(268),[55,175,128],mt(108),[112]],8e3:[Ri,mt(268),[3,121,16],mt(47),[7]]};Yt=Tt(p)}return Yt},_r=9e4,br,xr,Li,Qn,us,Tn,Yi;br=function(p){return p*_r},xr=function(p,y){return p*y},Li=function(p){return p/_r},Qn=function(p,y){return p/y},us=function(p,y){return br(Qn(p,y))},Tn=function(p,y){return xr(Li(p),y)},Yi=function(p,y,_){return Li(_?p:p-y)};var ie={ONE_SECOND_IN_TS:_r,secondsToVideoTs:br,secondsToAudioTs:xr,videoTsToSeconds:Li,audioTsToSeconds:Qn,audioTsToVideoTs:us,videoTsToAudioTs:Tn,metadataTsToSeconds:Yi},xe=Sn,De=ie,je=function(p){var y,_,v=0;for(y=0;y<p.length;y++)_=p[y],v+=_.data.byteLength;return v},Ze=function(p,y,_,v){var S,E=0,B=0,U=0,H=0,q,Q,ye;if(y.length&&(S=De.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),E=Math.ceil(De.ONE_SECOND_IN_TS/(p.samplerate/1024)),_&&v&&(B=S-Math.max(_,v),U=Math.floor(B/E),H=U*E),!(U<1||H>De.ONE_SECOND_IN_TS/2))){for(q=xe()[p.samplerate],q||(q=y[0].data),Q=0;Q<U;Q++)ye=y[0],y.splice(0,0,{data:q,dts:ye.dts-E,pts:ye.pts-E});return p.baseMediaDecodeTime-=Math.floor(De.videoTsToAudioTs(H,p.samplerate)),H}},Rt=function(p,y,_){return y.minSegmentDts>=_?p:(y.minSegmentDts=1/0,p.filter(function(v){return v.dts>=_?(y.minSegmentDts=Math.min(y.minSegmentDts,v.dts),y.minSegmentPts=y.minSegmentDts,!0):!1}))},Jt=function(p){var y,_,v=[];for(y=0;y<p.length;y++)_=p[y],v.push({size:_.data.byteLength,duration:1024});return v},ot=function(p){var y,_,v=0,S=new Uint8Array(je(p));for(y=0;y<p.length;y++)_=p[y],S.set(_.data,v),v+=_.data.byteLength;return S},Ue={prefixWithSilence:Ze,trimAdtsFramesByEarliestDts:Rt,generateSampleTable:Jt,concatenateFrameData:ot},I=ie.ONE_SECOND_IN_TS,M=function(p,y){typeof y.pts=="number"&&(p.timelineStartInfo.pts===void 0&&(p.timelineStartInfo.pts=y.pts),p.minSegmentPts===void 0?p.minSegmentPts=y.pts:p.minSegmentPts=Math.min(p.minSegmentPts,y.pts),p.maxSegmentPts===void 0?p.maxSegmentPts=y.pts:p.maxSegmentPts=Math.max(p.maxSegmentPts,y.pts)),typeof y.dts=="number"&&(p.timelineStartInfo.dts===void 0&&(p.timelineStartInfo.dts=y.dts),p.minSegmentDts===void 0?p.minSegmentDts=y.dts:p.minSegmentDts=Math.min(p.minSegmentDts,y.dts),p.maxSegmentDts===void 0?p.maxSegmentDts=y.dts:p.maxSegmentDts=Math.max(p.maxSegmentDts,y.dts))},$=function(p){delete p.minSegmentDts,delete p.maxSegmentDts,delete p.minSegmentPts,delete p.maxSegmentPts},oe=function(p,y){var _,v,S=p.minSegmentDts;return y||(S-=p.timelineStartInfo.dts),_=p.timelineStartInfo.baseMediaDecodeTime,_+=S,_=Math.max(0,_),p.type==="audio"&&(v=p.samplerate/I,_*=v,_=Math.floor(_)),_},Pe={clearDtsInfo:$,calculateTrackBaseMediaDecodeTime:oe,collectDtsInfo:M},ze=4,xt=128,pi=function(p){for(var y=0,_={payloadType:-1,payloadSize:0},v=0,S=0;y<p.byteLength&&p[y]!==xt;){for(;p[y]===255;)v+=255,y++;for(v+=p[y++];p[y]===255;)S+=255,y++;if(S+=p[y++],!_.payload&&v===ze){var E=String.fromCharCode(p[y+3],p[y+4],p[y+5],p[y+6]);if(E==="GA94"){_.payloadType=v,_.payloadSize=S,_.payload=p.subarray(y,y+S);break}else _.payload=void 0}y+=S,v=0,S=0}return _},en=function(p){return p.payload[0]!==181||(p.payload[1]<<8|p.payload[2])!==49||String.fromCharCode(p.payload[3],p.payload[4],p.payload[5],p.payload[6])!=="GA94"||p.payload[7]!==3?null:p.payload.subarray(8,p.payload.length-1)},$i=function(p,y){var _=[],v,S,E,B;if(!(y[0]&64))return _;for(S=y[0]&31,v=0;v<S;v++)E=v*3,B={type:y[E+2]&3,pts:p},y[E+2]&4&&(B.ccData=y[E+3]<<8|y[E+4],_.push(B));return _},un=function(p){for(var y=p.byteLength,_=[],v=1,S,E;v<y-2;)p[v]===0&&p[v+1]===0&&p[v+2]===3?(_.push(v+2),v+=2):v++;if(_.length===0)return p;S=y-_.length,E=new Uint8Array(S);var B=0;for(v=0;v<S;B++,v++)B===_[0]&&(B++,_.shift()),E[v]=p[B];return E},tn={parseSei:pi,parseUserData:en,parseCaptionPackets:$i,discardEmulationPreventionBytes:un,USER_DATA_REGISTERED_ITU_T_T35:ze},Jn=t,zi=tn,$t=function(p){p=p||{},$t.prototype.init.call(this),this.parse708captions_=typeof p.parse708captions=="boolean"?p.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new ti(0,0),new ti(0,1),new ti(1,0),new ti(1,1)],this.parse708captions_&&(this.cc708Stream_=new Dt({captionServices:p.captionServices})),this.reset(),this.ccStreams_.forEach(function(y){y.on("data",this.trigger.bind(this,"data")),y.on("partialdone",this.trigger.bind(this,"partialdone")),y.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};$t.prototype=new Jn,$t.prototype.push=function(p){var y,_,v;if(p.nalUnitType==="sei_rbsp"&&(y=zi.parseSei(p.escapedRBSP),!!y.payload&&y.payloadType===zi.USER_DATA_REGISTERED_ITU_T_T35&&(_=zi.parseUserData(y),!!_))){if(p.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(p.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}v=zi.parseCaptionPackets(p.pts,_),this.captionPackets_=this.captionPackets_.concat(v),this.latestDts_!==p.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=p.dts}},$t.prototype.flushCCStreams=function(p){this.ccStreams_.forEach(function(y){return p==="flush"?y.flush():y.partialFlush()},this)},$t.prototype.flushStream=function(p){if(!this.captionPackets_.length){this.flushCCStreams(p);return}this.captionPackets_.forEach(function(y,_){y.presortIndex=_}),this.captionPackets_.sort(function(y,_){return y.pts===_.pts?y.presortIndex-_.presortIndex:y.pts-_.pts}),this.captionPackets_.forEach(function(y){y.type<2?this.dispatchCea608Packet(y):this.dispatchCea708Packet(y)},this),this.captionPackets_.length=0,this.flushCCStreams(p)},$t.prototype.flush=function(){return this.flushStream("flush")},$t.prototype.partialFlush=function(){return this.flushStream("partialFlush")},$t.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(p){p.reset()})},$t.prototype.dispatchCea608Packet=function(p){this.setsTextOrXDSActive(p)?this.activeCea608Channel_[p.type]=null:this.setsChannel1Active(p)?this.activeCea608Channel_[p.type]=0:this.setsChannel2Active(p)&&(this.activeCea608Channel_[p.type]=1),this.activeCea608Channel_[p.type]!==null&&this.ccStreams_[(p.type<<1)+this.activeCea608Channel_[p.type]].push(p)},$t.prototype.setsChannel1Active=function(p){return(p.ccData&30720)===4096},$t.prototype.setsChannel2Active=function(p){return(p.ccData&30720)===6144},$t.prototype.setsTextOrXDSActive=function(p){return(p.ccData&28928)===256||(p.ccData&30974)===4138||(p.ccData&30974)===6186},$t.prototype.dispatchCea708Packet=function(p){this.parse708captions_&&this.cc708Stream_.push(p)};var Cn={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},$r=function(p){var y=Cn[p]||p;return p&4096&&p===y?"":String.fromCharCode(y)},gi=function(p){return 32<=p&&p<=127||160<=p&&p<=255},wn=function(p){this.windowNum=p,this.reset()};wn.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},wn.prototype.getText=function(){return this.rows.join(`
`)},wn.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},wn.prototype.newLine=function(p){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(p),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},wn.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},wn.prototype.addText=function(p){this.rows[this.rowIdx]+=p},wn.prototype.backspace=function(){if(!this.isEmpty()){var p=this.rows[this.rowIdx];this.rows[this.rowIdx]=p.substr(0,p.length-1)}};var Zn=function(p,y,_){this.serviceNum=p,this.text="",this.currentWindow=new wn(-1),this.windows=[],this.stream=_,typeof y=="string"&&this.createTextDecoder(y)};Zn.prototype.init=function(p,y){this.startPts=p;for(var _=0;_<8;_++)this.windows[_]=new wn(_),typeof y=="function"&&(this.windows[_].beforeRowOverflow=y)},Zn.prototype.setCurrentWindow=function(p){this.currentWindow=this.windows[p]},Zn.prototype.createTextDecoder=function(p){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(p)}catch(y){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+p+" encoding. "+y})}};var Dt=function(p){p=p||{},Dt.prototype.init.call(this);var y=this,_=p.captionServices||{},v={},S;Object.keys(_).forEach(E=>{S=_[E],/^SERVICE/.test(E)&&(v[E]=S.encoding)}),this.serviceEncodings=v,this.current708Packet=null,this.services={},this.push=function(E){E.type===3?(y.new708Packet(),y.add708Bytes(E)):(y.current708Packet===null&&y.new708Packet(),y.add708Bytes(E))}};Dt.prototype=new Jn,Dt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Dt.prototype.add708Bytes=function(p){var y=p.ccData,_=y>>>8,v=y&255;this.current708Packet.ptsVals.push(p.pts),this.current708Packet.data.push(_),this.current708Packet.data.push(v)},Dt.prototype.push708Packet=function(){var p=this.current708Packet,y=p.data,_=null,v=null,S=0,E=y[S++];for(p.seq=E>>6,p.sizeCode=E&63;S<y.length;S++)E=y[S++],_=E>>5,v=E&31,_===7&&v>0&&(E=y[S++],_=E),this.pushServiceBlock(_,S,v),v>0&&(S+=v-1)},Dt.prototype.pushServiceBlock=function(p,y,_){var v,S=y,E=this.current708Packet.data,B=this.services[p];for(B||(B=this.initService(p,S));S<y+_&&S<E.length;S++)v=E[S],gi(v)?S=this.handleText(S,B):v===24?S=this.multiByteCharacter(S,B):v===16?S=this.extendedCommands(S,B):128<=v&&v<=135?S=this.setCurrentWindow(S,B):152<=v&&v<=159?S=this.defineWindow(S,B):v===136?S=this.clearWindows(S,B):v===140?S=this.deleteWindows(S,B):v===137?S=this.displayWindows(S,B):v===138?S=this.hideWindows(S,B):v===139?S=this.toggleWindows(S,B):v===151?S=this.setWindowAttributes(S,B):v===144?S=this.setPenAttributes(S,B):v===145?S=this.setPenColor(S,B):v===146?S=this.setPenLocation(S,B):v===143?B=this.reset(S,B):v===8?B.currentWindow.backspace():v===12?B.currentWindow.clearText():v===13?B.currentWindow.pendingNewLine=!0:v===14?B.currentWindow.clearText():v===141&&S++},Dt.prototype.extendedCommands=function(p,y){var _=this.current708Packet.data,v=_[++p];return gi(v)&&(p=this.handleText(p,y,{isExtended:!0})),p},Dt.prototype.getPts=function(p){return this.current708Packet.ptsVals[Math.floor(p/2)]},Dt.prototype.initService=function(p,y){var v="SERVICE"+p,_=this,v,S;return v in this.serviceEncodings&&(S=this.serviceEncodings[v]),this.services[p]=new Zn(p,S,_),this.services[p].init(this.getPts(y),function(E){_.flushDisplayed(E,_.services[p])}),this.services[p]},Dt.prototype.handleText=function(p,y,_){var v=_&&_.isExtended,S=_&&_.isMultiByte,E=this.current708Packet.data,B=v?4096:0,U=E[p],H=E[p+1],q=y.currentWindow,Q,ye;function Fe(we){return we.map(We=>("0"+(We&255).toString(16)).slice(-2)).join("")}if(S?(ye=[U,H],p++):ye=[U],y.textDecoder_&&!v)Q=y.textDecoder_.decode(new Uint8Array(ye));else if(S){const we=Fe(ye);Q=String.fromCharCode(parseInt(we,16))}else Q=$r(B|U);return q.pendingNewLine&&!q.isEmpty()&&q.newLine(this.getPts(p)),q.pendingNewLine=!1,q.addText(Q),p},Dt.prototype.multiByteCharacter=function(p,y){var _=this.current708Packet.data,v=_[p+1],S=_[p+2];return gi(v)&&gi(S)&&(p=this.handleText(++p,y,{isMultiByte:!0})),p},Dt.prototype.setCurrentWindow=function(p,y){var _=this.current708Packet.data,v=_[p],S=v&7;return y.setCurrentWindow(S),p},Dt.prototype.defineWindow=function(p,y){var _=this.current708Packet.data,v=_[p],S=v&7;y.setCurrentWindow(S);var E=y.currentWindow;return v=_[++p],E.visible=(v&32)>>5,E.rowLock=(v&16)>>4,E.columnLock=(v&8)>>3,E.priority=v&7,v=_[++p],E.relativePositioning=(v&128)>>7,E.anchorVertical=v&127,v=_[++p],E.anchorHorizontal=v,v=_[++p],E.anchorPoint=(v&240)>>4,E.rowCount=v&15,v=_[++p],E.columnCount=v&63,v=_[++p],E.windowStyle=(v&56)>>3,E.penStyle=v&7,E.virtualRowCount=E.rowCount+1,p},Dt.prototype.setWindowAttributes=function(p,y){var _=this.current708Packet.data,v=_[p],S=y.currentWindow.winAttr;return v=_[++p],S.fillOpacity=(v&192)>>6,S.fillRed=(v&48)>>4,S.fillGreen=(v&12)>>2,S.fillBlue=v&3,v=_[++p],S.borderType=(v&192)>>6,S.borderRed=(v&48)>>4,S.borderGreen=(v&12)>>2,S.borderBlue=v&3,v=_[++p],S.borderType+=(v&128)>>5,S.wordWrap=(v&64)>>6,S.printDirection=(v&48)>>4,S.scrollDirection=(v&12)>>2,S.justify=v&3,v=_[++p],S.effectSpeed=(v&240)>>4,S.effectDirection=(v&12)>>2,S.displayEffect=v&3,p},Dt.prototype.flushDisplayed=function(p,y){for(var _=[],v=0;v<8;v++)y.windows[v].visible&&!y.windows[v].isEmpty()&&_.push(y.windows[v].getText());y.endPts=p,y.text=_.join(`

`),this.pushCaption(y),y.startPts=p},Dt.prototype.pushCaption=function(p){p.text!==""&&(this.trigger("data",{startPts:p.startPts,endPts:p.endPts,text:p.text,stream:"cc708_"+p.serviceNum}),p.text="",p.startPts=p.endPts)},Dt.prototype.displayWindows=function(p,y){var _=this.current708Packet.data,v=_[++p],S=this.getPts(p);this.flushDisplayed(S,y);for(var E=0;E<8;E++)v&1<<E&&(y.windows[E].visible=1);return p},Dt.prototype.hideWindows=function(p,y){var _=this.current708Packet.data,v=_[++p],S=this.getPts(p);this.flushDisplayed(S,y);for(var E=0;E<8;E++)v&1<<E&&(y.windows[E].visible=0);return p},Dt.prototype.toggleWindows=function(p,y){var _=this.current708Packet.data,v=_[++p],S=this.getPts(p);this.flushDisplayed(S,y);for(var E=0;E<8;E++)v&1<<E&&(y.windows[E].visible^=1);return p},Dt.prototype.clearWindows=function(p,y){var _=this.current708Packet.data,v=_[++p],S=this.getPts(p);this.flushDisplayed(S,y);for(var E=0;E<8;E++)v&1<<E&&y.windows[E].clearText();return p},Dt.prototype.deleteWindows=function(p,y){var _=this.current708Packet.data,v=_[++p],S=this.getPts(p);this.flushDisplayed(S,y);for(var E=0;E<8;E++)v&1<<E&&y.windows[E].reset();return p},Dt.prototype.setPenAttributes=function(p,y){var _=this.current708Packet.data,v=_[p],S=y.currentWindow.penAttr;return v=_[++p],S.textTag=(v&240)>>4,S.offset=(v&12)>>2,S.penSize=v&3,v=_[++p],S.italics=(v&128)>>7,S.underline=(v&64)>>6,S.edgeType=(v&56)>>3,S.fontStyle=v&7,p},Dt.prototype.setPenColor=function(p,y){var _=this.current708Packet.data,v=_[p],S=y.currentWindow.penColor;return v=_[++p],S.fgOpacity=(v&192)>>6,S.fgRed=(v&48)>>4,S.fgGreen=(v&12)>>2,S.fgBlue=v&3,v=_[++p],S.bgOpacity=(v&192)>>6,S.bgRed=(v&48)>>4,S.bgGreen=(v&12)>>2,S.bgBlue=v&3,v=_[++p],S.edgeRed=(v&48)>>4,S.edgeGreen=(v&12)>>2,S.edgeBlue=v&3,p},Dt.prototype.setPenLocation=function(p,y){var _=this.current708Packet.data,v=_[p],S=y.currentWindow.penLoc;return y.currentWindow.pendingNewLine=!0,v=_[++p],S.row=v&15,v=_[++p],S.column=v&63,p},Dt.prototype.reset=function(p,y){var _=this.getPts(p);return this.flushDisplayed(_,y),this.initService(y.serviceNum,p)};var ph={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Mo=function(p){return p===null?"":(p=ph[p]||p,String.fromCharCode(p))},Fl=14,gh=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],cs=function(){for(var p=[],y=Fl+1;y--;)p.push({text:"",indent:0,offset:0});return p},ti=function(p,y){ti.prototype.init.call(this),this.field_=p||0,this.dataChannel_=y||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(_){var v,S,E,B,U;if(v=_.ccData&32639,v===this.lastControlCode_){this.lastControlCode_=null;return}if((v&61440)===4096?this.lastControlCode_=v:v!==this.PADDING_&&(this.lastControlCode_=null),E=v>>>8,B=v&255,v!==this.PADDING_)if(v===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(v===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(_.pts),this.flushDisplayed(_.pts),S=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=S,this.startPts_=_.pts;else if(v===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(_.pts);else if(v===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(_.pts);else if(v===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(_.pts);else if(v===this.CARRIAGE_RETURN_)this.clearFormatting(_.pts),this.flushDisplayed(_.pts),this.shiftRowsUp_(),this.startPts_=_.pts;else if(v===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(v===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(_.pts),this.displayed_=cs();else if(v===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=cs();else if(v===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(_.pts),this.displayed_=cs()),this.mode_="paintOn",this.startPts_=_.pts;else if(this.isSpecialCharacter(E,B))E=(E&3)<<8,U=Mo(E|B),this[this.mode_](_.pts,U),this.column_++;else if(this.isExtCharacter(E,B))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),E=(E&3)<<8,U=Mo(E|B),this[this.mode_](_.pts,U),this.column_++;else if(this.isMidRowCode(E,B))this.clearFormatting(_.pts),this[this.mode_](_.pts," "),this.column_++,(B&14)===14&&this.addFormatting(_.pts,["i"]),(B&1)===1&&this.addFormatting(_.pts,["u"]);else if(this.isOffsetControlCode(E,B)){const q=B&3;this.nonDisplayed_[this.row_].offset=q,this.column_+=q}else if(this.isPAC(E,B)){var H=gh.indexOf(v&7968);if(this.mode_==="rollUp"&&(H-this.rollUpRows_+1<0&&(H=this.rollUpRows_-1),this.setRollUp(_.pts,H)),H!==this.row_&&H>=0&&H<=14&&(this.clearFormatting(_.pts),this.row_=H),B&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(_.pts,["u"]),(v&16)===16){const q=(v&14)>>1;this.column_=q*4,this.nonDisplayed_[this.row_].indent+=q}this.isColorPAC(B)&&(B&14)===14&&this.addFormatting(_.pts,["i"])}else this.isNormalChar(E)&&(B===0&&(B=null),U=Mo(E),U+=Mo(B),this[this.mode_](_.pts,U),this.column_+=U.length)}};ti.prototype=new Jn,ti.prototype.flushDisplayed=function(p){const y=v=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+v+"."})},_=[];this.displayed_.forEach((v,S)=>{if(v&&v.text&&v.text.length){try{v.text=v.text.trim()}catch{y(S)}v.text.length&&_.push({text:v.text,line:S+1,position:10+Math.min(70,v.indent*10)+v.offset*2.5})}else v==null&&y(S)}),_.length&&this.trigger("data",{startPts:this.startPts_,endPts:p,content:_,stream:this.name_})},ti.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=cs(),this.nonDisplayed_=cs(),this.lastControlCode_=null,this.column_=0,this.row_=Fl,this.rollUpRows_=2,this.formatting_=[]},ti.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},ti.prototype.isSpecialCharacter=function(p,y){return p===this.EXT_&&y>=48&&y<=63},ti.prototype.isExtCharacter=function(p,y){return(p===this.EXT_+1||p===this.EXT_+2)&&y>=32&&y<=63},ti.prototype.isMidRowCode=function(p,y){return p===this.EXT_&&y>=32&&y<=47},ti.prototype.isOffsetControlCode=function(p,y){return p===this.OFFSET_&&y>=33&&y<=35},ti.prototype.isPAC=function(p,y){return p>=this.BASE_&&p<this.BASE_+8&&y>=64&&y<=127},ti.prototype.isColorPAC=function(p){return p>=64&&p<=79||p>=96&&p<=127},ti.prototype.isNormalChar=function(p){return p>=32&&p<=127},ti.prototype.setRollUp=function(p,y){if(this.mode_!=="rollUp"&&(this.row_=Fl,this.mode_="rollUp",this.flushDisplayed(p),this.nonDisplayed_=cs(),this.displayed_=cs()),y!==void 0&&y!==this.row_)for(var _=0;_<this.rollUpRows_;_++)this.displayed_[y-_]=this.displayed_[this.row_-_],this.displayed_[this.row_-_]={text:"",indent:0,offset:0};y===void 0&&(y=this.row_),this.topRow_=y-this.rollUpRows_+1},ti.prototype.addFormatting=function(p,y){this.formatting_=this.formatting_.concat(y);var _=y.reduce(function(v,S){return v+"<"+S+">"},"");this[this.mode_](p,_)},ti.prototype.clearFormatting=function(p){if(this.formatting_.length){var y=this.formatting_.reverse().reduce(function(_,v){return _+"</"+v+">"},"");this.formatting_=[],this[this.mode_](p,y)}},ti.prototype.popOn=function(p,y){var _=this.nonDisplayed_[this.row_].text;_+=y,this.nonDisplayed_[this.row_].text=_},ti.prototype.rollUp=function(p,y){var _=this.displayed_[this.row_].text;_+=y,this.displayed_[this.row_].text=_},ti.prototype.shiftRowsUp_=function(){var p;for(p=0;p<this.topRow_;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.row_+1;p<Fl+1;p++)this.displayed_[p]={text:"",indent:0,offset:0};for(p=this.topRow_;p<this.row_;p++)this.displayed_[p]=this.displayed_[p+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},ti.prototype.paintOn=function(p,y){var _=this.displayed_[this.row_].text;_+=y,this.displayed_[this.row_].text=_};var Pc={CaptionStream:$t,Cea608Stream:ti,Cea708Stream:Dt},Bl={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Dg=t,mi=8589934592,Ig=4294967296,jl="shared",Ul=function(p,y){var _=1;for(p>y&&(_=-1);Math.abs(y-p)>Ig;)p+=_*mi;return p},Ma=function(p){var y,_;Ma.prototype.init.call(this),this.type_=p||jl,this.push=function(v){if(v.type==="metadata"){this.trigger("data",v);return}this.type_!==jl&&v.type!==this.type_||(_===void 0&&(_=v.dts),v.dts=Ul(v.dts,_),v.pts=Ul(v.pts,_),y=v.dts,this.trigger("data",v))},this.flush=function(){_=y,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){_=void 0,y=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ma.prototype=new Dg;var mh={TimestampRolloverStream:Ma,handleRollover:Ul},yh=(p,y,_)=>{if(!p)return-1;for(var v=_;v<p.length;v++)if(p[v]===y)return v;return-1},$l={typedArrayIndexOf:yh},cn=$l.typedArrayIndexOf,zl={Utf8:3},En=function(p,y,_){var v,S="";for(v=y;v<_;v++)S+="%"+("00"+p[v].toString(16)).slice(-2);return S},Po=function(p,y,_){return decodeURIComponent(En(p,y,_))},Oo=function(p,y,_){return unescape(En(p,y,_))},Ro=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},ds={APIC:function(p){var y=1,_,v,S="-->";p.data[0]===zl.Utf8&&(_=cn(p.data,0,y),!(_<0)&&(p.mimeType=Oo(p.data,y,_),y=_+1,p.pictureType=p.data[y],y++,v=cn(p.data,0,y),!(v<0)&&(p.description=Po(p.data,y,v),y=v+1,p.mimeType===S?p.url=Oo(p.data,y,p.data.length):p.pictureData=p.data.subarray(y,p.data.length))))},"T*":function(p){p.data[0]===zl.Utf8&&(p.value=Po(p.data,1,p.data.length).replace(/\0*$/,""),p.values=p.value.split("\0"))},TXXX:function(p){var y;p.data[0]===zl.Utf8&&(y=cn(p.data,0,1),y!==-1&&(p.description=Po(p.data,1,y),p.value=Po(p.data,y+1,p.data.length).replace(/\0*$/,""),p.data=p.value))},"W*":function(p){p.url=Oo(p.data,0,p.data.length).replace(/\0.*$/,"")},WXXX:function(p){var y;p.data[0]===zl.Utf8&&(y=cn(p.data,0,1),y!==-1&&(p.description=Po(p.data,1,y),p.url=Oo(p.data,y+1,p.data.length).replace(/\0.*$/,"")))},PRIV:function(p){var y;for(y=0;y<p.data.length;y++)if(p.data[y]===0){p.owner=Oo(p.data,0,y);break}p.privateData=p.data.subarray(y+1),p.data=p.privateData}},Vl=function(p){var y,_,v=10,S=0,E=[];if(!(p.length<10||p[0]!==73||p[1]!==68||p[2]!==51)){S=Ro(p.subarray(6,10)),S+=10;var B=p[5]&64;B&&(v+=4,v+=Ro(p.subarray(10,14)),S-=Ro(p.subarray(16,20)));do{if(y=Ro(p.subarray(v+4,v+8)),y<1)break;_=String.fromCharCode(p[v],p[v+1],p[v+2],p[v+3]);var U={id:_,data:p.subarray(v+10,v+y+10)};U.key=U.id,ds[U.id]?ds[U.id](U):U.id[0]==="T"?ds["T*"](U):U.id[0]==="W"&&ds["W*"](U),E.push(U),v+=10,v+=y}while(v<S);return E}},Pa={parseId3Frames:Vl,parseSyncSafeInteger:Ro,frameParsers:ds},Hl=t,kg=Bl,hs=Pa,Oa;Oa=function(p){var y={descriptor:p&&p.descriptor},_=0,v=[],S=0,E;if(Oa.prototype.init.call(this),this.dispatchType=kg.METADATA_STREAM_TYPE.toString(16),y.descriptor)for(E=0;E<y.descriptor.length;E++)this.dispatchType+=("00"+y.descriptor[E].toString(16)).slice(-2);this.push=function(B){var U,H,q,Q,ye,Fe;if(B.type==="timed-metadata"){if(B.dataAlignmentIndicator&&(S=0,v.length=0),v.length===0&&(B.data.length<10||B.data[0]!==73||B.data[1]!==68||B.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(v.push(B),S+=B.data.byteLength,v.length===1&&(_=hs.parseSyncSafeInteger(B.data.subarray(6,10)),_+=10),!(S<_)){for(U={data:new Uint8Array(_),frames:[],pts:v[0].pts,dts:v[0].dts},ye=0;ye<_;)U.data.set(v[0].data.subarray(0,_-ye),ye),ye+=v[0].data.byteLength,S-=v[0].data.byteLength,v.shift();H=10,U.data[5]&64&&(H+=4,H+=hs.parseSyncSafeInteger(U.data.subarray(10,14)),_-=hs.parseSyncSafeInteger(U.data.subarray(16,20)));do{if(q=hs.parseSyncSafeInteger(U.data.subarray(H+4,H+8)),q<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Fe=String.fromCharCode(U.data[H],U.data[H+1],U.data[H+2],U.data[H+3]),Q={id:Fe,data:U.data.subarray(H+10,H+q+10)},Q.key=Q.id,hs.frameParsers[Q.id]?hs.frameParsers[Q.id](Q):Q.id[0]==="T"?hs.frameParsers["T*"](Q):Q.id[0]==="W"&&hs.frameParsers["W*"](Q),Q.owner==="com.apple.streaming.transportStreamTimestamp"){var we=Q.data,We=(we[3]&1)<<30|we[4]<<22|we[5]<<14|we[6]<<6|we[7]>>>2;We*=4,We+=we[7]&3,Q.timeStamp=We,U.pts===void 0&&U.dts===void 0&&(U.pts=Q.timeStamp,U.dts=Q.timeStamp),this.trigger("timestamp",Q)}U.frames.push(Q),H+=10,H+=q}while(H<_);this.trigger("data",U)}}}},Oa.prototype=new Hl;var vh=Oa,Lo=t,Zs=Pc,er=Bl,Oc=mh.TimestampRolloverStream,Lt,Ra,No,fs=188,ql=71;Lt=function(){var p=new Uint8Array(fs),y=0;Lt.prototype.init.call(this),this.push=function(_){var v=0,S=fs,E;for(y?(E=new Uint8Array(_.byteLength+y),E.set(p.subarray(0,y)),E.set(_,y),y=0):E=_;S<E.byteLength;){if(E[v]===ql&&E[S]===ql){this.trigger("data",E.subarray(v,S)),v+=fs,S+=fs;continue}v++,S++}v<E.byteLength&&(p.set(E.subarray(v),0),y=E.byteLength-v)},this.flush=function(){y===fs&&p[0]===ql&&(this.trigger("data",p),y=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){y=0,this.trigger("reset")}},Lt.prototype=new Lo,Ra=function(){var p,y,_,v;Ra.prototype.init.call(this),v=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,p=function(S,E){var B=0;E.payloadUnitStartIndicator&&(B+=S[B]+1),E.type==="pat"?y(S.subarray(B),E):_(S.subarray(B),E)},y=function(S,E){E.section_number=S[7],E.last_section_number=S[8],v.pmtPid=(S[10]&31)<<8|S[11],E.pmtPid=v.pmtPid},_=function(S,E){var B,U,H,q;if(S[5]&1){for(v.programMapTable={video:null,audio:null,"timed-metadata":{}},B=(S[1]&15)<<8|S[2],U=3+B-4,H=(S[10]&15)<<8|S[11],q=12+H;q<U;){var Q=S[q],ye=(S[q+1]&31)<<8|S[q+2];Q===er.H264_STREAM_TYPE&&v.programMapTable.video===null?v.programMapTable.video=ye:Q===er.ADTS_STREAM_TYPE&&v.programMapTable.audio===null?v.programMapTable.audio=ye:Q===er.METADATA_STREAM_TYPE&&(v.programMapTable["timed-metadata"][ye]=Q),q+=((S[q+3]&15)<<8|S[q+4])+5}E.programMapTable=v.programMapTable}},this.push=function(S){var E={},B=4;if(E.payloadUnitStartIndicator=!!(S[1]&64),E.pid=S[1]&31,E.pid<<=8,E.pid|=S[2],(S[3]&48)>>>4>1&&(B+=S[B]+1),E.pid===0)E.type="pat",p(S.subarray(B),E),this.trigger("data",E);else if(E.pid===this.pmtPid)for(E.type="pmt",p(S.subarray(B),E),this.trigger("data",E);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([S,B,E]):this.processPes_(S,B,E)},this.processPes_=function(S,E,B){B.pid===this.programMapTable.video?B.streamType=er.H264_STREAM_TYPE:B.pid===this.programMapTable.audio?B.streamType=er.ADTS_STREAM_TYPE:B.streamType=this.programMapTable["timed-metadata"][B.pid],B.type="pes",B.data=S.subarray(E),this.trigger("data",B)}},Ra.prototype=new Lo,Ra.STREAM_TYPES={h264:27,adts:15},No=function(){var p=this,y=!1,_={data:[],size:0},v={data:[],size:0},S={data:[],size:0},E,B=function(H,q){var Q;const ye=H[0]<<16|H[1]<<8|H[2];q.data=new Uint8Array,ye===1&&(q.packetLength=6+(H[4]<<8|H[5]),q.dataAlignmentIndicator=(H[6]&4)!==0,Q=H[7],Q&192&&(q.pts=(H[9]&14)<<27|(H[10]&255)<<20|(H[11]&254)<<12|(H[12]&255)<<5|(H[13]&254)>>>3,q.pts*=4,q.pts+=(H[13]&6)>>>1,q.dts=q.pts,Q&64&&(q.dts=(H[14]&14)<<27|(H[15]&255)<<20|(H[16]&254)<<12|(H[17]&255)<<5|(H[18]&254)>>>3,q.dts*=4,q.dts+=(H[18]&6)>>>1)),q.data=H.subarray(9+H[8]))},U=function(H,q,Q){var ye=new Uint8Array(H.size),Fe={type:q},we=0,We=0,at=!1,li;if(!(!H.data.length||H.size<9)){for(Fe.trackId=H.data[0].pid,we=0;we<H.data.length;we++)li=H.data[we],ye.set(li.data,We),We+=li.data.byteLength;B(ye,Fe),at=q==="video"||Fe.packetLength<=H.size,(Q||at)&&(H.size=0,H.data.length=0),at&&p.trigger("data",Fe)}};No.prototype.init.call(this),this.push=function(H){({pat:function(){},pes:function(){var q,Q;switch(H.streamType){case er.H264_STREAM_TYPE:q=_,Q="video";break;case er.ADTS_STREAM_TYPE:q=v,Q="audio";break;case er.METADATA_STREAM_TYPE:q=S,Q="timed-metadata";break;default:return}H.payloadUnitStartIndicator&&U(q,Q,!0),q.data.push(H),q.size+=H.data.byteLength},pmt:function(){var q={type:"metadata",tracks:[]};E=H.programMapTable,E.video!==null&&q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.video,codec:"avc",type:"video"}),E.audio!==null&&q.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.audio,codec:"adts",type:"audio"}),y=!0,p.trigger("data",q)}})[H.type]()},this.reset=function(){_.size=0,_.data.length=0,v.size=0,v.data.length=0,this.trigger("reset")},this.flushStreams_=function(){U(_,"video"),U(v,"audio"),U(S,"timed-metadata")},this.flush=function(){if(!y&&E){var H={type:"metadata",tracks:[]};E.video!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.video,codec:"avc",type:"video"}),E.audio!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+E.audio,codec:"adts",type:"audio"}),p.trigger("data",H)}y=!1,this.flushStreams_(),this.trigger("done")}},No.prototype=new Lo;var Rc={PAT_PID:0,MP2T_PACKET_LENGTH:fs,TransportPacketStream:Lt,TransportParseStream:Ra,ElementaryStream:No,TimestampRolloverStream:Oc,CaptionStream:Zs.CaptionStream,Cea608Stream:Zs.Cea608Stream,Cea708Stream:Zs.Cea708Stream,MetadataStream:vh};for(var Wl in er)er.hasOwnProperty(Wl)&&(Rc[Wl]=er[Wl]);var Lc=Rc,Gl=t,ps=ie.ONE_SECOND_IN_TS,tr,zr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];tr=function(p){var y,_=0;tr.prototype.init.call(this),this.skipWarn_=function(v,S){this.trigger("log",{level:"warn",message:`adts skiping bytes ${v} to ${S} in frame ${_} outside syncword`})},this.push=function(v){var S=0,E,B,U,H,q;if(p||(_=0),v.type==="audio"){y&&y.length?(U=y,y=new Uint8Array(U.byteLength+v.data.byteLength),y.set(U),y.set(v.data,U.byteLength)):y=v.data;for(var Q;S+7<y.length;){if(y[S]!==255||(y[S+1]&246)!==240){typeof Q!="number"&&(Q=S),S++;continue}if(typeof Q=="number"&&(this.skipWarn_(Q,S),Q=null),B=(~y[S+1]&1)*2,E=(y[S+3]&3)<<11|y[S+4]<<3|(y[S+5]&224)>>5,H=((y[S+6]&3)+1)*1024,q=H*ps/zr[(y[S+2]&60)>>>2],y.byteLength-S<E)break;this.trigger("data",{pts:v.pts+_*q,dts:v.dts+_*q,sampleCount:H,audioobjecttype:(y[S+2]>>>6&3)+1,channelcount:(y[S+2]&1)<<2|(y[S+3]&192)>>>6,samplerate:zr[(y[S+2]&60)>>>2],samplingfrequencyindex:(y[S+2]&60)>>>2,samplesize:16,data:y.subarray(S+7+B,S+E)}),_++,S+=E}typeof Q=="number"&&(this.skipWarn_(Q,S),Q=null),y=y.subarray(S)}},this.flush=function(){_=0,this.trigger("done")},this.reset=function(){y=void 0,this.trigger("reset")},this.endTimeline=function(){y=void 0,this.trigger("endedtimeline")}},tr.prototype=new Gl;var Fo=tr,La;La=function(p){var y=p.byteLength,_=0,v=0;this.length=function(){return 8*y},this.bitsAvailable=function(){return 8*y+v},this.loadWord=function(){var S=p.byteLength-y,E=new Uint8Array(4),B=Math.min(4,y);if(B===0)throw new Error("no bytes available");E.set(p.subarray(S,S+B)),_=new DataView(E.buffer).getUint32(0),v=B*8,y-=B},this.skipBits=function(S){var E;v>S?(_<<=S,v-=S):(S-=v,E=Math.floor(S/8),S-=E*8,y-=E,this.loadWord(),_<<=S,v-=S)},this.readBits=function(S){var E=Math.min(v,S),B=_>>>32-E;return v-=E,v>0?_<<=E:y>0&&this.loadWord(),E=S-E,E>0?B<<E|this.readBits(E):B},this.skipLeadingZeros=function(){var S;for(S=0;S<v;++S)if((_&2147483648>>>S)!==0)return _<<=S,v-=S,S;return this.loadWord(),S+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var S=this.skipLeadingZeros();return this.readBits(S+1)-1},this.readExpGolomb=function(){var S=this.readUnsignedExpGolomb();return 1&S?1+S>>>1:-1*(S>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var gs=La,_h=t,bh=gs,ms,Kl,Nc;Kl=function(){var p=0,y,_;Kl.prototype.init.call(this),this.push=function(v){var S;_?(S=new Uint8Array(_.byteLength+v.data.byteLength),S.set(_),S.set(v.data,_.byteLength),_=S):_=v.data;for(var E=_.byteLength;p<E-3;p++)if(_[p+2]===1){y=p+5;break}for(;y<E;)switch(_[y]){case 0:if(_[y-1]!==0){y+=2;break}else if(_[y-2]!==0){y++;break}p+3!==y-2&&this.trigger("data",_.subarray(p+3,y-2));do y++;while(_[y]!==1&&y<E);p=y-2,y+=3;break;case 1:if(_[y-1]!==0||_[y-2]!==0){y+=3;break}this.trigger("data",_.subarray(p+3,y-2)),p=y-2,y+=3;break;default:y+=3;break}_=_.subarray(p),y-=p,p=0},this.reset=function(){_=null,p=0,this.trigger("reset")},this.flush=function(){_&&_.byteLength>3&&this.trigger("data",_.subarray(p+3)),_=null,p=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Kl.prototype=new _h,Nc={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ms=function(){var p=new Kl,y,_,v,S,E,B,U;ms.prototype.init.call(this),y=this,this.push=function(H){H.type==="video"&&(_=H.trackId,v=H.pts,S=H.dts,p.push(H))},p.on("data",function(H){var q={trackId:_,pts:v,dts:S,data:H,nalUnitTypeCode:H[0]&31};switch(q.nalUnitTypeCode){case 5:q.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:q.nalUnitType="sei_rbsp",q.escapedRBSP=E(H.subarray(1));break;case 7:q.nalUnitType="seq_parameter_set_rbsp",q.escapedRBSP=E(H.subarray(1)),q.config=B(q.escapedRBSP);break;case 8:q.nalUnitType="pic_parameter_set_rbsp";break;case 9:q.nalUnitType="access_unit_delimiter_rbsp";break}y.trigger("data",q)}),p.on("done",function(){y.trigger("done")}),p.on("partialdone",function(){y.trigger("partialdone")}),p.on("reset",function(){y.trigger("reset")}),p.on("endedtimeline",function(){y.trigger("endedtimeline")}),this.flush=function(){p.flush()},this.partialFlush=function(){p.partialFlush()},this.reset=function(){p.reset()},this.endTimeline=function(){p.endTimeline()},U=function(H,q){var Q=8,ye=8,Fe,we;for(Fe=0;Fe<H;Fe++)ye!==0&&(we=q.readExpGolomb(),ye=(Q+we+256)%256),Q=ye===0?Q:ye},E=function(H){for(var q=H.byteLength,Q=[],ye=1,Fe,we;ye<q-2;)H[ye]===0&&H[ye+1]===0&&H[ye+2]===3?(Q.push(ye+2),ye+=2):ye++;if(Q.length===0)return H;Fe=q-Q.length,we=new Uint8Array(Fe);var We=0;for(ye=0;ye<Fe;We++,ye++)We===Q[0]&&(We++,Q.shift()),we[ye]=H[We];return we},B=function(H){var q=0,Q=0,ye=0,Fe=0,we,We,at,li,Zt,nr,Ka,Xa,Ss,Ya,In,zt=[1,1],oa,kn;if(we=new bh(H),We=we.readUnsignedByte(),li=we.readUnsignedByte(),at=we.readUnsignedByte(),we.skipUnsignedExpGolomb(),Nc[We]&&(Zt=we.readUnsignedExpGolomb(),Zt===3&&we.skipBits(1),we.skipUnsignedExpGolomb(),we.skipUnsignedExpGolomb(),we.skipBits(1),we.readBoolean()))for(In=Zt!==3?8:12,kn=0;kn<In;kn++)we.readBoolean()&&(kn<6?U(16,we):U(64,we));if(we.skipUnsignedExpGolomb(),nr=we.readUnsignedExpGolomb(),nr===0)we.readUnsignedExpGolomb();else if(nr===1)for(we.skipBits(1),we.skipExpGolomb(),we.skipExpGolomb(),Ka=we.readUnsignedExpGolomb(),kn=0;kn<Ka;kn++)we.skipExpGolomb();if(we.skipUnsignedExpGolomb(),we.skipBits(1),Xa=we.readUnsignedExpGolomb(),Ss=we.readUnsignedExpGolomb(),Ya=we.readBits(1),Ya===0&&we.skipBits(1),we.skipBits(1),we.readBoolean()&&(q=we.readUnsignedExpGolomb(),Q=we.readUnsignedExpGolomb(),ye=we.readUnsignedExpGolomb(),Fe=we.readUnsignedExpGolomb()),we.readBoolean()&&we.readBoolean()){switch(oa=we.readUnsignedByte(),oa){case 1:zt=[1,1];break;case 2:zt=[12,11];break;case 3:zt=[10,11];break;case 4:zt=[16,11];break;case 5:zt=[40,33];break;case 6:zt=[24,11];break;case 7:zt=[20,11];break;case 8:zt=[32,11];break;case 9:zt=[80,33];break;case 10:zt=[18,11];break;case 11:zt=[15,11];break;case 12:zt=[64,33];break;case 13:zt=[160,99];break;case 14:zt=[4,3];break;case 15:zt=[3,2];break;case 16:zt=[2,1];break;case 255:{zt=[we.readUnsignedByte()<<8|we.readUnsignedByte(),we.readUnsignedByte()<<8|we.readUnsignedByte()];break}}zt&&zt[0]/zt[1]}return{profileIdc:We,levelIdc:at,profileCompatibility:li,width:(Xa+1)*16-q*2-Q*2,height:(2-Ya)*(Ss+1)*16-ye*2-Fe*2,sarRatio:zt}}},ms.prototype=new _h;var Xl={H264Stream:ms},xh=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Sh=function(p,y){var _=p[y+6]<<21|p[y+7]<<14|p[y+8]<<7|p[y+9],v=p[y+5],S=(v&16)>>4;return _=_>=0?_:0,S?_+20:_+10},Na=function(p,y){return p.length-y<10||p[y]!==73||p[y+1]!==68||p[y+2]!==51?y:(y+=Sh(p,y),Na(p,y))},Bo=function(p){var y=Na(p,0);return p.length>=y+2&&(p[y]&255)===255&&(p[y+1]&240)===240&&(p[y+1]&22)===16},ea=function(p){return p[0]<<21|p[1]<<14|p[2]<<7|p[3]},Yl=function(p,y,_){var v,S="";for(v=y;v<_;v++)S+="%"+("00"+p[v].toString(16)).slice(-2);return S},Mg=function(p,y,_){return unescape(Yl(p,y,_))},Pg=function(p,y){var _=(p[y+5]&224)>>5,v=p[y+4]<<3,S=p[y+3]&6144;return S|v|_},Fc=function(p,y){return p[y]===73&&p[y+1]===68&&p[y+2]===51?"timed-metadata":p[y]&!0&&(p[y+1]&240)===240?"audio":null},Ql=function(p){for(var y=0;y+5<p.length;){if(p[y]!==255||(p[y+1]&246)!==240){y++;continue}return xh[(p[y+2]&60)>>>2]}return null},Bc=function(p){var y,_,v,S;y=10,p[5]&64&&(y+=4,y+=ea(p.subarray(10,14)));do{if(_=ea(p.subarray(y+4,y+8)),_<1)return null;if(S=String.fromCharCode(p[y],p[y+1],p[y+2],p[y+3]),S==="PRIV"){v=p.subarray(y+10,y+_+10);for(var E=0;E<v.byteLength;E++)if(v[E]===0){var B=Mg(v,0,E);if(B==="com.apple.streaming.transportStreamTimestamp"){var U=v.subarray(E+1),H=(U[3]&1)<<30|U[4]<<22|U[5]<<14|U[6]<<6|U[7]>>>2;return H*=4,H+=U[7]&3,H}break}}y+=10,y+=_}while(y<p.byteLength);return null},Jl={isLikelyAacData:Bo,parseId3TagSize:Sh,parseAdtsSize:Pg,parseType:Fc,parseSampleRate:Ql,parseAacTimestamp:Bc},ys=t,Zl=Jl,ta;ta=function(){var p=new Uint8Array,y=0;ta.prototype.init.call(this),this.setTimestamp=function(_){y=_},this.push=function(_){var v=0,S=0,E,B,U,H;for(p.length?(H=p.length,p=new Uint8Array(_.byteLength+H),p.set(p.subarray(0,H)),p.set(_,H)):p=_;p.length-S>=3;){if(p[S]===73&&p[S+1]===68&&p[S+2]===51){if(p.length-S<10||(v=Zl.parseId3TagSize(p,S),S+v>p.length))break;B={type:"timed-metadata",data:p.subarray(S,S+v)},this.trigger("data",B),S+=v;continue}else if((p[S]&255)===255&&(p[S+1]&240)===240){if(p.length-S<7||(v=Zl.parseAdtsSize(p,S),S+v>p.length))break;U={type:"audio",data:p.subarray(S,S+v),pts:y,dts:y},this.trigger("data",U),S+=v;continue}S++}E=p.length-S,E>0?p=p.subarray(S):p=new Uint8Array},this.reset=function(){p=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){p=new Uint8Array,this.trigger("endedtimeline")}},ta.prototype=new ys;var Th=ta,eu=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],tu=eu,Ch=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],dn=Ch,Vr=t,ia=pe,Hr=Yn,iu=Ue,hn=Pe,ir=Lc,vs=ie,jo=Fo,wh=Xl.H264Stream,Og=Th,Rg=Jl.isLikelyAacData,Lg=ie.ONE_SECOND_IN_TS,nu=tu,Eh=dn,ru,Uo,su,na,Ah=function(p,y){y.stream=p,this.trigger("log",y)},Dh=function(p,y){for(var _=Object.keys(y),v=0;v<_.length;v++){var S=_[v];S==="headOfPipeline"||!y[S].on||y[S].on("log",Ah.bind(p,S))}},Ih=function(p,y){var _;if(p.length!==y.length)return!1;for(_=0;_<p.length;_++)if(p[_]!==y[_])return!1;return!0},kh=function(p,y,_,v,S,E){var B=_-y,U=v-y,H=S-_;return{start:{dts:p,pts:p+B},end:{dts:p+U,pts:p+H},prependedContentDuration:E,baseMediaDecodeTime:p}};Uo=function(p,y){var _=[],v,S=0,E=0,B=1/0;y=y||{},v=y.firstSequenceNumber||0,Uo.prototype.init.call(this),this.push=function(U){hn.collectDtsInfo(p,U),p&&nu.forEach(function(H){p[H]=U[H]}),_.push(U)},this.setEarliestDts=function(U){S=U},this.setVideoBaseMediaDecodeTime=function(U){B=U},this.setAudioAppendStart=function(U){E=U},this.flush=function(){var U,H,q,Q,ye,Fe,we;if(_.length===0){this.trigger("done","AudioSegmentStream");return}U=iu.trimAdtsFramesByEarliestDts(_,p,S),p.baseMediaDecodeTime=hn.calculateTrackBaseMediaDecodeTime(p,y.keepOriginalTimestamps),we=iu.prefixWithSilence(p,U,E,B),p.samples=iu.generateSampleTable(U),q=ia.mdat(iu.concatenateFrameData(U)),_=[],H=ia.moof(v,[p]),Q=new Uint8Array(H.byteLength+q.byteLength),v++,Q.set(H),Q.set(q,H.byteLength),hn.clearDtsInfo(p),ye=Math.ceil(Lg*1024/p.samplerate),U.length&&(Fe=U.length*ye,this.trigger("segmentTimingInfo",kh(vs.audioTsToVideoTs(p.baseMediaDecodeTime,p.samplerate),U[0].dts,U[0].pts,U[0].dts+Fe,U[0].pts+Fe,we||0)),this.trigger("timingInfo",{start:U[0].pts,end:U[0].pts+Fe})),this.trigger("data",{track:p,boxes:Q}),this.trigger("done","AudioSegmentStream")},this.reset=function(){hn.clearDtsInfo(p),_=[],this.trigger("reset")}},Uo.prototype=new Vr,ru=function(p,y){var _,v=[],S=[],E,B;y=y||{},_=y.firstSequenceNumber||0,ru.prototype.init.call(this),delete p.minPTS,this.gopCache_=[],this.push=function(U){hn.collectDtsInfo(p,U),U.nalUnitType==="seq_parameter_set_rbsp"&&!E&&(E=U.config,p.sps=[U.data],Eh.forEach(function(H){p[H]=E[H]},this)),U.nalUnitType==="pic_parameter_set_rbsp"&&!B&&(B=U.data,p.pps=[U.data]),v.push(U)},this.flush=function(){for(var U,H,q,Q,ye,Fe,we=0,We,at;v.length&&v[0].nalUnitType!=="access_unit_delimiter_rbsp";)v.shift();if(v.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(U=Hr.groupNalsIntoFrames(v),q=Hr.groupFramesIntoGops(U),q[0][0].keyFrame||(H=this.getGopForFusion_(v[0],p),H?(we=H.duration,q.unshift(H),q.byteLength+=H.byteLength,q.nalCount+=H.nalCount,q.pts=H.pts,q.dts=H.dts,q.duration+=H.duration):q=Hr.extendFirstKeyFrame(q)),S.length){var li;if(y.alignGopsAtEnd?li=this.alignGopsAtEnd_(q):li=this.alignGopsAtStart_(q),!li){this.gopCache_.unshift({gop:q.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),v=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}hn.clearDtsInfo(p),q=li}hn.collectDtsInfo(p,q),p.samples=Hr.generateSampleTable(q),ye=ia.mdat(Hr.concatenateNalData(q)),p.baseMediaDecodeTime=hn.calculateTrackBaseMediaDecodeTime(p,y.keepOriginalTimestamps),this.trigger("processedGopsInfo",q.map(function(Zt){return{pts:Zt.pts,dts:Zt.dts,byteLength:Zt.byteLength}})),We=q[0],at=q[q.length-1],this.trigger("segmentTimingInfo",kh(p.baseMediaDecodeTime,We.dts,We.pts,at.dts+at.duration,at.pts+at.duration,we)),this.trigger("timingInfo",{start:q[0].pts,end:q[q.length-1].pts+q[q.length-1].duration}),this.gopCache_.unshift({gop:q.pop(),pps:p.pps,sps:p.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),v=[],this.trigger("baseMediaDecodeTime",p.baseMediaDecodeTime),this.trigger("timelineStartInfo",p.timelineStartInfo),Q=ia.moof(_,[p]),Fe=new Uint8Array(Q.byteLength+ye.byteLength),_++,Fe.set(Q),Fe.set(ye,Q.byteLength),this.trigger("data",{track:p,boxes:Fe}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),v=[],this.gopCache_.length=0,S.length=0,this.trigger("reset")},this.resetStream_=function(){hn.clearDtsInfo(p),E=void 0,B=void 0},this.getGopForFusion_=function(U){var H=45e3,q=1/0,Q,ye,Fe,we,We;for(We=0;We<this.gopCache_.length;We++)we=this.gopCache_[We],Fe=we.gop,!(!(p.pps&&Ih(p.pps[0],we.pps[0]))||!(p.sps&&Ih(p.sps[0],we.sps[0])))&&(Fe.dts<p.timelineStartInfo.dts||(Q=U.dts-Fe.dts-Fe.duration,Q>=-1e4&&Q<=H&&(!ye||q>Q)&&(ye=we,q=Q)));return ye?ye.gop:null},this.alignGopsAtStart_=function(U){var H,q,Q,ye,Fe,we,We,at;for(Fe=U.byteLength,we=U.nalCount,We=U.duration,H=q=0;H<S.length&&q<U.length&&(Q=S[H],ye=U[q],Q.pts!==ye.pts);){if(ye.pts>Q.pts){H++;continue}q++,Fe-=ye.byteLength,we-=ye.nalCount,We-=ye.duration}return q===0?U:q===U.length?null:(at=U.slice(q),at.byteLength=Fe,at.duration=We,at.nalCount=we,at.pts=at[0].pts,at.dts=at[0].dts,at)},this.alignGopsAtEnd_=function(U){var H,q,Q,ye,Fe,we;for(H=S.length-1,q=U.length-1,Fe=null,we=!1;H>=0&&q>=0;){if(Q=S[H],ye=U[q],Q.pts===ye.pts){we=!0;break}if(Q.pts>ye.pts){H--;continue}H===S.length-1&&(Fe=q),q--}if(!we&&Fe===null)return null;var We;if(we?We=q:We=Fe,We===0)return U;var at=U.slice(We),li=at.reduce(function(Zt,nr){return Zt.byteLength+=nr.byteLength,Zt.duration+=nr.duration,Zt.nalCount+=nr.nalCount,Zt},{byteLength:0,duration:0,nalCount:0});return at.byteLength=li.byteLength,at.duration=li.duration,at.nalCount=li.nalCount,at.pts=at[0].pts,at.dts=at[0].dts,at},this.alignGopsWith=function(U){S=U}},ru.prototype=new Vr,na=function(p,y){this.numberOfTracks=0,this.metadataStream=y,p=p||{},typeof p.remux<"u"?this.remuxTracks=!!p.remux:this.remuxTracks=!0,typeof p.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=p.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,na.prototype.init.call(this),this.push=function(_){if(_.content||_.text)return this.pendingCaptions.push(_);if(_.frames)return this.pendingMetadata.push(_);this.pendingTracks.push(_.track),this.pendingBytes+=_.boxes.byteLength,_.track.type==="video"&&(this.videoTrack=_.track,this.pendingBoxes.push(_.boxes)),_.track.type==="audio"&&(this.audioTrack=_.track,this.pendingBoxes.unshift(_.boxes))}},na.prototype=new Vr,na.prototype.flush=function(p){var y=0,_={captions:[],captionStreams:{},metadata:[],info:{}},v,S,E,B=0,U;if(this.pendingTracks.length<this.numberOfTracks){if(p!=="VideoSegmentStream"&&p!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(B=this.videoTrack.timelineStartInfo.pts,Eh.forEach(function(H){_.info[H]=this.videoTrack[H]},this)):this.audioTrack&&(B=this.audioTrack.timelineStartInfo.pts,nu.forEach(function(H){_.info[H]=this.audioTrack[H]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?_.type=this.pendingTracks[0].type:_.type="combined",this.emittedTracks+=this.pendingTracks.length,E=ia.initSegment(this.pendingTracks),_.initSegment=new Uint8Array(E.byteLength),_.initSegment.set(E),_.data=new Uint8Array(this.pendingBytes),U=0;U<this.pendingBoxes.length;U++)_.data.set(this.pendingBoxes[U],y),y+=this.pendingBoxes[U].byteLength;for(U=0;U<this.pendingCaptions.length;U++)v=this.pendingCaptions[U],v.startTime=vs.metadataTsToSeconds(v.startPts,B,this.keepOriginalTimestamps),v.endTime=vs.metadataTsToSeconds(v.endPts,B,this.keepOriginalTimestamps),_.captionStreams[v.stream]=!0,_.captions.push(v);for(U=0;U<this.pendingMetadata.length;U++)S=this.pendingMetadata[U],S.cueTime=vs.metadataTsToSeconds(S.pts,B,this.keepOriginalTimestamps),_.metadata.push(S);for(_.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",_),U=0;U<_.captions.length;U++)v=_.captions[U],this.trigger("caption",v);for(U=0;U<_.metadata.length;U++)S=_.metadata[U],this.trigger("id3Frame",S)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},na.prototype.setRemux=function(p){this.remuxTracks=p},su=function(p){var y=this,_=!0,v,S;su.prototype.init.call(this),p=p||{},this.baseMediaDecodeTime=p.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var E={};this.transmuxPipeline_=E,E.type="aac",E.metadataStream=new ir.MetadataStream,E.aacStream=new Og,E.audioTimestampRolloverStream=new ir.TimestampRolloverStream("audio"),E.timedMetadataTimestampRolloverStream=new ir.TimestampRolloverStream("timed-metadata"),E.adtsStream=new jo,E.coalesceStream=new na(p,E.metadataStream),E.headOfPipeline=E.aacStream,E.aacStream.pipe(E.audioTimestampRolloverStream).pipe(E.adtsStream),E.aacStream.pipe(E.timedMetadataTimestampRolloverStream).pipe(E.metadataStream).pipe(E.coalesceStream),E.metadataStream.on("timestamp",function(B){E.aacStream.setTimestamp(B.timeStamp)}),E.aacStream.on("data",function(B){B.type!=="timed-metadata"&&B.type!=="audio"||E.audioSegmentStream||(S=S||{timelineStartInfo:{baseMediaDecodeTime:y.baseMediaDecodeTime},codec:"adts",type:"audio"},E.coalesceStream.numberOfTracks++,E.audioSegmentStream=new Uo(S,p),E.audioSegmentStream.on("log",y.getLogTrigger_("audioSegmentStream")),E.audioSegmentStream.on("timingInfo",y.trigger.bind(y,"audioTimingInfo")),E.adtsStream.pipe(E.audioSegmentStream).pipe(E.coalesceStream),y.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!v}))}),E.coalesceStream.on("data",this.trigger.bind(this,"data")),E.coalesceStream.on("done",this.trigger.bind(this,"done")),Dh(this,E)},this.setupTsPipeline=function(){var E={};this.transmuxPipeline_=E,E.type="ts",E.metadataStream=new ir.MetadataStream,E.packetStream=new ir.TransportPacketStream,E.parseStream=new ir.TransportParseStream,E.elementaryStream=new ir.ElementaryStream,E.timestampRolloverStream=new ir.TimestampRolloverStream,E.adtsStream=new jo,E.h264Stream=new wh,E.captionStream=new ir.CaptionStream(p),E.coalesceStream=new na(p,E.metadataStream),E.headOfPipeline=E.packetStream,E.packetStream.pipe(E.parseStream).pipe(E.elementaryStream).pipe(E.timestampRolloverStream),E.timestampRolloverStream.pipe(E.h264Stream),E.timestampRolloverStream.pipe(E.adtsStream),E.timestampRolloverStream.pipe(E.metadataStream).pipe(E.coalesceStream),E.h264Stream.pipe(E.captionStream).pipe(E.coalesceStream),E.elementaryStream.on("data",function(B){var U;if(B.type==="metadata"){for(U=B.tracks.length;U--;)!v&&B.tracks[U].type==="video"?(v=B.tracks[U],v.timelineStartInfo.baseMediaDecodeTime=y.baseMediaDecodeTime):!S&&B.tracks[U].type==="audio"&&(S=B.tracks[U],S.timelineStartInfo.baseMediaDecodeTime=y.baseMediaDecodeTime);v&&!E.videoSegmentStream&&(E.coalesceStream.numberOfTracks++,E.videoSegmentStream=new ru(v,p),E.videoSegmentStream.on("log",y.getLogTrigger_("videoSegmentStream")),E.videoSegmentStream.on("timelineStartInfo",function(H){S&&!p.keepOriginalTimestamps&&(S.timelineStartInfo=H,E.audioSegmentStream.setEarliestDts(H.dts-y.baseMediaDecodeTime))}),E.videoSegmentStream.on("processedGopsInfo",y.trigger.bind(y,"gopInfo")),E.videoSegmentStream.on("segmentTimingInfo",y.trigger.bind(y,"videoSegmentTimingInfo")),E.videoSegmentStream.on("baseMediaDecodeTime",function(H){S&&E.audioSegmentStream.setVideoBaseMediaDecodeTime(H)}),E.videoSegmentStream.on("timingInfo",y.trigger.bind(y,"videoTimingInfo")),E.h264Stream.pipe(E.videoSegmentStream).pipe(E.coalesceStream)),S&&!E.audioSegmentStream&&(E.coalesceStream.numberOfTracks++,E.audioSegmentStream=new Uo(S,p),E.audioSegmentStream.on("log",y.getLogTrigger_("audioSegmentStream")),E.audioSegmentStream.on("timingInfo",y.trigger.bind(y,"audioTimingInfo")),E.audioSegmentStream.on("segmentTimingInfo",y.trigger.bind(y,"audioSegmentTimingInfo")),E.adtsStream.pipe(E.audioSegmentStream).pipe(E.coalesceStream)),y.trigger("trackinfo",{hasAudio:!!S,hasVideo:!!v})}}),E.coalesceStream.on("data",this.trigger.bind(this,"data")),E.coalesceStream.on("id3Frame",function(B){B.dispatchType=E.metadataStream.dispatchType,y.trigger("id3Frame",B)}),E.coalesceStream.on("caption",this.trigger.bind(this,"caption")),E.coalesceStream.on("done",this.trigger.bind(this,"done")),Dh(this,E)},this.setBaseMediaDecodeTime=function(E){var B=this.transmuxPipeline_;p.keepOriginalTimestamps||(this.baseMediaDecodeTime=E),S&&(S.timelineStartInfo.dts=void 0,S.timelineStartInfo.pts=void 0,hn.clearDtsInfo(S),B.audioTimestampRolloverStream&&B.audioTimestampRolloverStream.discontinuity()),v&&(B.videoSegmentStream&&(B.videoSegmentStream.gopCache_=[]),v.timelineStartInfo.dts=void 0,v.timelineStartInfo.pts=void 0,hn.clearDtsInfo(v),B.captionStream.reset()),B.timestampRolloverStream&&B.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(E){S&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(E)},this.setRemux=function(E){var B=this.transmuxPipeline_;p.remux=E,B&&B.coalesceStream&&B.coalesceStream.setRemux(E)},this.alignGopsWith=function(E){v&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(E)},this.getLogTrigger_=function(E){var B=this;return function(U){U.stream=E,B.trigger("log",U)}},this.push=function(E){if(_){var B=Rg(E);B&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!B&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),_=!1}this.transmuxPipeline_.headOfPipeline.push(E)},this.flush=function(){_=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},su.prototype=new Vr;var Ng={Transmuxer:su},jc=function(p){return p>>>0},Fg=function(p){return("00"+p.toString(16)).slice(-2)},au={toUnsigned:jc,toHexString:Fg},Bg=function(p){var y="";return y+=String.fromCharCode(p[0]),y+=String.fromCharCode(p[1]),y+=String.fromCharCode(p[2]),y+=String.fromCharCode(p[3]),y},Uc=Bg,jg=au.toUnsigned,Ug=Uc,Mh=function(p,y){var _=[],v,S,E,B,U;if(!y.length)return null;for(v=0;v<p.byteLength;)S=jg(p[v]<<24|p[v+1]<<16|p[v+2]<<8|p[v+3]),E=Ug(p.subarray(v+4,v+8)),B=S>1?v+S:p.byteLength,E===y[0]&&(y.length===1?_.push(p.subarray(v+8,B)):(U=Mh(p.subarray(v+8,B),y.slice(1)),U.length&&(_=_.concat(U)))),v=B;return _},$c=Mh,$g=au.toUnsigned,zg=s.getUint64,Vg=function(p){var y={version:p[0],flags:new Uint8Array(p.subarray(1,4))};return y.version===1?y.baseMediaDecodeTime=zg(p.subarray(4)):y.baseMediaDecodeTime=$g(p[4]<<24|p[5]<<16|p[6]<<8|p[7]),y},$o=Vg,zo=function(p){var y=new DataView(p.buffer,p.byteOffset,p.byteLength),_={version:p[0],flags:new Uint8Array(p.subarray(1,4)),trackId:y.getUint32(4)},v=_.flags[2]&1,S=_.flags[2]&2,E=_.flags[2]&8,B=_.flags[2]&16,U=_.flags[2]&32,H=_.flags[0]&65536,q=_.flags[0]&131072,Q;return Q=8,v&&(Q+=4,_.baseDataOffset=y.getUint32(12),Q+=4),S&&(_.sampleDescriptionIndex=y.getUint32(Q),Q+=4),E&&(_.defaultSampleDuration=y.getUint32(Q),Q+=4),B&&(_.defaultSampleSize=y.getUint32(Q),Q+=4),U&&(_.defaultSampleFlags=y.getUint32(Q)),H&&(_.durationIsEmpty=!0),!v&&q&&(_.baseDataOffsetIsMoof=!0),_},Ph=zo,Oh=function(p){return{isLeading:(p[0]&12)>>>2,dependsOn:p[0]&3,isDependedOn:(p[1]&192)>>>6,hasRedundancy:(p[1]&48)>>>4,paddingValue:(p[1]&14)>>>1,isNonSyncSample:p[1]&1,degradationPriority:p[2]<<8|p[3]}},Rh=Oh,zc=Rh,Lh=function(p){var y={version:p[0],flags:new Uint8Array(p.subarray(1,4)),samples:[]},_=new DataView(p.buffer,p.byteOffset,p.byteLength),v=y.flags[2]&1,S=y.flags[2]&4,E=y.flags[1]&1,B=y.flags[1]&2,U=y.flags[1]&4,H=y.flags[1]&8,q=_.getUint32(4),Q=8,ye;for(v&&(y.dataOffset=_.getInt32(Q),Q+=4),S&&q&&(ye={flags:zc(p.subarray(Q,Q+4))},Q+=4,E&&(ye.duration=_.getUint32(Q),Q+=4),B&&(ye.size=_.getUint32(Q),Q+=4),H&&(y.version===1?ye.compositionTimeOffset=_.getInt32(Q):ye.compositionTimeOffset=_.getUint32(Q),Q+=4),y.samples.push(ye),q--);q--;)ye={},E&&(ye.duration=_.getUint32(Q),Q+=4),B&&(ye.size=_.getUint32(Q),Q+=4),U&&(ye.flags=zc(p.subarray(Q,Q+4)),Q+=4),H&&(y.version===1?ye.compositionTimeOffset=_.getInt32(Q):ye.compositionTimeOffset=_.getUint32(Q),Q+=4),y.samples.push(ye);return y},Vc=Lh,ra={tfdt:$o,trun:Vc},Nh={parseTfdt:ra.tfdt,parseTrun:ra.trun},Hg=function(p){for(var y=0,_=String.fromCharCode(p[y]),v="";_!=="\0";)v+=_,y++,_=String.fromCharCode(p[y]);return v+=_,v},qg={uint8ToCString:Hg},Vo=qg.uint8ToCString,Fh=s.getUint64,Ho=function(p){var y=4,_=p[0],v,S,E,B,U,H,q,Q;if(_===0){v=Vo(p.subarray(y)),y+=v.length,S=Vo(p.subarray(y)),y+=S.length;var ye=new DataView(p.buffer);E=ye.getUint32(y),y+=4,U=ye.getUint32(y),y+=4,H=ye.getUint32(y),y+=4,q=ye.getUint32(y),y+=4}else if(_===1){var ye=new DataView(p.buffer);E=ye.getUint32(y),y+=4,B=Fh(p.subarray(y)),y+=8,H=ye.getUint32(y),y+=4,q=ye.getUint32(y),y+=4,v=Vo(p.subarray(y)),y+=v.length,S=Vo(p.subarray(y)),y+=S.length}Q=new Uint8Array(p.subarray(y,p.byteLength));var Fe={scheme_id_uri:v,value:S,timescale:E||1,presentation_time:B,presentation_time_delta:U,event_duration:H,id:q,message_data:Q};return Wg(_,Fe)?Fe:void 0},qo=function(p,y,_,v){return p||p===0?p/y:v+_/y},Wg=function(p,y){var _=y.scheme_id_uri!=="\0",v=p===0&&Wo(y.presentation_time_delta)&&_,S=p===1&&Wo(y.presentation_time)&&_;return!(p>1)&&v||S},Wo=function(p){return p!==void 0||p!==null},Gg={parseEmsgBox:Ho,scaleTime:qo},Fa;typeof window<"u"?Fa=window:typeof n<"u"?Fa=n:typeof self<"u"?Fa=self:Fa={};var ou=Fa,Ba=au.toUnsigned,ja=au.toHexString,ci=$c,sa=Uc,Hc=Gg,Kg=Ph,Xg=Vc,Yg=$o,Qg=s.getUint64,An,Ua,qc,Wc,Gc,lu,uu,Kc=ou,Jg=Pa.parseId3Frames;An=function(p){var y={},_=ci(p,["moov","trak"]);return _.reduce(function(v,S){var E,B,U,H,q;return E=ci(S,["tkhd"])[0],!E||(B=E[0],U=B===0?12:20,H=Ba(E[U]<<24|E[U+1]<<16|E[U+2]<<8|E[U+3]),q=ci(S,["mdia","mdhd"])[0],!q)?null:(B=q[0],U=B===0?12:20,v[H]=Ba(q[U]<<24|q[U+1]<<16|q[U+2]<<8|q[U+3]),v)},y)},Ua=function(p,y){var _;_=ci(y,["moof","traf"]);var v=_.reduce(function(S,E){var B=ci(E,["tfhd"])[0],U=Ba(B[4]<<24|B[5]<<16|B[6]<<8|B[7]),H=p[U]||9e4,q=ci(E,["tfdt"])[0],Q=new DataView(q.buffer,q.byteOffset,q.byteLength),ye;q[0]===1?ye=Qg(q.subarray(4,12)):ye=Q.getUint32(4);let Fe;return typeof ye=="bigint"?Fe=ye/Kc.BigInt(H):typeof ye=="number"&&!isNaN(ye)&&(Fe=ye/H),Fe<Number.MAX_SAFE_INTEGER&&(Fe=Number(Fe)),Fe<S&&(S=Fe),S},1/0);return typeof v=="bigint"||isFinite(v)?v:0},qc=function(p,y){var _=ci(y,["moof","traf"]),v=0,S=0,E;if(_&&_.length){var B=ci(_[0],["tfhd"])[0],U=ci(_[0],["trun"])[0],H=ci(_[0],["tfdt"])[0];if(B){var q=Kg(B);E=q.trackId}if(H){var Q=Yg(H);v=Q.baseMediaDecodeTime}if(U){var ye=Xg(U);ye.samples&&ye.samples.length&&(S=ye.samples[0].compositionTimeOffset||0)}}var Fe=p[E]||9e4;typeof v=="bigint"&&(S=Kc.BigInt(S),Fe=Kc.BigInt(Fe));var we=(v+S)/Fe;return typeof we=="bigint"&&we<Number.MAX_SAFE_INTEGER&&(we=Number(we)),we},Wc=function(p){var y=ci(p,["moov","trak"]),_=[];return y.forEach(function(v){var S=ci(v,["mdia","hdlr"]),E=ci(v,["tkhd"]);S.forEach(function(B,U){var H=sa(B.subarray(8,12)),q=E[U],Q,ye,Fe;H==="vide"&&(Q=new DataView(q.buffer,q.byteOffset,q.byteLength),ye=Q.getUint8(0),Fe=ye===0?Q.getUint32(12):Q.getUint32(20),_.push(Fe))})}),_},lu=function(p){var y=p[0],_=y===0?12:20;return Ba(p[_]<<24|p[_+1]<<16|p[_+2]<<8|p[_+3])},Gc=function(p){var y=ci(p,["moov","trak"]),_=[];return y.forEach(function(v){var S={},E=ci(v,["tkhd"])[0],B,U;E&&(B=new DataView(E.buffer,E.byteOffset,E.byteLength),U=B.getUint8(0),S.id=U===0?B.getUint32(12):B.getUint32(20));var H=ci(v,["mdia","hdlr"])[0];if(H){var q=sa(H.subarray(8,12));q==="vide"?S.type="video":q==="soun"?S.type="audio":S.type=q}var Q=ci(v,["mdia","minf","stbl","stsd"])[0];if(Q){var ye=Q.subarray(8);S.codec=sa(ye.subarray(4,8));var Fe=ci(ye,[S.codec])[0],we,We;Fe&&(/^[asm]vc[1-9]$/i.test(S.codec)?(we=Fe.subarray(78),We=sa(we.subarray(4,8)),We==="avcC"&&we.length>11?(S.codec+=".",S.codec+=ja(we[9]),S.codec+=ja(we[10]),S.codec+=ja(we[11])):S.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(S.codec)?(we=Fe.subarray(28),We=sa(we.subarray(4,8)),We==="esds"&&we.length>20&&we[19]!==0?(S.codec+="."+ja(we[19]),S.codec+="."+ja(we[20]>>>2&63).replace(/^0/,"")):S.codec="mp4a.40.2"):S.codec=S.codec.toLowerCase())}var at=ci(v,["mdia","mdhd"])[0];at&&(S.timescale=lu(at)),_.push(S)}),_},uu=function(p,y=0){var _=ci(p,["emsg"]);return _.map(v=>{var S=Hc.parseEmsgBox(new Uint8Array(v)),E=Jg(S.message_data);return{cueTime:Hc.scaleTime(S.presentation_time,S.timescale,S.presentation_time_delta,y),duration:Hc.scaleTime(S.event_duration,S.timescale),frames:E}})};var Sr={findBox:ci,parseType:sa,timescale:An,startTime:Ua,compositionStartTime:qc,videoTrackIds:Wc,tracks:Gc,getTimescaleFromMediaHeader:lu,getEmsgID3:uu};const{parseTrun:Xc}=Nh,{findBox:$a}=Sr;var cu=ou,Bh=function(p){var y=$a(p,["moof","traf"]),_=$a(p,["mdat"]),v=[];return _.forEach(function(S,E){var B=y[E];v.push({mdat:S,traf:B})}),v},du=function(p,y,_){var v=y,S=_.defaultSampleDuration||0,E=_.defaultSampleSize||0,B=_.trackId,U=[];return p.forEach(function(H){var q=Xc(H),Q=q.samples;Q.forEach(function(ye){ye.duration===void 0&&(ye.duration=S),ye.size===void 0&&(ye.size=E),ye.trackId=B,ye.dts=v,ye.compositionTimeOffset===void 0&&(ye.compositionTimeOffset=0),typeof v=="bigint"?(ye.pts=v+cu.BigInt(ye.compositionTimeOffset),v+=cu.BigInt(ye.duration)):(ye.pts=v+ye.compositionTimeOffset,v+=ye.duration)}),U=U.concat(Q)}),U},aa={getMdatTrafPairs:Bh,parseSamples:du},Yc=tn.discardEmulationPreventionBytes,jh=Pc.CaptionStream,za=$c,Uh=$o,$h=Ph,{getMdatTrafPairs:zh,parseSamples:Vh}=aa,Hh=function(p,y){for(var _=p,v=0;v<y.length;v++){var S=y[v];if(_<S.size)return S;_-=S.size}return null},qh=function(p,y,_){var v=new DataView(p.buffer,p.byteOffset,p.byteLength),S={logs:[],seiNals:[]},E,B,U,H;for(B=0;B+4<p.length;B+=U)if(U=v.getUint32(B),B+=4,!(U<=0))switch(p[B]&31){case 6:var q=p.subarray(B+1,B+1+U),Q=Hh(B,y);if(E={nalUnitType:"sei_rbsp",size:U,data:q,escapedRBSP:Yc(q),trackId:_},Q)E.pts=Q.pts,E.dts=Q.dts,H=Q;else if(H)E.pts=H.pts,E.dts=H.dts;else{S.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+B+" for trackId "+_+". See mux.js#223."});break}S.seiNals.push(E);break}return S},_s=function(p,y){var _={},v=zh(p);return v.forEach(function(S){var E=S.mdat,B=S.traf,U=za(B,["tfhd"]),H=$h(U[0]),q=H.trackId,Q=za(B,["tfdt"]),ye=Q.length>0?Uh(Q[0]).baseMediaDecodeTime:0,Fe=za(B,["trun"]),we,We;y===q&&Fe.length>0&&(we=Vh(Fe,ye,H),We=qh(E,we,q),_[q]||(_[q]={seiNals:[],logs:[]}),_[q].seiNals=_[q].seiNals.concat(We.seiNals),_[q].logs=_[q].logs.concat(We.logs))}),_},Qc=function(p,y,_){var v;if(y===null)return null;v=_s(p,y);var S=v[y]||{};return{seiNals:S.seiNals,logs:S.logs,timescale:_}},Jc=function(){var p=!1,y,_,v,S,E,B;this.isInitialized=function(){return p},this.init=function(U){y=new jh,p=!0,B=U?U.isPartial:!1,y.on("data",function(H){H.startTime=H.startPts/S,H.endTime=H.endPts/S,E.captions.push(H),E.captionStreams[H.stream]=!0}),y.on("log",function(H){E.logs.push(H)})},this.isNewInit=function(U,H){return U&&U.length===0||H&&typeof H=="object"&&Object.keys(H).length===0?!1:v!==U[0]||S!==H[v]},this.parse=function(U,H,q){var Q;if(this.isInitialized()){if(!H||!q)return null;if(this.isNewInit(H,q))v=H[0],S=q[v];else if(v===null||!S)return _.push(U),null}else return null;for(;_.length>0;){var ye=_.shift();this.parse(ye,H,q)}return Q=Qc(U,v,S),Q&&Q.logs&&(E.logs=E.logs.concat(Q.logs)),Q===null||!Q.seiNals?E.logs.length?{logs:E.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Q.seiNals),this.flushStream(),E)},this.pushNals=function(U){if(!this.isInitialized()||!U||U.length===0)return null;U.forEach(function(H){y.push(H)})},this.flushStream=function(){if(!this.isInitialized())return null;B?y.partialFlush():y.flush()},this.clearParsedCaptions=function(){E.captions=[],E.captionStreams={},E.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;y.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){_=[],v=null,S=null,E?this.clearParsedCaptions():E={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Zg=Jc;const{parseTfdt:em}=Nh,Dn=$c,{getTimescaleFromMediaHeader:tm}=Sr,{parseSamples:Wh,getMdatTrafPairs:Gh}=aa;var hu=function(){let p=9e4;this.init=function(y){const _=Dn(y,["moov","trak","mdia","mdhd"])[0];_&&(p=tm(_))},this.parseSegment=function(y){const _=[],v=Gh(y);let S=0;return v.forEach(function(E){const B=E.mdat,U=E.traf,H=Dn(U,["tfdt"])[0],q=Dn(U,["tfhd"])[0],Q=Dn(U,["trun"]);if(H&&(S=em(H).baseMediaDecodeTime),Q.length&&q){const ye=Wh(Q,S,q);let Fe=0;ye.forEach(function(we){const We="utf-8",at=new TextDecoder(We),li=B.slice(Fe,Fe+we.size);if(Dn(li,["vtte"])[0]){Fe+=we.size;return}Dn(li,["vttc"]).forEach(function(Ka){const Xa=Dn(Ka,["payl"])[0],Ss=Dn(Ka,["sttg"])[0],Ya=we.pts/p,In=(we.pts+we.duration)/p;let zt,oa;if(Xa)try{zt=at.decode(Xa)}catch(kn){console.error(kn)}if(Ss)try{oa=at.decode(Ss)}catch(kn){console.error(kn)}we.duration&&zt&&_.push({cueText:zt,start:Ya,end:In,settings:oa})}),Fe+=we.size})}}),_}},Va=Bl,Ha=function(p){var y=p[1]&31;return y<<=8,y|=p[2],y},Go=function(p){return!!(p[1]&64)},qa=function(p){var y=0;return(p[3]&48)>>>4>1&&(y+=p[4]+1),y},Ko=function(p,y){var _=Ha(p);return _===0?"pat":_===y?"pmt":y?"pes":null},fu=function(p){var y=Go(p),_=4+qa(p);return y&&(_+=p[_]+1),(p[_+10]&31)<<8|p[_+11]},Wa=function(p){var y={},_=Go(p),v=4+qa(p);if(_&&(v+=p[v]+1),!!(p[v+5]&1)){var S,E,B;S=(p[v+1]&15)<<8|p[v+2],E=3+S-4,B=(p[v+10]&15)<<8|p[v+11];for(var U=12+B;U<E;){var H=v+U;y[(p[H+1]&31)<<8|p[H+2]]=p[H],U+=((p[H+3]&15)<<8|p[H+4])+5}return y}},Kh=function(p,y){var _=Ha(p),v=y[_];switch(v){case Va.H264_STREAM_TYPE:return"video";case Va.ADTS_STREAM_TYPE:return"audio";case Va.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},im=function(p){var y=Go(p);if(!y)return null;var _=4+qa(p);if(_>=p.byteLength)return null;var v=null,S;return S=p[_+7],S&192&&(v={},v.pts=(p[_+9]&14)<<27|(p[_+10]&255)<<20|(p[_+11]&254)<<12|(p[_+12]&255)<<5|(p[_+13]&254)>>>3,v.pts*=4,v.pts+=(p[_+13]&6)>>>1,v.dts=v.pts,S&64&&(v.dts=(p[_+14]&14)<<27|(p[_+15]&255)<<20|(p[_+16]&254)<<12|(p[_+17]&255)<<5|(p[_+18]&254)>>>3,v.dts*=4,v.dts+=(p[_+18]&6)>>>1)),v},Zc=function(p){switch(p){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Xh=function(p){for(var y=4+qa(p),_=p.subarray(y),v=0,S=0,E=!1,B;S<_.byteLength-3;S++)if(_[S+2]===1){v=S+5;break}for(;v<_.byteLength;)switch(_[v]){case 0:if(_[v-1]!==0){v+=2;break}else if(_[v-2]!==0){v++;break}S+3!==v-2&&(B=Zc(_[S+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(E=!0));do v++;while(_[v]!==1&&v<_.length);S=v-2,v+=3;break;case 1:if(_[v-1]!==0||_[v-2]!==0){v+=3;break}B=Zc(_[S+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(E=!0),S=v-2,v+=3;break;default:v+=3;break}return _=_.subarray(S),v-=S,S=0,_&&_.byteLength>3&&(B=Zc(_[S+3]&31),B==="slice_layer_without_partitioning_rbsp_idr"&&(E=!0)),E},pu={parseType:Ko,parsePat:fu,parsePmt:Wa,parsePayloadUnitStartIndicator:Go,parsePesType:Kh,parsePesTime:im,videoPacketContainsKeyFrame:Xh},Xo=Bl,bs=mh.handleRollover,Nt={};Nt.ts=pu,Nt.aac=Jl;var qr=ie.ONE_SECOND_IN_TS,Ni=188,Tr=71,Yh=function(p,y){for(var _=0,v=Ni,S,E;v<p.byteLength;){if(p[_]===Tr&&p[v]===Tr){switch(S=p.subarray(_,v),E=Nt.ts.parseType(S,y.pid),E){case"pat":y.pid=Nt.ts.parsePat(S);break;case"pmt":var B=Nt.ts.parsePmt(S);y.table=y.table||{},Object.keys(B).forEach(function(U){y.table[U]=B[U]});break}_+=Ni,v+=Ni;continue}_++,v++}},Qh=function(p,y,_){for(var v=0,S=Ni,E,B,U,H,q,Q=!1;S<=p.byteLength;){if(p[v]===Tr&&(p[S]===Tr||S===p.byteLength)){switch(E=p.subarray(v,S),B=Nt.ts.parseType(E,y.pid),B){case"pes":U=Nt.ts.parsePesType(E,y.table),H=Nt.ts.parsePayloadUnitStartIndicator(E),U==="audio"&&H&&(q=Nt.ts.parsePesTime(E),q&&(q.type="audio",_.audio.push(q),Q=!0));break}if(Q)break;v+=Ni,S+=Ni;continue}v++,S++}for(S=p.byteLength,v=S-Ni,Q=!1;v>=0;){if(p[v]===Tr&&(p[S]===Tr||S===p.byteLength)){switch(E=p.subarray(v,S),B=Nt.ts.parseType(E,y.pid),B){case"pes":U=Nt.ts.parsePesType(E,y.table),H=Nt.ts.parsePayloadUnitStartIndicator(E),U==="audio"&&H&&(q=Nt.ts.parsePesTime(E),q&&(q.type="audio",_.audio.push(q),Q=!0));break}if(Q)break;v-=Ni,S-=Ni;continue}v--,S--}},nm=function(p,y,_){for(var v=0,S=Ni,E,B,U,H,q,Q,ye,Fe,we=!1,We={data:[],size:0};S<p.byteLength;){if(p[v]===Tr&&p[S]===Tr){switch(E=p.subarray(v,S),B=Nt.ts.parseType(E,y.pid),B){case"pes":if(U=Nt.ts.parsePesType(E,y.table),H=Nt.ts.parsePayloadUnitStartIndicator(E),U==="video"&&(H&&!we&&(q=Nt.ts.parsePesTime(E),q&&(q.type="video",_.video.push(q),we=!0)),!_.firstKeyFrame)){if(H&&We.size!==0){for(Q=new Uint8Array(We.size),ye=0;We.data.length;)Fe=We.data.shift(),Q.set(Fe,ye),ye+=Fe.byteLength;if(Nt.ts.videoPacketContainsKeyFrame(Q)){var at=Nt.ts.parsePesTime(Q);at?(_.firstKeyFrame=at,_.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}We.size=0}We.data.push(E),We.size+=E.byteLength}break}if(we&&_.firstKeyFrame)break;v+=Ni,S+=Ni;continue}v++,S++}for(S=p.byteLength,v=S-Ni,we=!1;v>=0;){if(p[v]===Tr&&p[S]===Tr){switch(E=p.subarray(v,S),B=Nt.ts.parseType(E,y.pid),B){case"pes":U=Nt.ts.parsePesType(E,y.table),H=Nt.ts.parsePayloadUnitStartIndicator(E),U==="video"&&H&&(q=Nt.ts.parsePesTime(E),q&&(q.type="video",_.video.push(q),we=!0));break}if(we)break;v-=Ni,S-=Ni;continue}v--,S--}},ed=function(p,y){if(p.audio&&p.audio.length){var _=y;(typeof _>"u"||isNaN(_))&&(_=p.audio[0].dts),p.audio.forEach(function(E){E.dts=bs(E.dts,_),E.pts=bs(E.pts,_),E.dtsTime=E.dts/qr,E.ptsTime=E.pts/qr})}if(p.video&&p.video.length){var v=y;if((typeof v>"u"||isNaN(v))&&(v=p.video[0].dts),p.video.forEach(function(E){E.dts=bs(E.dts,v),E.pts=bs(E.pts,v),E.dtsTime=E.dts/qr,E.ptsTime=E.pts/qr}),p.firstKeyFrame){var S=p.firstKeyFrame;S.dts=bs(S.dts,v),S.pts=bs(S.pts,v),S.dtsTime=S.dts/qr,S.ptsTime=S.pts/qr}}},xs=function(p){for(var y=!1,_=0,v=null,S=null,E=0,B=0,U;p.length-B>=3;){var H=Nt.aac.parseType(p,B);switch(H){case"timed-metadata":if(p.length-B<10){y=!0;break}if(E=Nt.aac.parseId3TagSize(p,B),E>p.length){y=!0;break}S===null&&(U=p.subarray(B,B+E),S=Nt.aac.parseAacTimestamp(U)),B+=E;break;case"audio":if(p.length-B<7){y=!0;break}if(E=Nt.aac.parseAdtsSize(p,B),E>p.length){y=!0;break}v===null&&(U=p.subarray(B,B+E),v=Nt.aac.parseSampleRate(U)),_++,B+=E;break;default:B++;break}if(y)return null}if(v===null||S===null)return null;var q=qr/v,Q={audio:[{type:"audio",dts:S,pts:S},{type:"audio",dts:S+_*1024*q,pts:S+_*1024*q}]};return Q},Jh=function(p){var y={pid:null,table:null},_={};Yh(p,y);for(var v in y.table)if(y.table.hasOwnProperty(v)){var S=y.table[v];switch(S){case Xo.H264_STREAM_TYPE:_.video=[],nm(p,y,_),_.video.length===0&&delete _.video;break;case Xo.ADTS_STREAM_TYPE:_.audio=[],Qh(p,y,_),_.audio.length===0&&delete _.audio;break}}return _},Ga=function(p,y){var _=Nt.aac.isLikelyAacData(p),v;return _?v=xs(p):v=Jh(p),!v||!v.audio&&!v.video?null:(ed(v,y),v)},Cr={inspect:Ga,parseAudioPes_:Qh};const Yo=function(p,y){y.on("data",function(_){const v=_.initSegment;_.initSegment={data:v.buffer,byteOffset:v.byteOffset,byteLength:v.byteLength};const S=_.data;_.data=S.buffer,p.postMessage({action:"data",segment:_,byteOffset:S.byteOffset,byteLength:S.byteLength},[_.data])}),y.on("done",function(_){p.postMessage({action:"done"})}),y.on("gopInfo",function(_){p.postMessage({action:"gopInfo",gopInfo:_})}),y.on("videoSegmentTimingInfo",function(_){const v={start:{decode:ie.videoTsToSeconds(_.start.dts),presentation:ie.videoTsToSeconds(_.start.pts)},end:{decode:ie.videoTsToSeconds(_.end.dts),presentation:ie.videoTsToSeconds(_.end.pts)},baseMediaDecodeTime:ie.videoTsToSeconds(_.baseMediaDecodeTime)};_.prependedContentDuration&&(v.prependedContentDuration=ie.videoTsToSeconds(_.prependedContentDuration)),p.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:v})}),y.on("audioSegmentTimingInfo",function(_){const v={start:{decode:ie.videoTsToSeconds(_.start.dts),presentation:ie.videoTsToSeconds(_.start.pts)},end:{decode:ie.videoTsToSeconds(_.end.dts),presentation:ie.videoTsToSeconds(_.end.pts)},baseMediaDecodeTime:ie.videoTsToSeconds(_.baseMediaDecodeTime)};_.prependedContentDuration&&(v.prependedContentDuration=ie.videoTsToSeconds(_.prependedContentDuration)),p.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:v})}),y.on("id3Frame",function(_){p.postMessage({action:"id3Frame",id3Frame:_})}),y.on("caption",function(_){p.postMessage({action:"caption",caption:_})}),y.on("trackinfo",function(_){p.postMessage({action:"trackinfo",trackInfo:_})}),y.on("audioTimingInfo",function(_){p.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ie.videoTsToSeconds(_.start),end:ie.videoTsToSeconds(_.end)}})}),y.on("videoTimingInfo",function(_){p.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ie.videoTsToSeconds(_.start),end:ie.videoTsToSeconds(_.end)}})}),y.on("log",function(_){p.postMessage({action:"log",log:_})})};class wr{constructor(y,_){this.options=_||{},this.self=y,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ng.Transmuxer(this.options),Yo(this.self,this.transmuxer)}pushMp4Captions(y){this.captionParser||(this.captionParser=new Zg,this.captionParser.init());const _=new Uint8Array(y.data,y.byteOffset,y.byteLength),v=this.captionParser.parse(_,y.trackIds,y.timescales);this.self.postMessage({action:"mp4Captions",captions:v&&v.captions||[],logs:v&&v.logs||[],data:_.buffer},[_.buffer])}initMp4WebVttParser(y){this.webVttParser||(this.webVttParser=new hu);const _=new Uint8Array(y.data,y.byteOffset,y.byteLength);this.webVttParser.init(_)}getMp4WebVttText(y){this.webVttParser||(this.webVttParser=new hu);const _=new Uint8Array(y.data,y.byteOffset,y.byteLength),v=this.webVttParser.parseSegment(_);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:v||[],data:_.buffer},[_.buffer])}probeMp4StartTime({timescales:y,data:_}){const v=Sr.startTime(y,_);this.self.postMessage({action:"probeMp4StartTime",startTime:v,data:_},[_.buffer])}probeMp4Tracks({data:y}){const _=Sr.tracks(y);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:y},[y.buffer])}probeEmsgID3({data:y,offset:_}){const v=Sr.getEmsgID3(y,_);this.self.postMessage({action:"probeEmsgID3",id3Frames:v,emsgData:y},[y.buffer])}probeTs({data:y,baseStartTime:_}){const v=typeof _=="number"&&!isNaN(_)?_*ie.ONE_SECOND_IN_TS:void 0,S=Cr.inspect(y,v);let E=null;S&&(E={hasVideo:S.video&&S.video.length===2||!1,hasAudio:S.audio&&S.audio.length===2||!1},E.hasVideo&&(E.videoStart=S.video[0].ptsTime),E.hasAudio&&(E.audioStart=S.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:E,data:y},[y.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(y){const _=new Uint8Array(y.data,y.byteOffset,y.byteLength);this.transmuxer.push(_)}reset(){this.transmuxer.reset()}setTimestampOffset(y){const _=y.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ie.secondsToVideoTs(_)))}setAudioAppendStart(y){this.transmuxer.setAudioAppendStart(Math.ceil(ie.secondsToVideoTs(y.appendStart)))}setRemux(y){this.transmuxer.setRemux(y.remux)}flush(y){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(y){this.transmuxer.alignGopsWith(y.gopsToAlignWith.slice())}}self.onmessage=function(p){if(p.data.action==="init"&&p.data.options){this.messageHandlers=new wr(self,p.data.options);return}this.messageHandlers||(this.messageHandlers=new wr(self)),p.data&&p.data.action&&p.data.action!=="init"&&this.messageHandlers[p.data.action]&&this.messageHandlers[p.data.action](p.data)}}));var Y6=Aw(X6);const Q6=(n,e,t)=>{const{type:i,initSegment:r,captions:s,captionStreams:o,metadata:u,videoFrameDtsTime:c,videoFramePtsTime:h}=n.data.segment;e.buffer.push({captions:s,captionStreams:o,metadata:u});const f=n.data.segment.boxes||{data:n.data.segment.data},m={type:i,data:new Uint8Array(f.data,f.data.byteOffset,f.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};typeof c<"u"&&(m.videoFrameDtsTime=c),typeof h<"u"&&(m.videoFramePtsTime=h),t(m)},J6=({transmuxedData:n,callback:e})=>{n.buffer=[],e(n)},Z6=(n,e)=>{e.gopInfo=n.data.gopInfo},kw=n=>{const{transmuxer:e,bytes:t,audioAppendStart:i,gopsToAlignWith:r,remux:s,onData:o,onTrackInfo:u,onAudioTimingInfo:c,onVideoTimingInfo:h,onVideoSegmentTimingInfo:f,onAudioSegmentTimingInfo:m,onId3:x,onCaptions:w,onDone:A,onEndedTimeline:C,onTransmuxerLog:D,isEndOfTimeline:N,segment:L,triggerSegmentEventFn:P}=n,X={buffer:[]};let j=N;const K=J=>{e.currentTransmux===n&&(J.data.action==="data"&&Q6(J,X,o),J.data.action==="trackinfo"&&u(J.data.trackInfo),J.data.action==="gopInfo"&&Z6(J,X),J.data.action==="audioTimingInfo"&&c(J.data.audioTimingInfo),J.data.action==="videoTimingInfo"&&h(J.data.videoTimingInfo),J.data.action==="videoSegmentTimingInfo"&&f(J.data.videoSegmentTimingInfo),J.data.action==="audioSegmentTimingInfo"&&m(J.data.audioSegmentTimingInfo),J.data.action==="id3Frame"&&x([J.data.id3Frame],J.data.id3Frame.dispatchType),J.data.action==="caption"&&w(J.data.caption),J.data.action==="endedtimeline"&&(j=!1,C()),J.data.action==="log"&&D(J.data.log),J.data.type==="transmuxed"&&(j||(e.onmessage=null,J6({transmuxedData:X,callback:A}),Mw(e))))},z=()=>{const J={message:"Received an error message from the transmuxer worker",metadata:{errorType:me.Error.StreamingFailedToTransmuxSegment,segmentInfo:ml({segment:L})}};A(null,J)};if(e.onmessage=K,e.onerror=z,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const J=t instanceof ArrayBuffer?t:t.buffer,R=t instanceof ArrayBuffer?0:t.byteOffset;P({type:"segmenttransmuxingstart",segment:L}),e.postMessage({action:"push",data:J,byteOffset:R,byteLength:t.byteLength},[J])}N&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},Mw=n=>{n.currentTransmux=null,n.transmuxQueue.length&&(n.currentTransmux=n.transmuxQueue.shift(),typeof n.currentTransmux=="function"?n.currentTransmux():kw(n.currentTransmux))},Ub=(n,e)=>{n.postMessage({action:e}),Mw(n)},Pw=(n,e)=>{if(!e.currentTransmux){e.currentTransmux=n,Ub(e,n);return}e.transmuxQueue.push(Ub.bind(null,e,n))},ek=n=>{Pw("reset",n)},tk=n=>{Pw("endTimeline",n)},Ow=n=>{if(!n.transmuxer.currentTransmux){n.transmuxer.currentTransmux=n,kw(n);return}n.transmuxer.transmuxQueue.push(n)},ik=n=>{const e=new Y6;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:n}),e};var t0={reset:ek,endTimeline:tk,transmux:Ow,createTransmuxer:ik};const tc=function(n){const e=n.transmuxer,t=n.endAction||n.action,i=n.callback,r=Ii({},n,{endAction:null,transmuxer:null,callback:null}),s=o=>{o.data.action===t&&(e.removeEventListener("message",s),o.data.data&&(o.data.data=new Uint8Array(o.data.data,n.byteOffset||0,n.byteLength||o.data.data.byteLength),n.data&&(n.data=o.data.data)),i(o.data))};if(e.addEventListener("message",s),n.data){const o=n.data instanceof ArrayBuffer;r.byteOffset=o?0:n.data.byteOffset,r.byteLength=n.data.byteLength;const u=[o?n.data:n.data.buffer];e.postMessage(r,u)}else e.postMessage(r)},qs={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Rw="wvtt",q0=n=>{n.forEach(e=>{e.abort()})},nk=n=>({bandwidth:n.bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0}),rk=n=>{const e=n.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=n.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},l2=(n,e)=>{const{requestType:t}=e,i=Ml({requestType:t,request:e,error:n});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:qs.TIMEOUT,xhr:e,metadata:i}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:qs.ABORTED,xhr:e,metadata:i}:n?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:qs.FAILURE,xhr:e,metadata:i}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:qs.FAILURE,xhr:e,metadata:i}:null},$b=(n,e,t,i)=>(r,s)=>{const o=s.response,u=l2(r,s);if(u)return t(u,n);if(o.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:qs.FAILURE,xhr:s},n);const c=new DataView(o),h=new Uint32Array([c.getUint32(0),c.getUint32(4),c.getUint32(8),c.getUint32(12)]);for(let m=0;m<e.length;m++)e[m].bytes=h;const f={uri:s.uri};return i({type:"segmentkeyloadcomplete",segment:n,keyInfo:f}),t(null,n)},sk=(n,e)=>{e===Rw&&n.transmuxer.postMessage({action:"initMp4WebVttParser",data:n.map.bytes})},ak=(n,e,t)=>{e===Rw&&tc({action:"getMp4WebVttText",data:n.bytes,transmuxer:n.transmuxer,callback:({data:i,mp4VttCues:r})=>{n.bytes=i,t(null,n,{mp4VttCues:r})}})},Lw=(n,e)=>{const t=M1(n.map.bytes);if(t!=="mp4"){const i=n.map.resolvedUri||n.map.uri,r=t||"unknown";return e({internal:!0,message:`Found unsupported ${r} container for initialization segment at URL: ${i}`,code:qs.FAILURE,metadata:{mediaType:r}})}tc({action:"probeMp4Tracks",data:n.map.bytes,transmuxer:n.transmuxer,callback:({tracks:i,data:r})=>(n.map.bytes=r,i.forEach(function(s){n.map.tracks=n.map.tracks||{},!n.map.tracks[s.type]&&(n.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(n.map.timescales=n.map.timescales||{},n.map.timescales[s.id]=s.timescale),s.type==="text"&&sk(n,s.codec))}),e(null))})},ok=({segment:n,finishProcessingFn:e,triggerSegmentEventFn:t})=>(i,r)=>{const s=l2(i,r);if(s)return e(s,n);const o=new Uint8Array(r.response);if(t({type:"segmentloaded",segment:n}),n.map.key)return n.map.encryptedBytes=o,e(null,n);n.map.bytes=o,Lw(n,function(u){if(u)return u.xhr=r,u.status=r.status,e(u,n);e(null,n)})},lk=({segment:n,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:i})=>(r,s)=>{const o=l2(r,s);if(o)return e(o,n);i({type:"segmentloaded",segment:n});const u=t==="arraybuffer"||!s.responseText?s.response:G6(s.responseText.substring(n.lastReachedChar||0));return n.stats=nk(s),n.key?n.encryptedBytes=new Uint8Array(u):n.bytes=new Uint8Array(u),e(null,n)},uk=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:w})=>{const A=n.map&&n.map.tracks||{},C=!!(A.audio&&A.video);let D=i.bind(null,n,"audio","start");const N=i.bind(null,n,"audio","end");let L=i.bind(null,n,"video","start");const P=i.bind(null,n,"video","end"),X=()=>Ow({bytes:e,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:C,onData:j=>{j.type=j.type==="combined"?"video":j.type,f(n,j)},onTrackInfo:j=>{t&&(C&&(j.isMuxed=!0),t(n,j))},onAudioTimingInfo:j=>{D&&typeof j.start<"u"&&(D(j.start),D=null),N&&typeof j.end<"u"&&N(j.end)},onVideoTimingInfo:j=>{L&&typeof j.start<"u"&&(L(j.start),L=null),P&&typeof j.end<"u"&&P(j.end)},onVideoSegmentTimingInfo:j=>{const K={pts:{start:j.start.presentation,end:j.end.presentation},dts:{start:j.start.decode,end:j.end.decode}};w({type:"segmenttransmuxingtiminginfoavailable",segment:n,timingInfo:K}),r(j)},onAudioSegmentTimingInfo:j=>{const K={pts:{start:j.start.pts,end:j.end.pts},dts:{start:j.start.dts,end:j.end.dts}};w({type:"segmenttransmuxingtiminginfoavailable",segment:n,timingInfo:K}),s(j)},onId3:(j,K)=>{o(n,j,K)},onCaptions:j=>{u(n,[j])},isEndOfTimeline:c,onEndedTimeline:()=>{h()},onTransmuxerLog:x,onDone:(j,K)=>{m&&(j.type=j.type==="combined"?"video":j.type,w({type:"segmenttransmuxingcomplete",segment:n}),m(K,n,j))},segment:n,triggerSegmentEventFn:w});tc({action:"probeTs",transmuxer:n.transmuxer,data:e,baseStartTime:n.baseStartTime,callback:j=>{n.bytes=e=j.data;const K=j.result;K&&(t(n,{hasAudio:K.hasAudio,hasVideo:K.hasVideo,isMuxed:C}),t=null),X()}})},Nw=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:w})=>{let A=new Uint8Array(e);if(k5(A)){n.isFmp4=!0;const{tracks:C}=n.map;if(C.text&&(!C.audio||!C.video)){f(n,{data:A,type:"text"}),ak(n,C.text.codec,m);return}const N={isFmp4:!0,hasVideo:!!C.video,hasAudio:!!C.audio};C.audio&&C.audio.codec&&C.audio.codec!=="enca"&&(N.audioCodec=C.audio.codec),C.video&&C.video.codec&&C.video.codec!=="encv"&&(N.videoCodec=C.video.codec),C.video&&C.audio&&(N.isMuxed=!0),t(n,N);const L=(P,X)=>{f(n,{data:A,type:N.hasAudio&&!N.isMuxed?"audio":"video"}),X&&X.length&&o(n,X),P&&P.length&&u(n,P),m(null,n,{})};tc({action:"probeMp4StartTime",timescales:n.map.timescales,data:A,transmuxer:n.transmuxer,callback:({data:P,startTime:X})=>{e=P.buffer,n.bytes=A=P,N.hasAudio&&!N.isMuxed&&i(n,"audio","start",X),N.hasVideo&&i(n,"video","start",X),tc({action:"probeEmsgID3",data:A,transmuxer:n.transmuxer,offset:X,callback:({emsgData:j,id3Frames:K})=>{if(e=j.buffer,n.bytes=A=j,!C.video||!j.byteLength||!n.transmuxer){L(void 0,K);return}tc({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:A,timescales:n.map.timescales,trackIds:[C.video.id],callback:z=>{e=z.data.buffer,n.bytes=A=z.data,z.logs.forEach(function(J){x(Xt(J,{stream:"mp4CaptionParser"}))}),L(z.captions,K)}})}})}});return}if(!n.transmuxer){m(null,n,{});return}if(typeof n.container>"u"&&(n.container=M1(A)),n.container!=="ts"&&n.container!=="aac"){t(n,{hasAudio:!1,hasVideo:!1}),m(null,n,{});return}uk({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:w})},Fw=function({id:n,key:e,encryptedBytes:t,decryptionWorker:i,segment:r,doneFn:s},o){const u=h=>{if(h.data.source===n){i.removeEventListener("message",u);const f=h.data.decrypted;o(new Uint8Array(f.bytes,f.byteOffset,f.byteLength))}};i.onerror=()=>{const h="An error occurred in the decryption worker",f=ml({segment:r}),m={message:h,metadata:{error:new Error(h),errorType:me.Error.StreamingFailedToDecryptSegment,segmentInfo:f,keyInfo:{uri:r.key.resolvedUri||r.map.key.resolvedUri}}};s(m,r)},i.addEventListener("message",u);let c;e.bytes.slice?c=e.bytes.slice():c=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(xw({source:n,encrypted:t,key:c,iv:e.iv}),[t.buffer,c.buffer])},ck=({decryptionWorker:n,segment:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:w})=>{w({type:"segmentdecryptionstart"}),Fw({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:n,segment:e,doneFn:m},A=>{e.bytes=A,w({type:"segmentdecryptioncomplete",segment:e}),Nw({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:w})})},dk=({activeXhrs:n,decryptionWorker:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:w})=>{let A=0,C=!1;return(D,N)=>{if(!C){if(D)return C=!0,q0(n),m(D,N);if(A+=1,A===n.length){const L=function(){if(N.encryptedBytes)return ck({decryptionWorker:e,segment:N,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:w});Nw({segment:N,bytes:N.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f,doneFn:m,onTransmuxerLog:x,triggerSegmentEventFn:w})};if(N.endOfAllRequests=Date.now(),N.map&&N.map.encryptedBytes&&!N.map.bytes)return w({type:"segmentdecryptionstart",segment:N}),Fw({decryptionWorker:e,id:N.requestId+"-init",encryptedBytes:N.map.encryptedBytes,key:N.map.key,segment:N,doneFn:m},P=>{N.map.bytes=P,w({type:"segmentdecryptioncomplete",segment:N}),Lw(N,X=>{if(X)return q0(n),m(X,N);L()})});L()}}}},hk=({loadendState:n,abortFn:e})=>t=>{t.target.aborted&&e&&!n.calledAbortFn&&(e(),n.calledAbortFn=!0)},fk=({segment:n,progressFn:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:f})=>m=>{if(!m.target.aborted)return n.stats=Xt(n.stats,rk(m)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),e(m,n)},pk=({xhr:n,xhrOptions:e,decryptionWorker:t,segment:i,abortFn:r,progressFn:s,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:m,isEndOfTimeline:x,endedTimelineFn:w,dataFn:A,doneFn:C,onTransmuxerLog:D,triggerSegmentEventFn:N})=>{const L=[],P=dk({activeXhrs:L,decryptionWorker:t,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:m,isEndOfTimeline:x,endedTimelineFn:w,dataFn:A,doneFn:C,onTransmuxerLog:D,triggerSegmentEventFn:N});if(i.key&&!i.key.bytes){const J=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&J.push(i.map.key);const R=Xt(e,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),F=$b(i,J,P,N),de={uri:i.key.resolvedUri};N({type:"segmentkeyloadstart",segment:i,keyInfo:de});const fe=n(R,F);L.push(fe)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const fe=Xt(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),le=$b(i,[i.map.key],P,N),Se={uri:i.map.key.resolvedUri};N({type:"segmentkeyloadstart",segment:i,keyInfo:Se});const Ee=n(fe,le);L.push(Ee)}const R=Xt(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:V0(i.map),requestType:"segment-media-initialization"}),F=ok({segment:i,finishProcessingFn:P,triggerSegmentEventFn:N});N({type:"segmentloadstart",segment:i});const de=n(R,F);L.push(de)}const X=Xt(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:V0(i),requestType:"segment"}),j=lk({segment:i,finishProcessingFn:P,responseType:X.responseType,triggerSegmentEventFn:N});N({type:"segmentloadstart",segment:i});const K=n(X,j);K.addEventListener("progress",fk({segment:i,progressFn:s,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:f,captionsFn:m,isEndOfTimeline:x,endedTimelineFn:w,dataFn:A})),L.push(K);const z={};return L.forEach(J=>{J.addEventListener("loadend",hk({loadendState:z,abortFn:r}))}),()=>q0(L)},Hf=Ur("PlaylistSelector"),zb=function(n){if(!n||!n.playlist)return;const e=n.playlist;return JSON.stringify({id:e.id,bandwidth:n.bandwidth,width:n.width,height:n.height,codecs:e.attributes&&e.attributes.CODECS||""})},ic=function(n,e){if(!n)return"";const t=W.getComputedStyle(n);return t?t[e]:""},nc=function(n,e){const t=n.slice();n.sort(function(i,r){const s=e(i,r);return s===0?t.indexOf(i)-t.indexOf(r):s})},u2=function(n,e){let t,i;return n.attributes.BANDWIDTH&&(t=n.attributes.BANDWIDTH),t=t||W.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||W.Number.MAX_VALUE,t-i},gk=function(n,e){let t,i;return n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(t=n.attributes.RESOLUTION.width),t=t||W.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||W.Number.MAX_VALUE,t===i&&n.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?n.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-i};let Bw=function(n){const{main:e,bandwidth:t,playerWidth:i,playerHeight:r,playerObjectFit:s,limitRenditionByPlayerDimensions:o,playlistController:u}=n;if(!e)return;const c={bandwidth:t,width:i,height:r,limitRenditionByPlayerDimensions:o};let h=e.playlists;Vn.isAudioOnly(e)&&(h=u.getAudioTrackPlaylists_(),c.audioOnly=!0);let f=h.map(z=>{let J;const R=z.attributes&&z.attributes.RESOLUTION&&z.attributes.RESOLUTION.width,F=z.attributes&&z.attributes.RESOLUTION&&z.attributes.RESOLUTION.height;return J=z.attributes&&z.attributes.BANDWIDTH,J=J||W.Number.MAX_VALUE,{bandwidth:J,width:R,height:F,playlist:z}});nc(f,(z,J)=>z.bandwidth-J.bandwidth),f=f.filter(z=>!Vn.isIncompatible(z.playlist));let m=f.filter(z=>Vn.isEnabled(z.playlist));m.length||(m=f.filter(z=>!Vn.isDisabled(z.playlist)));const x=m.filter(z=>z.bandwidth*Gi.BANDWIDTH_VARIANCE<t);let w=x[x.length-1];const A=x.filter(z=>z.bandwidth===w.bandwidth)[0];if(o===!1){const z=A||m[0]||f[0];if(z&&z.playlist){let J="sortedPlaylistReps";return A&&(J="bandwidthBestRep"),m[0]&&(J="enabledPlaylistReps"),Hf(`choosing ${zb(z)} using ${J} with options`,c),z.playlist}return Hf("could not choose a playlist with options",c),null}const C=x.filter(z=>z.width&&z.height);nc(C,(z,J)=>z.width-J.width);const D=C.filter(z=>z.width===i&&z.height===r);w=D[D.length-1];const N=D.filter(z=>z.bandwidth===w.bandwidth)[0];let L,P,X;N||(L=C.filter(z=>s==="cover"?z.width>i&&z.height>r:z.width>i||z.height>r),P=L.filter(z=>z.width===L[0].width&&z.height===L[0].height),w=P[P.length-1],X=P.filter(z=>z.bandwidth===w.bandwidth)[0]);let j;if(u.leastPixelDiffSelector){const z=C.map(J=>(J.pixelDiff=Math.abs(J.width-i)+Math.abs(J.height-r),J));nc(z,(J,R)=>J.pixelDiff===R.pixelDiff?R.bandwidth-J.bandwidth:J.pixelDiff-R.pixelDiff),j=z[0]}const K=j||X||N||A||m[0]||f[0];if(K&&K.playlist){let z="sortedPlaylistReps";return j?z="leastPixelDiffRep":X?z="resolutionPlusOneRep":N?z="resolutionBestRep":A?z="bandwidthBestRep":m[0]&&(z="enabledPlaylistReps"),Hf(`choosing ${zb(K)} using ${z} with options`,c),K.playlist}return Hf("could not choose a playlist with options",c),null};const Vb=function(){let n=this.useDevicePixelRatio&&W.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),Bw({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(ic(this.tech_.el(),"width"),10)*n,playerHeight:parseInt(ic(this.tech_.el(),"height"),10)*n,playerObjectFit:this.usePlayerObjectFit?ic(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},mk=function(n){let e=-1,t=-1;if(n<0||n>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&W.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=n*this.systemBandwidth+(1-n)*e,t=this.systemBandwidth),Bw({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(ic(this.tech_.el(),"width"),10)*i,playerHeight:parseInt(ic(this.tech_.el(),"height"),10)*i,playerObjectFit:this.usePlayerObjectFit?ic(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},yk=function(n){const{main:e,currentTime:t,bandwidth:i,duration:r,segmentDuration:s,timeUntilRebuffer:o,currentTimeline:u,syncController:c}=n,h=e.playlists.filter(A=>!Vn.isIncompatible(A));let f=h.filter(Vn.isEnabled);f.length||(f=h.filter(A=>!Vn.isDisabled(A)));const x=f.filter(Vn.hasAttribute.bind(null,"BANDWIDTH")).map(A=>{const D=c.getSyncPoint(A,r,u,t)?1:2,L=Vn.estimateSegmentRequestTime(s,i,A)*D-o;return{playlist:A,rebufferingImpact:L}}),w=x.filter(A=>A.rebufferingImpact<=0);return nc(w,(A,C)=>u2(C.playlist,A.playlist)),w.length?w[0]:(nc(x,(A,C)=>A.rebufferingImpact-C.rebufferingImpact),x[0]||null)},vk=function(){const n=this.playlists.main.playlists.filter(Vn.isEnabled);return nc(n,(t,i)=>u2(t,i)),n.filter(t=>!!Ud(this.playlists.main,t).video)[0]||null},_k=n=>{let e=0,t;return n.bytes&&(t=new Uint8Array(n.bytes),n.segments.forEach(i=>{t.set(i,e),e+=i.byteLength})),t};function jw(n){try{return new URL(n).pathname.split("/").slice(-2).join("/")}catch{return""}}const bk=function(n,e,t){if(!n[t]){e.trigger({type:"usage",name:"vhs-608"});let i=t;/^cc708_/.test(t)&&(i="SERVICE"+t.split("_")[1]);const r=e.textTracks().getTrackById(i);if(r)n[t]=r;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let o=t,u=t,c=!1;const h=s[i];h&&(o=h.label,u=h.language,c=h.default),n[t]=e.addRemoteTextTrack({kind:"captions",id:i,default:c,label:o,language:u},!1).track}}},xk=function({inbandTextTracks:n,captionArray:e,timestampOffset:t}){if(!e)return;const i=W.WebKitDataCue||W.VTTCue;e.forEach(r=>{const s=r.stream;r.content?r.content.forEach(o=>{const u=new i(r.startTime+t,r.endTime+t,o.text);u.line=o.line,u.align="left",u.position=o.position,u.positionAlign="line-left",n[s].addCue(u)}):n[s].addCue(new i(r.startTime+t,r.endTime+t,r.text))})},Sk=function(n){Object.defineProperties(n.frame,{id:{get(){return me.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key}},value:{get(){return me.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data}},privateData:{get(){return me.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data}}})},Tk=({inbandTextTracks:n,metadataArray:e,timestampOffset:t,videoDuration:i})=>{if(!e)return;const r=W.WebKitDataCue||W.VTTCue,s=n.metadataTrack_;if(!s||(e.forEach(f=>{const m=f.cueTime+t;typeof m!="number"||W.isNaN(m)||m<0||!(m<1/0)||!f.frames||!f.frames.length||f.frames.forEach(x=>{const w=new r(m,m,x.value||x.url||x.data||"");w.frame=x,w.value=x,Sk(w),s.addCue(w)})}),!s.cues||!s.cues.length))return;const o=s.cues,u=[];for(let f=0;f<o.length;f++)o[f]&&u.push(o[f]);const c=u.reduce((f,m)=>{const x=f[m.startTime]||[];return x.push(m),f[m.startTime]=x,f},{}),h=Object.keys(c).sort((f,m)=>Number(f)-Number(m));h.forEach((f,m)=>{const x=c[f],w=isFinite(i)?i:f,A=Number(h[m+1])||w;x.forEach(C=>{C.endTime=A})})},Ck={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},wk=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),Ek=({inbandTextTracks:n,dateRanges:e})=>{const t=n.metadataTrack_;if(!t)return;const i=W.WebKitDataCue||W.VTTCue;e.forEach(r=>{for(const s of Object.keys(r)){if(wk.has(s))continue;const o=new i(r.startTime,r.endTime,"");o.id=r.id,o.type="com.apple.quicktime.HLS",o.value={key:Ck[s],data:r[s]},(s==="scte35Out"||s==="scte35In")&&(o.value.data=new Uint8Array(o.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(o)}r.processDateRange()})},Hb=(n,e,t)=>{n.metadataTrack_||(n.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,me.browser.IS_ANY_SAFARI||(n.metadataTrack_.inBandMetadataTrackDispatchType=e))},Md=function(n,e,t){let i,r;if(t&&t.cues)for(i=t.cues.length;i--;)r=t.cues[i],r.startTime>=n&&r.endTime<=e&&t.removeCue(r)},Ak=function(n){const e=n.cues;if(!e)return;const t={};for(let i=e.length-1;i>=0;i--){const r=e[i],s=`${r.startTime}-${r.endTime}-${r.text}`;t[s]?n.removeCue(r):t[s]=r}},Dk=(n,e,t)=>{if(typeof e>"u"||e===null||!n.length)return[];const i=Math.ceil((e-t+3)*Tl.ONE_SECOND_IN_TS);let r;for(r=0;r<n.length&&!(n[r].pts>i);r++);return n.slice(r)},Ik=(n,e,t)=>{if(!e.length)return n;if(t)return e.slice();const i=e[0].pts;let r=0;for(r;r<n.length&&!(n[r].pts>=i);r++);return n.slice(0,r).concat(e)},kk=(n,e,t,i)=>{const r=Math.ceil((e-i)*Tl.ONE_SECOND_IN_TS),s=Math.ceil((t-i)*Tl.ONE_SECOND_IN_TS),o=n.slice();let u=n.length;for(;u--&&!(n[u].pts<=s););if(u===-1)return o;let c=u+1;for(;c--&&!(n[c].pts<=r););return c=Math.max(c,0),o.splice(c,u-c+1),o},Mk=function(n,e){if(!n&&!e||!n&&e||n&&!e)return!1;if(n===e)return!0;const t=Object.keys(n).sort(),i=Object.keys(e).sort();if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(s!==i[r]||n[s]!==e[s])return!1}return!0},Pk=function(n,e,t){e=e||[];const i=[];let r=0;for(let s=0;s<e.length;s++){const o=e[s];if(n===o.timeline&&(i.push(s),r+=o.duration,r>t))return s}return i.length===0?0:i[i.length-1]},xd=1,Ok=500,qb=n=>typeof n=="number"&&isFinite(n),qf=1/60,Rk=(n,e,t)=>n!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,Lk=(n,e,t)=>{let i=e-Gi.BACK_BUFFER_LENGTH;n.length&&(i=Math.max(i,n.start(0)));const r=e-t;return Math.min(r,i)},ku=n=>{const{startOfSegment:e,duration:t,segment:i,part:r,playlist:{mediaSequence:s,id:o,segments:u=[]},mediaIndex:c,partIndex:h,timeline:f}=n,m=u.length-1;let x="mediaIndex/partIndex increment";n.getMediaInfoForTime?x=`getMediaInfoForTime (${n.getMediaInfoForTime})`:n.isSyncRequest&&(x="getSyncSegmentCandidate (isSyncRequest)"),n.independent&&(x+=` with independent ${n.independent}`);const w=typeof h=="number",A=n.segment.uri?"segment":"pre-segment",C=w?nw({preloadSegment:i})-1:0;return`${A} [${s+c}/${s+m}]`+(w?` part [${h}/${C}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(w?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${f}] selected by [${x}] playlist [${o}]`},Wb=n=>`${n}TimingInfo`,Nk=({segmentTimeline:n,currentTimeline:e,startOfSegment:t,buffered:i,overrideCheck:r})=>!r&&n===e?null:n<e?t:i.length?i.end(i.length-1):t,W0=({timelineChangeController:n,currentTimeline:e,segmentTimeline:t,loaderType:i,audioDisabled:r})=>{if(e===t)return!1;if(i==="audio"){const s=n.lastTimelineChange({type:"main"});return!s||s.to!==t}if(i==="main"&&r){const s=n.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},Fk=n=>{if(!n)return!1;const e=n.pendingTimelineChange({type:"audio"}),t=n.pendingTimelineChange({type:"main"}),i=e&&t,r=i&&e.to!==t.to;return!!(i&&e.from!==-1&&t.from!==-1&&r)},Bk=n=>{const e=n.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=n.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},co=n=>{const e=n.pendingSegment_;if(!e)return;if(W0({timelineChangeController:n.timelineChangeController_,currentTimeline:n.currentTimeline_,segmentTimeline:e.timeline,loaderType:n.loaderType_,audioDisabled:n.audioDisabled_})&&Fk(n.timelineChangeController_)){if(Bk(n)){n.timelineChangeController_.trigger("audioTimelineBehind");return}n.timelineChangeController_.trigger("fixBadTimelineChange")}},jk=n=>{let e=0;return["video","audio"].forEach(function(t){const i=n[`${t}TimingInfo`];if(!i)return;const{start:r,end:s}=i;let o;typeof r=="bigint"||typeof s=="bigint"?o=W.BigInt(s)-W.BigInt(r):typeof r=="number"&&typeof s=="number"&&(o=s-r),typeof o<"u"&&o>e&&(e=o)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},Gb=({segmentDuration:n,maxDuration:e})=>n?Math.round(n)>e+Vs:!1,Uk=(n,e)=>{if(e!=="hls")return null;const t=jk({audioTimingInfo:n.audioTimingInfo,videoTimingInfo:n.videoTimingInfo});if(!t)return null;const i=n.playlist.targetDuration,r=Gb({segmentDuration:t,maxDuration:i*2}),s=Gb({segmentDuration:t,maxDuration:i}),o=`Segment with index ${n.mediaIndex} from playlist ${n.playlist.id} has a duration of ${t} when the reported duration is ${n.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||s?{severity:r?"warn":"info",message:o}:null},ml=({type:n,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),i=!!(e.map&&!e.map.bytes),r=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:n||e.type,uri:e.resolvedUri||e.uri,start:r,duration:e.duration,isEncrypted:t,isMediaInitialization:i}};class G0 extends me.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Ur(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():co(this)}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(Ii({type:"codecschange"},i))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():co(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(Ii({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():co(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():co(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return t0.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&W.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,W.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&t0.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Xi();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:i,isMuxed:r}=e;if(i&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const i=Qp(e);let r=this.initSegments_[i];return t&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e}segmentKey(e,t=!1){if(!e)return null;const i=Sw(e);let r=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[i]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(r||e).resolvedUri};return r&&(s.bytes=r.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const i=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(i&&(i.id?s=i.id:i.uri&&(s=i.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${Zy(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const o=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${o}]`),this.mediaIndex!==null)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const u=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!u.parts||!u.parts.length||!u.parts[this.partIndex])){const c=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=c}}r&&(r.mediaIndex-=o,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(W.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&t0.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,i=()=>{},r=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const o=()=>{s--,s===0&&i()};(r||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,o)),(r||this.loaderType_==="main")&&(this.gopBuffer_=kk(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,o));for(const u in this.inbandTextTracks_)Md(e,t,this.inbandTextTracks_[u]);Md(e,t,this.segmentMetadataTrack_),o()}monitorBuffer_(){this.checkBufferTimeout_&&W.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=W.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&W.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=W.setTimeout(this.monitorBufferTick_.bind(this),Ok)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:ml({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,i=this.partIndex){if(!t||!this.mediaSource_)return!1;const r=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,o=!r||!r.parts||i+1===r.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&o}chooseNextRequest_(){const e=this.buffered_(),t=Zy(e)||0,i=r2(e,this.currentTime_()),r=!this.hasPlayed_()&&i>=1,s=i>=this.goalBufferLength_(),o=this.playlist_.segments;if(!o.length||r||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const u={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(u.isSyncRequest)u.mediaIndex=Pk(this.currentTimeline_,o,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${u.mediaIndex}`);else if(this.mediaIndex!==null){const x=o[this.mediaIndex],w=typeof this.partIndex=="number"?this.partIndex:-1;u.startOfSegment=x.end?x.end:t,x.parts&&x.parts[w+1]?(u.mediaIndex=this.mediaIndex,u.partIndex=w+1):u.mediaIndex=this.mediaIndex+1}else{let x,w,A;const C=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${C}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const D=this.getSyncInfoFromMediaSequenceSync_(C);if(!D){const N="No sync info found while using media sequence sync";return this.error({message:N,metadata:{errorType:me.Error.StreamingFailedToSelectNextSegment,error:new Error(N)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${D.start} --> ${D.end})`),x=D.segmentIndex,w=D.partIndex,A=D.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const D=Vn.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:C,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});x=D.segmentIndex,w=D.partIndex,A=D.startTime}u.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${C}`:`currentTime ${C}`,u.mediaIndex=x,u.startOfSegment=A,u.partIndex=w,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${u.mediaIndex} `)}const c=o[u.mediaIndex];let h=c&&typeof u.partIndex=="number"&&c.parts&&c.parts[u.partIndex];if(!c||typeof u.partIndex=="number"&&!h)return null;typeof u.partIndex!="number"&&c.parts&&(u.partIndex=0,h=c.parts[0]);const f=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&h&&!f&&!h.independent)if(u.partIndex===0){const x=o[u.mediaIndex-1],w=x.parts&&x.parts.length&&x.parts[x.parts.length-1];w&&w.independent&&(u.mediaIndex-=1,u.partIndex=x.parts.length-1,u.independent="previous segment")}else c.parts[u.partIndex-1].independent&&(u.partIndex-=1,u.independent="previous part");const m=this.mediaSource_&&this.mediaSource_.readyState==="ended";return u.mediaIndex>=o.length-1&&m&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,u.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(u))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const i=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!i)return null;if(!i.isAppended)return i;const r=this.mediaSequenceSync_.getSyncInfoForTime(i.end);return r?(r.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),r):null}generateSegmentInfo_(e){const{independent:t,playlist:i,mediaIndex:r,startOfSegment:s,isSyncRequest:o,partIndex:u,forceTimestampOffset:c,getMediaInfoForTime:h}=e,f=i.segments[r],m=typeof u=="number"&&f.parts[u],x={requestId:"segment-loader-"+Math.random(),uri:m&&m.resolvedUri||f.resolvedUri,mediaIndex:r,partIndex:m?u:null,isSyncRequest:o,startOfSegment:s,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:f.timeline,duration:m&&m.duration||f.duration,segment:f,part:m,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:h,independent:t},w=typeof c<"u"?c:this.isPendingTimestampOffset_;x.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:f.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:w});const A=Zy(this.sourceUpdater_.audioBuffered());return typeof A=="number"&&(x.audioAppendStart=A-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(x.gopsToAlignWith=Dk(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),x}timestampOffsetForSegment_(e){return Nk(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),i=e.bandwidth,r=this.pendingSegment_.duration,s=Vn.estimateSegmentRequestTime(r,i,this.playlist_,e.bytesReceived),o=r6(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=o)return;const u=yk({main:this.vhs_.playlists.main,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!u)return;const h=s-o-u.rebufferingImpact;let f=.5;o<=Vs&&(f=1),!(!u.playlist||u.playlist.uri===this.playlist_.uri||h<f)&&(this.bandwidth=u.playlist.attributes.BANDWIDTH*Gi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${ku(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:i,hasVideo:r}=t,s={segmentInfo:ml({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:i,hasVideo:r}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},Mk(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():co(this))))}handleTimingInfo_(e,t,i,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,o=Wb(t);s[o]=s[o]||{},s[o][i]=r,this.logger_(`timinginfo: ${t} - ${i} - ${r}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():co(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const r=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(o=>{s[o.stream]=s[o.stream]||{startTime:1/0,captions:[],endTime:0};const u=s[o.stream];u.startTime=Math.min(u.startTime,o.startTime+r),u.endTime=Math.max(u.endTime,o.endTime+r),u.captions.push(o)}),Object.keys(s).forEach(o=>{const{startTime:u,endTime:c,captions:h}=s[o],f=this.inbandTextTracks_;this.logger_(`adding cues from ${u} -> ${c} for ${o}`),bk(f,this.vhs_.tech_,o),Md(u,c,f[o]),xk({captionArray:h,inbandTextTracks:f,timestampOffset:r})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i));return}this.addMetadataToTextTrack(i,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!W0({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:i,hasVideo:r,isMuxed:s}=t;return!(r&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||W0({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){co(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[Wb(t.type)].start;else{const r=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&r&&r.hasVideo;let o;s&&(o=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:o,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const r=this.chooseNextRequest_();if(r.mediaIndex!==i.mediaIndex||r.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:i,playlist:r}){if(i){const s=Qp(i);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i},r){const s=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Cl(s).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Cl(o).join(", "));const u=s.length?s.start(0):0,c=s.length?s.end(s.length-1):0,h=o.length?o.start(0):0,f=o.length?o.end(o.length-1):0;if(c-u<=xd&&f-h<=xd){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${Cl(s).join(", ")}, video buffer: ${Cl(o).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:i}));const x=this.currentTime_()-xd;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${x}`),this.remove(0,x,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${xd}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=W.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},xd*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:i},r){if(r){if(r.code===pw){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",r),this.error({message:`${t} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:me.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:i,data:r,bytes:s}){if(!s){const u=[r];let c=r.byteLength;i&&(u.unshift(i),c+=i.byteLength),s=_k({bytes:c,segments:u})}const o={segmentInfo:ml({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:o}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const r=this.pendingSegment_.segment,s=`${e}TimingInfo`;r[s]||(r[s]={}),r[s].transmuxerPrependedSeconds=i.prependedContentDuration||0,r[s].transmuxedPresentationStart=i.start.presentation,r[s].transmuxedDecodeStart=i.start.decode,r[s].transmuxedPresentationEnd=i.end.presentation,r[s].transmuxedDecodeEnd=i.end.decode,r[s].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,t){const{type:i,data:r}=t;if(!r||!r.byteLength||i==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:s,data:r})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){co(this),this.loadQueue_.push(()=>{const t=Ii({},e,{forceTimestampOffset:!0});Ii(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,o=i||r&&s;this.logger_(`Requesting
${jw(e.uri)}
${ku(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=pk({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:u,level:c,stream:h})=>{this.logger_(`${ku(e)} logged from transmuxer stream ${h} as a ${c}: ${u}`)},triggerSegmentEventFn:({type:u,segment:c,keyInfo:h,trackInfo:f,timingInfo:m})=>{const w={segmentInfo:ml({segment:c})};h&&(w.keyInfo=h),f&&(w.trackInfo=f),m&&(w.timingInfo=m),this.trigger({type:u,metadata:w})}})}trimBackBuffer_(e){const t=Lk(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,i=e.part,r=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,o={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:r,isMediaInitialization:s},u=e.playlist.segments[e.mediaIndex-1];if(u&&u.timeline===t.timeline&&(u.videoTimingInfo?o.baseStartTime=u.videoTimingInfo.transmuxedDecodeEnd:u.audioTimingInfo&&(o.baseStartTime=u.audioTimingInfo.transmuxedDecodeEnd)),t.key){const c=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(t.key),o.key.iv=c}return t.map&&(o.map=this.initSegmentForMap(t.map)),o}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<qf){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${qf}`);return}const i={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:i}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===qs.ABORTED)return;if(this.pause(),e.code===qs.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=Ik(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:i,firstVideoFrameTimeForData:r,currentVideoTimestampOffset:s,useVideoTimingInfo:o,videoTimingInfo:u,audioTimingInfo:c}){if(typeof e<"u")return e;if(!o)return c.start;const h=t.segments[i-1];return i===0||!h||typeof h.start>"u"||h.end!==r+s?r:u.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:i,hasVideo:r,isMuxed:s}=t,o=this.loaderType_==="main"&&r,u=!this.audioDisabled_&&i&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}o&&e.waitingOnAppends++,u&&e.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),u&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=Rk(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),r=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;r&&(e.timingInfo.end=typeof r.end=="number"?r.end:r.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const c={segmentInfo:ml({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:c})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=Uk(e,this.sourceType_);if(t&&(t.severity==="warn"?me.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${ku(e)}`);return}this.logger_(`Appended ${ku(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const i=e.segment,r=e.part,s=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,o=r&&r.end&&this.currentTime_()-r.end>e.playlist.partTargetDuration*3;if(s||o){this.logger_(`bad ${s?"segment":"part"} ${ku(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<qf){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${qf}`);return}const t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,i=t.start,r=t.end;if(!qb(i)||!qb(r))return;Md(i,r,this.segmentMetadataTrack_);const s=W.WebKitDataCue||W.VTTCue,o={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:r},u=JSON.stringify(o),c=new s(i,r,u);c.value=o,this.segmentMetadataTrack_.addCue(c)}}function Ta(){}const Uw=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},$k=["video","audio"],K0=(n,e)=>{const t=e[`${n}Buffer`];return t&&t.updating||e.queuePending[n]},zk=(n,e)=>{for(let t=0;t<e.length;t++){const i=e[t];if(i.type==="mediaSource")return null;if(i.type===n)return t}return null},rc=(n,e)=>{if(e.queue.length===0)return;let t=0,i=e.queue[t];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),rc("audio",e),rc("video",e));return}if(n!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||K0(n,e))){if(i.type!==n){if(t=zk(n,e.queue),t===null)return;i=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[n]=i,i.action(n,e),!i.doneFn){e.queuePending[n]=null,rc(n,e);return}}},$w=(n,e)=>{const t=e[`${n}Buffer`],i=Uw(n);t&&(t.removeEventListener("updateend",e[`on${i}UpdateEnd_`]),t.removeEventListener("error",e[`on${i}Error_`]),e.codecs[n]=null,e[`${n}Buffer`]=null)},Os=(n,e)=>n&&e&&Array.prototype.indexOf.call(n.sourceBuffers,e)!==-1,or={appendBuffer:(n,e,t)=>(i,r)=>{const s=r[`${i}Buffer`];if(Os(r.mediaSource,s)){r.logger_(`Appending segment ${e.mediaIndex}'s ${n.length} bytes to ${i}Buffer`);try{s.appendBuffer(n)}catch(o){r.logger_(`Error with code ${o.code} `+(o.code===pw?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${i}Buffer`),r.queuePending[i]=null,t(o)}}},remove:(n,e)=>(t,i)=>{const r=i[`${t}Buffer`];if(Os(i.mediaSource,r)){i.logger_(`Removing ${n} to ${e} from ${t}Buffer`);try{r.remove(n,e)}catch{i.logger_(`Remove ${n} to ${e} from ${t}Buffer failed`)}}},timestampOffset:n=>(e,t)=>{const i=t[`${e}Buffer`];Os(t.mediaSource,i)&&(t.logger_(`Setting ${e}timestampOffset to ${n}`),i.timestampOffset=n)},callback:n=>(e,t)=>{n()},endOfStream:n=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${n||""})`);try{e.mediaSource.endOfStream(n)}catch(t){me.log.warn("Failed to call media source endOfStream",t)}}},duration:n=>e=>{e.logger_(`Setting mediaSource duration to ${n}`);try{e.mediaSource.duration=n}catch(t){me.log.warn("Failed to set media source duration",t)}},abort:()=>(n,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${n}Buffer`];if(Os(e.mediaSource,t)){e.logger_(`calling abort on ${n}Buffer`);try{t.abort()}catch(i){me.log.warn(`Failed to abort on ${n}Buffer`,i)}}},addSourceBuffer:(n,e)=>t=>{const i=Uw(n),r=pc(e);t.logger_(`Adding ${n}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",t[`on${i}UpdateEnd_`]),s.addEventListener("error",t[`on${i}Error_`]),t.codecs[n]=e,t[`${n}Buffer`]=s},removeSourceBuffer:n=>e=>{const t=e[`${n}Buffer`];if($w(n,e),!!Os(e.mediaSource,t)){e.logger_(`Removing ${n}Buffer with codec ${e.codecs[n]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(i){me.log.warn(`Failed to removeSourceBuffer ${n}Buffer`,i)}}},changeType:n=>(e,t)=>{const i=t[`${e}Buffer`],r=pc(n);if(!Os(t.mediaSource,i))return;const s=n.substring(0,n.indexOf(".")),o=t.codecs[e];if(o.substring(0,o.indexOf("."))===s)return;const c={codecsChangeInfo:{from:o,to:n}};t.trigger({type:"codecschange",metadata:c}),t.logger_(`changing ${e}Buffer codec from ${o} to ${n}`);try{i.changeType(r),t.codecs[e]=n}catch(h){c.errorType=me.Error.StreamingCodecsChangeError,c.error=h,h.metadata=c,t.error_=h,t.trigger("error"),me.log.warn(`Failed to changeType on ${e}Buffer`,h)}}},lr=({type:n,sourceUpdater:e,action:t,doneFn:i,name:r})=>{e.queue.push({type:n,action:t,doneFn:i,name:r}),rc(n,e)},Kb=(n,e)=>t=>{const i=e[`${n}Buffered`](),r=t6(i);if(e.logger_(`received "updateend" event for ${n} Source Buffer: `,r),e.queuePending[n]){const s=e.queuePending[n].doneFn;e.queuePending[n]=null,s&&s(e[`${n}Error_`])}rc(n,e)};class zw extends me.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>rc("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Ur("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=Kb("video",this),this.onAudioUpdateEnd_=Kb("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){lr({type:"mediaSource",sourceUpdater:this,action:or.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){lr({type:e,sourceUpdater:this,action:or.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){me.log.error("removeSourceBuffer is not supported!");return}lr({type:"mediaSource",sourceUpdater:this,action:or.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!me.browser.IS_FIREFOX&&W.MediaSource&&W.MediaSource.prototype&&typeof W.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return W.SourceBuffer&&W.SourceBuffer.prototype&&typeof W.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){me.log.error("changeType is not supported!");return}lr({type:e,sourceUpdater:this,action:or.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const i=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,i);this.canChangeType()&&this.changeType(t,i)})}appendBuffer(e,t){const{segmentInfo:i,type:r,bytes:s}=e;if(this.processedAppend_=!0,r==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const o=t;if(lr({type:r,sourceUpdater:this,action:or.appendBuffer(s,i||{mediaIndex:-1},o),doneFn:t,name:"appendBuffer"}),r==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const u=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${u.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,u.forEach(c=>{this.appendBuffer.apply(this,c)})}}audioBuffered(){return Os(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Xi()}videoBuffered(){return Os(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Xi()}buffered(){const e=Os(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Os(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():n6(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Ta){lr({type:"mediaSource",sourceUpdater:this,action:or.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Ta){typeof e!="string"&&(e=void 0),lr({type:"mediaSource",sourceUpdater:this,action:or.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,i=Ta){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}lr({type:"audio",sourceUpdater:this,action:or.remove(e,t),doneFn:i,name:"remove"})}removeVideo(e,t,i=Ta){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}lr({type:"video",sourceUpdater:this,action:or.remove(e,t),doneFn:i,name:"remove"})}updating(){return!!(K0("audio",this)||K0("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(lr({type:"audio",sourceUpdater:this,action:or.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(lr({type:"video",sourceUpdater:this,action:or.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&lr({type:"audio",sourceUpdater:this,action:or.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&lr({type:"video",sourceUpdater:this,action:or.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),$k.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>$w(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const Xb=n=>decodeURIComponent(escape(String.fromCharCode.apply(null,n))),Vk=n=>{const e=new Uint8Array(n);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},Yb=new Uint8Array(`

`.split("").map(n=>n.charCodeAt(0)));class Hk extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class qk extends G0{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Xi();const e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return Xi([[t,i]])}initSegmentForMap(e,t=!1){if(!e)return null;const i=Qp(e);let r=this.initSegments_[i];if(t&&!r&&e.bytes){const s=Yb.byteLength+e.bytes.byteLength,o=new Uint8Array(s);o.set(e.bytes),o.set(Yb,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return r||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){Md(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===qs.TIMEOUT&&this.handleTimeout_(),e.code===qs.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const r=this.pendingSegment_,s=i.mp4VttCues&&i.mp4VttCues.length;s&&(r.mp4VttCues=i.mp4VttCues),this.saveBandwidthRelatedStats_(r.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const o=r.segment;if(o.map&&(o.map.bytes=t.map.bytes),r.bytes=t.bytes,typeof W.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,i),()=>this.stopForError({message:"Error loading vtt.js"}));return}o.requested=!0;try{this.parseVTTCues_(r)}catch(u){this.stopForError({message:u.message,metadata:{errorType:me.Error.StreamingVttParserError,error:u}});return}if(s||this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,r.cues.forEach(u=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new W.VTTCue(u.startTime,u.endTime,u.text):u)}),Ak(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,t){const i=e&&e.type==="vtt",r=t&&t.type==="text";i&&r&&super.handleData_(e,t)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const t=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(i=>{const r=i.start+t,s=i.end+t,o=new W.VTTCue(r,s,i.cueText);i.settings&&i.settings.split(" ").forEach(u=>{const c=u.split(":"),h=c[0],f=c[1];o[h]=isNaN(f)?f:Number(f)}),e.cues.push(o)})}parseVTTCues_(e){let t,i=!1;if(typeof W.WebVTT!="function")throw new Hk;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof W.TextDecoder=="function"?t=new W.TextDecoder("utf8"):(t=W.WebVTT.StringDecoder(),i=!0);const r=new W.WebVTT.Parser(W,W.vttjs,t);if(r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=o=>{e.timestampmap=o},r.onparsingerror=o=>{me.log.warn("Error encountered when parsing cues: "+o.message)},e.segment.map){let o=e.segment.map.bytes;i&&(o=Xb(o)),r.parse(o)}let s=e.bytes;i&&(s=Xb(s)),r.parse(s),r.flush()}updateTimeMapping_(e,t,i){const r=e.segment;if(!t)return;if(!e.cues.length){r.empty=!0;return}const{MPEGTS:s,LOCAL:o}=e.timestampmap,c=s/Tl.ONE_SECOND_IN_TS-o+t.mapping;if(e.cues.forEach(h=>{const f=h.endTime-h.startTime,m=this.handleRollover_(h.startTime+c,t.time);h.startTime=Math.max(m,0),h.endTime=Math.max(m+f,0)}),!i.syncInfo){const h=e.cues[0].startTime,f=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(h,f-r.duration)}}}handleRollover_(e,t){if(t===null)return e;let i=e*Tl.ONE_SECOND_IN_TS;const r=t*Tl.ONE_SECOND_IN_TS;let s;for(r<i?s=-8589934592:s=8589934592;Math.abs(i-r)>4294967296;)i+=s;return i/Tl.ONE_SECOND_IN_TS}}const Wk=function(n,e){const t=n.cues;for(let i=0;i<t.length;i++){const r=t[i];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null},Gk=function(n,e,t=0){if(!n.segments)return;let i=t,r;for(let s=0;s<n.segments.length;s++){const o=n.segments[s];if(r||(r=Wk(e,i+o.duration/2)),r){if("cueIn"in o){r.endTime=i,r.adEndTime=i,i+=o.duration,r=null;continue}if(i<r.endTime){i+=o.duration;continue}r.endTime+=o.duration}else if("cueOut"in o&&(r=new W.VTTCue(i,i+o.duration,o.cueOut),r.adStartTime=i,r.adEndTime=i+parseFloat(o.cueOut),e.addCue(r)),"cueOutCont"in o){const[u,c]=o.cueOutCont.split("/").map(parseFloat);r=new W.VTTCue(i,i+o.duration,""),r.adStartTime=i-u,r.adEndTime=r.adStartTime+c,e.addCue(r)}i+=o.duration}};class Qb{constructor({start:e,end:t,segmentIndex:i,partIndex:r=null,appended:s=!1}){this.start_=e,this.end_=t,this.segmentIndex_=i,this.partIndex_=r,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class Kk{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class Vw{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:i,segments:r}=e;if(this.isReliable_=this.isReliablePlaylist_(i,r),!!this.isReliable_)return this.updateStorage_(r,i,this.calculateBaseTime_(i,r,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:i}of this.storage_.values())if(i.length){for(const r of i)if(r.isInRange(e))return r}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,i){const r=new Map;let s=`
`,o=i,u=t;this.start_=o,e.forEach((c,h)=>{const f=this.storage_.get(u),m=o,x=m+c.duration,w=!!(f&&f.segmentSyncInfo&&f.segmentSyncInfo.isAppended),A=new Qb({start:m,end:x,appended:w,segmentIndex:h});c.syncInfo=A;let C=o;const D=(c.parts||[]).map((N,L)=>{const P=C,X=C+N.duration,j=!!(f&&f.partsSyncInfo&&f.partsSyncInfo[L]&&f.partsSyncInfo[L].isAppended),K=new Qb({start:P,end:X,appended:j,segmentIndex:h,partIndex:L});return C=X,s+=`Media Sequence: ${u}.${L} | Range: ${P} --> ${X} | Appended: ${j}
`,N.syncInfo=K,K});r.set(u,new Kk(A,D)),s+=`${jw(c.resolvedUri)} | Media Sequence: ${u} | Range: ${m} --> ${x} | Appended: ${w}
`,u++,o=x}),this.end_=o,this.storage_=r,this.diagnostics_=s}calculateBaseTime_(e,t,i){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const r=Math.min(...this.storage_.keys());if(e<r){const s=r-e;let o=this.storage_.get(r).segmentSyncInfo.start;for(let u=0;u<s;u++){const c=t[u];o-=c.duration}return o}return i}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}}class Jb extends Vw{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t,i){if(!this.storage_.size){const r=this.parent_.getSyncInfoForMediaSequence(e);return r?r.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t,i)}}const Xk=86400,i0=[{name:"VOD",run:(n,e,t,i,r)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(n,e,t,i,r,s)=>{const o=n.getMediaSequenceSync(s);if(!o||!o.isReliable)return null;const u=o.getSyncInfoForTime(r);return u?{time:u.start,partIndex:u.partIndex,segmentIndex:u.segmentIndex}:null}},{name:"ProgramDateTime",run:(n,e,t,i,r)=>{if(!Object.keys(n.timelineToDatetimeMappings).length)return null;let s=null,o=null;const u=B0(e);r=r||0;for(let c=0;c<u.length;c++){const h=e.endList||r===0?c:u.length-(c+1),f=u[h],m=f.segment,x=n.timelineToDatetimeMappings[m.timeline];if(!x||!m.dateTimeObject)continue;let A=m.dateTimeObject.getTime()/1e3+x;if(m.parts&&typeof f.partIndex=="number")for(let D=0;D<f.partIndex;D++)A+=m.parts[D].duration;const C=Math.abs(r-A);if(o!==null&&(C===0||o<C))break;o=C,s={time:A,segmentIndex:f.segmentIndex,partIndex:f.partIndex}}return s}},{name:"Segment",run:(n,e,t,i,r)=>{let s=null,o=null;r=r||0;const u=B0(e);for(let c=0;c<u.length;c++){const h=e.endList||r===0?c:u.length-(c+1),f=u[h],m=f.segment,x=f.part&&f.part.start||m&&m.start;if(m.timeline===i&&typeof x<"u"){const w=Math.abs(r-x);if(o!==null&&o<w)break;(!s||o===null||o>=w)&&(o=w,s={time:x,segmentIndex:f.segmentIndex,partIndex:f.partIndex})}}return s}},{name:"Discontinuity",run:(n,e,t,i,r)=>{let s=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length){let o=null;for(let u=0;u<e.discontinuityStarts.length;u++){const c=e.discontinuityStarts[u],h=e.discontinuitySequence+u+1,f=n.discontinuities[h];if(f){const m=Math.abs(r-f.time);if(o!==null&&o<m)break;(!s||o===null||o>=m)&&(o=m,s={time:f.time,segmentIndex:c,partIndex:null})}}}return s}},{name:"Playlist",run:(n,e,t,i,r)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class Yk extends me.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new Vw,i=new Jb(t),r=new Jb(t);this.mediaSequenceStorage_={main:t,audio:i,vtt:r},this.logger_=Ur("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,i,r,s){if(t!==1/0)return i0.find(({name:c})=>c==="VOD").run(this,e,t);const o=this.runStrategies_(e,t,i,r,s);if(!o.length)return null;for(const u of o){const{syncPoint:c,strategy:h}=u,{segmentIndex:f,time:m}=c;if(f<0)continue;const x=e.segments[f],w=m,A=w+x.duration;if(this.logger_(`Strategy: ${h}. Current time: ${r}. selected segment: ${f}. Time: [${w} -> ${A}]}`),r>=w&&r<A)return this.logger_("Found sync point with exact match: ",c),c}return this.selectSyncPoint_(o,{key:"time",value:r})}getExpiredTime(e,t){if(!e||!e.segments)return null;const i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;const r=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+jd({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))}runStrategies_(e,t,i,r,s){const o=[];for(let u=0;u<i0.length;u++){const c=i0[u],h=c.run(this,e,t,i,r,s);h&&(h.strategy=c.name,o.push({strategy:c.name,syncPoint:h}))}return o}selectSyncPoint_(e,t){let i=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let o=1;o<e.length;o++){const u=Math.abs(e[o].syncPoint[t.key]-t.value);u<r&&(r=u,i=e[o].syncPoint,s=e[o].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,t){const i=t.mediaSequence-e.mediaSequence;if(i>Xk){me.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);return}for(let r=i-1;r>=0;r--){const s=e.segments[r];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+r,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const i=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),r=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));const s=r.dateTimeObject;r.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[r.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,i){const r=e.segment,s=e.part;let o=this.timelines[e.timeline],u,c;if(typeof e.timestampOffset=="number")o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${o.time}] [mapping: ${o.mapping}]`)),u=e.startOfSegment,c=t.end+o.mapping;else if(o)u=t.start+o.mapping,c=t.end+o.mapping;else return!1;return s&&(s.start=u,s.end=c),(!r.start||u<r.start)&&(r.start=u),r.end=c,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let r=0;r<t.discontinuityStarts.length;r++){const s=t.discontinuityStarts[r],o=t.discontinuitySequence+r+1,u=s-e.mediaIndex,c=Math.abs(u);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>c){let h;u<0?h=i.start-jd({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):h=i.end+jd({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[o]={time:h,accuracy:c}}}}dispose(){this.trigger("dispose"),this.off()}}class Qk extends me.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:i}){if(typeof t=="number"&&typeof i=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:i},delete this.pendingTimelineChanges_[e];const r={timelineChangeInfo:{from:t,to:i}};this.trigger({type:"timelinechange",metadata:r})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const Jk=Dw(Iw(function(){var n=function(){function C(){this.listeners={}}var D=C.prototype;return D.on=function(L,P){this.listeners[L]||(this.listeners[L]=[]),this.listeners[L].push(P)},D.off=function(L,P){if(!this.listeners[L])return!1;var X=this.listeners[L].indexOf(P);return this.listeners[L]=this.listeners[L].slice(0),this.listeners[L].splice(X,1),X>-1},D.trigger=function(L){var P=this.listeners[L];if(P)if(arguments.length===2)for(var X=P.length,j=0;j<X;++j)P[j].call(this,arguments[1]);else for(var K=Array.prototype.slice.call(arguments,1),z=P.length,J=0;J<z;++J)P[J].apply(this,K)},D.dispose=function(){this.listeners={}},D.pipe=function(L){this.on("data",function(P){L.push(P)})},C}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(C){return C.subarray(0,C.byteLength-C[C.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const C=[[[],[],[],[],[]],[[],[],[],[],[]]],D=C[0],N=C[1],L=D[4],P=N[4];let X,j,K;const z=[],J=[];let R,F,de,fe,le,Se;for(X=0;X<256;X++)J[(z[X]=X<<1^(X>>7)*283)^X]=X;for(j=K=0;!L[j];j^=R||1,K=J[K]||1)for(fe=K^K<<1^K<<2^K<<3^K<<4,fe=fe>>8^fe&255^99,L[j]=fe,P[fe]=j,de=z[F=z[R=z[j]]],Se=de*16843009^F*65537^R*257^j*16843008,le=z[fe]*257^fe*16843008,X=0;X<4;X++)D[X][j]=le=le<<24^le>>>8,N[X][fe]=Se=Se<<24^Se>>>8;for(X=0;X<5;X++)D[X]=D[X].slice(0),N[X]=N[X].slice(0);return C};let i=null;class r{constructor(D){i||(i=t()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let N,L,P;const X=this._tables[0][4],j=this._tables[1],K=D.length;let z=1;if(K!==4&&K!==6&&K!==8)throw new Error("Invalid aes key size");const J=D.slice(0),R=[];for(this._key=[J,R],N=K;N<4*K+28;N++)P=J[N-1],(N%K===0||K===8&&N%K===4)&&(P=X[P>>>24]<<24^X[P>>16&255]<<16^X[P>>8&255]<<8^X[P&255],N%K===0&&(P=P<<8^P>>>24^z<<24,z=z<<1^(z>>7)*283)),J[N]=J[N-K]^P;for(L=0;N;L++,N--)P=J[L&3?N:N-4],N<=4||L<4?R[L]=P:R[L]=j[0][X[P>>>24]]^j[1][X[P>>16&255]]^j[2][X[P>>8&255]]^j[3][X[P&255]]}decrypt(D,N,L,P,X,j){const K=this._key[1];let z=D^K[0],J=P^K[1],R=L^K[2],F=N^K[3],de,fe,le;const Se=K.length/4-2;let Ee,Ce=4;const re=this._tables[1],te=re[0],ue=re[1],ce=re[2],k=re[3],Y=re[4];for(Ee=0;Ee<Se;Ee++)de=te[z>>>24]^ue[J>>16&255]^ce[R>>8&255]^k[F&255]^K[Ce],fe=te[J>>>24]^ue[R>>16&255]^ce[F>>8&255]^k[z&255]^K[Ce+1],le=te[R>>>24]^ue[F>>16&255]^ce[z>>8&255]^k[J&255]^K[Ce+2],F=te[F>>>24]^ue[z>>16&255]^ce[J>>8&255]^k[R&255]^K[Ce+3],Ce+=4,z=de,J=fe,R=le;for(Ee=0;Ee<4;Ee++)X[(3&-Ee)+j]=Y[z>>>24]<<24^Y[J>>16&255]<<16^Y[R>>8&255]<<8^Y[F&255]^K[Ce++],de=z,z=J,J=R,R=F,F=de}}class s extends n{constructor(){super(n),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(D){this.jobs.push(D),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const o=function(C){return C<<24|(C&65280)<<8|(C&16711680)>>8|C>>>24},u=function(C,D,N){const L=new Int32Array(C.buffer,C.byteOffset,C.byteLength>>2),P=new r(Array.prototype.slice.call(D)),X=new Uint8Array(C.byteLength),j=new Int32Array(X.buffer);let K,z,J,R,F,de,fe,le,Se;for(K=N[0],z=N[1],J=N[2],R=N[3],Se=0;Se<L.length;Se+=4)F=o(L[Se]),de=o(L[Se+1]),fe=o(L[Se+2]),le=o(L[Se+3]),P.decrypt(F,de,fe,le,j,Se),j[Se]=o(j[Se]^K),j[Se+1]=o(j[Se+1]^z),j[Se+2]=o(j[Se+2]^J),j[Se+3]=o(j[Se+3]^R),K=F,z=de,J=fe,R=le;return X};class c{constructor(D,N,L,P){const X=c.STEP,j=new Int32Array(D.buffer),K=new Uint8Array(D.byteLength);let z=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(j.subarray(z,z+X),N,L,K)),z=X;z<j.length;z+=X)L=new Uint32Array([o(j[z-4]),o(j[z-3]),o(j[z-2]),o(j[z-1])]),this.asyncStream_.push(this.decryptChunk_(j.subarray(z,z+X),N,L,K));this.asyncStream_.push(function(){P(null,e(K))})}static get STEP(){return 32e3}decryptChunk_(D,N,L,P){return function(){const X=u(D,N,L);P.set(X,D.byteOffset)}}}var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},f;typeof window<"u"?f=window:typeof h<"u"?f=h:typeof self<"u"?f=self:f={};var m=f,x=function(D){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(D):D&&D.buffer instanceof ArrayBuffer},w=m.BigInt||Number;w("0x1"),w("0x100"),w("0x10000"),w("0x1000000"),w("0x100000000"),w("0x10000000000"),w("0x1000000000000"),w("0x100000000000000"),w("0x10000000000000000"),function(){var C=new Uint16Array([65484]),D=new Uint8Array(C.buffer,C.byteOffset,C.byteLength);return D[0]===255?"big":D[0]===204?"little":"unknown"}();const A=function(C){const D={};return Object.keys(C).forEach(N=>{const L=C[N];x(L)?D[N]={bytes:L.buffer,byteOffset:L.byteOffset,byteLength:L.byteLength}:D[N]=L}),D};self.onmessage=function(C){const D=C.data,N=new Uint8Array(D.encrypted.bytes,D.encrypted.byteOffset,D.encrypted.byteLength),L=new Uint32Array(D.key.bytes,D.key.byteOffset,D.key.byteLength/4),P=new Uint32Array(D.iv.bytes,D.iv.byteOffset,D.iv.byteLength/4);new c(N,L,P,function(X,j){self.postMessage(A({source:D.source,decrypted:j}),[j.buffer])})}}));var Zk=Aw(Jk);const eM=n=>{let e=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},Hw=(n,e)=>{n.abort(),n.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},X0=(n,e)=>{e.activePlaylistLoader=n,n.load()},tM=(n,e)=>()=>{const{segmentLoaders:{[n]:t,main:i},mediaTypes:{[n]:r}}=e,s=r.activeTrack(),o=r.getActiveGroup(),u=r.activePlaylistLoader,c=r.lastGroup_;if(!(o&&c&&o.id===c.id)&&(r.lastGroup_=o,r.lastTrack_=s,Hw(t,r),!(!o||o.isMainPlaylist))){if(!o.playlistLoader){u&&i.resetEverything();return}t.resyncLoader(),X0(o.playlistLoader,r)}},iM=(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:i}}=e;i.lastGroup_=null,t.abort(),t.pause()},nM=(n,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[n]:i,main:r},mediaTypes:{[n]:s}}=e,o=s.activeTrack(),u=s.getActiveGroup(),c=s.activePlaylistLoader,h=s.lastTrack_;if(!(h&&o&&h.id===o.id)&&(s.lastGroup_=u,s.lastTrack_=o,Hw(i,s),!!u)){if(u.isMainPlaylist){if(!o||!h||o.id===h.id)return;const f=e.vhs.playlistController_,m=f.selectPlaylist();if(f.media()===m)return;s.logger_(`track change. Switching main audio from ${h.id} to ${o.id}`),t.pause(),r.resetEverything(),f.fastQualityChange_(m);return}if(n==="AUDIO"){if(!u.playlistLoader){r.setAudio(!0),r.resetEverything();return}i.setAudio(!0),r.setAudio(!1)}if(c===u.playlistLoader){X0(u.playlistLoader,s);return}i.track&&i.track(o),i.resetEverything(),X0(u.playlistLoader,s)}},Jp={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:t},excludePlaylist:i}=e,r=t.activeTrack(),s=t.activeGroup(),o=(s.filter(c=>c.default)[0]||s[0]).id,u=t.tracks[o];if(r===u){i({error:{message:"Problem encountered loading the default audio track."}});return}me.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const c in t.tracks)t.tracks[c].enabled=t.tracks[c]===u;t.onTrackChanged()},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:t}}=e;me.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=t.activeTrack();i&&(i.mode="disabled"),t.onTrackChanged()}},Zb={AUDIO:(n,e,t)=>{if(!e)return;const{tech:i,requestOptions:r,segmentLoaders:{[n]:s}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,r),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),r),i.paused()||s.load()}),e.on("error",Jp[n](n,t))},SUBTITLES:(n,e,t)=>{const{tech:i,requestOptions:r,segmentLoaders:{[n]:s},mediaTypes:{[n]:o}}=t;e.on("loadedmetadata",()=>{const u=e.media();s.playlist(u,r),s.track(o.activeTrack()),(!i.paused()||u.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),r),i.paused()||s.load()}),e.on("error",Jp[n](n,t))}},rM={AUDIO:(n,e)=>{const{vhs:t,sourceType:i,segmentLoaders:{[n]:r},requestOptions:s,main:{mediaGroups:o},mediaTypes:{[n]:{groups:u,tracks:c,logger_:h}},mainPlaylistLoader:f}=e,m=dh(f.main);(!o[n]||Object.keys(o[n]).length===0)&&(o[n]={main:{default:{default:!0}}},m&&(o[n].main.default.playlists=f.main.playlists));for(const x in o[n]){u[x]||(u[x]=[]);for(const w in o[n][x]){let A=o[n][x][w],C;if(m?(h(`AUDIO group '${x}' label '${w}' is a main playlist`),A.isMainPlaylist=!0,C=null):i==="vhs-json"&&A.playlists?C=new Hu(A.playlists[0],t,s):A.resolvedUri?C=new Hu(A.resolvedUri,t,s):A.playlists&&i==="dash"?C=new H0(A.playlists[0],t,s,f):C=null,A=Xt({id:w,playlistLoader:C},A),Zb[n](n,A.playlistLoader,e),u[x].push(A),typeof c[w]>"u"){const D=new me.AudioTrack({id:w,kind:eM(A),enabled:!1,language:A.language,default:A.default,label:w});c[w]=D}}}r.on("error",Jp[n](n,e))},SUBTITLES:(n,e)=>{const{tech:t,vhs:i,sourceType:r,segmentLoaders:{[n]:s},requestOptions:o,main:{mediaGroups:u},mediaTypes:{[n]:{groups:c,tracks:h}},mainPlaylistLoader:f}=e;for(const m in u[n]){c[m]||(c[m]=[]);for(const x in u[n][m]){if(!i.options_.useForcedSubtitles&&u[n][m][x].forced)continue;let w=u[n][m][x],A;if(r==="hls")A=new Hu(w.resolvedUri,i,o);else if(r==="dash"){if(!w.playlists.filter(D=>D.excludeUntil!==1/0).length)return;A=new H0(w.playlists[0],i,o,f)}else r==="vhs-json"&&(A=new Hu(w.playlists?w.playlists[0]:w.resolvedUri,i,o));if(w=Xt({id:x,playlistLoader:A},w),Zb[n](n,w.playlistLoader,e),c[m].push(w),typeof h[x]>"u"){const C=t.addRemoteTextTrack({id:x,kind:"subtitles",default:w.default&&w.autoselect,language:w.language,label:x},!1).track;h[x]=C}}}s.on("error",Jp[n](n,e))},"CLOSED-CAPTIONS":(n,e)=>{const{tech:t,main:{mediaGroups:i},mediaTypes:{[n]:{groups:r,tracks:s}}}=e;for(const o in i[n]){r[o]||(r[o]=[]);for(const u in i[n][o]){const c=i[n][o][u];if(!/^(?:CC|SERVICE)/.test(c.instreamId))continue;const h=t.options_.vhs&&t.options_.vhs.captionServices||{};let f={label:u,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(h[f.instreamId]&&(f=Xt(f,h[f.instreamId])),f.default===void 0&&delete f.default,r[o].push(Xt({id:u},c)),typeof s[u]>"u"){const m=t.addRemoteTextTrack({id:f.instreamId,kind:"captions",default:f.default,language:f.language,label:f.label},!1).track;s[u]=m}}}}},qw=(n,e)=>{for(let t=0;t<n.length;t++)if(o2(e,n[t])||n[t].playlists&&qw(n[t].playlists,e))return!0;return!1},sM=(n,e)=>t=>{const{mainPlaylistLoader:i,mediaTypes:{[n]:{groups:r}}}=e,s=i.media();if(!s)return null;let o=null;s.attributes[n]&&(o=r[s.attributes[n]]);const u=Object.keys(r);if(!o)if(n==="AUDIO"&&u.length>1&&dh(e.main))for(let c=0;c<u.length;c++){const h=r[u[c]];if(qw(h,s)){o=h;break}}else r.main?o=r.main:u.length===1&&(o=r[u[0]]);return typeof t>"u"?o:t===null||!o?null:o.filter(c=>c.id===t.id)[0]||null},aM={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const i in t)if(t[i].enabled)return t[i];return null},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const i in t)if(t[i].mode==="showing"||t[i].mode==="hidden")return t[i];return null}},oM=(n,{mediaTypes:e})=>()=>{const t=e[n].activeTrack();return t?e[n].activeGroup(t):null},lM=n=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(h=>{rM[h](h,n)});const{mediaTypes:e,mainPlaylistLoader:t,tech:i,vhs:r,segmentLoaders:{["AUDIO"]:s,main:o}}=n;["AUDIO","SUBTITLES"].forEach(h=>{e[h].activeGroup=sM(h,n),e[h].activeTrack=aM[h](h,n),e[h].onGroupChanged=tM(h,n),e[h].onGroupChanging=iM(h,n),e[h].onTrackChanged=nM(h,n),e[h].getActiveGroup=oM(h,n)});const u=e.AUDIO.activeGroup();if(u){const h=(u.filter(m=>m.default)[0]||u[0]).id;e.AUDIO.tracks[h].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(h=>e[h].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(h=>e[h].onGroupChanging())});const c=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",c),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",()=>{i.audioTracks().removeEventListener("change",c),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(const h in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[h])},uM=()=>{const n={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ta,activeTrack:Ta,getActiveGroup:Ta,onGroupChanged:Ta,onTrackChanged:Ta,lastTrack_:null,logger_:Ur(`MediaGroups[${e}]`)}}),n};class ex{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=zn(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class cM extends me.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new ex,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Ur("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const i=t.serverUri||t.serverURL;if(!i){this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),this.trigger("error");return}if(i.startsWith("data:")){this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1));return}this.steeringManifest.reloadUri=zn(e,i),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const i=e?t:this.getRequestURI(t);if(!i){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const r={contentSteeringInfo:{uri:i}};this.trigger({type:"contentsteeringloadstart",metadata:r}),this.request_=this.xhr_({uri:i,requestType:"content-steering-manifest"},(s,o)=>{if(s){if(o.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),this.excludedSteeringManifestURLs.add(i);return}if(o.status===429){const h=o.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${h} seconds.`),this.startTTLTimeout_(parseInt(h,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:r});let u;try{u=JSON.parse(this.request_.responseText)}catch(h){const f={errorType:me.Error.StreamingContentSteeringParserError,error:h};this.trigger({type:"error",metadata:f})}this.assignSteeringProperties_(u);const c={contentSteeringInfo:r.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:c}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new W.URL(e),i=new W.URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(e){const t=JSON.parse(W.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new W.URL(e),i=this.getPathway(),r=this.getBandwidth_();if(i){const s=`_${this.manifestType_}_pathway`;t.searchParams.set(s,i)}if(r){const s=`_${this.manifestType_}_throughput`;t.searchParams.set(s,r)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const i=(r=>{for(const s of r)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==i&&(this.currentPathway=i,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=r=>this.excludedSteeringManifestURLs.has(r);if(this.proxyServerUrl_){const r=this.setProxyServerUrl_(e);if(!t(r))return r}const i=this.setSteeringParams_(e);return t(i)?null:i}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=W.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){W.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new ex}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(zn(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const dM=(n,e)=>{let t=null;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{n.apply(null,i)},e)}},hM=10;let ho;const fM=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],pM=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]},gM=function({currentPlaylist:n,buffered:e,currentTime:t,nextPlaylist:i,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:o,bufferBasedABR:u,log:c}){if(!i)return me.log.warn("We received no playlist to switch to. Please check your stream."),!1;const h=`allowing switch ${n&&n.id||"null"} -> ${i.id}`;if(!n)return c(`${h} as current playlist is not set`),!0;if(i.id===n.id)return!1;const f=!!Vu(e,t).length;if(!n.endList)return!f&&typeof n.partTargetDuration=="number"?(c(`not ${h} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(c(`${h} as current playlist is live`),!0);const m=r2(e,t),x=u?Gi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Gi.MAX_BUFFER_LOW_WATER_LINE;if(o<x)return c(`${h} as duration < max low water line (${o} < ${x})`),!0;const w=i.attributes.BANDWIDTH,A=n.attributes.BANDWIDTH;if(w<A&&(!u||m<s)){let C=`${h} as next bandwidth < current bandwidth (${w} < ${A})`;return u&&(C+=` and forwardBuffer < bufferHighWaterLine (${m} < ${s})`),c(C),!0}if((!u||w>A)&&m>=r){let C=`${h} as forwardBuffer >= bufferLowWaterLine (${m} >= ${r})`;return u&&(C+=` and next bandwidth > current bandwidth (${w} > ${A})`),c(C),!0}return c(`not ${h} as no switching criteria met`),!1};class mM extends me.EventTarget{constructor(e){super(),this.fastQualityChange_=dM(this.fastQualityChange_.bind(this),100);const{src:t,withCredentials:i,tech:r,bandwidth:s,externVhs:o,useCueTags:u,playlistExclusionDuration:c,enableLowInitialPlaylist:h,sourceType:f,cacheEncryptionKeys:m,bufferBasedABR:x,leastPixelDiffSelector:w,captionServices:A,experimentalUseMMS:C}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:D}=e;(D===null||typeof D>"u")&&(D=1/0),ho=o,this.bufferBasedABR=!!x,this.leastPixelDiffSelector=!!w,this.withCredentials=i,this.tech_=r,this.vhs_=r.vhs,this.player_=e.player_,this.sourceType_=f,this.useCueTags_=u,this.playlistExclusionDuration=c,this.maxPlaylistRetries=D,this.enableLowInitialPlaylist=h,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:D,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=uM(),C&&W.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new W.ManagedMediaSource,this.usingManagedMediaSource_=!0,me.log("Using ManagedMediaSource")):W.MediaSource&&(this.mediaSource=new W.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=Xi(),this.hasPlayed_=!1,this.syncController_=new Yk(e),this.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new Zk,this.sourceUpdater_=new zw(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new Qk,this.keyStatusMap_=new Map;const N={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:A,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:m,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new H0(t,this.vhs_,Xt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Hu(t,this.vhs_,Xt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new G0(Xt(N,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new G0(Xt(N,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new qk(Xt(N,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((X,j)=>{function K(){r.off("vttjserror",z),X()}function z(){r.off("vttjsloaded",K),j()}r.one("vttjsloaded",K),r.one("vttjserror",z),r.addWebVttScript_()})}),e);const L=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new cM(this.vhs_.xhr,L),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),fM.forEach(X=>{this[X+"_"]=pM.bind(this,X)}),this.logger_=Ur("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const P=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(P,()=>{const X=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-X,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,i){const r=this.media(),s=r&&(r.id||r.uri),o=e&&(e.id||e.uri);if(s&&s!==o){this.logger_(`switch media ${s} -> ${o} from ${t}`);const u={renditionInfo:{id:o,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:u}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],i=t?t.activeGroup():null,r=this.contentSteeringController_.getPathway();if(i&&r){const o=(i.length?i[0].playlists:i.playlists).filter(u=>u.attributes.serviceLocation===r);o.length&&this.mediaTypes_[e].activePlaylistLoader.media(o[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=W.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(W.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const i=e.mediaGroups.AUDIO,r=Object.keys(i);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const u=i.main||r.length&&i[r[0]];for(const c in u)if(u[c].default){s={label:c};break}}if(!s)return t;const o=[];for(const u in i)if(i[u][s.label]){const c=i[u][s.label];if(c.playlists&&c.playlists.length)o.push.apply(o,c.playlists);else if(c.uri)o.push(c);else if(e.playlists.length)for(let h=0;h<e.playlists.length;h++){const f=e.playlists[h];f.attributes&&f.attributes.AUDIO&&f.attributes.AUDIO===u&&o.push(f)}}return o.length?o:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;j0(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),lM({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let i;if(this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;j0(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,i=>{this.player_.trigger(Ii({},i))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const i=e.mediaGroups||{};let r=!0;const s=Object.keys(i.AUDIO);for(const o in i.AUDIO)for(const u in i.AUDIO[o])i.AUDIO[o][u].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),ho.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(i.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),r=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),o=this.tech_.buffered();return gM({buffered:o,currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const i=this.audioSegmentLoader_.pendingSegment_;if(!i||!i.segment||!i.segment.syncInfo)return;const r=i.segment.syncInfo.end+.01;this.tech_.setCurrentTime(r)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:hM}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(i=>{this.mainSegmentLoader_.on(i,r=>{this.player_.trigger(Ii({},r))}),this.audioSegmentLoader_.on(i,r=>{this.player_.trigger(Ii({},r))}),this.subtitleSegmentLoader_.on(i,r=>{this.player_.trigger(Ii({},r))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const i=t.end(0);let r=i;if(e.start){const s=e.start.timeOffset;s<0?r=Math.max(i+s,t.start(0)):r=Math.min(i,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(r)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;const r=ho.Playlist.playlistEnd(e,i),s=this.tech_.currentTime(),o=this.tech_.buffered();if(!o.length)return r-s<=Hs;const u=o.end(o.length-1);return u-s<=Hs&&r-u<=Hs}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const r=this.mainPlaylistLoader_.main.playlists,s=r.filter(wg),o=s.length===1&&s[0]===e;if(r.length===1&&i!==1/0)return me.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(o);if(o){if(this.main().contentSteering){const A=this.pathwayAttribute_(e),C=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(A),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(A)},C);return}let w=!1;r.forEach(A=>{if(A===e)return;const C=A.excludeUntil;typeof C<"u"&&C!==1/0&&(w=!0,delete A.excludeUntil)}),w&&(me.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let u;e.playlistErrors_>this.maxPlaylistRetries?u=1/0:u=Date.now()+i*1e3,e.excludeUntil=u,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const c=this.selectPlaylist();if(!c){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const h=t.internal?this.logger_:me.log.warn,f=t.message?" "+t.message:"";h(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${f} Switching to playlist ${c.id}.`),c.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),c.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const m=c.targetDuration/2*1e3||5*1e3,x=typeof c.lastRequest=="number"&&Date.now()-c.lastRequest<=m;return this.switchMedia_(c,"exclude",o||x)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const i=[],r=e==="all";(r||e==="main")&&i.push(this.mainPlaylistLoader_);const s=[];(r||e==="audio")&&s.push("AUDIO"),(r||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(o=>{const u=this.mediaTypes_[o]&&this.mediaTypes_[o].activePlaylistLoader;u&&i.push(u)}),["main","audio","subtitle"].forEach(o=>{const u=this[`${o}SegmentLoader_`];u&&(e===o||e==="all")&&i.push(u)}),i.forEach(o=>t.forEach(u=>{typeof o[u]=="function"&&o[u]()}))}setCurrentTime(e){const t=Vu(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:ho.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,t){const i=e.media();if(!i)return null;const r=this.syncController_.getMediaSequenceSync(t);if(r&&r.isReliable){const u=r.start,c=r.end;if(!isFinite(u)||!isFinite(c))return null;const h=ho.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i),f=Math.max(u,c-h);return Xi([[u,f]])}const s=this.syncController_.getExpiredTime(i,this.duration());if(s===null)return null;const o=ho.Playlist.seekable(i,s,ho.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i));return o.length?o:null}computeFinalSeekable_(e,t){if(!t)return e;const i=e.start(0),r=e.end(0),s=t.start(0),o=t.end(0);return s>r||i>o?e:Xi([[Math.max(i,s),Math.min(r,o)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let t;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!t))return;const i=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,t),!this.seekable_||i&&i.length&&this.seekable_.length&&i.start(0)===this.seekable_.start(0)&&i.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${tw(this.seekable_)}]`);const r={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:r}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const r=this.seekable();if(!r.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<r.end(r.length-1))&&this.sourceUpdater_.setDuration(r.end(r.length-1));return}const t=this.tech_.buffered();let i=ho.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const i in t)t[i].forEach(r=>{r.playlistLoader&&r.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!i)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const i=Ud(this.main(),t),r={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=i.video||e.main.videoCodec||rI),e.main.isMuxed&&(r.video+=`,${i.audio||e.main.audioCodec||V_}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(r.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||V_,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!r.audio&&!r.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const o=(h,f)=>h?Ld(f,this.usingManagedMediaSource_):Ny(f),u={};let c;if(["video","audio"].forEach(function(h){if(r.hasOwnProperty(h)&&!o(e[h].isFmp4,r[h])){const f=e[h].isFmp4?"browser":"muxer";u[f]=u[f]||[],u[f].push(r[h]),h==="audio"&&(c=f)}}),s&&c&&t.attributes.AUDIO){const h=t.attributes.AUDIO;this.main().playlists.forEach(f=>{(f.attributes&&f.attributes.AUDIO)===h&&f!==t&&(f.excludeUntil=1/0)}),this.logger_(`excluding audio group ${h} as ${c} does not support codec(s): "${r.audio}"`)}if(Object.keys(u).length){const h=Object.keys(u).reduce((f,m)=>(f&&(f+=", "),f+=`${m} does not support codec(s): "${u[m].join(",")}"`,f),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:h},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const h=[];if(["video","audio"].forEach(f=>{const m=(Ms(this.sourceUpdater_.codecs[f]||"")[0]||{}).type,x=(Ms(r[f]||"")[0]||{}).type;m&&x&&m.toLowerCase()!==x.toLowerCase()&&h.push(`"${this.sourceUpdater_.codecs[f]}" -> "${r[f]}"`)}),h.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${h.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return r}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(i=>{const r=e[i];if(t.indexOf(r.id)!==-1)return;t.push(r.id);const s=Ud(this.main,r),o=[];s.audio&&!Ny(s.audio)&&!Ld(s.audio,this.usingManagedMediaSource_)&&o.push(`audio codec ${s.audio}`),s.video&&!Ny(s.video)&&!Ld(s.video,this.usingManagedMediaSource_)&&o.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&o.push(`text codec ${s.text}`),o.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id} for unsupported: ${o.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],i=this.main().playlists,r=Jd(Ms(e)),s=Nb(r),o=r.video&&Ms(r.video)[0]||null,u=r.audio&&Ms(r.audio)[0]||null;Object.keys(i).forEach(c=>{const h=i[c];if(t.indexOf(h.id)!==-1||h.excludeUntil===1/0)return;t.push(h.id);const f=[],m=Ud(this.mainPlaylistLoader_.main,h),x=Nb(m);if(!(!m.audio&&!m.video)){if(x!==s&&f.push(`codec count "${x}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const w=m.video&&Ms(m.video)[0]||null,A=m.audio&&Ms(m.audio)[0]||null;w&&o&&w.type.toLowerCase()!==o.type.toLowerCase()&&f.push(`video codec "${w.type}" !== "${o.type}"`),A&&u&&A.type.toLowerCase()!==u.type.toLowerCase()&&f.push(`audio codec "${A.type}" !== "${u.type}"`)}f.length&&(h.excludeUntil=1/0,this.logger_(`excluding ${h.id}: ${f.join(" && ")}`))}})}updateAdCues_(e){let t=0;const i=this.seekable();i.length&&(t=i.start(0)),Gk(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Gi.GOAL_BUFFER_LENGTH,i=Gi.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,Gi.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,r)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Gi.BUFFER_LOW_WATER_LINE,i=Gi.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,Gi.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Gi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.bufferBasedABR?s:r)}bufferHighWaterLine(){return Gi.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){Hb(this.inbandTextTracks_,"com.apple.streaming",this.tech_),Ek({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,i){const r=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();Hb(this.inbandTextTracks_,e,this.tech_),Tk({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:i})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,i=>{this.trigger(Ii({},i))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),o=[];for(const u of t.playlists){const c=u.attributes.serviceLocation;if(c&&(o.push(c),!s.has(c)))return!0}return!!(!o.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const i=this.main().playlists,r=new Set;let s=!1;Object.keys(i).forEach(o=>{const u=i[o],c=this.pathwayAttribute_(u),h=c&&e!==c;u.excludeUntil===1/0&&u.lastExcludeReason_==="content-steering"&&!h&&(delete u.excludeUntil,delete u.lastExcludeReason_,s=!0);const m=!u.excludeUntil&&u.excludeUntil!==1/0;!r.has(u.id)&&h&&m&&(r.add(u.id),u.excludeUntil=1/0,u.lastExcludeReason_="content-steering",this.logger_(`excluding ${u.id} for ${u.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(o=>{const u=this.mediaTypes_[o];if(u.activePlaylistLoader){const c=u.activePlaylistLoader.media_;c&&c.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,i=this.contentSteeringController_.currentPathwayClones,r=this.contentSteeringController_.nextPathwayClones;if(i&&i.size||r&&r.size){for(const[o,u]of i.entries())r.get(o)||(this.mainPlaylistLoader_.updateOrDeleteClone(u),this.contentSteeringController_.excludePathway(o));for(const[o,u]of r.entries()){const c=i.get(o);if(!c){t.filter(f=>f.attributes["PATHWAY-ID"]===u["BASE-ID"]).forEach(f=>{this.mainPlaylistLoader_.addClonePathway(u,f)}),this.contentSteeringController_.addAvailablePathway(o);continue}this.equalPathwayClones_(c,u)||(this.mainPlaylistLoader_.updateOrDeleteClone(u,!0),this.contentSteeringController_.addAvailablePathway(o))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...r])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const i=e["URI-REPLACEMENT"].PARAMS,r=t["URI-REPLACEMENT"].PARAMS;for(const s in i)if(i[s]!==r[s])return!1;for(const s in r)if(i[s]!==r[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{const r=this.mainPlaylistLoader_.getKeyIdSet(i);!r||!r.size||r.forEach(s=>{const o="usable",u=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===o,c=i.lastExcludeReason_===t&&i.excludeUntil===1/0;u?u&&c&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${s} is ${o}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==t&&(i.excludeUntil=1/0,i.lastExcludeReason_=t,this.logger_(`excluding playlist ${i.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${o}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const r=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,s=i.excludeUntil===1/0&&i.lastExcludeReason_===t;r&&s&&(delete i.excludeUntil,me.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=(typeof e=="string"?e:Vk(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const yM=(n,e,t)=>i=>{const r=n.main.playlists[e],s=a2(r),o=wg(r);if(typeof i>"u")return o;i?delete r.disabled:r.disabled=!0;const u={renditionInfo:{id:e,bandwidth:r.attributes.BANDWIDTH,resolution:r.attributes.RESOLUTION,codecs:r.attributes.CODECS},cause:"fast-quality"};return i!==o&&!s&&(i?(t(r),n.trigger({type:"renditionenabled",metadata:u})):n.trigger({type:"renditiondisabled",metadata:u})),i};class vM{constructor(e,t,i){const{playlistController_:r}=e,s=r.fastQualityChange_.bind(r);if(t.attributes){const o=t.attributes.RESOLUTION;this.width=o&&o.width,this.height=o&&o.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Ud(r.main(),t),this.playlist=t,this.id=i,this.enabled=yM(e.playlists,t.id,s)}}const _M=function(n){n.representations=()=>{const e=n.playlistController_.main(),t=dh(e)?n.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(i=>!a2(i)).map((i,r)=>new vM(n,i,i.id)):[]}},tx=["seeking","seeked","pause","playing","error"];class bM extends me.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ur("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),r=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),o=this.playlistController_,u=["main","subtitle","audio"],c={};u.forEach(f=>{c[f]={reset:()=>this.resetSegmentDownloads_(f),updateend:()=>this.checkSegmentDownloads_(f)},o[`${f}SegmentLoader_`].on("appendsdone",c[f].updateend),o[`${f}SegmentLoader_`].on("playlistupdate",c[f].reset),this.tech_.on(["seeked","seeking"],c[f].reset)});const h=f=>{["main","audio"].forEach(m=>{o[`${m}SegmentLoader_`][f]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=()=>h("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(tx,s),this.tech_.on("canplay",i),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",r),this.tech_.off(tx,s),this.tech_.off("canplay",i),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),u.forEach(f=>{o[`${f}SegmentLoader_`].off("appendsdone",c[f].updateend),o[`${f}SegmentLoader_`].off("playlistupdate",c[f].reset),this.tech_.off(["seeked","seeking"],c[f].reset)}),this.checkCurrentTimeTimeout_&&W.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&W.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=W.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,i=t[`${e}SegmentLoader_`],r=i.buffered_(),s=s6(this[`${e}Buffered_`],r);if(this[`${e}Buffered_`]=r,s){const o={bufferedRanges:r};t.trigger({type:"bufferedrangeschanged",metadata:o}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:Cl(r)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Hs>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(Xi([this.lastRecordedTime,e]));const i={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),i=this.tech_.currentTime(),r=this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(r&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){const A=t.start(0);s=A+(A===t.end(0)?0:Hs)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${tw(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const o=this.playlistController_.sourceUpdater_,u=this.tech_.buffered(),c=o.audioBuffer?o.audioBuffered():null,h=o.videoBuffer?o.videoBuffered():null,f=this.media(),m=f.partTargetDuration?f.partTargetDuration:(f.targetDuration-Vs)*2,x=[c,h];for(let A=0;A<x.length;A++){if(!x[A])continue;if(r2(x[A],i)<m)return!1}const w=Vf(u,i);return w.length===0?!1:(s=w.start(0)+Hs,this.logger_(`Buffered region starts (${w.start(0)})  just beyond seek point (${i}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),i=Vu(t,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const u=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${u}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(u),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const o=Vf(r,t);return o.length>0?(this.logger_(`Stopped at ${t} and seeking to ${o.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,i,r=!1){if(!e.length)return!1;let s=e.end(e.length-1)+Hs;const o=!i.endList,u=typeof i.partTargetDuration=="number";return o&&(u||r)&&(s=e.end(e.length-1)+i.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:i}){if(!e)return;let r;if(e.length&&t.length){const s=Vu(e,i-3),o=Vu(e,i),u=Vu(t,i);u.length&&!o.length&&s.length&&(r={start:s.end(0),end:u.end(0)})}else Vf(e,i).length||(r=this.gapFromVideoUnderflow_(e,i));return r?(this.logger_(`Encountered a gap in video from ${r.start} to ${r.end}. Seeking to current time ${i}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),i=this.tech_.currentTime(),r=Vf(t,i);if(this.resetTimeUpdate_(),r.length===0||i!==e)return;this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+Vs);const s={gapInfo:{from:i,to:r.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const i=i6(e);for(let r=0;r<i.length;r++){const s=i.start(r),o=i.end(r);if(t-s<4&&t-s>2)return{start:s,end:o}}return null}}const xM={errorInterval:30,getSource(n){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return n(t)}},Ww=function(n,e){let t=0,i=0;const r=Xt(xM,e);n.ready(()=>{n.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){i&&n.currentTime(i)},o=function(f){f!=null&&(i=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",s),n.src(f),n.trigger({type:"usage",name:"vhs-error-reload"}),n.play())},u=function(){if(Date.now()-t<r.errorInterval*1e3){n.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!r.getSource||typeof r.getSource!="function"){me.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),r.getSource.call(n,o)},c=function(){n.off("loadedmetadata",s),n.off("error",u),n.off("dispose",c)},h=function(f){c(),Ww(n,f)};n.on("error",u),n.on("dispose",c),n.reloadSourceOnError=h},SM=function(n){Ww(this,n)};var Gw="3.17.0",TM="7.1.0",CM="1.3.1",wM="7.2.0",EM="4.0.2";const Ti={PlaylistLoader:Hu,Playlist:Vn,utils:M6,STANDARD_PLAYLIST_SELECTOR:Vb,INITIAL_PLAYLIST_SELECTOR:vk,lastBandwidthSelector:Vb,movingAverageBandwidthSelector:mk,comparePlaylistBandwidth:u2,comparePlaylistResolution:gk,xhr:bw()};Object.keys(Gi).forEach(n=>{Object.defineProperty(Ti,n,{get(){return me.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),Gi[n]},set(e){if(me.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){me.log.warn(`value of Vhs.${n} must be greater than or equal to 0`);return}Gi[n]=e}})});const Kw="videojs-vhs",Xw=function(n,e){const t=e.media();let i=-1;for(let r=0;r<n.length;r++)if(n[r].id===t.id){i=r;break}n.selectedIndex_=i,n.trigger({selectedIndex:i,type:"change"})},AM=function(n,e){e.representations().forEach(t=>{n.addQualityLevel(t)}),Xw(n,e.playlists)};Ti.canPlaySource=function(){return me.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const DM=(n,e,t)=>{if(!n)return n;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=Jd(Ms(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(i.audio=t.attributes.CODECS);const r=pc(i.video),s=pc(i.audio),o={};for(const u in n)o[u]={},s&&(o[u].audioContentType=s),r&&(o[u].videoContentType=r),e.contentProtection&&e.contentProtection[u]&&e.contentProtection[u].pssh&&(o[u].pssh=e.contentProtection[u].pssh),typeof n[u]=="string"&&(o[u].url=n[u]);return Xt(n,o)},IM=(n,e)=>n.reduce((t,i)=>{if(!i.contentProtection)return t;const r=e.reduce((s,o)=>{const u=i.contentProtection[o];return u&&u.pssh&&(s[o]={pssh:u.pssh}),s},{});return Object.keys(r).length&&t.push(r),t},[]),kM=({player:n,sourceKeySystems:e,audioMedia:t,mainPlaylists:i})=>{if(!n.eme.initializeMediaKeys)return Promise.resolve();const r=t?i.concat([t]):i,s=IM(r,Object.keys(e)),o=[],u=[];return s.forEach(c=>{u.push(new Promise((h,f)=>{n.tech_.one("keysessioncreated",h)})),o.push(new Promise((h,f)=>{n.eme.initializeMediaKeys({keySystems:c},m=>{if(m){f(m);return}h()})}))}),Promise.race([Promise.all(o),Promise.race(u)])},MM=({player:n,sourceKeySystems:e,media:t,audioMedia:i})=>{const r=DM(e,t,i);return r?(n.currentSource().keySystems=r,r&&!n.eme?(me.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},Yw=()=>{if(!W.localStorage)return null;const n=W.localStorage.getItem(Kw);if(!n)return null;try{return JSON.parse(n)}catch{return null}},PM=n=>{if(!W.localStorage)return!1;let e=Yw();e=e?Xt(e,n):n;try{W.localStorage.setItem(Kw,JSON.stringify(e))}catch{return!1}return e},OM=n=>n.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(n.substring(n.indexOf(",")+1)):n,Qw=(n,e)=>{n._requestCallbackSet||(n._requestCallbackSet=new Set),n._requestCallbackSet.add(e)},Jw=(n,e)=>{n._responseCallbackSet||(n._responseCallbackSet=new Set),n._responseCallbackSet.add(e)},Zw=(n,e)=>{n._requestCallbackSet&&(n._requestCallbackSet.delete(e),n._requestCallbackSet.size||delete n._requestCallbackSet)},eE=(n,e)=>{n._responseCallbackSet&&(n._responseCallbackSet.delete(e),n._responseCallbackSet.size||delete n._responseCallbackSet)};Ti.supportsNativeHls=function(){if(!Ne||!Ne.createElement)return!1;const n=Ne.createElement("video");return me.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(n.canPlayType(t))}):!1}();Ti.supportsNativeDash=function(){return!Ne||!Ne.createElement||!me.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Ne.createElement("video").canPlayType("application/dash+xml"))}();Ti.supportsTypeNatively=n=>n==="hls"?Ti.supportsNativeHls:n==="dash"?Ti.supportsNativeDash:!1;Ti.isSupported=function(){return me.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Ti.xhr.onRequest=function(n){Qw(Ti.xhr,n)};Ti.xhr.onResponse=function(n){Jw(Ti.xhr,n)};Ti.xhr.offRequest=function(n){Zw(Ti.xhr,n)};Ti.xhr.offResponse=function(n){eE(Ti.xhr,n)};const RM=me.getComponent("Component");class tE extends RM{constructor(e,t,i){if(super(t,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=Ur("VhsHandler"),t.options_&&t.options_.playerId){const r=me.getPlayer(t.options_.playerId);this.player_=r}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Ne,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],r=>{const s=Ne.fullscreenElement||Ne.webkitFullscreenElement||Ne.mozFullScreenElement||Ne.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Xt(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const i=Yw();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Gi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Gi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{typeof this.source_[i]<"u"&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=OM(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ti,this.options_.sourceType=ST(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new mM(this.options_);const i=Xt({liveRangeSafeTimeDelta:Hs},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new bM(i),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=me.players[this.tech_.options_.playerId];let o=this.playlistController_.error;typeof o=="object"&&!o.code?o.code=3:typeof o=="string"&&(o={message:o,code:3}),s.error(o)});const r=this.options_.bufferBasedABR?Ti.movingAverageBandwidthSelector(.55):Ti.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=Ti.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const o=W.navigator.connection||W.navigator.mozConnection||W.navigator.webkitConnection,u=1e7;if(this.options_.useNetworkInformationApi&&o){const c=o.downlink*1e3*1e3;c>=u&&s>=u?s=Math.max(s,c):s=c}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let o;return this.throughput>0?o=1/this.throughput:o=0,Math.floor(1/(s+o))},set(){me.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>Cl(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>Cl(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&PM({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{_M(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=W.URL.createObjectURL(this.playlistController_.mediaSource),(me.browser.IS_ANY_SAFARI||me.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),kM({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=MM({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=me.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{AM(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Xw(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":Gw,"mux.js":TM,"mpd-parser":CM,"m3u8-parser":wM,"aes-decrypter":EM}}version(){return this.constructor.version()}canChangeType(){return zw.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&W.URL.revokeObjectURL&&(W.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return B6({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,i=!0,r=2){return ww({programTime:e,playlist:this.playlistController_.media(),retryCount:r,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{Qw(this.xhr,e)},this.xhr.onResponse=e=>{Jw(this.xhr,e)},this.xhr.offRequest=e=>{Zw(this.xhr,e)},this.xhr.offResponse=e=>{eE(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(i=>{this.playlistController_.on(i,r=>{this.player_.trigger(Ii({},r))})}),t.forEach(i=>{this.playbackWatcher_.on(i,r=>{this.player_.trigger(Ii({},r))})})}}const Zp={name:"videojs-http-streaming",VERSION:Gw,canHandleSource(n,e={}){const t=Xt(me.options,e);return!t.vhs.experimentalUseMMS&&!Ld("avc1.4d400d,mp4a.40.2",!1)?!1:Zp.canPlayType(n.type,t)},handleSource(n,e,t={}){const i=Xt(me.options,t);return e.vhs=new tE(n,e,i),e.vhs.xhr=bw(),e.vhs.setupXhrHooks_(),e.vhs.src(n.src,n.type),e.vhs},canPlayType(n,e){const t=ST(n);if(!t)return"";const i=Zp.getOverrideNative(e);return!Ti.supportsTypeNatively(t)||i?"maybe":""},getOverrideNative(n={}){const{vhs:e={}}=n,t=!(me.browser.IS_ANY_SAFARI||me.browser.IS_IOS),{overrideNative:i=t}=e;return i}},LM=()=>Ld("avc1.4d400d,mp4a.40.2",!0);LM()&&me.getTech("Html5").registerSourceHandler(Zp,0);me.VhsHandler=tE;me.VhsSourceHandler=Zp;me.Vhs=Ti;me.use||me.registerComponent("Vhs",Ti);me.options.vhs=me.options.vhs||{};(!me.getPlugin||!me.getPlugin("reloadSourceOnError"))&&me.registerPlugin("reloadSourceOnError",SM);var cl={},ur={},ga={},n0={exports:{}},ix;function Eg(){return ix||(ix=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(c,h,f){this.fn=c,this.context=h,this.once=f||!1}function s(c,h,f,m,x){if(typeof f!="function")throw new TypeError("The listener must be a function");var w=new r(f,m||c,x),A=t?t+h:h;return c._events[A]?c._events[A].fn?c._events[A]=[c._events[A],w]:c._events[A].push(w):(c._events[A]=w,c._eventsCount++),c}function o(c,h){--c._eventsCount===0?c._events=new i:delete c._events[h]}function u(){this._events=new i,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],f,m;if(this._eventsCount===0)return h;for(m in f=this._events)e.call(f,m)&&h.push(t?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},u.prototype.listeners=function(h){var f=t?t+h:h,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var x=0,w=m.length,A=new Array(w);x<w;x++)A[x]=m[x].fn;return A},u.prototype.listenerCount=function(h){var f=t?t+h:h,m=this._events[f];return m?m.fn?1:m.length:0},u.prototype.emit=function(h,f,m,x,w,A){var C=t?t+h:h;if(!this._events[C])return!1;var D=this._events[C],N=arguments.length,L,P;if(D.fn){switch(D.once&&this.removeListener(h,D.fn,void 0,!0),N){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,f),!0;case 3:return D.fn.call(D.context,f,m),!0;case 4:return D.fn.call(D.context,f,m,x),!0;case 5:return D.fn.call(D.context,f,m,x,w),!0;case 6:return D.fn.call(D.context,f,m,x,w,A),!0}for(P=1,L=new Array(N-1);P<N;P++)L[P-1]=arguments[P];D.fn.apply(D.context,L)}else{var X=D.length,j;for(P=0;P<X;P++)switch(D[P].once&&this.removeListener(h,D[P].fn,void 0,!0),N){case 1:D[P].fn.call(D[P].context);break;case 2:D[P].fn.call(D[P].context,f);break;case 3:D[P].fn.call(D[P].context,f,m);break;case 4:D[P].fn.call(D[P].context,f,m,x);break;default:if(!L)for(j=1,L=new Array(N-1);j<N;j++)L[j-1]=arguments[j];D[P].fn.apply(D[P].context,L)}}return!0},u.prototype.on=function(h,f,m){return s(this,h,f,m,!1)},u.prototype.once=function(h,f,m){return s(this,h,f,m,!0)},u.prototype.removeListener=function(h,f,m,x){var w=t?t+h:h;if(!this._events[w])return this;if(!f)return o(this,w),this;var A=this._events[w];if(A.fn)A.fn===f&&(!x||A.once)&&(!m||A.context===m)&&o(this,w);else{for(var C=0,D=[],N=A.length;C<N;C++)(A[C].fn!==f||x&&!A[C].once||m&&A[C].context!==m)&&D.push(A[C]);D.length?this._events[w]=D.length===1?D[0]:D:o(this,w)}return this},u.prototype.removeAllListeners=function(h){var f;return h?(f=t?t+h:h,this._events[f]&&o(this,f)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=t,u.EventEmitter=u,n.exports=u}(n0)),n0.exports}var nx;function iE(){if(nx)return ga;nx=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */Object.defineProperty(ga,"__esModule",{value:!0}),ga.ButtplugLogger=ga.LogMessage=ga.ButtplugLogLevel=void 0;const n=Eg();var e;(function(r){r[r.Off=0]="Off",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Info=3]="Info",r[r.Debug=4]="Debug",r[r.Trace=5]="Trace"})(e||(ga.ButtplugLogLevel=e={}));class t{constructor(s,o){const u=new Date,c=u.getHours(),h=u.getMinutes(),f=u.getSeconds();this.timestamp=`${c}:${h}:${f}`,this.logMessage=s,this.logLevel=o}get Message(){return this.logMessage}get LogLevel(){return this.logLevel}get Timestamp(){return this.timestamp}get FormattedMessage(){return`${e[this.logLevel]} : ${this.timestamp} : ${this.logMessage}`}}ga.LogMessage=t;class i extends n.EventEmitter{static get Logger(){return i.sLogger===void 0&&(i.sLogger=new i),this.sLogger}constructor(){super(),this.maximumConsoleLogLevel=e.Off,this.maximumEventLogLevel=e.Off}get MaximumConsoleLogLevel(){return this.maximumConsoleLogLevel}set MaximumConsoleLogLevel(s){this.maximumConsoleLogLevel=s}get MaximumEventLogLevel(){return this.maximumEventLogLevel}set MaximumEventLogLevel(s){this.maximumEventLogLevel=s}Error(s){this.AddLogMessage(s,e.Error)}Warn(s){this.AddLogMessage(s,e.Warn)}Info(s){this.AddLogMessage(s,e.Info)}Debug(s){this.AddLogMessage(s,e.Debug)}Trace(s){this.AddLogMessage(s,e.Trace)}AddLogMessage(s,o){if(o>this.maximumEventLogLevel&&o>this.maximumConsoleLogLevel)return;const u=new t(s,o);o<=this.maximumConsoleLogLevel&&console.log(u.FormattedMessage),o<=this.maximumEventLogLevel&&this.emit("log",u)}}return ga.ButtplugLogger=i,i.sLogger=void 0,ga}var cr={},dl={},Et;(function(n){n[n.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",n[n.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",n[n.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(Et||(Et={}));var NM=function(){function n(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return n.prototype.addTypeMetadata=function(e){this._typeMetadatas.has(e.target)||this._typeMetadatas.set(e.target,new Map),this._typeMetadatas.get(e.target).set(e.propertyName,e)},n.prototype.addTransformMetadata=function(e){this._transformMetadatas.has(e.target)||this._transformMetadatas.set(e.target,new Map),this._transformMetadatas.get(e.target).has(e.propertyName)||this._transformMetadatas.get(e.target).set(e.propertyName,[]),this._transformMetadatas.get(e.target).get(e.propertyName).push(e)},n.prototype.addExposeMetadata=function(e){this._exposeMetadatas.has(e.target)||this._exposeMetadatas.set(e.target,new Map),this._exposeMetadatas.get(e.target).set(e.propertyName,e)},n.prototype.addExcludeMetadata=function(e){this._excludeMetadatas.has(e.target)||this._excludeMetadatas.set(e.target,new Map),this._excludeMetadatas.get(e.target).set(e.propertyName,e)},n.prototype.findTransformMetadatas=function(e,t,i){return this.findMetadatas(this._transformMetadatas,e,t).filter(function(r){return!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?i===Et.CLASS_TO_CLASS||i===Et.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?i===Et.CLASS_TO_PLAIN:!0})},n.prototype.findExcludeMetadata=function(e,t){return this.findMetadata(this._excludeMetadatas,e,t)},n.prototype.findExposeMetadata=function(e,t){return this.findMetadata(this._exposeMetadatas,e,t)},n.prototype.findExposeMetadataByCustomName=function(e,t){return this.getExposedMetadatas(e).find(function(i){return i.options&&i.options.name===t})},n.prototype.findTypeMetadata=function(e,t){return this.findMetadata(this._typeMetadatas,e,t)},n.prototype.getStrategy=function(e){var t=this._excludeMetadatas.get(e),i=t&&t.get(void 0),r=this._exposeMetadatas.get(e),s=r&&r.get(void 0);return i&&s||!i&&!s?"none":i?"excludeAll":"exposeAll"},n.prototype.getExposedMetadatas=function(e){return this.getMetadata(this._exposeMetadatas,e)},n.prototype.getExcludedMetadatas=function(e){return this.getMetadata(this._excludeMetadatas,e)},n.prototype.getExposedProperties=function(e,t){return this.getExposedMetadatas(e).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?t===Et.CLASS_TO_CLASS||t===Et.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?t===Et.CLASS_TO_PLAIN:!0}).map(function(i){return i.propertyName})},n.prototype.getExcludedProperties=function(e,t){return this.getExcludedMetadatas(e).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?t===Et.CLASS_TO_CLASS||t===Et.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?t===Et.CLASS_TO_PLAIN:!0}).map(function(i){return i.propertyName})},n.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},n.prototype.getMetadata=function(e,t){var i=e.get(t),r;i&&(r=Array.from(i.values()).filter(function(m){return m.propertyName!==void 0}));for(var s=[],o=0,u=this.getAncestors(t);o<u.length;o++){var c=u[o],h=e.get(c);if(h){var f=Array.from(h.values()).filter(function(m){return m.propertyName!==void 0});s.push.apply(s,f)}}return s.concat(r||[])},n.prototype.findMetadata=function(e,t,i){var r=e.get(t);if(r){var s=r.get(i);if(s)return s}for(var o=0,u=this.getAncestors(t);o<u.length;o++){var c=u[o],h=e.get(c);if(h){var f=h.get(i);if(f)return f}}},n.prototype.findMetadatas=function(e,t,i){var r=e.get(t),s;r&&(s=r.get(i));for(var o=[],u=0,c=this.getAncestors(t);u<c.length;u++){var h=c[u],f=e.get(h);f&&f.has(i)&&o.push.apply(o,f.get(i))}return o.slice().reverse().concat((s||[]).slice().reverse())},n.prototype.getAncestors=function(e){if(!e)return[];if(!this._ancestorsMap.has(e)){for(var t=[],i=Object.getPrototypeOf(e.prototype.constructor);typeof i.prototype<"u";i=Object.getPrototypeOf(i.prototype.constructor))t.push(i);this._ancestorsMap.set(e,t)}return this._ancestorsMap.get(e)},n}(),Wi=new NM;function FM(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function BM(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var rx=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))};function jM(n){var e=new n;return!(e instanceof Set)&&!("push"in e)?[]:e}var Mu=function(){function n(e,t){this.transformationType=e,this.options=t,this.recursionStack=new Set}return n.prototype.transform=function(e,t,i,r,s,o){var u=this;if(o===void 0&&(o=0),Array.isArray(t)||t instanceof Set){var c=r&&this.transformationType===Et.PLAIN_TO_CLASS?jM(r):[];return t.forEach(function(D,N){var L=e?e[N]:void 0;if(!u.options.enableCircularCheck||!u.isCircular(D)){var P=void 0;if(typeof i!="function"&&i&&i.options&&i.options.discriminator&&i.options.discriminator.property&&i.options.discriminator.subTypes){if(u.transformationType===Et.PLAIN_TO_CLASS){P=i.options.discriminator.subTypes.find(function(z){return z.name===D[i.options.discriminator.property]});var X={newObject:c,object:D,property:void 0},j=i.typeFunction(X);P===void 0?P=j:P=P.value,i.options.keepDiscriminatorProperty||delete D[i.options.discriminator.property]}u.transformationType===Et.CLASS_TO_CLASS&&(P=D.constructor),u.transformationType===Et.CLASS_TO_PLAIN&&(D[i.options.discriminator.property]=i.options.discriminator.subTypes.find(function(z){return z.value===D.constructor}).name)}else P=i;var K=u.transform(L,D,P,void 0,D instanceof Map,o+1);c instanceof Set?c.add(K):c.push(K)}else u.transformationType===Et.CLASS_TO_CLASS&&(c instanceof Set?c.add(D):c.push(D))}),c}else{if(i===String&&!s)return t==null?t:String(t);if(i===Number&&!s)return t==null?t:Number(t);if(i===Boolean&&!s)return t==null?t:!!t;if((i===Date||t instanceof Date)&&!s)return t instanceof Date?new Date(t.valueOf()):t==null?t:new Date(t);if(FM().Buffer&&(i===Buffer||t instanceof Buffer)&&!s)return t==null?t:Buffer.from(t);if(BM(t)&&!s)return new Promise(function(D,N){t.then(function(L){return D(u.transform(void 0,L,i,void 0,void 0,o+1))},N)});if(!s&&t!==null&&typeof t=="object"&&typeof t.then=="function")return t;if(typeof t=="object"&&t!==null){!i&&t.constructor!==Object&&(!Array.isArray(t)&&t.constructor===Array||(i=t.constructor)),!i&&e&&(i=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(t);var h=this.getKeys(i,t,s),f=e||{};!e&&(this.transformationType===Et.PLAIN_TO_CLASS||this.transformationType===Et.CLASS_TO_CLASS)&&(s?f=new Map:i?f=new i:f={});for(var m=function(D){if(D==="__proto__"||D==="constructor")return"continue";var N=D,L=D,P=D;if(!x.options.ignoreDecorators&&i){if(x.transformationType===Et.PLAIN_TO_CLASS){var X=Wi.findExposeMetadataByCustomName(i,D);X&&(P=X.propertyName,L=X.propertyName)}else if(x.transformationType===Et.CLASS_TO_PLAIN||x.transformationType===Et.CLASS_TO_CLASS){var X=Wi.findExposeMetadata(i,D);X&&X.options&&X.options.name&&(L=X.options.name)}}var j=void 0;x.transformationType===Et.PLAIN_TO_CLASS?j=t[N]:t instanceof Map?j=t.get(N):t[N]instanceof Function?j=t[N]():j=t[N];var K=void 0,z=j instanceof Map;if(i&&s)K=i;else if(i){var J=Wi.findTypeMetadata(i,P);if(J){var R={newObject:f,object:t,property:P},F=J.typeFunction?J.typeFunction(R):J.reflectedType;J.options&&J.options.discriminator&&J.options.discriminator.property&&J.options.discriminator.subTypes?t[N]instanceof Array?K=J:(x.transformationType===Et.PLAIN_TO_CLASS&&(K=J.options.discriminator.subTypes.find(function(re){if(j&&j instanceof Object&&J.options.discriminator.property in j)return re.name===j[J.options.discriminator.property]}),K===void 0?K=F:K=K.value,J.options.keepDiscriminatorProperty||j&&j instanceof Object&&J.options.discriminator.property in j&&delete j[J.options.discriminator.property]),x.transformationType===Et.CLASS_TO_CLASS&&(K=j.constructor),x.transformationType===Et.CLASS_TO_PLAIN&&j&&(j[J.options.discriminator.property]=J.options.discriminator.subTypes.find(function(re){return re.value===j.constructor}).name)):K=F,z=z||J.reflectedType===Map}else if(x.options.targetMaps)x.options.targetMaps.filter(function(re){return re.target===i&&!!re.properties[P]}).forEach(function(re){return K=re.properties[P]});else if(x.options.enableImplicitConversion&&x.transformationType===Et.PLAIN_TO_CLASS){var de=Reflect.getMetadata("design:type",i.prototype,P);de&&(K=de)}}var fe=Array.isArray(t[N])?x.getReflectedType(i,P):void 0,le=e?e[N]:void 0;if(f.constructor.prototype){var Se=Object.getOwnPropertyDescriptor(f.constructor.prototype,L);if((x.transformationType===Et.PLAIN_TO_CLASS||x.transformationType===Et.CLASS_TO_CLASS)&&(Se&&!Se.set||f[L]instanceof Function))return"continue"}if(!x.options.enableCircularCheck||!x.isCircular(j)){var Ee=x.transformationType===Et.PLAIN_TO_CLASS?L:D,Ce=void 0;x.transformationType===Et.CLASS_TO_PLAIN?(Ce=t[Ee],Ce=x.applyCustomTransformations(Ce,i,Ee,t,x.transformationType),Ce=t[Ee]===Ce?j:Ce,Ce=x.transform(le,Ce,K,fe,z,o+1)):j===void 0&&x.options.exposeDefaultValues?Ce=f[L]:(Ce=x.transform(le,j,K,fe,z,o+1),Ce=x.applyCustomTransformations(Ce,i,Ee,t,x.transformationType)),(Ce!==void 0||x.options.exposeUnsetFields)&&(f instanceof Map?f.set(L,Ce):f[L]=Ce)}else if(x.transformationType===Et.CLASS_TO_CLASS){var Ce=j;Ce=x.applyCustomTransformations(Ce,i,D,t,x.transformationType),(Ce!==void 0||x.options.exposeUnsetFields)&&(f instanceof Map?f.set(L,Ce):f[L]=Ce)}},x=this,w=0,A=h;w<A.length;w++){var C=A[w];m(C)}return this.options.enableCircularCheck&&this.recursionStack.delete(t),f}else return t}},n.prototype.applyCustomTransformations=function(e,t,i,r,s){var o=this,u=Wi.findTransformMetadatas(t,i,this.transformationType);return this.options.version!==void 0&&(u=u.filter(function(c){return c.options?o.checkVersion(c.options.since,c.options.until):!0})),this.options.groups&&this.options.groups.length?u=u.filter(function(c){return c.options?o.checkGroups(c.options.groups):!0}):u=u.filter(function(c){return!c.options||!c.options.groups||!c.options.groups.length}),u.forEach(function(c){e=c.transformFn({value:e,key:i,obj:r,type:s,options:o.options})}),e},n.prototype.isCircular=function(e){return this.recursionStack.has(e)},n.prototype.getReflectedType=function(e,t){if(e){var i=Wi.findTypeMetadata(e,t);return i?i.reflectedType:void 0}},n.prototype.getKeys=function(e,t,i){var r=this,s=Wi.getStrategy(e);s==="none"&&(s=this.options.strategy||"exposeAll");var o=[];if((s==="exposeAll"||i)&&(t instanceof Map?o=Array.from(t.keys()):o=Object.keys(t)),i)return o;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&e){var u=Wi.getExposedProperties(e,this.transformationType),c=Wi.getExcludedProperties(e,this.transformationType);o=rx(rx([],u,!0),c,!0)}if(!this.options.ignoreDecorators&&e){var u=Wi.getExposedProperties(e,this.transformationType);this.transformationType===Et.PLAIN_TO_CLASS&&(u=u.map(function(m){var x=Wi.findExposeMetadata(e,m);return x&&x.options&&x.options.name?x.options.name:m})),this.options.excludeExtraneousValues?o=u:o=o.concat(u);var h=Wi.getExcludedProperties(e,this.transformationType);h.length>0&&(o=o.filter(function(m){return!h.includes(m)})),this.options.version!==void 0&&(o=o.filter(function(m){var x=Wi.findExposeMetadata(e,m);return!x||!x.options?!0:r.checkVersion(x.options.since,x.options.until)})),this.options.groups&&this.options.groups.length?o=o.filter(function(m){var x=Wi.findExposeMetadata(e,m);return!x||!x.options?!0:r.checkGroups(x.options.groups)}):o=o.filter(function(m){var x=Wi.findExposeMetadata(e,m);return!x||!x.options||!x.options.groups||!x.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(o=o.filter(function(f){return r.options.excludePrefixes.every(function(m){return f.substr(0,m.length)!==m})})),o=o.filter(function(f,m,x){return x.indexOf(f)===m}),o},n.prototype.checkVersion=function(e,t){var i=!0;return i&&e&&(i=this.options.version>=e),i&&t&&(i=this.options.version<t),i},n.prototype.checkGroups=function(e){return e?this.options.groups.some(function(t){return e.includes(t)}):!0},n}(),Pu={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},Ln=function(){return Ln=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Ln.apply(this,arguments)},hh=function(){function n(){}return n.prototype.instanceToPlain=function(e,t){var i=new Mu(Et.CLASS_TO_PLAIN,Ln(Ln({},Pu),t));return i.transform(void 0,e,void 0,void 0,void 0,void 0)},n.prototype.classToPlainFromExist=function(e,t,i){var r=new Mu(Et.CLASS_TO_PLAIN,Ln(Ln({},Pu),i));return r.transform(t,e,void 0,void 0,void 0,void 0)},n.prototype.plainToInstance=function(e,t,i){var r=new Mu(Et.PLAIN_TO_CLASS,Ln(Ln({},Pu),i));return r.transform(void 0,t,e,void 0,void 0,void 0)},n.prototype.plainToClassFromExist=function(e,t,i){var r=new Mu(Et.PLAIN_TO_CLASS,Ln(Ln({},Pu),i));return r.transform(e,t,void 0,void 0,void 0,void 0)},n.prototype.instanceToInstance=function(e,t){var i=new Mu(Et.CLASS_TO_CLASS,Ln(Ln({},Pu),t));return i.transform(void 0,e,void 0,void 0,void 0,void 0)},n.prototype.classToClassFromExist=function(e,t,i){var r=new Mu(Et.CLASS_TO_CLASS,Ln(Ln({},Pu),i));return r.transform(t,e,void 0,void 0,void 0,void 0)},n.prototype.serialize=function(e,t){return JSON.stringify(this.instanceToPlain(e,t))},n.prototype.deserialize=function(e,t,i){var r=JSON.parse(t);return this.plainToInstance(e,r,i)},n.prototype.deserializeArray=function(e,t,i){var r=JSON.parse(t);return this.plainToInstance(e,r,i)},n}();function UM(n){return n===void 0&&(n={}),function(e,t){Wi.addExcludeMetadata({target:e instanceof Function?e:e.constructor,propertyName:t,options:n})}}function $M(n){return n===void 0&&(n={}),function(e,t){Wi.addExposeMetadata({target:e instanceof Function?e:e.constructor,propertyName:t,options:n})}}function zM(n){return function(e,t,i){var r=new hh,s=i.value;i.value=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];var c=s.apply(this,o),h=!!c&&(typeof c=="object"||typeof c=="function")&&typeof c.then=="function";return h?c.then(function(f){return r.instanceToInstance(f,n)}):r.instanceToInstance(c,n)}}}function VM(n){return function(e,t,i){var r=new hh,s=i.value;i.value=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];var c=s.apply(this,o),h=!!c&&(typeof c=="object"||typeof c=="function")&&typeof c.then=="function";return h?c.then(function(f){return r.instanceToPlain(f,n)}):r.instanceToPlain(c,n)}}}function HM(n,e){return function(t,i,r){var s=new hh,o=r.value;r.value=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var h=o.apply(this,u),f=!!h&&(typeof h=="object"||typeof h=="function")&&typeof h.then=="function";return f?h.then(function(m){return s.plainToInstance(n,m,e)}):s.plainToInstance(n,h,e)}}}function qM(n,e){return e===void 0&&(e={}),function(t,i){Wi.addTransformMetadata({target:t.constructor,propertyName:i,transformFn:n,options:e})}}function WM(n,e){return e===void 0&&(e={}),function(t,i){var r=Reflect.getMetadata("design:type",t,i);Wi.addTypeMetadata({target:t.constructor,propertyName:i,reflectedType:r,typeFunction:n,options:e})}}var ls=new hh;function GM(n,e){return ls.instanceToPlain(n,e)}function KM(n,e){return ls.instanceToPlain(n,e)}function XM(n,e,t){return ls.classToPlainFromExist(n,e,t)}function YM(n,e,t){return ls.plainToInstance(n,e,t)}function QM(n,e,t){return ls.plainToInstance(n,e,t)}function JM(n,e,t){return ls.plainToClassFromExist(n,e,t)}function ZM(n,e){return ls.instanceToInstance(n,e)}function eP(n,e,t){return ls.classToClassFromExist(n,e,t)}function tP(n,e){return ls.serialize(n,e)}function iP(n,e,t){return ls.deserialize(n,e,t)}function nP(n,e,t){return ls.deserializeArray(n,e,t)}const rP=Object.freeze(Object.defineProperty({__proto__:null,ClassTransformer:hh,Exclude:UM,Expose:$M,Transform:qM,TransformInstanceToInstance:zM,TransformInstanceToPlain:VM,TransformPlainToInstance:HM,get TransformationType(){return Et},Type:WM,classToClassFromExist:eP,classToPlain:GM,classToPlainFromExist:XM,deserialize:iP,deserializeArray:nP,instanceToInstance:ZM,instanceToPlain:KM,plainToClass:YM,plainToClassFromExist:JM,plainToInstance:QM,serialize:tP},Symbol.toStringTag,{value:"Module"})),nE=Ex(rP);var sx={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ax;function sP(){if(ax)return sx;ax=1;var n;return function(e){(function(t){var i=typeof globalThis=="object"?globalThis:typeof sc=="object"?sc:typeof self=="object"?self:typeof this=="object"?this:c(),r=s(e);typeof i.Reflect<"u"&&(r=s(i.Reflect,r)),t(r,i),typeof i.Reflect>"u"&&(i.Reflect=e);function s(h,f){return function(m,x){Object.defineProperty(h,m,{configurable:!0,writable:!0,value:x}),f&&f(m,x)}}function o(){try{return Function("return this;")()}catch{}}function u(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return o()||u()}})(function(t,i){var r=Object.prototype.hasOwnProperty,s=typeof Symbol=="function",o=s&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",u=s&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",h={__proto__:[]}instanceof Array,f=!c&&!h,m={create:c?function(){return Yi(Object.create(null))}:h?function(){return Yi({__proto__:null})}:function(){return Yi({})},has:f?function(ie,xe){return r.call(ie,xe)}:function(ie,xe){return xe in ie},get:f?function(ie,xe){return r.call(ie,xe)?ie[xe]:void 0}:function(ie,xe){return ie[xe]}},x=Object.getPrototypeOf(Function),w=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Qn(),A=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:us(),C=typeof WeakMap=="function"?WeakMap:Tn(),D=s?Symbol.for("@reflect-metadata:registry"):void 0,N=_r(),L=br(N);function P(ie,xe,De,je){if(he(De)){if(!Ve(ie))throw new TypeError;if(!st(xe))throw new TypeError;return le(ie,xe)}else{if(!Ve(ie))throw new TypeError;if(!ae(xe))throw new TypeError;if(!ae(je)&&!he(je)&&!Ie(je))throw new TypeError;return Ie(je)&&(je=void 0),De=$e(De),Se(ie,xe,De,je)}}t("decorate",P);function X(ie,xe){function De(je,Ze){if(!ae(je))throw new TypeError;if(!he(Ze)&&!Xn(Ze))throw new TypeError;ue(ie,xe,je,Ze)}return De}t("metadata",X);function j(ie,xe,De,je){if(!ae(De))throw new TypeError;return he(je)||(je=$e(je)),ue(ie,xe,De,je)}t("defineMetadata",j);function K(ie,xe,De){if(!ae(xe))throw new TypeError;return he(De)||(De=$e(De)),Ee(ie,xe,De)}t("hasMetadata",K);function z(ie,xe,De){if(!ae(xe))throw new TypeError;return he(De)||(De=$e(De)),Ce(ie,xe,De)}t("hasOwnMetadata",z);function J(ie,xe,De){if(!ae(xe))throw new TypeError;return he(De)||(De=$e(De)),re(ie,xe,De)}t("getMetadata",J);function R(ie,xe,De){if(!ae(xe))throw new TypeError;return he(De)||(De=$e(De)),te(ie,xe,De)}t("getOwnMetadata",R);function F(ie,xe){if(!ae(ie))throw new TypeError;return he(xe)||(xe=$e(xe)),ce(ie,xe)}t("getMetadataKeys",F);function de(ie,xe){if(!ae(ie))throw new TypeError;return he(xe)||(xe=$e(xe)),k(ie,xe)}t("getOwnMetadataKeys",de);function fe(ie,xe,De){if(!ae(xe))throw new TypeError;if(he(De)||(De=$e(De)),!ae(xe))throw new TypeError;he(De)||(De=$e(De));var je=Li(xe,De,!1);return he(je)?!1:je.OrdinaryDeleteMetadata(ie,xe,De)}t("deleteMetadata",fe);function le(ie,xe){for(var De=ie.length-1;De>=0;--De){var je=ie[De],Ze=je(xe);if(!he(Ze)&&!Ie(Ze)){if(!st(Ze))throw new TypeError;xe=Ze}}return xe}function Se(ie,xe,De,je){for(var Ze=ie.length-1;Ze>=0;--Ze){var Rt=ie[Ze],Jt=Rt(xe,De,je);if(!he(Jt)&&!Ie(Jt)){if(!ae(Jt))throw new TypeError;je=Jt}}return je}function Ee(ie,xe,De){var je=Ce(ie,xe,De);if(je)return!0;var Ze=Yt(xe);return Ie(Ze)?!1:Ee(ie,Ze,De)}function Ce(ie,xe,De){var je=Li(xe,De,!1);return he(je)?!1:_e(je.OrdinaryHasOwnMetadata(ie,xe,De))}function re(ie,xe,De){var je=Ce(ie,xe,De);if(je)return te(ie,xe,De);var Ze=Yt(xe);if(!Ie(Ze))return re(ie,Ze,De)}function te(ie,xe,De){var je=Li(xe,De,!1);if(!he(je))return je.OrdinaryGetOwnMetadata(ie,xe,De)}function ue(ie,xe,De,je){var Ze=Li(De,je,!0);Ze.OrdinaryDefineOwnMetadata(ie,xe,De,je)}function ce(ie,xe){var De=k(ie,xe),je=Yt(ie);if(je===null)return De;var Ze=ce(je,xe);if(Ze.length<=0)return De;if(De.length<=0)return Ze;for(var Rt=new A,Jt=[],ot=0,Ue=De;ot<Ue.length;ot++){var I=Ue[ot],M=Rt.has(I);M||(Rt.add(I),Jt.push(I))}for(var $=0,oe=Ze;$<oe.length;$++){var I=oe[$],M=Rt.has(I);M||(Rt.add(I),Jt.push(I))}return Jt}function k(ie,xe){var De=Li(ie,xe,!1);return De?De.OrdinaryOwnMetadataKeys(ie,xe):[]}function Y(ie){if(ie===null)return 1;switch(typeof ie){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ie===null?1:6;default:return 6}}function he(ie){return ie===void 0}function Ie(ie){return ie===null}function V(ie){return typeof ie=="symbol"}function ae(ie){return typeof ie=="object"?ie!==null:typeof ie=="function"}function pe(ie,xe){switch(Y(ie)){case 0:return ie;case 1:return ie;case 2:return ie;case 3:return ie;case 4:return ie;case 5:return ie}var De="string",je=Yn(ie,o);if(je!==void 0){var Ze=je.call(ie,De);if(ae(Ze))throw new TypeError;return Ze}return Z(ie)}function Z(ie,xe){var De,je,Ze;{var Rt=ie.toString;if(nt(Rt)){var je=Rt.call(ie);if(!ae(je))return je}var De=ie.valueOf;if(nt(De)){var je=De.call(ie);if(!ae(je))return je}}throw new TypeError}function _e(ie){return!!ie}function Me(ie){return""+ie}function $e(ie){var xe=pe(ie);return V(xe)?xe:Me(xe)}function Ve(ie){return Array.isArray?Array.isArray(ie):ie instanceof Object?ie instanceof Array:Object.prototype.toString.call(ie)==="[object Array]"}function nt(ie){return typeof ie=="function"}function st(ie){return typeof ie=="function"}function Xn(ie){switch(Y(ie)){case 3:return!0;case 4:return!0;default:return!1}}function ri(ie,xe){return ie===xe||ie!==ie&&xe!==xe}function Yn(ie,xe){var De=ie[xe];if(De!=null){if(!nt(De))throw new TypeError;return De}}function Oi(ie){var xe=Yn(ie,u);if(!nt(xe))throw new TypeError;var De=xe.call(ie);if(!ae(De))throw new TypeError;return De}function Ri(ie){return ie.value}function mt(ie){var xe=ie.next();return xe.done?!1:xe}function Tt(ie){var xe=ie.return;xe&&xe.call(ie)}function Yt(ie){var xe=Object.getPrototypeOf(ie);if(typeof ie!="function"||ie===x||xe!==x)return xe;var De=ie.prototype,je=De&&Object.getPrototypeOf(De);if(je==null||je===Object.prototype)return xe;var Ze=je.constructor;return typeof Ze!="function"||Ze===ie?xe:Ze}function Sn(){var ie;!he(D)&&typeof i.Reflect<"u"&&!(D in i.Reflect)&&typeof i.Reflect.defineMetadata=="function"&&(ie=xr(i.Reflect));var xe,De,je,Ze=new C,Rt={registerProvider:Jt,getProvider:Ue,setProvider:M};return Rt;function Jt($){if(!Object.isExtensible(Rt))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case ie===$:break;case he(xe):xe=$;break;case xe===$:break;case he(De):De=$;break;case De===$:break;default:je===void 0&&(je=new A),je.add($);break}}function ot($,oe){if(!he(xe)){if(xe.isProviderFor($,oe))return xe;if(!he(De)){if(De.isProviderFor($,oe))return xe;if(!he(je))for(var Pe=Oi(je);;){var ze=mt(Pe);if(!ze)return;var xt=Ri(ze);if(xt.isProviderFor($,oe))return Tt(Pe),xt}}}if(!he(ie)&&ie.isProviderFor($,oe))return ie}function Ue($,oe){var Pe=Ze.get($),ze;return he(Pe)||(ze=Pe.get(oe)),he(ze)&&(ze=ot($,oe),he(ze)||(he(Pe)&&(Pe=new w,Ze.set($,Pe)),Pe.set(oe,ze))),ze}function I($){if(he($))throw new TypeError;return xe===$||De===$||!he(je)&&je.has($)}function M($,oe,Pe){if(!I(Pe))throw new Error("Metadata provider not registered.");var ze=Ue($,oe);if(ze!==Pe){if(!he(ze))return!1;var xt=Ze.get($);he(xt)&&(xt=new w,Ze.set($,xt)),xt.set(oe,Pe)}return!0}}function _r(){var ie;return!he(D)&&ae(i.Reflect)&&Object.isExtensible(i.Reflect)&&(ie=i.Reflect[D]),he(ie)&&(ie=Sn()),!he(D)&&ae(i.Reflect)&&Object.isExtensible(i.Reflect)&&Object.defineProperty(i.Reflect,D,{enumerable:!1,configurable:!1,writable:!1,value:ie}),ie}function br(ie){var xe=new C,De={isProviderFor:function(I,M){var $=xe.get(I);return he($)?!1:$.has(M)},OrdinaryDefineOwnMetadata:Jt,OrdinaryHasOwnMetadata:Ze,OrdinaryGetOwnMetadata:Rt,OrdinaryOwnMetadataKeys:ot,OrdinaryDeleteMetadata:Ue};return N.registerProvider(De),De;function je(I,M,$){var oe=xe.get(I),Pe=!1;if(he(oe)){if(!$)return;oe=new w,xe.set(I,oe),Pe=!0}var ze=oe.get(M);if(he(ze)){if(!$)return;if(ze=new w,oe.set(M,ze),!ie.setProvider(I,M,De))throw oe.delete(M),Pe&&xe.delete(I),new Error("Wrong provider for target.")}return ze}function Ze(I,M,$){var oe=je(M,$,!1);return he(oe)?!1:_e(oe.has(I))}function Rt(I,M,$){var oe=je(M,$,!1);if(!he(oe))return oe.get(I)}function Jt(I,M,$,oe){var Pe=je($,oe,!0);Pe.set(I,M)}function ot(I,M){var $=[],oe=je(I,M,!1);if(he(oe))return $;for(var Pe=oe.keys(),ze=Oi(Pe),xt=0;;){var pi=mt(ze);if(!pi)return $.length=xt,$;var en=Ri(pi);try{$[xt]=en}catch($i){try{Tt(ze)}finally{throw $i}}xt++}}function Ue(I,M,$){var oe=je(M,$,!1);if(he(oe)||!oe.delete(I))return!1;if(oe.size===0){var Pe=xe.get(M);he(Pe)||(Pe.delete($),Pe.size===0&&xe.delete(Pe))}return!0}}function xr(ie){var xe=ie.defineMetadata,De=ie.hasOwnMetadata,je=ie.getOwnMetadata,Ze=ie.getOwnMetadataKeys,Rt=ie.deleteMetadata,Jt=new C,ot={isProviderFor:function(Ue,I){var M=Jt.get(Ue);return!he(M)&&M.has(I)?!0:Ze(Ue,I).length?(he(M)&&(M=new A,Jt.set(Ue,M)),M.add(I),!0):!1},OrdinaryDefineOwnMetadata:xe,OrdinaryHasOwnMetadata:De,OrdinaryGetOwnMetadata:je,OrdinaryOwnMetadataKeys:Ze,OrdinaryDeleteMetadata:Rt};return ot}function Li(ie,xe,De){var je=N.getProvider(ie,xe);if(!he(je))return je;if(De){if(N.setProvider(ie,xe,L))return L;throw new Error("Illegal state.")}}function Qn(){var ie={},xe=[],De=function(){function ot(Ue,I,M){this._index=0,this._keys=Ue,this._values=I,this._selector=M}return ot.prototype["@@iterator"]=function(){return this},ot.prototype[u]=function(){return this},ot.prototype.next=function(){var Ue=this._index;if(Ue>=0&&Ue<this._keys.length){var I=this._selector(this._keys[Ue],this._values[Ue]);return Ue+1>=this._keys.length?(this._index=-1,this._keys=xe,this._values=xe):this._index++,{value:I,done:!1}}return{value:void 0,done:!0}},ot.prototype.throw=function(Ue){throw this._index>=0&&(this._index=-1,this._keys=xe,this._values=xe),Ue},ot.prototype.return=function(Ue){return this._index>=0&&(this._index=-1,this._keys=xe,this._values=xe),{value:Ue,done:!0}},ot}(),je=function(){function ot(){this._keys=[],this._values=[],this._cacheKey=ie,this._cacheIndex=-2}return Object.defineProperty(ot.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ot.prototype.has=function(Ue){return this._find(Ue,!1)>=0},ot.prototype.get=function(Ue){var I=this._find(Ue,!1);return I>=0?this._values[I]:void 0},ot.prototype.set=function(Ue,I){var M=this._find(Ue,!0);return this._values[M]=I,this},ot.prototype.delete=function(Ue){var I=this._find(Ue,!1);if(I>=0){for(var M=this._keys.length,$=I+1;$<M;$++)this._keys[$-1]=this._keys[$],this._values[$-1]=this._values[$];return this._keys.length--,this._values.length--,ri(Ue,this._cacheKey)&&(this._cacheKey=ie,this._cacheIndex=-2),!0}return!1},ot.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ie,this._cacheIndex=-2},ot.prototype.keys=function(){return new De(this._keys,this._values,Ze)},ot.prototype.values=function(){return new De(this._keys,this._values,Rt)},ot.prototype.entries=function(){return new De(this._keys,this._values,Jt)},ot.prototype["@@iterator"]=function(){return this.entries()},ot.prototype[u]=function(){return this.entries()},ot.prototype._find=function(Ue,I){if(!ri(this._cacheKey,Ue)){this._cacheIndex=-1;for(var M=0;M<this._keys.length;M++)if(ri(this._keys[M],Ue)){this._cacheIndex=M;break}}return this._cacheIndex<0&&I&&(this._cacheIndex=this._keys.length,this._keys.push(Ue),this._values.push(void 0)),this._cacheIndex},ot}();return je;function Ze(ot,Ue){return ot}function Rt(ot,Ue){return Ue}function Jt(ot,Ue){return[ot,Ue]}}function us(){var ie=function(){function xe(){this._map=new w}return Object.defineProperty(xe.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),xe.prototype.has=function(De){return this._map.has(De)},xe.prototype.add=function(De){return this._map.set(De,De),this},xe.prototype.delete=function(De){return this._map.delete(De)},xe.prototype.clear=function(){this._map.clear()},xe.prototype.keys=function(){return this._map.keys()},xe.prototype.values=function(){return this._map.keys()},xe.prototype.entries=function(){return this._map.entries()},xe.prototype["@@iterator"]=function(){return this.keys()},xe.prototype[u]=function(){return this.keys()},xe}();return ie}function Tn(){var ie=16,xe=m.create(),De=je();return function(){function Ue(){this._key=je()}return Ue.prototype.has=function(I){var M=Ze(I,!1);return M!==void 0?m.has(M,this._key):!1},Ue.prototype.get=function(I){var M=Ze(I,!1);return M!==void 0?m.get(M,this._key):void 0},Ue.prototype.set=function(I,M){var $=Ze(I,!0);return $[this._key]=M,this},Ue.prototype.delete=function(I){var M=Ze(I,!1);return M!==void 0?delete M[this._key]:!1},Ue.prototype.clear=function(){this._key=je()},Ue}();function je(){var Ue;do Ue="@@WeakMap@@"+ot();while(m.has(xe,Ue));return xe[Ue]=!0,Ue}function Ze(Ue,I){if(!r.call(Ue,De)){if(!I)return;Object.defineProperty(Ue,De,{value:m.create()})}return Ue[De]}function Rt(Ue,I){for(var M=0;M<I;++M)Ue[M]=Math.random()*255|0;return Ue}function Jt(Ue){if(typeof Uint8Array=="function"){var I=new Uint8Array(Ue);return typeof crypto<"u"?crypto.getRandomValues(I):typeof msCrypto<"u"?msCrypto.getRandomValues(I):Rt(I,Ue),I}return Rt(new Array(Ue),Ue)}function ot(){var Ue=Jt(ie);Ue[6]=Ue[6]&79|64,Ue[8]=Ue[8]&191|128;for(var I="",M=0;M<ie;++M){var $=Ue[M];(M===4||M===6||M===8)&&(I+="-"),$<16&&(I+="0"),I+=$.toString(16).toLowerCase()}return I}}function Yi(ie){return ie.__=void 0,delete ie.__,ie}})}(n||(n={})),sx}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var ox;function Nl(){return ox||(ox=1,function(n){var e=dl&&dl.__decorate||function(pe,Z,_e,Me){var $e=arguments.length,Ve=$e<3?Z:Me===null?Me=Object.getOwnPropertyDescriptor(Z,_e):Me,nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ve=Reflect.decorate(pe,Z,_e,Me);else for(var st=pe.length-1;st>=0;st--)(nt=pe[st])&&(Ve=($e<3?nt(Ve):$e>3?nt(Z,_e,Ve):nt(Z,_e))||Ve);return $e>3&&Ve&&Object.defineProperty(Z,_e,Ve),Ve},t=dl&&dl.__metadata||function(pe,Z){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(pe,Z)};Object.defineProperty(n,"__esModule",{value:!0}),n.RawReading=n.RawUnsubscribeCmd=n.RawSubscribeCmd=n.RawWriteCmd=n.RawReadCmd=n.SensorReading=n.SensorReadCmd=n.LinearCmd=n.VectorSubcommand=n.RotateCmd=n.RotateSubcommand=n.ScalarCmd=n.ScalarSubcommand=n.GenericMessageSubcommand=n.StopAllDevices=n.StopDeviceCmd=n.ServerInfo=n.RequestServerInfo=n.ScanningFinished=n.StopScanning=n.StartScanning=n.RequestDeviceList=n.DeviceRemoved=n.DeviceAdded=n.DeviceList=n.DeviceInfo=n.Error=n.ErrorClass=n.Ping=n.Ok=n.ButtplugSystemMessage=n.ButtplugDeviceMessage=n.ButtplugMessage=n.SensorDeviceMessageAttributes=n.RawDeviceMessageAttributes=n.GenericDeviceMessageAttributes=n.SensorType=n.ActuatorType=n.MessageAttributes=n.MESSAGE_SPEC_VERSION=n.MAX_ID=n.DEFAULT_MESSAGE_ID=n.SYSTEM_MESSAGE_ID=void 0;const i=nE;sP(),n.SYSTEM_MESSAGE_ID=0,n.DEFAULT_MESSAGE_ID=1,n.MAX_ID=4294967295,n.MESSAGE_SPEC_VERSION=3;class r{constructor(Z){Object.assign(this,Z)}update(){var Z,_e,Me,$e,Ve;(Z=this.ScalarCmd)===null||Z===void 0||Z.forEach((nt,st)=>nt.Index=st),(_e=this.RotateCmd)===null||_e===void 0||_e.forEach((nt,st)=>nt.Index=st),(Me=this.LinearCmd)===null||Me===void 0||Me.forEach((nt,st)=>nt.Index=st),($e=this.SensorReadCmd)===null||$e===void 0||$e.forEach((nt,st)=>nt.Index=st),(Ve=this.SensorSubscribeCmd)===null||Ve===void 0||Ve.forEach((nt,st)=>nt.Index=st)}}n.MessageAttributes=r;var s;(function(pe){pe.Unknown="Unknown",pe.Vibrate="Vibrate",pe.Rotate="Rotate",pe.Oscillate="Oscillate",pe.Constrict="Constrict",pe.Inflate="Inflate",pe.Position="Position"})(s||(n.ActuatorType=s={}));var o;(function(pe){pe.Unknown="Unknown",pe.Battery="Battery",pe.RSSI="RSSI",pe.Button="Button",pe.Pressure="Pressure"})(o||(n.SensorType=o={}));class u{constructor(Z){this.Index=0,Object.assign(this,Z)}}n.GenericDeviceMessageAttributes=u;class c{constructor(Z){this.Endpoints=Z}}n.RawDeviceMessageAttributes=c;class h{constructor(Z){this.Index=0,Object.assign(this,Z)}}n.SensorDeviceMessageAttributes=h;class f{constructor(Z){this.Id=Z}get Type(){return this.constructor}toJSON(){return JSON.stringify(this.toProtocolFormat())}toProtocolFormat(){const Z={};return Z[this.constructor.Name]=(0,i.instanceToPlain)(this),Z}update(){}}n.ButtplugMessage=f;class m extends f{constructor(Z,_e){super(_e),this.DeviceIndex=Z,this.Id=_e}}n.ButtplugDeviceMessage=m;class x extends f{constructor(Z=n.SYSTEM_MESSAGE_ID){super(Z),this.Id=Z}}n.ButtplugSystemMessage=x;class w extends x{constructor(Z=n.DEFAULT_MESSAGE_ID){super(Z),this.Id=Z}}n.Ok=w,w.Name="Ok";class A extends f{constructor(Z=n.DEFAULT_MESSAGE_ID){super(Z),this.Id=Z}}n.Ping=A,A.Name="Ping";var C;(function(pe){pe[pe.ERROR_UNKNOWN=0]="ERROR_UNKNOWN",pe[pe.ERROR_INIT=1]="ERROR_INIT",pe[pe.ERROR_PING=2]="ERROR_PING",pe[pe.ERROR_MSG=3]="ERROR_MSG",pe[pe.ERROR_DEVICE=4]="ERROR_DEVICE"})(C||(n.ErrorClass=C={}));class D extends f{constructor(Z,_e=C.ERROR_UNKNOWN,Me=n.DEFAULT_MESSAGE_ID){super(Me),this.ErrorMessage=Z,this.ErrorCode=_e,this.Id=Me}get Schemversion(){return 0}}n.Error=D,D.Name="Error";class N{constructor(Z){Object.assign(this,Z)}}n.DeviceInfo=N,e([(0,i.Type)(()=>r),t("design:type",r)],N.prototype,"DeviceMessages",void 0);class L extends f{constructor(Z,_e=n.DEFAULT_MESSAGE_ID){super(_e),this.Devices=Z,this.Id=_e}update(){for(const Z of this.Devices)Z.DeviceMessages.update()}}n.DeviceList=L,L.Name="DeviceList",e([(0,i.Type)(()=>N),t("design:type",Array)],L.prototype,"Devices",void 0);class P extends x{constructor(Z){super(),Object.assign(this,Z)}update(){this.DeviceMessages.update()}}n.DeviceAdded=P,P.Name="DeviceAdded",e([(0,i.Type)(()=>r),t("design:type",r)],P.prototype,"DeviceMessages",void 0);class X extends x{constructor(Z){super(),this.DeviceIndex=Z}}n.DeviceRemoved=X,X.Name="DeviceRemoved";class j extends f{constructor(Z=n.DEFAULT_MESSAGE_ID){super(Z),this.Id=Z}}n.RequestDeviceList=j,j.Name="RequestDeviceList";class K extends f{constructor(Z=n.DEFAULT_MESSAGE_ID){super(Z),this.Id=Z}}n.StartScanning=K,K.Name="StartScanning";class z extends f{constructor(Z=n.DEFAULT_MESSAGE_ID){super(Z),this.Id=Z}}n.StopScanning=z,z.Name="StopScanning";class J extends x{constructor(){super()}}n.ScanningFinished=J,J.Name="ScanningFinished";class R extends f{constructor(Z,_e=0,Me=n.DEFAULT_MESSAGE_ID){super(Me),this.ClientName=Z,this.MessageVersion=_e,this.Id=Me}}n.RequestServerInfo=R,R.Name="RequestServerInfo";class F extends x{constructor(Z,_e,Me,$e=n.DEFAULT_MESSAGE_ID){super(),this.MessageVersion=Z,this.MaxPingTime=_e,this.ServerName=Me,this.Id=$e}}n.ServerInfo=F,F.Name="ServerInfo";class de extends m{constructor(Z=-1,_e=n.DEFAULT_MESSAGE_ID){super(Z,_e),this.DeviceIndex=Z,this.Id=_e}}n.StopDeviceCmd=de,de.Name="StopDeviceCmd";class fe extends f{constructor(Z=n.DEFAULT_MESSAGE_ID){super(Z),this.Id=Z}}n.StopAllDevices=fe,fe.Name="StopAllDevices";class le{constructor(Z){this.Index=Z}}n.GenericMessageSubcommand=le;class Se extends le{constructor(Z,_e,Me){super(Z),this.Scalar=_e,this.ActuatorType=Me}}n.ScalarSubcommand=Se;class Ee extends m{constructor(Z,_e=-1,Me=n.DEFAULT_MESSAGE_ID){super(_e,Me),this.Scalars=Z,this.DeviceIndex=_e,this.Id=Me}}n.ScalarCmd=Ee,Ee.Name="ScalarCmd";class Ce extends le{constructor(Z,_e,Me){super(Z),this.Speed=_e,this.Clockwise=Me}}n.RotateSubcommand=Ce;class re extends m{static Create(Z,_e){const Me=new Array;let $e=0;for(const[Ve,nt]of _e)Me.push(new Ce($e,Ve,nt)),++$e;return new re(Me,Z)}constructor(Z,_e=-1,Me=n.DEFAULT_MESSAGE_ID){super(_e,Me),this.Rotations=Z,this.DeviceIndex=_e,this.Id=Me}}n.RotateCmd=re,re.Name="RotateCmd";class te extends le{constructor(Z,_e,Me){super(Z),this.Position=_e,this.Duration=Me}}n.VectorSubcommand=te;class ue extends m{static Create(Z,_e){const Me=new Array;let $e=0;for(const Ve of _e)Me.push(new te($e,Ve[0],Ve[1])),++$e;return new ue(Me,Z)}constructor(Z,_e=-1,Me=n.DEFAULT_MESSAGE_ID){super(_e,Me),this.Vectors=Z,this.DeviceIndex=_e,this.Id=Me}}n.LinearCmd=ue,ue.Name="LinearCmd";class ce extends m{constructor(Z,_e,Me,$e=n.DEFAULT_MESSAGE_ID){super(Z,$e),this.DeviceIndex=Z,this.SensorIndex=_e,this.SensorType=Me,this.Id=$e}}n.SensorReadCmd=ce,ce.Name="SensorReadCmd";class k extends m{constructor(Z,_e,Me,$e,Ve=n.DEFAULT_MESSAGE_ID){super(Z,Ve),this.DeviceIndex=Z,this.SensorIndex=_e,this.SensorType=Me,this.Data=$e,this.Id=Ve}}n.SensorReading=k,k.Name="SensorReading";class Y extends m{constructor(Z,_e,Me,$e,Ve=n.DEFAULT_MESSAGE_ID){super(Z,Ve),this.DeviceIndex=Z,this.Endpoint=_e,this.ExpectedLength=Me,this.Timeout=$e,this.Id=Ve}}n.RawReadCmd=Y,Y.Name="RawReadCmd";class he extends m{constructor(Z,_e,Me,$e,Ve=n.DEFAULT_MESSAGE_ID){super(Z,Ve),this.DeviceIndex=Z,this.Endpoint=_e,this.Data=Me,this.WriteWithResponse=$e,this.Id=Ve}}n.RawWriteCmd=he,he.Name="RawWriteCmd";class Ie extends m{constructor(Z,_e,Me=n.DEFAULT_MESSAGE_ID){super(Z,Me),this.DeviceIndex=Z,this.Endpoint=_e,this.Id=Me}}n.RawSubscribeCmd=Ie,Ie.Name="RawSubscribeCmd";class V extends m{constructor(Z,_e,Me=n.DEFAULT_MESSAGE_ID){super(Z,Me),this.DeviceIndex=Z,this.Endpoint=_e,this.Id=Me}}n.RawUnsubscribeCmd=V,V.Name="RawUnsubscribeCmd";class ae extends m{constructor(Z,_e,Me,$e=n.DEFAULT_MESSAGE_ID){super(Z,$e),this.DeviceIndex=Z,this.Endpoint=_e,this.Data=Me,this.Id=$e}}n.RawReading=ae,ae.Name="RawReading"}(dl)),dl}var Di={},lx;function fh(){if(lx)return Di;lx=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var n=Di&&Di.__createBinding||(Object.create?function(f,m,x,w){w===void 0&&(w=x);var A=Object.getOwnPropertyDescriptor(m,x);(!A||("get"in A?!m.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return m[x]}}),Object.defineProperty(f,w,A)}:function(f,m,x,w){w===void 0&&(w=x),f[w]=m[x]}),e=Di&&Di.__setModuleDefault||(Object.create?function(f,m){Object.defineProperty(f,"default",{enumerable:!0,value:m})}:function(f,m){f.default=m}),t=Di&&Di.__importStar||function(f){if(f&&f.__esModule)return f;var m={};if(f!=null)for(var x in f)x!=="default"&&Object.prototype.hasOwnProperty.call(f,x)&&n(m,f,x);return e(m,f),m};Object.defineProperty(Di,"__esModule",{value:!0}),Di.ButtplugUnknownError=Di.ButtplugPingError=Di.ButtplugMessageError=Di.ButtplugDeviceError=Di.ButtplugInitError=Di.ButtplugError=void 0;const i=t(Nl());class r extends Error{get ErrorClass(){return this.errorClass}get InnerError(){return this.innerError}get Id(){return this.messageId}get ErrorMessage(){return new i.Error(this.message,this.ErrorClass,this.Id)}static LogAndError(m,x,w,A=i.SYSTEM_MESSAGE_ID){return x.Error(w),new m(w,A)}static FromError(m){switch(m.ErrorCode){case i.ErrorClass.ERROR_DEVICE:return new o(m.ErrorMessage,m.Id);case i.ErrorClass.ERROR_INIT:return new s(m.ErrorMessage,m.Id);case i.ErrorClass.ERROR_UNKNOWN:return new h(m.ErrorMessage,m.Id);case i.ErrorClass.ERROR_PING:return new c(m.ErrorMessage,m.Id);case i.ErrorClass.ERROR_MSG:return new u(m.ErrorMessage,m.Id);default:throw new Error(`Message type ${m.ErrorCode} not handled`)}}constructor(m,x,w=i.SYSTEM_MESSAGE_ID,A){super(m),this.errorClass=i.ErrorClass.ERROR_UNKNOWN,this.errorClass=x,this.innerError=A,this.messageId=w}}Di.ButtplugError=r;class s extends r{constructor(m,x=i.SYSTEM_MESSAGE_ID){super(m,i.ErrorClass.ERROR_INIT,x)}}Di.ButtplugInitError=s;class o extends r{constructor(m,x=i.SYSTEM_MESSAGE_ID){super(m,i.ErrorClass.ERROR_DEVICE,x)}}Di.ButtplugDeviceError=o;class u extends r{constructor(m,x=i.SYSTEM_MESSAGE_ID){super(m,i.ErrorClass.ERROR_MSG,x)}}Di.ButtplugMessageError=u;class c extends r{constructor(m,x=i.SYSTEM_MESSAGE_ID){super(m,i.ErrorClass.ERROR_PING,x)}}Di.ButtplugPingError=c;class h extends r{constructor(m,x=i.SYSTEM_MESSAGE_ID){super(m,i.ErrorClass.ERROR_UNKNOWN,x)}}return Di.ButtplugUnknownError=h,Di}var dr={};/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var ux;function Ag(){if(ux)return dr;ux=1;var n=dr&&dr.__createBinding||(Object.create?function(c,h,f,m){m===void 0&&(m=f);var x=Object.getOwnPropertyDescriptor(h,f);(!x||("get"in x?!h.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(c,m,x)}:function(c,h,f,m){m===void 0&&(m=f),c[m]=h[f]}),e=dr&&dr.__setModuleDefault||(Object.create?function(c,h){Object.defineProperty(c,"default",{enumerable:!0,value:h})}:function(c,h){c.default=h}),t=dr&&dr.__importStar||function(c){if(c&&c.__esModule)return c;var h={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&n(h,c,f);return e(h,c),h};Object.defineProperty(dr,"__esModule",{value:!0}),dr.fromJSON=dr.getMessageClassFromMessage=void 0;const i=nE,r=t(Nl());function s(c){for(const h of Object.values(r))if(typeof h=="function"&&"Name"in h&&h.Name===c)return h;return null}function o(c){return s(Object.getPrototypeOf(c).constructor.Name)}dr.getMessageClassFromMessage=o;function u(c){const h=JSON.parse(c),f=[];for(const m of Array.from(h)){const x=Object.getOwnPropertyNames(m)[0],w=s(x);if(w){const A=(0,i.plainToInstance)(w,m[x]);A.update(),f.push(A)}}return f}return dr.fromJSON=u,dr}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var cx;function sE(){if(cx)return cr;cx=1;var n=cr&&cr.__createBinding||(Object.create?function(h,f,m,x){x===void 0&&(x=m);var w=Object.getOwnPropertyDescriptor(f,m);(!w||("get"in w?!f.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return f[m]}}),Object.defineProperty(h,x,w)}:function(h,f,m,x){x===void 0&&(x=m),h[x]=f[m]}),e=cr&&cr.__setModuleDefault||(Object.create?function(h,f){Object.defineProperty(h,"default",{enumerable:!0,value:f})}:function(h,f){h.default=f}),t=cr&&cr.__importStar||function(h){if(h&&h.__esModule)return h;var f={};if(h!=null)for(var m in h)m!=="default"&&Object.prototype.hasOwnProperty.call(h,m)&&n(f,h,m);return e(f,h),f},i=cr&&cr.__awaiter||function(h,f,m,x){function w(A){return A instanceof m?A:new m(function(C){C(A)})}return new(m||(m=Promise))(function(A,C){function D(P){try{L(x.next(P))}catch(X){C(X)}}function N(P){try{L(x.throw(P))}catch(X){C(X)}}function L(P){P.done?A(P.value):w(P.value).then(D,N)}L((x=x.apply(h,f||[])).next())})};Object.defineProperty(cr,"__esModule",{value:!0}),cr.ButtplugClientDevice=void 0;const r=t(Nl()),s=fh(),o=Eg(),u=Ag();let c=class rE extends o.EventEmitter{get name(){return this._deviceInfo.DeviceName}get displayName(){return this._deviceInfo.DeviceDisplayName}get index(){return this._deviceInfo.DeviceIndex}get messageTimingGap(){return this._deviceInfo.DeviceMessageTimingGap}get messageAttributes(){return this._deviceInfo.DeviceMessages}static fromMsg(f,m){return new rE(f,m)}constructor(f,m){super(),this._deviceInfo=f,this._sendClosure=m,this.allowedMsgs=new Map,f.DeviceMessages.update()}send(f){return i(this,void 0,void 0,function*(){return yield this._sendClosure(this,f)})}sendExpectOk(f){return i(this,void 0,void 0,function*(){const m=yield this.send(f);switch((0,u.getMessageClassFromMessage)(m)){case r.Ok:return;case r.Error:throw s.ButtplugError.FromError(m);default:throw new s.ButtplugMessageError(`Message type ${m.constructor} not handled by SendMsgExpectOk`)}})}scalar(f){return i(this,void 0,void 0,function*(){Array.isArray(f)?yield this.sendExpectOk(new r.ScalarCmd(f,this.index)):yield this.sendExpectOk(new r.ScalarCmd([f],this.index))})}scalarCommandBuilder(f,m){var x;return i(this,void 0,void 0,function*(){const w=(x=this.messageAttributes.ScalarCmd)===null||x===void 0?void 0:x.filter(C=>C.ActuatorType===m);if(!w||w.length===0)throw new s.ButtplugDeviceError(`Device ${this.name} has no ${m} capabilities`);const A=[];if(typeof f=="number")w.forEach(C=>A.push(new r.ScalarSubcommand(C.Index,f,m)));else if(Array.isArray(f)){if(f.length>w.length)throw new s.ButtplugDeviceError(`${f.length} commands send to a device with ${w.length} vibrators`);w.forEach((C,D)=>{A.push(new r.ScalarSubcommand(C.Index,f[D],m))})}else throw new s.ButtplugDeviceError(`${m} can only take numbers or arrays of numbers.`);yield this.scalar(A)})}get vibrateAttributes(){var f,m;return(m=(f=this.messageAttributes.ScalarCmd)===null||f===void 0?void 0:f.filter(x=>x.ActuatorType===r.ActuatorType.Vibrate))!==null&&m!==void 0?m:[]}vibrate(f){return i(this,void 0,void 0,function*(){yield this.scalarCommandBuilder(f,r.ActuatorType.Vibrate)})}get oscillateAttributes(){var f,m;return(m=(f=this.messageAttributes.ScalarCmd)===null||f===void 0?void 0:f.filter(x=>x.ActuatorType===r.ActuatorType.Oscillate))!==null&&m!==void 0?m:[]}oscillate(f){return i(this,void 0,void 0,function*(){yield this.scalarCommandBuilder(f,r.ActuatorType.Oscillate)})}get rotateAttributes(){var f;return(f=this.messageAttributes.RotateCmd)!==null&&f!==void 0?f:[]}rotate(f,m){return i(this,void 0,void 0,function*(){const x=this.messageAttributes.RotateCmd;if(!x||x.length===0)throw new s.ButtplugDeviceError(`Device ${this.name} has no Rotate capabilities`);let w;if(typeof f=="number")w=r.RotateCmd.Create(this.index,new Array(x.length).fill([f,m]));else if(Array.isArray(f))w=r.RotateCmd.Create(this.index,f);else throw new s.ButtplugDeviceError("SendRotateCmd can only take a number and boolean, or an array of number/boolean tuples");yield this.sendExpectOk(w)})}get linearAttributes(){var f;return(f=this.messageAttributes.LinearCmd)!==null&&f!==void 0?f:[]}linear(f,m){return i(this,void 0,void 0,function*(){const x=this.messageAttributes.LinearCmd;if(!x||x.length===0)throw new s.ButtplugDeviceError(`Device ${this.name} has no Linear capabilities`);let w;if(typeof f=="number")w=r.LinearCmd.Create(this.index,new Array(x.length).fill([f,m]));else if(Array.isArray(f))w=r.LinearCmd.Create(this.index,f);else throw new s.ButtplugDeviceError("SendLinearCmd can only take a number and number, or an array of number/number tuples");yield this.sendExpectOk(w)})}sensorRead(f,m){return i(this,void 0,void 0,function*(){const x=yield this.send(new r.SensorReadCmd(this.index,f,m));switch((0,u.getMessageClassFromMessage)(x)){case r.SensorReading:return x.Data;case r.Error:throw s.ButtplugError.FromError(x);default:throw new s.ButtplugMessageError(`Message type ${x.constructor} not handled by sensorRead`)}})}get hasBattery(){var f;const m=(f=this.messageAttributes.SensorReadCmd)===null||f===void 0?void 0:f.filter(x=>x.SensorType===r.SensorType.Battery);return m!==void 0&&m.length>0}battery(){var f;return i(this,void 0,void 0,function*(){if(!this.hasBattery)throw new s.ButtplugDeviceError(`Device ${this.name} has no Battery capabilities`);const m=(f=this.messageAttributes.SensorReadCmd)===null||f===void 0?void 0:f.filter(w=>w.SensorType===r.SensorType.Battery);return(yield this.sensorRead(m[0].Index,r.SensorType.Battery))[0]/100})}get hasRssi(){var f;const m=(f=this.messageAttributes.SensorReadCmd)===null||f===void 0?void 0:f.filter(x=>x.SensorType===r.SensorType.RSSI);return m!==void 0&&m.length===0}rssi(){var f;return i(this,void 0,void 0,function*(){if(!this.hasRssi)throw new s.ButtplugDeviceError(`Device ${this.name} has no RSSI capabilities`);const m=(f=this.messageAttributes.SensorReadCmd)===null||f===void 0?void 0:f.filter(w=>w.SensorType===r.SensorType.RSSI);return(yield this.sensorRead(m[0].Index,r.SensorType.RSSI))[0]})}rawRead(f,m,x){return i(this,void 0,void 0,function*(){if(!this.messageAttributes.RawReadCmd)throw new s.ButtplugDeviceError(`Device ${this.name} has no raw read capabilities`);if(this.messageAttributes.RawReadCmd.Endpoints.indexOf(f)===-1)throw new s.ButtplugDeviceError(`Device ${this.name} has no raw readable endpoint ${f}`);const w=yield this.send(new r.RawReadCmd(this.index,f,m,x));switch((0,u.getMessageClassFromMessage)(w)){case r.RawReading:return new Uint8Array(w.Data);case r.Error:throw s.ButtplugError.FromError(w);default:throw new s.ButtplugMessageError(`Message type ${w.constructor} not handled by rawRead`)}})}rawWrite(f,m,x){return i(this,void 0,void 0,function*(){if(!this.messageAttributes.RawWriteCmd)throw new s.ButtplugDeviceError(`Device ${this.name} has no raw write capabilities`);if(this.messageAttributes.RawWriteCmd.Endpoints.indexOf(f)===-1)throw new s.ButtplugDeviceError(`Device ${this.name} has no raw writable endpoint ${f}`);yield this.sendExpectOk(new r.RawWriteCmd(this.index,f,m,x))})}rawSubscribe(f){return i(this,void 0,void 0,function*(){if(!this.messageAttributes.RawSubscribeCmd)throw new s.ButtplugDeviceError(`Device ${this.name} has no raw subscribe capabilities`);if(this.messageAttributes.RawSubscribeCmd.Endpoints.indexOf(f)===-1)throw new s.ButtplugDeviceError(`Device ${this.name} has no raw subscribable endpoint ${f}`);yield this.sendExpectOk(new r.RawSubscribeCmd(this.index,f))})}rawUnsubscribe(f){return i(this,void 0,void 0,function*(){if(!this.messageAttributes.RawSubscribeCmd)throw new s.ButtplugDeviceError(`Device ${this.name} has no raw unsubscribe capabilities`);if(this.messageAttributes.RawSubscribeCmd.Endpoints.indexOf(f)===-1)throw new s.ButtplugDeviceError(`Device ${this.name} has no raw unsubscribable endpoint ${f}`);yield this.sendExpectOk(new r.RawUnsubscribeCmd(this.index,f))})}stop(){return i(this,void 0,void 0,function*(){yield this.sendExpectOk(new r.StopDeviceCmd(this.index))})}emitDisconnected(){this.emit("deviceremoved")}};return cr.ButtplugClientDevice=c,cr}var Qr={},dx;function aE(){if(dx)return Qr;dx=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var n=Qr&&Qr.__createBinding||(Object.create?function(o,u,c,h){h===void 0&&(h=c);var f=Object.getOwnPropertyDescriptor(u,c);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(o,h,f)}:function(o,u,c,h){h===void 0&&(h=c),o[h]=u[c]}),e=Qr&&Qr.__setModuleDefault||(Object.create?function(o,u){Object.defineProperty(o,"default",{enumerable:!0,value:u})}:function(o,u){o.default=u}),t=Qr&&Qr.__importStar||function(o){if(o&&o.__esModule)return o;var u={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&n(u,o,c);return e(u,o),u};Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.ButtplugMessageSorter=void 0;const i=t(Nl()),r=fh();let s=class{constructor(u){this._useCounter=u,this._counter=1,this._waitingMsgs=new Map}PrepareOutgoingMessage(u){this._useCounter&&(u.Id=this._counter,this._counter+=1);let c,h;const f=new Promise((m,x)=>{c=m,h=x});return this._waitingMsgs.set(u.Id,[c,h]),f}ParseIncomingMessages(u){const c=[];for(const h of u)if(h.Id!==i.SYSTEM_MESSAGE_ID&&this._waitingMsgs.has(h.Id)){const[f,m]=this._waitingMsgs.get(h.Id);if(h.Type===i.Error){m(r.ButtplugError.FromError(h));continue}f(h);continue}else c.push(h);return c}};return Qr.ButtplugMessageSorter=s,Qr}var Jr={},hx;function oE(){if(hx)return Jr;hx=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var n=Jr&&Jr.__createBinding||(Object.create?function(o,u,c,h){h===void 0&&(h=c);var f=Object.getOwnPropertyDescriptor(u,c);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(o,h,f)}:function(o,u,c,h){h===void 0&&(h=c),o[h]=u[c]}),e=Jr&&Jr.__setModuleDefault||(Object.create?function(o,u){Object.defineProperty(o,"default",{enumerable:!0,value:u})}:function(o,u){o.default=u}),t=Jr&&Jr.__importStar||function(o){if(o&&o.__esModule)return o;var u={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&n(u,o,c);return e(u,o),u};Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.ButtplugClientConnectorException=void 0;const i=fh(),r=t(Nl());let s=class extends i.ButtplugError{constructor(u){super(u,r.ErrorClass.ERROR_UNKNOWN)}};return Jr.ButtplugClientConnectorException=s,Jr}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var fx;function aP(){if(fx)return ur;fx=1;var n=ur&&ur.__createBinding||(Object.create?function(w,A,C,D){D===void 0&&(D=C);var N=Object.getOwnPropertyDescriptor(A,C);(!N||("get"in N?!A.__esModule:N.writable||N.configurable))&&(N={enumerable:!0,get:function(){return A[C]}}),Object.defineProperty(w,D,N)}:function(w,A,C,D){D===void 0&&(D=C),w[D]=A[C]}),e=ur&&ur.__setModuleDefault||(Object.create?function(w,A){Object.defineProperty(w,"default",{enumerable:!0,value:A})}:function(w,A){w.default=A}),t=ur&&ur.__importStar||function(w){if(w&&w.__esModule)return w;var A={};if(w!=null)for(var C in w)C!=="default"&&Object.prototype.hasOwnProperty.call(w,C)&&n(A,w,C);return e(A,w),A},i=ur&&ur.__awaiter||function(w,A,C,D){function N(L){return L instanceof C?L:new C(function(P){P(L)})}return new(C||(C=Promise))(function(L,P){function X(z){try{K(D.next(z))}catch(J){P(J)}}function j(z){try{K(D.throw(z))}catch(J){P(J)}}function K(z){z.done?L(z.value):N(z.value).then(X,j)}K((D=D.apply(w,A||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0}),ur.ButtplugClient=void 0;const r=iE(),s=Eg(),o=sE(),u=aE(),c=t(Nl()),h=fh(),f=oE(),m=Ag();class x extends s.EventEmitter{constructor(A="Generic Buttplug Client"){super(),this._pingTimer=null,this._connector=null,this._devices=new Map,this._logger=r.ButtplugLogger.Logger,this._isScanning=!1,this._sorter=new u.ButtplugMessageSorter(!0),this.connect=C=>i(this,void 0,void 0,function*(){this._logger.Info(`ButtplugClient: Connecting using ${C.constructor.name}`),yield C.connect(),this._connector=C,this._connector.addListener("message",this.parseMessages),this._connector.addListener("disconnect",this.disconnectHandler),yield this.initializeConnection()}),this.disconnect=()=>i(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: Disconnect called"),this.checkConnector(),yield this.shutdownConnection(),yield this._connector.disconnect()}),this.startScanning=()=>i(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StartScanning called"),this._isScanning=!0,yield this.sendMsgExpectOk(new c.StartScanning)}),this.stopScanning=()=>i(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopScanning called"),this._isScanning=!1,yield this.sendMsgExpectOk(new c.StopScanning)}),this.stopAllDevices=()=>i(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopAllDevices"),yield this.sendMsgExpectOk(new c.StopAllDevices)}),this.disconnectHandler=()=>{this._logger.Info("ButtplugClient: Disconnect event receieved."),this.emit("disconnect")},this.parseMessages=C=>{const D=this._sorter.ParseIncomingMessages(C);for(const N of D)switch((0,m.getMessageClassFromMessage)(N)){case c.DeviceAdded:{const L=N,P=o.ButtplugClientDevice.fromMsg(L,this.sendDeviceMessageClosure);this._devices.set(L.DeviceIndex,P),this.emit("deviceadded",P);break}case c.DeviceRemoved:{const L=N;if(this._devices.has(L.DeviceIndex)){const P=this._devices.get(L.DeviceIndex);P==null||P.emitDisconnected(),this._devices.delete(L.DeviceIndex),this.emit("deviceremoved",P)}break}case c.ScanningFinished:this._isScanning=!1,this.emit("scanningfinished",N);break}},this.initializeConnection=()=>i(this,void 0,void 0,function*(){this.checkConnector();const C=yield this.sendMessage(new c.RequestServerInfo(this._clientName,c.MESSAGE_SPEC_VERSION));switch((0,m.getMessageClassFromMessage)(C)){case c.ServerInfo:{const D=C;if(this._logger.Info(`ButtplugClient: Connected to Server ${D.ServerName}`),D.MaxPingTime,D.MessageVersion<c.MESSAGE_SPEC_VERSION)throw yield this._connector.disconnect(),h.ButtplugError.LogAndError(h.ButtplugInitError,this._logger,`Server protocol version ${D.MessageVersion} is older than client protocol version ${c.MESSAGE_SPEC_VERSION}. Please update server.`);return yield this.requestDeviceList(),!0}case c.Error:{yield this._connector.disconnect();const D=C;throw h.ButtplugError.LogAndError(h.ButtplugInitError,this._logger,`Cannot connect to server. ${D.ErrorMessage}`)}}return!1}),this.requestDeviceList=()=>i(this,void 0,void 0,function*(){this.checkConnector(),this._logger.Debug("ButtplugClient: ReceiveDeviceList called"),(yield this.sendMessage(new c.RequestDeviceList)).Devices.forEach(D=>{if(this._devices.has(D.DeviceIndex))this._logger.Debug(`ButtplugClient: Device already added: ${D}`);else{const N=o.ButtplugClientDevice.fromMsg(D,this.sendDeviceMessageClosure);this._logger.Debug(`ButtplugClient: Adding Device: ${N}`),this._devices.set(D.DeviceIndex,N),this.emit("deviceadded",N)}})}),this.shutdownConnection=()=>i(this,void 0,void 0,function*(){yield this.stopAllDevices(),this._pingTimer!==null&&(clearInterval(this._pingTimer),this._pingTimer=null)}),this.sendMsgExpectOk=C=>i(this,void 0,void 0,function*(){const D=yield this.sendMessage(C);switch((0,m.getMessageClassFromMessage)(D)){case c.Ok:return;case c.Error:throw h.ButtplugError.FromError(D);default:throw h.ButtplugError.LogAndError(h.ButtplugMessageError,this._logger,`Message type ${(0,m.getMessageClassFromMessage)(D).constructor} not handled by SendMsgExpectOk`)}}),this.sendDeviceMessageClosure=(C,D)=>i(this,void 0,void 0,function*(){return yield this.sendDeviceMessage(C,D)}),this._clientName=A,this._logger.Debug(`ButtplugClient: Client ${A} created.`)}get connected(){return this._connector!==null&&this._connector.Connected}get devices(){this.checkConnector();const A=[];return this._devices.forEach(C=>{A.push(C)}),A}get isScanning(){return this._isScanning}sendDeviceMessage(A,C){return i(this,void 0,void 0,function*(){if(this.checkConnector(),this._devices.get(A.index)===void 0)throw h.ButtplugError.LogAndError(h.ButtplugDeviceError,this._logger,`Device ${A.index} not available.`);return C.DeviceIndex=A.index,yield this.sendMessage(C)})}sendMessage(A){return i(this,void 0,void 0,function*(){this.checkConnector();const C=this._sorter.PrepareOutgoingMessage(A);return yield this._connector.send(A),yield C})}checkConnector(){if(!this.connected)throw new f.ButtplugClientConnectorException("ButtplugClient not connected")}}return ur.ButtplugClient=x,ur}var Sd={},hl={};/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var px;function oP(){if(px)return hl;px=1;var n=hl&&hl.__awaiter||function(r,s,o,u){function c(h){return h instanceof o?h:new o(function(f){f(h)})}return new(o||(o=Promise))(function(h,f){function m(A){try{w(u.next(A))}catch(C){f(C)}}function x(A){try{w(u.throw(A))}catch(C){f(C)}}function w(A){A.done?h(A.value):c(A.value).then(m,x)}w((u=u.apply(r,s||[])).next())})};Object.defineProperty(hl,"__esModule",{value:!0}),hl.ButtplugBrowserWebsocketConnector=void 0;const e=Eg(),t=Ag();let i=class extends e.EventEmitter{constructor(s){super(),this._url=s,this._websocketConstructor=null,this.connect=()=>n(this,void 0,void 0,function*(){var o;const u=new((o=this._websocketConstructor)!==null&&o!==void 0?o:WebSocket)(this._url);let c,h;const f=new Promise((x,w)=>{c=x,h=w}),m=()=>h();return u.addEventListener("open",()=>n(this,void 0,void 0,function*(){this._ws=u;try{yield this.initialize(),this._ws.addEventListener("message",x=>{this.parseIncomingMessage(x)}),this._ws.removeEventListener("close",m),this._ws.addEventListener("close",this.disconnect),c()}catch(x){console.log(x),h()}})),u.addEventListener("close",m),f}),this.disconnect=()=>n(this,void 0,void 0,function*(){this.Connected&&(this._ws.close(),this._ws=void 0,this.emit("disconnect"))}),this.initialize=()=>n(this,void 0,void 0,function*(){return Promise.resolve()})}get Connected(){return this._ws!==void 0}sendMessage(s){if(!this.Connected)throw new Error("ButtplugBrowserWebsocketConnector not connected");this._ws.send("["+s.toJSON()+"]")}parseIncomingMessage(s){if(typeof s.data=="string"){const o=(0,t.fromJSON)(s.data);this.emit("message",o)}else s.data instanceof Blob}onReaderLoad(s){const o=(0,t.fromJSON)(s.target.result);this.emit("message",o)}};return hl.ButtplugBrowserWebsocketConnector=i,hl}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var gx;function lE(){if(gx)return Sd;gx=1,Object.defineProperty(Sd,"__esModule",{value:!0}),Sd.ButtplugBrowserWebsocketClientConnector=void 0;const n=oP();let e=class extends n.ButtplugBrowserWebsocketConnector{constructor(){super(...arguments),this.send=i=>{if(!this.Connected)throw new Error("ButtplugClient not connected");this.sendMessage(i)}}};return Sd.ButtplugBrowserWebsocketClientConnector=e,Sd}var Td={},r0,mx;function lP(){return mx||(mx=1,r0=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),r0}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var yx;function uP(){if(yx)return Td;yx=1,Object.defineProperty(Td,"__esModule",{value:!0}),Td.ButtplugNodeWebsocketClientConnector=void 0;const n=lE(),e=lP();let t=class extends n.ButtplugBrowserWebsocketClientConnector{constructor(){super(...arguments),this._websocketConstructor=e.WebSocket}};return Td.ButtplugNodeWebsocketClientConnector=t,Td}var s0={},vx;function cP(){if(vx)return s0;vx=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */return Object.defineProperty(s0,"__esModule",{value:!0}),s0}var _x;function dP(){return _x||(_x=1,function(n){/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var e=cl&&cl.__createBinding||(Object.create?function(i,r,s,o){o===void 0&&(o=s);var u=Object.getOwnPropertyDescriptor(r,s);(!u||("get"in u?!r.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(i,o,u)}:function(i,r,s,o){o===void 0&&(o=s),i[o]=r[s]}),t=cl&&cl.__exportStar||function(i,r){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,i,s)};Object.defineProperty(n,"__esModule",{value:!0}),t(aP(),n),t(sE(),n),t(lE(),n),t(uP(),n),t(oE(),n),t(aE(),n),t(cP(),n),t(Nl(),n),t(Ag(),n),t(iE(),n),t(fh(),n)}(cl)),cl}var Zr=dP(),rp={exports:{}},hP=rp.exports,bx;function fP(){return bx||(bx=1,function(n,e){(function(i,r){n.exports=r()})(typeof self<"u"?self:hP,function(){return function(t){var i={};function r(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=i,r.d=function(s,o,u){r.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:u})},r.r=function(s){Object.defineProperty(s,"__esModule",{value:!0})},r.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(o,"a",o),o},r.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},r.p="",r(r.s=0)}({"./dist/icons.json":function(t){t.exports={activity:'<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',airplay:'<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon>',"alert-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',"align-center":'<line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line>',"align-justify":'<line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line>',"align-left":'<line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line>',"align-right":'<line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line>',anchor:'<circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>',aperture:'<circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',"arrow-down-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line>',"arrow-down-left":'<line x1="17" y1="7" x2="7" y2="17"></line><polyline points="17 17 7 17 7 7"></polyline>',"arrow-down-right":'<line x1="7" y1="7" x2="17" y2="17"></line><polyline points="17 7 17 17 7 17"></polyline>',"arrow-down":'<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',"arrow-left-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',"arrow-left":'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',"arrow-right-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',"arrow-right":'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',"arrow-up-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line>',"arrow-up-left":'<line x1="17" y1="17" x2="7" y2="7"></line><polyline points="7 17 7 7 17 7"></polyline>',"arrow-up-right":'<line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline>',"arrow-up":'<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',"at-sign":'<circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>',award:'<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',"bar-chart-2":'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',"bar-chart":'<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',"battery-charging":'<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',battery:'<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',"bell-off":'<path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line>',bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',bluetooth:'<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',bold:'<path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>',"book-open":'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',book:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',bookmark:'<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',box:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',calendar:'<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',"camera-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"></path>',camera:'<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',cast:'<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line>',"check-circle":'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',"check-square":'<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',check:'<polyline points="20 6 9 17 4 12"></polyline>',"chevron-down":'<polyline points="6 9 12 15 18 9"></polyline>',"chevron-left":'<polyline points="15 18 9 12 15 6"></polyline>',"chevron-right":'<polyline points="9 18 15 12 9 6"></polyline>',"chevron-up":'<polyline points="18 15 12 9 6 15"></polyline>',"chevrons-down":'<polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline>',"chevrons-left":'<polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline>',"chevrons-right":'<polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline>',"chevrons-up":'<polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline>',chrome:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="21.17" y1="8" x2="12" y2="8"></line><line x1="3.95" y1="6.06" x2="8.54" y2="14"></line><line x1="10.88" y1="21.94" x2="15.46" y2="14"></line>',circle:'<circle cx="12" cy="12" r="10"></circle>',clipboard:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',clock:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',"cloud-drizzle":'<line x1="8" y1="19" x2="8" y2="21"></line><line x1="8" y1="13" x2="8" y2="15"></line><line x1="16" y1="19" x2="16" y2="21"></line><line x1="16" y1="13" x2="16" y2="15"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="12" y1="15" x2="12" y2="17"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-lightning":'<path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline>',"cloud-off":'<path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path><line x1="1" y1="1" x2="23" y2="23"></line>',"cloud-rain":'<line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-snow":'<path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="16" x2="8.01" y2="16"></line><line x1="8" y1="20" x2="8.01" y2="20"></line><line x1="12" y1="18" x2="12.01" y2="18"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="16" y1="16" x2="16.01" y2="16"></line><line x1="16" y1="20" x2="16.01" y2="20"></line>',cloud:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',code:'<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',codepen:'<polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"></polygon><line x1="12" y1="22" x2="12" y2="15.5"></line><polyline points="22 8.5 12 15.5 2 8.5"></polyline><polyline points="2 15.5 12 8.5 22 15.5"></polyline><line x1="12" y1="2" x2="12" y2="8.5"></line>',codesandbox:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',columns:'<path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>',command:'<path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>',compass:'<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',copy:'<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',"corner-down-left":'<polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path>',"corner-down-right":'<polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',"corner-left-down":'<polyline points="14 15 9 20 4 15"></polyline><path d="M20 4h-7a4 4 0 0 0-4 4v12"></path>',"corner-left-up":'<polyline points="14 9 9 4 4 9"></polyline><path d="M20 20h-7a4 4 0 0 1-4-4V4"></path>',"corner-right-down":'<polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>',"corner-right-up":'<polyline points="10 9 15 4 20 9"></polyline><path d="M4 20h7a4 4 0 0 0 4-4V4"></path>',"corner-up-left":'<polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>',"corner-up-right":'<polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>',cpu:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line>',"credit-card":'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',crop:'<path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path>',crosshair:'<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',database:'<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',delete:'<path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line>',disc:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle>',"divide-circle":'<line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line><circle cx="12" cy="12" r="10"></circle>',"divide-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line>',divide:'<circle cx="12" cy="6" r="2"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="2"></circle>',"dollar-sign":'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',"download-cloud":'<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',dribbble:'<circle cx="12" cy="12" r="10"></circle><path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32"></path>',droplet:'<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>',"edit-2":'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',"edit-3":'<path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>',edit:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',"external-link":'<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',"eye-off":'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>',eye:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',facebook:'<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>',"fast-forward":'<polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon>',feather:'<path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line>',figma:'<path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"></path><path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"></path><path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"></path><path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"></path><path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"></path>',"file-minus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line>',"file-plus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line>',"file-text":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',file:'<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',film:'<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',filter:'<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',flag:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',"folder-minus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line>',"folder-plus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line>',folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',framer:'<path d="M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7"></path>',frown:'<circle cx="12" cy="12" r="10"></circle><path d="M16 16s-1.5-2-4-2-4 2-4 2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',gift:'<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',"git-branch":'<line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path>',"git-commit":'<circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line>',"git-merge":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M6 21V9a9 9 0 0 0 9 9"></path>',"git-pull-request":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line>',github:'<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',gitlab:'<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>',globe:'<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',grid:'<rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>',"hard-drive":'<line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line>',hash:'<line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>',headphones:'<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',"help-circle":'<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',hexagon:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>',home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',inbox:'<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',instagram:'<rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>',italic:'<line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line>',key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',layers:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',layout:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',"life-buoy":'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line>',"link-2":'<path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line>',link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',linkedin:'<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',list:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',loader:'<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',"log-in":'<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',"log-out":'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',mail:'<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',"map-pin":'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',map:'<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line>',"maximize-2":'<polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line>',maximize:'<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',meh:'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',menu:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',"message-circle":'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',"message-square":'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',"mic-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',mic:'<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',"minimize-2":'<polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>',minimize:'<path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>',"minus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line>',"minus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',minus:'<line x1="5" y1="12" x2="19" y2="12"></line>',monitor:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',moon:'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',"more-horizontal":'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',"more-vertical":'<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',"mouse-pointer":'<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path>',move:'<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',"navigation-2":'<polygon points="12 2 19 21 12 17 5 21 12 2"></polygon>',navigation:'<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',octagon:'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>',package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',paperclip:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',"pause-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',"pen-tool":'<path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle>',percent:'<line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle>',"phone-call":'<path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-forwarded":'<polyline points="19 1 23 5 19 9"></polyline><line x1="15" y1="5" x2="23" y2="5"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-incoming":'<polyline points="16 2 16 8 22 8"></polyline><line x1="23" y1="1" x2="16" y2="8"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-missed":'<line x1="23" y1="1" x2="17" y2="7"></line><line x1="17" y1="1" x2="23" y2="7"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-off":'<path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path><line x1="23" y1="1" x2="1" y2="23"></line>',"phone-outgoing":'<polyline points="23 7 23 1 17 1"></polyline><line x1="16" y1="8" x2="23" y2="1"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"pie-chart":'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',"play-circle":'<circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon>',play:'<polygon points="5 3 19 12 5 21 5 3"></polygon>',"plus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',"plus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',plus:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',pocket:'<path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path><polyline points="8 10 12 14 16 10"></polyline>',power:'<path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line>',printer:'<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',radio:'<circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path>',"refresh-ccw":'<polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>',"refresh-cw":'<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',repeat:'<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path>',rewind:'<polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon>',"rotate-ccw":'<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',"rotate-cw":'<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',rss:'<path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',send:'<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',server:'<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',"share-2":'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',share:'<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line>',"shield-off":'<path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line>',shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',"shopping-bag":'<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path>',"shopping-cart":'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',shuffle:'<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',sidebar:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line>',"skip-back":'<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',"skip-forward":'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',slack:'<path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path>',slash:'<circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>',sliders:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',smile:'<circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',speaker:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><circle cx="12" cy="14" r="4"></circle><line x1="12" y1="6" x2="12.01" y2="6"></line>',square:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',"stop-circle":'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',sun:'<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',sunrise:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline>',sunset:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="9" x2="12" y2="2"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="16 5 12 9 8 5"></polyline>',table:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"></path>',tablet:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',tag:'<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',target:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',terminal:'<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',thermometer:'<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',"thumbs-down":'<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',"thumbs-up":'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',"toggle-left":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle>',"toggle-right":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle>',tool:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',"trash-2":'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',trello:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>',"trending-down":'<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',"trending-up":'<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',triangle:'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>',truck:'<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',tv:'<rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline>',twitch:'<path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>',twitter:'<path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>',type:'<polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line>',umbrella:'<path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path>',underline:'<path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line>',unlock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',"upload-cloud":'<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',"user-check":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',"user-minus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="23" y1="11" x2="17" y2="11"></line>',"user-plus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',"user-x":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="18" y1="8" x2="23" y2="13"></line><line x1="23" y1="8" x2="18" y2="13"></line>',user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',"video-off":'<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',voicemail:'<circle cx="5.5" cy="11.5" r="4.5"></circle><circle cx="18.5" cy="11.5" r="4.5"></circle><line x1="5.5" y1="16" x2="18.5" y2="16"></line>',"volume-1":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-2":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-x":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',volume:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',watch:'<circle cx="12" cy="12" r="7"></circle><polyline points="12 9 12 12 13.5 13.5"></polyline><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>',"wifi-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wifi:'<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wind:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>',"x-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line>',x:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',youtube:'<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>',"zap-off":'<polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line>',zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',"zoom-in":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line>',"zoom-out":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line>'}},"./node_modules/classnames/dedupe.js":function(t,i,r){var s,o;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var u=function(){function c(){}c.prototype=Object.create(null);function h(N,L){for(var P=L.length,X=0;X<P;++X)C(N,L[X])}var f={}.hasOwnProperty;function m(N,L){N[L]=!0}function x(N,L){for(var P in L)f.call(L,P)&&(N[P]=!!L[P])}var w=/\s+/;function A(N,L){for(var P=L.split(w),X=P.length,j=0;j<X;++j)N[P[j]]=!0}function C(N,L){if(L){var P=typeof L;P==="string"?A(N,L):Array.isArray(L)?h(N,L):P==="object"?x(N,L):P==="number"&&m(N,L)}}function D(){for(var N=arguments.length,L=Array(N),P=0;P<N;P++)L[P]=arguments[P];var X=new c;h(X,L);var j=[];for(var K in X)X[K]&&j.push(K);return j.join(" ")}return D}();typeof t<"u"&&t.exports?t.exports=u:(s=[],o=(function(){return u}).apply(i,s),o!==void 0&&(t.exports=o))})()},"./node_modules/core-js/es/array/from.js":function(t,i,r){r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/es.array.from.js");var s=r("./node_modules/core-js/internals/path.js");t.exports=s.Array.from},"./node_modules/core-js/internals/a-function.js":function(t,i){t.exports=function(r){if(typeof r!="function")throw TypeError(String(r)+" is not a function");return r}},"./node_modules/core-js/internals/an-object.js":function(t,i,r){var s=r("./node_modules/core-js/internals/is-object.js");t.exports=function(o){if(!s(o))throw TypeError(String(o)+" is not an object");return o}},"./node_modules/core-js/internals/array-from.js":function(t,i,r){var s=r("./node_modules/core-js/internals/bind-context.js"),o=r("./node_modules/core-js/internals/to-object.js"),u=r("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),c=r("./node_modules/core-js/internals/is-array-iterator-method.js"),h=r("./node_modules/core-js/internals/to-length.js"),f=r("./node_modules/core-js/internals/create-property.js"),m=r("./node_modules/core-js/internals/get-iterator-method.js");t.exports=function(w){var A=o(w),C=typeof this=="function"?this:Array,D=arguments.length,N=D>1?arguments[1]:void 0,L=N!==void 0,P=0,X=m(A),j,K,z,J;if(L&&(N=s(N,D>2?arguments[2]:void 0,2)),X!=null&&!(C==Array&&c(X)))for(J=X.call(A),K=new C;!(z=J.next()).done;P++)f(K,P,L?u(J,N,[z.value,P],!0):z.value);else for(j=h(A.length),K=new C(j);j>P;P++)f(K,P,L?N(A[P],P):A[P]);return K.length=P,K}},"./node_modules/core-js/internals/array-includes.js":function(t,i,r){var s=r("./node_modules/core-js/internals/to-indexed-object.js"),o=r("./node_modules/core-js/internals/to-length.js"),u=r("./node_modules/core-js/internals/to-absolute-index.js");t.exports=function(c){return function(h,f,m){var x=s(h),w=o(x.length),A=u(m,w),C;if(c&&f!=f){for(;w>A;)if(C=x[A++],C!=C)return!0}else for(;w>A;A++)if((c||A in x)&&x[A]===f)return c||A||0;return!c&&-1}}},"./node_modules/core-js/internals/bind-context.js":function(t,i,r){var s=r("./node_modules/core-js/internals/a-function.js");t.exports=function(o,u,c){if(s(o),u===void 0)return o;switch(c){case 0:return function(){return o.call(u)};case 1:return function(h){return o.call(u,h)};case 2:return function(h,f){return o.call(u,h,f)};case 3:return function(h,f,m){return o.call(u,h,f,m)}}return function(){return o.apply(u,arguments)}}},"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(t,i,r){var s=r("./node_modules/core-js/internals/an-object.js");t.exports=function(o,u,c,h){try{return h?u(s(c)[0],c[1]):u(c)}catch(m){var f=o.return;throw f!==void 0&&s(f.call(o)),m}}},"./node_modules/core-js/internals/check-correctness-of-iteration.js":function(t,i,r){var s=r("./node_modules/core-js/internals/well-known-symbol.js"),o=s("iterator"),u=!1;try{var c=0,h={next:function(){return{done:!!c++}},return:function(){u=!0}};h[o]=function(){return this},Array.from(h,function(){throw 2})}catch{}t.exports=function(f,m){if(!m&&!u)return!1;var x=!1;try{var w={};w[o]=function(){return{next:function(){return{done:x=!0}}}},f(w)}catch{}return x}},"./node_modules/core-js/internals/classof-raw.js":function(t,i){var r={}.toString;t.exports=function(s){return r.call(s).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(t,i,r){var s=r("./node_modules/core-js/internals/classof-raw.js"),o=r("./node_modules/core-js/internals/well-known-symbol.js"),u=o("toStringTag"),c=s(function(){return arguments}())=="Arguments",h=function(f,m){try{return f[m]}catch{}};t.exports=function(f){var m,x,w;return f===void 0?"Undefined":f===null?"Null":typeof(x=h(m=Object(f),u))=="string"?x:c?s(m):(w=s(m))=="Object"&&typeof m.callee=="function"?"Arguments":w}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(t,i,r){var s=r("./node_modules/core-js/internals/has.js"),o=r("./node_modules/core-js/internals/own-keys.js"),u=r("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),c=r("./node_modules/core-js/internals/object-define-property.js");t.exports=function(h,f){for(var m=o(f),x=c.f,w=u.f,A=0;A<m.length;A++){var C=m[A];s(h,C)||x(h,C,w(f,C))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(t,i,r){var s=r("./node_modules/core-js/internals/fails.js");t.exports=!s(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},"./node_modules/core-js/internals/create-iterator-constructor.js":function(t,i,r){var s=r("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,o=r("./node_modules/core-js/internals/object-create.js"),u=r("./node_modules/core-js/internals/create-property-descriptor.js"),c=r("./node_modules/core-js/internals/set-to-string-tag.js"),h=r("./node_modules/core-js/internals/iterators.js"),f=function(){return this};t.exports=function(m,x,w){var A=x+" Iterator";return m.prototype=o(s,{next:u(1,w)}),c(m,A,!1,!0),h[A]=f,m}},"./node_modules/core-js/internals/create-property-descriptor.js":function(t,i){t.exports=function(r,s){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:s}}},"./node_modules/core-js/internals/create-property.js":function(t,i,r){var s=r("./node_modules/core-js/internals/to-primitive.js"),o=r("./node_modules/core-js/internals/object-define-property.js"),u=r("./node_modules/core-js/internals/create-property-descriptor.js");t.exports=function(c,h,f){var m=s(h);m in c?o.f(c,m,u(0,f)):c[m]=f}},"./node_modules/core-js/internals/define-iterator.js":function(t,i,r){var s=r("./node_modules/core-js/internals/export.js"),o=r("./node_modules/core-js/internals/create-iterator-constructor.js"),u=r("./node_modules/core-js/internals/object-get-prototype-of.js"),c=r("./node_modules/core-js/internals/object-set-prototype-of.js"),h=r("./node_modules/core-js/internals/set-to-string-tag.js"),f=r("./node_modules/core-js/internals/hide.js"),m=r("./node_modules/core-js/internals/redefine.js"),x=r("./node_modules/core-js/internals/well-known-symbol.js"),w=r("./node_modules/core-js/internals/is-pure.js"),A=r("./node_modules/core-js/internals/iterators.js"),C=r("./node_modules/core-js/internals/iterators-core.js"),D=C.IteratorPrototype,N=C.BUGGY_SAFARI_ITERATORS,L=x("iterator"),P="keys",X="values",j="entries",K=function(){return this};t.exports=function(z,J,R,F,de,fe,le){o(R,J,F);var Se=function(Ie){if(Ie===de&&ue)return ue;if(!N&&Ie in re)return re[Ie];switch(Ie){case P:return function(){return new R(this,Ie)};case X:return function(){return new R(this,Ie)};case j:return function(){return new R(this,Ie)}}return function(){return new R(this)}},Ee=J+" Iterator",Ce=!1,re=z.prototype,te=re[L]||re["@@iterator"]||de&&re[de],ue=!N&&te||Se(de),ce=J=="Array"&&re.entries||te,k,Y,he;if(ce&&(k=u(ce.call(new z)),D!==Object.prototype&&k.next&&(!w&&u(k)!==D&&(c?c(k,D):typeof k[L]!="function"&&f(k,L,K)),h(k,Ee,!0,!0),w&&(A[Ee]=K))),de==X&&te&&te.name!==X&&(Ce=!0,ue=function(){return te.call(this)}),(!w||le)&&re[L]!==ue&&f(re,L,ue),A[J]=ue,de)if(Y={values:Se(X),keys:fe?ue:Se(P),entries:Se(j)},le)for(he in Y)(N||Ce||!(he in re))&&m(re,he,Y[he]);else s({target:J,proto:!0,forced:N||Ce},Y);return Y}},"./node_modules/core-js/internals/descriptors.js":function(t,i,r){var s=r("./node_modules/core-js/internals/fails.js");t.exports=!s(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/document-create-element.js":function(t,i,r){var s=r("./node_modules/core-js/internals/global.js"),o=r("./node_modules/core-js/internals/is-object.js"),u=s.document,c=o(u)&&o(u.createElement);t.exports=function(h){return c?u.createElement(h):{}}},"./node_modules/core-js/internals/enum-bug-keys.js":function(t,i){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(t,i,r){var s=r("./node_modules/core-js/internals/global.js"),o=r("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,u=r("./node_modules/core-js/internals/hide.js"),c=r("./node_modules/core-js/internals/redefine.js"),h=r("./node_modules/core-js/internals/set-global.js"),f=r("./node_modules/core-js/internals/copy-constructor-properties.js"),m=r("./node_modules/core-js/internals/is-forced.js");t.exports=function(x,w){var A=x.target,C=x.global,D=x.stat,N,L,P,X,j,K;if(C?L=s:D?L=s[A]||h(A,{}):L=(s[A]||{}).prototype,L)for(P in w){if(j=w[P],x.noTargetGet?(K=o(L,P),X=K&&K.value):X=L[P],N=m(C?P:A+(D?".":"#")+P,x.forced),!N&&X!==void 0){if(typeof j==typeof X)continue;f(j,X)}(x.sham||X&&X.sham)&&u(j,"sham",!0),c(L,P,j,x)}}},"./node_modules/core-js/internals/fails.js":function(t,i){t.exports=function(r){try{return!!r()}catch{return!0}}},"./node_modules/core-js/internals/function-to-string.js":function(t,i,r){var s=r("./node_modules/core-js/internals/shared.js");t.exports=s("native-function-to-string",Function.toString)},"./node_modules/core-js/internals/get-iterator-method.js":function(t,i,r){var s=r("./node_modules/core-js/internals/classof.js"),o=r("./node_modules/core-js/internals/iterators.js"),u=r("./node_modules/core-js/internals/well-known-symbol.js"),c=u("iterator");t.exports=function(h){if(h!=null)return h[c]||h["@@iterator"]||o[s(h)]}},"./node_modules/core-js/internals/global.js":function(t,i,r){(function(s){var o="object",u=function(c){return c&&c.Math==Math&&c};t.exports=u(typeof globalThis==o&&globalThis)||u(typeof window==o&&window)||u(typeof self==o&&self)||u(typeof s==o&&s)||Function("return this")()}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/core-js/internals/has.js":function(t,i){var r={}.hasOwnProperty;t.exports=function(s,o){return r.call(s,o)}},"./node_modules/core-js/internals/hidden-keys.js":function(t,i){t.exports={}},"./node_modules/core-js/internals/hide.js":function(t,i,r){var s=r("./node_modules/core-js/internals/descriptors.js"),o=r("./node_modules/core-js/internals/object-define-property.js"),u=r("./node_modules/core-js/internals/create-property-descriptor.js");t.exports=s?function(c,h,f){return o.f(c,h,u(1,f))}:function(c,h,f){return c[h]=f,c}},"./node_modules/core-js/internals/html.js":function(t,i,r){var s=r("./node_modules/core-js/internals/global.js"),o=s.document;t.exports=o&&o.documentElement},"./node_modules/core-js/internals/ie8-dom-define.js":function(t,i,r){var s=r("./node_modules/core-js/internals/descriptors.js"),o=r("./node_modules/core-js/internals/fails.js"),u=r("./node_modules/core-js/internals/document-create-element.js");t.exports=!s&&!o(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(t,i,r){var s=r("./node_modules/core-js/internals/fails.js"),o=r("./node_modules/core-js/internals/classof-raw.js"),u="".split;t.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return o(c)=="String"?u.call(c,""):Object(c)}:Object},"./node_modules/core-js/internals/internal-state.js":function(t,i,r){var s=r("./node_modules/core-js/internals/native-weak-map.js"),o=r("./node_modules/core-js/internals/global.js"),u=r("./node_modules/core-js/internals/is-object.js"),c=r("./node_modules/core-js/internals/hide.js"),h=r("./node_modules/core-js/internals/has.js"),f=r("./node_modules/core-js/internals/shared-key.js"),m=r("./node_modules/core-js/internals/hidden-keys.js"),x=o.WeakMap,w,A,C,D=function(z){return C(z)?A(z):w(z,{})},N=function(z){return function(J){var R;if(!u(J)||(R=A(J)).type!==z)throw TypeError("Incompatible receiver, "+z+" required");return R}};if(s){var L=new x,P=L.get,X=L.has,j=L.set;w=function(z,J){return j.call(L,z,J),J},A=function(z){return P.call(L,z)||{}},C=function(z){return X.call(L,z)}}else{var K=f("state");m[K]=!0,w=function(z,J){return c(z,K,J),J},A=function(z){return h(z,K)?z[K]:{}},C=function(z){return h(z,K)}}t.exports={set:w,get:A,has:C,enforce:D,getterFor:N}},"./node_modules/core-js/internals/is-array-iterator-method.js":function(t,i,r){var s=r("./node_modules/core-js/internals/well-known-symbol.js"),o=r("./node_modules/core-js/internals/iterators.js"),u=s("iterator"),c=Array.prototype;t.exports=function(h){return h!==void 0&&(o.Array===h||c[u]===h)}},"./node_modules/core-js/internals/is-forced.js":function(t,i,r){var s=r("./node_modules/core-js/internals/fails.js"),o=/#|\.prototype\./,u=function(x,w){var A=h[c(x)];return A==m?!0:A==f?!1:typeof w=="function"?s(w):!!w},c=u.normalize=function(x){return String(x).replace(o,".").toLowerCase()},h=u.data={},f=u.NATIVE="N",m=u.POLYFILL="P";t.exports=u},"./node_modules/core-js/internals/is-object.js":function(t,i){t.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},"./node_modules/core-js/internals/is-pure.js":function(t,i){t.exports=!1},"./node_modules/core-js/internals/iterators-core.js":function(t,i,r){var s=r("./node_modules/core-js/internals/object-get-prototype-of.js"),o=r("./node_modules/core-js/internals/hide.js"),u=r("./node_modules/core-js/internals/has.js"),c=r("./node_modules/core-js/internals/well-known-symbol.js"),h=r("./node_modules/core-js/internals/is-pure.js"),f=c("iterator"),m=!1,x=function(){return this},w,A,C;[].keys&&(C=[].keys(),"next"in C?(A=s(s(C)),A!==Object.prototype&&(w=A)):m=!0),w==null&&(w={}),!h&&!u(w,f)&&o(w,f,x),t.exports={IteratorPrototype:w,BUGGY_SAFARI_ITERATORS:m}},"./node_modules/core-js/internals/iterators.js":function(t,i){t.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(t,i,r){var s=r("./node_modules/core-js/internals/fails.js");t.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!String(Symbol())})},"./node_modules/core-js/internals/native-weak-map.js":function(t,i,r){var s=r("./node_modules/core-js/internals/global.js"),o=r("./node_modules/core-js/internals/function-to-string.js"),u=s.WeakMap;t.exports=typeof u=="function"&&/native code/.test(o.call(u))},"./node_modules/core-js/internals/object-create.js":function(t,i,r){var s=r("./node_modules/core-js/internals/an-object.js"),o=r("./node_modules/core-js/internals/object-define-properties.js"),u=r("./node_modules/core-js/internals/enum-bug-keys.js"),c=r("./node_modules/core-js/internals/hidden-keys.js"),h=r("./node_modules/core-js/internals/html.js"),f=r("./node_modules/core-js/internals/document-create-element.js"),m=r("./node_modules/core-js/internals/shared-key.js"),x=m("IE_PROTO"),w="prototype",A=function(){},C=function(){var D=f("iframe"),N=u.length,L="<",P="script",X=">",j="java"+P+":",K;for(D.style.display="none",h.appendChild(D),D.src=String(j),K=D.contentWindow.document,K.open(),K.write(L+P+X+"document.F=Object"+L+"/"+P+X),K.close(),C=K.F;N--;)delete C[w][u[N]];return C()};t.exports=Object.create||function(N,L){var P;return N!==null?(A[w]=s(N),P=new A,A[w]=null,P[x]=N):P=C(),L===void 0?P:o(P,L)},c[x]=!0},"./node_modules/core-js/internals/object-define-properties.js":function(t,i,r){var s=r("./node_modules/core-js/internals/descriptors.js"),o=r("./node_modules/core-js/internals/object-define-property.js"),u=r("./node_modules/core-js/internals/an-object.js"),c=r("./node_modules/core-js/internals/object-keys.js");t.exports=s?Object.defineProperties:function(f,m){u(f);for(var x=c(m),w=x.length,A=0,C;w>A;)o.f(f,C=x[A++],m[C]);return f}},"./node_modules/core-js/internals/object-define-property.js":function(t,i,r){var s=r("./node_modules/core-js/internals/descriptors.js"),o=r("./node_modules/core-js/internals/ie8-dom-define.js"),u=r("./node_modules/core-js/internals/an-object.js"),c=r("./node_modules/core-js/internals/to-primitive.js"),h=Object.defineProperty;i.f=s?h:function(m,x,w){if(u(m),x=c(x,!0),u(w),o)try{return h(m,x,w)}catch{}if("get"in w||"set"in w)throw TypeError("Accessors not supported");return"value"in w&&(m[x]=w.value),m}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(t,i,r){var s=r("./node_modules/core-js/internals/descriptors.js"),o=r("./node_modules/core-js/internals/object-property-is-enumerable.js"),u=r("./node_modules/core-js/internals/create-property-descriptor.js"),c=r("./node_modules/core-js/internals/to-indexed-object.js"),h=r("./node_modules/core-js/internals/to-primitive.js"),f=r("./node_modules/core-js/internals/has.js"),m=r("./node_modules/core-js/internals/ie8-dom-define.js"),x=Object.getOwnPropertyDescriptor;i.f=s?x:function(A,C){if(A=c(A),C=h(C,!0),m)try{return x(A,C)}catch{}if(f(A,C))return u(!o.f.call(A,C),A[C])}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(t,i,r){var s=r("./node_modules/core-js/internals/object-keys-internal.js"),o=r("./node_modules/core-js/internals/enum-bug-keys.js"),u=o.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(h){return s(h,u)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(t,i){i.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(t,i,r){var s=r("./node_modules/core-js/internals/has.js"),o=r("./node_modules/core-js/internals/to-object.js"),u=r("./node_modules/core-js/internals/shared-key.js"),c=r("./node_modules/core-js/internals/correct-prototype-getter.js"),h=u("IE_PROTO"),f=Object.prototype;t.exports=c?Object.getPrototypeOf:function(m){return m=o(m),s(m,h)?m[h]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?f:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(t,i,r){var s=r("./node_modules/core-js/internals/has.js"),o=r("./node_modules/core-js/internals/to-indexed-object.js"),u=r("./node_modules/core-js/internals/array-includes.js"),c=r("./node_modules/core-js/internals/hidden-keys.js"),h=u(!1);t.exports=function(f,m){var x=o(f),w=0,A=[],C;for(C in x)!s(c,C)&&s(x,C)&&A.push(C);for(;m.length>w;)s(x,C=m[w++])&&(~h(A,C)||A.push(C));return A}},"./node_modules/core-js/internals/object-keys.js":function(t,i,r){var s=r("./node_modules/core-js/internals/object-keys-internal.js"),o=r("./node_modules/core-js/internals/enum-bug-keys.js");t.exports=Object.keys||function(c){return s(c,o)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(t,i,r){var s={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,u=o&&!s.call({1:2},1);i.f=u?function(h){var f=o(this,h);return!!f&&f.enumerable}:s},"./node_modules/core-js/internals/object-set-prototype-of.js":function(t,i,r){var s=r("./node_modules/core-js/internals/validate-set-prototype-of-arguments.js");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o=!1,u={},c;try{c=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,c.call(u,[]),o=u instanceof Array}catch{}return function(f,m){return s(f,m),o?c.call(f,m):f.__proto__=m,f}}():void 0)},"./node_modules/core-js/internals/own-keys.js":function(t,i,r){var s=r("./node_modules/core-js/internals/global.js"),o=r("./node_modules/core-js/internals/object-get-own-property-names.js"),u=r("./node_modules/core-js/internals/object-get-own-property-symbols.js"),c=r("./node_modules/core-js/internals/an-object.js"),h=s.Reflect;t.exports=h&&h.ownKeys||function(m){var x=o.f(c(m)),w=u.f;return w?x.concat(w(m)):x}},"./node_modules/core-js/internals/path.js":function(t,i,r){t.exports=r("./node_modules/core-js/internals/global.js")},"./node_modules/core-js/internals/redefine.js":function(t,i,r){var s=r("./node_modules/core-js/internals/global.js"),o=r("./node_modules/core-js/internals/shared.js"),u=r("./node_modules/core-js/internals/hide.js"),c=r("./node_modules/core-js/internals/has.js"),h=r("./node_modules/core-js/internals/set-global.js"),f=r("./node_modules/core-js/internals/function-to-string.js"),m=r("./node_modules/core-js/internals/internal-state.js"),x=m.get,w=m.enforce,A=String(f).split("toString");o("inspectSource",function(C){return f.call(C)}),(t.exports=function(C,D,N,L){var P=L?!!L.unsafe:!1,X=L?!!L.enumerable:!1,j=L?!!L.noTargetGet:!1;if(typeof N=="function"&&(typeof D=="string"&&!c(N,"name")&&u(N,"name",D),w(N).source=A.join(typeof D=="string"?D:"")),C===s){X?C[D]=N:h(D,N);return}else P?!j&&C[D]&&(X=!0):delete C[D];X?C[D]=N:u(C,D,N)})(Function.prototype,"toString",function(){return typeof this=="function"&&x(this).source||f.call(this)})},"./node_modules/core-js/internals/require-object-coercible.js":function(t,i){t.exports=function(r){if(r==null)throw TypeError("Can't call method on "+r);return r}},"./node_modules/core-js/internals/set-global.js":function(t,i,r){var s=r("./node_modules/core-js/internals/global.js"),o=r("./node_modules/core-js/internals/hide.js");t.exports=function(u,c){try{o(s,u,c)}catch{s[u]=c}return c}},"./node_modules/core-js/internals/set-to-string-tag.js":function(t,i,r){var s=r("./node_modules/core-js/internals/object-define-property.js").f,o=r("./node_modules/core-js/internals/has.js"),u=r("./node_modules/core-js/internals/well-known-symbol.js"),c=u("toStringTag");t.exports=function(h,f,m){h&&!o(h=m?h:h.prototype,c)&&s(h,c,{configurable:!0,value:f})}},"./node_modules/core-js/internals/shared-key.js":function(t,i,r){var s=r("./node_modules/core-js/internals/shared.js"),o=r("./node_modules/core-js/internals/uid.js"),u=s("keys");t.exports=function(c){return u[c]||(u[c]=o(c))}},"./node_modules/core-js/internals/shared.js":function(t,i,r){var s=r("./node_modules/core-js/internals/global.js"),o=r("./node_modules/core-js/internals/set-global.js"),u=r("./node_modules/core-js/internals/is-pure.js"),c="__core-js_shared__",h=s[c]||o(c,{});(t.exports=function(f,m){return h[f]||(h[f]=m!==void 0?m:{})})("versions",[]).push({version:"3.1.3",mode:u?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-at.js":function(t,i,r){var s=r("./node_modules/core-js/internals/to-integer.js"),o=r("./node_modules/core-js/internals/require-object-coercible.js");t.exports=function(u,c,h){var f=String(o(u)),m=s(c),x=f.length,w,A;return m<0||m>=x?h?"":void 0:(w=f.charCodeAt(m),w<55296||w>56319||m+1===x||(A=f.charCodeAt(m+1))<56320||A>57343?h?f.charAt(m):w:h?f.slice(m,m+2):(w-55296<<10)+(A-56320)+65536)}},"./node_modules/core-js/internals/to-absolute-index.js":function(t,i,r){var s=r("./node_modules/core-js/internals/to-integer.js"),o=Math.max,u=Math.min;t.exports=function(c,h){var f=s(c);return f<0?o(f+h,0):u(f,h)}},"./node_modules/core-js/internals/to-indexed-object.js":function(t,i,r){var s=r("./node_modules/core-js/internals/indexed-object.js"),o=r("./node_modules/core-js/internals/require-object-coercible.js");t.exports=function(u){return s(o(u))}},"./node_modules/core-js/internals/to-integer.js":function(t,i){var r=Math.ceil,s=Math.floor;t.exports=function(o){return isNaN(o=+o)?0:(o>0?s:r)(o)}},"./node_modules/core-js/internals/to-length.js":function(t,i,r){var s=r("./node_modules/core-js/internals/to-integer.js"),o=Math.min;t.exports=function(u){return u>0?o(s(u),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(t,i,r){var s=r("./node_modules/core-js/internals/require-object-coercible.js");t.exports=function(o){return Object(s(o))}},"./node_modules/core-js/internals/to-primitive.js":function(t,i,r){var s=r("./node_modules/core-js/internals/is-object.js");t.exports=function(o,u){if(!s(o))return o;var c,h;if(u&&typeof(c=o.toString)=="function"&&!s(h=c.call(o))||typeof(c=o.valueOf)=="function"&&!s(h=c.call(o))||!u&&typeof(c=o.toString)=="function"&&!s(h=c.call(o)))return h;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/uid.js":function(t,i){var r=0,s=Math.random();t.exports=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++r+s).toString(36))}},"./node_modules/core-js/internals/validate-set-prototype-of-arguments.js":function(t,i,r){var s=r("./node_modules/core-js/internals/is-object.js"),o=r("./node_modules/core-js/internals/an-object.js");t.exports=function(u,c){if(o(u),!s(c)&&c!==null)throw TypeError("Can't set "+String(c)+" as a prototype")}},"./node_modules/core-js/internals/well-known-symbol.js":function(t,i,r){var s=r("./node_modules/core-js/internals/global.js"),o=r("./node_modules/core-js/internals/shared.js"),u=r("./node_modules/core-js/internals/uid.js"),c=r("./node_modules/core-js/internals/native-symbol.js"),h=s.Symbol,f=o("wks");t.exports=function(m){return f[m]||(f[m]=c&&h[m]||(c?h:u)("Symbol."+m))}},"./node_modules/core-js/modules/es.array.from.js":function(t,i,r){var s=r("./node_modules/core-js/internals/export.js"),o=r("./node_modules/core-js/internals/array-from.js"),u=r("./node_modules/core-js/internals/check-correctness-of-iteration.js"),c=!u(function(h){Array.from(h)});s({target:"Array",stat:!0,forced:c},{from:o})},"./node_modules/core-js/modules/es.string.iterator.js":function(t,i,r){var s=r("./node_modules/core-js/internals/string-at.js"),o=r("./node_modules/core-js/internals/internal-state.js"),u=r("./node_modules/core-js/internals/define-iterator.js"),c="String Iterator",h=o.set,f=o.getterFor(c);u(String,"String",function(m){h(this,{type:c,string:String(m),index:0})},function(){var x=f(this),w=x.string,A=x.index,C;return A>=w.length?{value:void 0,done:!0}:(C=s(w,A,!0),x.index+=C.length,{value:C,done:!1})})},"./node_modules/webpack/buildin/global.js":function(t,i){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(r=window)}t.exports=r},"./src/default-attrs.json":function(t){t.exports={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}},"./src/icon.js":function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=Object.assign||function(C){for(var D=1;D<arguments.length;D++){var N=arguments[D];for(var L in N)Object.prototype.hasOwnProperty.call(N,L)&&(C[L]=N[L])}return C},o=function(){function C(D,N){for(var L=0;L<N.length;L++){var P=N[L];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(D,P.key,P)}}return function(D,N,L){return N&&C(D.prototype,N),L&&C(D,L),D}}(),u=r("./node_modules/classnames/dedupe.js"),c=m(u),h=r("./src/default-attrs.json"),f=m(h);function m(C){return C&&C.__esModule?C:{default:C}}function x(C,D){if(!(C instanceof D))throw new TypeError("Cannot call a class as a function")}var w=function(){function C(D,N){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];x(this,C),this.name=D,this.contents=N,this.tags=L,this.attrs=s({},f.default,{class:"feather feather-"+D})}return o(C,[{key:"toSvg",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},L=s({},this.attrs,N,{class:(0,c.default)(this.attrs.class,N.class)});return"<svg "+A(L)+">"+this.contents+"</svg>"}},{key:"toString",value:function(){return this.contents}}]),C}();function A(C){return Object.keys(C).map(function(D){return D+'="'+C[D]+'"'}).join(" ")}i.default=w},"./src/icons.js":function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r("./src/icon.js"),o=m(s),u=r("./dist/icons.json"),c=m(u),h=r("./src/tags.json"),f=m(h);function m(x){return x&&x.__esModule?x:{default:x}}i.default=Object.keys(c.default).map(function(x){return new o.default(x,c.default[x],f.default[x])}).reduce(function(x,w){return x[w.name]=w,x},{})},"./src/index.js":function(t,i,r){var s=r("./src/icons.js"),o=m(s),u=r("./src/to-svg.js"),c=m(u),h=r("./src/replace.js"),f=m(h);function m(x){return x&&x.__esModule?x:{default:x}}t.exports={icons:o.default,toSvg:c.default,replace:f.default}},"./src/replace.js":function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=Object.assign||function(A){for(var C=1;C<arguments.length;C++){var D=arguments[C];for(var N in D)Object.prototype.hasOwnProperty.call(D,N)&&(A[N]=D[N])}return A},o=r("./node_modules/classnames/dedupe.js"),u=f(o),c=r("./src/icons.js"),h=f(c);function f(A){return A&&A.__esModule?A:{default:A}}function m(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof document>"u")throw new Error("`feather.replace()` only works in a browser environment.");var C=document.querySelectorAll("[data-feather]");Array.from(C).forEach(function(D){return x(D,A)})}function x(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=w(A),N=D["data-feather"];if(delete D["data-feather"],h.default[N]===void 0){console.warn("feather: '"+N+"' is not a valid icon");return}var L=h.default[N].toSvg(s({},C,D,{class:(0,u.default)(C.class,D.class)})),P=new DOMParser().parseFromString(L,"image/svg+xml"),X=P.querySelector("svg");A.parentNode.replaceChild(X,A)}function w(A){return Array.from(A.attributes).reduce(function(C,D){return C[D.name]=D.value,C},{})}i.default=m},"./src/tags.json":function(t){t.exports={activity:["pulse","health","action","motion"],airplay:["stream","cast","mirroring"],"alert-circle":["warning","alert","danger"],"alert-octagon":["warning","alert","danger"],"alert-triangle":["warning","alert","danger"],"align-center":["text alignment","center"],"align-justify":["text alignment","justified"],"align-left":["text alignment","left"],"align-right":["text alignment","right"],anchor:[],archive:["index","box"],"at-sign":["mention","at","email","message"],award:["achievement","badge"],aperture:["camera","photo"],"bar-chart":["statistics","diagram","graph"],"bar-chart-2":["statistics","diagram","graph"],battery:["power","electricity"],"battery-charging":["power","electricity"],bell:["alarm","notification","sound"],"bell-off":["alarm","notification","silent"],bluetooth:["wireless"],"book-open":["read","library"],book:["read","dictionary","booklet","magazine","library"],bookmark:["read","clip","marker","tag"],box:["cube"],briefcase:["work","bag","baggage","folder"],calendar:["date"],camera:["photo"],cast:["chromecast","airplay"],"chevron-down":["expand"],"chevron-up":["collapse"],circle:["off","zero","record"],clipboard:["copy"],clock:["time","watch","alarm"],"cloud-drizzle":["weather","shower"],"cloud-lightning":["weather","bolt"],"cloud-rain":["weather"],"cloud-snow":["weather","blizzard"],cloud:["weather"],codepen:["logo"],codesandbox:["logo"],code:["source","programming"],coffee:["drink","cup","mug","tea","cafe","hot","beverage"],columns:["layout"],command:["keyboard","cmd","terminal","prompt"],compass:["navigation","safari","travel","direction"],copy:["clone","duplicate"],"corner-down-left":["arrow","return"],"corner-down-right":["arrow"],"corner-left-down":["arrow"],"corner-left-up":["arrow"],"corner-right-down":["arrow"],"corner-right-up":["arrow"],"corner-up-left":["arrow"],"corner-up-right":["arrow"],cpu:["processor","technology"],"credit-card":["purchase","payment","cc"],crop:["photo","image"],crosshair:["aim","target"],database:["storage","memory"],delete:["remove"],disc:["album","cd","dvd","music"],"dollar-sign":["currency","money","payment"],droplet:["water"],edit:["pencil","change"],"edit-2":["pencil","change"],"edit-3":["pencil","change"],eye:["view","watch"],"eye-off":["view","watch","hide","hidden"],"external-link":["outbound"],facebook:["logo","social"],"fast-forward":["music"],figma:["logo","design","tool"],"file-minus":["delete","remove","erase"],"file-plus":["add","create","new"],"file-text":["data","txt","pdf"],film:["movie","video"],filter:["funnel","hopper"],flag:["report"],"folder-minus":["directory"],"folder-plus":["directory"],folder:["directory"],framer:["logo","design","tool"],frown:["emoji","face","bad","sad","emotion"],gift:["present","box","birthday","party"],"git-branch":["code","version control"],"git-commit":["code","version control"],"git-merge":["code","version control"],"git-pull-request":["code","version control"],github:["logo","version control"],gitlab:["logo","version control"],globe:["world","browser","language","translate"],"hard-drive":["computer","server","memory","data"],hash:["hashtag","number","pound"],headphones:["music","audio","sound"],heart:["like","love","emotion"],"help-circle":["question mark"],hexagon:["shape","node.js","logo"],home:["house","living"],image:["picture"],inbox:["email"],instagram:["logo","camera"],key:["password","login","authentication","secure"],layers:["stack"],layout:["window","webpage"],"life-buoy":["help","life ring","support"],link:["chain","url"],"link-2":["chain","url"],linkedin:["logo","social media"],list:["options"],lock:["security","password","secure"],"log-in":["sign in","arrow","enter"],"log-out":["sign out","arrow","exit"],mail:["email","message"],"map-pin":["location","navigation","travel","marker"],map:["location","navigation","travel"],maximize:["fullscreen"],"maximize-2":["fullscreen","arrows","expand"],meh:["emoji","face","neutral","emotion"],menu:["bars","navigation","hamburger"],"message-circle":["comment","chat"],"message-square":["comment","chat"],"mic-off":["record","sound","mute"],mic:["record","sound","listen"],minimize:["exit fullscreen","close"],"minimize-2":["exit fullscreen","arrows","close"],minus:["subtract"],monitor:["tv","screen","display"],moon:["dark","night"],"more-horizontal":["ellipsis"],"more-vertical":["ellipsis"],"mouse-pointer":["arrow","cursor"],move:["arrows"],music:["note"],navigation:["location","travel"],"navigation-2":["location","travel"],octagon:["stop"],package:["box","container"],paperclip:["attachment"],pause:["music","stop"],"pause-circle":["music","audio","stop"],"pen-tool":["vector","drawing"],percent:["discount"],"phone-call":["ring"],"phone-forwarded":["call"],"phone-incoming":["call"],"phone-missed":["call"],"phone-off":["call","mute"],"phone-outgoing":["call"],phone:["call"],play:["music","start"],"pie-chart":["statistics","diagram"],"play-circle":["music","start"],plus:["add","new"],"plus-circle":["add","new"],"plus-square":["add","new"],pocket:["logo","save"],power:["on","off"],printer:["fax","office","device"],radio:["signal"],"refresh-cw":["synchronise","arrows"],"refresh-ccw":["arrows"],repeat:["loop","arrows"],rewind:["music"],"rotate-ccw":["arrow"],"rotate-cw":["arrow"],rss:["feed","subscribe"],save:["floppy disk"],scissors:["cut"],search:["find","magnifier","magnifying glass"],send:["message","mail","email","paper airplane","paper aeroplane"],settings:["cog","edit","gear","preferences"],"share-2":["network","connections"],shield:["security","secure"],"shield-off":["security","insecure"],"shopping-bag":["ecommerce","cart","purchase","store"],"shopping-cart":["ecommerce","cart","purchase","store"],shuffle:["music"],"skip-back":["music"],"skip-forward":["music"],slack:["logo"],slash:["ban","no"],sliders:["settings","controls"],smartphone:["cellphone","device"],smile:["emoji","face","happy","good","emotion"],speaker:["audio","music"],star:["bookmark","favorite","like"],"stop-circle":["media","music"],sun:["brightness","weather","light"],sunrise:["weather","time","morning","day"],sunset:["weather","time","evening","night"],tablet:["device"],tag:["label"],target:["logo","bullseye"],terminal:["code","command line","prompt"],thermometer:["temperature","celsius","fahrenheit","weather"],"thumbs-down":["dislike","bad","emotion"],"thumbs-up":["like","good","emotion"],"toggle-left":["on","off","switch"],"toggle-right":["on","off","switch"],tool:["settings","spanner"],trash:["garbage","delete","remove","bin"],"trash-2":["garbage","delete","remove","bin"],triangle:["delta"],truck:["delivery","van","shipping","transport","lorry"],tv:["television","stream"],twitch:["logo"],twitter:["logo","social"],type:["text"],umbrella:["rain","weather"],unlock:["security"],"user-check":["followed","subscribed"],"user-minus":["delete","remove","unfollow","unsubscribe"],"user-plus":["new","add","create","follow","subscribe"],"user-x":["delete","remove","unfollow","unsubscribe","unavailable"],user:["person","account"],users:["group"],"video-off":["camera","movie","film"],video:["camera","movie","film"],voicemail:["phone"],volume:["music","sound","mute"],"volume-1":["music","sound"],"volume-2":["music","sound"],"volume-x":["music","sound","mute"],watch:["clock","time"],"wifi-off":["disabled"],wifi:["connection","signal","wireless"],wind:["weather","air"],"x-circle":["cancel","close","delete","remove","times","clear"],"x-octagon":["delete","stop","alert","warning","times","clear"],"x-square":["cancel","close","delete","remove","times","clear"],x:["cancel","close","delete","remove","times","clear"],youtube:["logo","video","play"],"zap-off":["flash","camera","lightning"],zap:["flash","camera","lightning"],"zoom-in":["magnifying glass"],"zoom-out":["magnifying glass"]}},"./src/to-svg.js":function(t,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s=r("./src/icons.js"),o=u(s);function u(h){return h&&h.__esModule?h:{default:h}}function c(h){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(console.warn("feather.toSvg() is deprecated. Please use feather.icons[name].toSvg() instead."),!h)throw new Error("The required `key` (icon name) parameter is missing.");if(!o.default[h])throw new Error("No icon matching '"+h+"'. See the complete list of icons at https://feathericons.com");return o.default[h].toSvg(f)}i.default=c},0:function(t,i,r){r("./node_modules/core-js/es/array/from.js"),t.exports=r("./src/index.js")}})})}(rp)),rp.exports}var pP=fP();const uE=Js(pP);var cE=Object.defineProperty,gP=(n,e,t)=>e in n?cE(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ke=(n,e)=>cE(n,"name",{value:e,configurable:!0}),ut=(n,e,t)=>gP(n,typeof e!="symbol"?e+"":e,t),a0={exports:{}},Cd={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function dE(){if(xx)return Cd;xx=1;var n=fc,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(u,c,h){var f,m={},x=null,w=null;h!==void 0&&(x=""+h),c.key!==void 0&&(x=""+c.key),c.ref!==void 0&&(w=c.ref);for(f in c)i.call(c,f)&&!s.hasOwnProperty(f)&&(m[f]=c[f]);if(u&&u.defaultProps)for(f in c=u.defaultProps,c)m[f]===void 0&&(m[f]=c[f]);return{$$typeof:e,type:u,key:x,ref:w,props:m,_owner:r.current}}return ke(o,"q"),Cd.Fragment=t,Cd.jsx=o,Cd.jsxs=o,Cd}ke(dE,"requireReactJsxRuntime_production_min");var Sx={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tx;function mP(){return Tx||(Tx=1),Sx}ke(mP,"requireReactJsxRuntime_development");var Cx;function hE(){return Cx||(Cx=1,a0.exports=dE()),a0.exports}ke(hE,"requireJsxRuntime");var ne=hE();const fE=ke(({className:n,size:e=24,...t})=>ne.jsxs("svg",{className:n,width:e,height:e,viewBox:"0 0 1080 1080",xmlns:"http://www.w3.org/2000/svg",...t,children:[ne.jsx("path",{d:"M0 0 C0.98444092 0.5667041 1.96888184 1.1334082 2.9831543 1.71728516 C11.79915747 6.81238697 20.55182327 12.01772296 29.30053711 17.22729492 C37.01717971 21.82181521 44.77417417 26.34062674 52.5625 30.8125 C62.57980932 36.56588394 72.52928972 42.42565338 82.45703125 48.33203125 C90.12448945 52.88651911 97.8292319 57.37078011 105.5625 61.8125 C114.43778787 66.91015627 123.26634893 72.079483 132.0625 77.3125 C141.99754115 83.22183413 151.97901105 89.0432911 161.99951172 94.80639648 C172.23102058 100.69094782 182.42633052 106.6363648 192.61669922 112.59179688 C195.53644319 114.29727968 198.4574316 116.00060877 201.37890625 117.703125 C212.90258952 124.4190222 224.4149979 131.15385372 235.91986084 137.9019165 C248.12240577 145.05881903 260.33991794 152.1898696 272.5625 159.3125 C286.02539523 167.15791485 299.4792247 175.01844523 312.91986084 182.9019165 C325.12240577 190.05881903 337.33991794 197.1898696 349.5625 204.3125 C365.49682551 213.59812481 381.42242035 222.89837799 397.32331848 232.24113464 C401.20081641 234.51783098 405.08665952 236.77969177 408.9765625 239.03515625 C410.92190154 240.1692253 412.86721561 241.30333721 414.8125 242.4375 C415.67439941 242.9332251 416.53629883 243.4289502 417.42431641 243.93969727 C428.5826319 250.4687809 437.81827372 257.53747917 442.03125 270.2265625 C444.71822729 280.77689979 443.53244603 291.21111996 438.20263672 300.76245117 C432.38406589 309.80903829 423.80579166 314.96817322 414.5625 320 C413.32178993 320.69045676 412.08189495 321.38237999 410.84277344 322.07568359 C408.31436743 323.48725669 405.78159044 324.89039462 403.24414062 326.28564453 C397.75033325 329.30652091 392.28298862 332.37466853 386.8125 335.4375 C385.7915625 336.00686279 384.770625 336.57622559 383.71875 337.1628418 C375.61125834 341.69308281 367.5897463 346.36086587 359.58105469 351.06298828 C351.41990626 355.84255592 343.17773139 360.46616602 334.91357422 365.06469727 C327.78621733 369.04065635 320.72310908 373.11413998 313.6875 377.25 C304.08543764 382.89231859 294.38029042 388.32652817 284.62939453 393.70678711 C277.21334148 397.80977022 269.86734825 402.01495979 262.5625 406.3125 C254.13027249 411.27329255 245.62827077 416.08609533 237.0625 420.8125 C227.40911754 426.14016517 217.846847 431.59932246 208.33984375 437.18359375 C200.67269608 441.68233073 192.94655455 446.0675082 185.19726562 450.42285156 C178.36018663 454.27423541 171.57869784 458.21313675 164.8125 462.1875 C155.16785768 467.84821163 145.42103902 473.30399746 135.62988281 478.70654297 C128.21364613 482.80957113 120.86750517 487.01486748 113.5625 491.3125 C105.13027394 496.27329169 96.62829665 501.08614413 88.0625 505.8125 C78.45433937 511.11456842 68.94070912 516.55210957 59.48046875 522.11328125 C51.36176661 526.87510919 43.16048432 531.47736805 34.93505859 536.05175781 C27.58740089 540.14898179 20.31389293 544.36008532 13.0625 548.625 C6.09749914 552.70974586 -0.88343497 556.74654328 -8 560.5625 C-8.66 560.92126221 -9.32 561.28002441 -10 561.6496582 C-19.49529425 566.65763629 -29.21138742 567.92877808 -39.625 565.1875 C-49.40844994 561.8063397 -58.01164742 554.96617899 -62.7890625 545.6875 C-65.1476677 539.98612341 -66.56491893 534.61368906 -66.55741024 528.41808891 C-66.55861445 527.45107135 -66.55981866 526.48405378 -66.56105936 525.48773265 C-66.55717915 524.4307918 -66.55329894 523.37385095 -66.54930115 522.28488159 C-66.54886525 520.58665532 -66.54886525 520.58665532 -66.54842055 518.85412145 C-66.54582889 515.02755993 -66.53561089 511.20105929 -66.52514648 507.37451172 C-66.52169149 505.31279562 -66.51896442 503.25107937 -66.5162843 501.18936213 C-66.46723654 464.5493012 -66.26073688 427.90939215 -66.06657338 391.26988077 C-66.03462433 385.23361215 -66.00328587 379.19734044 -65.97207451 373.16106796 C-65.86792731 353.02984479 -65.762487 332.89862903 -65.65524632 312.76742209 C-65.64953506 311.69529585 -65.64382379 310.62316961 -65.63793945 309.51855469 C-65.63222053 308.44504036 -65.62650161 307.37152604 -65.6206094 306.26548098 C-65.52818096 288.90048705 -65.43889183 271.5354786 -65.35104198 254.17046095 C-65.2596399 236.11053942 -65.16582381 218.05063172 -65.06965441 199.99073493 C-65.01619733 189.94345699 -64.96361915 179.89617657 -64.9136219 169.84888077 C-64.80062734 147.24727372 -64.66957889 124.64591045 -64.49601831 102.0446801 C-64.46274307 97.70566778 -64.43062744 93.36665294 -64.40105963 89.02761364 C-64.33650029 79.5765968 -64.26338248 70.12579335 -64.16400493 60.67507078 C-64.122571 56.72736636 -64.0853881 52.77976061 -64.06062138 48.83191323 C-64.03764267 45.21186234 -64.0008162 41.59221645 -63.95323582 37.97240773 C-63.93128529 36.04647398 -63.92344112 34.12039518 -63.91618669 32.19435 C-63.71565532 19.30425802 -60.63728685 9.53992519 -51.40234375 0.26953125 C-35.29393739 -13.44161682 -16.79770512 -9.85262895 0 0 Z ",fill:"currentColor",transform:"translate(78.4375,266.6875)"}),ne.jsx("path",{d:"M0 0 C10.32329688 10.12206302 15.43615919 25.94156498 20.8125 39.125 C21.11336517 39.8592218 21.41423035 40.5934436 21.72421265 41.34991455 C27.61188675 55.7421791 33.02150178 70.26584945 38 85 C38.57741943 86.70349609 38.57741943 86.70349609 39.16650391 88.44140625 C54.10899445 132.86198141 64.02602688 178.32585278 69.25 224.875 C69.33317474 225.61141724 69.41634949 226.34783447 69.50204468 227.10656738 C71.79828653 247.68010947 72.24389529 268.12198877 72.25 288.8125 C72.25066278 289.8433736 72.25066278 289.8433736 72.25133896 290.89507294 C72.25855596 312.34548781 71.86461832 333.62042507 69.25323486 354.93243408 C68.98919779 357.08819591 68.73437843 359.24493646 68.47998047 361.40185547 C61.35292101 421.02861519 45.76501631 479.47924086 23.25 535.125 C22.9876355 535.77660095 22.725271 536.4282019 22.45495605 537.09954834 C9.02987164 570.29702276 9.02987164 570.29702276 -7 578 C-17.72736492 582.36004862 -28.20065077 581.91965167 -38.984375 577.8828125 C-48.55476332 573.58342486 -56.02818825 566.70574915 -60.29296875 556.98828125 C-65.89344349 541.23887992 -61.76640772 527.30490002 -55.125 512.5625 C-30.0737579 454.99550864 -15.7886637 393.36843627 -10 331 C-9.89469971 329.93362305 -9.78939941 328.86724609 -9.6809082 327.76855469 C-8.71772342 316.63499471 -8.81392777 305.467739 -8.81469727 294.30078125 C-8.81253054 290.79935168 -8.79437695 287.2982483 -8.77539062 283.796875 C-8.72339401 263.16129731 -9.990864 242.65124978 -12.6875 222.1875 C-12.85411133 220.92164063 -13.02072266 219.65578125 -13.19238281 218.3515625 C-17.9169081 183.52793385 -25.75729187 149.2999983 -37 116 C-37.33080566 115.00258789 -37.66161133 114.00517578 -38.00244141 112.97753906 C-44.27861608 94.07593429 -51.57668965 75.66749695 -59.40625 57.359375 C-59.77290771 56.49948975 -60.13956543 55.63960449 -60.51733398 54.75366211 C-61.18491116 53.19442263 -61.85832848 51.63766207 -62.53930664 50.08422852 C-67.09251982 39.50524741 -69.14158402 28.43989337 -65.375 17.25 C-60.31379474 5.07479295 -52.7160209 -2.97224469 -40.5234375 -8.06640625 C-26.18561119 -13.37095809 -11.63699433 -9.1625641 0 0 Z ",fill:"currentColor",transform:"translate(991,265)"}),ne.jsx("path",{d:"M0 0 C0.71800781 0.24492187 1.43601562 0.48984375 2.17578125 0.7421875 C13.88563866 5.3128745 20.2220512 14.25032782 26 25 C26.40976074 25.76054687 26.81952148 26.52109375 27.24169922 27.3046875 C68.40069131 104.70862073 79.83368986 194.25818804 57 279 C56.7932666 279.77827148 56.5865332 280.55654297 56.37353516 281.35839844 C50.67826733 302.44971309 42.65347343 322.9271035 33.375 342.6875 C32.87347412 343.77877197 32.37194824 344.87004395 31.85522461 345.99438477 C26.82794386 356.39228459 19.20937211 367.00107292 8 371.1875 C-3.56511576 375.09945862 -14.49749428 374.80112021 -25.65625 369.8125 C-35.66147775 364.37756147 -42.52286667 356.26443448 -46.19140625 345.5 C-49.74931552 330.09958111 -44.57410568 317.81750338 -38.25 304.0625 C-8.53025778 238.05676683 -3.54858745 167.48630877 -29.09521484 99.17749023 C-34.67863837 84.83123608 -41.28944333 70.75080457 -48.53881836 57.17114258 C-53.8524583 46.96498699 -54.71988293 35.71167665 -51.375 24.6875 C-49.37327184 19.34955825 -46.7839695 15.23291503 -43 11 C-42.24783203 10.07574219 -42.24783203 10.07574219 -41.48046875 9.1328125 C-31.5359111 -2.14252537 -13.80998523 -4.79628229 0 0 Z ",fill:"currentColor",transform:"translate(800,363)"}),ne.jsx("path",{d:"M0 0 C20.36797209 17.5208362 30.98152094 48.65216331 33.25 74.875 C34.66601923 105.04141347 29.99407499 140.23347324 9.25 163.875 C2.33437498 171.2402957 -6.767565 174.89927327 -16.75 175.875 C-29.27439391 176.03859876 -39.73763503 171.67182096 -48.65625 163.02734375 C-57.30505975 153.81049777 -59.15690908 144.16178785 -58.96484375 131.91796875 C-58.6585184 123.68904251 -55.38521402 117.01020231 -51.953125 109.66015625 C-46.34038834 96.66703535 -45.36581086 83.40730035 -49.75 69.875 C-51.70175288 65.01460373 -54.2229643 60.45698781 -56.75 55.875 C-62.88742914 44.32124959 -65.72598793 34.36956431 -62.625 21.25 C-59.29685073 10.41810676 -51.73490932 2.40718705 -42.1875 -3.5 C-28.61773045 -9.91480015 -12.25454701 -8.86098015 0 0 Z ",fill:"currentColor",transform:"translate(637.75,466.125)"})]}),"Logo");var yP=Object.defineProperty,vP=ke((n,e,t)=>e in n?yP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$8"),Mt=ke((n,e,t)=>vP(n,typeof e!="symbol"?e+"":e,t),"__publicField$8");let Wf=null,Gf=null;const _P=ke(async()=>{if(!Wf)try{return Wf=await S0(()=>import("./videojs-vr-D8VlBGww.js").then(n=>n.v),[],import.meta.url),await S0(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),Wf}catch{return null}return Wf},"loadVRPlugin"),bP=ke(async()=>{if(!Gf)try{return Gf=await S0(()=>import("./videojs-playlist.es-WShpLa2l.js"),[],import.meta.url),Gf}catch{return null}return Gf},"loadPlaylistPlugin"),pE=class extends as.Component{constructor(e){super(e),Mt(this,"handlePlaylistPropsChange",()=>{this.player&&this.isPlayerReady&&this.updatePlaylistFromProps()}),Mt(this,"updatePlaylistFromProps",async()=>{var i,r,s,o,u,c;if(!this.player||!this.isPlayerReady||typeof this.player.playlist!="function")return;const t=this.props.playlist||[];if(t.length===0){this.player.playlist([]),(i=this.notify)==null||i.call(this,"status:media",{message:"Playlist cleared",type:"info"});return}try{(r=this.notify)==null||r.call(this,"status:media",{message:`Updating Video.js playlist: ${t.length} items`,type:"log"});const h=this.filterForVideojs(t);this.player.playlist(h),this.player.playlist.currentItem()===-1&&this.player.playlist.currentItem(0),(s=this.notify)==null||s.call(this,"status:media",{message:"Video.js playlist updated successfully",type:"success"}),this._triggerRender()}catch(h){(o=this.notify)==null||o.call(this,"status:media",{message:"Failed to update Video.js playlist",type:"error",error:h.message}),(c=(u=this.props).onError)==null||c.call(u,h)}}),Mt(this,"_hasValidPlaylist",()=>{const t=this.props.playlist;return t&&t.length>0}),Mt(this,"_triggerRender",()=>{this.setState(t=>({renderTrigger:t.renderTrigger+1}))}),Mt(this,"_isPlaylistMode",()=>this.player&&typeof this.player.playlist=="function"&&this.player.playlist().length>0),Mt(this,"initPlaylistPlugin",async()=>{var t,i,r,s;if(!(!this.player||this.isDestroyed))try{(t=this.notify)==null||t.call(this,"status:media",{message:"Loading Video.js playlist plugin...",type:"log"});const o=await bP();if(!o){(i=this.notify)==null||i.call(this,"status:media",{message:"Playlist plugin not available, skipping",type:"info"});return}if(typeof this.player.playlist!="function"&&o.default&&me.registerPlugin("playlist",o.default),typeof this.player.playlist!="function")throw new Error("Playlist plugin failed to register");this.player.on("playlistchange",this.handlePlaylistChange),this.player.on("playlistitem",this.handlePlaylistItem),(r=this.notify)==null||r.call(this,"status:media",{message:"Video.js playlist plugin loaded successfully",type:"success"})}catch(o){throw(s=this.notify)==null||s.call(this,"status:media",{message:"Playlist plugin initialization failed",type:"error",error:o.message}),o}}),Mt(this,"filterForVideojs",t=>t.map(i=>{const{funscript:r,...s}=i;return s})),Mt(this,"handlePlaylistChange",()=>{var t;(t=this.notify)==null||t.call(this,"status:media",{message:"Video.js playlist changed",type:"log"}),this._triggerRender(),this.updatePlaylistButtons()}),Mt(this,"handlePlaylistItem",()=>{setTimeout(()=>{var i,r,s;const t=this.player.playlist.currentItem();(i=this.notify)==null||i.call(this,"status:media",{message:`Video.js switched to item ${t}`,type:"log"}),(s=(r=this.props).onPlaylistItemChange)==null||s.call(r,t),setTimeout(()=>{const o=this.getCurrentPlaylistItem();o&&o.poster&&this.player.poster(o.poster)},100),this.updatePlaylistButtons()},0)}),Mt(this,"getCurrentPlaylistItem",()=>{if(!this._isPlaylistMode())return null;const t=this.player.playlist.currentItem(),i=this.player.playlist();return t>=0&&t<i.length?i[t]:null}),Mt(this,"goToPlaylistItem",t=>{var i,r,s;if(!this._isPlaylistMode())return!1;try{const o=this.player.playlist();return t<0||t>=o.length?((i=this.notify)==null||i.call(this,"status:media",{message:`Invalid playlist index: ${t}`,type:"error"}),!1):(this.player.playlist.currentItem(t),(r=this.notify)==null||r.call(this,"status:media",{message:`Navigated to playlist item ${t}`,type:"log"}),setTimeout(()=>{var c;const u=this.player.playlist.currentItem();u!==t&&((c=this.notify)==null||c.call(this,"status:media",{message:`Navigation mismatch: requested ${t}, got ${u}`,type:"error"}))},10),!0)}catch(o){return(s=this.notify)==null||s.call(this,"status:media",{message:`Failed to navigate to playlist item ${t}`,type:"error",error:o.message}),!1}}),Mt(this,"handleNext",()=>{var t;this._isPlaylistMode()&&(this.player.playlist.next(),(t=this.notify)==null||t.call(this,"status:media",{message:"Video.js playlist: next item",type:"log"}))}),Mt(this,"handlePrevious",()=>{var t;this._isPlaylistMode()&&(this.player.playlist.previous(),(t=this.notify)==null||t.call(this,"status:media",{message:"Video.js playlist: previous item",type:"log"}))}),Mt(this,"getPlaylistInfo",()=>{if(!this._isPlaylistMode())return{hasPlaylist:!1,currentIndex:-1,totalItems:0};const t=this.player.playlist.currentItem(),i=this.player.playlist().length;return{hasPlaylist:!0,currentIndex:t,totalItems:i,canNext:t<i-1,canPrevious:t>0}}),Mt(this,"registerPlaylistComponents",()=>{var u;const t=me.getComponent("Button"),i=class extends t{constructor(h,f){super(h,f),this.controlText("Previous item")}handleClick(){this.player().playlist&&this.player().playlist.previous()}createEl(){const h=super.createEl("button",{className:"vjs-previous-button vjs-control vjs-button"});return h.innerHTML='<span aria-hidden="true">⏮</span>',h.title="Previous item",h}};ke(i,"PreviousButton");let r=i;const s=class extends t{constructor(h,f){super(h,f),this.controlText("Next item")}handleClick(){this.player().playlist&&this.player().playlist.next()}createEl(){const h=super.createEl("button",{className:"vjs-next-button vjs-control vjs-button"});return h.innerHTML='<span aria-hidden="true">⏭</span>',h.title="Next item",h}};ke(s,"NextButton");let o=s;me.registerComponent("PreviousButton",r),me.registerComponent("NextButton",o),(u=this.notify)==null||u.call(this,"status:media",{message:"Video.js playlist control buttons registered",type:"log"})}),Mt(this,"updatePlaylistButtons",()=>{if(!this.player)return;const t=this.player.getChild("controlBar");if(!t)return;const i=t.getChild("PreviousButton"),r=t.getChild("NextButton"),s=this.getPlaylistInfo();i&&(i.el().disabled=!s.canPrevious,i.el().style.opacity=s.canPrevious?"1":"0.3"),r&&(r.el().disabled=!s.canNext,r.el().style.opacity=s.canNext?"1":"0.3")}),Mt(this,"initPlayer",async()=>{var t,i,r,s,o,u;if(!(this.isDestroyed||this.isInitialized||this.isInitializing)){if(!((t=this.videoRef)!=null&&t.current)){(i=this.notify)==null||i.call(this,"status:media",{message:"Video element not available for initialization",type:"error"});return}this.isInitializing=!0,(r=this.notify)==null||r.call(this,"status:media",{message:"Initializing Video.js player...",type:"processing"});try{const c=this.videoRef.current;this.registerPlaylistComponents();const h={controls:!0,responsive:!0,fluid:!0,playsinline:!0,preload:"metadata",techOrder:["html5"],html5:{vhs:{overrideNative:!1}},controlBar:{children:["playToggle","currentTimeDisplay","timeDivider","durationDisplay","progressControl","PreviousButton","NextButton","volumePanel","fullscreenToggle"]}};if(this.player=me(c,h),!this.player)throw new Error("Failed to create Video.js player instance");this.player.ready(()=>{var f;this.isDestroyed||(this.isPlayerReady=!0,this.isInitialized=!0,this.isInitializing=!1,(f=this.notify)==null||f.call(this,"status:media",{message:"Video.js player ready",type:"success"}),this.initPlugins().then(()=>{var m;this.setupCallbacks(),(m=this.notify)==null||m.call(this,"status:media",{message:"Video.js player initialization complete",type:"success"}),this._triggerRender()}).catch(m=>{var x,w,A;(x=this.notify)==null||x.call(this,"status:media",{message:"Plugin initialization failed",type:"error",error:m.message}),(A=(w=this.props).onError)==null||A.call(w,m)}))})}catch(c){(s=this.notify)==null||s.call(this,"status:media",{message:"Failed to initialize Video.js player",type:"error",error:c.message}),this.isInitializing=!1,(u=(o=this.props).onError)==null||u.call(o,c)}}}),Mt(this,"initPlugins",async()=>{var t,i,r,s,o,u,c;if(!(this.isDestroyed||!this.player))try{(t=this.notify)==null||t.call(this,"status:media",{message:"Loading Video.js plugins...",type:"processing"});const[h,f]=await Promise.allSettled([this.initVRPlugin(),this.initPlaylistPlugin()]);h.status==="rejected"&&((r=this.notify)==null||r.call(this,"status:media",{message:"VR plugin initialization failed",type:"log",error:(i=h.reason)==null?void 0:i.message})),f.status==="rejected"&&((o=this.notify)==null||o.call(this,"status:media",{message:"Playlist plugin initialization failed",type:"error",error:(s=f.reason)==null?void 0:s.message})),this._hasValidPlaylist()&&await this.updatePlaylistFromProps(),(u=this.notify)==null||u.call(this,"status:media",{message:"Video.js plugins loaded",type:"success"})}catch(h){throw(c=this.notify)==null||c.call(this,"status:media",{message:"Plugin initialization error",type:"error",error:h.message}),h}}),Mt(this,"initVRPlugin",async()=>{var t,i,r,s;if(!(!this.player||this.isDestroyed))try{(t=this.notify)==null||t.call(this,"status:media",{message:"Loading Video.js VR plugin...",type:"log"});const o=await _P();if(!o){(i=this.notify)==null||i.call(this,"status:media",{message:"VR plugin not available",type:"info"});return}if(typeof this.player.vr=="function"){this.configureVRPlugin();return}if(!me.getPlugin("vr")&&o.default){const u=ke(function(c={}){return new o.default(this,c)},"vrWrapper");me.registerPlugin("vr",u)}this.configureVRPlugin(),(r=this.notify)==null||r.call(this,"status:media",{message:"VR plugin loaded successfully",type:"success"})}catch(o){(s=this.notify)==null||s.call(this,"status:media",{message:"VR plugin initialization failed",type:"log",error:o.message})}}),Mt(this,"configureVRPlugin",()=>{var t,i;if(!(!this.player||this.isDestroyed))try{this.player.mediainfo||(this.player.mediainfo={}),this.player.vr({projection:"AUTO",debug:!1,forceCardboard:!1}),(t=this.notify)==null||t.call(this,"status:media",{message:"VR plugin configured",type:"log"})}catch(r){(i=this.notify)==null||i.call(this,"status:media",{message:"VR configuration failed",type:"log",error:r.message})}}),Mt(this,"setupCallbacks",()=>{this.player&&(this.player.on("error",t=>{var i,r,s;(i=this.notify)==null||i.call(this,"status:media",{message:"Video.js player error occurred",type:"error",error:(t==null?void 0:t.message)||"Unknown Video.js error"}),(s=(r=this.props).onError)==null||s.call(r,t)}),this.player.on("play",()=>{var i,r,s;const t=this.player.currentTime()||0;(i=this.notify)==null||i.call(this,"status:media",{message:`Playback started at ${t.toFixed(1)}s`,type:"log"}),this.updatePlaylistButtons(),(s=(r=this.props).onPlay)==null||s.call(r,{currentTime:t})}),this.player.on("pause",()=>{var i,r,s;const t=this.player.currentTime()||0;(i=this.notify)==null||i.call(this,"status:media",{message:`Playback paused at ${t.toFixed(1)}s`,type:"log"}),(s=(r=this.props).onPause)==null||s.call(r,{currentTime:t})}),this.player.on("ended",()=>{var t,i,r;(t=this.notify)==null||t.call(this,"status:media",{message:"Media playback ended",type:"info"}),(r=(i=this.props).onEnded)==null||r.call(i,{currentTime:0})}),this.player.on("seeking",()=>{var i,r,s;const t=this.player.currentTime()||0;(i=this.notify)==null||i.call(this,"status:media",{message:`Seeking to ${t.toFixed(1)}s`,type:"log"}),(s=(r=this.props).onSeeking)==null||s.call(r,{currentTime:t})}),this.player.on("seeked",()=>{var i,r,s;const t=this.player.currentTime()||0;(i=this.notify)==null||i.call(this,"status:media",{message:`Seeked to ${t.toFixed(1)}s`,type:"log"}),(s=(r=this.props).onSeeked)==null||s.call(r,{currentTime:t})}),this.player.on("timeupdate",()=>{var i,r;const t=this.player.currentTime()||0;(r=(i=this.props).onTimeUpdate)==null||r.call(i,{currentTime:t})}),this.player.on("durationchange",()=>{var i,r,s;const t=this.player.duration()||0;(i=this.notify)==null||i.call(this,"status:media",{message:`Duration changed: ${t.toFixed(1)}s`,type:"log"}),(s=(r=this.props).onDurationChange)==null||s.call(r,{duration:t})}),this.player.on("loadstart",()=>{var t,i,r;(t=this.notify)==null||t.call(this,"status:media",{message:"Media loading started",type:"log"}),(r=(i=this.props).onLoadStart)==null||r.call(i,{})}),this.player.on("loadeddata",()=>{var i,r,s;const t=this.player.duration()||0;(i=this.notify)==null||i.call(this,"status:media",{message:"Media data loaded",type:"log"}),(s=(r=this.props).onLoadedData)==null||s.call(r,{duration:t})}),this.player.on("loadedmetadata",()=>{var i,r,s;const t=this.player.duration()||0;(i=this.notify)==null||i.call(this,"status:media",{message:`Media loaded: ${t.toFixed(1)}s duration`,type:"success"}),this.updatePlaylistButtons(),this._triggerRender(),(s=(r=this.props).onLoadedMetadata)==null||s.call(r,{duration:t,type:this._isPlaylistMode()?"playlist":"media"})}),this.player.on("canplay",()=>{var i,r,s;const t=this.player.currentTime()||0;(i=this.notify)==null||i.call(this,"status:media",{message:"Media ready to play",type:"log"}),(s=(r=this.props).onCanPlay)==null||s.call(r,{currentTime:t})}),this.player.on("canplaythrough",()=>{var i,r,s;const t=this.player.currentTime()||0;(i=this.notify)==null||i.call(this,"status:media",{message:"Media can play through",type:"log"}),(s=(r=this.props).onCanPlayThrough)==null||s.call(r,{currentTime:t})}),this.player.on("waiting",()=>{var i,r,s;const t=this.player.currentTime()||0;(i=this.notify)==null||i.call(this,"status:media",{message:"Media buffering...",type:"log"}),(s=(r=this.props).onWaiting)==null||s.call(r,{currentTime:t})}),this.player.on("stalled",()=>{var i,r,s;const t=this.player.currentTime()||0;(i=this.notify)==null||i.call(this,"status:media",{message:"Media connection stalled",type:"warning"}),(s=(r=this.props).onStalled)==null||s.call(r,{currentTime:t})}),this.player.on("suspend",()=>{var i,r,s;const t=this.player.currentTime()||0;(i=this.notify)==null||i.call(this,"status:media",{message:"Media loading suspended",type:"log"}),(s=(r=this.props).onSuspend)==null||s.call(r,{currentTime:t})}),this.player.on("volumechange",()=>{var r,s,o;const t=this.player.volume(),i=this.player.muted();(r=this.notify)==null||r.call(this,"status:media",{message:`Volume: ${i?"muted":Math.round(t*100)+"%"}`,type:"log"}),(o=(s=this.props).onVolumeChange)==null||o.call(s,{volume:t,muted:i})}),this.player.on("error",t=>{var i,r,s;(i=this.notify)==null||i.call(this,"status:media",{message:"Video.js player error occurred",type:"error",error:(t==null?void 0:t.message)||"Unknown Video.js error"}),(s=(r=this.props).onError)==null||s.call(r,t)}),this.player.on("resize",()=>{var i,r,s;const t={width:this.player.currentWidth(),height:this.player.currentHeight()};(i=this.notify)==null||i.call(this,"status:media",{message:`Player resized: ${t.width}x${t.height}`,type:"log"}),(s=(r=this.props).onResize)==null||s.call(r,t)}),this.player.playlist&&this.player.on("playlistitem",t=>{var s,o,u;const i=this.player.playlist.currentItem(),r=this.player.playlist().length;(s=this.notify)==null||s.call(this,"status:media",{message:`Playlist item changed: ${i+1}/${r}`,type:"info"}),this.updatePlaylistButtons(),this._triggerRender(),(u=(o=this.props).onPlaylistItemChange)==null||u.call(o,{index:i,total:r,item:this.player.playlist()[i]})}))}),Mt(this,"cleanup",()=>{var t,i;if(this.isDestroyed=!0,this.isInitialized=!1,this.isInitializing=!1,this.player)try{this.player.paused()||this.player.pause(),typeof this.player.dispose=="function"&&this.player.dispose(),(t=this.notify)==null||t.call(this,"status:media",{message:"Video.js player disposed",type:"log"})}catch(r){(i=this.notify)==null||i.call(this,"status:media",{message:"Error during player cleanup",type:"error",error:r.message})}finally{this.player=null,this.isPlayerReady=!1,this.initRetries=0,this.setState({renderTrigger:0})}}),Mt(this,"play",()=>{var t;return(t=this.player)==null?void 0:t.play()}),Mt(this,"pause",()=>{var t;return(t=this.player)==null?void 0:t.pause()}),Mt(this,"stop",()=>{var t,i;(t=this.player)==null||t.pause(),(i=this.player)==null||i.currentTime(0)}),Mt(this,"seek",t=>{var i;return(i=this.player)==null?void 0:i.currentTime(t)}),Mt(this,"getTime",()=>{var t;return((t=this.player)==null?void 0:t.currentTime())||0}),Mt(this,"getDuration",()=>{var t;return((t=this.player)==null?void 0:t.duration())||0}),Mt(this,"isPlaying",()=>this.player?!this.player.paused():!1),Mt(this,"nextItem",()=>this.handleNext()),Mt(this,"previousItem",()=>this.handlePrevious()),Mt(this,"goToItem",t=>this.goToPlaylistItem(t)),Mt(this,"getCurrentItem",()=>this.getCurrentPlaylistItem()),Mt(this,"getPlaylist",()=>this._isPlaylistMode()?this.player.playlist():[]),Mt(this,"getState",()=>({currentTime:this.getTime(),duration:this.getDuration(),isPlaying:this.isPlaying(),mediaType:this._isPlaylistMode()?"playlist":"media",playlistInfo:this.getPlaylistInfo()})),this.videoRef=fc.createRef(),this.player=null,this.isPlayerReady=!1,this.initRetries=0,this.maxRetries=3,this.state={renderTrigger:0},this.isInitialized=!1,this.isInitializing=!1,this.isDestroyed=!1,this.notify=e.notify}componentDidMount(){this.isDestroyed=!1,this.isInitialized=!1,this.isInitializing=!1,this._hasValidPlaylist()&&!this.isInitialized&&!this.isInitializing&&setTimeout(()=>{this.isDestroyed||this.initPlayer()},50)}componentDidUpdate(e){if(this.isDestroyed||e.playlist===this.props.playlist)return;this.handlePlaylistPropsChange(),this._hasValidPlaylist()&&!this.isInitialized&&!this.isInitializing&&setTimeout(()=>{this.isDestroyed||this.initPlayer()},50)}componentWillUnmount(){this.cleanup()}render(){const e=this._hasValidPlaylist();return ne.jsx("div",{className:"fp-media-player",children:e?ne.jsx("video",{ref:this.videoRef,className:"video-js vjs-default-skin fp-media-player-video",playsInline:!0,"data-setup":"{}"}):ne.jsx("div",{className:"fp-media-player-placeholder",children:ne.jsx(fE,{className:"fp-media-player-placeholder-logo",size:240})})})}};ke(pE,"MediaPlayer");let xP=pE;const ts={SCALAR:"scalar",POLAR:"polar"},Qe={LINEAR:"linear",VIBRATE:"vibrate",OSCILLATE:"oscillate",ROTATE:"rotate"},SP={[Qe.LINEAR]:ts.SCALAR,[Qe.VIBRATE]:ts.SCALAR,[Qe.OSCILLATE]:ts.SCALAR,[Qe.ROTATE]:ts.POLAR},gE=class{constructor(e=null){var t;this.index=-1,this.name="Virtual Device",this.notify=e,this.messageTimingGap=0,this.actuatorConfig=[],this.messageAttributes={},this.setConfig("default"),this.commandCounts={total:0,byActuator:new Map,lastCommand:null,lastCommandTime:null},(t=this.notify)==null||t.call(this,"status:virtual",{message:"Virtual Device initialized with default config",type:"success"})}setConfig(e){var r,s,o;let t=[];if(typeof e=="string")t=this._getPresetConfig(e);else if(Array.isArray(e))t=this._validateCustomConfig(e);else return(r=this.notify)==null||r.call(this,"status:virtual",{message:"Invalid config type. Use preset name or array",type:"error"}),!1;const i=[...this.actuatorConfig];return this.actuatorConfig=t,this._rebuildMessageAttributes(),this._resetCommandCounts(),(s=this.notify)==null||s.call(this,"status:virtual",{message:`Config changed from ${i.length} to ${t.length} actuators`,type:"success"}),(o=this.notify)==null||o.call(this,"buttplug:device",{device:this,configChanged:!0,oldConfig:i,newConfig:[...t]}),!0}_getPresetConfig(e){var i,r;const t={default:[{capability:Qe.LINEAR,name:"Main Stroke"},{capability:Qe.VIBRATE,name:"Vibration"},{capability:Qe.OSCILLATE,name:"Oscillation"},{capability:Qe.ROTATE,name:"Rotation"}],simple:[{capability:Qe.LINEAR,name:"Stroke"},{capability:Qe.VIBRATE,name:"Buzz"}],stroker:[{capability:Qe.LINEAR,name:"Main Stroke"}],"multi-vibe":[{capability:Qe.VIBRATE,name:"Vibe 1"},{capability:Qe.VIBRATE,name:"Vibe 2"},{capability:Qe.VIBRATE,name:"Vibe 3"}],"full-featured":[{capability:Qe.LINEAR,name:"Main Stroke"},{capability:Qe.LINEAR,name:"Secondary"},{capability:Qe.VIBRATE,name:"Tip Vibe"},{capability:Qe.VIBRATE,name:"Base Vibe"},{capability:Qe.ROTATE,name:"Twist"},{capability:Qe.OSCILLATE,name:"Swing"}],rotator:[{capability:Qe.ROTATE,name:"Main Rotation"},{capability:Qe.VIBRATE,name:"Secondary Vibe"}]};return t[e]?((r=this.notify)==null||r.call(this,"status:virtual",{message:`Applied preset: ${e}`,type:"log"}),t[e]):((i=this.notify)==null||i.call(this,"status:virtual",{message:`Unknown preset '${e}', using 'default'`,type:"info"}),t.default)}_validateCustomConfig(e){const t=Object.values(Qe);return e.map((i,r)=>{var s;return!i.capability||!t.includes(i.capability)?((s=this.notify)==null||s.call(this,"status:virtual",{message:`Invalid capability for actuator ${r}, using linear`,type:"error"}),{capability:Qe.LINEAR,name:`Actuator ${r}`}):{capability:i.capability,name:i.name||`${i.capability} ${r}`,stepCount:i.stepCount||20,featureDescriptor:i.featureDescriptor||`Virtual ${i.capability}`}})}_rebuildMessageAttributes(){var r;this.messageAttributes={};const e=[],t=[],i=[];this.actuatorConfig.forEach((s,o)=>{const u={Index:o,StepCount:s.stepCount||20,FeatureDescriptor:s.featureDescriptor||s.name};switch(s.capability){case Qe.VIBRATE:e.push({...u,ActuatorType:"Vibrate"});break;case Qe.OSCILLATE:e.push({...u,ActuatorType:"Oscillate"});break;case Qe.LINEAR:t.push(u);break;case Qe.ROTATE:i.push(u);break}}),e.length>0&&(this.messageAttributes.ScalarCmd=e),t.length>0&&(this.messageAttributes.LinearCmd=t),i.length>0&&(this.messageAttributes.RotateCmd=i),this.messageAttributes.StopDeviceCmd={},(r=this.notify)==null||r.call(this,"status:virtual",{message:`MessageAttributes rebuilt: ${Object.keys(this.messageAttributes).join(", ")}`,type:"log"})}async vibrate(e){return this._countCommand("ScalarCmd","Vibrate",e),Promise.resolve()}async oscillate(e){return this._countCommand("ScalarCmd","Oscillate",e),Promise.resolve()}async linear(e){return this._countCommand("LinearCmd",null,e),Promise.resolve()}async rotate(e){return this._countCommand("RotateCmd",null,e),Promise.resolve()}async stop(){return this._countCommand("StopDeviceCmd"),Promise.resolve()}getAllowedMessages(){return Object.keys(this.messageAttributes)}_countCommand(e,t=null,i=null){this.commandCounts.total++,this.commandCounts.lastCommand=e,this.commandCounts.lastCommandTime=Date.now(),this._getAffectedActuators(e,t,i).forEach(s=>{this.commandCounts.byActuator.has(s)||this.commandCounts.byActuator.set(s,0),this.commandCounts.byActuator.set(s,this.commandCounts.byActuator.get(s)+1)})}_getAffectedActuators(e,t,i){const r=[];return e==="StopDeviceCmd"?this.actuatorConfig.map((s,o)=>o):(this.actuatorConfig.forEach((s,o)=>{let u=!1;e==="ScalarCmd"&&t?u=t==="Vibrate"&&s.capability===Qe.VIBRATE||t==="Oscillate"&&s.capability===Qe.OSCILLATE:e==="LinearCmd"?u=s.capability===Qe.LINEAR:e==="RotateCmd"&&(u=s.capability===Qe.ROTATE),u&&r.push(o)}),r)}_resetCommandCounts(){var e;this.commandCounts={total:0,byActuator:new Map,lastCommand:null,lastCommandTime:null},(e=this.notify)==null||e.call(this,"status:virtual",{message:"Command counts reset",type:"log"})}getConfig(){return{actuatorCount:this.actuatorConfig.length,actuators:this.actuatorConfig.map((e,t)=>({index:t,capability:e.capability,name:e.name})),presets:this.getAvailablePresets()}}getAvailablePresets(){return["default","simple","stroker","multi-vibe","full-featured","rotator"]}addActuator(e,t=null){var r,s;const i={capability:e,name:t||`${e} ${this.actuatorConfig.length}`,stepCount:20,featureDescriptor:`Virtual ${e}`};return this.actuatorConfig.push(i),this._rebuildMessageAttributes(),(r=this.notify)==null||r.call(this,"status:virtual",{message:`Added ${e} actuator`,type:"success"}),(s=this.notify)==null||s.call(this,"buttplug:device",{device:this,actuatorAdded:!0,newActuator:i}),!0}removeActuator(e){var i,r,s;if(e<0||e>=this.actuatorConfig.length)return(i=this.notify)==null||i.call(this,"status:virtual",{message:`Invalid actuator index ${e}`,type:"error"}),!1;const t=this.actuatorConfig.splice(e,1)[0];return this._rebuildMessageAttributes(),this._resetCommandCounts(),(r=this.notify)==null||r.call(this,"status:virtual",{message:`Removed actuator ${e} (${t.capability})`,type:"success"}),(s=this.notify)==null||s.call(this,"buttplug:device",{device:this,actuatorRemoved:!0,removedActuator:t}),!0}getCommandStats(){const e={};return this.commandCounts.byActuator.forEach((t,i)=>{const r=this.actuatorConfig[i];e[i]={count:t,capability:(r==null?void 0:r.capability)||"unknown",name:(r==null?void 0:r.name)||`Actuator ${i}`}}),{total:this.commandCounts.total,byActuator:e,lastCommand:this.commandCounts.lastCommand,lastCommandTime:this.commandCounts.lastCommandTime,actuatorCount:this.actuatorConfig.length}}resetCommandStats(){var e;this._resetCommandCounts(),(e=this.notify)==null||e.call(this,"status:virtual",{message:"Command stats reset",type:"info"})}getDebugInfo(){var t;const e={config:this.getConfig(),stats:this.getCommandStats(),messageAttributes:this.messageAttributes,name:this.name,index:this.index};return(t=this.notify)==null||t.call(this,"status:virtual",{message:"Debug info requested",type:"log"}),e}};ke(gE,"VirtualDevice");let TP=gE;const mE=class{constructor(e,t,i={},r=null){var s;this.index=e,this.type=SP[t],this.capability=t,this.notify=r,this.settings={enabled:!0,scale:1,invert:!1,timeOffset:0,range:[0,1],...i.settings},this.assignedChannel=null,this.previousMappedChannel=null,this.metadata={name:`Actuator ${e}`,featureDescriptor:"",stepCount:20,...i.metadata},(s=this.notify)==null||s.call(this,"status:actuator",{message:`Actuator ${e} (${t}) initialized`,type:"log"})}plug(e){var i,r,s;const t=e.plug(this);return t?(this.previousMappedChannel=e.name,(i=this.notify)==null||i.call(this,"status:actuator",{message:`Actuator ${this.index} plugged to channel "${e.name}"`,type:"success"}),(r=this.notify)==null||r.call(this,"actuator:plugged",{actuatorIndex:this.index,channelName:e.name,channel:{name:e.name,type:e.type,duration:e.duration},actuator:{index:this.index,type:this.type,capability:this.capability}})):(s=this.notify)==null||s.call(this,"status:actuator",{message:`Failed to plug actuator ${this.index} to channel "${e.name}" (incompatible)`,type:"error"}),t}unplug(){var e,t,i;if(this.assignedChannel){const r=this.assignedChannel.name;this.previousMappedChannel||(this.previousMappedChannel=r),this.assignedChannel.unplug(this),(e=this.notify)==null||e.call(this,"status:actuator",{message:`Actuator ${this.index} unplugged from channel "${r}"`,type:"info"}),(t=this.notify)==null||t.call(this,"actuator:unplugged",{actuatorIndex:this.index,channelName:r,actuator:{index:this.index,type:this.type,capability:this.capability}})}else(i=this.notify)==null||i.call(this,"status:actuator",{message:`Actuator ${this.index} was not plugged to any channel`,type:"info"})}forgetPreviousMapping(){var t,i;const e=this.previousMappedChannel;this.previousMappedChannel=null,(t=this.notify)==null||t.call(this,"status:actuator",{message:`Actuator ${this.index} forgot previous mapping to "${e}"`,type:"info"}),(i=this.notify)==null||i.call(this,"actuator:mappingForgotten",{actuatorIndex:this.index,forgottenChannelName:e,actuator:{index:this.index,type:this.type,capability:this.capability}})}canPlugTo(e){var i;const t=this.settings.enabled&&this.type===e.type;return t||(i=this.notify)==null||i.call(this,"status:actuator",{message:`Actuator ${this.index} incompatible with channel "${e.name}" (${this.type} vs ${e.type})`,type:"log"}),t}getAssignedChannelName(){return this.assignedChannel?this.assignedChannel.name:null}getPreviousMappedChannelName(){return this.previousMappedChannel}hasPreviousMapping(){return this.previousMappedChannel!==null}isPlugged(){return this.assignedChannel!==null}updateSettings(e){var r,s;const t={...this.settings};this.settings={...this.settings,...e};const i=Object.keys(e);(r=this.notify)==null||r.call(this,"status:actuator",{message:`Actuator ${this.index} settings updated: ${i.join(", ")}`,type:"log"}),(s=this.notify)==null||s.call(this,"actuator:settingsChanged",{actuatorIndex:this.index,oldSettings:t,newSettings:{...this.settings},changes:i,actuator:{index:this.index,type:this.type,capability:this.capability,channelName:this.getAssignedChannelName()}})}resetSettings(){var t,i;const e={...this.settings};this.settings={enabled:!0,scale:1,invert:!1,timeOffset:0,range:[0,1]},(t=this.notify)==null||t.call(this,"status:actuator",{message:`Actuator ${this.index} settings reset to defaults`,type:"info"}),(i=this.notify)==null||i.call(this,"actuator:settingsReset",{actuatorIndex:this.index,oldSettings:e,newSettings:{...this.settings},actuator:{index:this.index,type:this.type,capability:this.capability,channelName:this.getAssignedChannelName()}})}isCompatibleWith(e){return this.type===e.type}canProcess(e){var t,i;return this.settings.enabled?this.assignedChannel&&this.assignedChannel!==e?((i=this.notify)==null||i.call(this,"status:actuator",{message:`Actuator ${this.index} cannot process: assigned to different channel`,type:"log"}),!1):this.isCompatibleWith(e):((t=this.notify)==null||t.call(this,"status:actuator",{message:`Actuator ${this.index} cannot process: disabled`,type:"log"}),!1)}processValue(e,t=1){if(!this.settings.enabled||e===null||e===void 0)return 0;let i=e;this.settings.invert&&(this.type===ts.POLAR?i=-i:i=1-i),i*=this.settings.scale,i*=t;const[r,s]=this.settings.range;if(this.type===ts.POLAR){const o=Math.abs(i),u=Math.max(0,Math.min(1,o));i=Math.sign(i)*u}else i=Math.max(0,Math.min(1,i));return i}generateCommand(e,t={}){if(!this.settings.enabled||e===0)return{capability:this.capability,value:0,options:{}};const i={capability:this.capability,value:e,options:{}};switch(this.capability){case Qe.LINEAR:i.options.duration=t.duration||100;break;case Qe.ROTATE:i.value=Math.abs(e),i.options.clockwise=e>=0;break}return i}process(e,t=1,i={}){const r=this.processValue(e,t);return this.generateCommand(r,i)}toConfig(){return{index:this.index,type:this.type,capability:this.capability,settings:{...this.settings},assignedChannelName:this.getAssignedChannelName(),previousMappedChannel:this.previousMappedChannel,metadata:{...this.metadata}}}fromConfig(e){var t,i;e.settings&&({...this.settings},this.settings={...this.settings,...e.settings},(t=this.notify)==null||t.call(this,"status:actuator",{message:`Actuator ${this.index} loaded settings from config`,type:"log"})),e.metadata&&(this.metadata={...this.metadata,...e.metadata}),e.previousMappedChannel&&(this.previousMappedChannel=e.previousMappedChannel,(i=this.notify)==null||i.call(this,"status:actuator",{message:`Actuator ${this.index} restored previous mapping to "${e.previousMappedChannel}"`,type:"log"}))}getDebugInfo(){return{index:this.index,type:this.type,capability:this.capability,settings:{...this.settings},assignedChannel:this.assignedChannel?{name:this.assignedChannel.name,type:this.assignedChannel.type,duration:this.assignedChannel.duration}:null,previousMappedChannel:this.previousMappedChannel,isPlugged:this.isPlugged(),hasPreviousMapping:this.hasPreviousMapping(),metadata:{...this.metadata}}}toString(){const e=this.getAssignedChannelName()||"unassigned",t=this.settings.enabled?"enabled":"disabled",i=this.isPlugged()?"plugged":"unplugged",r=this.previousMappedChannel?` (prev: ${this.previousMappedChannel})`:"";return`Actuator[${this.index}](${this.capability}, ${this.type}, ${t}, ${i} to ${e}${r})`}};ke(mE,"Actuator");let o0=mE;const yE=class{constructor(e){ut(this,"_sendScalarCommand",ke(async(t,i,r=null)=>{var u;if(!this.selectedDevice)throw new Error("No device selected");const s=t===Zr.ActuatorType.Vibrate?Qe.VIBRATE:Qe.OSCILLATE;if(this._resolveActuatorIndex(s,r)===null)throw new Error(`No ${t} actuator available`);try{const c=Math.max(0,Math.min(1,i));return t===Zr.ActuatorType.Vibrate?await this.selectedDevice.vibrate(c):t===Zr.ActuatorType.Oscillate&&await this.selectedDevice.oscillate(c),!0}catch(c){return(u=this.notify)==null||u.call(this,"status:buttplug",{message:`${t} command failed: ${c.message}`,type:"log"}),!1}},"_sendScalarCommand")),ut(this,"_resolveActuatorIndex",ke((t,i)=>{if(i!=null){const s=this.getActuator(i);return s&&s.capability===t?i:null}const r=this.getActuatorsByCapability(t);return r.length>0?r[0].index:null},"_resolveActuatorIndex")),ut(this,"_resetDevice",ke(()=>{this.selectedDevice=this.virtualDevice,this._initActuators(),this._notifyDeviceChanged(this.virtualDevice)},"_resetDevice")),ut(this,"_resetConnectionState",ke(()=>{var t;this.isConnected=!1,this.isScanning=!1,this.devices.clear(),this.devices.set(-1,this.virtualDevice),this.throttleMap.clear(),this._resetDevice(),(t=this.notify)==null||t.call(this,"buttplug:connection",{connected:!1})},"_resetConnectionState")),ut(this,"_onDeviceAdded",ke(t=>{var i,r;this.devices.set(t.index,t),(i=this.notify)==null||i.call(this,"status:buttplug",{message:`Device connected: ${t.name}`,type:"success"}),(r=this.notify)==null||r.call(this,"buttplug:device",{device:void 0})},"_onDeviceAdded")),ut(this,"_onDeviceRemoved",ke(t=>{var i,r,s;this.devices.delete(t.index),((i=this.selectedDevice)==null?void 0:i.index)===t.index&&this.selectDevice(-1),(r=this.notify)==null||r.call(this,"status:buttplug",{message:`Device disconnected: ${t.name}`,type:"info"}),(s=this.notify)==null||s.call(this,"buttplug:device",{device:void 0})},"_onDeviceRemoved")),ut(this,"_onDisconnect",ke(()=>{var t;(t=this.notify)==null||t.call(this,"status:buttplug",{message:"Lost connection to Intiface Central",type:"error"}),this._resetConnectionState()},"_onDisconnect")),this.notify=e,this.client=null,this.connector=null,this.initialized=!1,this.intifaceUrl="ws://localhost:12345",this.devices=new Map,this.isConnected=!1,this.isScanning=!1,this.virtualDevice=new TP(this.notify),this.devices.set(-1,this.virtualDevice),this.selectedDevice=this.virtualDevice,this.actuators=[],this._initActuators(),this.globalScale=1,this.globalOffset=0,this.throttleMap=new Map,this.minCommandInterval=16}async init(){var e,t,i,r;if(this.initialized)return!0;try{return(e=this.notify)==null||e.call(this,"status:buttplug",{message:"Initializing ButtPlug client...",type:"processing"}),this.client=new Zr.ButtplugClient("FunPlayer"),this.connector=new Zr.ButtplugBrowserWebsocketClientConnector(this.intifaceUrl),this.client.addListener("deviceadded",this._onDeviceAdded),this.client.addListener("deviceremoved",this._onDeviceRemoved),this.client.addListener("disconnect",this._onDisconnect),this.initialized=!0,(t=this.notify)==null||t.call(this,"status:buttplug",{message:"ButtPlug client initialized successfully",type:"log"}),!0}catch(s){return(i=this.notify)==null||i.call(this,"status:buttplug",{message:"Failed to initialize ButtPlug client",type:"error",error:s.message||String(s)}),(r=this.notify)==null||r.call(this,"buttplug:error",{message:"Initialization failed",error:s.message||String(s)}),!1}}async connect(e=null){var i,r,s,o,u,c;if(this.isConnected)return!0;const t=e||this.intifaceUrl;if(!this.initialized&&!await this.init())return!1;this.connector._url!==t&&(this.connector=new Zr.ButtplugBrowserWebsocketClientConnector(t));try{(i=this.notify)==null||i.call(this,"status:buttplug",{message:`Connecting to ${t}...`,type:"processing"}),await this.client.connect(this.connector),this.isConnected=!0,e&&e!==this.intifaceUrl&&this.setIntifaceUrl(e);const h=this.client.devices;return h.forEach(f=>{this.devices.set(f.index,f)}),(r=this.notify)==null||r.call(this,"status:buttplug",{message:"Connected to Intiface Central",type:"success"}),(s=this.notify)==null||s.call(this,"status:buttplug",{message:`Found ${h.length} existing devices (+ Virtual)`,type:"log"}),(o=this.notify)==null||o.call(this,"buttplug:connection",{connected:!0}),!0}catch(h){return(u=this.notify)==null||u.call(this,"status:buttplug",{message:"Failed to connect to Intiface Central",type:"error",error:h.message||String(h)}),(c=this.notify)==null||c.call(this,"buttplug:error",{message:"Connection failed",error:h.message||String(h)}),!1}}async scan(e=5e3){var t,i,r,s;if(!this.isConnected||this.isScanning)return[];try{this.isScanning=!0;const o=new Set(this.devices.keys());(t=this.notify)==null||t.call(this,"status:buttplug",{message:"Scanning for devices...",type:"processing"}),await this.client.startScanning(),await new Promise(h=>setTimeout(h,e)),await this.client.stopScanning(),this.client.devices.forEach(h=>{this.devices.set(h.index,h)});const c=Array.from(this.devices.values()).filter(h=>!o.has(h.index));return c.length>0?(i=this.notify)==null||i.call(this,"status:buttplug",{message:`Found ${c.length} new device(s)`,type:"success"}):(r=this.notify)==null||r.call(this,"status:buttplug",{message:"No new devices found",type:"info"}),c}catch(o){return(s=this.notify)==null||s.call(this,"status:buttplug",{message:"Device scan failed",type:"error",error:o.message||String(o)}),[]}finally{this.isScanning=!1}}async disconnect(){var e,t;if(this.isConnected){try{this.client&&await this.client.disconnect(),(e=this.notify)==null||e.call(this,"status:buttplug",{message:"Disconnected from Intiface Central",type:"info"})}catch(i){(t=this.notify)==null||t.call(this,"status:buttplug",{message:`Disconnect error: ${i.message}`,type:"log"})}this._resetConnectionState()}}selectDevice(e){var r,s,o;if(e==null)return this.selectDevice(-1);const t=this.devices.get(e);if(!t)return(r=this.notify)==null||r.call(this,"status:buttplug",{message:`Device ${e} not found`,type:"error"}),!1;this.selectedDevice=t,this._initActuators();const i=e===-1?"Virtual Device":t.name;return(s=this.notify)==null||s.call(this,"status:buttplug",{message:`Selected: ${i}`,type:"success"}),(o=this.notify)==null||o.call(this,"buttplug:device",{device:t}),!0}_initActuators(){var e;this.actuators.forEach(t=>t.unplug()),this.actuators=[],this.selectedDevice&&(this.actuators=this._buildActuators(this.selectedDevice),(e=this.notify)==null||e.call(this,"status:buttplug",{message:`Built ${this.actuators.length} actuators for ${this.selectedDevice.name}`,type:"log"}))}_buildActuators(e){var r,s,o;const t=e.messageAttributes,i=[];return(r=this.notify)==null||r.call(this,"status:buttplug",{message:`Building actuators for device: ${e.name}`,type:"log"}),(s=this.notify)==null||s.call(this,"status:buttplug",{message:`Device messageAttributes: ${JSON.stringify(t)}`,type:"log"}),t.ScalarCmd&&t.ScalarCmd.forEach(u=>{var h,f,m,x,w;(h=this.notify)==null||h.call(this,"status:buttplug",{message:`Processing ScalarCmd attr: ${JSON.stringify(u)}`,type:"log"});let c;if(u.ActuatorType===Zr.ActuatorType.Vibrate?((f=this.notify)==null||f.call(this,"status:buttplug",{message:"Matched Vibrate actuator",type:"log"}),c=Qe.VIBRATE):u.ActuatorType===Zr.ActuatorType.Oscillate?((m=this.notify)==null||m.call(this,"status:buttplug",{message:"Matched Oscillate actuator",type:"log"}),c=Qe.OSCILLATE):(x=this.notify)==null||x.call(this,"status:buttplug",{message:`No match for ActuatorType: ${u.ActuatorType}`,type:"log"}),c){(w=this.notify)==null||w.call(this,"status:buttplug",{message:`Creating actuator with capability: ${c}`,type:"log"});const A=new o0(u.Index,c,{metadata:{name:`${e.name} #${u.Index}`,featureDescriptor:u.FeatureDescriptor||"",stepCount:u.StepCount||20}},this.notify);i.push(A)}}),t.LinearCmd&&t.LinearCmd.forEach(u=>{var h;(h=this.notify)==null||h.call(this,"status:buttplug",{message:`Processing LinearCmd attr: ${JSON.stringify(u)}`,type:"log"});const c=new o0(u.Index,Qe.LINEAR,{metadata:{name:`${e.name} #${u.Index}`,featureDescriptor:u.FeatureDescriptor||"",stepCount:u.StepCount||20}},this.notify);i.push(c)}),t.RotateCmd&&t.RotateCmd.forEach(u=>{var h;(h=this.notify)==null||h.call(this,"status:buttplug",{message:`Processing RotateCmd attr: ${JSON.stringify(u)}`,type:"log"});const c=new o0(u.Index,Qe.ROTATE,{metadata:{name:`${e.name} #${u.Index}`,featureDescriptor:u.FeatureDescriptor||"",stepCount:u.StepCount||20}},this.notify);i.push(c)}),i.sort((u,c)=>u.index-c.index),(o=this.notify)==null||o.call(this,"status:buttplug",{message:`Final actuators array: ${i.length} actuators`,type:"log"}),i}getActuators(){return[...this.actuators]}getActuator(e){return this.actuators.find(t=>t.index===e)||null}getActuatorsByCapability(e){return this.actuators.filter(t=>t.capability===e)}setActuatorSettings(e,t){var r;const i=this.getActuator(e);return i?(i.updateSettings(t),(r=this.notify)==null||r.call(this,"buttplug:actuatorOptions",{actuatorIndex:e,options:i.settings}),!0):!1}getActuatorSettings(e){const t=this.getActuator(e);return t?{...t.settings}:null}plugChannelToActuator(e,t){var s;const i=this.getActuator(t);if(!i)return!1;const r=e.plug(i);return r&&((s=this.notify)==null||s.call(this,"buttplug:mapping",{channel:e.name,actuatorIndex:t})),r}unplugChannelFromActuator(e,t){var r;const i=this.getActuator(t);return i?(e.unplug(i),(r=this.notify)==null||r.call(this,"buttplug:mapping",{channel:e.name,actuatorIndex:null}),!0):!1}unplugAllChannels(){var e;this.actuators.forEach(t=>t.unplug()),(e=this.notify)==null||e.call(this,"buttplug:mapping",{channel:null,actuatorIndex:null})}setGlobalScale(e){var i;const t=typeof e=="number"?Math.max(0,Math.min(5,e)):1;this.globalScale!==t&&(this.globalScale=t,(i=this.notify)==null||i.call(this,"buttplug:globalScale",{scale:t}))}getGlobalScale(){return this.globalScale}setGlobalOffset(e){var i;const t=typeof e=="number"?e:0;this.globalOffset!==t&&(this.globalOffset=t,(i=this.notify)==null||i.call(this,"buttplug:globalOffset",{offset:t}))}getGlobalOffset(){return this.globalOffset}getTimeWithOffsets(e){const t=new Map;for(const i of this.actuators)if(i.isPlugged()&&i.settings.enabled){const r=i.assignedChannel,s=e+this.globalOffset+i.settings.timeOffset;t.set(r.name,s)}return t}async processChannels(e){if(!this.selectedDevice)return new Map;const t=new Map;for(const i of this.actuators)if(i.isPlugged()&&i.settings.enabled){const r=i.assignedChannel,s=e[r.name];if(s!=null){const o=i.process(s,this.globalScale);await this.sendThrottled(i.capability,o.value,i.index,o.options),t.set(i.index,{value:o.value,type:i.capability})}}return t}async vibrate(e,t=null){return this._sendScalarCommand(Zr.ActuatorType.Vibrate,e,t)}async oscillate(e,t=null){return this._sendScalarCommand(Zr.ActuatorType.Oscillate,e,t)}async linear(e,t=100,i=null){var s;if(!this.selectedDevice)throw new Error("No device selected");if(this._resolveActuatorIndex(Qe.LINEAR,i)===null)throw new Error("No linear actuator available");try{const o=Math.max(0,Math.min(1,e)),u=Math.max(1,Math.min(2e4,t));return await this.selectedDevice.linear([[o,u]]),!0}catch(o){return(s=this.notify)==null||s.call(this,"status:buttplug",{message:`Linear command failed: ${o.message}`,type:"log"}),!1}}async rotate(e,t=null){var r;if(!this.selectedDevice)throw new Error("No device selected");if(this._resolveActuatorIndex(Qe.ROTATE,t)===null)throw new Error("No rotate actuator available");try{const s=Math.abs(e),o=e>=0;return await this.selectedDevice.rotate([[s,o]]),!0}catch(s){return(r=this.notify)==null||r.call(this,"status:buttplug",{message:`Rotate command failed: ${s.message}`,type:"log"}),!1}}async sendThrottled(e,t,i,r={}){var c;const s=Date.now(),o=`${e}-${i}`,u=this.throttleMap.get(o)||0;if(s-u<this.minCommandInterval&&!r.force)return!0;this.throttleMap.set(o,s);try{switch(e){case Qe.VIBRATE:return await this.vibrate(t,i);case Qe.OSCILLATE:return await this.oscillate(t,i);case Qe.LINEAR:return await this.linear(t,r.duration||100,i);case Qe.ROTATE:return await this.rotate(t,i);default:return(c=this.notify)==null||c.call(this,"status:buttplug",{message:`Unknown capability: ${e}`,type:"log"}),!1}}catch{return!1}}async stopAll(){var e,t;if(!(!this.isConnected||!this.client))try{await this.client.stopAllDevices(),(e=this.notify)==null||e.call(this,"status:buttplug",{message:"All devices stopped",type:"log"})}catch(i){(t=this.notify)==null||t.call(this,"status:buttplug",{message:`Stop all failed: ${i.message}`,type:"log"})}}getDevices(){return Array.from(this.devices.values())}getSelected(){return this.selectedDevice}getDeviceInfo(){return this.selectedDevice?{deviceName:this.selectedDevice.name,deviceIndex:this.selectedDevice.index,actuatorCount:this.actuators.length,actuators:this.actuators.map(e=>({index:e.index,type:e.type,capability:e.capability,enabled:e.settings.enabled,assignedChannel:e.getAssignedChannelName(),metadata:e.metadata})),messageTimingGap:this.selectedDevice.messageTimingGap||0}:null}getStatus(){return{isConnected:this.isConnected,isScanning:this.isScanning,deviceCount:this.devices.size,selectedDevice:this.selectedDevice?{index:this.selectedDevice.index,name:this.selectedDevice.name}:null,actuatorCount:this.actuators.length,globalScale:this.globalScale,globalOffset:this.globalOffset,config:{intifaceUrl:this.intifaceUrl}}}setIntifaceUrl(e){var i,r;const t=this._validateAndCleanUrl(e);if(this.intifaceUrl!==t){const s=this.isConnected,o=this.intifaceUrl;this.intifaceUrl=t,this.connector&&this.connector._url!==t&&(this.connector=new Zr.ButtplugBrowserWebsocketClientConnector(t)),(i=this.notify)==null||i.call(this,"status:buttplug",{message:`URL changed: ${o} → ${t}`,type:"log"}),(r=this.notify)==null||r.call(this,"buttplug:config",{key:"intifaceUrl",data:{oldUrl:o,newUrl:t,wasConnected:s}})}}getIntifaceUrl(){return this.intifaceUrl}_validateAndCleanUrl(e){var i;if(!e||typeof e!="string")return"ws://localhost:12345";let t=e.trim();!t.startsWith("ws://")&&!t.startsWith("wss://")&&(t="ws://"+t);try{const r=new URL(t);r.port||(r.port="12345",t=r.toString())}catch{return(i=this.notify)==null||i.call(this,"status:buttplug",{message:`Invalid WebSocket URL, using default: ${e}`,type:"log"}),"ws://localhost:12345"}return t}async cleanup(){var e,t,i,r;if(this.isConnected&&this.client)try{await this.client.stopAllDevices()}catch(s){(e=this.notify)==null||e.call(this,"status:buttplug",{message:`Stop all devices failed during cleanup: ${s.message}`,type:"log"})}if(this.isConnected&&this.client)try{await this.client.disconnect()}catch(s){(t=this.notify)==null||t.call(this,"status:buttplug",{message:`Disconnect failed during cleanup: ${s.message}`,type:"log"})}if(this.client){try{this.client.removeAllListeners()}catch(s){(i=this.notify)==null||i.call(this,"status:buttplug",{message:`Remove listeners failed during cleanup: ${s.message}`,type:"log"})}this.client=null}this.connector=null,this.throttleMap.clear(),this.actuators.forEach(s=>s.unplug()),this.actuators=[],this.initialized=!1,this.isConnected=!1,this.isScanning=!1,this.devices.clear(),this.devices.set(-1,this.virtualDevice),this._resetDevice(),(r=this.notify)==null||r.call(this,"status:buttplug",{message:"ButtPlug cleanup completed",type:"log"})}};ke(yE,"ButtPlugManager");let CP=yE;const vE=class{constructor(e,t,i={},r={},s=null){var o,u;if(!e||typeof e!="string")throw new Error("Channel name must be a non-empty string");if(this.name=e,this.metadata=r,this.notify=s,this.fieldConfig={timeField:"at",valueField:"pos",directionField:null,durationField:null,...i},!this.fieldConfig.timeField||!this.fieldConfig.valueField)throw new Error(`Channel "${e}": timeField and valueField must be specified`);this.interpolationCache={leftIndex:0,rightIndex:1,lastTime:-1},this.seekThreshold=1e3,this.connectedActuators=new Map,(o=this.notify)==null||o.call(this,"status:channel",{message:`Creating channel "${e}"...`,type:"log"}),this.actions=this._processActions(t),this.likelyCapability=this._determineLikelyCapability(),this.type=this._determineType(),this.duration=this._calculateDuration(),this.averageIntervalMs=this.actions.length>1?this.duration*1e3/(this.actions.length-1):100,this.valueRange=this._calculateValueRange(),(u=this.notify)==null||u.call(this,"status:channel",{message:`Channel "${e}" created: ${this.type} type, likely_capability: ${this.likelyCapability}, ${this.actions.length} actions, ${this.duration.toFixed(2)}s`,type:"success"})}_determineLikelyCapability(){var i,r;if(this.metadata.capability)return(i=this.notify)==null||i.call(this,"status:channel",{message:`Channel "${this.name}": Using explicit capability from metadata: ${this.metadata.capability}`,type:"log"}),this.metadata.capability;const e=this._heuristicCapabilityAnalysis(),t=this._validateCapabilityWithContext(e);return(r=this.notify)==null||r.call(this,"status:channel",{message:`Channel "${this.name}": Likely capability determined as "${t}" (from heuristic: "${e}")`,type:"log"}),t}_heuristicCapabilityAnalysis(){var i;const e=this.name.toLowerCase(),t=[{capability:Qe.ROTATE,regex:/^(rot|rotat|twist|spin|turn|roll|angle|pitch|yaw)$/i},{capability:Qe.LINEAR,regex:/^(pos|position|stroke|linear|up|down|vertical|y)$/i},{capability:Qe.OSCILLATE,regex:/^(osc|oscill|swing|wave|sway)$/i},{capability:Qe.VIBRATE,regex:/^(vib|vibr|vibrat|buzz|rumble|shake)$/i},{capability:Qe.VIBRATE,regex:/^(squeeze|constrict|pressure|grip|clamp)$/i},{capability:Qe.VIBRATE,regex:/^(suck|suction|vacuum|pump)$/i}];for(const{capability:r,regex:s}of t)if(s.test(e))return(i=this.notify)==null||i.call(this,"status:channel",{message:`Channel "${this.name}": Pattern match for ${r}`,type:"log"}),r;return this._inferCapabilityFromFieldConfig()}_inferCapabilityFromFieldConfig(){var t,i,r,s,o;if(this.fieldConfig.directionField)return(t=this.notify)==null||t.call(this,"status:channel",{message:`Channel "${this.name}": Direction field detected, suggesting rotate`,type:"log"}),Qe.ROTATE;if(this.fieldConfig.durationField)return(i=this.notify)==null||i.call(this,"status:channel",{message:`Channel "${this.name}": Duration field detected, suggesting linear`,type:"log"}),Qe.LINEAR;const e=this.fieldConfig.valueField.toLowerCase();return e.includes("speed")||e.includes("spd")?((r=this.notify)==null||r.call(this,"status:channel",{message:`Channel "${this.name}": Speed field detected, suggesting rotate`,type:"log"}),Qe.ROTATE):e.includes("pos")||e.includes("position")?((s=this.notify)==null||s.call(this,"status:channel",{message:`Channel "${this.name}": Position field detected, suggesting linear`,type:"log"}),Qe.LINEAR):((o=this.notify)==null||o.call(this,"status:channel",{message:`Channel "${this.name}": No clear indicators, defaulting to linear`,type:"log"}),Qe.LINEAR)}_validateCapabilityWithContext(e){var r,s;const t=this.actions.some(o=>o.value<0),i=!!this.fieldConfig.directionField;return e===Qe.ROTATE&&!i&&!t?((r=this.notify)==null||r.call(this,"status:channel",{message:`Channel "${this.name}": Rotate detected but no rotation data, downgrading to linear`,type:"warning"}),Qe.LINEAR):e===Qe.LINEAR&&i?((s=this.notify)==null||s.call(this,"status:channel",{message:`Channel "${this.name}": Linear detected but has direction field, upgrading to rotate`,type:"log"}),Qe.ROTATE):e}plug(e){var t,i,r;return this.canPlugTo(e)?(e.assignedChannel&&e.assignedChannel!==this&&e.assignedChannel.unplug(e),this.connectedActuators.set(e.index,e),e.assignedChannel=this,e.previousMappedChannel=this.name,(i=this.notify)==null||i.call(this,"status:channel",{message:`Channel "${this.name}" plugged to actuator ${e.index} (${e.capability})`,type:"success"}),(r=this.notify)==null||r.call(this,"channel:plugged",{channelName:this.name,actuatorIndex:e.index,actuator:{index:e.index,type:e.type,capability:e.capability},connectedCount:this.connectedActuators.size}),!0):((t=this.notify)==null||t.call(this,"status:channel",{message:`Cannot plug actuator ${e.index} to channel "${this.name}" (incompatible: ${e.type} vs ${this.type})`,type:"error"}),!1)}unplug(e){var t,i,r;this.connectedActuators.get(e.index)===e?(this.connectedActuators.delete(e.index),e.assignedChannel===this&&(e.assignedChannel=null),(t=this.notify)==null||t.call(this,"status:channel",{message:`Channel "${this.name}" unplugged from actuator ${e.index}`,type:"info"}),(i=this.notify)==null||i.call(this,"channel:unplugged",{channelName:this.name,actuatorIndex:e.index,actuator:{index:e.index,type:e.type,capability:e.capability},connectedCount:this.connectedActuators.size})):(r=this.notify)==null||r.call(this,"status:channel",{message:`Actuator ${e.index} was not connected to channel "${this.name}"`,type:"warning"})}unplugAll(){Array.from(this.connectedActuators.values()).forEach(t=>this.unplug(t))}canPlugTo(e){return e.settings.enabled&&this.type===e.type}getConnectedActuators(){return Array.from(this.connectedActuators.values())}getLikelyCapability(){return this.likelyCapability}getMetadata(){return{...this.metadata}}hasActions(){return this.actions.length>0}getActionCount(){return this.actions.length}_processActions(e){var c,h,f,m,x,w,A;if(!Array.isArray(e)||e.length===0)return(c=this.notify)==null||c.call(this,"status:channel",{message:`Channel "${this.name}": No actions provided`,type:"error"}),[];(h=this.notify)==null||h.call(this,"status:channel",{message:`Channel "${this.name}": Processing ${e.length} raw actions...`,type:"log"});const{timeField:t,valueField:i,directionField:r}=this.fieldConfig,s=[];for(const[C,D]of e.entries()){const N=D[t];let L=D[i];if(r&&D[r]!==void 0){const P=D[r],X=Math.abs(L);L<0&&((f=this.notify)==null||f.call(this,"status:channel",{message:`Channel "${this.name}": Negative value with direction field, applying Math.abs()`,type:"warning"})),typeof P=="boolean"?L=P?X:-X:typeof P=="string"?L=["cw","clockwise","right","positive","+","true","1"].includes(P.toLowerCase())?X:-X:typeof P=="number"?L=P>=0?X:-X:((m=this.notify)==null||m.call(this,"status:channel",{message:`Channel "${this.name}": Invalid direction "${P}", using absolute value`,type:"warning"}),L=X)}if(typeof N=="number"&&typeof L=="number"){const P={...D};delete P[t],delete P[i],r&&delete P[r],s.push({time:N,value:L,metadata:P})}else(x=this.notify)==null||x.call(this,"status:channel",{message:`Channel "${this.name}": Invalid action at index ${C} (time: ${typeof N}, value: ${typeof L})`,type:"log"})}if(s.length===0)throw(w=this.notify)==null||w.call(this,"status:channel",{message:`Channel "${this.name}": No valid actions found. Check "${t}" and "${i}" fields`,type:"error"}),new Error(`Channel "${this.name}": No valid actions. Check "${t}" and "${i}" fields.`);s.sort((C,D)=>C.time-D.time);const o=Math.max(...s.map(C=>Math.abs(C.value))),u=o>0?1/o:1;return(A=this.notify)==null||A.call(this,"status:channel",{message:`Channel "${this.name}": ${s.length} valid actions, normalization factor: ${u.toFixed(3)}`,type:"log"}),s.map(({time:C,value:D,metadata:N})=>({time:C,value:D*u,metadata:N}))}_determineType(){var i,r;if(this.actions.length===0)return ts.SCALAR;if(this.fieldConfig.directionField)return(i=this.notify)==null||i.call(this,"status:channel",{message:`Channel "${this.name}": Type determined as POLAR (has direction field)`,type:"log"}),ts.POLAR;const e=this.actions.some(s=>s.value<0),t=e?ts.POLAR:ts.SCALAR;return(r=this.notify)==null||r.call(this,"status:channel",{message:`Channel "${this.name}": Type determined as ${t} (${e?"has negative values":"all positive values"})`,type:"log"}),t}_calculateDuration(){var t;const e=this.actions.length>0?this.actions[this.actions.length-1].time/1e3:0;return(t=this.notify)==null||t.call(this,"status:channel",{message:`Channel "${this.name}": Duration calculated as ${e.toFixed(2)}s`,type:"log"}),e}_calculateValueRange(){var i;if(this.actions.length===0)return[0,0];const e=this.actions.map(r=>r.value),t=[Math.min(...e),Math.max(...e)];return(i=this.notify)==null||i.call(this,"status:channel",{message:`Channel "${this.name}": Value range: [${t[0].toFixed(3)}, ${t[1].toFixed(3)}]`,type:"log"}),t}interpolateAt(e){if(this.actions.length===0)return 0;const t=e*1e3;if(t<=this.actions[0].time||t>=this.actions[this.actions.length-1].time)return 0;const{leftIndex:i,rightIndex:r,lastTime:s}=this.interpolationCache;(t<this.actions[i].time||t>=this.actions[r].time)&&this._updateInterpolationCache(t);const o=this.actions[this.interpolationCache.leftIndex],u=this.actions[this.interpolationCache.rightIndex],c=(t-o.time)/(u.time-o.time),h=o.value+c*(u.value-o.value);return this.interpolationCache.lastTime=t,h}_updateInterpolationCache(e){const{leftIndex:t,rightIndex:i,lastTime:r}=this.interpolationCache;r>=0&&Math.abs(e-r)<=this.seekThreshold&&this._tryIncrementalSlide(e)||this._performBinarySearch(e)}_tryIncrementalSlide(e){var u,c;let{leftIndex:t,rightIndex:i}=this.interpolationCache;const r=this.seekThreshold/this.averageIntervalMs;let s=0;for(;e<((u=this.actions[t])==null?void 0:u.time)&&t>0&&s<r;)t--,i--,s++;for(;e>=((c=this.actions[i])==null?void 0:c.time)&&i<this.actions.length-1&&s<r;)t++,i++,s++;return t>=0&&i<this.actions.length&&t<i&&e>=this.actions[t].time&&e<this.actions[i].time?(this.interpolationCache.leftIndex=t,this.interpolationCache.rightIndex=i,!0):!1}_performBinarySearch(e){var c,h;const{leftIndex:t,rightIndex:i}=this.interpolationCache;let r,s;e<((c=this.actions[t])==null?void 0:c.time)?(r=0,s=t):e>((h=this.actions[i])==null?void 0:h.time)?(r=i,s=this.actions.length-1):(r=t,s=i);let o=r,u=s;for(;u-o>1;){const f=Math.floor((o+u)/2);this.actions[f].time<=e?o=f:u=f}this.interpolationCache.leftIndex=o,this.interpolationCache.rightIndex=u}getDebugInfo(){return{name:this.name,type:this.type,likelyCapability:this.likelyCapability,duration:this.duration,actionCount:this.actions.length,valueRange:this.valueRange,fieldConfig:{...this.fieldConfig},metadata:{...this.metadata},connectedActuators:Object.fromEntries(Array.from(this.connectedActuators.entries()).map(([t,i])=>[t,{index:i.index,type:i.type,enabled:i.settings.enabled}])),sampleActions:this.actions.slice(0,3).map(t=>({...t,metadata:t.metadata?t.metadata:void 0})),cache:{...this.interpolationCache}}}toString(){const e=`${this.fieldConfig.valueField}${this.fieldConfig.directionField?"+"+this.fieldConfig.directionField:""}`,t=this.connectedActuators.size;return`Channel[${this.name}](${this.type}/${this.likelyCapability}, ${e}, ${this.actions.length} actions, ${this.duration.toFixed(2)}s, ${t} actuators)`}};ke(vE,"Channel");let wx=vE;const _E=class{constructor(e){this.notify=e,this.data=null,this.channels=[],this.duration=0,this.customFieldConfig=null}async loadFromSource(e){var t,i;try{(t=this.notify)==null||t.call(this,"status:funscript",{message:"Loading funscript from source...",type:"processing"});let r;return typeof e=="string"?e.startsWith("http")||e.startsWith("/")?r=await this._fetchWithCorsProxy(e):r=JSON.parse(e):r=e,this.load(r)}catch(r){throw(i=this.notify)==null||i.call(this,"status:funscript",{message:"Failed to load funscript from source",type:"error",error:r.message}),r}}load(e){var t,i,r,s,o,u;try{return(t=this.notify)==null||t.call(this,"status:funscript",{message:"Processing funscript data...",type:"processing"}),this.data=typeof e=="string"?JSON.parse(e):e,this._extractChannels(),this._calculateDuration(),(i=this.notify)==null||i.call(this,"status:funscript",{message:`Loaded ${this.channels.length} channels, ${this.duration.toFixed(2)}s`,type:"success"}),(r=this.notify)==null||r.call(this,"status:funscript",{message:`Channel extraction complete: ${this.channels.map(c=>c.name).join(", ")}`,type:"log"}),(s=this.notify)==null||s.call(this,"funscript:load",{data:this.data,channels:this.channels.map(c=>c.name),channelInstances:this.channels,duration:this.duration}),(o=this.notify)==null||o.call(this,"funscript:channels",{channels:this.channels.map(c=>c.name),channelInstances:this.channels,total:this.channels.length}),!0}catch(c){return(u=this.notify)==null||u.call(this,"status:funscript",{message:"Failed to process funscript",type:"error",error:c.message}),this._reset(),!1}}loadWithCustomFieldConfig(e,t=null){return this.customFieldConfig=t,this.load(e)}async loadFromPlaylistItem(e){var t,i,r,s;if(!e)return this.reset(),!0;try{return(t=this.notify)==null||t.call(this,"status:funscript",{message:`Loading funscript for item: ${e.name||"Untitled"}`,type:"processing"}),e.funscript?(typeof e.funscript=="object"?this.load(e.funscript):await this.loadFromSource(e.funscript),(i=this.notify)==null||i.call(this,"status:funscript",{message:`Funscript loaded for: ${e.name||"Untitled"}`,type:"success"})):(this.reset(),(r=this.notify)==null||r.call(this,"status:funscript",{message:"No funscript for current item",type:"info"})),!0}catch(o){return(s=this.notify)==null||s.call(this,"status:funscript",{message:`Failed to load funscript from playlist item: ${o.message}`,type:"error"}),this.reset(),!1}}async _fetchWithCorsProxy(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status}`);return await t.json()}catch(t){try{const i=`https://corsproxy.io/?${encodeURIComponent(e)}`,r=await fetch(i);if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()}catch(i){throw new Error(`Failed to fetch funscript. Direct: ${t.message}, Proxy: ${i.message}`)}}}hasFunscript(){return this.channels.length>0}reset(){var e,t;this._reset(),(e=this.notify)==null||e.call(this,"status:funscript",{message:"Funscript manager reset",type:"info"}),(t=this.notify)==null||t.call(this,"funscript:reset",{})}_reset(){this.channels.forEach(e=>e.unplugAll()),this.data=null,this.channels=[],this.duration=0,this.customFieldConfig=null}getChannels(){return[...this.channels]}getChannelNames(){return this.channels.map(e=>e.name)}getChannel(e){return this.channels.find(t=>t.name===e)||null}hasChannel(e){return this.getChannel(e)!==null}getChannelsByType(e){return this.channels.filter(t=>t.type===e)}getDuration(){return this.duration}interpolateAll(e){const t={};for(const[i,r]of Object.entries(e)){const s=this.getChannel(i);if(s){const o=s.interpolateAt(r);o!=null&&(t[i]=o)}}return t}autoMapChannels(e){var s,o,u,c,h;if(this.channels.length===0)return(s=this.notify)==null||s.call(this,"status:funscript",{message:"No channels available for auto-mapping",type:"info"}),{suggestions:[],mapped:0,total:0,mode:"no channels"};if(!e||e.length===0)return(o=this.notify)==null||o.call(this,"status:funscript",{message:"No actuators available for auto-mapping",type:"info"}),{suggestions:[],mapped:0,total:this.channels.length,mode:"no actuators"};(u=this.notify)==null||u.call(this,"status:funscript",{message:`Starting auto-mapping for ${this.channels.length} channels with ${e.length} actuators...`,type:"processing"});const t=[];let i=0;for(const f of this.channels){const m=this._findBestActuatorMatch(f,e);m?(t.push({channelName:f.name,actuatorIndex:m.index,confidence:"high",reason:`${f.likelyCapability} match`}),i++):(c=this.notify)==null||c.call(this,"status:funscript",{message:`No compatible actuator found for channel "${f.name}" (${f.type}, likely: ${f.likelyCapability})`,type:"warning"})}const r=i===this.channels.length?"complete":i>0?"partial":"none";return(h=this.notify)==null||h.call(this,"status:funscript",{message:`Auto-mapping complete: ${i}/${this.channels.length} channels mapped`,type:i>0?"success":"warning"}),{suggestions:t,mapped:i,total:this.channels.length,mode:r}}_findBestActuatorMatch(e,t){var u,c,h,f;const i=t.filter(m=>m.settings.enabled&&e.canPlugTo(m));if(i.length===0)return(u=this.notify)==null||u.call(this,"status:funscript",{message:`No compatible actuators for channel "${e.name}" (${e.type})`,type:"log"}),null;const r=i.find(m=>m.capability===e.likelyCapability);if(r)return(c=this.notify)==null||c.call(this,"status:funscript",{message:`Perfect match: ${e.name} → ${r.capability} (likely_capability match)`,type:"log"}),r;const s=["linear","vibrate","oscillate","rotate"];for(const m of s){const x=i.find(w=>w.capability===m);if(x)return(h=this.notify)==null||h.call(this,"status:funscript",{message:`Fallback mapping: ${e.name} → ${m} (priority order)`,type:"log"}),x}const o=i[0]||null;return o&&((f=this.notify)==null||f.call(this,"status:funscript",{message:`Last resort mapping: ${e.name} → ${o.capability} (first available)`,type:"log"})),o}_extractChannels(){var t,i,r,s,o,u,c;this.channels=[],(t=this.notify)==null||t.call(this,"status:funscript",{message:"Extracting channels from funscript data...",type:"processing"});const e=this._extractMetadata();if((i=this.data.actions)!=null&&i.length){const h=this._createChannelFromActions("pos",this.data.actions,e);h&&(this.channels.push(h),(r=this.notify)==null||r.call(this,"status:funscript",{message:`Found main channel: ${h.name} (${this.data.actions.length} actions)`,type:"log"}))}if(this._extractMultiAxisChannels(e),this.data.tracks){(s=this.notify)==null||s.call(this,"status:funscript",{message:`Processing ${Object.keys(this.data.tracks).length} nested tracks...`,type:"log"});for(const[h,f]of Object.entries(this.data.tracks))if((o=f.actions)!=null&&o.length){const m={...e,...f.metadata},x=this._createChannelFromActions(h,f.actions,m);x&&(this.channels.push(x),(u=this.notify)==null||u.call(this,"status:funscript",{message:`Found track channel: ${x.name} (${f.actions.length} actions)`,type:"log"}))}}if(this.channels.length===0)throw new Error("No valid channels found in funscript data");(c=this.notify)==null||c.call(this,"status:funscript",{message:`Channel extraction complete: ${this.channels.length} channels created`,type:"success"})}_extractMultiAxisChannels(e){var i,r;(i=this.notify)==null||i.call(this,"status:funscript",{message:"Scanning for multi-axis channels...",type:"log"});let t=0;for(const[s,o]of Object.entries(this.data))if(this._isActionArray(o)){if(s==="actions")continue;const u=this._createChannelFromActions(s,o,e);u&&(this.channels.push(u),t++)}t>0&&((r=this.notify)==null||r.call(this,"status:funscript",{message:`Found ${t} multi-axis channels`,type:"log"}))}_isActionArray(e){return Array.isArray(e)&&e.length>0&&e.every(t=>typeof t=="object"&&t!==null&&(t.at!==void 0||t.t!==void 0||t.time!==void 0))}_createChannelFromActions(e,t,i={}){var r,s,o,u;try{if((r=this.notify)==null||r.call(this,"status:funscript",{message:`Creating channel from field: ${e} (${t.length} actions)`,type:"log"}),this.customFieldConfig&&this.customFieldConfig[e]){const f=this.customFieldConfig[e],m={timeField:f.timeField||"at",valueField:f.valueField||"pos",directionField:f.directionField||null,durationField:f.durationField||null};return(s=this.notify)==null||s.call(this,"status:funscript",{message:`Using user-defined config for ${e}`,type:"success"}),new wx(e,t,m,{...i,originalField:e},this.notify)}const c=this._buildBasicFieldConfig(e,t,i),h=new wx(e,t,c,{...i,originalField:e},this.notify);return(o=this.notify)==null||o.call(this,"status:funscript",{message:`Channel created: ${h.name} (${h.type}, likely: ${h.likelyCapability}, ${h.actions.length} actions)`,type:"log"}),h}catch(c){return(u=this.notify)==null||u.call(this,"status:funscript",{message:`Failed to create channel "${e}": ${c.message}`,type:"error"}),null}}_buildBasicFieldConfig(e,t,i){var f;if(t.length===0)return{timeField:"at",valueField:"pos"};const r=t[0],s=Object.keys(r),o=this._detectTimeField(s),u=this._detectValueField(s,e),c=this._detectDirectionField(s),h=this._detectDurationField(s);return(f=this.notify)==null||f.call(this,"status:funscript",{message:`Field detection for ${e}: time=${o}, value=${u}, direction=${c||"none"}, duration=${h||"none"}`,type:"log"}),{timeField:o,valueField:u,directionField:c,durationField:h}}_detectTimeField(e){const t=["at","t","time","timestamp"];for(const i of t)if(e.includes(i))return i;return"at"}_detectValueField(e,t){if(e.includes(t.toLowerCase()))return t.toLowerCase();const i=["pos","position","value","val","v","speed","spd","s","scalar","intensity","i"];for(const r of i)if(e.includes(r))return r;return"pos"}_detectDirectionField(e){const t=["clockwise","cw","direction","dir","ccw","counterclockwise"];for(const i of t)if(e.includes(i))return i;return null}_detectDurationField(e){const t=["duration","dur","d"];for(const i of t)if(e.includes(i))return i;return null}_extractMetadata(){return this.data?{metadata:this.data.metadata||{},channels:this.data.channels||{},mapping:this.data.mapping||{},...this.data.metadata}:{}}_calculateDuration(){this.duration=Math.max(...this.channels.map(e=>e.duration),0)}getChannelSuggestions(){return this.channels.map(e=>({name:e.name,type:e.type,likelyCapability:e.likelyCapability,actionCount:e.getActionCount(),duration:e.duration}))}getDebugInfo(){return{loaded:this.hasFunscript(),channelCount:this.channels.length,duration:this.duration,channels:this.channels.map(e=>({name:e.name,type:e.type,likelyCapability:e.likelyCapability,actionCount:e.getActionCount(),connectedActuators:e.getConnectedActuators().length})),customFieldConfig:this.customFieldConfig,dataKeys:this.data?Object.keys(this.data):[]}}getChannelMetadata(e){const t=this.getChannel(e);return t?t.getMetadata():{}}hasNegativeValues(e){const t=this.getChannel(e);return t?t.type===ts.POLAR:!1}getDetectedFields(){var t,i;if(!this.data)return{};const e={};((t=this.data.actions)==null?void 0:t.length)>0&&(e.pos=this._analyzeFieldsInActions(this.data.actions));for(const[r,s]of Object.entries(this.data))this._isActionArray(s)&&r!=="actions"&&(e[r]=this._analyzeFieldsInActions(s));if(this.data.tracks)for(const[r,s]of Object.entries(this.data.tracks))(i=s.actions)!=null&&i.length&&(e[r]=this._analyzeFieldsInActions(s.actions));return e}_analyzeFieldsInActions(e){if(!e||e.length===0)return{availableTimeFields:["at"],availableValueFields:["pos"],availableDirectionFields:[],availableDurationFields:[],otherFields:[],sampleAction:null};const t=e[0],i=Object.keys(t);return{availableTimeFields:i.filter(r=>{const s=r.toLowerCase();return["at","t","time","timestamp","ms"].includes(s)}),availableValueFields:i.filter(r=>{const s=r.toLowerCase();return["pos","p","position","scalar","speed","spd","s","val","v","value","intensity","i"].includes(s)}),availableDirectionFields:i.filter(r=>{const s=r.toLowerCase();return["clockwise","cw","direction","dir","ccw","counterclockwise"].includes(s)}),availableDurationFields:i.filter(r=>{const s=r.toLowerCase();return["duration","dur","d","delay","ms","millis","time"].includes(s)}),otherFields:i.filter(r=>{const s=r.toLowerCase();return!["at","t","time","timestamp","ms","pos","p","position","scalar","speed","spd","s","val","v","value","intensity","i","clockwise","cw","direction","dir","ccw","counterclockwise","duration","dur","d","delay","millis"].includes(s)}),sampleAction:t}}};ke(_E,"FunscriptManager");let wP=_E;const bE=class po{static detectMimeType(e){if(e.startsWith("data:")){const s=e.match(/data:([^;]+)/);return s?s[1]:"video/mp4"}const i=new URL(e,window.location.href).pathname.toLowerCase().split(".").pop();return{mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",mov:"video/quicktime",avi:"video/x-msvideo",mkv:"video/x-matroska",m4v:"video/mp4",ogv:"video/ogg",mp3:"audio/mpeg",wav:"audio/wav",ogg:"audio/ogg",m4a:"audio/mp4",aac:"audio/aac",flac:"audio/flac",oga:"audio/ogg",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",json:"application/json",funscript:"application/json"}[i]||"video/mp4"}static generateSilentAudio(e){const r=Math.floor(e*44100),s=new ArrayBuffer(44+r*2),o=new DataView(s),u=ke((h,f)=>{for(let m=0;m<f.length;m++)o.setUint8(h+m,f.charCodeAt(m))},"writeString");u(0,"RIFF"),o.setUint32(4,36+r*2,!0),u(8,"WAVE"),u(12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,1,!0),o.setUint32(24,44100,!0),o.setUint32(28,44100*2,!0),o.setUint16(32,2,!0),o.setUint16(34,16,!0),u(36,"data"),o.setUint32(40,r*2,!0);for(let h=0;h<r;h++)o.setInt16(44+h*2,0,!0);const c=new Blob([s],{type:"audio/wav"});return URL.createObjectURL(c)}static generateSVGPoster(e,t){let i="file";const r="#000000";if(e.sources&&e.sources.length>0){const u=e.sources[0],c=u.src.toLowerCase(),h=(u.type||"").toLowerCase();h.startsWith("audio/")||[".mp3",".wav",".ogg",".m4a",".aac"].some(f=>c.includes(f))?i="music":(h.startsWith("video/")||[".mp4",".webm",".mov",".avi",".mkv"].some(f=>c.includes(f)))&&(i="film")}else e.funscript?i="activity":e.duration&&(i="clock");const s=uE.icons[i].toSvg({width:16,height:16,stroke:"white","stroke-width":2}),o=`<svg width="48" height="32" xmlns="http://www.w3.org/2000/svg">
      <rect width="48" height="32" fill="${r}" rx="4"/>
      <g transform="translate(16, 8)">
        ${s}
      </g>
    </svg>`;return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(o)}`}static extractFunscriptDuration(e){try{let t=e;if(typeof e=="string"){if(e.startsWith("http")||e.startsWith("/"))return console.warn("Cannot extract duration from funscript URL synchronously"),0;t=JSON.parse(e)}if(!t||typeof t!="object")return 0;if(t.duration&&typeof t.duration=="number")return t.duration;let i=0;if(t.actions&&Array.isArray(t.actions)&&t.actions.length>0){const s=t.actions[t.actions.length-1];s&&typeof s.at=="number"&&(i=Math.max(i,s.at))}for(const[s,o]of Object.entries(t))if(Array.isArray(o)&&o.length>0){const u=o[o.length-1];u&&typeof u.at=="number"?i=Math.max(i,u.at):u&&typeof u.t=="number"?i=Math.max(i,u.t):u&&typeof u.time=="number"&&(i=Math.max(i,u.time))}return i>0?i/1e3+1:0}catch{return 0}}static async generatePosterFromVideo(e,t=10,i=480){return new Promise((r,s)=>{const o=document.createElement("video"),u=document.createElement("canvas"),c=u.getContext("2d");o.crossOrigin="anonymous",o.muted=!0,o.style.display="none",document.body.appendChild(o);const h=ke(()=>{o.parentNode&&o.parentNode.removeChild(o)},"cleanup");o.onloadedmetadata=()=>{const f=o.videoWidth/o.videoHeight;o.videoWidth>i?(u.width=i,u.height=i/f):(u.width=o.videoWidth,u.height=o.videoHeight),o.currentTime=Math.min(t,o.duration-1)},o.onseeked=()=>{try{c.drawImage(o,0,0,u.width,u.height);const f=u.toDataURL("image/jpeg",.8);if(f&&f.length>1e3){const m=Math.round(f.length*.75/1024);h(),r(f)}else h(),s(new Error("Failed to generate valid poster"))}catch(f){h(),s(f)}},o.onerror=()=>{h(),s(new Error("Video loading failed"))},o.src=e,o.load()})}static isSupportedMediaFile(e){const t=e.toLowerCase().split(".").pop();return["mp4","webm","mov","avi","mkv","ogv","m4v","mp3","wav","ogg","m4a","aac","flac"].includes(t)}static isFunscriptFile(e){const t=e.toLowerCase().split(".").pop();return["funscript","json"].includes(t)}static extractFilename(e){if(e.startsWith("data:"))return"uploaded_file";try{return new URL(e,window.location.href).pathname.split("/").pop().split(".")[0]||"unnamed"}catch{return"unnamed"}}static deepComparePlaylist(e,t){if(e===t)return!0;if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!po.deepComparePlaylistItem(e[i],t[i]))return!1;return!0}static deepComparePlaylistItem(e,t){if(e===t)return!0;if(!e||!t)return e===t;const i=new Set(["_id","_generatedPoster","poster"]),r=Object.keys(e).filter(o=>!i.has(o)),s=Object.keys(t).filter(o=>!i.has(o));if(r.length!==s.length)return!1;for(const o of r){if(!s.includes(o))return!1;const u=e[o],c=t[o];if(typeof u=="object"&&typeof c=="object")if(Array.isArray(u)&&Array.isArray(c)){if(!po.deepCompareArray(u,c))return!1}else{if(Array.isArray(u)||Array.isArray(c))return!1;if(!po.deepCompareObject(u,c))return!1}else if(u!==c)return!1}return!0}static deepCompareArray(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){const r=e[i],s=t[i];if(typeof r=="object"&&typeof s=="object")if(Array.isArray(r)&&Array.isArray(s)){if(!po.deepCompareArray(r,s))return!1}else if(!Array.isArray(r)&&!Array.isArray(s)){if(!po.deepCompareObject(r,s))return!1}else return!1;else if(r!==s)return!1}return!0}static deepCompareObject(e,t){if(!e||!t)return e===t;const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(const s of i){if(!r.includes(s))return!1;const o=e[s],u=t[s];if(typeof o=="object"&&typeof u=="object")if(Array.isArray(o)&&Array.isArray(u)){if(!po.deepCompareArray(o,u))return!1}else if(!Array.isArray(o)&&!Array.isArray(u)){if(!po.deepCompareObject(o,u))return!1}else return!1;else if(o!==u)return!1}return!0}};ke(bE,"PlaylistUtils");let Ou=bE;const xE=class{constructor(e){ut(this,"loadPlaylist",ke(async t=>{var i,r,s,o,u,c,h;if(!t||t.length===0)return this._resetPlaylist(),(i=this.notify)==null||i.call(this,"status:playlist",{message:"No playlist to load",type:"info"}),(r=this.notify)==null||r.call(this,"playlist:loaded",{items:[],originalPlaylist:[],totalItems:0}),[];try{if(Ou.deepComparePlaylist(this.originalPlaylist,t))return(s=this.notify)==null||s.call(this,"status:playlist",{message:"Playlist content identical, keeping current state",type:"log"}),this.items;(o=this.notify)==null||o.call(this,"status:playlist",{message:`Playlist content changed, processing ${t.length} items...`,type:"processing"}),this.originalPlaylist=[...t];const f=await this.processPlaylist(t);return this.items=f,this.currentIndex=f.length>0?0:-1,(u=this.notify)==null||u.call(this,"status:playlist",{message:`Playlist loaded: ${f.length} items processed`,type:"success"}),(c=this.notify)==null||c.call(this,"playlist:loaded",{items:this.items,originalPlaylist:this.originalPlaylist,totalItems:this.items.length}),this.items}catch(f){throw(h=this.notify)==null||h.call(this,"status:playlist",{message:"Playlist loading failed",type:"error",error:f.message}),f}},"loadPlaylist")),ut(this,"processPlaylist",ke(async t=>{var c,h,f,m,x,w;(c=this.notify)==null||c.call(this,"status:playlist",{message:"Starting playlist processing pipeline...",type:"log"});const i=this.filterValidItems(t);(h=this.notify)==null||h.call(this,"status:playlist",{message:`Filtered to ${i.length} valid items`,type:"log"});const r=this.markItemTypes(i);(f=this.notify)==null||f.call(this,"status:playlist",{message:"Item types marked",type:"log"});const s=this.addFallbackPosters(r);(m=this.notify)==null||m.call(this,"status:playlist",{message:"Fallback posters generated",type:"log"});const o=this.processNoMediaItems(s);(x=this.notify)==null||x.call(this,"status:playlist",{message:"Silent audio generated for haptic-only items",type:"log"});const u=this.normalizeSources(o);return(w=this.notify)==null||w.call(this,"status:playlist",{message:"Source normalization complete",type:"log"}),u},"processPlaylist")),ut(this,"filterValidItems",ke(t=>{var s,o;(s=this.notify)==null||s.call(this,"status:playlist",{message:`Filtering ${t.length} items for validity...`,type:"log"});const i=t.filter((u,c)=>{var h,f;return u.sources&&u.sources.length>0||u.funscript?!0:u.duration&&!u.sources&&!u.funscript?((h=this.notify)==null||h.call(this,"status:playlist",{message:`Filtered out timeline-only item ${c+1}`,type:"log"}),!1):((f=this.notify)==null||f.call(this,"status:playlist",{message:`Filtered out empty item ${c+1}`,type:"log"}),!1)}),r=t.length-i.length;return r>0&&((o=this.notify)==null||o.call(this,"status:playlist",{message:`Filtered out ${r} invalid items`,type:"info"})),i},"filterValidItems")),ut(this,"markItemTypes",ke(t=>{var i;return(i=this.notify)==null||i.call(this,"status:playlist",{message:"Analyzing item types...",type:"log"}),t.map((r,s)=>{var u;let o="unknown";if(r.sources&&r.sources.length>0){const c=r.sources[0],h=(c.type||Ou.detectMimeType(c.src)).toLowerCase();h.startsWith("video/")?o=r.funscript?"video_haptic":"video":h.startsWith("audio/")?o=r.funscript?"audio_haptic":"audio":o="media"}else r.funscript&&(o="haptic");return(u=this.notify)==null||u.call(this,"status:playlist",{message:`Item ${s+1}: ${o}`,type:"log"}),{...r,item_type:o}})},"markItemTypes")),ut(this,"processNoMediaItems",ke(t=>{var s,o;(s=this.notify)==null||s.call(this,"status:playlist",{message:"Processing haptic-only items...",type:"log"});let i=0;const r=t.map((u,c)=>{var h,f,m;if(u.sources&&u.sources.length>0)return u;if(u.funscript)try{const x=Ou.extractFunscriptDuration(u.funscript);if(x>0){const w=Ou.generateSilentAudio(x);return i++,(h=this.notify)==null||h.call(this,"status:playlist",{message:`Generated ${x.toFixed(1)}s silent audio for item ${c+1}`,type:"log"}),{...u,sources:[{src:w,type:"audio/wav"}]}}}catch(x){(f=this.notify)==null||f.call(this,"status:playlist",{message:`Failed to process funscript for item ${c+1}: ${x.message}`,type:"error"})}return(m=this.notify)==null||m.call(this,"status:playlist",{message:`Unexpected item without sources or funscript at index ${c}`,type:"log"}),u});return i>0&&((o=this.notify)==null||o.call(this,"status:playlist",{message:`Generated silent audio for ${i} haptic-only items`,type:"info"})),r},"processNoMediaItems")),ut(this,"normalizeSources",ke(t=>{var i;return(i=this.notify)==null||i.call(this,"status:playlist",{message:"Normalizing source MIME types...",type:"log"}),t.map(r=>{if(!r.sources||r.sources.length===0)return r;const s=r.sources.map(o=>({...o,type:o.type||Ou.detectMimeType(o.src)}));return{...r,sources:s}})},"normalizeSources")),ut(this,"addFallbackPosters",ke(t=>{var s,o;(s=this.notify)==null||s.call(this,"status:playlist",{message:"Generating fallback posters...",type:"log"});let i=0;const r=t.map((u,c)=>u.poster?u:(i++,{...u,poster:Ou.generateSVGPoster(u,c),_generatedPoster:!0}));return i>0&&((o=this.notify)==null||o.call(this,"status:playlist",{message:`Generated ${i} SVG fallback posters`,type:"log"})),r},"addFallbackPosters")),ut(this,"next",ke(()=>{var i,r;if(this.items.length===0)return(i=this.notify)==null||i.call(this,"status:playlist",{message:"Cannot go next: empty playlist",type:"info"}),!1;const t=this.currentIndex+1;return t>=this.items.length?((r=this.notify)==null||r.call(this,"status:playlist",{message:"Cannot go next: end of playlist reached",type:"info"}),!1):this.goTo(t)},"next")),ut(this,"previous",ke(()=>{var i,r;if(this.items.length===0)return(i=this.notify)==null||i.call(this,"status:playlist",{message:"Cannot go previous: empty playlist",type:"info"}),!1;const t=this.currentIndex-1;return t<0?((r=this.notify)==null||r.call(this,"status:playlist",{message:"Cannot go previous: beginning of playlist reached",type:"info"}),!1):this.goTo(t)},"previous")),ut(this,"goTo",ke(t=>{var o,u,c,h;if(this.items.length===0)return(o=this.notify)==null||o.call(this,"status:playlist",{message:"Cannot navigate: empty playlist",type:"error"}),!1;if(t<0||t>=this.items.length)return(u=this.notify)==null||u.call(this,"status:playlist",{message:`Cannot navigate to index ${t}: out of bounds`,type:"error"}),!1;const i=this.currentIndex;this.currentIndex=t;const r=this.items[t],s=(r==null?void 0:r.name)||`Item ${t+1}`;return(c=this.notify)==null||c.call(this,"status:playlist",{message:`Playing: ${s} (${t+1}/${this.items.length})`,type:"success"}),(h=this.notify)==null||h.call(this,"playlist:itemChanged",{index:t,item:r?{...r}:null,previousIndex:i,hasNext:this.canNext(),hasPrevious:this.canPrevious()}),!0},"goTo")),ut(this,"canNext",ke(()=>this.items.length>0&&this.currentIndex<this.items.length-1,"canNext")),ut(this,"canPrevious",ke(()=>this.items.length>0&&this.currentIndex>0,"canPrevious")),ut(this,"getCurrentIndex",ke(()=>this.currentIndex,"getCurrentIndex")),ut(this,"getCurrentItem",ke(()=>this.currentIndex>=0&&this.currentIndex<this.items.length?this.items[this.currentIndex]:null,"getCurrentItem")),ut(this,"getOriginalPlaylist",ke(()=>[...this.originalPlaylist],"getOriginalPlaylist")),ut(this,"getPlaylistInfo",ke(()=>({currentIndex:this.currentIndex,totalItems:this.items.length,hasPlaylist:this.items.length>0,canNext:this.canNext(),canPrevious:this.canPrevious(),isPlaying:this.isPlaying,currentTime:this.currentTime,duration:this.duration}),"getPlaylistInfo")),ut(this,"updatePlaybackState",ke((t,i=null,r=null)=>{var o,u;let s=!1;this.isPlaying!==t&&(this.isPlaying=t,s=!0),i!==null&&this.currentTime!==i&&(this.currentTime=i,s=!0),r!==null&&this.duration!==r&&(this.duration=r,s=!0),s&&((o=this.notify)==null||o.call(this,"status:playlist",{message:`Playback state: ${t?"playing":"paused"} ${i==null?void 0:i.toFixed(1)}s/${r==null?void 0:r.toFixed(1)}s`,type:"log"}),(u=this.notify)==null||u.call(this,"playlist:playbackChanged",{isPlaying:this.isPlaying,currentTime:this.currentTime,duration:this.duration,currentIndex:this.currentIndex,currentItem:this.getCurrentItem(),playlistInfo:this.getPlaylistInfo()}))},"updatePlaybackState")),ut(this,"updateCurrentItemDuration",ke(t=>{var s,o;const i=this.getCurrentItem();if(!i)return!1;const r=i.duration;return i.duration=t,(s=this.notify)==null||s.call(this,"status:playlist",{message:`Duration corrected: ${(r==null?void 0:r.toFixed(1))||"unknown"}s → ${t.toFixed(1)}s`,type:"log"}),(o=this.notify)==null||o.call(this,"playlist:itemUpdated",{index:this.currentIndex,item:{...i},change:{field:"duration",oldValue:r,newValue:t}}),!0},"updateCurrentItemDuration")),ut(this,"_resetPlaylist",ke(()=>{this.currentIndex=-1,this.items=[],this.originalPlaylist=[],this.isPlaying=!1,this.currentTime=0,this.duration=0},"_resetPlaylist")),ut(this,"reset",ke(()=>{var t;this._resetPlaylist(),(t=this.notify)==null||t.call(this,"status:playlist",{message:"Playlist manager reset",type:"info"})},"reset")),ut(this,"cleanup",ke(()=>{var t;this._resetPlaylist(),(t=this.notify)==null||t.call(this,"status:playlist",{message:"Playlist manager cleanup completed",type:"log"})},"cleanup")),ut(this,"getStats",ke(()=>({totalItems:this.items.length,currentIndex:this.currentIndex,isPlaying:this.isPlaying,hasGeneratedPosters:this.items.filter(t=>t._generatedPoster).length,processingComplete:!0}),"getStats")),ut(this,"getDebugInfo",ke(()=>{var i;const t=this.getStats();return(i=this.notify)==null||i.call(this,"status:playlist",{message:`Debug info requested: ${t.totalItems} items, index ${t.currentIndex}, ${t.hasGeneratedPosters} generated posters`,type:"log"}),{state:{currentIndex:this.currentIndex,totalItems:this.items.length,isPlaying:this.isPlaying,currentTime:this.currentTime,duration:this.duration},currentItem:this.getCurrentItem(),navigation:{canNext:this.canNext(),canPrevious:this.canPrevious()},stats:t}},"getDebugInfo")),this.notify=e,this.currentIndex=-1,this.items=[],this.originalPlaylist=[],this.isPlaying=!1,this.currentTime=0,this.duration=0}};ke(xE,"PlaylistManager");let EP=xE;const SE=class{constructor(e){this.notify=e,this.enableConsoleLogging=!1,this.maxDebugLogs=1e3,this.sessionStart=performance.now(),this.debugLogs=[],this.statusEmojis={log:"📝",info:"ℹ️",success:"✅",warning:"⚠️",error:"❌",processing:"⏳",device:"🔌",funscript:"📊",playlist:"📋",media:"🎬"}}createMessage(e,t={}){return{timestamp:new Date().toISOString(),relativeTime:((performance.now()-this.sessionStart)/1e3).toFixed(3),source:this._extractSource(e),type:t.type||"log",message:t.message||"",error:t.error||null,event:e,id:this._generateMessageId()}}formatMessage(e,t=!1){const i=this.statusEmojis[e.type]||"📝",r=t?`[${e.relativeTime.padStart(8)}s] `:"",s=`[${e.source.padEnd(13)}]`,c=`[${({log:"LOG",info:"INFO",success:"SUCCESS",warning:"WARNING",error:"ERROR",processing:"PROCESSING"}[e.type]||e.type.toUpperCase()).padEnd(13)}]`,h=e.message,f=e.error?` (ERROR: ${e.error})`:"";return`${i} ${r}${s} ${c} ${h}${f}`}addInitialSessionMessage(){this.notify("status:core",{message:"FunPlayerCore session started",type:"info"})}log(e,t={}){var r;const i=this.createMessage(e,t);return this._addMessage(i),this.enableConsoleLogging&&this._outputToConsole(i),(r=this.notify)==null||r.call(this,"logging:new-message",{messageObj:i}),i}getLogs(){return[...this.debugLogs]}getFormattedLogs(){return this.debugLogs.map(e=>this.formatMessage(e,!0)).join(`
`)}getFilteredLogs(e={}){return this.debugLogs.filter(t=>!(e.source&&t.source!==e.source||e.type&&t.type!==e.type||e.since&&new Date(t.timestamp)<e.since||e.until&&new Date(t.timestamp)>e.until))}clear(){this.debugLogs=[],this.sessionStart=performance.now(),this.addInitialSessionMessage(),this.notify("status:logging",{message:"Logs cleared",type:"info"})}generateExportContent(){const e=`FunPlayer Debug Log
Generated: ${new Date().toISOString()}
Total entries: ${this.debugLogs.length}
Session duration: ${((performance.now()-this.sessionStart)/1e3).toFixed(1)}s
Console logging: ${this.enableConsoleLogging?"enabled":"disabled"}

${"=".repeat(80)}

`,t=this.debugLogs.map(i=>this.formatMessage(i,!0)).join(`
`);return e+t}setConsoleLogging(e){var t;this.enableConsoleLogging=e,(t=this.notify)==null||t.call(this,"status:config",{message:`Console logging ${e?"enabled":"disabled"}`,type:"info"})}getConsoleLogging(){return this.enableConsoleLogging}setMaxLogs(e){var t;this.maxDebugLogs=Math.max(100,e),this._rotateLogsIfNeeded(),(t=this.notify)==null||t.call(this,"logging:config",{message:`Max logs set to ${this.maxDebugLogs}`,type:"info"})}getMaxLogs(){return this.maxDebugLogs}_addMessage(e){this.debugLogs.push(e),this._rotateLogsIfNeeded()}_rotateLogsIfNeeded(){this.debugLogs.length>this.maxDebugLogs&&(this.debugLogs=this.debugLogs.slice(-this.maxDebugLogs))}_extractSource(e){return e.split(":")[1]||e.split(":")[0]||"unknown"}_generateMessageId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}_outputToConsole(e){const t=this.formatMessage(e);switch(e.type){case"error":console.error(t,e.error||"");break;case"warning":console.warn(t);break;case"info":case"success":console.info(t);break;default:console.log(t)}}};ke(SE,"LoggingManager");let AP=SE;const c2=class{constructor(){ut(this,"notify",ke((e,t)=>{this.listeners.forEach(i=>{try{i(e,t)}catch(r){this.enableConsoleLogging&&console.error("Core: Listener error:",r)}})},"notify")),ut(this,"handleEvent",ke((e,t)=>{e.startsWith("status:")?this._handleStatusEvent(e,t):e.startsWith("buttplug:")?this._handleButtplugEvent(e,t):e.startsWith("channel:")?this._handleChannelEvent(e,t):e.startsWith("actuator:")?this._handleActuatorEvent(e,t):e.startsWith("funscript:")?this._handleFunscriptEvent(e,t):e.startsWith("playlist:")?this._handlePlaylistEvent(e,t):e.startsWith("media:")?this._handleMediaEvent(e,t):e.startsWith("core:")?this._handleCoreEvent(e,t):e.startsWith("logging:")?this._handleLoggingEvent(e,t):e.startsWith("component:")?this._handleComponentEvent(e,t):this.enableConsoleLogging&&console.warn(`FunPlayerCore: Unknown event type ${e}`)},"handleEvent")),ut(this,"_handleStatusEvent",ke((e,t)=>{const i=this.logging.log(e,t);switch(i.type){case"log":break;case"error":this.setError(i);break;case"success":case"info":case"processing":default:this.setStatus(i);break}},"_handleStatusEvent")),ut(this,"_handleCoreEvent",ke((e,t)=>{switch(e){case"core:autoConnect":t.success?this.setStatus({source:"core",message:`Auto-connected to ${t.device.name} (${t.mapResult.mapped}/${t.mapResult.total} channels mapped)`,type:"success"}):this.setError({source:"core",message:"Auto-connect failed",type:"error",error:t.error});break;case"core:autoMap":this.setStatus({source:"core",message:`Auto-mapped ${t.result.mapped} new channels`,type:"success"});break}},"_handleCoreEvent")),ut(this,"_handleButtplugEvent",ke((e,t)=>{switch(e){case"buttplug:connection":this.setStatus({source:"buttplug",message:t.connected?"Connected to Intiface":"Disconnected from Intiface",type:t.connected?"success":"info"});break;case"buttplug:device":this.setStatus({source:"buttplug",message:t.device?`Device selected: ${t.device.name}`:"No device selected",type:t.device?"success":"info"}),t.device&&setTimeout(()=>{this.autoMapChannels()},100);break;case"buttplug:error":this.setError({source:"buttplug",message:"Device error",type:"error",error:t.error});break}},"_handleButtplugEvent")),ut(this,"_handleFunscriptEvent",ke((e,t)=>{switch(e){case"funscript:load":setTimeout(()=>{this.autoMapChannels()},100);break}},"_handleFunscriptEvent")),ut(this,"_handlePlaylistEvent",ke((e,t)=>{var i;switch(e){case"playlist:loaded":if(this.isReady=!1,t.items&&t.items.length>0){const r=t.items[0];(i=this.notify)==null||i.call(this,"status:core",{message:`Preloading funscript for first item: ${r.name||"Untitled"}`,type:"log"}),this.funscript.loadFromPlaylistItem(r).then(()=>{var s;(s=this.notify)==null||s.call(this,"status:core",{message:`First item ready: ${r.name||"Untitled"}`,type:"success"}),this.setReady(!0)}).catch(s=>{var o;(o=this.notify)==null||o.call(this,"status:core",{message:"Failed to preload funscript for first item",type:"error",error:s.message}),this.setReady(!0)})}else this.setReady(!0);break;case"playlist:itemChanged":this.isReady=!1,this.buttplug.stopAll().catch(r=>console.warn("Failed to stop devices:",r)),t.item?this.funscript.loadFromPlaylistItem(t.item).then(()=>{this.setReady(!0)}).catch(r=>{console.error("Failed to load funscript for item:",r),this.setReady(!0)}):this.setReady(!0);break}},"_handlePlaylistEvent")),ut(this,"_handleActuatorEvent",ke((e,t)=>{},"_handleActuatorEvent")),ut(this,"_handleChannelEvent",ke((e,t)=>{},"_handleChannelEvent")),ut(this,"_handleLoggingEvent",ke((e,t)=>{},"_handleLoggingEvent")),ut(this,"_handleMediaEvent",ke((e,t)=>{},"_handleMediaEvent")),ut(this,"_handleComponentEvent",ke((e,t)=>{},"_handleComponentEvent")),ut(this,"setStatus",ke(e=>{const t=`[${e.source.charAt(0).toUpperCase()+e.source.slice(1)}] ${e.message}`;this.status=t,this.error=null,this.notify("core:status",{status:t,error:null,messageObj:e})},"setStatus")),ut(this,"setError",ke(e=>{const t=`[${e.source.charAt(0).toUpperCase()+e.source.slice(1)}] ${e.message}`;this.error=t,this.status="error",this.isReady=!1,e.error&&console.error(`FunPlayer Core Error: ${t}`,e.error),this.notify("core:status",{status:"error",error:t,messageObj:e})},"setError")),ut(this,"setReady",ke(e=>{this.isReady=e,this.notify("core:ready",{isReady:e})},"setReady")),this.enableConsoleLogging=!1,this.debugLogs=[],this.maxDebugLogs=1e3,this.sessionStart=performance.now(),this._buttplug=null,this._funscript=null,this._playlist=null,this._logging=null,this.status="idle",this.error=null,this.isReady=!1,this.listeners=new Set,this.addListener(this.handleEvent),this.logging.addInitialSessionMessage()}addListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}get buttplug(){return this._buttplug||(this._buttplug=new CP(this.notify)),this._buttplug}get funscript(){return this._funscript||(this._funscript=new wP(this.notify)),this._funscript}get playlist(){return this._playlist||(this._playlist=new EP(this.notify)),this._playlist}get logging(){return this._logging||(this._logging=new AP(this.notify)),this._logging}plugChannel(e,t){const i=this.funscript.getChannel(e),r=this.buttplug.getActuator(t);return!i||!r?!1:i.plug(r)}unplugChannel(e,t){const i=this.funscript.getChannel(e),r=this.buttplug.getActuator(t);return!i||!r?!1:(i.unplug(r),!0)}unplugAllChannels(){this.funscript.getChannels().forEach(e=>{e.unplugAll()})}async autoConnect(e=3e3){try{if(!await this.buttplug.connect())throw new Error("Failed to connect to Intiface Central");const i=this.buttplug.getDevices().filter(o=>o.index>=0);if(i.length===0)throw new Error("No physical device found");if(!this.buttplug.selectDevice(i[0].index))throw new Error("Failed to select device");const s=this.autoMapChannels();return this.notify("core:autoConnect",{success:!0,device:i[0],mapResult:s,deviceInfo:this.buttplug.getDeviceInfo()}),this.notify("status:core",{message:`AutoConnect successful: ${i[0].name}`,type:"success"}),{success:!0,device:i[0],mapResult:s}}catch(t){return this.notify("core:autoConnect",{success:!1,error:t.message}),this.notify("status:core",{message:"AutoConnect failed",type:"error",error:t.message}),{success:!1,error:t.message}}}async processHapticFrame(e,t={}){if(this.funscript.getChannels().length===0)return new Map;const r=this.buttplug.getTimeWithOffsets(e),s=Object.fromEntries(r.entries()),o=this.funscript.interpolateAll(s);return await this.buttplug.processChannels(o)}autoMapChannels(){const e=this.buttplug.getActuators(),t=this.funscript.getChannels();if(e.length===0)return this.notify("status:core",{message:"No actuators available for auto-mapping",type:"info"}),{mapped:0,total:0,skippedIncompatible:0,strategy:"no_actuators"};if(t.length===0)return this.notify("status:core",{message:"No channels available for auto-mapping",type:"info"}),{mapped:0,total:e.length,skippedIncompatible:0,strategy:"no_channels"};this.notify("status:core",{message:`🎯 Starting intelligent autoMap: ${e.length} actuators → ${t.length} channels`,type:"processing"}),this._savePreviousMappings(e);const i={mappedActuators:new Set,assignedChannels:new Map,unmappedChannels:new Set(t.map(s=>s.name)),statistics:{priorityByName:0,priorityByCapability:0,priorityByType:0,fallbackMultiAssignment:0,incompatible:0}};this._phase1PriorityMapping(e,t,i),this._phase2FallbackMapping(e,t,i);const r=this._buildAutoMapResult(i,e.length);return this.notify("core:autoMap",{result:r,deviceInfo:this.buttplug.getDeviceInfo(),strategy:"intelligent_persistent"}),r}_savePreviousMappings(e){let t=0;for(const i of e)if(i.isPlugged()){const r=i.getAssignedChannelName();this.notify("status:core",{message:`💾 Saving mapping: Actuator ${i.index} was connected to "${r}"`,type:"log"}),t++}t>0&&this.notify("status:core",{message:`💾 Saved ${t} previous mappings for intelligent autoMap`,type:"info"})}_phase1PriorityMapping(e,t,i){this.notify("status:core",{message:"🎯 Phase 1: Priority mapping (name → capability → type)",type:"log"});for(const r of e){if(!r.settings.enabled){this.notify("status:core",{message:`⏭️ Skipping disabled actuator ${r.index}`,type:"log"});continue}this._tryMapByPreviousName(r,t,i)||this._tryMapByCapability(r,t,i,!1)||this._tryMapByType(r,t,i,!1)}}_phase2FallbackMapping(e,t,i){this.notify("status:core",{message:"🎯 Phase 2: Fallback multi-assignment on already mapped channels",type:"log"});for(const r of e)!r.settings.enabled||i.mappedActuators.has(r.index)||this._tryMapByCapability(r,t,i,!0)||this._tryMapByType(r,t,i,!0)||(i.statistics.incompatible++,this.notify("status:core",{message:`❌ No mapping found for actuator ${r.index} (${r.capability}/${r.type})`,type:"warning"}))}_tryMapByPreviousName(e,t,i){const r=e.getPreviousMappedChannelName();if(!r)return!1;const s=t.find(u=>u.name===r);return s?e.canPlugTo(s)?s.plug(e)?(this._recordSuccessfulMapping(e,s,i,"previous_name"),i.statistics.priorityByName++,this.notify("status:core",{message:`✅ [PRIORITY NAME] Actuator ${e.index} → "${s.name}" (restored previous mapping)`,type:"success"}),!0):!1:(this.notify("status:core",{message:`🔍 Previous channel "${r}" incompatible with actuator ${e.index} (${e.type} vs ${s.type})`,type:"log"}),!1):(this.notify("status:core",{message:`🔍 Previous channel "${r}" not found in new funscript for actuator ${e.index}`,type:"log"}),!1)}_tryMapByCapability(e,t,i,r){const s=t.filter(c=>{if(!e.canPlugTo(c)||c.likelyCapability!==e.capability)return!1;const h=i.assignedChannels.has(c.name);return r||!h});if(s.length===0)return!1;const o=s[0];if(o.plug(e)){const c=r?"MULTI-CAPABILITY":"CAPABILITY";return this._recordSuccessfulMapping(e,o,i,"capability"),r?i.statistics.fallbackMultiAssignment++:i.statistics.priorityByCapability++,this.notify("status:core",{message:`✅ [${c}] Actuator ${e.index} → "${o.name}" (${e.capability} match)`,type:"success"}),!0}return!1}_tryMapByType(e,t,i,r){const s=t.filter(c=>{if(!e.canPlugTo(c))return!1;const h=i.assignedChannels.has(c.name);return r||!h});if(s.length===0)return!1;const o=s[0];if(o.plug(e)){const c=r?"MULTI-TYPE":"TYPE";return this._recordSuccessfulMapping(e,o,i,"type"),r?i.statistics.fallbackMultiAssignment++:i.statistics.priorityByType++,this.notify("status:core",{message:`✅ [${c}] Actuator ${e.index} → "${o.name}" (${e.type} type match)`,type:"success"}),!0}return!1}_recordSuccessfulMapping(e,t,i,r){i.mappedActuators.add(e.index),i.assignedChannels.has(t.name)||(i.assignedChannels.set(t.name,[]),i.unmappedChannels.delete(t.name)),i.assignedChannels.get(t.name).push({actuatorIndex:e.index,reason:r})}_buildAutoMapResult(e,t){const i=e.mappedActuators.size,r=Array.from(e.assignedChannels.entries()).filter(([o,u])=>u.length>1).length;this.notify("status:core",{message:`🎯 AutoMap completed: ${i}/${t} actuators mapped`+(r>0?`, ${r} channels multi-assigned`:""),type:i>0?"success":"warning"});const s=e.statistics;return s.priorityByName>0&&this.notify("status:core",{message:`📊 Priority mappings: ${s.priorityByName} by name, ${s.priorityByCapability} by capability, ${s.priorityByType} by type`,type:"log"}),s.fallbackMultiAssignment>0&&this.notify("status:core",{message:`📊 Fallback multi-assignments: ${s.fallbackMultiAssignment}`,type:"log"}),s.incompatible>0&&this.notify("status:core",{message:`📊 Incompatible actuators: ${s.incompatible}`,type:"log"}),{mapped:i,total:t,skippedIncompatible:s.incompatible,strategy:"intelligent_persistent",statistics:{...s,multiAssignedChannels:r,unmappedChannels:e.unmappedChannels.size},details:{assignedChannels:Object.fromEntries(e.assignedChannels.entries()),unmappedChannels:Array.from(e.unmappedChannels)}}}clearAllPreviousMappings(){const e=this.buttplug.getActuators();let t=0;for(const i of e)i.hasPreviousMapping()&&(i.forgetPreviousMapping(),t++);return this.notify("status:core",{message:`🧹 Cleared ${t} previous mappings`,type:"info"}),{cleared:t,total:e.length}}getPreviousMappingsDiagnostic(){const e=this.buttplug.getActuators(),t=this.funscript.getChannelNames(),i=e.map(s=>{const o=s.getPreviousMappedChannelName(),u=s.getAssignedChannelName(),c=o?t.includes(o):!1,h=c?s.canPlugTo(this.funscript.getChannel(o)):!1;return{actuatorIndex:s.index,capability:s.capability,type:s.type,currentChannel:u,previousChannel:o,isAvailable:c,isCompatible:h,canRestore:c&&h}}),r={total:e.length,withPreviousMapping:i.filter(s=>s.previousChannel).length,canRestore:i.filter(s=>s.canRestore).length,lost:i.filter(s=>s.previousChannel&&!s.isAvailable).length,incompatible:i.filter(s=>s.previousChannel&&s.isAvailable&&!s.isCompatible).length};return{diagnostics:i,stats:r}}getCompatibilityDiagnostic(){const e=this.funscript.getChannels(),t=this.buttplug.getActuators();if(e.length===0)return{channels:[],actuators:[],issues:["No funscript loaded"]};const i=e.map(c=>{const h=t.filter(f=>c.canPlugTo(f)).map(f=>f.index);return{channel:c.name,type:c.type,valueRange:c.valueRange,compatibleActuators:h,isOrphaned:h.length===0,connectedActuators:Array.from(c.connectedActuators.keys())}}),r=t.map(c=>{const h=e.filter(f=>f.canPlugTo(c)).map(f=>f.name);return{index:c.index,type:c.type,capability:c.capability,compatibleChannels:h,isUnused:h.length===0,assignedChannel:c.getAssignedChannelName()}}),s=[],o=i.filter(c=>c.isOrphaned),u=r.filter(c=>c.isUnused);return o.length>0&&s.push(`${o.length} channel(s) have no compatible actuators`),u.length>0&&s.push(`${u.length} actuator(s) have no compatible channels`),{channels:i,actuators:r,issues:s}}getStatus(){var e;return{status:this.status,error:this.error,isReady:this.isReady,buttplug:this.buttplug.getStatus(),funscript:((e=this.funscript)==null?void 0:e.getDebugInfo())||{loaded:!1},playlist:this.playlist.getStats()}}async cleanup(){this._buttplug&&(await this._buttplug.cleanup(),this._buttplug=null),this._playlist&&(this._playlist.cleanup(),this._playlist=null),this._funscript&&(this._funscript.reset(),this._funscript=null),this.status="idle",this.error=null,this.isReady=!1,this.listeners.clear(),this.logging.enableConsoleLogging&&console.log("Core: Cleanup complete"),this._logging&&(this._logging.cleanup(),this._logging=null)}};ke(c2,"FunPlayerCore");ut(c2,"instance",null);let DP=c2;var IP=Object.defineProperty,kP=ke((n,e,t)=>e in n?IP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$7"),wd=ke((n,e,t)=>kP(n,typeof e!="symbol"?e+"":e,t),"__publicField$7");const TE=class extends as.Component{constructor(e){super(e),wd(this,"handleEvent",(t,i)=>{["playlist:loaded","playlist:itemChanged"].includes(t)&&(this._triggerRender(),this.core.notify("component:resize",{source:"PlaylistComponent",reason:t==="playlist:loaded"?"playlist-loaded":"item-changed"}))}),wd(this,"_triggerRender",()=>{this.setState(t=>({renderTrigger:t.renderTrigger+1}))}),wd(this,"handleItemClick",t=>{this.core.playlist.goTo(t)||console.error("PlaylistComponent: Failed to go to item",t)}),wd(this,"getItemTitle",(t,i)=>{if(t.name)return t.name;if(t.title)return t.title;if(t.sources&&t.sources.length>0){const r=t.sources[0];if(r.src.startsWith("data:")){const o=r.src.match(/data:([^;]+)/);return`Uploaded ${(o?o[1]:"unknown").split("/")[0]}`}return r.src.split("/").pop().split(".")[0]||`Item ${i+1}`}return t.funscript&&typeof t.funscript=="string"?t.funscript.startsWith("data:")?"Uploaded funscript":t.funscript.split("/").pop().split(".")[0]||`Haptic ${i+1}`:`Item ${i+1}`}),wd(this,"getItemInfo",t=>{const i=[];switch(t.item_type){case"video":i.push("VIDEO");break;case"video_haptic":i.push("VIDEO");break;case"audio":i.push("AUDIO");break;case"audio_haptic":i.push("AUDIO");break;case"haptic":i.push("HAPTIC");break}if(t.duration){const r=Math.floor(t.duration/60),s=Math.floor(t.duration%60);i.push(`${r}:${s.toString().padStart(2,"0")}`)}return["video_haptic","audio_haptic","haptic"].includes(t.item_type)&&i.push("🎮"),i.join(" • ")}),this.core=e.core,this.state={renderTrigger:0},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentDidUpdate(e){if(e.visible!==this.props.visible){const t=this.props.visible?"shown":"hidden";this.core.notify("component:resize",{source:"PlaylistComponent",reason:`visibility-${t}`})}}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){const{visible:e=!0}=this.props;if(!e)return null;const t=this.core.playlist.items,i=this.core.playlist.getCurrentIndex();return t.length<=1?null:ne.jsxs("div",{className:"fp-playlist",children:[ne.jsx("div",{className:"fp-playlist-header",children:ne.jsxs("span",{className:"fp-playlist-title",children:["Playlist (",t.length,")"]})}),ne.jsx("div",{className:"fp-playlist-items",children:t.map((r,s)=>ne.jsxs("div",{className:`fp-playlist-item ${s===i?"fp-playlist-item-active":""}`,onClick:ke(()=>this.handleItemClick(s),"onClick"),title:r.description||this.getItemTitle(r,s),children:[ne.jsx("div",{className:"fp-playlist-item-thumbnail",children:ne.jsx("img",{className:"fp-playlist-item-image",src:r.poster,alt:this.getItemTitle(r,s),onError:ke(o=>{o.target.style.display="none",o.target.parentElement.innerHTML="📄"},"onError")})}),ne.jsxs("div",{className:"fp-playlist-item-content",children:[ne.jsx("div",{className:"fp-playlist-item-title",children:this.getItemTitle(r,s)}),ne.jsx("div",{className:"fp-playlist-item-info",children:this.getItemInfo(r)})]})]},s))})]})}};ke(TE,"PlaylistComponent");let MP=TE;const xi=ke(({name:n,size:e=16,color:t=null,strokeWidth:i=2,className:r="",style:s={},...o})=>{const u=uE.icons[n];if(!u)return null;const c={width:`var(--icon-size, ${e}px)`,height:`var(--icon-size, ${e}px)`,"stroke-width":`var(--icon-stroke-width, ${i})`,stroke:t||"var(--icon-color, currentColor)",class:r},h=u.toSvg(c),f={display:"inline-flex",alignItems:"center",justifyContent:"center",lineHeight:1,verticalAlign:"middle",transform:"translateY(1px)",...s};return ne.jsx("span",{style:f,dangerouslySetInnerHTML:{__html:h},...o})},"FeatherIcon");var PP=Object.defineProperty,OP=ke((n,e,t)=>e in n?PP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$6"),Ru=ke((n,e,t)=>OP(n,typeof e!="symbol"?e+"":e,t),"__publicField$6");const CE=class extends as.Component{constructor(e){super(e),Ru(this,"handleEvent",(t,i)=>{["buttplug:connection","buttplug:scan","buttplug:device","funscript:load","funscript:channels"].includes(t)&&(this._triggerRender(),t==="buttplug:connection"&&this.setState({isAutoConnecting:!1}),t==="buttplug:scan"&&this.setState({isRescanActive:!1}))}),Ru(this,"_triggerRender",()=>{this.setState(t=>({renderTrigger:t.renderTrigger+1}))}),Ru(this,"handleAutoConnect",async()=>{if(!this.state.isAutoConnecting){this.setState({isAutoConnecting:!0});try{await this.core.buttplug.connect()&&await this.core.buttplug.scan()}catch(t){console.error("Auto-connect failed:",t)}}}),Ru(this,"handleDisconnect",async()=>{try{await this.core.buttplug.disconnect()}catch(t){console.error("Disconnect failed:",t)}}),Ru(this,"handleRescan",async()=>{if(!this.state.isRescanActive){this.setState({isRescanActive:!0});try{await this.core.buttplug.scan()}catch(t){console.error("Rescan failed:",t)}}}),Ru(this,"handleDeviceChange",t=>{try{const i=t==="-1"?-1:parseInt(t);this.core.buttplug.selectDevice(i)}catch(i){console.error("Device selection failed:",i)}}),this.core=e.core,this.state={isAutoConnecting:!1,isRescanActive:!1,renderTrigger:0},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){const{onToggleSettings:e,isSettingsExpanded:t}=this.props,{isAutoConnecting:i,isRescanActive:r}=this.state,s=this.core.buttplug.getStatus(),o=this.core.funscript.getChannelNames(),u=this.core.buttplug.getDevices(),c=this.core.buttplug.getSelected(),h=(s==null?void 0:s.isConnected)||!1;return ne.jsxs("div",{className:"fp-buttplug-settings",children:[ne.jsxs("div",{className:"fp-buttplug-settings-status",children:[ne.jsx(xi,{name:h?"wifi":"wifi-off",size:18,className:"fp-buttplug-settings-connection-icon"}),ne.jsx("span",{className:"fp-buttplug-settings-device-name",children:(c==null?void 0:c.name)||"Unknown device"}),o.length===0&&ne.jsx("span",{className:"fp-buttplug-settings-no-haptic-hint",children:"No haptic"})]}),ne.jsxs("div",{className:"fp-buttplug-settings-actions",children:[h?ne.jsxs(ne.Fragment,{children:[ne.jsxs("button",{className:"fp-buttplug-settings-disconnect-btn",onClick:this.handleDisconnect,children:[ne.jsx(xi,{name:"zap-off",size:14,className:"fp-icon-button",style:{marginRight:"4px"}}),"Disconnect"]}),ne.jsx("button",{className:"fp-buttplug-settings-rescan-btn",onClick:this.handleRescan,disabled:r,title:"Scan for new devices",children:ne.jsx(xi,{name:r?"loader":"search",size:14,className:"fp-icon-button"})})]}):ne.jsxs("button",{className:"fp-buttplug-settings-connect-btn",onClick:this.handleAutoConnect,disabled:i||o.length===0,title:o.length===0?"Load funscript first":"Connect to Intiface Central",children:[ne.jsx(xi,{name:i?"loader":"zap",size:14,className:"fp-icon-button",style:{marginRight:"4px"}}),i?"Connecting...":"Connect"]}),ne.jsx("select",{className:"fp-buttplug-settings-device-select",value:(c==null?void 0:c.index)??-1,onChange:ke(f=>this.handleDeviceChange(f.target.value),"onChange"),disabled:o.length===0,title:o.length===0?"Load funscript first":"Select haptic device",children:u.map(f=>ne.jsxs("option",{value:f.index,children:[f.name," ",f.index===-1?"(Virtual)":""]},f.index))}),ne.jsx("button",{className:"fp-buttplug-settings-toggle",onClick:e,title:t?"Hide haptic settings":"Show haptic settings",children:ne.jsx(xi,{name:t?"chevron-up":"chevron-down",size:20,className:"fp-icon-button",style:{marginLeft:"6px",marginRight:"6px"}})})]})]})}};ke(CE,"ButtPlugSettingsComponent");let RP=CE;var LP=Object.defineProperty,NP=ke((n,e,t)=>e in n?LP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$5"),Lu=ke((n,e,t)=>NP(n,typeof e!="symbol"?e+"":e,t),"__publicField$5");const wE=class extends as.Component{constructor(e){super(e),Lu(this,"handleEvent",(t,i)=>{const{actuator:r}=this.props;if(!r)return;if(t==="actuator:settingsChanged"||t==="actuator:settingsReset"||t==="actuator:plugged"||t==="actuator:unplugged"){i.actuatorIndex===r.index&&this._triggerRender();return}if(t==="channel:plugged"||t==="channel:unplugged"){i.actuatorIndex===r.index&&this._triggerRender();return}["funscript:load","funscript:channels","buttplug:device"].includes(t)&&this._triggerRender()}),Lu(this,"_triggerRender",()=>{this.setState(t=>({renderTrigger:t.renderTrigger+1}))}),Lu(this,"handleToggleExpanded",()=>{this.setState({isExpanded:!this.state.isExpanded},()=>{var t;this.core.notify("component:resize",{source:"ActuatorSettingsComponent",reason:`actuator-${(t=this.props.actuator)==null?void 0:t.index}-${this.state.isExpanded?"expanded":"collapsed"}`})})}),Lu(this,"handleGlobalScaleChange",t=>{this.core.buttplug.setGlobalScale(t)}),Lu(this,"handleActuatorSettingChange",(t,i)=>{const{actuator:r}=this.props;r&&r.updateSettings({[t]:i})}),Lu(this,"handleChannelMapping",t=>{const{actuator:i}=this.props;if(i)if(t===""||t===null)i.unplug();else{const r=this.core.funscript.getChannel(t);r&&r.plug(i)}}),this.core=e.core,this.state={isExpanded:!1,renderTrigger:0},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){return ne.jsxs("div",{className:"fp-actuator-settings",children:[this.renderCompactLine(),this.renderExpandedSettings()]})}renderCompactLine(){const{actuator:e}=this.props,{isExpanded:t}=this.state;if(!e)return ne.jsx("div",{className:"fp-actuator-settings-error",children:"No actuator provided"});const i=this.core.funscript.getChannels(),r=i.filter(u=>u.canPlugTo(e)),s=e.assignedChannel;let o=null;if(e.settings.enabled){if(i.length===0)o="Load funscript first";else if(r.length===0){const u=e.capability==="rotate",c=i.some(h=>h.type==="polar");c&&!u?o="Funscript has bipolar channels (needs rotate actuator)":!c&&u?o="Funscript has only unipolar channels (rotate not needed)":o="No compatible channels in current funscript"}}return ne.jsxs("div",{className:"fp-actuator-settings-header",children:[ne.jsxs("span",{className:`fp-actuator-settings-badge ${e.settings.enabled?"":"fp-actuator-settings-badge-disabled"}`,children:["#",e.index," (",e.capability,")",!e.settings.enabled&&ne.jsx("span",{className:"fp-actuator-settings-warning",title:o,children:"⚠️"})]}),ne.jsx("label",{className:"fp-actuator-settings-enable-toggle",children:ne.jsx("input",{className:"fp-actuator-settings-enable-checkbox",type:"checkbox",checked:e.settings.enabled,onChange:ke(u=>this.handleActuatorSettingChange("enabled",u.target.checked),"onChange"),title:e.settings.enabled?"Enable/disable this actuator":o})}),ne.jsxs("select",{className:"fp-actuator-settings-channel-select",value:(s==null?void 0:s.name)||"",onChange:ke(u=>this.handleChannelMapping(u.target.value),"onChange"),disabled:!e.settings.enabled,title:e.settings.enabled?"Assign compatible channel to this actuator":o,children:[ne.jsx("option",{value:"",children:"None"}),r.map(u=>{const c=u.type==="polar"?" (±)":"";return ne.jsxs("option",{value:u.name,children:[u.name,c]},u.name)})]}),ne.jsx("button",{className:"fp-actuator-settings-expand-toggle",onClick:this.handleToggleExpanded,children:ne.jsx(xi,{name:t?"chevron-up":"chevron-down",size:18,className:"fp-icon-button"})})]})}renderExpandedSettings(){if(!this.state.isExpanded)return null;const{actuator:e}=this.props;if(!e)return null;const t=this.core.funscript.getChannels(),i=t.filter(r=>r.canPlugTo(e));return ne.jsxs("div",{className:"fp-actuator-settings-expanded",children:[!e.settings.enabled&&t.length===0&&ne.jsx("div",{className:"fp-actuator-settings-warning-message",children:"📄 Load a funscript first"}),e.settings.enabled&&i.length>0&&ne.jsxs("div",{className:"fp-actuator-settings-compatibility-info",children:["Compatible with ",i.length," channel(s): ",i.map(r=>r.name).join(", ")]}),ne.jsxs("div",{className:"fp-actuator-settings-controls",children:[ne.jsxs("div",{className:"fp-actuator-settings-scale-control",children:[ne.jsxs("label",{className:"fp-actuator-settings-scale-label",children:["Scale: ",((e.settings.scale||1)*100).toFixed(0),"%"]}),ne.jsx("input",{className:"fp-actuator-settings-scale-range",type:"range",min:"0",max:"2",step:"0.01",value:e.settings.scale||1,onChange:ke(r=>this.handleActuatorSettingChange("scale",parseFloat(r.target.value)),"onChange"),disabled:!e.settings.enabled})]}),ne.jsxs("div",{className:"fp-actuator-settings-offset-control",children:[ne.jsxs("label",{className:"fp-actuator-settings-offset-label",children:["Time Offset: ",((e.settings.timeOffset||0)*1e3).toFixed(0),"ms"]}),ne.jsx("input",{className:"fp-actuator-settings-offset-range",type:"range",min:"-0.5",max:"0.5",step:"0.001",value:e.settings.timeOffset||0,onChange:ke(r=>this.handleActuatorSettingChange("timeOffset",parseFloat(r.target.value)),"onChange"),disabled:!e.settings.enabled})]})]}),ne.jsxs("label",{className:"fp-actuator-settings-invert-toggle",children:[ne.jsx("input",{className:"fp-actuator-settings-invert-checkbox",type:"checkbox",checked:e.settings.invert||!1,onChange:ke(r=>this.handleActuatorSettingChange("invert",r.target.checked),"onChange"),disabled:!e.settings.enabled}),ne.jsx("span",{className:"fp-actuator-settings-invert-label",children:"Invert Values"})]})]})}};ke(wE,"ActuatorSettingsComponent");let FP=wE;var BP=Object.defineProperty,jP=ke((n,e,t)=>e in n?BP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$4"),As=ke((n,e,t)=>jP(n,typeof e!="symbol"?e+"":e,t),"__publicField$4");const EE=class extends as.Component{constructor(e){super(e),As(this,"handleEvent",(t,i)=>{["funscript:load","funscript:reset"].includes(t)&&(t==="funscript:load"&&this.setState({pendingConfig:{}}),t==="funscript:reset"&&this.setState({isExpanded:!1}),this._triggerRender())}),As(this,"_triggerRender",()=>{this.setState(t=>({renderTrigger:t.renderTrigger+1}))}),As(this,"handleToggleExpanded",()=>{this.setState({isExpanded:!this.state.isExpanded},()=>{this.core.notify("component:resize",{source:"ChannelSettingsComponent",reason:`config-${this.state.isExpanded?"expanded":"collapsed"}`})})}),As(this,"handleFieldChange",(t,i,r)=>{this.setState(s=>({pendingConfig:{...s.pendingConfig,[t]:{...s.pendingConfig[t],[i]:r==="none"?null:r}}}))}),As(this,"handleValidate",()=>{try{const t=this.core.funscript.data;t&&(this.core.funscript.loadWithCustomFieldConfig(t,pendingConfig),this.setState({pendingConfig:{},isExpanded:!1}))}catch(t){console.error("Failed to apply channel configuration:",t)}}),As(this,"getCurrentConfig",(t,i)=>{const{pendingConfig:r}=this.state,s=this.core.funscript.getChannel(t);return r[t]&&r[t][i]!==void 0?r[t][i]||"none":s&&s.fieldConfig?s.fieldConfig[i]||"none":{timeField:"at",valueField:"pos",directionField:"none",durationField:"none"}[i]||"none"}),As(this,"getAvailableFields",(t,i)=>{const s={timeField:"availableTimeFields",valueField:"availableValueFields",directionField:"availableDirectionFields",durationField:"availableDurationFields"}[i];return t[s]||[]}),As(this,"hasPendingChanges",()=>Object.keys(this.state.pendingConfig).length>0),As(this,"renderExpandedSettings",()=>{if(!this.state.isExpanded)return null;const t=this.core.funscript.getDetectedFields(),i=Object.keys(t);return i.length===0?ne.jsx("div",{className:"fp-channel-settings-empty",children:"No channels detected. Load a funscript first."}):ne.jsxs("div",{className:"fp-channel-settings-expanded",children:[i.map(r=>this.renderChannelConfig(r,t[r])),ne.jsxs("div",{className:"fp-channel-settings-actions",children:[ne.jsx("button",{className:"fp-channel-settings-validate-btn",onClick:this.handleValidate,disabled:!this.hasPendingChanges(),children:"✓ Validate Changes"}),this.hasPendingChanges()&&ne.jsx("button",{className:"fp-channel-settings-cancel-btn",onClick:ke(()=>this.setState({pendingConfig:{}}),"onClick"),children:"Cancel"})]})]})}),As(this,"renderChannelConfig",(t,i)=>{const r=[{key:"timeField",label:"Time"},{key:"valueField",label:"Value"},{key:"directionField",label:"Direction"},{key:"durationField",label:"Duration"}];return ne.jsxs("div",{className:"fp-channel-settings-channel",children:[ne.jsx("span",{className:"fp-channel-settings-channel-name",children:t}),r.map(({key:s,label:o})=>{const u=this.getAvailableFields(i,s),c=this.getCurrentConfig(t,s);return ne.jsxs("div",{className:"fp-channel-settings-field",children:[ne.jsxs("label",{className:"fp-channel-settings-field-label",children:[o,":"]}),ne.jsxs("select",{className:"fp-channel-settings-field-select",value:c,onChange:ke(h=>this.handleFieldChange(t,s,h.target.value),"onChange"),children:[ne.jsx("option",{value:"none",children:"none"}),u.map(h=>ne.jsx("option",{value:h,children:h},h))]})]},s)})]})}),this.core=e.core,this.state={isExpanded:!1,renderTrigger:0,pendingConfig:{}},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){const{isExpanded:e}=this.state;if(!this.core.funscript.hasFunscript())return null;const t=this.core.funscript.getDetectedFields(),i=Object.keys(t).length;return ne.jsxs("div",{className:"fp-channel-settings",children:[ne.jsxs("div",{className:"fp-channel-settings-header",children:[ne.jsxs("span",{className:"fp-channel-settings-title",children:["Configure Action Channels (",i,")"]}),ne.jsx("button",{className:"fp-channel-settings-toggle",onClick:this.handleToggleExpanded,children:ne.jsx(xi,{name:e?"chevron-up":"chevron-down",size:18,className:"fp-icon-button"})})]}),this.renderExpandedSettings()]})}};ke(EE,"ChannelSettingsComponent");let UP=EE;var $P=Object.defineProperty,zP=ke((n,e,t)=>e in n?$P(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$3"),fo=ke((n,e,t)=>zP(n,typeof e!="symbol"?e+"":e,t),"__publicField$3");const AE=class extends as.Component{constructor(e){super(e),fo(this,"handleEvent",(t,i)=>{const r=["buttplug:device","funscript:load","funscript:channels","buttplug:connection"],s=["buttplug:globalScale","buttplug:globalOffset","core:autoConnect","core:autoMap"];(r.includes(t)||s.includes(t))&&this._triggerRender()}),fo(this,"_triggerRender",()=>{this.setState(t=>({renderTrigger:t.renderTrigger+1}))}),fo(this,"handleToggleExpanded",()=>{this.setState({isExpanded:!this.state.isExpanded},()=>{this.core.notify("component:resize",{source:"HapticSettingsComponent",reason:`main-settings-${this.state.isExpanded?"expanded":"collapsed"}`})})}),fo(this,"handleAutoMap",()=>{this.core.autoMapChannels()}),fo(this,"handleUpdateRateChange",t=>{var i,r;(r=(i=this.props).onUpdateRateChange)==null||r.call(i,t)}),fo(this,"handleGlobalScaleChange",t=>{this.core.buttplug.setGlobalScale(t)}),fo(this,"handleGlobalOffsetChange",t=>{this.core.buttplug.setGlobalOffset(t)}),fo(this,"handleIntifaceUrlChange",t=>{this.core.buttplug.setIntifaceUrl(t)}),this.core=e.core,this.state={isExpanded:!1,renderTrigger:0},this.coreListener=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent)}componentWillUnmount(){this.coreListener&&(this.coreListener(),this.coreListener=null)}render(){const{isExpanded:e}=this.state;return ne.jsxs("div",{className:"fp-haptic-settings",children:[ne.jsx(RP,{core:this.core,onToggleSettings:this.handleToggleExpanded,isSettingsExpanded:e}),this.renderExpandedSettings()]})}renderExpandedSettings(){var c,h,f;if(!this.state.isExpanded)return null;const e=this.core.funscript.getChannelNames(),t=this.core.buttplug.getActuators(),i=((h=(c=this.props).onGetUpdateRate)==null?void 0:h.call(c))||60,r=this.core.buttplug.getGlobalOffset(),s=this.core.buttplug.getGlobalScale(),o=this.core.buttplug.getIntifaceUrl(),u=((f=this.core.buttplug.getStatus())==null?void 0:f.isConnected)||!1;return ne.jsxs("div",{className:"fp-haptic-settings-expanded",children:[ne.jsxs("div",{className:"fp-haptic-settings-connection-section",children:[ne.jsxs("h6",{className:"fp-haptic-settings-section-title",children:[ne.jsx(xi,{name:"bluetooth",size:18,className:"fp-haptic-settings-section-header-icon"}),"Connection"]}),ne.jsxs("div",{className:"fp-haptic-settings-connection-controls",children:[ne.jsxs("div",{className:"fp-haptic-settings-url-control",children:[ne.jsx("label",{className:"fp-haptic-settings-url-label",children:"Intiface WebSocket URL"}),ne.jsxs("div",{className:"fp-haptic-settings-url-input-group",children:[ne.jsx("input",{className:"fp-haptic-settings-url-input",type:"text",value:o,onChange:ke(m=>this.handleIntifaceUrlChange(m.target.value),"onChange"),placeholder:"ws://localhost:12345",title:"WebSocket URL for Intiface Central connection"}),ne.jsx("button",{className:"fp-haptic-settings-url-reset-btn",onClick:ke(()=>this.handleIntifaceUrlChange("ws://localhost:12345"),"onClick"),title:"Reset to default",children:ne.jsx(xi,{name:"rotate-ccw",size:14,className:"fp-icon-button"})})]}),ne.jsxs("span",{className:"fp-haptic-settings-url-status",children:[ne.jsx(xi,{name:u?"check-circle":"alert-triangle",size:14,className:"fp-icon",style:{marginRight:"6px"}}),u?`Connected to ${o}`:"Not connected"]})]}),ne.jsxs("div",{className:"fp-haptic-settings-rate-control",children:[ne.jsx("label",{className:"fp-haptic-settings-rate-label",children:"Update Rate"}),ne.jsxs("select",{className:"fp-haptic-settings-rate-select",value:i,onChange:ke(m=>this.handleUpdateRateChange(parseInt(m.target.value)),"onChange"),title:"Haptic command frequency (higher = smoother but more CPU)",children:[ne.jsx("option",{value:10,children:"10 Hz"}),ne.jsx("option",{value:30,children:"30 Hz"}),ne.jsx("option",{value:60,children:"60 Hz"}),ne.jsx("option",{value:90,children:"90 Hz"}),ne.jsx("option",{value:120,children:"120 Hz"})]}),ne.jsxs("span",{className:"fp-haptic-settings-rate-info",children:[(1e3/i).toFixed(1),"ms interval"]})]})]})]}),ne.jsx("div",{className:"fp-haptic-settings-divider"}),ne.jsxs("div",{className:"fp-haptic-settings-master-section",children:[ne.jsxs("h6",{className:"fp-haptic-settings-section-title",children:[ne.jsx(xi,{name:"sliders",size:18,className:"fp-haptic-settings-section-header-icon"}),"Master"]}),ne.jsxs("div",{className:"fp-haptic-settings-master-controls",children:[ne.jsxs("div",{className:"fp-haptic-settings-scale-control",children:[ne.jsxs("label",{className:"fp-haptic-settings-scale-label",children:["Global Scale: ",((s||1)*100).toFixed(0),"%"]}),ne.jsxs("div",{className:"fp-haptic-settings-scale-input-group",children:[ne.jsx("input",{className:"fp-haptic-settings-scale-range",type:"range",min:"0",max:"2",step:"0.01",value:s||1,onChange:ke(m=>this.handleGlobalScaleChange(parseFloat(m.target.value)),"onChange"),title:"Master intensity control for all actuators"}),ne.jsx("input",{className:"fp-haptic-settings-scale-number",type:"number",value:s||1,onChange:ke(m=>this.handleGlobalScaleChange(parseFloat(m.target.value)||1),"onChange"),step:"0.01",min:"0",max:"2"})]})]}),ne.jsxs("div",{className:"fp-haptic-settings-offset-control",children:[ne.jsxs("label",{className:"fp-haptic-settings-offset-label",children:["Global Offset: ",((r||0)*1e3).toFixed(0),"ms"]}),ne.jsxs("div",{className:"fp-haptic-settings-offset-input-group",children:[ne.jsx("input",{className:"fp-haptic-settings-offset-range",type:"range",value:r||0,onChange:ke(m=>this.handleGlobalOffsetChange(parseFloat(m.target.value)),"onChange"),min:"-1",max:"1",step:"0.01",title:"Global timing offset for all actuators"}),ne.jsx("input",{className:"fp-haptic-settings-offset-number",type:"number",value:r||0,onChange:ke(m=>this.handleGlobalOffsetChange(parseFloat(m.target.value)||0),"onChange"),step:"0.01",min:"-1",max:"1"})]})]})]})]}),e.length>0&&ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{className:"fp-haptic-settings-divider"}),ne.jsx("div",{className:"fp-haptic-settings-channels-header",children:ne.jsxs("h6",{className:"fp-haptic-settings-section-title",children:[ne.jsx(xi,{name:"music",size:18,className:"fp-haptic-settings-section-header-icon"}),"Channels"]})}),ne.jsx(UP,{core:this.core})]}),e.length>0&&ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{className:"fp-haptic-settings-divider"}),ne.jsxs("div",{className:"fp-haptic-settings-actuators-section",children:[ne.jsxs("div",{className:"fp-haptic-settings-actuators-header",children:[ne.jsxs("h6",{className:"fp-haptic-settings-section-title",children:[ne.jsx(xi,{name:"activity",size:18,className:"fp-haptic-settings-section-header-icon"}),"Actuators"]}),ne.jsxs("button",{className:"fp-haptic-settings-automap-btn",onClick:this.handleAutoMap,children:["Auto Map All (",t.length,")"]})]}),ne.jsx("div",{className:"fp-haptic-settings-actuators-list",children:t.map(m=>ne.jsx(FP,{core:this.core,actuator:m},m.index))})]})]})]})}};ke(AE,"HapticSettingsComponent");let VP=AE;var HP=Object.defineProperty,qP=ke((n,e,t)=>e in n?HP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$2"),_i=ke((n,e,t)=>qP(n,typeof e!="symbol"?e+"":e,t),"__publicField$2");const DE=class extends as.Component{constructor(e){super(e),_i(this,"initCanvas",()=>{const t=this.canvasRef.current;if(!t)return;this.ctx=t.getContext("2d");const i=t.getBoundingClientRect(),r=window.devicePixelRatio||1;t.width=i.width*r,t.height=i.height*r,this.ctx.scale(r,r),t.style.width=i.width+"px",t.style.height=i.height+"px"}),_i(this,"gaussian",(t,i,r)=>{const s=1/(r*Math.sqrt(2*Math.PI)),o=Math.exp(-Math.pow(t-i,2)/(2*Math.pow(r,2)));return s*o}),_i(this,"calculateSigma",t=>{const{sigmaMin:i,sigmaMax:r}=this.config;return r-t*(r-i)}),_i(this,"getActuatorPosition",(t,i)=>i<=1?.5:(t+1)/(i+1)),_i(this,"getCurrentActuatorData",()=>{var t,i;return((i=(t=this.props).getCurrentActuatorData)==null?void 0:i.call(t))||new Map}),_i(this,"getConfiguredActuatorCount",()=>{const t=this.getCurrentActuatorData();return Math.max(1,t.size)}),_i(this,"calculateNormalizationFactor",t=>{if(this.normalizationCache.has(t))return this.normalizationCache.get(t);const{resolution:i,sigmaMin:r}=this.config;let s=0;for(let u=0;u<=i;u++){const c=u/i;let h=0;for(let f=0;f<t;f++){const m=this.getActuatorPosition(f,t);h+=this.gaussian(c,m,r)}s=Math.max(s,h)}const o=s>0?1/s:1;return this.normalizationCache.set(t,o),o}),_i(this,"getActiveActuators",t=>Array.from(t.entries())),_i(this,"rebuildColorCache",()=>{const{resolution:t,rainbowRotation:i}=this.config;this.colorCache.rainbowColors=Array.from({length:t+1},(r,s)=>this.getColorAt(s/t)),this.colorCache.actuatorColors=new Map;for(let r=1;r<=8;r++)for(let s=0;s<r;s++){const o=this.getActuatorPosition(s,r),u=this.getColorAt(o);this.colorCache.actuatorColors.set(`${r}-${s}`,u)}this.colorCache.lastRotation=i,this.colorCache.lastResolution=t}),_i(this,"ensureColorCache",t=>{const{resolution:i,rainbowRotation:r}=this.config;(this.colorCache.lastRotation!==r||this.colorCache.lastResolution!==i||this.colorCache.lastNActive!==t)&&(this.rebuildColorCache(),this.colorCache.lastNActive=t)}),_i(this,"getCachedRainbowColor",t=>this.colorCache.rainbowColors[t]),_i(this,"getCachedActuatorColor",(t,i,r=1)=>{const s=this.colorCache.actuatorColors.get(`${t}-${i}`);return s?[Math.round(s[0]*r),Math.round(s[1]*r),Math.round(s[2]*r)]:[255,255,255]}),_i(this,"hsvToRgb",(t,i,r)=>{const s=r*i,o=s*(1-Math.abs(t/60%2-1)),u=r-s;let c,h,f;return t>=0&&t<60?[c,h,f]=[s,o,0]:t>=60&&t<120?[c,h,f]=[o,s,0]:t>=120&&t<180?[c,h,f]=[0,s,o]:t>=180&&t<240?[c,h,f]=[0,o,s]:t>=240&&t<300?[c,h,f]=[o,0,s]:[c,h,f]=[s,0,o],[Math.round((c+u)*255),Math.round((h+u)*255),Math.round((f+u)*255)]}),_i(this,"getColorAt",t=>{const i=(t+this.config.rainbowRotation)%1*360;return this.hsvToRgb(i,1,1)}),_i(this,"getActuatorColor",(t,i=1)=>{const r=this.getColorAt(t);return[Math.round(r[0]*i),Math.round(r[1]*i),Math.round(r[2]*i)]}),_i(this,"getRainbowBackgroundColor",t=>this.getColorAt(t)),_i(this,"calculatePoints",(t,i,r)=>{const s=this.getConfiguredActuatorCount(),o=t.length,{resolution:u,heightScale:c}=this.config,h=this.calculateNormalizationFactor(s);this.ensureColorCache(o);const f=[];for(let m=0;m<=u;m++){const x=m/u;let w=0,A=[0,0,0];t.forEach(([C,D],N)=>{const L=this.getActuatorPosition(N,o),P=Math.abs(D.value),X=this.calculateSigma(P),j=this.gaussian(x,L,X)*P;if(j>.001){const K=this.getCachedActuatorColor(o,N,P),z=this.getCachedRainbowColor(m),J=this.config.rainbowIntensity,R=[K[0]*(1-J)+z[0]*J,K[1]*(1-J)+z[1]*J,K[2]*(1-J)+z[2]*J];A[0]+=R[0]*j,A[1]+=R[1]*j,A[2]+=R[2]*j,w+=j}}),w>0&&(A=A.map(C=>Math.round(C/w))),f.push({x:x*i,y:r-w*h*c*r,intensity:w*h,color:A})}return f}),_i(this,"renderGradientFill",(t,i,r)=>{if(t.length<2)return;this.ctx.beginPath(),this.ctx.moveTo(0,r),t.forEach((o,u)=>{if(u===0)this.ctx.lineTo(o.x,o.y);else{const c=t[u-1],h=(c.x+o.x)/2;this.ctx.quadraticCurveTo(c.x,c.y,h,(c.y+o.y)/2)}}),this.ctx.lineTo(i,r),this.ctx.closePath();const s=this.ctx.createLinearGradient(0,0,i,0);t.forEach((o,u)=>{const c=u/(t.length-1),[h,f,m]=o.color,x=Math.min(1,o.intensity*.8);s.addColorStop(c,`rgba(${h}, ${f}, ${m}, ${x})`)}),this.ctx.fillStyle=s,this.ctx.fill(),this.ctx.shadowColor="rgba(255, 255, 255, 0.2)",this.ctx.shadowBlur=8,this.ctx.strokeStyle="rgba(255, 255, 255, 0.4)",this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.shadowBlur=0}),_i(this,"renderCurrentFrame",()=>{const t=this.getCurrentActuatorData(),i=this.getActiveActuators(t);if(i.length===0)return;const r=this.canvasRef.current;if(!r)return;const s=r.clientWidth,o=r.clientHeight,u=this.calculatePoints(i,s,o);this.renderGradientFill(u,s,o)}),_i(this,"startAnimation",()=>{const t=ke(()=>{this.canvasRef.current&&(this.renderFrame(),this.animationId=requestAnimationFrame(t))},"animate");this.animationId=requestAnimationFrame(t)}),_i(this,"renderFrame",()=>{if(!this.ctx)return;const t=this.canvasRef.current;t&&(this.ctx.clearRect(0,0,t.clientWidth,t.clientHeight),this.renderCurrentFrame())}),_i(this,"toggleConfig",()=>{const t=!this.state.showConfig;this.setState({showConfig:t},()=>{this.core.notify("component:resize",{source:"HapticVisualizerComponent",reason:`config-panel-${t?"expanded":"collapsed"}`})})}),_i(this,"updateConfig",(t,i)=>{this.config[t]=i,(t==="sigmaMin"||t==="sigmaMax")&&this.normalizationCache.clear(),this.forceUpdate()}),this.core=e.core,this.state={isPlaying:!1,showConfig:!1},this.canvasRef=fc.createRef(),this.ctx=null,this.animationId=null,this.config={resolution:300,heightScale:.95,sigmaMin:.07,sigmaMax:.15,rainbowIntensity:.25,rainbowRotation:0},this.normalizationCache=new Map,this.colorCache={rainbowColors:null,actuatorColors:null,lastRotation:-1,lastResolution:-1,lastNActive:-1}}componentDidMount(){this.props.visible&&setTimeout(()=>{this.initCanvas(),this.startAnimation()},50)}componentDidUpdate(e){const t=this.props.isPlaying||!1;t!==this.state.isPlaying&&this.setState({isPlaying:t}),e.visible!==this.props.visible&&(this.core.notify("component:resize",{source:"HapticVisualizerComponent",reason:`visibility-${this.props.visible?"shown":"hidden"}`}),!e.visible&&this.props.visible?setTimeout(()=>{this.initCanvas(),this.startAnimation()},50):e.visible&&!this.props.visible&&this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null))}componentWillUnmount(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null,console.log("🧹 HapticVisualizer animation cleanup completed"))}render(){const{visible:e=!0}=this.props;return e?ne.jsxs("div",{className:"fp-haptic-visualizer",children:[ne.jsxs("div",{className:"fp-haptic-visualizer-canvas-area",children:[ne.jsx("canvas",{ref:this.canvasRef,className:"fp-haptic-visualizer-canvas"}),ne.jsx("button",{className:"fp-haptic-visualizer-config-btn",onClick:this.toggleConfig,title:"Visualizer settings",children:ne.jsx(xi,{name:"settings",size:14,className:"fp-icon-button"})})]}),this.state.showConfig&&ne.jsxs("div",{className:"fp-haptic-visualizer-config",children:[ne.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[ne.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Resolution: ",this.config.resolution]}),ne.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"50",max:"500",step:"25",value:this.config.resolution,onChange:ke(t=>this.updateConfig("resolution",parseInt(t.target.value)),"onChange")})]}),ne.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[ne.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Height: ",(this.config.heightScale*100).toFixed(0),"%"]}),ne.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.1",max:"1.0",step:"0.05",value:this.config.heightScale,onChange:ke(t=>this.updateConfig("heightScale",parseFloat(t.target.value)),"onChange")})]}),ne.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[ne.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Sigma Min: ",this.config.sigmaMin.toFixed(2)]}),ne.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.01",max:"0.2",step:"0.01",value:this.config.sigmaMin,onChange:ke(t=>this.updateConfig("sigmaMin",parseFloat(t.target.value)),"onChange")})]}),ne.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[ne.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Sigma Max: ",this.config.sigmaMax.toFixed(2)]}),ne.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.05",max:"0.3",step:"0.01",value:this.config.sigmaMax,onChange:ke(t=>this.updateConfig("sigmaMax",parseFloat(t.target.value)),"onChange")})]}),ne.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[ne.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Rainbow: ",(this.config.rainbowIntensity*100).toFixed(0),"%"]}),ne.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.0",max:"1",step:"0.05",value:this.config.rainbowIntensity,onChange:ke(t=>this.updateConfig("rainbowIntensity",parseFloat(t.target.value)),"onChange")})]}),ne.jsxs("div",{className:"fp-haptic-visualizer-config-row",children:[ne.jsxs("label",{className:"fp-haptic-visualizer-config-label",children:["Hue: ",(this.config.rainbowRotation*360).toFixed(0),"°"]}),ne.jsx("input",{className:"fp-haptic-visualizer-config-range",type:"range",min:"0.0",max:"1.0",step:"0.02",value:this.config.rainbowRotation,onChange:ke(t=>this.updateConfig("rainbowRotation",parseFloat(t.target.value)),"onChange")})]})]})]}):null}};ke(DE,"HapticVisualizerComponent");let WP=DE;var GP=Object.defineProperty,KP=ke((n,e,t)=>e in n?GP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$1"),fl=ke((n,e,t)=>KP(n,typeof e!="symbol"?e+"":e,t),"__publicField$1");const IE=class extends as.Component{constructor(e){super(e),fl(this,"setupResizeObserver",()=>{!this.textareaRef.current||!window.ResizeObserver||(this.resizeObserver=new ResizeObserver(()=>{setTimeout(()=>{this.core.notify("component:resize",{source:"LoggingComponent",reason:"textarea-content-changed"})},0)}),this.resizeObserver.observe(this.textareaRef.current))}),fl(this,"handleEvent",(t,i)=>{t.startsWith("status:")&&this.updateTextarea()}),fl(this,"updateTextarea",()=>{this.textareaRef.current&&(this.textareaRef.current.value=this.core.logging.getFormattedLogs(),this.state.autoScroll&&(this.textareaRef.current.scrollTop=this.textareaRef.current.scrollHeight))}),fl(this,"handleClear",()=>{this.core.logging.clear()}),fl(this,"handleDownload",()=>{var c,h;const t=this.core.generateExportContent(),r=`funplayer-debug-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.log`,s=new Blob([t],{type:"text/plain"}),o=URL.createObjectURL(s),u=document.createElement("a");u.href=o,u.download=r,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(o),(h=(c=this.core).notify)==null||h.call(c,"status:logging",{message:`Debug logs downloaded: ${r}`,type:"success"})}),fl(this,"handleCopy",async()=>{var t,i,r,s;try{const o=this.core.generateExportContent();await navigator.clipboard.writeText(o),(i=(t=this.core).notify)==null||i.call(t,"status:logging",{message:"Debug logs copied to clipboard",type:"success"})}catch{this.textareaRef.current&&(this.textareaRef.current.select(),(s=(r=this.core).notify)==null||s.call(r,"status:logging",{message:"Logs selected, press Ctrl+C to copy",type:"info"}))}}),fl(this,"handleToggleAutoScroll",()=>{this.setState(t=>({autoScroll:!t.autoScroll}))}),this.core=e.core,this.state={autoScroll:!0},this.textareaRef=fc.createRef(),this.coreListener=null,this.resizeObserver=null}componentDidMount(){this.coreListener=this.core.addListener(this.handleEvent),this.updateTextarea(),this.props.visible&&setTimeout(()=>{this.setupResizeObserver()},10)}componentDidUpdate(e){!e.visible&&this.props.visible&&setTimeout(()=>{this.setupResizeObserver()},10),e.visible&&!this.props.visible&&this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}componentWillUnmount(){console.log("LoggingComponent unmounting"),this.coreListener&&(this.coreListener(),this.coreListener=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}render(){const{visible:e=!0}=this.props;if(!e)return null;const{autoScroll:t}=this.state,i=this.core.logging.getLogs().length;return ne.jsxs("div",{className:"fp-logging",children:[ne.jsxs("div",{className:"fp-logging-header",children:[ne.jsxs("div",{className:"fp-logging-title",children:[ne.jsx(xi,{name:"file-text",size:16,className:"fp-icon"}),ne.jsx("span",{className:"fp-logging-label",children:"Debug Logs"}),ne.jsx("span",{className:"fp-logging-count",children:i})]}),ne.jsxs("div",{className:"fp-logging-actions",children:[ne.jsx("button",{className:"fp-logging-clear-btn",onClick:this.handleClear,title:"Clear logs",children:ne.jsx(xi,{name:"trash-2",size:14,className:"fp-icon-button"})}),ne.jsx("button",{className:"fp-logging-download-btn",onClick:this.handleDownload,title:"Download logs",children:ne.jsx(xi,{name:"download",size:14,className:"fp-icon-button"})}),ne.jsx("button",{className:"fp-logging-copy-btn",onClick:this.handleCopy,title:"Copy to clipboard",children:ne.jsx(xi,{name:"copy",size:14,className:"fp-icon-button"})}),ne.jsx("button",{className:`fp-logging-autoscroll-btn ${t?"fp-logging-autoscroll-btn-active":""}`,onClick:this.handleToggleAutoScroll,title:"Toggle auto-scroll",children:ne.jsx(xi,{name:t?"lock":"unlock",size:14,className:"fp-icon-button"})})]})]}),ne.jsx("textarea",{ref:this.textareaRef,className:"fp-logging-textarea",readOnly:!0,placeholder:"Debug logs will appear here..."})]})}};ke(IE,"LoggingComponent");let XP=IE;const kE=class extends as.Component{render(){const{isPlaying:e,updateRate:t,showVisualizer:i,showDebug:r,showPlaylist:s,onToggleVisualizer:o,onToggleDebug:u,onTogglePlaylist:c}=this.props;return ne.jsxs("div",{className:"fp-status-bar",children:[ne.jsxs("span",{className:"fp-status-bar-status",children:[ne.jsx(xi,{name:e?"play":"pause",className:"fp-status-bar-status-icon"}),t,"Hz"]}),ne.jsx("div",{className:"fp-status-bar-logo-area",children:ne.jsx(fE,{className:"fp-status-bar-logo",size:30})}),ne.jsxs("div",{className:"fp-status-bar-controls",children:[ne.jsx("button",{className:"fp-status-bar-playlist-btn",onClick:c,title:s?"Hide Playlist":"Show Playlist",children:ne.jsx(xi,{name:"list",size:16,className:"fp-icon-button"})}),ne.jsx("button",{className:"fp-status-bar-visualizer-btn",onClick:o,title:i?"Hide Visualizer":"Show Visualizer",children:ne.jsx(xi,{name:"bar-chart-2",size:16,className:"fp-icon-button"})}),ne.jsx("button",{className:"fp-status-bar-debug-btn",onClick:u,title:r?"Hide Debug":"Show Debug",children:ne.jsx(xi,{name:"search",size:16,className:"fp-icon-button"})})]})]})}};ke(kE,"StatusBarComponent");let YP=kE;const ME={primaryColor:"--fp-primary-color",backgroundColor:"--fp-background-color",secondaryBackgroundColor:"--fp-secondary-background-color",textColor:"--fp-text-color",borderColor:"--fp-border-color",fontFamily:"--fp-font-family",baseRadius:"--fp-base-radius",spacing:"--fp-spacing"};function d2(n){return ME[n]||`--fp-${n.replace(/([A-Z])/g,"-$1").toLowerCase()}`}ke(d2,"convertToCssVar");function h2(n){if(!n||typeof n!="object")return{};const e={};return Object.entries(n).forEach(([t,i])=>{i!=null&&i!==""&&(e[t]=String(i).trim())}),e}ke(h2,"sanitizeTheme");function PE(n){return!n||typeof n!="object"?!1:Object.keys(n).some(e=>n[e]!==null&&n[e]!==void 0&&n[e]!=="")}ke(PE,"isValidTheme");function OE(n,e,t={}){if(!n||!e)return!1;const{setDataTheme:i=!0}=t;try{const r=h2(n);return Object.entries(r).forEach(([s,o])=>{if(s!=="base"){const u=d2(s);e.style.setProperty(u,o)}}),i&&r.base&&e.setAttribute("data-theme",r.base),!0}catch(r){return console.error("Failed to apply theme to element:",r),!1}}ke(OE,"applyThemeToElement");const QP={convertToCssVar:d2,sanitizeTheme:h2,isValidTheme:PE,applyThemeToElement:OE,CSS_VAR_MAPPINGS:ME};var JP=Object.defineProperty,ZP=ke((n,e,t)=>e in n?JP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp"),Xe=ke((n,e,t)=>ZP(n,typeof e!="symbol"?e+"":e,t),"__publicField");const RE=class extends as.Component{constructor(e){super(e),Xe(this,"initializeComponent",()=>{var t,i,r,s,o,u;try{(i=(t=this.core).notify)==null||i.call(t,"status:funplayer",{message:"Initializing FunPlayer component...",type:"processing"}),this.coreListener=this.core.addListener(this.handleEvent),this.props.playlist&&this.handlePlaylistUpdate(),(s=(r=this.core).notify)==null||s.call(r,"status:funplayer",{message:"FunPlayer component initialized",type:"success"})}catch(c){(u=(o=this.core).notify)==null||u.call(o,"status:funplayer",{message:"FunPlayer initialization failed",type:"error",error:c.message})}}),Xe(this,"handlePlaylistUpdate",async()=>{var i,r;const{playlist:t}=this.props;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Synchronizing playlist: ${(t==null?void 0:t.length)||0} items`,type:"log"}),await this.core.playlist.loadPlaylist(t)}),Xe(this,"applyTheme",()=>{var s,o,u,c;const{theme:t}=this.props;if(!t)return;const i=this.containerRef.current;if(!i){console.warn("Cannot apply theme: container ref not available");return}QP.applyThemeToElement(t,i)?(o=(s=this.core).notify)==null||o.call(s,"status:funplayer",{message:"Theme applied successfully with fp- prefixed variables",type:"log"}):(c=(u=this.core).notify)==null||c.call(u,"status:funplayer",{message:"Failed to apply theme",type:"error"})}),Xe(this,"handleEvent",(t,i)=>{var r,s;switch(t){case"media:play":this.handleMediaPlayEvent(i);break;case"media:pause":this.handleMediaPauseEvent(i);break;case"media:ended":this.handleMediaEndedEvent(i);break;case"media:seeking":this.handleMediaSeekingEvent(i);break;case"media:seeked":this.handleMediaSeekedEvent(i);break;case"media:timeupdate":this.handleMediaTimeUpdateEvent(i);break;case"media:durationchange":this.handleMediaDurationChangeEvent(i);break;case"media:loadstart":this.handleMediaLoadStartEvent(i);break;case"media:loadeddata":this.handleMediaLoadedDataEvent(i);break;case"media:loadedmetadata":this.handleMediaLoadedMetadataEvent(i);break;case"media:canplay":this.handleMediaCanPlayEvent(i);break;case"media:canplaythrough":this.handleMediaCanPlayThroughEvent(i);break;case"media:waiting":this.handleMediaWaitingEvent(i);break;case"media:stalled":this.handleMediaStalledEvent(i);break;case"media:suspend":this.handleMediaSuspendEvent(i);break;case"media:volumechange":this.handleMediaVolumeChangeEvent(i);break;case"media:error":this.handleMediaErrorEvent(i);break;case"media:playlistitemchange":this.handleMediaPlaylistItemChangeEvent(i);break;case"media:resize":this.handleMediaResizeEvent(i);break;case"buttplug:device":i.connected!==!1?this.handleDeviceConnect(i):this.handleDeviceDisconnect(i),this._triggerRender();break;case"buttplug:connection":if(i.connected===!1&&i.reason){const o={device:{name:"All devices"},reason:i.reason};this.handleDeviceDisconnect(o)}this._triggerRender();break;case"haptic:started":this.handleHapticStart(i);break;case"haptic:stopped":this.handleHapticStop(i);break;case"core:ready":this.core.notify("status:funplayer",{message:"Core systems ready",type:"success"}),this._triggerRender();break;case"playlist:playbackChanged":this.setState({isPlaying:i.isPlaying});break;case"playlist:itemChanged":if(this.mediaPlayerRef.current&&i.index>=0){const o=this.mediaPlayerRef.current.getPlaylistInfo().currentIndex;o!==i.index&&((s=(r=this.core).notify)==null||s.call(r,"status:funplayer",{message:`Syncing MediaPlayer: ${o} → ${i.index}`,type:"log"}),this.mediaPlayerRef.current.goToPlaylistItem(i.index))}break;case"funscript:load":case"funscript:channels":this._triggerRender();break;case"component:resize":this.handleResize(i);break}}),Xe(this,"_triggerRender",()=>{this.setState(t=>({renderTrigger:t.renderTrigger+1}))}),Xe(this,"handleResize",t=>{var s,o,u,c,h,f;const i=this.containerRef.current;if(!i){console.warn("📏 FunPlayer container ref not available");return}const r={width:i.offsetWidth,height:i.offsetHeight};if(t&&typeof t=="object"){const m=t.source||"unknown",x=t.reason?` (${t.reason})`:"";(o=(s=this.core).notify)==null||o.call(s,"status:funplayer",{message:`Resize from ${m}${x}: ${r.width}×${r.height}px`,type:"log"})}else(c=(u=this.core).notify)==null||c.call(u,"status:funplayer",{message:`Resize (legacy call): ${r.width}×${r.height}px`,type:"log"});(f=(h=this.props).onResize)==null||f.call(h,r)}),Xe(this,"handleDeviceConnect",t=>{var i,r,s,o,u;(s=(r=this.core).notify)==null||s.call(r,"status:funplayer",{message:`Device connected: ${((i=t.device)==null?void 0:i.name)||"Unknown"}`,type:"log"}),(u=(o=this.props).onDeviceConnect)==null||u.call(o,t)}),Xe(this,"handleDeviceDisconnect",t=>{var i,r,s,o,u;(s=(r=this.core).notify)==null||s.call(r,"status:funplayer",{message:`Device disconnected: ${((i=t.device)==null?void 0:i.name)||"Unknown"}`,type:"log"}),(u=(o=this.props).onDeviceDisconnect)==null||u.call(o,t)}),Xe(this,"handleHapticStart",t=>{var i,r,s,o;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Haptic playback started: ${t.channels} channels at ${t.updateRate}Hz`,type:"log"}),(o=(s=this.props).onHapticStart)==null||o.call(s,t)}),Xe(this,"handleHapticStop",t=>{var i,r,s,o;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Haptic playback stopped: ${t.reason}`,type:"log"}),(o=(s=this.props).onHapticStop)==null||o.call(s,t)}),Xe(this,"handleMediaPlay",t=>{var i,r;this.core.notify("media:play",t),(r=(i=this.props).onPlay)==null||r.call(i,t)}),Xe(this,"handleMediaPause",t=>{var i,r;this.core.notify("media:pause",t),(r=(i=this.props).onPause)==null||r.call(i,t)}),Xe(this,"handleMediaEnded",t=>{var i,r;this.core.notify("media:ended",t),(r=(i=this.props).onEnded)==null||r.call(i,t)}),Xe(this,"handleMediaSeeking",t=>{var i,r;this.core.notify("media:seeking",t),(r=(i=this.props).onSeeking)==null||r.call(i,t)}),Xe(this,"handleMediaSeeked",t=>{var i,r;this.core.notify("media:seeked",t),(r=(i=this.props).onSeeked)==null||r.call(i,t)}),Xe(this,"handleMediaTimeUpdate",t=>{var i,r;this.core.notify("media:timeupdate",t),(r=(i=this.props).onTimeUpdate)==null||r.call(i,t)}),Xe(this,"handleMediaDurationChange",t=>{var i,r;this.core.notify("media:durationchange",t),(r=(i=this.props).onDurationChange)==null||r.call(i,t)}),Xe(this,"handleMediaLoadStart",t=>{var i,r;this.core.notify("media:loadstart",t),(r=(i=this.props).onLoadStart)==null||r.call(i,t)}),Xe(this,"handleMediaLoadedData",t=>{var i,r;this.core.notify("media:loadeddata",t),(r=(i=this.props).onLoadedData)==null||r.call(i,t)}),Xe(this,"handleMediaLoadedMetadata",t=>{var i,r;this.core.notify("media:loadedmetadata",t),(r=(i=this.props).onLoadedMetadata)==null||r.call(i,t)}),Xe(this,"handleMediaCanPlay",t=>{var i,r;this.core.notify("media:canplay",t),(r=(i=this.props).onCanPlay)==null||r.call(i,t)}),Xe(this,"handleMediaCanPlayThrough",t=>{var i,r;this.core.notify("media:canplaythrough",t),(r=(i=this.props).onCanPlayThrough)==null||r.call(i,t)}),Xe(this,"handleMediaWaiting",t=>{var i,r;this.core.notify("media:waiting",t),(r=(i=this.props).onWaiting)==null||r.call(i,t)}),Xe(this,"handleMediaStalled",t=>{var i,r;this.core.notify("media:stalled",t),(r=(i=this.props).onStalled)==null||r.call(i,t)}),Xe(this,"handleMediaSuspend",t=>{var i,r;this.core.notify("media:suspend",t),(r=(i=this.props).onSuspend)==null||r.call(i,t)}),Xe(this,"handleMediaVolumeChange",t=>{var i,r;this.core.notify("media:volumechange",t),(r=(i=this.props).onVolumeChange)==null||r.call(i,t)}),Xe(this,"handleMediaError",t=>{var i,r;this.core.notify("media:error",t),(r=(i=this.props).onError)==null||r.call(i,t)}),Xe(this,"handleMediaPlaylistItemChange",t=>{var i,r;this.core.notify("media:playlistitemchange",t),(r=(i=this.props).onPlaylistItemChange)==null||r.call(i,t)}),Xe(this,"handleMediaResize",t=>{this.core.notify("media:resize",t)}),Xe(this,"handleMediaPlayEvent",({currentTime:t})=>{var r,s,o;this.hapticTime=t||0,this.lastMediaTime=this.hapticTime,this.lastSyncTime=performance.now();const i=((r=this.mediaPlayerRef.current)==null?void 0:r.getDuration())||0;this.core.playlist.updatePlaybackState(!0,t,i),this.core.funscript.hasFunscript()&&(this.startHapticLoop(),(o=(s=this.core).notify)==null||o.call(s,"status:funplayer",{message:`Haptic playback started at ${t.toFixed(1)}s`,type:"log"}))}),Xe(this,"handleMediaPauseEvent",async({currentTime:t})=>{var r,s,o,u,c;if(this.core.funscript.hasFunscript()){this.stopHapticLoop();try{await this.core.buttplug.stopAll(),(s=(r=this.core).notify)==null||s.call(r,"status:funplayer",{message:"Haptic devices stopped",type:"log"})}catch(h){(u=(o=this.core).notify)==null||u.call(o,"status:funplayer",{message:"Failed to stop haptic devices",type:"log",error:h.message})}}const i=((c=this.mediaPlayerRef.current)==null?void 0:c.getDuration())||0;this.core.playlist.updatePlaybackState(!1,t,i),this.setState({currentActuatorData:new Map})}),Xe(this,"handleMediaEndedEvent",async({currentTime:t})=>{var i,r,s,o;if(this.core.funscript.hasFunscript()){this.stopHapticLoop();try{await this.core.buttplug.stopAll(),(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:"Haptic playback ended",type:"log"})}catch(u){(o=(s=this.core).notify)==null||o.call(s,"status:funplayer",{message:"Failed to stop haptic devices on end",type:"log",error:u.message})}}this.core.playlist.updatePlaybackState(!1,0,0),this.hapticTime=0,this.lastMediaTime=0,this.setState({currentActuatorData:new Map})}),Xe(this,"handleMediaSeekingEvent",({currentTime:t})=>{var i,r;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Seeking to ${t.toFixed(1)}s`,type:"log"})}),Xe(this,"handleMediaSeekedEvent",({currentTime:t})=>{var i,r;this.core.funscript.hasFunscript()&&this.hapticIntervalId&&(this.hapticTime=t,this.lastMediaTime=t,this.lastSyncTime=performance.now(),(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Seeked to ${t.toFixed(1)}s`,type:"log"}))}),Xe(this,"handleMediaTimeUpdateEvent",({currentTime:t})=>{var c,h,f,m;if(this.isHapticAborted||!this.core.funscript.hasFunscript()||!this.hapticIntervalId)return;const i=performance.now(),r=(i-this.lastSyncTime)/1e3,s=t-this.lastMediaTime;if(r>1&&Math.abs(s)<.01&&!this.isBuffering){(h=(c=this.core).notify)==null||h.call(c,"status:funplayer",{message:"Player stall detected (1s+ frozen), starting timeout",type:"error"}),this._startBuffering("stall_detection",t);return}const o=Math.abs(t-this.hapticTime);(o>.05||r>1)&&(this.hapticTime=t,this.lastMediaTime=t,this.lastSyncTime=i,o>.1&&((m=(f=this.core).notify)==null||m.call(f,"status:funplayer",{message:`Haptic drift detected: ${(o*1e3).toFixed(1)}ms, resyncing`,type:"log"})))}),Xe(this,"handleMediaDurationChangeEvent",({duration:t})=>{var i,r;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Duration changed: ${t.toFixed(1)}s`,type:"log"})}),Xe(this,"handleMediaLoadStartEvent",t=>{var i,r;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:"Media loading started",type:"log"})}),Xe(this,"handleMediaLoadedDataEvent",({duration:t})=>{var i,r;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Media data loaded: ${t.toFixed(1)}s`,type:"log"})}),Xe(this,"handleMediaLoadedMetadataEvent",t=>{var r,s,o,u,c;(s=(r=this.core).notify)==null||s.call(r,"status:funplayer",{message:`Media loaded: ${t.duration.toFixed(1)}s`,type:"log"});const i=this.core.playlist.getCurrentItem();i&&Math.abs((i.duration||0)-t.duration)>1&&((c=(u=this.core).notify)==null||c.call(u,"status:funplayer",{message:`Duration corrected: ${((o=i.duration)==null?void 0:o.toFixed(1))||"unknown"}s → ${t.duration.toFixed(1)}s`,type:"log"}),this.core.playlist.updateCurrentItemDuration(t.duration)),this.handleResize()}),Xe(this,"handleMediaCanPlayEvent",({currentTime:t})=>{var i,r;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:"Media can play",type:"log"}),this.isBuffering&&this._endBuffering("canplay",t)}),Xe(this,"handleMediaCanPlayThroughEvent",({currentTime:t})=>{var i,r;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:"Media can play through",type:"log"})}),Xe(this,"handleMediaWaitingEvent",({currentTime:t})=>{this.isBuffering&&this.bufferingSource==="waiting"||(this.stallTimeoutId&&(clearTimeout(this.stallTimeoutId),this.stallTimeoutId=null),this._startBuffering("waiting",t))}),Xe(this,"handleMediaStalledEvent",({currentTime:t})=>{this.handleMediaWaitingEvent({currentTime:t})}),Xe(this,"handleMediaSuspendEvent",({currentTime:t})=>{var i,r;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:"Media loading suspended",type:"log"})}),Xe(this,"handleMediaVolumeChangeEvent",({volume:t,muted:i})=>{var r,s;(s=(r=this.core).notify)==null||s.call(r,"status:funplayer",{message:`Volume: ${i?"muted":Math.round(t*100)+"%"}`,type:"log"})}),Xe(this,"handleMediaErrorEvent",t=>{var i,r;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:"Media loading failed",type:"error",error:t.message}),this.core.setError("Media loading failed",t)}),Xe(this,"handleMediaPlaylistItemChangeEvent",t=>{var i,r,s,o;if((r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`MediaPlayer switched to item ${t}`,type:"log"}),t>=0){const u=this.core.playlist.getCurrentIndex();t!==u&&((o=(s=this.core).notify)==null||o.call(s,"status:funplayer",{message:`Syncing core playlist to Video.js index ${t}`,type:"log"}),this.core.playlist.goTo(t))}}),Xe(this,"handleMediaResizeEvent",t=>{this.core.notify("component:resize",{source:"MediaPlayer",reason:"video-js-resize",dimensions:t})}),Xe(this,"_startBuffering",(t,i)=>{var r,s,o,u,c,h;if(!(this.isBuffering&&this.bufferingSource==="waiting")){if(this.isBuffering=!0,this.bufferingSource=t,this.bufferingStartTime=performance.now(),this.hapticIntervalId){this.stopHapticLoop();try{this.core.buttplug.stopAll(),(s=(r=this.core).notify)==null||s.call(r,"status:funplayer",{message:`Buffering suspended (${t})`,type:"log"})}catch(f){(u=(o=this.core).notify)==null||u.call(o,"status:funplayer",{message:"Failed to stop haptic devices",type:"log",error:f.message})}}this.setState({currentActuatorData:new Map}),t==="stall_detection"&&(this.stallTimeoutId=setTimeout(()=>{this._abortHapticPlayback()},this.stallTimeout),(h=(c=this.core).notify)==null||h.call(c,"status:funplayer",{message:`Player stall timeout started (${this.stallTimeout}ms)`,type:"error"}))}}),Xe(this,"_endBuffering",(t,i)=>{var u,c,h,f;if(!this.isBuffering)return;const r=performance.now()-this.bufferingStartTime,s=this.bufferingSource==="stall_detection";this.stallTimeoutId&&(clearTimeout(this.stallTimeoutId),this.stallTimeoutId=null),this.isBuffering=!1,this.bufferingSource=null,this.isHapticAborted&&t==="canplay"&&(this.isHapticAborted=!1,(c=(u=this.core).notify)==null||c.call(u,"status:funplayer",{message:"Player recovered, haptic playback re-enabled",type:"success"}));const o=this.mediaPlayerRef.current;if(o&&o.isPlaying()&&this.core.funscript.hasFunscript()&&!this.isHapticAborted){this.hapticTime=i||o.getTime(),this.lastMediaTime=this.hapticTime,this.lastSyncTime=performance.now(),this.startHapticLoop();const m=s?" (stall recovered)":"";(f=(h=this.core).notify)==null||f.call(h,"status:funplayer",{message:`Buffering ended via ${t} (${r.toFixed(0)}ms)${m}, haptic resumed`,type:"success"})}}),Xe(this,"_abortHapticPlayback",()=>{var r,s,o,u,c,h;const t=performance.now()-this.bufferingStartTime;this.stallTimeoutId&&(clearTimeout(this.stallTimeoutId),this.stallTimeoutId=null),this.isHapticAborted=!0,this.isBuffering=!1,this.bufferingSource=null,this.stopHapticLoop();try{this.core.buttplug.stopAll()}catch{}const i=this.mediaPlayerRef.current;if(i)try{i.pause(),(s=(r=this.core).notify)==null||s.call(r,"status:funplayer",{message:"Sent pause command to unresponsive player",type:"log"})}catch(f){(u=(o=this.core).notify)==null||u.call(o,"status:funplayer",{message:"Failed to send pause to player",type:"log",error:f.message})}this.setState({currentActuatorData:new Map}),(h=(c=this.core).notify)==null||h.call(c,"status:funplayer",{message:`Media playing aborted due to unresponsive player (${t.toFixed(0)}ms stall)`,type:"error"})}),Xe(this,"processHapticFrame",async t=>{const i=this.mediaPlayerRef.current;if(!i||this.isHapticAborted||this.isBuffering)return;this.hapticTime+=t;const r=this.hapticTime,s=this.getMediaRefreshRate(i),o=this.calculateLinearDuration(t,s),u=await this.core.processHapticFrame(r,{duration:o*1e3});this.setState({currentActuatorData:u})}),Xe(this,"startHapticLoop",()=>{var s,o;if(this.hapticIntervalId)return;this.expectedHapticTime=performance.now();const t=1e3/this.state.updateRate;(o=(s=this.core).notify)==null||o.call(s,"status:funplayer",{message:`Starting haptic loop at ${this.state.updateRate}Hz`,type:"log"});const i={channels:this.core.funscript.getChannels().length,updateRate:this.state.updateRate,reason:"media_play"};this.core.notify("haptic:started",i);const r=ke(()=>{var u,c;try{const h=performance.now(),f=h-this.expectedHapticTime,m=t/1e3;this.processHapticFrame(m),this.expectedHapticTime+=t;const x=Math.max(0,t-f),w=1e3/this.state.updateRate;w!==t?(this.expectedHapticTime=h+w,this.hapticIntervalId=setTimeout(()=>this.restartWithNewRate(),w)):this.hapticIntervalId=setTimeout(r,x)}catch(h){(c=(u=this.core).notify)==null||c.call(u,"status:funplayer",{message:"Haptic loop error",type:"error",error:h.message}),this.hapticIntervalId=setTimeout(r,t)}},"optimizedLoop");this.hapticIntervalId=setTimeout(r,t)}),Xe(this,"stopHapticLoop",()=>{var t,i;if(this.hapticIntervalId){clearTimeout(this.hapticIntervalId),this.hapticIntervalId=null,(i=(t=this.core).notify)==null||i.call(t,"status:funplayer",{message:"Haptic loop stopped",type:"log"});const r={reason:"media_pause"};this.core.notify("haptic:stopped",r)}this.expectedHapticTime=0,this.lastSyncTime=0}),Xe(this,"restartWithNewRate",()=>{var i,r;this.hapticIntervalId!==null&&((r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Restarting haptic loop with new rate: ${this.state.updateRate}Hz`,type:"log"}),this.stopHapticLoop(),this.startHapticLoop())}),Xe(this,"getCurrentActuatorData",()=>this.state.currentActuatorData),Xe(this,"getMediaRefreshRate",t=>{switch(t.getState().mediaType){case"playlist":const s=t.getCurrentItem();return!s||!s.sources||s.sources.length===0?this.state.updateRate:(s.sources[0].type||"").startsWith("audio/")?this.state.updateRate:30;case"media":return 30;default:return this.state.updateRate}}),Xe(this,"calculateLinearDuration",(t,i)=>{const r=1/i,s=Math.max(t,r)*1.2;return Math.max(.01,Math.min(.1,s))}),Xe(this,"getUpdateRate",()=>this.state.updateRate),Xe(this,"handleUpdateRateChange",t=>{var i,r;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Update rate changed: ${this.state.updateRate}Hz → ${t}Hz`,type:"log"}),this.setState({updateRate:t})}),Xe(this,"handleToggleVisualizer",()=>{var i,r;const t=!this.state.showVisualizer;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Visualizer ${t?"shown":"hidden"}`,type:"log"}),this.setState({showVisualizer:t},()=>{this.handleResize()})}),Xe(this,"handleToggleDebug",()=>{var i,r;const t=!this.state.showDebug;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Debug panel ${t?"shown":"hidden"}`,type:"log"}),this.setState({showDebug:t},()=>{this.handleResize()})}),Xe(this,"handleTogglePlaylist",()=>{var i,r;const t=!this.state.showPlaylist;(r=(i=this.core).notify)==null||r.call(i,"status:funplayer",{message:`Playlist ${t?"shown":"hidden"}`,type:"log"}),this.setState({showPlaylist:t},()=>{this.handleResize()})}),this.core=new DP,this.state={updateRate:60,isPlaying:!1,currentActuatorData:new Map,showVisualizer:!0,showDebug:!1,showPlaylist:!0,renderTrigger:0},this.containerRef=fc.createRef(),this.mediaPlayerRef=fc.createRef(),this.hapticIntervalId=null,this.expectedHapticTime=0,this.hapticTime=0,this.lastMediaTime=0,this.lastSyncTime=0,this.isBuffering=!1,this.bufferingStartTime=0,this.bufferingSource=null,this.stallTimeoutId=null,this.stallTimeout=5e3,this.isHapticAborted=!1,this.coreListener=null}componentDidMount(){this.applyTheme(),this.initializeComponent()}componentDidUpdate(e){e.theme!==this.props.theme&&this.applyTheme(),e.playlist!==this.props.playlist&&this.handlePlaylistUpdate()}componentWillUnmount(){this.stopHapticLoop(),this.stallTimeoutId&&(clearTimeout(this.stallTimeoutId),this.stallTimeoutId=null),this.coreListener&&this.coreListener()}render(){const{showVisualizer:e,showDebug:t,showPlaylist:i}=this.state,r=this.core.playlist.items;return ne.jsxs("div",{className:"fp-funplayer",ref:this.containerRef,children:[ne.jsx(VP,{core:this.core,onUpdateRateChange:this.handleUpdateRateChange,onGetUpdateRate:this.getUpdateRate}),ne.jsx(xP,{ref:this.mediaPlayerRef,playlist:r,notify:this.core.notify,onPlay:this.handleMediaPlay,onPause:this.handleMediaPause,onEnded:this.handleMediaEnded,onSeeking:this.handleMediaSeeking,onSeeked:this.handleMediaSeeked,onTimeUpdate:this.handleMediaTimeUpdate,onDurationChange:this.handleMediaDurationChange,onLoadStart:this.handleMediaLoadStart,onLoadedData:this.handleMediaLoadedData,onLoadedMetadata:this.handleMediaLoadedMetadata,onCanPlay:this.handleMediaCanPlay,onCanPlayThrough:this.handleMediaCanPlayThrough,onWaiting:this.handleMediaWaiting,onStalled:this.handleMediaStalled,onSuspend:this.handleMediaSuspend,onVolumeChange:this.handleMediaVolumeChange,onError:this.handleMediaError,onResize:this.handleResize}),ne.jsx(WP,{core:this.core,visible:e,isPlaying:this.state.isPlaying,getCurrentActuatorData:this.getCurrentActuatorData}),ne.jsx(XP,{core:this.core,visible:t}),ne.jsx(YP,{core:this.core,isPlaying:this.state.isPlaying,updateRate:this.state.updateRate,showVisualizer:e,showDebug:t,showPlaylist:i,onToggleVisualizer:this.handleToggleVisualizer,onToggleDebug:this.handleToggleDebug,onTogglePlaylist:this.handleTogglePlaylist}),ne.jsx(MP,{core:this.core,visible:i})]})}};ke(RE,"FunPlayer");let eO=RE;class tO extends wD{constructor(t){super(t);sy(this,"waitForStreamlitReady",async()=>new Promise(t=>{const i=()=>{$n&&typeof $n.setFrameHeight=="function"&&typeof $n.setComponentValue=="function"?t():setTimeout(i,10)};i()}));sy(this,"handleResize",t=>{this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(!(!this.state.isStreamlitReady||!$n||typeof $n.setFrameHeight!="function"))try{const i=(t==null?void 0:t.height)||300;Math.abs(i-this.state.lastHeight)>0&&($n.setFrameHeight(i),this.setState({lastHeight:i}))}catch(i){console.error("StreamlitFunPlayer: setFrameHeight failed:",i)}},50)});this.state={isStreamlitReady:!1,lastHeight:0},this.resizeTimeout=null}componentDidMount(){this.waitForStreamlitReady().then(()=>{this.setState({isStreamlitReady:!0}),this.handleResize()})}componentDidUpdate(t,i){this.state.isStreamlitReady&&!i.isStreamlitReady&&this.handleResize()}componentWillUnmount(){this.resizeTimeout&&clearTimeout(this.resizeTimeout)}render(){const{args:t,theme:i}=this.props,{isStreamlitReady:r}=this.state,s=(t==null?void 0:t.playlist)||null,u=(t==null?void 0:t.theme)||null||i;return r?Ps.jsx(eO,{playlist:s,theme:u,onResize:this.handleResize}):Ps.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading..."})}}const iO=ED(tO);{const n=console.warn;console.warn=(...e)=>{e.join(" ").includes("Feature Policy")||n.apply(console,e)}}class nO extends T3.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("FunPlayer Error Boundary caught an error:",e,t)}render(){var e;return this.state.hasError?Ps.jsxs("div",{style:{padding:"20px",background:"#fee",border:"1px solid #fcc",borderRadius:"4px",fontFamily:"monospace",fontSize:"14px"},children:[Ps.jsx("h3",{children:"Something went wrong with FunPlayer"}),Ps.jsxs("details",{children:[Ps.jsx("summary",{children:"Error details"}),Ps.jsx("pre",{children:(e=this.state.error)==null?void 0:e.toString()})]}),Ps.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"10px",padding:"5px 10px",cursor:"pointer"},children:"Reload"})]}):this.props.children}}const LE=document.getElementById("root");if(!LE)throw new Error("Root element not found");const rO=I3.createRoot(LE);rO.render(Ps.jsx(nO,{children:Ps.jsx(iO,{})}));export{Ii as _,ND as a,FD as b,Ex as c,Ne as d,sc as e,me as f,Js as g,vI as l,rg as r,j_ as v,W as w};
